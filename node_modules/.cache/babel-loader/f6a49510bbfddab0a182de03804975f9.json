{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/mirrorTextModel.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/mirrorTextModel.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDMyLWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1sYXN0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1sYXN0LWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi4KICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCmltcG9ydCB7IHNwbGl0TGluZXMgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9zdHJpbmdzLmpzJzsKaW1wb3J0IHsgUG9zaXRpb24gfSBmcm9tICcuLi9jb3JlL3Bvc2l0aW9uLmpzJzsKaW1wb3J0IHsgUHJlZml4U3VtQ29tcHV0ZXIgfSBmcm9tICcuL3ByZWZpeFN1bUNvbXB1dGVyLmpzJzsKZXhwb3J0IHZhciBNaXJyb3JUZXh0TW9kZWwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIE1pcnJvclRleHRNb2RlbCh1cmksIGxpbmVzLCBlb2wsIHZlcnNpb25JZCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1pcnJvclRleHRNb2RlbCk7CiAgICB0aGlzLl91cmkgPSB1cmk7CiAgICB0aGlzLl9saW5lcyA9IGxpbmVzOwogICAgdGhpcy5fZW9sID0gZW9sOwogICAgdGhpcy5fdmVyc2lvbklkID0gdmVyc2lvbklkOwogICAgdGhpcy5fbGluZVN0YXJ0cyA9IG51bGw7CiAgICB0aGlzLl9jYWNoZWRUZXh0VmFsdWUgPSBudWxsOwogIH0KICBfY3JlYXRlQ2xhc3MoTWlycm9yVGV4dE1vZGVsLCBbewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdGhpcy5fbGluZXMubGVuZ3RoID0gMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2ZXJzaW9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdmVyc2lvbklkOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFRleHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRleHQoKSB7CiAgICAgIGlmICh0aGlzLl9jYWNoZWRUZXh0VmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLl9jYWNoZWRUZXh0VmFsdWUgPSB0aGlzLl9saW5lcy5qb2luKHRoaXMuX2VvbCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRleHRWYWx1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkV2ZW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25FdmVudHMoZSkgewogICAgICBpZiAoZS5lb2wgJiYgZS5lb2wgIT09IHRoaXMuX2VvbCkgewogICAgICAgIHRoaXMuX2VvbCA9IGUuZW9sOwogICAgICAgIHRoaXMuX2xpbmVTdGFydHMgPSBudWxsOwogICAgICB9CiAgICAgIC8vIFVwZGF0ZSBteSBsaW5lcwogICAgICB2YXIgY2hhbmdlcyA9IGUuY2hhbmdlczsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNoYW5nZXMpLAogICAgICAgIF9zdGVwOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgY2hhbmdlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICB0aGlzLl9hY2NlcHREZWxldGVSYW5nZShjaGFuZ2UucmFuZ2UpOwogICAgICAgICAgdGhpcy5fYWNjZXB0SW5zZXJ0VGV4dChuZXcgUG9zaXRpb24oY2hhbmdlLnJhbmdlLnN0YXJ0TGluZU51bWJlciwgY2hhbmdlLnJhbmdlLnN0YXJ0Q29sdW1uKSwgY2hhbmdlLnRleHQpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CiAgICAgIHRoaXMuX3ZlcnNpb25JZCA9IGUudmVyc2lvbklkOwogICAgICB0aGlzLl9jYWNoZWRUZXh0VmFsdWUgPSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogIl9lbnN1cmVMaW5lU3RhcnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZW5zdXJlTGluZVN0YXJ0cygpIHsKICAgICAgaWYgKCF0aGlzLl9saW5lU3RhcnRzKSB7CiAgICAgICAgdmFyIGVvbExlbmd0aCA9IHRoaXMuX2VvbC5sZW5ndGg7CiAgICAgICAgdmFyIGxpbmVzTGVuZ3RoID0gdGhpcy5fbGluZXMubGVuZ3RoOwogICAgICAgIHZhciBsaW5lU3RhcnRWYWx1ZXMgPSBuZXcgVWludDMyQXJyYXkobGluZXNMZW5ndGgpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXNMZW5ndGg7IGkrKykgewogICAgICAgICAgbGluZVN0YXJ0VmFsdWVzW2ldID0gdGhpcy5fbGluZXNbaV0ubGVuZ3RoICsgZW9sTGVuZ3RoOwogICAgICAgIH0KICAgICAgICB0aGlzLl9saW5lU3RhcnRzID0gbmV3IFByZWZpeFN1bUNvbXB1dGVyKGxpbmVTdGFydFZhbHVlcyk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQWxsIGNoYW5nZXMgdG8gYSBsaW5lJ3MgdGV4dCBnbyB0aHJvdWdoIHRoaXMgbWV0aG9kCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJfc2V0TGluZVRleHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRMaW5lVGV4dChsaW5lSW5kZXgsIG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuX2xpbmVzW2xpbmVJbmRleF0gPSBuZXdWYWx1ZTsKICAgICAgaWYgKHRoaXMuX2xpbmVTdGFydHMpIHsKICAgICAgICAvLyB1cGRhdGUgcHJlZml4IHN1bQogICAgICAgIHRoaXMuX2xpbmVTdGFydHMuc2V0VmFsdWUobGluZUluZGV4LCB0aGlzLl9saW5lc1tsaW5lSW5kZXhdLmxlbmd0aCArIHRoaXMuX2VvbC5sZW5ndGgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX2FjY2VwdERlbGV0ZVJhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWNjZXB0RGVsZXRlUmFuZ2UocmFuZ2UpIHsKICAgICAgaWYgKHJhbmdlLnN0YXJ0TGluZU51bWJlciA9PT0gcmFuZ2UuZW5kTGluZU51bWJlcikgewogICAgICAgIGlmIChyYW5nZS5zdGFydENvbHVtbiA9PT0gcmFuZ2UuZW5kQ29sdW1uKSB7CiAgICAgICAgICAvLyBOb3RoaW5nIHRvIGRlbGV0ZQogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyBEZWxldGUgdGV4dCBvbiB0aGUgYWZmZWN0ZWQgbGluZQogICAgICAgIHRoaXMuX3NldExpbmVUZXh0KHJhbmdlLnN0YXJ0TGluZU51bWJlciAtIDEsIHRoaXMuX2xpbmVzW3JhbmdlLnN0YXJ0TGluZU51bWJlciAtIDFdLnN1YnN0cmluZygwLCByYW5nZS5zdGFydENvbHVtbiAtIDEpICsgdGhpcy5fbGluZXNbcmFuZ2Uuc3RhcnRMaW5lTnVtYmVyIC0gMV0uc3Vic3RyaW5nKHJhbmdlLmVuZENvbHVtbiAtIDEpKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8gVGFrZSByZW1haW5pbmcgdGV4dCBvbiBsYXN0IGxpbmUgYW5kIGFwcGVuZCBpdCB0byByZW1haW5pbmcgdGV4dCBvbiBmaXJzdCBsaW5lCiAgICAgIHRoaXMuX3NldExpbmVUZXh0KHJhbmdlLnN0YXJ0TGluZU51bWJlciAtIDEsIHRoaXMuX2xpbmVzW3JhbmdlLnN0YXJ0TGluZU51bWJlciAtIDFdLnN1YnN0cmluZygwLCByYW5nZS5zdGFydENvbHVtbiAtIDEpICsgdGhpcy5fbGluZXNbcmFuZ2UuZW5kTGluZU51bWJlciAtIDFdLnN1YnN0cmluZyhyYW5nZS5lbmRDb2x1bW4gLSAxKSk7CiAgICAgIC8vIERlbGV0ZSBtaWRkbGUgbGluZXMKICAgICAgdGhpcy5fbGluZXMuc3BsaWNlKHJhbmdlLnN0YXJ0TGluZU51bWJlciwgcmFuZ2UuZW5kTGluZU51bWJlciAtIHJhbmdlLnN0YXJ0TGluZU51bWJlcik7CiAgICAgIGlmICh0aGlzLl9saW5lU3RhcnRzKSB7CiAgICAgICAgLy8gdXBkYXRlIHByZWZpeCBzdW0KICAgICAgICB0aGlzLl9saW5lU3RhcnRzLnJlbW92ZVZhbHVlcyhyYW5nZS5zdGFydExpbmVOdW1iZXIsIHJhbmdlLmVuZExpbmVOdW1iZXIgLSByYW5nZS5zdGFydExpbmVOdW1iZXIpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX2FjY2VwdEluc2VydFRleHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hY2NlcHRJbnNlcnRUZXh0KHBvc2l0aW9uLCBpbnNlcnRUZXh0KSB7CiAgICAgIGlmIChpbnNlcnRUZXh0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIC8vIE5vdGhpbmcgdG8gaW5zZXJ0CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpbnNlcnRMaW5lcyA9IHNwbGl0TGluZXMoaW5zZXJ0VGV4dCk7CiAgICAgIGlmIChpbnNlcnRMaW5lcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAvLyBJbnNlcnRpbmcgdGV4dCBvbiBvbmUgbGluZQogICAgICAgIHRoaXMuX3NldExpbmVUZXh0KHBvc2l0aW9uLmxpbmVOdW1iZXIgLSAxLCB0aGlzLl9saW5lc1twb3NpdGlvbi5saW5lTnVtYmVyIC0gMV0uc3Vic3RyaW5nKDAsIHBvc2l0aW9uLmNvbHVtbiAtIDEpICsgaW5zZXJ0TGluZXNbMF0gKyB0aGlzLl9saW5lc1twb3NpdGlvbi5saW5lTnVtYmVyIC0gMV0uc3Vic3RyaW5nKHBvc2l0aW9uLmNvbHVtbiAtIDEpKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8gQXBwZW5kIG92ZXJmbG93aW5nIHRleHQgZnJvbSBmaXJzdCBsaW5lIHRvIHRoZSBlbmQgb2YgdGV4dCB0byBpbnNlcnQKICAgICAgaW5zZXJ0TGluZXNbaW5zZXJ0TGluZXMubGVuZ3RoIC0gMV0gKz0gdGhpcy5fbGluZXNbcG9zaXRpb24ubGluZU51bWJlciAtIDFdLnN1YnN0cmluZyhwb3NpdGlvbi5jb2x1bW4gLSAxKTsKICAgICAgLy8gRGVsZXRlIG92ZXJmbG93aW5nIHRleHQgZnJvbSBmaXJzdCBsaW5lIGFuZCBpbnNlcnQgdGV4dCBvbiBmaXJzdCBsaW5lCiAgICAgIHRoaXMuX3NldExpbmVUZXh0KHBvc2l0aW9uLmxpbmVOdW1iZXIgLSAxLCB0aGlzLl9saW5lc1twb3NpdGlvbi5saW5lTnVtYmVyIC0gMV0uc3Vic3RyaW5nKDAsIHBvc2l0aW9uLmNvbHVtbiAtIDEpICsgaW5zZXJ0TGluZXNbMF0pOwogICAgICAvLyBJbnNlcnQgbmV3IGxpbmVzICYgc3RvcmUgbGVuZ3RocwogICAgICB2YXIgbmV3TGVuZ3RocyA9IG5ldyBVaW50MzJBcnJheShpbnNlcnRMaW5lcy5sZW5ndGggLSAxKTsKICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBpbnNlcnRMaW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuX2xpbmVzLnNwbGljZShwb3NpdGlvbi5saW5lTnVtYmVyICsgaSAtIDEsIDAsIGluc2VydExpbmVzW2ldKTsKICAgICAgICBuZXdMZW5ndGhzW2kgLSAxXSA9IGluc2VydExpbmVzW2ldLmxlbmd0aCArIHRoaXMuX2VvbC5sZW5ndGg7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX2xpbmVTdGFydHMpIHsKICAgICAgICAvLyB1cGRhdGUgcHJlZml4IHN1bQogICAgICAgIHRoaXMuX2xpbmVTdGFydHMuaW5zZXJ0VmFsdWVzKHBvc2l0aW9uLmxpbmVOdW1iZXIsIG5ld0xlbmd0aHMpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBNaXJyb3JUZXh0TW9kZWw7Cn0oKTs="},{"version":3,"names":["splitLines","Position","PrefixSumComputer","MirrorTextModel","uri","lines","eol","versionId","_uri","_lines","_eol","_versionId","_lineStarts","_cachedTextValue","length","join","e","changes","change","_acceptDeleteRange","range","_acceptInsertText","startLineNumber","startColumn","text","eolLength","linesLength","lineStartValues","Uint32Array","i","lineIndex","newValue","setValue","endLineNumber","endColumn","_setLineText","substring","splice","removeValues","position","insertText","insertLines","lineNumber","column","newLengths","insertValues"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/mirrorTextModel.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { splitLines } from '../../../base/common/strings.js';\nimport { Position } from '../core/position.js';\nimport { PrefixSumComputer } from './prefixSumComputer.js';\nexport class MirrorTextModel {\n    constructor(uri, lines, eol, versionId) {\n        this._uri = uri;\n        this._lines = lines;\n        this._eol = eol;\n        this._versionId = versionId;\n        this._lineStarts = null;\n        this._cachedTextValue = null;\n    }\n    dispose() {\n        this._lines.length = 0;\n    }\n    get version() {\n        return this._versionId;\n    }\n    getText() {\n        if (this._cachedTextValue === null) {\n            this._cachedTextValue = this._lines.join(this._eol);\n        }\n        return this._cachedTextValue;\n    }\n    onEvents(e) {\n        if (e.eol && e.eol !== this._eol) {\n            this._eol = e.eol;\n            this._lineStarts = null;\n        }\n        // Update my lines\n        const changes = e.changes;\n        for (const change of changes) {\n            this._acceptDeleteRange(change.range);\n            this._acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n        this._versionId = e.versionId;\n        this._cachedTextValue = null;\n    }\n    _ensureLineStarts() {\n        if (!this._lineStarts) {\n            const eolLength = this._eol.length;\n            const linesLength = this._lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this._lines[i].length + eolLength;\n            }\n            this._lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n    /**\n     * All changes to a line's text go through this method\n     */\n    _setLineText(lineIndex, newValue) {\n        this._lines[lineIndex] = newValue;\n        if (this._lineStarts) {\n            // update prefix sum\n            this._lineStarts.setValue(lineIndex, this._lines[lineIndex].length + this._eol.length);\n        }\n    }\n    _acceptDeleteRange(range) {\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this._lines[range.startLineNumber - 1].substring(range.endColumn - 1));\n            return;\n        }\n        // Take remaining text on last line and append it to remaining text on first line\n        this._setLineText(range.startLineNumber - 1, this._lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this._lines[range.endLineNumber - 1].substring(range.endColumn - 1));\n        // Delete middle lines\n        this._lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this._lineStarts) {\n            // update prefix sum\n            this._lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n    _acceptInsertText(position, insertText) {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = splitLines(insertText);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\n                + insertLines[0]\n                + this._lines[position.lineNumber - 1].substring(position.column - 1));\n            return;\n        }\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this._lines[position.lineNumber - 1].substring(position.column - 1);\n        // Delete overflowing text from first line and insert text on first line\n        this._setLineText(position.lineNumber - 1, this._lines[position.lineNumber - 1].substring(0, position.column - 1)\n            + insertLines[0]);\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this._lines.splice(position.lineNumber + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this._eol.length;\n        }\n        if (this._lineStarts) {\n            // update prefix sum\n            this._lineStarts.insertValues(position.lineNumber, newLengths);\n        }\n    }\n}\n"],"mappings":"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"}]}