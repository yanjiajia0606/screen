{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/echart/packages/vue/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/echart/packages/vue/index.vue","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5kb3QtYWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnN0aWNreS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGNyZWF0ZSBmcm9tICIuLi8uLi9jcmVhdGUiOwpleHBvcnQgZGVmYXVsdCBjcmVhdGUoewogIG5hbWU6ICJ2dWUiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWxvYWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGNvbnRlbnQ6IGZ1bmN0aW9uIGNvbnRlbnQoKSB7CiAgICAgIHRoaXMuaW5pdFZ1ZSgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbnRlbnQ6IGZ1bmN0aW9uIGNvbnRlbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbi5jb250ZW50OwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFZ1ZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdFZ1ZTogZnVuY3Rpb24gaW5pdFZ1ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy5yZWxvYWQgPSBmYWxzZTsKICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy5nZXRTb3VyY2UoInRlbXBsYXRlIik7CiAgICAgIGlmICghdGVtcGxhdGUpIHJldHVybjsKICAgICAgdmFyIHNjcmlwdCA9IHRoaXMuZ2V0U291cmNlKCJzY3JpcHQiKTsKICAgICAgaWYgKHNjcmlwdCkgewogICAgICAgIHNjcmlwdCA9IHNjcmlwdC5yZXBsYWNlKC9leHBvcnQgZGVmYXVsdC8sICJyZXR1cm4iKTsKICAgICAgfQogICAgICB2YXIgc3R5bGVDc3MgPSB0aGlzLmdldFNvdXJjZSgic3R5bGUiKTsKICAgICAgdmFyIHN0eWxlSWQgPSAnc3R5bGUtJyArIHRoaXMuaWQ7CiAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdHlsZUlkKSkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0eWxlSWQpLnJlbW92ZSgpOwogICAgICB9CiAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgIHN0eWxlLmlkID0gc3R5bGVJZDsKICAgICAgc3R5bGUuaW5uZXJIVE1MID0gc3R5bGVDc3M7CiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgICB2YXIgb2JqID0gbmV3IEZ1bmN0aW9uKHNjcmlwdCkoKTsKICAgICAgb2JqLnRlbXBsYXRlID0gdGVtcGxhdGU7CiAgICAgIG9iai5wcm9wcyA9IHsKICAgICAgICBkYXRhQ2hhcnQ6IE9iamVjdAogICAgICB9OwogICAgICBWdWUuY29tcG9uZW50KHRoaXMuaWQsIG9iaik7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5yZWxvYWQgPSB0cnVlOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRTb3VyY2U6IGZ1bmN0aW9uIGdldFNvdXJjZSh0eXBlKSB7CiAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCI8Ii5jb25jYXQodHlwZSwgIltePl0qPiIpKTsKICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7CiAgICAgIHZhciBtYXRjaGVzID0gY29udGVudC5tYXRjaChyZWcpOwogICAgICBpZiAobWF0Y2hlcykgewogICAgICAgIHZhciBzdGFydCA9IGNvbnRlbnQuaW5kZXhPZihtYXRjaGVzWzBdKSArIG1hdGNoZXNbMF0ubGVuZ3RoOwogICAgICAgIHZhciBlbmQgPSBjb250ZW50Lmxhc3RJbmRleE9mKCI8LyIuY29uY2F0KHR5cGUpKTsKICAgICAgICByZXR1cm4gY29udGVudC5zbGljZShzdGFydCwgZW5kKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhpdGVtKSB7CiAgICAgIHRoaXMudXBkYXRlQ2xpY2soaXRlbSB8fCB0aGlzLmRhdGFDaGFydCk7CiAgICAgIHRoaXMuY2xpY2tGb3JtYXR0ZXIgJiYgdGhpcy5jbGlja0Zvcm1hdHRlcih7CiAgICAgICAgZGF0YTogaXRlbSB8fCB0aGlzLmRhdGFDaGFydAogICAgICB9LCB0aGlzLmdldEl0ZW1SZWZzKCkpOwogICAgfQogIH0KfSk7"},{"version":3,"mappings":";;;;;;;;AAaA;AACA;AACA;EACAA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACAD;MACA;IACA;EACA;EACAE;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACA;MACA;MACA;MACA;QACAC;MACA;MACA;MACA;MACA;QACAC;MACA;MACA;MACAC;MACAA;MACAD;MACA;MACAE;MACAA;QACAC;MACA;MACAC;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACAf;MACA;IACA;EACA;AACA","names":["name","data","reload","watch","content","computed","mounted","methods","initVue","script","document","style","obj","dataChart","Vue","getSource","handleClick"],"sourceRoot":"src/echart/packages/vue","sources":["index.vue"],"sourcesContent":["<template>\n  <div :class=\"[b(),className]\"\n       :style=\"styleSizeName\"\n       ref=\"main\">\n    <component :is=\"id\"\n               v-if=\"reload\"\n               @click=\"handleClick\"\n               :dataChart=\"dataChart\">\n    </component>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport create from \"../../create\";\nexport default create({\n  name: \"vue\",\n  data () {\n    return {\n      reload: false\n    };\n  },\n  watch: {\n    content () {\n      this.initVue()\n    }\n  },\n  computed: {\n    content () {\n      return this.option.content;\n    }\n  },\n  mounted () {\n    this.initVue()\n  },\n  methods: {\n    initVue () {\n      this.reload = false\n      let template = this.getSource(\"template\");\n      if (!template) return\n      let script = this.getSource(\"script\");\n      if (script) {\n        script = script.replace(/export default/, \"return\");\n      }\n      let styleCss = this.getSource(\"style\");\n      let styleId = 'style-' + this.id;\n      if (document.getElementById(styleId)) {\n        document.getElementById(styleId).remove()\n      }\n      let style = document.createElement(\"style\");\n      style.id = styleId\n      style.innerHTML = styleCss;\n      document.head.appendChild(style);\n      let obj = new Function(script)();\n      obj.template = template;\n      obj.props = {\n        dataChart: Object,\n      }\n      Vue.component(this.id, obj)\n      this.$nextTick(() => {\n        this.reload = true\n      })\n    },\n    getSource (type) {\n      const reg = new RegExp(`<${type}[^>]*>`);\n      let content = this.content;\n      let matches = content.match(reg);\n      if (matches) {\n        let start = content.indexOf(matches[0]) + matches[0].length;\n        let end = content.lastIndexOf(`</${type}`);\n        return content.slice(start, end)\n      }\n    },\n    handleClick (item) {\n      this.updateClick(item || this.dataChart);\n      this.clickFormatter && this.clickFormatter({\n        data: item || this.dataChart\n      }, this.getItemRefs());\n    },\n  }\n});\n</script>\n\n\n"]}]}