{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/components/apiPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/components/apiPanel.vue","mtime":1668482176645},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgeyBnZXRBcGlTY291cmNlLCBnZXRBcGlHcm91cCB9IGZyb20gJ0AvYXBpL3YyJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYjogJycsCiAgICAgIGRpYzogW10sCiAgICAgIGFwaURpYzogW10sCiAgICAgIHBhdGhzOiB7fSwKICAgICAgYXBpU3JjOiAnJywKICAgICAgbWV0aG9kOiAnJwogICAgICAvLyBhcGlPYmplY3Q6IHsKICAgICAgLy8gICBhcGlTcmM6ICcnLAogICAgICAvLyAgIG1ldGhvZDogJycsCiAgICAgIC8vIH0sCiAgICAgIC8vICAgYXBpT2JqZWN0OiAiIiwKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGFwaVBhcmFtczogZnVuY3Rpb24gYXBpUGFyYW1zKCkgewogICAgICBpZiAodGhpcy5wYXRoc1t0aGlzLmFwaVNyY10pIHsKICAgICAgICBpZiAodGhpcy5wYXRoc1t0aGlzLmFwaVNyY10uZ2V0KSB7CiAgICAgICAgICB0aGlzLm1ldGhvZCA9ICdHRVQnOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXRoc1t0aGlzLmFwaVNyY10ucG9zdCkgewogICAgICAgICAgdGhpcy5tZXRob2QgPSAnUE9TVCc7CiAgICAgICAgfQogICAgICAgIHRoaXMuJGVtaXQoJ2dldEFwaScsIHsKICAgICAgICAgIHVybDogJy92MicgKyB0aGlzLmFwaVNyYywKICAgICAgICAgIG1ldGhvZDogdGhpcy5tZXRob2QudG9Mb3dlckNhc2UoKQogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLnBhdGhzW3RoaXMuYXBpU3JjXS5nZXQgfHwgdGhpcy5wYXRoc1t0aGlzLmFwaVNyY10ucG9zdDsKICAgICAgfQogICAgICByZXR1cm4ge307CiAgICB9IC8vIG1ldGhvZCgpIHsKICAgIC8vICAgaWYgKHRoaXMucGF0aHNbdGhpcy5hcGlTcmNdKSB7CiAgICAvLyAgICAgaWYgKHRoaXMucGF0aHNbdGhpcy5hcGlTcmNdLmdldCkgewogICAgLy8gICAgICAgcmV0dXJuICdHRVQnCiAgICAvLyAgICAgfSBlbHNlIGlmICh0aGlzLnBhdGhzW3RoaXMuYXBpU3JjXS5wb3N0KSB7CiAgICAvLyAgICAgICByZXR1cm4gJ1BPU1QnCiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIHJldHVybiAnJwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEdyb3VwOiBmdW5jdGlvbiBnZXRHcm91cCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgZ2V0QXBpR3JvdXAoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMsICdlbmNvZGVVUklDb21wb25lbnQnKTsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgIGlmIChkYXRhLmxlbmd0aCkgewogICAgICAgICAgX3RoaXMuZGljID0gZGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBsYWJlbDogaXRlbS5uYW1lLAogICAgICAgICAgICAgIHZhbHVlOiBpdGVtLm5hbWUsCiAgICAgICAgICAgICAgaXRlbTogaXRlbQogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpcy5kYiA9IF90aGlzLmRpY1swXS52YWx1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldEFwaUxpc3Q6IGZ1bmN0aW9uIGdldEFwaUxpc3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBnZXRBcGlTY291cmNlKHRoaXMuZGIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBwYXRocyA9IHJlcy5kYXRhLnBhdGhzOwogICAgICAgIF90aGlzMi5wYXRocyA9IHBhdGhzOwogICAgICAgIGZvciAodmFyIHVybCBpbiBwYXRocykgewogICAgICAgICAgaWYgKHBhdGhzW3VybF0uZ2V0KSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHVybC5nZXQpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh1cmwsICJwcHBwIik7CiAgICAgICAgICAgIHZhciBvYmogPSBwYXRoc1t1cmxdLmdldDsKICAgICAgICAgICAgX3RoaXMyLmFwaURpYy5wdXNoKHsKICAgICAgICAgICAgICBsYWJlbDogb2JqLnRhZ3NbMF0sCiAgICAgICAgICAgICAgdmFsdWU6IHVybAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIC8vICAgdGhpcy5hcGlEaWMucHVzaCh7CiAgICAgICAgICAvLyAgICAgbGFiZWw6IHBhdGhzW2ldLnRhZ3NbMF0sCiAgICAgICAgICAvLyAgICAgdmFsdWU6IGksCiAgICAgICAgICAvLyAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgd2luZG93LnRoID0gdGhpczsKICAgIHRoaXMuZ2V0R3JvdXAoKTsKICB9LAogIHdhdGNoOiB7CiAgICBkYjogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGIpOwogICAgICAgIC8vIHRoaXMucGF0aHMgPSB7fQogICAgICAgIHRoaXMuYXBpRGljID0gW107CiAgICAgICAgdGhpcy5hcGlTcmMgPSAnJzsKICAgICAgICB0aGlzLmdldEFwaUxpc3QoKTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;AAoCA;AAEA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACA;MACA;MACA;MACA;IACA;EACA;;EACAC;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;QACA;UACAC;UACAH;QACA;QACA;MACA;MACA;IACA,EACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAI;IACAC;MAAA;MACAC;QACAC;QACA;QACA;UACA;YACA;cACAC;cACAC;cACAC;YACA;UACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACAC;QACA;QACA;QACA;UACA;YACA;YACA;YACA;YACA;cACAJ;cACAC;YACA;UACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;EACA;EACAI;IACAC;IACA;EACA;EACAC;IACApB;MACAqB;QACA;QACA;QACA;QACA;QACA;MACA;MACAC;IACA;EACA;AACA","names":["data","db","dic","apiDic","paths","apiSrc","method","computed","apiParams","url","methods","getGroup","getApiGroup","console","label","value","item","getApiList","getApiScource","created","window","watch","handler","deep"],"sourceRoot":"src/page/components","sources":["apiPanel.vue"],"sourcesContent":["<!--\n * @Author: 闫佳佳 18332162809@163.com\n * @Date: 2022-11-01 17:57:55\n * @LastEditors: 闫佳佳 18332162809@163.com\n * @LastEditTime: 2022-11-15 11:15:53\n * @FilePath: /avue-data/src/page/components/apiPanel.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<template>\n  <div>\n    <el-form-item label=\"数据模块\">\n      <avue-select :dic=\"dic\" v-model=\"db\"></avue-select>\n    </el-form-item>\n    <el-form-item label=\"接口列表\">\n      <avue-select :dic=\"apiDic\" v-model=\"apiSrc\"></avue-select>\n    </el-form-item>\n    <el-form-item label=\"接口地址\" v-show=\"apiSrc\"\n      ><span class=\"no-warp\">{{ apiSrc }}</span>\n    </el-form-item>\n    <el-form-item label=\"请求方式\" v-show=\"apiSrc\">\n      <span class=\"no-warp post-method\">{{ method }}</span>\n    </el-form-item>\n    <el-form-item label=\"接口描述\" v-show=\"apiSrc\">\n      {{ apiParams.description }}\n      <span>({{ apiParams.summary }})</span>\n    </el-form-item>\n    <el-form-item label=\"全局参数\" v-show=\"apiSrc\">\n      <!-- <span class=\"no-warp\">{{ this.apiVal }}</span> -->\n    </el-form-item>\n    <el-form-item label=\"请求参数\" v-show=\"apiSrc\">\n      <!-- <span class=\"no-warp\">{{ this.apiVal }}</span> -->\n    </el-form-item>\n  </div>\n</template>\n\n<script>\nimport { getApiScource, getApiGroup } from '@/api/v2'\n\nexport default {\n  data() {\n    return {\n      db: '',\n      dic: [],\n      apiDic: [],\n      paths: {},\n      apiSrc: '',\n      method: '',\n      // apiObject: {\n      //   apiSrc: '',\n      //   method: '',\n      // },\n      //   apiObject: \"\",\n    }\n  },\n  computed: {\n    apiParams() {\n      if (this.paths[this.apiSrc]) {\n        if (this.paths[this.apiSrc].get) {\n          this.method = 'GET'\n        } else if (this.paths[this.apiSrc].post) {\n          this.method = 'POST'\n        }\n        this.$emit('getApi', {\n          url: '/v2' + this.apiSrc,\n          method: this.method.toLowerCase(),\n        })\n        return this.paths[this.apiSrc].get || this.paths[this.apiSrc].post\n      }\n      return {}\n    },\n    // method() {\n    //   if (this.paths[this.apiSrc]) {\n    //     if (this.paths[this.apiSrc].get) {\n    //       return 'GET'\n    //     } else if (this.paths[this.apiSrc].post) {\n    //       return 'POST'\n    //     } else {\n    //       return ''\n    //     }\n    //   }\n    // },\n  },\n  methods: {\n    getGroup() {\n      getApiGroup().then((res) => {\n        console.log(res, 'encodeURIComponent')\n        const { data } = res\n        if (data.length) {\n          this.dic = data.map((item) => {\n            return {\n              label: item.name,\n              value: item.name,\n              item,\n            }\n          })\n          this.db = this.dic[0].value\n        }\n      })\n    },\n    getApiList() {\n      getApiScource(this.db).then((res) => {\n        const { paths } = res.data\n        this.paths = paths\n        for (let url in paths) {\n          if (paths[url].get) {\n            // console.log(url.get);\n            // console.log(url, \"pppp\");\n            const obj = paths[url].get\n            this.apiDic.push({\n              label: obj.tags[0],\n              value: url,\n            })\n          }\n          //   this.apiDic.push({\n          //     label: paths[i].tags[0],\n          //     value: i,\n          //   });\n        }\n      })\n    },\n  },\n  created() {\n    window.th = this\n    this.getGroup()\n  },\n  watch: {\n    db: {\n      handler() {\n        // console.log(this.db);\n        // this.paths = {}\n        this.apiDic = []\n        this.apiSrc = ''\n        this.getApiList()\n      },\n      deep: true,\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.no-warp {\n  white-space: nowrap;\n}\n.post-method {\n  padding: 0 5px;\n  background: #0088ff;\n  margin-right: 5px;\n  color: #fff;\n}\n</style>\n"]}]}