{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/code.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/code.vue","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgeyB0aXAgfSBmcm9tICdAL2NvbmZpZyc7CmltcG9ydCB7IGZ1bkV2YWwgfSBmcm9tICdAL3V0aWxzL3V0aWxzJzsKaW1wb3J0IE1vbmFjb0VkaXRvciBmcm9tICdAL3BhZ2UvY29tcG9uZW50cy9lZGl0b3InOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTW9uYWNvRWRpdG9yOiBNb25hY29FZGl0b3IKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2RlOiAnJywKICAgICAgdGlwOiAnJwogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBydWxlczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgdGl0bGU6IFN0cmluZywKICAgIHZpc2libGU6IEJvb2xlYW4sCiAgICB0eXBlOiBTdHJpbmcsCiAgICB2YWx1ZTogW1N0cmluZywgT2JqZWN0LCBBcnJheV0KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICh0aGlzLnZhbGlkYXRlbnVsbCh2YWwpKSB7CiAgICAgICAgICBpZiAoWydkYXRhRm9ybWF0dGVyJywgJ3N0eWxlc0Zvcm1hdHRlciddLmluY2x1ZGVzKHRoaXMudHlwZSkgJiYgdGhpcy52YWxpZGF0ZW51bGwodmFsKSkgewogICAgICAgICAgICB0aGlzLmNvZGUgPSAiKGRhdGEscGFyYW1zLHJlZnMpPT57XG4gICAgcmV0dXJuIHt9XG59IjsKICAgICAgICAgIH0gZWxzZSBpZiAoWydxdWVyeScsICdoZWFkZXInLCAnZGF0YVF1ZXJ5JywgJ2RhdGFIZWFkZXInXS5pbmNsdWRlcyh0aGlzLnR5cGUpICYmIHRoaXMudmFsaWRhdGVudWxsKHZhbCkpIHsKICAgICAgICAgICAgdGhpcy5jb2RlID0gIihkYXRhKT0+e1xuICAgIHJldHVybiB7fVxufSI7CiAgICAgICAgICB9IGVsc2UgaWYgKFsnZWNoYXJ0Rm9ybWF0dGVyJ10uaW5jbHVkZXModGhpcy50eXBlKSAmJiB0aGlzLnZhbGlkYXRlbnVsbCh2YWwpKSB7CiAgICAgICAgICAgIHRoaXMuY29kZSA9ICIoZGF0YSk9PntcbiAgICByZXR1cm4ge31cbn0iOwogICAgICAgICAgfSBlbHNlIGlmIChbJ2NsaWNrRm9ybWF0dGVyJ10uaW5jbHVkZXModGhpcy50eXBlKSAmJiB0aGlzLnZhbGlkYXRlbnVsbCh2YWwpKSB7CiAgICAgICAgICAgIHRoaXMuY29kZSA9ICIocGFyYW1zLHJlZnMpPT57XG4gICAgY29uc29sZS5sb2cocGFyYW1zLHJlZnMpXG59IjsKICAgICAgICAgIH0gZWxzZSBpZiAoWydsYWJlbEZvcm1hdHRlcicsICdmb3JtYXR0ZXInXS5pbmNsdWRlcyh0aGlzLnR5cGUpICYmIHRoaXMudmFsaWRhdGVudWxsKHZhbCkpIHsKICAgICAgICAgICAgdGhpcy5jb2RlID0gIihuYW1lLGRhdGEpPT57XG4gICAgY29uc29sZS5sb2cobmFtZSxkYXRhKVxuICAgIHJldHVybiAnJ1xufSI7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY29kZSA9IHZhbDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMudGlwID0gdGlwOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2xvc2U6IGZ1bmN0aW9uIGhhbmRsZUNsb3NlKCkgewogICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpOwogICAgfSwKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgdmFsdWUgPSB0aGlzLmNvZGU7CiAgICAgIGlmICghdGhpcy5ydWxlcykgewogICAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdCcsIHZhbHVlKTsKICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIGZ1bkV2YWwodmFsdWUpOwogICAgICAgIGlmIChbJ2RhdGEnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB2YWx1ZSA9IGZ1bkV2YWwodmFsdWUpOwogICAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdCcsIHZhbHVlKTsKICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlbDmja7moLzlvI/mnInor68nKTsKICAgICAgfQogICAgfSwKICAgIHNldFZpc2libGU6IGZ1bmN0aW9uIHNldFZpc2libGUodmFsKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2aXNpYmxlJywgdmFsKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";AAwBA;AACA;AACA;AACA;EACAA;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;IACAC;IACAH;IACAI;EACA;EACAC;IACAD;MACAE;QACA;UACA;YACA,qDAEA;UACA;YACA,yCAEA;UACA;YACA,yCAEA;UACA;YACA,+DAEA;UACA;YACA,0EAGA;UACA;QACA;UACA;QACA;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;MACA;MACA;QACAC;QACA;QACA;QACA;MACA;QACAC;QACA;MACA;IAEA;IACAC;MACA;IACA;EACA;AACA","names":["components","MonacoEditor","data","code","tip","props","rules","type","default","title","visible","value","watch","handler","immediate","deep","created","methods","handleClose","submit","funEval","console","setVisible"],"sourceRoot":"src/page/group","sources":["code.vue"],"sourcesContent":["<template>\n  <el-dialog :visible.sync=\"visible\"\n             :close-on-click-modal=\"false\"\n             :before-close=\"handleClose\"\n             :title=\"title || '数据处理'\"\n             width=\"80%\">\n\n    <div class=\"content\">\n      <monaco-editor v-model=\"code\"></monaco-editor>\n      <monaco-editor v-model=\"tip\"\n                     disabled></monaco-editor>\n    </div>\n    <span slot=\"footer\"\n          class=\"dialog-footer\">\n      <el-button size=\"small\"\n                 @click=\"setVisible(false)\">取 消</el-button>\n      <el-button type=\"primary\"\n                 @click=\"submit\"\n                 size=\"small\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { tip } from '@/config'\nimport { funEval } from '@/utils/utils'\nimport MonacoEditor from '@/page/components/editor'\nexport default {\n  components: { MonacoEditor },\n  data () {\n    return {\n      code: '',\n      tip: ''\n    }\n  },\n  props: {\n    rules: {\n      type: Boolean,\n      default: true\n    },\n    title: String,\n    visible: Boolean,\n    type: String,\n    value: [String, Object, Array]\n  },\n  watch: {\n    value: {\n      handler (val) {\n        if (this.validatenull(val)) {\n          if (['dataFormatter', 'stylesFormatter'].includes(this.type) && this.validatenull(val)) {\n            this.code = `(data,params,refs)=>{\n    return {}\n}`\n          } else if (['query', 'header', 'dataQuery', 'dataHeader'].includes(this.type) && this.validatenull(val)) {\n            this.code = `(data)=>{\n    return {}\n}`\n          } else if (['echartFormatter'].includes(this.type) && this.validatenull(val)) {\n            this.code = `(data)=>{\n    return {}\n}`\n          } else if (['clickFormatter'].includes(this.type) && this.validatenull(val)) {\n            this.code = `(params,refs)=>{\n    console.log(params,refs)\n}`\n          } else if (['labelFormatter', 'formatter'].includes(this.type) && this.validatenull(val)) {\n            this.code = `(name,data)=>{\n    console.log(name,data)\n    return ''\n}`\n          }\n        } else {\n          this.code = val;\n        }\n      },\n      immediate: true,\n      deep: true,\n    },\n  },\n  created () {\n    this.tip = tip\n  },\n  methods: {\n    handleClose () {\n      this.setVisible(false);\n    },\n    submit () {\n      let value = this.code;\n      if (!this.rules) {\n        this.$emit('submit', value);\n        this.setVisible(false)\n        return\n      }\n      try {\n        funEval(value);\n        if (['data'].includes(this.type)) value = funEval(value);\n        this.$emit('submit', value);\n        this.setVisible(false)\n      } catch (error) {\n        console.log(error);\n        this.$message.error('数据格式有误')\n      }\n\n    },\n    setVisible (val) {\n      this.$emit('update:visible', val);\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.content {\n  display: flex;\n  .monaco_editor_container {\n    flex: 1;\n    &:first-child {\n      flex: 2;\n    }\n  }\n}\n</style>\n"]}]}