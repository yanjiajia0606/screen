{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIjsKaW1wb3J0IF9nZXQgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC50by1zdHJpbmctdGFnLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KdmFyIF9fZGVjb3JhdGUgPSB0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHsKICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsCiAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywKICAgIGQ7CiAgaWYgKCh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoUmVmbGVjdCkpID09PSAib2JqZWN0IiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gImZ1bmN0aW9uIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO2Vsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7CiAgfQogIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7Cn07CnZhciBfX3BhcmFtID0gdGhpcyAmJiB0aGlzLl9fcGFyYW0gfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikgewogIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsKICAgIGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7CiAgfTsKfTsKdmFyIF9fYXdhaXRlciA9IHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgewogIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZXNvbHZlKHZhbHVlKTsKICAgIH0pOwogIH0KICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgewogICAgICB0cnkgewogICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJlamVjdChlKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgewogICAgICByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsKICAgIH0KICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTsKICB9KTsKfTsKaW1wb3J0ICcuLi9zZXJ2aWNlcy9tYXJrZXJEZWNvcmF0aW9ucy5qcyc7CmltcG9ydCAnLi9tZWRpYS9lZGl0b3IuY3NzJzsKaW1wb3J0ICogYXMgbmxzIGZyb20gJy4uLy4uLy4uL25scy5qcyc7CmltcG9ydCAqIGFzIGRvbSBmcm9tICcuLi8uLi8uLi9iYXNlL2Jyb3dzZXIvZG9tLmpzJzsKaW1wb3J0IHsgb25VbmV4cGVjdGVkRXJyb3IgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9lcnJvcnMuanMnOwppbXBvcnQgeyBFbWl0dGVyLCBFdmVudERlbGl2ZXJ5UXVldWUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9ldmVudC5qcyc7CmltcG9ydCB7IERpc3Bvc2FibGUsIGRpc3Bvc2UgYXMgX2Rpc3Bvc2UgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9saWZlY3ljbGUuanMnOwppbXBvcnQgeyBTY2hlbWFzIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vbmV0d29yay5qcyc7CmltcG9ydCB7IEVkaXRvckNvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi9jb25maWcvZWRpdG9yQ29uZmlndXJhdGlvbi5qcyc7CmltcG9ydCB7IEVkaXRvckV4dGVuc2lvbnNSZWdpc3RyeSB9IGZyb20gJy4uL2VkaXRvckV4dGVuc2lvbnMuanMnOwppbXBvcnQgeyBJQ29kZUVkaXRvclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb2RlRWRpdG9yU2VydmljZS5qcyc7CmltcG9ydCB7IFZpZXcgfSBmcm9tICcuLi92aWV3LmpzJzsKaW1wb3J0IHsgVmlld1VzZXJJbnB1dEV2ZW50cyB9IGZyb20gJy4uL3ZpZXcvdmlld1VzZXJJbnB1dEV2ZW50cy5qcyc7CmltcG9ydCB7IGZpbHRlclZhbGlkYXRpb25EZWNvcmF0aW9ucyB9IGZyb20gJy4uLy4uL2NvbW1vbi9jb25maWcvZWRpdG9yT3B0aW9ucy5qcyc7CmltcG9ydCB7IEN1cnNvcnNDb250cm9sbGVyIH0gZnJvbSAnLi4vLi4vY29tbW9uL2N1cnNvci9jdXJzb3IuanMnOwppbXBvcnQgeyBDdXJzb3JDb2x1bW5zIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvcmUvY3Vyc29yQ29sdW1ucy5qcyc7CmltcG9ydCB7IFBvc2l0aW9uIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvcmUvcG9zaXRpb24uanMnOwppbXBvcnQgeyBSYW5nZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9jb3JlL3JhbmdlLmpzJzsKaW1wb3J0IHsgU2VsZWN0aW9uIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvcmUvc2VsZWN0aW9uLmpzJzsKaW1wb3J0IHsgSW50ZXJuYWxFZGl0b3JBY3Rpb24gfSBmcm9tICcuLi8uLi9jb21tb24vZWRpdG9yQWN0aW9uLmpzJzsKaW1wb3J0ICogYXMgZWRpdG9yQ29tbW9uIGZyb20gJy4uLy4uL2NvbW1vbi9lZGl0b3JDb21tb24uanMnOwppbXBvcnQgeyBFZGl0b3JDb250ZXh0S2V5cyB9IGZyb20gJy4uLy4uL2NvbW1vbi9lZGl0b3JDb250ZXh0S2V5cy5qcyc7CmltcG9ydCB7IE1vZGVsRGVjb3JhdGlvbk9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvdGV4dE1vZGVsLmpzJzsKaW1wb3J0IHsgZWRpdG9yVW5uZWNlc3NhcnlDb2RlQm9yZGVyLCBlZGl0b3JVbm5lY2Vzc2FyeUNvZGVPcGFjaXR5IH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvcmUvZWRpdG9yQ29sb3JSZWdpc3RyeS5qcyc7CmltcG9ydCB7IGVkaXRvckVycm9yQm9yZGVyLCBlZGl0b3JFcnJvckZvcmVncm91bmQsIGVkaXRvckhpbnRCb3JkZXIsIGVkaXRvckhpbnRGb3JlZ3JvdW5kLCBlZGl0b3JJbmZvQm9yZGVyLCBlZGl0b3JJbmZvRm9yZWdyb3VuZCwgZWRpdG9yV2FybmluZ0JvcmRlciwgZWRpdG9yV2FybmluZ0ZvcmVncm91bmQsIGVkaXRvckZvcmVncm91bmQsIGVkaXRvckVycm9yQmFja2dyb3VuZCwgZWRpdG9ySW5mb0JhY2tncm91bmQsIGVkaXRvcldhcm5pbmdCYWNrZ3JvdW5kIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vdGhlbWUvY29tbW9uL2NvbG9yUmVnaXN0cnkuanMnOwppbXBvcnQgeyBWaWV3TW9kZWwgfSBmcm9tICcuLi8uLi9jb21tb24vdmlld01vZGVsL3ZpZXdNb2RlbEltcGwuanMnOwppbXBvcnQgeyBJQ29tbWFuZFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9jb21tYW5kcy9jb21tb24vY29tbWFuZHMuanMnOwppbXBvcnQgeyBJQ29udGV4dEtleVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9jb250ZXh0a2V5L2NvbW1vbi9jb250ZXh0a2V5LmpzJzsKaW1wb3J0IHsgSUluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vaW5zdGFudGlhdGlvbi9jb21tb24vaW5zdGFudGlhdGlvbi5qcyc7CmltcG9ydCB7IFNlcnZpY2VDb2xsZWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vaW5zdGFudGlhdGlvbi9jb21tb24vc2VydmljZUNvbGxlY3Rpb24uanMnOwppbXBvcnQgeyBJTm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL25vdGlmaWNhdGlvbi9jb21tb24vbm90aWZpY2F0aW9uLmpzJzsKaW1wb3J0IHsgSVRoZW1lU2VydmljZSwgcmVnaXN0ZXJUaGVtaW5nUGFydGljaXBhbnQgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS90aGVtZS9jb21tb24vdGhlbWVTZXJ2aWNlLmpzJzsKaW1wb3J0IHsgSUFjY2Vzc2liaWxpdHlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vYWNjZXNzaWJpbGl0eS9jb21tb24vYWNjZXNzaWJpbGl0eS5qcyc7CmltcG9ydCB7IHdpdGhOdWxsQXNVbmRlZmluZWQgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi90eXBlcy5qcyc7CmltcG9ydCB7IE1vbm9zcGFjZUxpbmVCcmVha3NDb21wdXRlckZhY3RvcnkgfSBmcm9tICcuLi8uLi9jb21tb24vdmlld01vZGVsL21vbm9zcGFjZUxpbmVCcmVha3NDb21wdXRlci5qcyc7CmltcG9ydCB7IERPTUxpbmVCcmVha3NDb21wdXRlckZhY3RvcnkgfSBmcm9tICcuLi92aWV3L2RvbUxpbmVCcmVha3NDb21wdXRlci5qcyc7CmltcG9ydCB7IFdvcmRPcGVyYXRpb25zIH0gZnJvbSAnLi4vLi4vY29tbW9uL2N1cnNvci9jdXJzb3JXb3JkT3BlcmF0aW9ucy5qcyc7CmltcG9ydCB7IElMYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL2xhbmd1YWdlcy9sYW5ndWFnZUNvbmZpZ3VyYXRpb25SZWdpc3RyeS5qcyc7CmltcG9ydCB7IGFwcGx5Rm9udEluZm8gYXMgX2FwcGx5Rm9udEluZm8gfSBmcm9tICcuLi9jb25maWcvZG9tRm9udEluZm8uanMnOwppbXBvcnQgeyBJTGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9jb21tb24vc2VydmljZXMvbGFuZ3VhZ2VGZWF0dXJlcy5qcyc7CnZhciBFRElUT1JfSUQgPSAwOwp2YXIgTW9kZWxEYXRhID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBNb2RlbERhdGEobW9kZWwsIHZpZXdNb2RlbCwgdmlldywgaGFzUmVhbFZpZXcsIGxpc3RlbmVyc1RvUmVtb3ZlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9kZWxEYXRhKTsKICAgIHRoaXMubW9kZWwgPSBtb2RlbDsKICAgIHRoaXMudmlld01vZGVsID0gdmlld01vZGVsOwogICAgdGhpcy52aWV3ID0gdmlldzsKICAgIHRoaXMuaGFzUmVhbFZpZXcgPSBoYXNSZWFsVmlldzsKICAgIHRoaXMubGlzdGVuZXJzVG9SZW1vdmUgPSBsaXN0ZW5lcnNUb1JlbW92ZTsKICB9CiAgX2NyZWF0ZUNsYXNzKE1vZGVsRGF0YSwgW3sKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIF9kaXNwb3NlKHRoaXMubGlzdGVuZXJzVG9SZW1vdmUpOwogICAgICB0aGlzLm1vZGVsLm9uQmVmb3JlRGV0YWNoZWQoKTsKICAgICAgaWYgKHRoaXMuaGFzUmVhbFZpZXcpIHsKICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpOwogICAgICB9CiAgICAgIHRoaXMudmlld01vZGVsLmRpc3Bvc2UoKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE1vZGVsRGF0YTsKfSgpOwp2YXIgQ29kZUVkaXRvcldpZGdldCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Rpc3Bvc2FibGUpIHsKICBfaW5oZXJpdHMoQ29kZUVkaXRvcldpZGdldCwgX0Rpc3Bvc2FibGUpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoQ29kZUVkaXRvcldpZGdldCk7CiAgZnVuY3Rpb24gQ29kZUVkaXRvcldpZGdldChkb21FbGVtZW50LCBfb3B0aW9ucywgY29kZUVkaXRvcldpZGdldE9wdGlvbnMsIGluc3RhbnRpYXRpb25TZXJ2aWNlLCBjb2RlRWRpdG9yU2VydmljZSwgY29tbWFuZFNlcnZpY2UsIGNvbnRleHRLZXlTZXJ2aWNlLCB0aGVtZVNlcnZpY2UsIG5vdGlmaWNhdGlvblNlcnZpY2UsIGFjY2Vzc2liaWxpdHlTZXJ2aWNlLCBsYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlLCBsYW5ndWFnZUZlYXR1cmVzU2VydmljZSkgewogICAgdmFyIF90aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvZGVFZGl0b3JXaWRnZXQpOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgIF90aGlzLmxhbmd1YWdlQ29uZmlndXJhdGlvblNlcnZpY2UgPSBsYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlOwogICAgLy8jcmVnaW9uIEV2ZW50aW5nCiAgICBfdGhpcy5fZGVsaXZlcnlRdWV1ZSA9IG5ldyBFdmVudERlbGl2ZXJ5UXVldWUoKTsKICAgIF90aGlzLl9vbkRpZERpc3Bvc2UgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpcy5vbkRpZERpc3Bvc2UgPSBfdGhpcy5fb25EaWREaXNwb3NlLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWxDb250ZW50ID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uRGlkQ2hhbmdlTW9kZWxDb250ZW50ID0gX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWxDb250ZW50LmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWxMYW5ndWFnZSA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZENoYW5nZU1vZGVsTGFuZ3VhZ2UgPSBfdGhpcy5fb25EaWRDaGFuZ2VNb2RlbExhbmd1YWdlLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWxMYW5ndWFnZUNvbmZpZ3VyYXRpb24gPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25EaWRDaGFuZ2VNb2RlbExhbmd1YWdlQ29uZmlndXJhdGlvbiA9IF90aGlzLl9vbkRpZENoYW5nZU1vZGVsTGFuZ3VhZ2VDb25maWd1cmF0aW9uLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWxPcHRpb25zID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uRGlkQ2hhbmdlTW9kZWxPcHRpb25zID0gX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWxPcHRpb25zLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWxEZWNvcmF0aW9ucyA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZENoYW5nZU1vZGVsRGVjb3JhdGlvbnMgPSBfdGhpcy5fb25EaWRDaGFuZ2VNb2RlbERlY29yYXRpb25zLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWxUb2tlbnMgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25EaWRDaGFuZ2VNb2RlbFRva2VucyA9IF90aGlzLl9vbkRpZENoYW5nZU1vZGVsVG9rZW5zLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbiA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24gPSBfdGhpcy5fb25EaWRDaGFuZ2VDb25maWd1cmF0aW9uLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlTW9kZWwgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25EaWRDaGFuZ2VNb2RlbCA9IF90aGlzLl9vbkRpZENoYW5nZU1vZGVsLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlQ3Vyc29yUG9zaXRpb24gPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25EaWRDaGFuZ2VDdXJzb3JQb3NpdGlvbiA9IF90aGlzLl9vbkRpZENoYW5nZUN1cnNvclBvc2l0aW9uLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQ2hhbmdlQ3Vyc29yU2VsZWN0aW9uID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uRGlkQ2hhbmdlQ3Vyc29yU2VsZWN0aW9uID0gX3RoaXMuX29uRGlkQ2hhbmdlQ3Vyc29yU2VsZWN0aW9uLmV2ZW50OwogICAgX3RoaXMuX29uRGlkQXR0ZW1wdFJlYWRPbmx5RWRpdCA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZEF0dGVtcHRSZWFkT25seUVkaXQgPSBfdGhpcy5fb25EaWRBdHRlbXB0UmVhZE9ubHlFZGl0LmV2ZW50OwogICAgX3RoaXMuX29uRGlkTGF5b3V0Q2hhbmdlID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uRGlkTGF5b3V0Q2hhbmdlID0gX3RoaXMuX29uRGlkTGF5b3V0Q2hhbmdlLmV2ZW50OwogICAgX3RoaXMuX2VkaXRvclRleHRGb2N1cyA9IF90aGlzLl9yZWdpc3RlcihuZXcgQm9vbGVhbkV2ZW50RW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZEZvY3VzRWRpdG9yVGV4dCA9IF90aGlzLl9lZGl0b3JUZXh0Rm9jdXMub25EaWRDaGFuZ2VUb1RydWU7CiAgICBfdGhpcy5vbkRpZEJsdXJFZGl0b3JUZXh0ID0gX3RoaXMuX2VkaXRvclRleHRGb2N1cy5vbkRpZENoYW5nZVRvRmFsc2U7CiAgICBfdGhpcy5fZWRpdG9yV2lkZ2V0Rm9jdXMgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEJvb2xlYW5FdmVudEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25EaWRGb2N1c0VkaXRvcldpZGdldCA9IF90aGlzLl9lZGl0b3JXaWRnZXRGb2N1cy5vbkRpZENoYW5nZVRvVHJ1ZTsKICAgIF90aGlzLm9uRGlkQmx1ckVkaXRvcldpZGdldCA9IF90aGlzLl9lZGl0b3JXaWRnZXRGb2N1cy5vbkRpZENoYW5nZVRvRmFsc2U7CiAgICBfdGhpcy5fb25XaWxsVHlwZSA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbldpbGxUeXBlID0gX3RoaXMuX29uV2lsbFR5cGUuZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRUeXBlID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uRGlkVHlwZSA9IF90aGlzLl9vbkRpZFR5cGUuZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRDb21wb3NpdGlvblN0YXJ0ID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uRGlkQ29tcG9zaXRpb25TdGFydCA9IF90aGlzLl9vbkRpZENvbXBvc2l0aW9uU3RhcnQuZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRDb21wb3NpdGlvbkVuZCA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZENvbXBvc2l0aW9uRW5kID0gX3RoaXMuX29uRGlkQ29tcG9zaXRpb25FbmQuZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRQYXN0ZSA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZFBhc3RlID0gX3RoaXMuX29uRGlkUGFzdGUuZXZlbnQ7CiAgICBfdGhpcy5fb25Nb3VzZVVwID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uTW91c2VVcCA9IF90aGlzLl9vbk1vdXNlVXAuZXZlbnQ7CiAgICBfdGhpcy5fb25Nb3VzZURvd24gPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25Nb3VzZURvd24gPSBfdGhpcy5fb25Nb3VzZURvd24uZXZlbnQ7CiAgICBfdGhpcy5fb25Nb3VzZURyYWcgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25Nb3VzZURyYWcgPSBfdGhpcy5fb25Nb3VzZURyYWcuZXZlbnQ7CiAgICBfdGhpcy5fb25Nb3VzZURyb3AgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25Nb3VzZURyb3AgPSBfdGhpcy5fb25Nb3VzZURyb3AuZXZlbnQ7CiAgICBfdGhpcy5fb25Nb3VzZURyb3BDYW5jZWxlZCA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbk1vdXNlRHJvcENhbmNlbGVkID0gX3RoaXMuX29uTW91c2VEcm9wQ2FuY2VsZWQuZXZlbnQ7CiAgICBfdGhpcy5fb25Ecm9wSW50b0VkaXRvciA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRyb3BJbnRvRWRpdG9yID0gX3RoaXMuX29uRHJvcEludG9FZGl0b3IuZXZlbnQ7CiAgICBfdGhpcy5fb25Db250ZXh0TWVudSA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkNvbnRleHRNZW51ID0gX3RoaXMuX29uQ29udGV4dE1lbnUuZXZlbnQ7CiAgICBfdGhpcy5fb25Nb3VzZU1vdmUgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25Nb3VzZU1vdmUgPSBfdGhpcy5fb25Nb3VzZU1vdmUuZXZlbnQ7CiAgICBfdGhpcy5fb25Nb3VzZUxlYXZlID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uTW91c2VMZWF2ZSA9IF90aGlzLl9vbk1vdXNlTGVhdmUuZXZlbnQ7CiAgICBfdGhpcy5fb25Nb3VzZVdoZWVsID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uTW91c2VXaGVlbCA9IF90aGlzLl9vbk1vdXNlV2hlZWwuZXZlbnQ7CiAgICBfdGhpcy5fb25LZXlVcCA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbktleVVwID0gX3RoaXMuX29uS2V5VXAuZXZlbnQ7CiAgICBfdGhpcy5fb25LZXlEb3duID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKHsKICAgICAgZGVsaXZlcnlRdWV1ZTogX3RoaXMuX2RlbGl2ZXJ5UXVldWUKICAgIH0pKTsKICAgIF90aGlzLm9uS2V5RG93biA9IF90aGlzLl9vbktleURvd24uZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRDb250ZW50U2l6ZUNoYW5nZSA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZENvbnRlbnRTaXplQ2hhbmdlID0gX3RoaXMuX29uRGlkQ29udGVudFNpemVDaGFuZ2UuZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRTY3JvbGxDaGFuZ2UgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25EaWRTY3JvbGxDaGFuZ2UgPSBfdGhpcy5fb25EaWRTY3JvbGxDaGFuZ2UuZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRDaGFuZ2VWaWV3Wm9uZXMgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoewogICAgICBkZWxpdmVyeVF1ZXVlOiBfdGhpcy5fZGVsaXZlcnlRdWV1ZQogICAgfSkpOwogICAgX3RoaXMub25EaWRDaGFuZ2VWaWV3Wm9uZXMgPSBfdGhpcy5fb25EaWRDaGFuZ2VWaWV3Wm9uZXMuZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRDaGFuZ2VIaWRkZW5BcmVhcyA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcih7CiAgICAgIGRlbGl2ZXJ5UXVldWU6IF90aGlzLl9kZWxpdmVyeVF1ZXVlCiAgICB9KSk7CiAgICBfdGhpcy5vbkRpZENoYW5nZUhpZGRlbkFyZWFzID0gX3RoaXMuX29uRGlkQ2hhbmdlSGlkZGVuQXJlYXMuZXZlbnQ7CiAgICBfdGhpcy5fYmFubmVyRG9tTm9kZSA9IG51bGw7CiAgICBfdGhpcy5fZHJvcEludG9FZGl0b3JEZWNvcmF0aW9ucyA9IF90aGlzLmNyZWF0ZURlY29yYXRpb25zQ29sbGVjdGlvbigpOwogICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBfb3B0aW9ucyk7CiAgICBfdGhpcy5fZG9tRWxlbWVudCA9IGRvbUVsZW1lbnQ7CiAgICBfdGhpcy5fb3ZlcmZsb3dXaWRnZXRzRG9tTm9kZSA9IG9wdGlvbnMub3ZlcmZsb3dXaWRnZXRzRG9tTm9kZTsKICAgIGRlbGV0ZSBvcHRpb25zLm92ZXJmbG93V2lkZ2V0c0RvbU5vZGU7CiAgICBfdGhpcy5faWQgPSArK0VESVRPUl9JRDsKICAgIF90aGlzLl9kZWNvcmF0aW9uVHlwZUtleXNUb0lkcyA9IHt9OwogICAgX3RoaXMuX2RlY29yYXRpb25UeXBlU3VidHlwZXMgPSB7fTsKICAgIF90aGlzLl90ZWxlbWV0cnlEYXRhID0gY29kZUVkaXRvcldpZGdldE9wdGlvbnMudGVsZW1ldHJ5RGF0YTsKICAgIF90aGlzLl9jb25maWd1cmF0aW9uID0gX3RoaXMuX3JlZ2lzdGVyKF90aGlzLl9jcmVhdGVDb25maWd1cmF0aW9uKGNvZGVFZGl0b3JXaWRnZXRPcHRpb25zLmlzU2ltcGxlV2lkZ2V0IHx8IGZhbHNlLCBvcHRpb25zLCBhY2Nlc3NpYmlsaXR5U2VydmljZSkpOwogICAgX3RoaXMuX3JlZ2lzdGVyKF90aGlzLl9jb25maWd1cmF0aW9uLm9uRGlkQ2hhbmdlKGZ1bmN0aW9uIChlKSB7CiAgICAgIF90aGlzLl9vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24uZmlyZShlKTsKICAgICAgdmFyIG9wdGlvbnMgPSBfdGhpcy5fY29uZmlndXJhdGlvbi5vcHRpb25zOwogICAgICBpZiAoZS5oYXNDaGFuZ2VkKDEzMyAvKiBFZGl0b3JPcHRpb24ubGF5b3V0SW5mbyAqLykpIHsKICAgICAgICB2YXIgbGF5b3V0SW5mbyA9IG9wdGlvbnMuZ2V0KDEzMyAvKiBFZGl0b3JPcHRpb24ubGF5b3V0SW5mbyAqLyk7CiAgICAgICAgX3RoaXMuX29uRGlkTGF5b3V0Q2hhbmdlLmZpcmUobGF5b3V0SW5mbyk7CiAgICAgIH0KICAgIH0pKTsKICAgIF90aGlzLl9jb250ZXh0S2V5U2VydmljZSA9IF90aGlzLl9yZWdpc3Rlcihjb250ZXh0S2V5U2VydmljZS5jcmVhdGVTY29wZWQoX3RoaXMuX2RvbUVsZW1lbnQpKTsKICAgIF90aGlzLl9ub3RpZmljYXRpb25TZXJ2aWNlID0gbm90aWZpY2F0aW9uU2VydmljZTsKICAgIF90aGlzLl9jb2RlRWRpdG9yU2VydmljZSA9IGNvZGVFZGl0b3JTZXJ2aWNlOwogICAgX3RoaXMuX2NvbW1hbmRTZXJ2aWNlID0gY29tbWFuZFNlcnZpY2U7CiAgICBfdGhpcy5fdGhlbWVTZXJ2aWNlID0gdGhlbWVTZXJ2aWNlOwogICAgX3RoaXMuX3JlZ2lzdGVyKG5ldyBFZGl0b3JDb250ZXh0S2V5c01hbmFnZXIoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIF90aGlzLl9jb250ZXh0S2V5U2VydmljZSkpOwogICAgX3RoaXMuX3JlZ2lzdGVyKG5ldyBFZGl0b3JNb2RlQ29udGV4dChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgX3RoaXMuX2NvbnRleHRLZXlTZXJ2aWNlLCBsYW5ndWFnZUZlYXR1cmVzU2VydmljZSkpOwogICAgX3RoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlID0gaW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlQ2hpbGQobmV3IFNlcnZpY2VDb2xsZWN0aW9uKFtJQ29udGV4dEtleVNlcnZpY2UsIF90aGlzLl9jb250ZXh0S2V5U2VydmljZV0pKTsKICAgIF90aGlzLl9tb2RlbERhdGEgPSBudWxsOwogICAgX3RoaXMuX2NvbnRyaWJ1dGlvbnMgPSB7fTsKICAgIF90aGlzLl9hY3Rpb25zID0ge307CiAgICBfdGhpcy5fZm9jdXNUcmFja2VyID0gbmV3IENvZGVFZGl0b3JXaWRnZXRGb2N1c1RyYWNrZXIoZG9tRWxlbWVudCk7CiAgICBfdGhpcy5fcmVnaXN0ZXIoX3RoaXMuX2ZvY3VzVHJhY2tlci5vbkNoYW5nZShmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLl9lZGl0b3JXaWRnZXRGb2N1cy5zZXRWYWx1ZShfdGhpcy5fZm9jdXNUcmFja2VyLmhhc0ZvY3VzKCkpOwogICAgfSkpOwogICAgX3RoaXMuX2NvbnRlbnRXaWRnZXRzID0ge307CiAgICBfdGhpcy5fb3ZlcmxheVdpZGdldHMgPSB7fTsKICAgIHZhciBjb250cmlidXRpb25zOwogICAgaWYgKEFycmF5LmlzQXJyYXkoY29kZUVkaXRvcldpZGdldE9wdGlvbnMuY29udHJpYnV0aW9ucykpIHsKICAgICAgY29udHJpYnV0aW9ucyA9IGNvZGVFZGl0b3JXaWRnZXRPcHRpb25zLmNvbnRyaWJ1dGlvbnM7CiAgICB9IGVsc2UgewogICAgICBjb250cmlidXRpb25zID0gRWRpdG9yRXh0ZW5zaW9uc1JlZ2lzdHJ5LmdldEVkaXRvckNvbnRyaWJ1dGlvbnMoKTsKICAgIH0KICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjb250cmlidXRpb25zKSwKICAgICAgX3N0ZXA7CiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgIHZhciBkZXNjID0gX3N0ZXAudmFsdWU7CiAgICAgICAgaWYgKF90aGlzLl9jb250cmlidXRpb25zW2Rlc2MuaWRdKSB7CiAgICAgICAgICBvblVuZXhwZWN0ZWRFcnJvcihuZXcgRXJyb3IoIkNhbm5vdCBoYXZlIHR3byBjb250cmlidXRpb25zIHdpdGggdGhlIHNhbWUgaWQgIi5jb25jYXQoZGVzYy5pZCkpKTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgdmFyIGNvbnRyaWJ1dGlvbiA9IF90aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShkZXNjLmN0b3IsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgICAgICAgIF90aGlzLl9jb250cmlidXRpb25zW2Rlc2MuaWRdID0gY29udHJpYnV0aW9uOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgb25VbmV4cGVjdGVkRXJyb3IoZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KICAgIEVkaXRvckV4dGVuc2lvbnNSZWdpc3RyeS5nZXRFZGl0b3JBY3Rpb25zKCkuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgIGlmIChfdGhpcy5fYWN0aW9uc1thY3Rpb24uaWRdKSB7CiAgICAgICAgb25VbmV4cGVjdGVkRXJyb3IobmV3IEVycm9yKCJDYW5ub3QgaGF2ZSB0d28gYWN0aW9ucyB3aXRoIHRoZSBzYW1lIGlkICIuY29uY2F0KGFjdGlvbi5pZCkpKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGludGVybmFsQWN0aW9uID0gbmV3IEludGVybmFsRWRpdG9yQWN0aW9uKGFjdGlvbi5pZCwgYWN0aW9uLmxhYmVsLCBhY3Rpb24uYWxpYXMsIHdpdGhOdWxsQXNVbmRlZmluZWQoYWN0aW9uLnByZWNvbmRpdGlvbiksIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uKGZ1bmN0aW9uIChhY2Nlc3NvcikgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhY3Rpb24ucnVuRWRpdG9yQ29tbWFuZChhY2Nlc3NvciwgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIG51bGwpKTsKICAgICAgICB9KTsKICAgICAgfSwgX3RoaXMuX2NvbnRleHRLZXlTZXJ2aWNlKTsKICAgICAgX3RoaXMuX2FjdGlvbnNbaW50ZXJuYWxBY3Rpb24uaWRdID0gaW50ZXJuYWxBY3Rpb247CiAgICB9KTsKICAgIHZhciBpc0Ryb3BJbnRvRW5hYmxlZCA9IGZ1bmN0aW9uIGlzRHJvcEludG9FbmFibGVkKCkgewogICAgICByZXR1cm4gIV90aGlzLl9jb25maWd1cmF0aW9uLm9wdGlvbnMuZ2V0KDgzIC8qIEVkaXRvck9wdGlvbi5yZWFkT25seSAqLykgJiYgX3RoaXMuX2NvbmZpZ3VyYXRpb24ub3B0aW9ucy5nZXQoMzIgLyogRWRpdG9yT3B0aW9uLmRyb3BJbnRvRWRpdG9yICovKS5lbmFibGVkOwogICAgfTsKICAgIF90aGlzLl9yZWdpc3RlcihuZXcgZG9tLkRyYWdBbmREcm9wT2JzZXJ2ZXIoX3RoaXMuX2RvbUVsZW1lbnQsIHsKICAgICAgb25EcmFnRW50ZXI6IGZ1bmN0aW9uIG9uRHJhZ0VudGVyKCkgewogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0sCiAgICAgIG9uRHJhZ092ZXI6IGZ1bmN0aW9uIG9uRHJhZ092ZXIoZSkgewogICAgICAgIGlmICghaXNEcm9wSW50b0VuYWJsZWQoKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMuZ2V0VGFyZ2V0QXRDbGllbnRQb2ludChlLmNsaWVudFgsIGUuY2xpZW50WSk7CiAgICAgICAgaWYgKHRhcmdldCA9PT0gbnVsbCB8fCB0YXJnZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRhcmdldC5wb3NpdGlvbikgewogICAgICAgICAgX3RoaXMuc2hvd0Ryb3BJbmRpY2F0b3JBdCh0YXJnZXQucG9zaXRpb24pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgb25Ecm9wOiBmdW5jdGlvbiBvbkRyb3AoZSkgewogICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgIHZhciB0YXJnZXQ7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmIChpc0Ryb3BJbnRvRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRHJvcEluZGljYXRvcigpOwogICAgICAgICAgICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXIpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXRBdENsaWVudFBvaW50KGUuY2xpZW50WCwgZS5jbGllbnRZKTsKICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gbnVsbCB8fCB0YXJnZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRhcmdldC5wb3NpdGlvbikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRHJvcEludG9FZGl0b3IuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGFyZ2V0LnBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICAgIH0pKTsKICAgICAgfSwKICAgICAgb25EcmFnTGVhdmU6IGZ1bmN0aW9uIG9uRHJhZ0xlYXZlKCkgewogICAgICAgIF90aGlzLnJlbW92ZURyb3BJbmRpY2F0b3IoKTsKICAgICAgfSwKICAgICAgb25EcmFnRW5kOiBmdW5jdGlvbiBvbkRyYWdFbmQoKSB7CiAgICAgICAgX3RoaXMucmVtb3ZlRHJvcEluZGljYXRvcigpOwogICAgICB9CiAgICB9KSk7CiAgICBfdGhpcy5fY29kZUVkaXRvclNlcnZpY2UuYWRkQ29kZUVkaXRvcihfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIC8vI2VuZHJlZ2lvbgogIF9jcmVhdGVDbGFzcyhDb2RlRWRpdG9yV2lkZ2V0LCBbewogICAga2V5OiAiaXNTaW1wbGVXaWRnZXQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb25maWd1cmF0aW9uLmlzU2ltcGxlV2lkZ2V0OwogICAgfQogIH0sIHsKICAgIGtleTogIl9jcmVhdGVDb25maWd1cmF0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlQ29uZmlndXJhdGlvbihpc1NpbXBsZVdpZGdldCwgb3B0aW9ucywgYWNjZXNzaWJpbGl0eVNlcnZpY2UpIHsKICAgICAgcmV0dXJuIG5ldyBFZGl0b3JDb25maWd1cmF0aW9uKGlzU2ltcGxlV2lkZ2V0LCBvcHRpb25zLCB0aGlzLl9kb21FbGVtZW50LCBhY2Nlc3NpYmlsaXR5U2VydmljZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElkKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRFZGl0b3JUeXBlKCkgKyAnOicgKyB0aGlzLl9pZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRFZGl0b3JUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFZGl0b3JUeXBlKCkgewogICAgICByZXR1cm4gZWRpdG9yQ29tbW9uLkVkaXRvclR5cGUuSUNvZGVFZGl0b3I7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdGhpcy5fY29kZUVkaXRvclNlcnZpY2UucmVtb3ZlQ29kZUVkaXRvcih0aGlzKTsKICAgICAgdGhpcy5fZm9jdXNUcmFja2VyLmRpc3Bvc2UoKTsKICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLl9jb250cmlidXRpb25zKTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgY29udHJpYnV0aW9uSWQgPSBrZXlzW2ldOwogICAgICAgIHRoaXMuX2NvbnRyaWJ1dGlvbnNbY29udHJpYnV0aW9uSWRdLmRpc3Bvc2UoKTsKICAgICAgfQogICAgICB0aGlzLl9jb250cmlidXRpb25zID0ge307CiAgICAgIHRoaXMuX2FjdGlvbnMgPSB7fTsKICAgICAgdGhpcy5fY29udGVudFdpZGdldHMgPSB7fTsKICAgICAgdGhpcy5fb3ZlcmxheVdpZGdldHMgPSB7fTsKICAgICAgdGhpcy5fcmVtb3ZlRGVjb3JhdGlvblR5cGVzKCk7CiAgICAgIHRoaXMuX3Bvc3REZXRhY2hNb2RlbENsZWFudXAodGhpcy5fZGV0YWNoTW9kZWwoKSk7CiAgICAgIHRoaXMuX29uRGlkRGlzcG9zZS5maXJlKCk7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKENvZGVFZGl0b3JXaWRnZXQucHJvdG90eXBlKSwgImRpc3Bvc2UiLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImludm9rZVdpdGhpbkNvbnRleHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGludm9rZVdpdGhpbkNvbnRleHQoZm4pIHsKICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uKGZuKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVPcHRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKG5ld09wdGlvbnMpIHsKICAgICAgdGhpcy5fY29uZmlndXJhdGlvbi51cGRhdGVPcHRpb25zKG5ld09wdGlvbnMgfHwge30pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldE9wdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb25maWd1cmF0aW9uLm9wdGlvbnM7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0T3B0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb24oaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb24ub3B0aW9ucy5nZXQoaWQpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFJhd09wdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJhd09wdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb25maWd1cmF0aW9uLmdldFJhd09wdGlvbnMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRPdmVyZmxvd1dpZGdldHNEb21Ob2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPdmVyZmxvd1dpZGdldHNEb21Ob2RlKCkgewogICAgICByZXR1cm4gdGhpcy5fb3ZlcmZsb3dXaWRnZXRzRG9tTm9kZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb25maWd1cmVkV29yZEF0UG9zaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbmZpZ3VyZWRXb3JkQXRQb3NpdGlvbihwb3NpdGlvbikgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiBXb3JkT3BlcmF0aW9ucy5nZXRXb3JkQXRQb3NpdGlvbih0aGlzLl9tb2RlbERhdGEubW9kZWwsIHRoaXMuX2NvbmZpZ3VyYXRpb24ub3B0aW9ucy5nZXQoMTE5IC8qIEVkaXRvck9wdGlvbi53b3JkU2VwYXJhdG9ycyAqLyksIHBvc2l0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7CiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsOwogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgICB2YXIgcHJlc2VydmVCT00gPSBvcHRpb25zICYmIG9wdGlvbnMucHJlc2VydmVCT00gPyB0cnVlIDogZmFsc2U7CiAgICAgIHZhciBlb2xQcmVmZXJlbmNlID0gMCAvKiBFbmRPZkxpbmVQcmVmZXJlbmNlLlRleHREZWZpbmVkICovOwogICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxpbmVFbmRpbmcgJiYgb3B0aW9ucy5saW5lRW5kaW5nID09PSAnXG4nKSB7CiAgICAgICAgZW9sUHJlZmVyZW5jZSA9IDEgLyogRW5kT2ZMaW5lUHJlZmVyZW5jZS5MRiAqLzsKICAgICAgfSBlbHNlIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGluZUVuZGluZyAmJiBvcHRpb25zLmxpbmVFbmRpbmcgPT09ICdcclxuJykgewogICAgICAgIGVvbFByZWZlcmVuY2UgPSAyIC8qIEVuZE9mTGluZVByZWZlcmVuY2UuQ1JMRiAqLzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX21vZGVsRGF0YS5tb2RlbC5nZXRWYWx1ZShlb2xQcmVmZXJlbmNlLCBwcmVzZXJ2ZUJPTSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VmFsdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKG5ld1ZhbHVlKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS5tb2RlbC5zZXRWYWx1ZShuZXdWYWx1ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1vZGVsKCkgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEubW9kZWw7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0TW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldE1vZGVsKCkgewogICAgICB2YXIgX21vZGVsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsOwogICAgICB2YXIgbW9kZWwgPSBfbW9kZWw7CiAgICAgIGlmICh0aGlzLl9tb2RlbERhdGEgPT09IG51bGwgJiYgbW9kZWwgPT09IG51bGwpIHsKICAgICAgICAvLyBDdXJyZW50IG1vZGVsIGlzIHRoZSBuZXcgbW9kZWwKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX21vZGVsRGF0YSAmJiB0aGlzLl9tb2RlbERhdGEubW9kZWwgPT09IG1vZGVsKSB7CiAgICAgICAgLy8gQ3VycmVudCBtb2RlbCBpcyB0aGUgbmV3IG1vZGVsCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBoYXNUZXh0Rm9jdXMgPSB0aGlzLmhhc1RleHRGb2N1cygpOwogICAgICB2YXIgZGV0YWNoZWRNb2RlbCA9IHRoaXMuX2RldGFjaE1vZGVsKCk7CiAgICAgIHRoaXMuX2F0dGFjaE1vZGVsKG1vZGVsKTsKICAgICAgaWYgKGhhc1RleHRGb2N1cyAmJiB0aGlzLmhhc01vZGVsKCkpIHsKICAgICAgICB0aGlzLmZvY3VzKCk7CiAgICAgIH0KICAgICAgdmFyIGUgPSB7CiAgICAgICAgb2xkTW9kZWxVcmw6IGRldGFjaGVkTW9kZWwgPyBkZXRhY2hlZE1vZGVsLnVyaSA6IG51bGwsCiAgICAgICAgbmV3TW9kZWxVcmw6IG1vZGVsID8gbW9kZWwudXJpIDogbnVsbAogICAgICB9OwogICAgICB0aGlzLl9yZW1vdmVEZWNvcmF0aW9uVHlwZXMoKTsKICAgICAgdGhpcy5fb25EaWRDaGFuZ2VNb2RlbC5maXJlKGUpOwogICAgICB0aGlzLl9wb3N0RGV0YWNoTW9kZWxDbGVhbnVwKGRldGFjaGVkTW9kZWwpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZW1vdmVEZWNvcmF0aW9uVHlwZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVEZWNvcmF0aW9uVHlwZXMoKSB7CiAgICAgIHRoaXMuX2RlY29yYXRpb25UeXBlS2V5c1RvSWRzID0ge307CiAgICAgIGlmICh0aGlzLl9kZWNvcmF0aW9uVHlwZVN1YnR5cGVzKSB7CiAgICAgICAgZm9yICh2YXIgZGVjb3JhdGlvblR5cGUgaW4gdGhpcy5fZGVjb3JhdGlvblR5cGVTdWJ0eXBlcykgewogICAgICAgICAgdmFyIHN1YlR5cGVzID0gdGhpcy5fZGVjb3JhdGlvblR5cGVTdWJ0eXBlc1tkZWNvcmF0aW9uVHlwZV07CiAgICAgICAgICBmb3IgKHZhciBzdWJUeXBlIGluIHN1YlR5cGVzKSB7CiAgICAgICAgICAgIHRoaXMuX3JlbW92ZURlY29yYXRpb25UeXBlKGRlY29yYXRpb25UeXBlICsgJy0nICsgc3ViVHlwZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuX2RlY29yYXRpb25UeXBlU3VidHlwZXMgPSB7fTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldFZpc2libGVSYW5nZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZpc2libGVSYW5nZXMoKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsLmdldFZpc2libGVSYW5nZXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWaXNpYmxlUmFuZ2VzUGx1c1ZpZXdwb3J0QWJvdmVCZWxvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmlzaWJsZVJhbmdlc1BsdXNWaWV3cG9ydEFib3ZlQmVsb3coKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsLmdldFZpc2libGVSYW5nZXNQbHVzVmlld3BvcnRBYm92ZUJlbG93KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0V2hpdGVzcGFjZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFdoaXRlc3BhY2VzKCkgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC52aWV3TGF5b3V0LmdldFdoaXRlc3BhY2VzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VG9wRm9yTGluZU51bWJlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VG9wRm9yTGluZU51bWJlcihsaW5lTnVtYmVyKSB7CiAgICAgIHZhciBpbmNsdWRlVmlld1pvbmVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgcmV0dXJuIENvZGVFZGl0b3JXaWRnZXQuX2dldFZlcnRpY2FsT2Zmc2V0Rm9yUG9zaXRpb24odGhpcy5fbW9kZWxEYXRhLCBsaW5lTnVtYmVyLCAxLCBpbmNsdWRlVmlld1pvbmVzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUb3BGb3JQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VG9wRm9yUG9zaXRpb24obGluZU51bWJlciwgY29sdW1uKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIHJldHVybiBDb2RlRWRpdG9yV2lkZ2V0Ll9nZXRWZXJ0aWNhbE9mZnNldEZvclBvc2l0aW9uKHRoaXMuX21vZGVsRGF0YSwgbGluZU51bWJlciwgY29sdW1uLCBmYWxzZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Qm90dG9tRm9yTGluZU51bWJlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Qm90dG9tRm9yTGluZU51bWJlcihsaW5lTnVtYmVyKSB7CiAgICAgIHZhciBpbmNsdWRlVmlld1pvbmVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgcmV0dXJuIENvZGVFZGl0b3JXaWRnZXQuX2dldFZlcnRpY2FsT2Zmc2V0QWZ0ZXJQb3NpdGlvbih0aGlzLl9tb2RlbERhdGEsIGxpbmVOdW1iZXIsIDEsIGluY2x1ZGVWaWV3Wm9uZXMpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEhpZGRlbkFyZWFzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRIaWRkZW5BcmVhcyhyYW5nZXMpIHsKICAgICAgdmFyIF9hOwogICAgICAoX2EgPSB0aGlzLl9tb2RlbERhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52aWV3TW9kZWwuc2V0SGlkZGVuQXJlYXMocmFuZ2VzLm1hcChmdW5jdGlvbiAocikgewogICAgICAgIHJldHVybiBSYW5nZS5saWZ0KHIpOwogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VmlzaWJsZUNvbHVtbkZyb21Qb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmlzaWJsZUNvbHVtbkZyb21Qb3NpdGlvbihyYXdQb3NpdGlvbikgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiByYXdQb3NpdGlvbi5jb2x1bW47CiAgICAgIH0KICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5fbW9kZWxEYXRhLm1vZGVsLnZhbGlkYXRlUG9zaXRpb24ocmF3UG9zaXRpb24pOwogICAgICB2YXIgdGFiU2l6ZSA9IHRoaXMuX21vZGVsRGF0YS5tb2RlbC5nZXRPcHRpb25zKCkudGFiU2l6ZTsKICAgICAgcmV0dXJuIEN1cnNvckNvbHVtbnMudmlzaWJsZUNvbHVtbkZyb21Db2x1bW4odGhpcy5fbW9kZWxEYXRhLm1vZGVsLmdldExpbmVDb250ZW50KHBvc2l0aW9uLmxpbmVOdW1iZXIpLCBwb3NpdGlvbi5jb2x1bW4sIHRhYlNpemUpICsgMTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UG9zaXRpb24oKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuZ2V0UG9zaXRpb24oKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UG9zaXRpb24ocG9zaXRpb24pIHsKICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2FwaSc7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghUG9zaXRpb24uaXNJUG9zaXRpb24ocG9zaXRpb24pKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cycpOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuc2V0U2VsZWN0aW9ucyhzb3VyY2UsIFt7CiAgICAgICAgc2VsZWN0aW9uU3RhcnRMaW5lTnVtYmVyOiBwb3NpdGlvbi5saW5lTnVtYmVyLAogICAgICAgIHNlbGVjdGlvblN0YXJ0Q29sdW1uOiBwb3NpdGlvbi5jb2x1bW4sCiAgICAgICAgcG9zaXRpb25MaW5lTnVtYmVyOiBwb3NpdGlvbi5saW5lTnVtYmVyLAogICAgICAgIHBvc2l0aW9uQ29sdW1uOiBwb3NpdGlvbi5jb2x1bW4KICAgICAgfV0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9zZW5kUmV2ZWFsUmFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kUmV2ZWFsUmFuZ2UobW9kZWxSYW5nZSwgdmVydGljYWxUeXBlLCByZXZlYWxIb3Jpem9udGFsLCBzY3JvbGxUeXBlKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghUmFuZ2UuaXNJUmFuZ2UobW9kZWxSYW5nZSkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzJyk7CiAgICAgIH0KICAgICAgdmFyIHZhbGlkYXRlZE1vZGVsUmFuZ2UgPSB0aGlzLl9tb2RlbERhdGEubW9kZWwudmFsaWRhdGVSYW5nZShtb2RlbFJhbmdlKTsKICAgICAgdmFyIHZpZXdSYW5nZSA9IHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuY29vcmRpbmF0ZXNDb252ZXJ0ZXIuY29udmVydE1vZGVsUmFuZ2VUb1ZpZXdSYW5nZSh2YWxpZGF0ZWRNb2RlbFJhbmdlKTsKICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC5yZXZlYWxSYW5nZSgnYXBpJywgcmV2ZWFsSG9yaXpvbnRhbCwgdmlld1JhbmdlLCB2ZXJ0aWNhbFR5cGUsIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInJldmVhbExpbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbExpbmUobGluZU51bWJlcikgewogICAgICB2YXIgc2Nyb2xsVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgdGhpcy5fcmV2ZWFsTGluZShsaW5lTnVtYmVyLCAwIC8qIFZlcnRpY2FsUmV2ZWFsVHlwZS5TaW1wbGUgKi8sIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInJldmVhbExpbmVJbkNlbnRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmV2ZWFsTGluZUluQ2VudGVyKGxpbmVOdW1iZXIpIHsKICAgICAgdmFyIHNjcm9sbFR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICAgIHRoaXMuX3JldmVhbExpbmUobGluZU51bWJlciwgMSAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuQ2VudGVyICovLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXZlYWxMaW5lSW5DZW50ZXJJZk91dHNpZGVWaWV3cG9ydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmV2ZWFsTGluZUluQ2VudGVySWZPdXRzaWRlVmlld3BvcnQobGluZU51bWJlcikgewogICAgICB2YXIgc2Nyb2xsVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgdGhpcy5fcmV2ZWFsTGluZShsaW5lTnVtYmVyLCAyIC8qIFZlcnRpY2FsUmV2ZWFsVHlwZS5DZW50ZXJJZk91dHNpZGVWaWV3cG9ydCAqLywgc2Nyb2xsVHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmV2ZWFsTGluZU5lYXJUb3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbExpbmVOZWFyVG9wKGxpbmVOdW1iZXIpIHsKICAgICAgdmFyIHNjcm9sbFR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICAgIHRoaXMuX3JldmVhbExpbmUobGluZU51bWJlciwgNSAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuTmVhclRvcCAqLywgc2Nyb2xsVHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JldmVhbExpbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXZlYWxMaW5lKGxpbmVOdW1iZXIsIHJldmVhbFR5cGUsIHNjcm9sbFR5cGUpIHsKICAgICAgaWYgKHR5cGVvZiBsaW5lTnVtYmVyICE9PSAnbnVtYmVyJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTsKICAgICAgfQogICAgICB0aGlzLl9zZW5kUmV2ZWFsUmFuZ2UobmV3IFJhbmdlKGxpbmVOdW1iZXIsIDEsIGxpbmVOdW1iZXIsIDEpLCByZXZlYWxUeXBlLCBmYWxzZSwgc2Nyb2xsVHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmV2ZWFsUG9zaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbFBvc2l0aW9uKHBvc2l0aW9uKSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICB0aGlzLl9yZXZlYWxQb3NpdGlvbihwb3NpdGlvbiwgMCAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuU2ltcGxlICovLCB0cnVlLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXZlYWxQb3NpdGlvbkluQ2VudGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXZlYWxQb3NpdGlvbkluQ2VudGVyKHBvc2l0aW9uKSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICB0aGlzLl9yZXZlYWxQb3NpdGlvbihwb3NpdGlvbiwgMSAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuQ2VudGVyICovLCB0cnVlLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXZlYWxQb3NpdGlvbkluQ2VudGVySWZPdXRzaWRlVmlld3BvcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbFBvc2l0aW9uSW5DZW50ZXJJZk91dHNpZGVWaWV3cG9ydChwb3NpdGlvbikgewogICAgICB2YXIgc2Nyb2xsVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgdGhpcy5fcmV2ZWFsUG9zaXRpb24ocG9zaXRpb24sIDIgLyogVmVydGljYWxSZXZlYWxUeXBlLkNlbnRlcklmT3V0c2lkZVZpZXdwb3J0ICovLCB0cnVlLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXZlYWxQb3NpdGlvbk5lYXJUb3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbFBvc2l0aW9uTmVhclRvcChwb3NpdGlvbikgewogICAgICB2YXIgc2Nyb2xsVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgdGhpcy5fcmV2ZWFsUG9zaXRpb24ocG9zaXRpb24sIDUgLyogVmVydGljYWxSZXZlYWxUeXBlLk5lYXJUb3AgKi8sIHRydWUsIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZXZlYWxQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JldmVhbFBvc2l0aW9uKHBvc2l0aW9uLCB2ZXJ0aWNhbFR5cGUsIHJldmVhbEhvcml6b250YWwsIHNjcm9sbFR5cGUpIHsKICAgICAgaWYgKCFQb3NpdGlvbi5pc0lQb3NpdGlvbihwb3NpdGlvbikpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzJyk7CiAgICAgIH0KICAgICAgdGhpcy5fc2VuZFJldmVhbFJhbmdlKG5ldyBSYW5nZShwb3NpdGlvbi5saW5lTnVtYmVyLCBwb3NpdGlvbi5jb2x1bW4sIHBvc2l0aW9uLmxpbmVOdW1iZXIsIHBvc2l0aW9uLmNvbHVtbiksIHZlcnRpY2FsVHlwZSwgcmV2ZWFsSG9yaXpvbnRhbCwgc2Nyb2xsVHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U2VsZWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZWxlY3Rpb24oKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuZ2V0U2VsZWN0aW9uKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U2VsZWN0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VsZWN0aW9ucygpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC5nZXRTZWxlY3Rpb25zKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0U2VsZWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3Rpb24oc29tZXRoaW5nKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdhcGknOwogICAgICB2YXIgaXNTZWxlY3Rpb24gPSBTZWxlY3Rpb24uaXNJU2VsZWN0aW9uKHNvbWV0aGluZyk7CiAgICAgIHZhciBpc1JhbmdlID0gUmFuZ2UuaXNJUmFuZ2Uoc29tZXRoaW5nKTsKICAgICAgaWYgKCFpc1NlbGVjdGlvbiAmJiAhaXNSYW5nZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTsKICAgICAgfQogICAgICBpZiAoaXNTZWxlY3Rpb24pIHsKICAgICAgICB0aGlzLl9zZXRTZWxlY3Rpb25JbXBsKHNvbWV0aGluZywgc291cmNlKTsKICAgICAgfSBlbHNlIGlmIChpc1JhbmdlKSB7CiAgICAgICAgLy8gYWN0IGFzIGlmIGl0IHdhcyBhbiBJUmFuZ2UKICAgICAgICB2YXIgc2VsZWN0aW9uID0gewogICAgICAgICAgc2VsZWN0aW9uU3RhcnRMaW5lTnVtYmVyOiBzb21ldGhpbmcuc3RhcnRMaW5lTnVtYmVyLAogICAgICAgICAgc2VsZWN0aW9uU3RhcnRDb2x1bW46IHNvbWV0aGluZy5zdGFydENvbHVtbiwKICAgICAgICAgIHBvc2l0aW9uTGluZU51bWJlcjogc29tZXRoaW5nLmVuZExpbmVOdW1iZXIsCiAgICAgICAgICBwb3NpdGlvbkNvbHVtbjogc29tZXRoaW5nLmVuZENvbHVtbgogICAgICAgIH07CiAgICAgICAgdGhpcy5fc2V0U2VsZWN0aW9uSW1wbChzZWxlY3Rpb24sIHNvdXJjZSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2V0U2VsZWN0aW9uSW1wbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFNlbGVjdGlvbkltcGwoc2VsLCBzb3VyY2UpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHNlbGVjdGlvbiA9IG5ldyBTZWxlY3Rpb24oc2VsLnNlbGVjdGlvblN0YXJ0TGluZU51bWJlciwgc2VsLnNlbGVjdGlvblN0YXJ0Q29sdW1uLCBzZWwucG9zaXRpb25MaW5lTnVtYmVyLCBzZWwucG9zaXRpb25Db2x1bW4pOwogICAgICB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsLnNldFNlbGVjdGlvbnMoc291cmNlLCBbc2VsZWN0aW9uXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmV2ZWFsTGluZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbExpbmVzKHN0YXJ0TGluZU51bWJlciwgZW5kTGluZU51bWJlcikgewogICAgICB2YXIgc2Nyb2xsVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMDsKICAgICAgdGhpcy5fcmV2ZWFsTGluZXMoc3RhcnRMaW5lTnVtYmVyLCBlbmRMaW5lTnVtYmVyLCAwIC8qIFZlcnRpY2FsUmV2ZWFsVHlwZS5TaW1wbGUgKi8sIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInJldmVhbExpbmVzSW5DZW50ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbExpbmVzSW5DZW50ZXIoc3RhcnRMaW5lTnVtYmVyLCBlbmRMaW5lTnVtYmVyKSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwOwogICAgICB0aGlzLl9yZXZlYWxMaW5lcyhzdGFydExpbmVOdW1iZXIsIGVuZExpbmVOdW1iZXIsIDEgLyogVmVydGljYWxSZXZlYWxUeXBlLkNlbnRlciAqLywgc2Nyb2xsVHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmV2ZWFsTGluZXNJbkNlbnRlcklmT3V0c2lkZVZpZXdwb3J0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXZlYWxMaW5lc0luQ2VudGVySWZPdXRzaWRlVmlld3BvcnQoc3RhcnRMaW5lTnVtYmVyLCBlbmRMaW5lTnVtYmVyKSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwOwogICAgICB0aGlzLl9yZXZlYWxMaW5lcyhzdGFydExpbmVOdW1iZXIsIGVuZExpbmVOdW1iZXIsIDIgLyogVmVydGljYWxSZXZlYWxUeXBlLkNlbnRlcklmT3V0c2lkZVZpZXdwb3J0ICovLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXZlYWxMaW5lc05lYXJUb3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbExpbmVzTmVhclRvcChzdGFydExpbmVOdW1iZXIsIGVuZExpbmVOdW1iZXIpIHsKICAgICAgdmFyIHNjcm9sbFR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7CiAgICAgIHRoaXMuX3JldmVhbExpbmVzKHN0YXJ0TGluZU51bWJlciwgZW5kTGluZU51bWJlciwgNSAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuTmVhclRvcCAqLywgc2Nyb2xsVHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JldmVhbExpbmVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmV2ZWFsTGluZXMoc3RhcnRMaW5lTnVtYmVyLCBlbmRMaW5lTnVtYmVyLCB2ZXJ0aWNhbFR5cGUsIHNjcm9sbFR5cGUpIHsKICAgICAgaWYgKHR5cGVvZiBzdGFydExpbmVOdW1iZXIgIT09ICdudW1iZXInIHx8IHR5cGVvZiBlbmRMaW5lTnVtYmVyICE9PSAnbnVtYmVyJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTsKICAgICAgfQogICAgICB0aGlzLl9zZW5kUmV2ZWFsUmFuZ2UobmV3IFJhbmdlKHN0YXJ0TGluZU51bWJlciwgMSwgZW5kTGluZU51bWJlciwgMSksIHZlcnRpY2FsVHlwZSwgZmFsc2UsIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInJldmVhbFJhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXZlYWxSYW5nZShyYW5nZSkgewogICAgICB2YXIgc2Nyb2xsVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgdmFyIHJldmVhbFZlcnRpY2FsSW5DZW50ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogICAgICB2YXIgcmV2ZWFsSG9yaXpvbnRhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogdHJ1ZTsKICAgICAgdGhpcy5fcmV2ZWFsUmFuZ2UocmFuZ2UsIHJldmVhbFZlcnRpY2FsSW5DZW50ZXIgPyAxIC8qIFZlcnRpY2FsUmV2ZWFsVHlwZS5DZW50ZXIgKi8gOiAwIC8qIFZlcnRpY2FsUmV2ZWFsVHlwZS5TaW1wbGUgKi8sIHJldmVhbEhvcml6b250YWwsIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInJldmVhbFJhbmdlSW5DZW50ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbFJhbmdlSW5DZW50ZXIocmFuZ2UpIHsKICAgICAgdmFyIHNjcm9sbFR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICAgIHRoaXMuX3JldmVhbFJhbmdlKHJhbmdlLCAxIC8qIFZlcnRpY2FsUmV2ZWFsVHlwZS5DZW50ZXIgKi8sIHRydWUsIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInJldmVhbFJhbmdlSW5DZW50ZXJJZk91dHNpZGVWaWV3cG9ydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmV2ZWFsUmFuZ2VJbkNlbnRlcklmT3V0c2lkZVZpZXdwb3J0KHJhbmdlKSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICB0aGlzLl9yZXZlYWxSYW5nZShyYW5nZSwgMiAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuQ2VudGVySWZPdXRzaWRlVmlld3BvcnQgKi8sIHRydWUsIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInJldmVhbFJhbmdlTmVhclRvcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmV2ZWFsUmFuZ2VOZWFyVG9wKHJhbmdlKSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICB0aGlzLl9yZXZlYWxSYW5nZShyYW5nZSwgNSAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuTmVhclRvcCAqLywgdHJ1ZSwgc2Nyb2xsVHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmV2ZWFsUmFuZ2VOZWFyVG9wSWZPdXRzaWRlVmlld3BvcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVhbFJhbmdlTmVhclRvcElmT3V0c2lkZVZpZXdwb3J0KHJhbmdlKSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICB0aGlzLl9yZXZlYWxSYW5nZShyYW5nZSwgNiAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuTmVhclRvcElmT3V0c2lkZVZpZXdwb3J0ICovLCB0cnVlLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXZlYWxSYW5nZUF0VG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXZlYWxSYW5nZUF0VG9wKHJhbmdlKSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICB0aGlzLl9yZXZlYWxSYW5nZShyYW5nZSwgMyAvKiBWZXJ0aWNhbFJldmVhbFR5cGUuVG9wICovLCB0cnVlLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcmV2ZWFsUmFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXZlYWxSYW5nZShyYW5nZSwgdmVydGljYWxUeXBlLCByZXZlYWxIb3Jpem9udGFsLCBzY3JvbGxUeXBlKSB7CiAgICAgIGlmICghUmFuZ2UuaXNJUmFuZ2UocmFuZ2UpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cycpOwogICAgICB9CiAgICAgIHRoaXMuX3NlbmRSZXZlYWxSYW5nZShSYW5nZS5saWZ0KHJhbmdlKSwgdmVydGljYWxUeXBlLCByZXZlYWxIb3Jpem9udGFsLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRTZWxlY3Rpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3Rpb25zKHJhbmdlcykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnYXBpJzsKICAgICAgdmFyIHJlYXNvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMDsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCFyYW5nZXMgfHwgcmFuZ2VzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTsKICAgICAgfQogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgaWYgKCFTZWxlY3Rpb24uaXNJU2VsZWN0aW9uKHJhbmdlc1tpXSkpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC5zZXRTZWxlY3Rpb25zKHNvdXJjZSwgcmFuZ2VzLCByZWFzb24pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldENvbnRlbnRXaWR0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGVudFdpZHRoKCkgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC52aWV3TGF5b3V0LmdldENvbnRlbnRXaWR0aCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNjcm9sbFdpZHRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxXaWR0aCgpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwudmlld0xheW91dC5nZXRTY3JvbGxXaWR0aCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNjcm9sbExlZnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbExlZnQoKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsLnZpZXdMYXlvdXQuZ2V0Q3VycmVudFNjcm9sbExlZnQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb250ZW50SGVpZ2h0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb250ZW50SGVpZ2h0KCkgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC52aWV3TGF5b3V0LmdldENvbnRlbnRIZWlnaHQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTY3JvbGxIZWlnaHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbEhlaWdodCgpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwudmlld0xheW91dC5nZXRTY3JvbGxIZWlnaHQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTY3JvbGxUb3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbFRvcCgpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwudmlld0xheW91dC5nZXRDdXJyZW50U2Nyb2xsVG9wKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0U2Nyb2xsTGVmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2Nyb2xsTGVmdChuZXdTY3JvbGxMZWZ0KSB7CiAgICAgIHZhciBzY3JvbGxUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodHlwZW9mIG5ld1Njcm9sbExlZnQgIT09ICdudW1iZXInKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cycpOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwudmlld0xheW91dC5zZXRTY3JvbGxQb3NpdGlvbih7CiAgICAgICAgc2Nyb2xsTGVmdDogbmV3U2Nyb2xsTGVmdAogICAgICB9LCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRTY3JvbGxUb3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNjcm9sbFRvcChuZXdTY3JvbGxUb3ApIHsKICAgICAgdmFyIHNjcm9sbFR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgbmV3U2Nyb2xsVG9wICE9PSAnbnVtYmVyJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTsKICAgICAgfQogICAgICB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsLnZpZXdMYXlvdXQuc2V0U2Nyb2xsUG9zaXRpb24oewogICAgICAgIHNjcm9sbFRvcDogbmV3U2Nyb2xsVG9wCiAgICAgIH0sIHNjcm9sbFR5cGUpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFNjcm9sbFBvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTY3JvbGxQb3NpdGlvbihwb3NpdGlvbikgewogICAgICB2YXIgc2Nyb2xsVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMTsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC52aWV3TGF5b3V0LnNldFNjcm9sbFBvc2l0aW9uKHBvc2l0aW9uLCBzY3JvbGxUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlVmlld1N0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlVmlld1N0YXRlKCkgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciBjb250cmlidXRpb25zU3RhdGUgPSB7fTsKICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLl9jb250cmlidXRpb25zKTsKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfa2V5cyA9IGtleXM7IF9pIDwgX2tleXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIGlkID0gX2tleXNbX2ldOwogICAgICAgIHZhciBjb250cmlidXRpb24gPSB0aGlzLl9jb250cmlidXRpb25zW2lkXTsKICAgICAgICBpZiAodHlwZW9mIGNvbnRyaWJ1dGlvbi5zYXZlVmlld1N0YXRlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBjb250cmlidXRpb25zU3RhdGVbaWRdID0gY29udHJpYnV0aW9uLnNhdmVWaWV3U3RhdGUoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIGN1cnNvclN0YXRlID0gdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC5zYXZlQ3Vyc29yU3RhdGUoKTsKICAgICAgdmFyIHZpZXdTdGF0ZSA9IHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuc2F2ZVN0YXRlKCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgY3Vyc29yU3RhdGU6IGN1cnNvclN0YXRlLAogICAgICAgIHZpZXdTdGF0ZTogdmlld1N0YXRlLAogICAgICAgIGNvbnRyaWJ1dGlvbnNTdGF0ZTogY29udHJpYnV0aW9uc1N0YXRlCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzdG9yZVZpZXdTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdG9yZVZpZXdTdGF0ZShzKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhIHx8ICF0aGlzLl9tb2RlbERhdGEuaGFzUmVhbFZpZXcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvZGVFZGl0b3JTdGF0ZSA9IHM7CiAgICAgIGlmIChjb2RlRWRpdG9yU3RhdGUgJiYgY29kZUVkaXRvclN0YXRlLmN1cnNvclN0YXRlICYmIGNvZGVFZGl0b3JTdGF0ZS52aWV3U3RhdGUpIHsKICAgICAgICB2YXIgY3Vyc29yU3RhdGUgPSBjb2RlRWRpdG9yU3RhdGUuY3Vyc29yU3RhdGU7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY3Vyc29yU3RhdGUpKSB7CiAgICAgICAgICBpZiAoY3Vyc29yU3RhdGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsLnJlc3RvcmVDdXJzb3JTdGF0ZShjdXJzb3JTdGF0ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5CiAgICAgICAgICB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsLnJlc3RvcmVDdXJzb3JTdGF0ZShbY3Vyc29yU3RhdGVdKTsKICAgICAgICB9CiAgICAgICAgdmFyIGNvbnRyaWJ1dGlvbnNTdGF0ZSA9IGNvZGVFZGl0b3JTdGF0ZS5jb250cmlidXRpb25zU3RhdGUgfHwge307CiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLl9jb250cmlidXRpb25zKTsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgdmFyIGlkID0ga2V5c1tpXTsKICAgICAgICAgIHZhciBjb250cmlidXRpb24gPSB0aGlzLl9jb250cmlidXRpb25zW2lkXTsKICAgICAgICAgIGlmICh0eXBlb2YgY29udHJpYnV0aW9uLnJlc3RvcmVWaWV3U3RhdGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgY29udHJpYnV0aW9uLnJlc3RvcmVWaWV3U3RhdGUoY29udHJpYnV0aW9uc1N0YXRlW2lkXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciByZWR1Y2VkU3RhdGUgPSB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsLnJlZHVjZVJlc3RvcmVTdGF0ZShjb2RlRWRpdG9yU3RhdGUudmlld1N0YXRlKTsKICAgICAgICB0aGlzLl9tb2RlbERhdGEudmlldy5yZXN0b3JlU3RhdGUocmVkdWNlZFN0YXRlKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldENvbnRyaWJ1dGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udHJpYnV0aW9uKGlkKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb250cmlidXRpb25zW2lkXSB8fCBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEFjdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjdGlvbnMoKSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLl9hY3Rpb25zKTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgaWQgPSBrZXlzW2ldOwogICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuX2FjdGlvbnNbaWRdKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogImdldFN1cHBvcnRlZEFjdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN1cHBvcnRlZEFjdGlvbnMoKSB7CiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmdldEFjdGlvbnMoKTsKICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIGFjdGlvbi5pc1N1cHBvcnRlZCgpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjdGlvbihpZCkgewogICAgICByZXR1cm4gdGhpcy5fYWN0aW9uc1tpZF0gfHwgbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0cmlnZ2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyKHNvdXJjZSwgaGFuZGxlcklkLCBwYXlsb2FkKSB7CiAgICAgIHBheWxvYWQgPSBwYXlsb2FkIHx8IHt9OwogICAgICBzd2l0Y2ggKGhhbmRsZXJJZCkgewogICAgICAgIGNhc2UgImNvbXBvc2l0aW9uU3RhcnQiIC8qIGVkaXRvckNvbW1vbi5IYW5kbGVyLkNvbXBvc2l0aW9uU3RhcnQgKi86CiAgICAgICAgICB0aGlzLl9zdGFydENvbXBvc2l0aW9uKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgY2FzZSAiY29tcG9zaXRpb25FbmQiIC8qIGVkaXRvckNvbW1vbi5IYW5kbGVyLkNvbXBvc2l0aW9uRW5kICovOgogICAgICAgICAgdGhpcy5fZW5kQ29tcG9zaXRpb24oc291cmNlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICBjYXNlICJ0eXBlIiAvKiBlZGl0b3JDb21tb24uSGFuZGxlci5UeXBlICovOgogICAgICAgICAgewogICAgICAgICAgICB2YXIgYXJncyA9IHBheWxvYWQ7CiAgICAgICAgICAgIHRoaXMuX3R5cGUoc291cmNlLCBhcmdzLnRleHQgfHwgJycpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgY2FzZSAicmVwbGFjZVByZXZpb3VzQ2hhciIgLyogZWRpdG9yQ29tbW9uLkhhbmRsZXIuUmVwbGFjZVByZXZpb3VzQ2hhciAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgdmFyIF9hcmdzMiA9IHBheWxvYWQ7CiAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVHlwZShzb3VyY2UsIF9hcmdzMi50ZXh0IHx8ICcnLCBfYXJnczIucmVwbGFjZUNoYXJDbnQgfHwgMCwgMCwgMCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICBjYXNlICJjb21wb3NpdGlvblR5cGUiIC8qIGVkaXRvckNvbW1vbi5IYW5kbGVyLkNvbXBvc2l0aW9uVHlwZSAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgdmFyIF9hcmdzMyA9IHBheWxvYWQ7CiAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVHlwZShzb3VyY2UsIF9hcmdzMy50ZXh0IHx8ICcnLCBfYXJnczMucmVwbGFjZVByZXZDaGFyQ250IHx8IDAsIF9hcmdzMy5yZXBsYWNlTmV4dENoYXJDbnQgfHwgMCwgX2FyZ3MzLnBvc2l0aW9uRGVsdGEgfHwgMCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICBjYXNlICJwYXN0ZSIgLyogZWRpdG9yQ29tbW9uLkhhbmRsZXIuUGFzdGUgKi86CiAgICAgICAgICB7CiAgICAgICAgICAgIHZhciBfYXJnczQgPSBwYXlsb2FkOwogICAgICAgICAgICB0aGlzLl9wYXN0ZShzb3VyY2UsIF9hcmdzNC50ZXh0IHx8ICcnLCBfYXJnczQucGFzdGVPbk5ld0xpbmUgfHwgZmFsc2UsIF9hcmdzNC5tdWx0aWN1cnNvclRleHQgfHwgbnVsbCwgX2FyZ3M0Lm1vZGUgfHwgbnVsbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICBjYXNlICJjdXQiIC8qIGVkaXRvckNvbW1vbi5IYW5kbGVyLkN1dCAqLzoKICAgICAgICAgIHRoaXMuX2N1dChzb3VyY2UpOwogICAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBhY3Rpb24gPSB0aGlzLmdldEFjdGlvbihoYW5kbGVySWQpOwogICAgICBpZiAoYWN0aW9uKSB7CiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGFjdGlvbi5ydW4oKSkudGhlbih1bmRlZmluZWQsIG9uVW5leHBlY3RlZEVycm9yKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX3RyaWdnZXJFZGl0b3JDb21tYW5kKHNvdXJjZSwgaGFuZGxlcklkLCBwYXlsb2FkKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl90cmlnZ2VyQ29tbWFuZChoYW5kbGVySWQsIHBheWxvYWQpOwogICAgfQogIH0sIHsKICAgIGtleTogIl90cmlnZ2VyQ29tbWFuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3RyaWdnZXJDb21tYW5kKGhhbmRsZXJJZCwgcGF5bG9hZCkgewogICAgICB0aGlzLl9jb21tYW5kU2VydmljZS5leGVjdXRlQ29tbWFuZChoYW5kbGVySWQsIHBheWxvYWQpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9zdGFydENvbXBvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc3RhcnRDb21wb3NpdGlvbigpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC5zdGFydENvbXBvc2l0aW9uKCk7CiAgICAgIHRoaXMuX29uRGlkQ29tcG9zaXRpb25TdGFydC5maXJlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2VuZENvbXBvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZW5kQ29tcG9zaXRpb24oc291cmNlKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuZW5kQ29tcG9zaXRpb24oc291cmNlKTsKICAgICAgdGhpcy5fb25EaWRDb21wb3NpdGlvbkVuZC5maXJlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3R5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF90eXBlKHNvdXJjZSwgdGV4dCkgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSB8fCB0ZXh0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoc291cmNlID09PSAna2V5Ym9hcmQnKSB7CiAgICAgICAgdGhpcy5fb25XaWxsVHlwZS5maXJlKHRleHQpOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwudHlwZSh0ZXh0LCBzb3VyY2UpOwogICAgICBpZiAoc291cmNlID09PSAna2V5Ym9hcmQnKSB7CiAgICAgICAgdGhpcy5fb25EaWRUeXBlLmZpcmUodGV4dCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfY29tcG9zaXRpb25UeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY29tcG9zaXRpb25UeXBlKHNvdXJjZSwgdGV4dCwgcmVwbGFjZVByZXZDaGFyQ250LCByZXBsYWNlTmV4dENoYXJDbnQsIHBvc2l0aW9uRGVsdGEpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXdNb2RlbC5jb21wb3NpdGlvblR5cGUodGV4dCwgcmVwbGFjZVByZXZDaGFyQ250LCByZXBsYWNlTmV4dENoYXJDbnQsIHBvc2l0aW9uRGVsdGEsIHNvdXJjZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3Bhc3RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcGFzdGUoc291cmNlLCB0ZXh0LCBwYXN0ZU9uTmV3TGluZSwgbXVsdGljdXJzb3JUZXh0LCBtb2RlKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhIHx8IHRleHQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciB2aWV3TW9kZWwgPSB0aGlzLl9tb2RlbERhdGEudmlld01vZGVsOwogICAgICB2YXIgc3RhcnRQb3NpdGlvbiA9IHZpZXdNb2RlbC5nZXRTZWxlY3Rpb24oKS5nZXRTdGFydFBvc2l0aW9uKCk7CiAgICAgIHZpZXdNb2RlbC5wYXN0ZSh0ZXh0LCBwYXN0ZU9uTmV3TGluZSwgbXVsdGljdXJzb3JUZXh0LCBzb3VyY2UpOwogICAgICB2YXIgZW5kUG9zaXRpb24gPSB2aWV3TW9kZWwuZ2V0U2VsZWN0aW9uKCkuZ2V0U3RhcnRQb3NpdGlvbigpOwogICAgICBpZiAoc291cmNlID09PSAna2V5Ym9hcmQnKSB7CiAgICAgICAgdGhpcy5fb25EaWRQYXN0ZS5maXJlKHsKICAgICAgICAgIHJhbmdlOiBuZXcgUmFuZ2Uoc3RhcnRQb3NpdGlvbi5saW5lTnVtYmVyLCBzdGFydFBvc2l0aW9uLmNvbHVtbiwgZW5kUG9zaXRpb24ubGluZU51bWJlciwgZW5kUG9zaXRpb24uY29sdW1uKSwKICAgICAgICAgIGxhbmd1YWdlSWQ6IG1vZGUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9jdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jdXQoc291cmNlKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuY3V0KHNvdXJjZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3RyaWdnZXJFZGl0b3JDb21tYW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJpZ2dlckVkaXRvckNvbW1hbmQoc291cmNlLCBoYW5kbGVySWQsIHBheWxvYWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBjb21tYW5kID0gRWRpdG9yRXh0ZW5zaW9uc1JlZ2lzdHJ5LmdldEVkaXRvckNvbW1hbmQoaGFuZGxlcklkKTsKICAgICAgaWYgKGNvbW1hbmQpIHsKICAgICAgICBwYXlsb2FkID0gcGF5bG9hZCB8fCB7fTsKICAgICAgICBwYXlsb2FkLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5pbnZva2VGdW5jdGlvbihmdW5jdGlvbiAoYWNjZXNzb3IpIHsKICAgICAgICAgIFByb21pc2UucmVzb2x2ZShjb21tYW5kLnJ1bkVkaXRvckNvbW1hbmQoYWNjZXNzb3IsIF90aGlzMiwgcGF5bG9hZCkpLnRoZW4odW5kZWZpbmVkLCBvblVuZXhwZWN0ZWRFcnJvcik7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRWaWV3TW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRWaWV3TW9kZWwoKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWw7CiAgICB9CiAgfSwgewogICAga2V5OiAicHVzaFVuZG9TdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwdXNoVW5kb1N0b3AoKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9jb25maWd1cmF0aW9uLm9wdGlvbnMuZ2V0KDgzIC8qIEVkaXRvck9wdGlvbi5yZWFkT25seSAqLykpIHsKICAgICAgICAvLyByZWFkIG9ubHkgZWRpdG9yID0+IHNvcnJ5IQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLl9tb2RlbERhdGEubW9kZWwucHVzaFN0YWNrRWxlbWVudCgpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb3BVbmRvU3RvcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcG9wVW5kb1N0b3AoKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9jb25maWd1cmF0aW9uLm9wdGlvbnMuZ2V0KDgzIC8qIEVkaXRvck9wdGlvbi5yZWFkT25seSAqLykpIHsKICAgICAgICAvLyByZWFkIG9ubHkgZWRpdG9yID0+IHNvcnJ5IQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLl9tb2RlbERhdGEubW9kZWwucG9wU3RhY2tFbGVtZW50KCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImV4ZWN1dGVFZGl0cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXhlY3V0ZUVkaXRzKHNvdXJjZSwgZWRpdHMsIGVuZEN1cnNvclN0YXRlKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9jb25maWd1cmF0aW9uLm9wdGlvbnMuZ2V0KDgzIC8qIEVkaXRvck9wdGlvbi5yZWFkT25seSAqLykpIHsKICAgICAgICAvLyByZWFkIG9ubHkgZWRpdG9yID0+IHNvcnJ5IQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgY3Vyc29yU3RhdGVDb21wdXRlcjsKICAgICAgaWYgKCFlbmRDdXJzb3JTdGF0ZSkgewogICAgICAgIGN1cnNvclN0YXRlQ29tcHV0ZXIgPSBmdW5jdGlvbiBjdXJzb3JTdGF0ZUNvbXB1dGVyKCkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGVuZEN1cnNvclN0YXRlKSkgewogICAgICAgIGN1cnNvclN0YXRlQ29tcHV0ZXIgPSBmdW5jdGlvbiBjdXJzb3JTdGF0ZUNvbXB1dGVyKCkgewogICAgICAgICAgcmV0dXJuIGVuZEN1cnNvclN0YXRlOwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3Vyc29yU3RhdGVDb21wdXRlciA9IGVuZEN1cnNvclN0YXRlOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuZXhlY3V0ZUVkaXRzKHNvdXJjZSwgZWRpdHMsIGN1cnNvclN0YXRlQ29tcHV0ZXIpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJleGVjdXRlQ29tbWFuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXhlY3V0ZUNvbW1hbmQoc291cmNlLCBjb21tYW5kKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuZXhlY3V0ZUNvbW1hbmQoY29tbWFuZCwgc291cmNlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJleGVjdXRlQ29tbWFuZHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGV4ZWN1dGVDb21tYW5kcyhzb3VyY2UsIGNvbW1hbmRzKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3TW9kZWwuZXhlY3V0ZUNvbW1hbmRzKGNvbW1hbmRzLCBzb3VyY2UpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZURlY29yYXRpb25zQ29sbGVjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRGVjb3JhdGlvbnNDb2xsZWN0aW9uKGRlY29yYXRpb25zKSB7CiAgICAgIHJldHVybiBuZXcgRWRpdG9yRGVjb3JhdGlvbnNDb2xsZWN0aW9uKHRoaXMsIGRlY29yYXRpb25zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGFuZ2VEZWNvcmF0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlRGVjb3JhdGlvbnMoY2FsbGJhY2spIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICAvLyBjYWxsYmFjayB3aWxsIG5vdCBiZSBjYWxsZWQKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fbW9kZWxEYXRhLm1vZGVsLmNoYW5nZURlY29yYXRpb25zKGNhbGxiYWNrLCB0aGlzLl9pZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TGluZURlY29yYXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMaW5lRGVjb3JhdGlvbnMobGluZU51bWJlcikgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEubW9kZWwuZ2V0TGluZURlY29yYXRpb25zKGxpbmVOdW1iZXIsIHRoaXMuX2lkLCBmaWx0ZXJWYWxpZGF0aW9uRGVjb3JhdGlvbnModGhpcy5fY29uZmlndXJhdGlvbi5vcHRpb25zKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0RGVjb3JhdGlvbnNJblJhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZWNvcmF0aW9uc0luUmFuZ2UocmFuZ2UpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fbW9kZWxEYXRhLm1vZGVsLmdldERlY29yYXRpb25zSW5SYW5nZShyYW5nZSwgdGhpcy5faWQsIGZpbHRlclZhbGlkYXRpb25EZWNvcmF0aW9ucyh0aGlzLl9jb25maWd1cmF0aW9uLm9wdGlvbnMpKTsKICAgIH0KICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwogIH0sIHsKICAgIGtleTogImRlbHRhRGVjb3JhdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlbHRhRGVjb3JhdGlvbnMob2xkRGVjb3JhdGlvbnMsIG5ld0RlY29yYXRpb25zKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIGlmIChvbGREZWNvcmF0aW9ucy5sZW5ndGggPT09IDAgJiYgbmV3RGVjb3JhdGlvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIG9sZERlY29yYXRpb25zOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEubW9kZWwuZGVsdGFEZWNvcmF0aW9ucyhvbGREZWNvcmF0aW9ucywgbmV3RGVjb3JhdGlvbnMsIHRoaXMuX2lkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVEZWNvcmF0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRGVjb3JhdGlvbnMoZGVjb3JhdGlvbklkcykgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSB8fCBkZWNvcmF0aW9uSWRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9tb2RlbERhdGEubW9kZWwuY2hhbmdlRGVjb3JhdGlvbnMoZnVuY3Rpb24gKGNoYW5nZUFjY2Vzc29yKSB7CiAgICAgICAgY2hhbmdlQWNjZXNzb3IuZGVsdGFEZWNvcmF0aW9ucyhkZWNvcmF0aW9uSWRzLCBbXSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZURlY29yYXRpb25zQnlUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVEZWNvcmF0aW9uc0J5VHlwZShkZWNvcmF0aW9uVHlwZUtleSkgewogICAgICAvLyByZW1vdmUgZGVjb3JhdGlvbnMgZm9yIHR5cGUgYW5kIHN1YiB0eXBlCiAgICAgIHZhciBvbGREZWNvcmF0aW9uc0lkcyA9IHRoaXMuX2RlY29yYXRpb25UeXBlS2V5c1RvSWRzW2RlY29yYXRpb25UeXBlS2V5XTsKICAgICAgaWYgKG9sZERlY29yYXRpb25zSWRzKSB7CiAgICAgICAgdGhpcy5kZWx0YURlY29yYXRpb25zKG9sZERlY29yYXRpb25zSWRzLCBbXSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX2RlY29yYXRpb25UeXBlS2V5c1RvSWRzLmhhc093blByb3BlcnR5KGRlY29yYXRpb25UeXBlS2V5KSkgewogICAgICAgIGRlbGV0ZSB0aGlzLl9kZWNvcmF0aW9uVHlwZUtleXNUb0lkc1tkZWNvcmF0aW9uVHlwZUtleV07CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX2RlY29yYXRpb25UeXBlU3VidHlwZXMuaGFzT3duUHJvcGVydHkoZGVjb3JhdGlvblR5cGVLZXkpKSB7CiAgICAgICAgZGVsZXRlIHRoaXMuX2RlY29yYXRpb25UeXBlU3VidHlwZXNbZGVjb3JhdGlvblR5cGVLZXldOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TGF5b3V0SW5mbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGF5b3V0SW5mbygpIHsKICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLl9jb25maWd1cmF0aW9uLm9wdGlvbnM7CiAgICAgIHZhciBsYXlvdXRJbmZvID0gb3B0aW9ucy5nZXQoMTMzIC8qIEVkaXRvck9wdGlvbi5sYXlvdXRJbmZvICovKTsKICAgICAgcmV0dXJuIGxheW91dEluZm87CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlT3ZlcnZpZXdSdWxlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlT3ZlcnZpZXdSdWxlcihjc3NDbGFzc05hbWUpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEgfHwgIXRoaXMuX21vZGVsRGF0YS5oYXNSZWFsVmlldykgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEudmlldy5jcmVhdGVPdmVydmlld1J1bGVyKGNzc0NsYXNzTmFtZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q29udGFpbmVyRG9tTm9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGFpbmVyRG9tTm9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvbUVsZW1lbnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0RG9tTm9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RG9tTm9kZSgpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEgfHwgIXRoaXMuX21vZGVsRGF0YS5oYXNSZWFsVmlldykgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEudmlldy5kb21Ob2RlLmRvbU5vZGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVsZWdhdGVWZXJ0aWNhbFNjcm9sbGJhclBvaW50ZXJEb3duIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxlZ2F0ZVZlcnRpY2FsU2Nyb2xsYmFyUG9pbnRlckRvd24oYnJvd3NlckV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhIHx8ICF0aGlzLl9tb2RlbERhdGEuaGFzUmVhbFZpZXcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXcuZGVsZWdhdGVWZXJ0aWNhbFNjcm9sbGJhclBvaW50ZXJEb3duKGJyb3dzZXJFdmVudCk7CiAgICB9CiAgfSwgewogICAga2V5OiAibGF5b3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsYXlvdXQoZGltZW5zaW9uKSB7CiAgICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24ub2JzZXJ2ZUNvbnRhaW5lcihkaW1lbnNpb24pOwogICAgICB0aGlzLnJlbmRlcigpOwogICAgfQogIH0sIHsKICAgIGtleTogImZvY3VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb2N1cygpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEgfHwgIXRoaXMuX21vZGVsRGF0YS5oYXNSZWFsVmlldykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9tb2RlbERhdGEudmlldy5mb2N1cygpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhc1RleHRGb2N1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzVGV4dEZvY3VzKCkgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSB8fCAhdGhpcy5fbW9kZWxEYXRhLmhhc1JlYWxWaWV3KSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEudmlldy5pc0ZvY3VzZWQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNXaWRnZXRGb2N1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzV2lkZ2V0Rm9jdXMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9mb2N1c1RyYWNrZXIgJiYgdGhpcy5fZm9jdXNUcmFja2VyLmhhc0ZvY3VzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkQ29udGVudFdpZGdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ29udGVudFdpZGdldCh3aWRnZXQpIHsKICAgICAgdmFyIHdpZGdldERhdGEgPSB7CiAgICAgICAgd2lkZ2V0OiB3aWRnZXQsCiAgICAgICAgcG9zaXRpb246IHdpZGdldC5nZXRQb3NpdGlvbigpCiAgICAgIH07CiAgICAgIGlmICh0aGlzLl9jb250ZW50V2lkZ2V0cy5oYXNPd25Qcm9wZXJ0eSh3aWRnZXQuZ2V0SWQoKSkpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ092ZXJ3cml0aW5nIGEgY29udGVudCB3aWRnZXQgd2l0aCB0aGUgc2FtZSBpZC4nKTsKICAgICAgfQogICAgICB0aGlzLl9jb250ZW50V2lkZ2V0c1t3aWRnZXQuZ2V0SWQoKV0gPSB3aWRnZXREYXRhOwogICAgICBpZiAodGhpcy5fbW9kZWxEYXRhICYmIHRoaXMuX21vZGVsRGF0YS5oYXNSZWFsVmlldykgewogICAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3LmFkZENvbnRlbnRXaWRnZXQod2lkZ2V0RGF0YSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJsYXlvdXRDb250ZW50V2lkZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsYXlvdXRDb250ZW50V2lkZ2V0KHdpZGdldCkgewogICAgICB2YXIgd2lkZ2V0SWQgPSB3aWRnZXQuZ2V0SWQoKTsKICAgICAgaWYgKHRoaXMuX2NvbnRlbnRXaWRnZXRzLmhhc093blByb3BlcnR5KHdpZGdldElkKSkgewogICAgICAgIHZhciB3aWRnZXREYXRhID0gdGhpcy5fY29udGVudFdpZGdldHNbd2lkZ2V0SWRdOwogICAgICAgIHdpZGdldERhdGEucG9zaXRpb24gPSB3aWRnZXQuZ2V0UG9zaXRpb24oKTsKICAgICAgICBpZiAodGhpcy5fbW9kZWxEYXRhICYmIHRoaXMuX21vZGVsRGF0YS5oYXNSZWFsVmlldykgewogICAgICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXcubGF5b3V0Q29udGVudFdpZGdldCh3aWRnZXREYXRhKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVDb250ZW50V2lkZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVDb250ZW50V2lkZ2V0KHdpZGdldCkgewogICAgICB2YXIgd2lkZ2V0SWQgPSB3aWRnZXQuZ2V0SWQoKTsKICAgICAgaWYgKHRoaXMuX2NvbnRlbnRXaWRnZXRzLmhhc093blByb3BlcnR5KHdpZGdldElkKSkgewogICAgICAgIHZhciB3aWRnZXREYXRhID0gdGhpcy5fY29udGVudFdpZGdldHNbd2lkZ2V0SWRdOwogICAgICAgIGRlbGV0ZSB0aGlzLl9jb250ZW50V2lkZ2V0c1t3aWRnZXRJZF07CiAgICAgICAgaWYgKHRoaXMuX21vZGVsRGF0YSAmJiB0aGlzLl9tb2RlbERhdGEuaGFzUmVhbFZpZXcpIHsKICAgICAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3LnJlbW92ZUNvbnRlbnRXaWRnZXQod2lkZ2V0RGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkT3ZlcmxheVdpZGdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkT3ZlcmxheVdpZGdldCh3aWRnZXQpIHsKICAgICAgdmFyIHdpZGdldERhdGEgPSB7CiAgICAgICAgd2lkZ2V0OiB3aWRnZXQsCiAgICAgICAgcG9zaXRpb246IHdpZGdldC5nZXRQb3NpdGlvbigpCiAgICAgIH07CiAgICAgIGlmICh0aGlzLl9vdmVybGF5V2lkZ2V0cy5oYXNPd25Qcm9wZXJ0eSh3aWRnZXQuZ2V0SWQoKSkpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ092ZXJ3cml0aW5nIGFuIG92ZXJsYXkgd2lkZ2V0IHdpdGggdGhlIHNhbWUgaWQuJyk7CiAgICAgIH0KICAgICAgdGhpcy5fb3ZlcmxheVdpZGdldHNbd2lkZ2V0LmdldElkKCldID0gd2lkZ2V0RGF0YTsKICAgICAgaWYgKHRoaXMuX21vZGVsRGF0YSAmJiB0aGlzLl9tb2RlbERhdGEuaGFzUmVhbFZpZXcpIHsKICAgICAgICB0aGlzLl9tb2RlbERhdGEudmlldy5hZGRPdmVybGF5V2lkZ2V0KHdpZGdldERhdGEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAibGF5b3V0T3ZlcmxheVdpZGdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbGF5b3V0T3ZlcmxheVdpZGdldCh3aWRnZXQpIHsKICAgICAgdmFyIHdpZGdldElkID0gd2lkZ2V0LmdldElkKCk7CiAgICAgIGlmICh0aGlzLl9vdmVybGF5V2lkZ2V0cy5oYXNPd25Qcm9wZXJ0eSh3aWRnZXRJZCkpIHsKICAgICAgICB2YXIgd2lkZ2V0RGF0YSA9IHRoaXMuX292ZXJsYXlXaWRnZXRzW3dpZGdldElkXTsKICAgICAgICB3aWRnZXREYXRhLnBvc2l0aW9uID0gd2lkZ2V0LmdldFBvc2l0aW9uKCk7CiAgICAgICAgaWYgKHRoaXMuX21vZGVsRGF0YSAmJiB0aGlzLl9tb2RlbERhdGEuaGFzUmVhbFZpZXcpIHsKICAgICAgICAgIHRoaXMuX21vZGVsRGF0YS52aWV3LmxheW91dE92ZXJsYXlXaWRnZXQod2lkZ2V0RGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlT3ZlcmxheVdpZGdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlT3ZlcmxheVdpZGdldCh3aWRnZXQpIHsKICAgICAgdmFyIHdpZGdldElkID0gd2lkZ2V0LmdldElkKCk7CiAgICAgIGlmICh0aGlzLl9vdmVybGF5V2lkZ2V0cy5oYXNPd25Qcm9wZXJ0eSh3aWRnZXRJZCkpIHsKICAgICAgICB2YXIgd2lkZ2V0RGF0YSA9IHRoaXMuX292ZXJsYXlXaWRnZXRzW3dpZGdldElkXTsKICAgICAgICBkZWxldGUgdGhpcy5fb3ZlcmxheVdpZGdldHNbd2lkZ2V0SWRdOwogICAgICAgIGlmICh0aGlzLl9tb2RlbERhdGEgJiYgdGhpcy5fbW9kZWxEYXRhLmhhc1JlYWxWaWV3KSB7CiAgICAgICAgICB0aGlzLl9tb2RlbERhdGEudmlldy5yZW1vdmVPdmVybGF5V2lkZ2V0KHdpZGdldERhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNoYW5nZVZpZXdab25lcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlVmlld1pvbmVzKGNhbGxiYWNrKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhIHx8ICF0aGlzLl9tb2RlbERhdGEuaGFzUmVhbFZpZXcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXcuY2hhbmdlKGNhbGxiYWNrKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUYXJnZXRBdENsaWVudFBvaW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUYXJnZXRBdENsaWVudFBvaW50KGNsaWVudFgsIGNsaWVudFkpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEgfHwgIXRoaXMuX21vZGVsRGF0YS5oYXNSZWFsVmlldykgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEudmlldy5nZXRUYXJnZXRBdENsaWVudFBvaW50KGNsaWVudFgsIGNsaWVudFkpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFNjcm9sbGVkVmlzaWJsZVBvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxlZFZpc2libGVQb3NpdGlvbihyYXdQb3NpdGlvbikgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSB8fCAhdGhpcy5fbW9kZWxEYXRhLmhhc1JlYWxWaWV3KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5fbW9kZWxEYXRhLm1vZGVsLnZhbGlkYXRlUG9zaXRpb24ocmF3UG9zaXRpb24pOwogICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuX2NvbmZpZ3VyYXRpb24ub3B0aW9uczsKICAgICAgdmFyIGxheW91dEluZm8gPSBvcHRpb25zLmdldCgxMzMgLyogRWRpdG9yT3B0aW9uLmxheW91dEluZm8gKi8pOwogICAgICB2YXIgdG9wID0gQ29kZUVkaXRvcldpZGdldC5fZ2V0VmVydGljYWxPZmZzZXRGb3JQb3NpdGlvbih0aGlzLl9tb2RlbERhdGEsIHBvc2l0aW9uLmxpbmVOdW1iZXIsIHBvc2l0aW9uLmNvbHVtbikgLSB0aGlzLmdldFNjcm9sbFRvcCgpOwogICAgICB2YXIgbGVmdCA9IHRoaXMuX21vZGVsRGF0YS52aWV3LmdldE9mZnNldEZvckNvbHVtbihwb3NpdGlvbi5saW5lTnVtYmVyLCBwb3NpdGlvbi5jb2x1bW4pICsgbGF5b3V0SW5mby5nbHlwaE1hcmdpbldpZHRoICsgbGF5b3V0SW5mby5saW5lTnVtYmVyc1dpZHRoICsgbGF5b3V0SW5mby5kZWNvcmF0aW9uc1dpZHRoIC0gdGhpcy5nZXRTY3JvbGxMZWZ0KCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9wOiB0b3AsCiAgICAgICAgbGVmdDogbGVmdCwKICAgICAgICBoZWlnaHQ6IG9wdGlvbnMuZ2V0KDYxIC8qIEVkaXRvck9wdGlvbi5saW5lSGVpZ2h0ICovKQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImdldE9mZnNldEZvckNvbHVtbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9yQ29sdW1uKGxpbmVOdW1iZXIsIGNvbHVtbikgewogICAgICBpZiAoIXRoaXMuX21vZGVsRGF0YSB8fCAhdGhpcy5fbW9kZWxEYXRhLmhhc1JlYWxWaWV3KSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbERhdGEudmlldy5nZXRPZmZzZXRGb3JDb2x1bW4obGluZU51bWJlciwgY29sdW1uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIGZvcmNlUmVkcmF3ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEgfHwgIXRoaXMuX21vZGVsRGF0YS5oYXNSZWFsVmlldykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9tb2RlbERhdGEudmlldy5yZW5kZXIodHJ1ZSwgZm9yY2VSZWRyYXcpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEFyaWFPcHRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBcmlhT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxEYXRhIHx8ICF0aGlzLl9tb2RlbERhdGEuaGFzUmVhbFZpZXcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fbW9kZWxEYXRhLnZpZXcuc2V0QXJpYU9wdGlvbnMob3B0aW9ucyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYXBwbHlGb250SW5mbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXBwbHlGb250SW5mbyh0YXJnZXQpIHsKICAgICAgX2FwcGx5Rm9udEluZm8odGFyZ2V0LCB0aGlzLl9jb25maWd1cmF0aW9uLm9wdGlvbnMuZ2V0KDQ2IC8qIEVkaXRvck9wdGlvbi5mb250SW5mbyAqLykpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEJhbm5lciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QmFubmVyKGRvbU5vZGUsIGRvbU5vZGVIZWlnaHQpIHsKICAgICAgaWYgKHRoaXMuX2Jhbm5lckRvbU5vZGUgJiYgdGhpcy5fZG9tRWxlbWVudC5jb250YWlucyh0aGlzLl9iYW5uZXJEb21Ob2RlKSkgewogICAgICAgIHRoaXMuX2RvbUVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fYmFubmVyRG9tTm9kZSk7CiAgICAgIH0KICAgICAgdGhpcy5fYmFubmVyRG9tTm9kZSA9IGRvbU5vZGU7CiAgICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24uc2V0UmVzZXJ2ZWRIZWlnaHQoZG9tTm9kZSA/IGRvbU5vZGVIZWlnaHQgOiAwKTsKICAgICAgaWYgKHRoaXMuX2Jhbm5lckRvbU5vZGUpIHsKICAgICAgICB0aGlzLl9kb21FbGVtZW50LnByZXBlbmQodGhpcy5fYmFubmVyRG9tTm9kZSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfYXR0YWNoTW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hdHRhY2hNb2RlbChtb2RlbCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgaWYgKCFtb2RlbCkgewogICAgICAgIHRoaXMuX21vZGVsRGF0YSA9IG51bGw7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBsaXN0ZW5lcnNUb1JlbW92ZSA9IFtdOwogICAgICB0aGlzLl9kb21FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1tb2RlLWlkJywgbW9kZWwuZ2V0TGFuZ3VhZ2VJZCgpKTsKICAgICAgdGhpcy5fY29uZmlndXJhdGlvbi5zZXRJc0RvbWluYXRlZEJ5TG9uZ0xpbmVzKG1vZGVsLmlzRG9taW5hdGVkQnlMb25nTGluZXMoKSk7CiAgICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24uc2V0TW9kZWxMaW5lQ291bnQobW9kZWwuZ2V0TGluZUNvdW50KCkpOwogICAgICBtb2RlbC5vbkJlZm9yZUF0dGFjaGVkKCk7CiAgICAgIHZhciB2aWV3TW9kZWwgPSBuZXcgVmlld01vZGVsKHRoaXMuX2lkLCB0aGlzLl9jb25maWd1cmF0aW9uLCBtb2RlbCwgRE9NTGluZUJyZWFrc0NvbXB1dGVyRmFjdG9yeS5jcmVhdGUoKSwgTW9ub3NwYWNlTGluZUJyZWFrc0NvbXB1dGVyRmFjdG9yeS5jcmVhdGUodGhpcy5fY29uZmlndXJhdGlvbi5vcHRpb25zKSwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJuIGRvbS5zY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTsKICAgICAgfSwgdGhpcy5sYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlLCB0aGlzLl90aGVtZVNlcnZpY2UpOwogICAgICAvLyBTb21lb25lIG1pZ2h0IGRlc3Ryb3kgdGhlIG1vZGVsIGZyb20gdW5kZXIgdGhlIGVkaXRvciwgc28gcHJldmVudCBhbnkgZXhjZXB0aW9ucyBieSBzZXR0aW5nIGEgbnVsbCBtb2RlbAogICAgICBsaXN0ZW5lcnNUb1JlbW92ZS5wdXNoKG1vZGVsLm9uV2lsbERpc3Bvc2UoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczMuc2V0TW9kZWwobnVsbCk7CiAgICAgIH0pKTsKICAgICAgbGlzdGVuZXJzVG9SZW1vdmUucHVzaCh2aWV3TW9kZWwub25FdmVudChmdW5jdGlvbiAoZSkgewogICAgICAgIHN3aXRjaCAoZS5raW5kKSB7CiAgICAgICAgICBjYXNlIDAgLyogT3V0Z29pbmdWaWV3TW9kZWxFdmVudEtpbmQuQ29udGVudFNpemVDaGFuZ2VkICovOgogICAgICAgICAgICBfdGhpczMuX29uRGlkQ29udGVudFNpemVDaGFuZ2UuZmlyZShlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEgLyogT3V0Z29pbmdWaWV3TW9kZWxFdmVudEtpbmQuRm9jdXNDaGFuZ2VkICovOgogICAgICAgICAgICBfdGhpczMuX2VkaXRvclRleHRGb2N1cy5zZXRWYWx1ZShlLmhhc0ZvY3VzKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDIgLyogT3V0Z29pbmdWaWV3TW9kZWxFdmVudEtpbmQuU2Nyb2xsQ2hhbmdlZCAqLzoKICAgICAgICAgICAgX3RoaXMzLl9vbkRpZFNjcm9sbENoYW5nZS5maXJlKGUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMyAvKiBPdXRnb2luZ1ZpZXdNb2RlbEV2ZW50S2luZC5WaWV3Wm9uZXNDaGFuZ2VkICovOgogICAgICAgICAgICBfdGhpczMuX29uRGlkQ2hhbmdlVmlld1pvbmVzLmZpcmUoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQgLyogT3V0Z29pbmdWaWV3TW9kZWxFdmVudEtpbmQuSGlkZGVuQXJlYXNDaGFuZ2VkICovOgogICAgICAgICAgICBfdGhpczMuX29uRGlkQ2hhbmdlSGlkZGVuQXJlYXMuZmlyZSgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgNSAvKiBPdXRnb2luZ1ZpZXdNb2RlbEV2ZW50S2luZC5SZWFkT25seUVkaXRBdHRlbXB0ICovOgogICAgICAgICAgICBfdGhpczMuX29uRGlkQXR0ZW1wdFJlYWRPbmx5RWRpdC5maXJlKCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA2IC8qIE91dGdvaW5nVmlld01vZGVsRXZlbnRLaW5kLkN1cnNvclN0YXRlQ2hhbmdlZCAqLzoKICAgICAgICAgICAgewogICAgICAgICAgICAgIGlmIChlLnJlYWNoZWRNYXhDdXJzb3JDb3VudCkgewogICAgICAgICAgICAgICAgX3RoaXMzLl9ub3RpZmljYXRpb25TZXJ2aWNlLndhcm4obmxzLmxvY2FsaXplKCdjdXJzb3JzLm1heGltdW0nLCAiVGhlIG51bWJlciBvZiBjdXJzb3JzIGhhcyBiZWVuIGxpbWl0ZWQgdG8gezB9LiIsIEN1cnNvcnNDb250cm9sbGVyLk1BWF9DVVJTT1JfQ09VTlQpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlLnNlbGVjdGlvbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpXSA9IGUuc2VsZWN0aW9uc1tpXS5nZXRQb3NpdGlvbigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB2YXIgZTEgPSB7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb25zWzBdLAogICAgICAgICAgICAgICAgc2Vjb25kYXJ5UG9zaXRpb25zOiBwb3NpdGlvbnMuc2xpY2UoMSksCiAgICAgICAgICAgICAgICByZWFzb246IGUucmVhc29uLAogICAgICAgICAgICAgICAgc291cmNlOiBlLnNvdXJjZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX3RoaXMzLl9vbkRpZENoYW5nZUN1cnNvclBvc2l0aW9uLmZpcmUoZTEpOwogICAgICAgICAgICAgIHZhciBlMiA9IHsKICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogZS5zZWxlY3Rpb25zWzBdLAogICAgICAgICAgICAgICAgc2Vjb25kYXJ5U2VsZWN0aW9uczogZS5zZWxlY3Rpb25zLnNsaWNlKDEpLAogICAgICAgICAgICAgICAgbW9kZWxWZXJzaW9uSWQ6IGUubW9kZWxWZXJzaW9uSWQsCiAgICAgICAgICAgICAgICBvbGRTZWxlY3Rpb25zOiBlLm9sZFNlbGVjdGlvbnMsCiAgICAgICAgICAgICAgICBvbGRNb2RlbFZlcnNpb25JZDogZS5vbGRNb2RlbFZlcnNpb25JZCwKICAgICAgICAgICAgICAgIHNvdXJjZTogZS5zb3VyY2UsCiAgICAgICAgICAgICAgICByZWFzb246IGUucmVhc29uCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfdGhpczMuX29uRGlkQ2hhbmdlQ3Vyc29yU2VsZWN0aW9uLmZpcmUoZTIpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICBjYXNlIDcgLyogT3V0Z29pbmdWaWV3TW9kZWxFdmVudEtpbmQuTW9kZWxEZWNvcmF0aW9uc0NoYW5nZWQgKi86CiAgICAgICAgICAgIF90aGlzMy5fb25EaWRDaGFuZ2VNb2RlbERlY29yYXRpb25zLmZpcmUoZS5ldmVudCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA4IC8qIE91dGdvaW5nVmlld01vZGVsRXZlbnRLaW5kLk1vZGVsTGFuZ3VhZ2VDaGFuZ2VkICovOgogICAgICAgICAgICBfdGhpczMuX2RvbUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLW1vZGUtaWQnLCBtb2RlbC5nZXRMYW5ndWFnZUlkKCkpOwogICAgICAgICAgICBfdGhpczMuX29uRGlkQ2hhbmdlTW9kZWxMYW5ndWFnZS5maXJlKGUuZXZlbnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgOSAvKiBPdXRnb2luZ1ZpZXdNb2RlbEV2ZW50S2luZC5Nb2RlbExhbmd1YWdlQ29uZmlndXJhdGlvbkNoYW5nZWQgKi86CiAgICAgICAgICAgIF90aGlzMy5fb25EaWRDaGFuZ2VNb2RlbExhbmd1YWdlQ29uZmlndXJhdGlvbi5maXJlKGUuZXZlbnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTAgLyogT3V0Z29pbmdWaWV3TW9kZWxFdmVudEtpbmQuTW9kZWxDb250ZW50Q2hhbmdlZCAqLzoKICAgICAgICAgICAgX3RoaXMzLl9vbkRpZENoYW5nZU1vZGVsQ29udGVudC5maXJlKGUuZXZlbnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTEgLyogT3V0Z29pbmdWaWV3TW9kZWxFdmVudEtpbmQuTW9kZWxPcHRpb25zQ2hhbmdlZCAqLzoKICAgICAgICAgICAgX3RoaXMzLl9vbkRpZENoYW5nZU1vZGVsT3B0aW9ucy5maXJlKGUuZXZlbnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTIgLyogT3V0Z29pbmdWaWV3TW9kZWxFdmVudEtpbmQuTW9kZWxUb2tlbnNDaGFuZ2VkICovOgogICAgICAgICAgICBfdGhpczMuX29uRGlkQ2hhbmdlTW9kZWxUb2tlbnMuZmlyZShlLmV2ZW50KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9KSk7CiAgICAgIHZhciBfdGhpcyRfY3JlYXRlVmlldyA9IHRoaXMuX2NyZWF0ZVZpZXcodmlld01vZGVsKSwKICAgICAgICBfdGhpcyRfY3JlYXRlVmlldzIgPSBfc2xpY2VkVG9BcnJheShfdGhpcyRfY3JlYXRlVmlldywgMiksCiAgICAgICAgdmlldyA9IF90aGlzJF9jcmVhdGVWaWV3MlswXSwKICAgICAgICBoYXNSZWFsVmlldyA9IF90aGlzJF9jcmVhdGVWaWV3MlsxXTsKICAgICAgaWYgKGhhc1JlYWxWaWV3KSB7CiAgICAgICAgdGhpcy5fZG9tRWxlbWVudC5hcHBlbmRDaGlsZCh2aWV3LmRvbU5vZGUuZG9tTm9kZSk7CiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLl9jb250ZW50V2lkZ2V0cyk7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIHZhciB3aWRnZXRJZCA9IGtleXNbaV07CiAgICAgICAgICB2aWV3LmFkZENvbnRlbnRXaWRnZXQodGhpcy5fY29udGVudFdpZGdldHNbd2lkZ2V0SWRdKTsKICAgICAgICB9CiAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX292ZXJsYXlXaWRnZXRzKTsKICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfbGVuID0ga2V5cy5sZW5ndGg7IF9pMiA8IF9sZW47IF9pMisrKSB7CiAgICAgICAgICB2YXIgX3dpZGdldElkID0ga2V5c1tfaTJdOwogICAgICAgICAgdmlldy5hZGRPdmVybGF5V2lkZ2V0KHRoaXMuX292ZXJsYXlXaWRnZXRzW193aWRnZXRJZF0pOwogICAgICAgIH0KICAgICAgICB2aWV3LnJlbmRlcihmYWxzZSwgdHJ1ZSk7CiAgICAgICAgdmlldy5kb21Ob2RlLmRvbU5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXVyaScsIG1vZGVsLnVyaS50b1N0cmluZygpKTsKICAgICAgfQogICAgICB0aGlzLl9tb2RlbERhdGEgPSBuZXcgTW9kZWxEYXRhKG1vZGVsLCB2aWV3TW9kZWwsIHZpZXcsIGhhc1JlYWxWaWV3LCBsaXN0ZW5lcnNUb1JlbW92ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2NyZWF0ZVZpZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVWaWV3KHZpZXdNb2RlbCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIGNvbW1hbmREZWxlZ2F0ZTsKICAgICAgaWYgKHRoaXMuaXNTaW1wbGVXaWRnZXQpIHsKICAgICAgICBjb21tYW5kRGVsZWdhdGUgPSB7CiAgICAgICAgICBwYXN0ZTogZnVuY3Rpb24gcGFzdGUodGV4dCwgcGFzdGVPbk5ld0xpbmUsIG11bHRpY3Vyc29yVGV4dCwgbW9kZSkgewogICAgICAgICAgICBfdGhpczQuX3Bhc3RlKCdrZXlib2FyZCcsIHRleHQsIHBhc3RlT25OZXdMaW5lLCBtdWx0aWN1cnNvclRleHQsIG1vZGUpOwogICAgICAgICAgfSwKICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUodGV4dCkgewogICAgICAgICAgICBfdGhpczQuX3R5cGUoJ2tleWJvYXJkJywgdGV4dCk7CiAgICAgICAgICB9LAogICAgICAgICAgY29tcG9zaXRpb25UeXBlOiBmdW5jdGlvbiBjb21wb3NpdGlvblR5cGUodGV4dCwgcmVwbGFjZVByZXZDaGFyQ250LCByZXBsYWNlTmV4dENoYXJDbnQsIHBvc2l0aW9uRGVsdGEpIHsKICAgICAgICAgICAgX3RoaXM0Ll9jb21wb3NpdGlvblR5cGUoJ2tleWJvYXJkJywgdGV4dCwgcmVwbGFjZVByZXZDaGFyQ250LCByZXBsYWNlTmV4dENoYXJDbnQsIHBvc2l0aW9uRGVsdGEpOwogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0Q29tcG9zaXRpb246IGZ1bmN0aW9uIHN0YXJ0Q29tcG9zaXRpb24oKSB7CiAgICAgICAgICAgIF90aGlzNC5fc3RhcnRDb21wb3NpdGlvbigpOwogICAgICAgICAgfSwKICAgICAgICAgIGVuZENvbXBvc2l0aW9uOiBmdW5jdGlvbiBlbmRDb21wb3NpdGlvbigpIHsKICAgICAgICAgICAgX3RoaXM0Ll9lbmRDb21wb3NpdGlvbigna2V5Ym9hcmQnKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjdXQ6IGZ1bmN0aW9uIGN1dCgpIHsKICAgICAgICAgICAgX3RoaXM0Ll9jdXQoJ2tleWJvYXJkJyk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb21tYW5kRGVsZWdhdGUgPSB7CiAgICAgICAgICBwYXN0ZTogZnVuY3Rpb24gcGFzdGUodGV4dCwgcGFzdGVPbk5ld0xpbmUsIG11bHRpY3Vyc29yVGV4dCwgbW9kZSkgewogICAgICAgICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LAogICAgICAgICAgICAgIHBhc3RlT25OZXdMaW5lOiBwYXN0ZU9uTmV3TGluZSwKICAgICAgICAgICAgICBtdWx0aWN1cnNvclRleHQ6IG11bHRpY3Vyc29yVGV4dCwKICAgICAgICAgICAgICBtb2RlOiBtb2RlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIF90aGlzNC5fY29tbWFuZFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoInBhc3RlIiAvKiBlZGl0b3JDb21tb24uSGFuZGxlci5QYXN0ZSAqLywgcGF5bG9hZCk7CiAgICAgICAgICB9LAogICAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZSh0ZXh0KSB7CiAgICAgICAgICAgIHZhciBwYXlsb2FkID0gewogICAgICAgICAgICAgIHRleHQ6IHRleHQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgX3RoaXM0Ll9jb21tYW5kU2VydmljZS5leGVjdXRlQ29tbWFuZCgidHlwZSIgLyogZWRpdG9yQ29tbW9uLkhhbmRsZXIuVHlwZSAqLywgcGF5bG9hZCk7CiAgICAgICAgICB9LAogICAgICAgICAgY29tcG9zaXRpb25UeXBlOiBmdW5jdGlvbiBjb21wb3NpdGlvblR5cGUodGV4dCwgcmVwbGFjZVByZXZDaGFyQ250LCByZXBsYWNlTmV4dENoYXJDbnQsIHBvc2l0aW9uRGVsdGEpIHsKICAgICAgICAgICAgLy8gVHJ5IGlmIHBvc3NpYmxlIHRvIGdvIHRocm91Z2ggdGhlIGV4aXN0aW5nIGByZXBsYWNlUHJldmlvdXNDaGFyYCBjb21tYW5kCiAgICAgICAgICAgIGlmIChyZXBsYWNlTmV4dENoYXJDbnQgfHwgcG9zaXRpb25EZWx0YSkgewogICAgICAgICAgICAgIC8vIG11c3QgYmUgaGFuZGxlZCB0aHJvdWdoIHRoZSBuZXcgY29tbWFuZAogICAgICAgICAgICAgIHZhciBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICAgICAgICAgIHJlcGxhY2VQcmV2Q2hhckNudDogcmVwbGFjZVByZXZDaGFyQ250LAogICAgICAgICAgICAgICAgcmVwbGFjZU5leHRDaGFyQ250OiByZXBsYWNlTmV4dENoYXJDbnQsCiAgICAgICAgICAgICAgICBwb3NpdGlvbkRlbHRhOiBwb3NpdGlvbkRlbHRhCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfdGhpczQuX2NvbW1hbmRTZXJ2aWNlLmV4ZWN1dGVDb21tYW5kKCJjb21wb3NpdGlvblR5cGUiIC8qIGVkaXRvckNvbW1vbi5IYW5kbGVyLkNvbXBvc2l0aW9uVHlwZSAqLywgcGF5bG9hZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIF9wYXlsb2FkID0gewogICAgICAgICAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICAgICAgICAgIHJlcGxhY2VDaGFyQ250OiByZXBsYWNlUHJldkNoYXJDbnQKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF90aGlzNC5fY29tbWFuZFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoInJlcGxhY2VQcmV2aW91c0NoYXIiIC8qIGVkaXRvckNvbW1vbi5IYW5kbGVyLlJlcGxhY2VQcmV2aW91c0NoYXIgKi8sIF9wYXlsb2FkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHN0YXJ0Q29tcG9zaXRpb246IGZ1bmN0aW9uIHN0YXJ0Q29tcG9zaXRpb24oKSB7CiAgICAgICAgICAgIF90aGlzNC5fY29tbWFuZFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoImNvbXBvc2l0aW9uU3RhcnQiIC8qIGVkaXRvckNvbW1vbi5IYW5kbGVyLkNvbXBvc2l0aW9uU3RhcnQgKi8sIHt9KTsKICAgICAgICAgIH0sCiAgICAgICAgICBlbmRDb21wb3NpdGlvbjogZnVuY3Rpb24gZW5kQ29tcG9zaXRpb24oKSB7CiAgICAgICAgICAgIF90aGlzNC5fY29tbWFuZFNlcnZpY2UuZXhlY3V0ZUNvbW1hbmQoImNvbXBvc2l0aW9uRW5kIiAvKiBlZGl0b3JDb21tb24uSGFuZGxlci5Db21wb3NpdGlvbkVuZCAqLywge30pOwogICAgICAgICAgfSwKICAgICAgICAgIGN1dDogZnVuY3Rpb24gY3V0KCkgewogICAgICAgICAgICBfdGhpczQuX2NvbW1hbmRTZXJ2aWNlLmV4ZWN1dGVDb21tYW5kKCJjdXQiIC8qIGVkaXRvckNvbW1vbi5IYW5kbGVyLkN1dCAqLywge30pOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgICAgdmFyIHZpZXdVc2VySW5wdXRFdmVudHMgPSBuZXcgVmlld1VzZXJJbnB1dEV2ZW50cyh2aWV3TW9kZWwuY29vcmRpbmF0ZXNDb252ZXJ0ZXIpOwogICAgICB2aWV3VXNlcklucHV0RXZlbnRzLm9uS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNC5fb25LZXlEb3duLmZpcmUoZSk7CiAgICAgIH07CiAgICAgIHZpZXdVc2VySW5wdXRFdmVudHMub25LZXlVcCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNC5fb25LZXlVcC5maXJlKGUpOwogICAgICB9OwogICAgICB2aWV3VXNlcklucHV0RXZlbnRzLm9uQ29udGV4dE1lbnUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBfdGhpczQuX29uQ29udGV4dE1lbnUuZmlyZShlKTsKICAgICAgfTsKICAgICAgdmlld1VzZXJJbnB1dEV2ZW50cy5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNC5fb25Nb3VzZU1vdmUuZmlyZShlKTsKICAgICAgfTsKICAgICAgdmlld1VzZXJJbnB1dEV2ZW50cy5vbk1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBfdGhpczQuX29uTW91c2VMZWF2ZS5maXJlKGUpOwogICAgICB9OwogICAgICB2aWV3VXNlcklucHV0RXZlbnRzLm9uTW91c2VEb3duID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gX3RoaXM0Ll9vbk1vdXNlRG93bi5maXJlKGUpOwogICAgICB9OwogICAgICB2aWV3VXNlcklucHV0RXZlbnRzLm9uTW91c2VVcCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNC5fb25Nb3VzZVVwLmZpcmUoZSk7CiAgICAgIH07CiAgICAgIHZpZXdVc2VySW5wdXRFdmVudHMub25Nb3VzZURyYWcgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBfdGhpczQuX29uTW91c2VEcmFnLmZpcmUoZSk7CiAgICAgIH07CiAgICAgIHZpZXdVc2VySW5wdXRFdmVudHMub25Nb3VzZURyb3AgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBfdGhpczQuX29uTW91c2VEcm9wLmZpcmUoZSk7CiAgICAgIH07CiAgICAgIHZpZXdVc2VySW5wdXRFdmVudHMub25Nb3VzZURyb3BDYW5jZWxlZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNC5fb25Nb3VzZURyb3BDYW5jZWxlZC5maXJlKGUpOwogICAgICB9OwogICAgICB2aWV3VXNlcklucHV0RXZlbnRzLm9uTW91c2VXaGVlbCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNC5fb25Nb3VzZVdoZWVsLmZpcmUoZSk7CiAgICAgIH07CiAgICAgIHZhciB2aWV3ID0gbmV3IFZpZXcoY29tbWFuZERlbGVnYXRlLCB0aGlzLl9jb25maWd1cmF0aW9uLCB0aGlzLl90aGVtZVNlcnZpY2UuZ2V0Q29sb3JUaGVtZSgpLCB2aWV3TW9kZWwsIHZpZXdVc2VySW5wdXRFdmVudHMsIHRoaXMuX292ZXJmbG93V2lkZ2V0c0RvbU5vZGUpOwogICAgICByZXR1cm4gW3ZpZXcsIHRydWVdOwogICAgfQogIH0sIHsKICAgIGtleTogIl9wb3N0RGV0YWNoTW9kZWxDbGVhbnVwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcG9zdERldGFjaE1vZGVsQ2xlYW51cChkZXRhY2hlZE1vZGVsKSB7CiAgICAgIGRldGFjaGVkTW9kZWwgPT09IG51bGwgfHwgZGV0YWNoZWRNb2RlbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGV0YWNoZWRNb2RlbC5yZW1vdmVBbGxEZWNvcmF0aW9uc1dpdGhPd25lcklkKHRoaXMuX2lkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZGV0YWNoTW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZXRhY2hNb2RlbCgpIHsKICAgICAgaWYgKCF0aGlzLl9tb2RlbERhdGEpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB2YXIgbW9kZWwgPSB0aGlzLl9tb2RlbERhdGEubW9kZWw7CiAgICAgIHZhciByZW1vdmVEb21Ob2RlID0gdGhpcy5fbW9kZWxEYXRhLmhhc1JlYWxWaWV3ID8gdGhpcy5fbW9kZWxEYXRhLnZpZXcuZG9tTm9kZS5kb21Ob2RlIDogbnVsbDsKICAgICAgdGhpcy5fbW9kZWxEYXRhLmRpc3Bvc2UoKTsKICAgICAgdGhpcy5fbW9kZWxEYXRhID0gbnVsbDsKICAgICAgdGhpcy5fZG9tRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbW9kZS1pZCcpOwogICAgICBpZiAocmVtb3ZlRG9tTm9kZSAmJiB0aGlzLl9kb21FbGVtZW50LmNvbnRhaW5zKHJlbW92ZURvbU5vZGUpKSB7CiAgICAgICAgdGhpcy5fZG9tRWxlbWVudC5yZW1vdmVDaGlsZChyZW1vdmVEb21Ob2RlKTsKICAgICAgfQogICAgICBpZiAodGhpcy5fYmFubmVyRG9tTm9kZSAmJiB0aGlzLl9kb21FbGVtZW50LmNvbnRhaW5zKHRoaXMuX2Jhbm5lckRvbU5vZGUpKSB7CiAgICAgICAgdGhpcy5fZG9tRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9iYW5uZXJEb21Ob2RlKTsKICAgICAgfQogICAgICByZXR1cm4gbW9kZWw7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JlbW92ZURlY29yYXRpb25UeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRGVjb3JhdGlvblR5cGUoa2V5KSB7CiAgICAgIHRoaXMuX2NvZGVFZGl0b3JTZXJ2aWNlLnJlbW92ZURlY29yYXRpb25UeXBlKGtleSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFzTW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc01vZGVsKCkgewogICAgICByZXR1cm4gdGhpcy5fbW9kZWxEYXRhICE9PSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dEcm9wSW5kaWNhdG9yQXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dEcm9wSW5kaWNhdG9yQXQocG9zaXRpb24pIHsKICAgICAgdmFyIG5ld0RlY29yYXRpb25zID0gW3sKICAgICAgICByYW5nZTogbmV3IFJhbmdlKHBvc2l0aW9uLmxpbmVOdW1iZXIsIHBvc2l0aW9uLmNvbHVtbiwgcG9zaXRpb24ubGluZU51bWJlciwgcG9zaXRpb24uY29sdW1uKSwKICAgICAgICBvcHRpb25zOiBDb2RlRWRpdG9yV2lkZ2V0LmRyb3BJbnRvRWRpdG9yRGVjb3JhdGlvbk9wdGlvbnMKICAgICAgfV07CiAgICAgIHRoaXMuX2Ryb3BJbnRvRWRpdG9yRGVjb3JhdGlvbnMuc2V0KG5ld0RlY29yYXRpb25zKTsKICAgICAgdGhpcy5yZXZlYWxQb3NpdGlvbihwb3NpdGlvbiwgMSAvKiBlZGl0b3JDb21tb24uU2Nyb2xsVHlwZS5JbW1lZGlhdGUgKi8pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZURyb3BJbmRpY2F0b3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZURyb3BJbmRpY2F0b3IoKSB7CiAgICAgIHRoaXMuX2Ryb3BJbnRvRWRpdG9yRGVjb3JhdGlvbnMuY2xlYXIoKTsKICAgIH0KICB9XSwgW3sKICAgIGtleTogIl9nZXRWZXJ0aWNhbE9mZnNldEFmdGVyUG9zaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRWZXJ0aWNhbE9mZnNldEFmdGVyUG9zaXRpb24obW9kZWxEYXRhLCBtb2RlbExpbmVOdW1iZXIsIG1vZGVsQ29sdW1uLCBpbmNsdWRlVmlld1pvbmVzKSB7CiAgICAgIHZhciBtb2RlbFBvc2l0aW9uID0gbW9kZWxEYXRhLm1vZGVsLnZhbGlkYXRlUG9zaXRpb24oewogICAgICAgIGxpbmVOdW1iZXI6IG1vZGVsTGluZU51bWJlciwKICAgICAgICBjb2x1bW46IG1vZGVsQ29sdW1uCiAgICAgIH0pOwogICAgICB2YXIgdmlld1Bvc2l0aW9uID0gbW9kZWxEYXRhLnZpZXdNb2RlbC5jb29yZGluYXRlc0NvbnZlcnRlci5jb252ZXJ0TW9kZWxQb3NpdGlvblRvVmlld1Bvc2l0aW9uKG1vZGVsUG9zaXRpb24pOwogICAgICByZXR1cm4gbW9kZWxEYXRhLnZpZXdNb2RlbC52aWV3TGF5b3V0LmdldFZlcnRpY2FsT2Zmc2V0QWZ0ZXJMaW5lTnVtYmVyKHZpZXdQb3NpdGlvbi5saW5lTnVtYmVyLCBpbmNsdWRlVmlld1pvbmVzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0VmVydGljYWxPZmZzZXRGb3JQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldFZlcnRpY2FsT2Zmc2V0Rm9yUG9zaXRpb24obW9kZWxEYXRhLCBtb2RlbExpbmVOdW1iZXIsIG1vZGVsQ29sdW1uKSB7CiAgICAgIHZhciBpbmNsdWRlVmlld1pvbmVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgICAgdmFyIG1vZGVsUG9zaXRpb24gPSBtb2RlbERhdGEubW9kZWwudmFsaWRhdGVQb3NpdGlvbih7CiAgICAgICAgbGluZU51bWJlcjogbW9kZWxMaW5lTnVtYmVyLAogICAgICAgIGNvbHVtbjogbW9kZWxDb2x1bW4KICAgICAgfSk7CiAgICAgIHZhciB2aWV3UG9zaXRpb24gPSBtb2RlbERhdGEudmlld01vZGVsLmNvb3JkaW5hdGVzQ29udmVydGVyLmNvbnZlcnRNb2RlbFBvc2l0aW9uVG9WaWV3UG9zaXRpb24obW9kZWxQb3NpdGlvbik7CiAgICAgIHJldHVybiBtb2RlbERhdGEudmlld01vZGVsLnZpZXdMYXlvdXQuZ2V0VmVydGljYWxPZmZzZXRGb3JMaW5lTnVtYmVyKHZpZXdQb3NpdGlvbi5saW5lTnVtYmVyLCBpbmNsdWRlVmlld1pvbmVzKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIENvZGVFZGl0b3JXaWRnZXQ7Cn0oRGlzcG9zYWJsZSk7CkNvZGVFZGl0b3JXaWRnZXQuZHJvcEludG9FZGl0b3JEZWNvcmF0aW9uT3B0aW9ucyA9IE1vZGVsRGVjb3JhdGlvbk9wdGlvbnMucmVnaXN0ZXIoewogIGRlc2NyaXB0aW9uOiAnd29ya2JlbmNoLWRuZC10YXJnZXQnLAogIGNsYXNzTmFtZTogJ2RuZC10YXJnZXQnCn0pOwpDb2RlRWRpdG9yV2lkZ2V0ID0gX19kZWNvcmF0ZShbX19wYXJhbSgzLCBJSW5zdGFudGlhdGlvblNlcnZpY2UpLCBfX3BhcmFtKDQsIElDb2RlRWRpdG9yU2VydmljZSksIF9fcGFyYW0oNSwgSUNvbW1hbmRTZXJ2aWNlKSwgX19wYXJhbSg2LCBJQ29udGV4dEtleVNlcnZpY2UpLCBfX3BhcmFtKDcsIElUaGVtZVNlcnZpY2UpLCBfX3BhcmFtKDgsIElOb3RpZmljYXRpb25TZXJ2aWNlKSwgX19wYXJhbSg5LCBJQWNjZXNzaWJpbGl0eVNlcnZpY2UpLCBfX3BhcmFtKDEwLCBJTGFuZ3VhZ2VDb25maWd1cmF0aW9uU2VydmljZSksIF9fcGFyYW0oMTEsIElMYW5ndWFnZUZlYXR1cmVzU2VydmljZSldLCBDb2RlRWRpdG9yV2lkZ2V0KTsKZXhwb3J0IHsgQ29kZUVkaXRvcldpZGdldCB9OwpleHBvcnQgdmFyIEJvb2xlYW5FdmVudEVtaXR0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlMikgewogIF9pbmhlcml0cyhCb29sZWFuRXZlbnRFbWl0dGVyLCBfRGlzcG9zYWJsZTIpOwogIHZhciBfc3VwZXIyID0gX2NyZWF0ZVN1cGVyKEJvb2xlYW5FdmVudEVtaXR0ZXIpOwogIGZ1bmN0aW9uIEJvb2xlYW5FdmVudEVtaXR0ZXIoX2VtaXR0ZXJPcHRpb25zKSB7CiAgICB2YXIgX3RoaXM1OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJvb2xlYW5FdmVudEVtaXR0ZXIpOwogICAgX3RoaXM1ID0gX3N1cGVyMi5jYWxsKHRoaXMpOwogICAgX3RoaXM1Ll9lbWl0dGVyT3B0aW9ucyA9IF9lbWl0dGVyT3B0aW9uczsKICAgIF90aGlzNS5fb25EaWRDaGFuZ2VUb1RydWUgPSBfdGhpczUuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKF90aGlzNS5fZW1pdHRlck9wdGlvbnMpKTsKICAgIF90aGlzNS5vbkRpZENoYW5nZVRvVHJ1ZSA9IF90aGlzNS5fb25EaWRDaGFuZ2VUb1RydWUuZXZlbnQ7CiAgICBfdGhpczUuX29uRGlkQ2hhbmdlVG9GYWxzZSA9IF90aGlzNS5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoX3RoaXM1Ll9lbWl0dGVyT3B0aW9ucykpOwogICAgX3RoaXM1Lm9uRGlkQ2hhbmdlVG9GYWxzZSA9IF90aGlzNS5fb25EaWRDaGFuZ2VUb0ZhbHNlLmV2ZW50OwogICAgX3RoaXM1Ll92YWx1ZSA9IDAgLyogQm9vbGVhbkV2ZW50VmFsdWUuTm90U2V0ICovOwogICAgcmV0dXJuIF90aGlzNTsKICB9CiAgX2NyZWF0ZUNsYXNzKEJvb2xlYW5FdmVudEVtaXR0ZXIsIFt7CiAgICBrZXk6ICJzZXRWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUoX3ZhbHVlKSB7CiAgICAgIHZhciB2YWx1ZSA9IF92YWx1ZSA/IDIgLyogQm9vbGVhbkV2ZW50VmFsdWUuVHJ1ZSAqLyA6IDEgLyogQm9vbGVhbkV2ZW50VmFsdWUuRmFsc2UgKi87CiAgICAgIGlmICh0aGlzLl92YWx1ZSA9PT0gdmFsdWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTsKICAgICAgaWYgKHRoaXMuX3ZhbHVlID09PSAyIC8qIEJvb2xlYW5FdmVudFZhbHVlLlRydWUgKi8pIHsKICAgICAgICB0aGlzLl9vbkRpZENoYW5nZVRvVHJ1ZS5maXJlKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5fdmFsdWUgPT09IDEgLyogQm9vbGVhbkV2ZW50VmFsdWUuRmFsc2UgKi8pIHsKICAgICAgICB0aGlzLl9vbkRpZENoYW5nZVRvRmFsc2UuZmlyZSgpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBCb29sZWFuRXZlbnRFbWl0dGVyOwp9KERpc3Bvc2FibGUpOwp2YXIgRWRpdG9yQ29udGV4dEtleXNNYW5hZ2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRGlzcG9zYWJsZTMpIHsKICBfaW5oZXJpdHMoRWRpdG9yQ29udGV4dEtleXNNYW5hZ2VyLCBfRGlzcG9zYWJsZTMpOwogIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyKEVkaXRvckNvbnRleHRLZXlzTWFuYWdlcik7CiAgZnVuY3Rpb24gRWRpdG9yQ29udGV4dEtleXNNYW5hZ2VyKGVkaXRvciwgY29udGV4dEtleVNlcnZpY2UpIHsKICAgIHZhciBfdGhpczY7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRpdG9yQ29udGV4dEtleXNNYW5hZ2VyKTsKICAgIF90aGlzNiA9IF9zdXBlcjMuY2FsbCh0aGlzKTsKICAgIF90aGlzNi5fZWRpdG9yID0gZWRpdG9yOwogICAgY29udGV4dEtleVNlcnZpY2UuY3JlYXRlS2V5KCdlZGl0b3JJZCcsIGVkaXRvci5nZXRJZCgpKTsKICAgIF90aGlzNi5fZWRpdG9yU2ltcGxlSW5wdXQgPSBFZGl0b3JDb250ZXh0S2V5cy5lZGl0b3JTaW1wbGVJbnB1dC5iaW5kVG8oY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM2Ll9lZGl0b3JGb2N1cyA9IEVkaXRvckNvbnRleHRLZXlzLmZvY3VzLmJpbmRUbyhjb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczYuX3RleHRJbnB1dEZvY3VzID0gRWRpdG9yQ29udGV4dEtleXMudGV4dElucHV0Rm9jdXMuYmluZFRvKGNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNi5fZWRpdG9yVGV4dEZvY3VzID0gRWRpdG9yQ29udGV4dEtleXMuZWRpdG9yVGV4dEZvY3VzLmJpbmRUbyhjb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczYuX2VkaXRvclRhYk1vdmVzRm9jdXMgPSBFZGl0b3JDb250ZXh0S2V5cy50YWJNb3Zlc0ZvY3VzLmJpbmRUbyhjb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczYuX2VkaXRvclJlYWRvbmx5ID0gRWRpdG9yQ29udGV4dEtleXMucmVhZE9ubHkuYmluZFRvKGNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNi5faW5EaWZmRWRpdG9yID0gRWRpdG9yQ29udGV4dEtleXMuaW5EaWZmRWRpdG9yLmJpbmRUbyhjb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczYuX2VkaXRvckNvbHVtblNlbGVjdGlvbiA9IEVkaXRvckNvbnRleHRLZXlzLmNvbHVtblNlbGVjdGlvbi5iaW5kVG8oY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM2Ll9oYXNNdWx0aXBsZVNlbGVjdGlvbnMgPSBFZGl0b3JDb250ZXh0S2V5cy5oYXNNdWx0aXBsZVNlbGVjdGlvbnMuYmluZFRvKGNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNi5faGFzTm9uRW1wdHlTZWxlY3Rpb24gPSBFZGl0b3JDb250ZXh0S2V5cy5oYXNOb25FbXB0eVNlbGVjdGlvbi5iaW5kVG8oY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM2Ll9jYW5VbmRvID0gRWRpdG9yQ29udGV4dEtleXMuY2FuVW5kby5iaW5kVG8oY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM2Ll9jYW5SZWRvID0gRWRpdG9yQ29udGV4dEtleXMuY2FuUmVkby5iaW5kVG8oY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM2Ll9yZWdpc3RlcihfdGhpczYuX2VkaXRvci5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24oZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXM2Ll91cGRhdGVGcm9tQ29uZmlnKCk7CiAgICB9KSk7CiAgICBfdGhpczYuX3JlZ2lzdGVyKF90aGlzNi5fZWRpdG9yLm9uRGlkQ2hhbmdlQ3Vyc29yU2VsZWN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzNi5fdXBkYXRlRnJvbVNlbGVjdGlvbigpOwogICAgfSkpOwogICAgX3RoaXM2Ll9yZWdpc3RlcihfdGhpczYuX2VkaXRvci5vbkRpZEZvY3VzRWRpdG9yV2lkZ2V0KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzNi5fdXBkYXRlRnJvbUZvY3VzKCk7CiAgICB9KSk7CiAgICBfdGhpczYuX3JlZ2lzdGVyKF90aGlzNi5fZWRpdG9yLm9uRGlkQmx1ckVkaXRvcldpZGdldChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpczYuX3VwZGF0ZUZyb21Gb2N1cygpOwogICAgfSkpOwogICAgX3RoaXM2Ll9yZWdpc3RlcihfdGhpczYuX2VkaXRvci5vbkRpZEZvY3VzRWRpdG9yVGV4dChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpczYuX3VwZGF0ZUZyb21Gb2N1cygpOwogICAgfSkpOwogICAgX3RoaXM2Ll9yZWdpc3RlcihfdGhpczYuX2VkaXRvci5vbkRpZEJsdXJFZGl0b3JUZXh0KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzNi5fdXBkYXRlRnJvbUZvY3VzKCk7CiAgICB9KSk7CiAgICBfdGhpczYuX3JlZ2lzdGVyKF90aGlzNi5fZWRpdG9yLm9uRGlkQ2hhbmdlTW9kZWwoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXM2Ll91cGRhdGVGcm9tTW9kZWwoKTsKICAgIH0pKTsKICAgIF90aGlzNi5fcmVnaXN0ZXIoX3RoaXM2Ll9lZGl0b3Iub25EaWRDaGFuZ2VDb25maWd1cmF0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzNi5fdXBkYXRlRnJvbU1vZGVsKCk7CiAgICB9KSk7CiAgICBfdGhpczYuX3VwZGF0ZUZyb21Db25maWcoKTsKICAgIF90aGlzNi5fdXBkYXRlRnJvbVNlbGVjdGlvbigpOwogICAgX3RoaXM2Ll91cGRhdGVGcm9tRm9jdXMoKTsKICAgIF90aGlzNi5fdXBkYXRlRnJvbU1vZGVsKCk7CiAgICBfdGhpczYuX2VkaXRvclNpbXBsZUlucHV0LnNldChfdGhpczYuX2VkaXRvci5pc1NpbXBsZVdpZGdldCk7CiAgICByZXR1cm4gX3RoaXM2OwogIH0KICBfY3JlYXRlQ2xhc3MoRWRpdG9yQ29udGV4dEtleXNNYW5hZ2VyLCBbewogICAga2V5OiAiX3VwZGF0ZUZyb21Db25maWciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVGcm9tQ29uZmlnKCkgewogICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuX2VkaXRvci5nZXRPcHRpb25zKCk7CiAgICAgIHRoaXMuX2VkaXRvclRhYk1vdmVzRm9jdXMuc2V0KG9wdGlvbnMuZ2V0KDEzMiAvKiBFZGl0b3JPcHRpb24udGFiRm9jdXNNb2RlICovKSk7CiAgICAgIHRoaXMuX2VkaXRvclJlYWRvbmx5LnNldChvcHRpb25zLmdldCg4MyAvKiBFZGl0b3JPcHRpb24ucmVhZE9ubHkgKi8pKTsKICAgICAgdGhpcy5faW5EaWZmRWRpdG9yLnNldChvcHRpb25zLmdldCg1NiAvKiBFZGl0b3JPcHRpb24uaW5EaWZmRWRpdG9yICovKSk7CiAgICAgIHRoaXMuX2VkaXRvckNvbHVtblNlbGVjdGlvbi5zZXQob3B0aW9ucy5nZXQoMTggLyogRWRpdG9yT3B0aW9uLmNvbHVtblNlbGVjdGlvbiAqLykpOwogICAgfQogIH0sIHsKICAgIGtleTogIl91cGRhdGVGcm9tU2VsZWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlRnJvbVNlbGVjdGlvbigpIHsKICAgICAgdmFyIHNlbGVjdGlvbnMgPSB0aGlzLl9lZGl0b3IuZ2V0U2VsZWN0aW9ucygpOwogICAgICBpZiAoIXNlbGVjdGlvbnMpIHsKICAgICAgICB0aGlzLl9oYXNNdWx0aXBsZVNlbGVjdGlvbnMucmVzZXQoKTsKICAgICAgICB0aGlzLl9oYXNOb25FbXB0eVNlbGVjdGlvbi5yZXNldCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2hhc011bHRpcGxlU2VsZWN0aW9ucy5zZXQoc2VsZWN0aW9ucy5sZW5ndGggPiAxKTsKICAgICAgICB0aGlzLl9oYXNOb25FbXB0eVNlbGVjdGlvbi5zZXQoc2VsZWN0aW9ucy5zb21lKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICByZXR1cm4gIXMuaXNFbXB0eSgpOwogICAgICAgIH0pKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl91cGRhdGVGcm9tRm9jdXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVGcm9tRm9jdXMoKSB7CiAgICAgIHRoaXMuX2VkaXRvckZvY3VzLnNldCh0aGlzLl9lZGl0b3IuaGFzV2lkZ2V0Rm9jdXMoKSAmJiAhdGhpcy5fZWRpdG9yLmlzU2ltcGxlV2lkZ2V0KTsKICAgICAgdGhpcy5fZWRpdG9yVGV4dEZvY3VzLnNldCh0aGlzLl9lZGl0b3IuaGFzVGV4dEZvY3VzKCkgJiYgIXRoaXMuX2VkaXRvci5pc1NpbXBsZVdpZGdldCk7CiAgICAgIHRoaXMuX3RleHRJbnB1dEZvY3VzLnNldCh0aGlzLl9lZGl0b3IuaGFzVGV4dEZvY3VzKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl91cGRhdGVGcm9tTW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVGcm9tTW9kZWwoKSB7CiAgICAgIHZhciBtb2RlbCA9IHRoaXMuX2VkaXRvci5nZXRNb2RlbCgpOwogICAgICB0aGlzLl9jYW5VbmRvLnNldChCb29sZWFuKG1vZGVsICYmIG1vZGVsLmNhblVuZG8oKSkpOwogICAgICB0aGlzLl9jYW5SZWRvLnNldChCb29sZWFuKG1vZGVsICYmIG1vZGVsLmNhblJlZG8oKSkpOwogICAgfQogIH1dKTsKICByZXR1cm4gRWRpdG9yQ29udGV4dEtleXNNYW5hZ2VyOwp9KERpc3Bvc2FibGUpOwpleHBvcnQgdmFyIEVkaXRvck1vZGVDb250ZXh0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRGlzcG9zYWJsZTQpIHsKICBfaW5oZXJpdHMoRWRpdG9yTW9kZUNvbnRleHQsIF9EaXNwb3NhYmxlNCk7CiAgdmFyIF9zdXBlcjQgPSBfY3JlYXRlU3VwZXIoRWRpdG9yTW9kZUNvbnRleHQpOwogIGZ1bmN0aW9uIEVkaXRvck1vZGVDb250ZXh0KF9lZGl0b3IsIF9jb250ZXh0S2V5U2VydmljZSwgX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlKSB7CiAgICB2YXIgX3RoaXM3OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVkaXRvck1vZGVDb250ZXh0KTsKICAgIF90aGlzNyA9IF9zdXBlcjQuY2FsbCh0aGlzKTsKICAgIF90aGlzNy5fZWRpdG9yID0gX2VkaXRvcjsKICAgIF90aGlzNy5fY29udGV4dEtleVNlcnZpY2UgPSBfY29udGV4dEtleVNlcnZpY2U7CiAgICBfdGhpczcuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlID0gX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlOwogICAgX3RoaXM3Ll9sYW5nSWQgPSBFZGl0b3JDb250ZXh0S2V5cy5sYW5ndWFnZUlkLmJpbmRUbyhfY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM3Ll9oYXNDb21wbGV0aW9uSXRlbVByb3ZpZGVyID0gRWRpdG9yQ29udGV4dEtleXMuaGFzQ29tcGxldGlvbkl0ZW1Qcm92aWRlci5iaW5kVG8oX2NvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNy5faGFzQ29kZUFjdGlvbnNQcm92aWRlciA9IEVkaXRvckNvbnRleHRLZXlzLmhhc0NvZGVBY3Rpb25zUHJvdmlkZXIuYmluZFRvKF9jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczcuX2hhc0NvZGVMZW5zUHJvdmlkZXIgPSBFZGl0b3JDb250ZXh0S2V5cy5oYXNDb2RlTGVuc1Byb3ZpZGVyLmJpbmRUbyhfY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM3Ll9oYXNEZWZpbml0aW9uUHJvdmlkZXIgPSBFZGl0b3JDb250ZXh0S2V5cy5oYXNEZWZpbml0aW9uUHJvdmlkZXIuYmluZFRvKF9jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczcuX2hhc0RlY2xhcmF0aW9uUHJvdmlkZXIgPSBFZGl0b3JDb250ZXh0S2V5cy5oYXNEZWNsYXJhdGlvblByb3ZpZGVyLmJpbmRUbyhfY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM3Ll9oYXNJbXBsZW1lbnRhdGlvblByb3ZpZGVyID0gRWRpdG9yQ29udGV4dEtleXMuaGFzSW1wbGVtZW50YXRpb25Qcm92aWRlci5iaW5kVG8oX2NvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNy5faGFzVHlwZURlZmluaXRpb25Qcm92aWRlciA9IEVkaXRvckNvbnRleHRLZXlzLmhhc1R5cGVEZWZpbml0aW9uUHJvdmlkZXIuYmluZFRvKF9jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczcuX2hhc0hvdmVyUHJvdmlkZXIgPSBFZGl0b3JDb250ZXh0S2V5cy5oYXNIb3ZlclByb3ZpZGVyLmJpbmRUbyhfY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM3Ll9oYXNEb2N1bWVudEhpZ2hsaWdodFByb3ZpZGVyID0gRWRpdG9yQ29udGV4dEtleXMuaGFzRG9jdW1lbnRIaWdobGlnaHRQcm92aWRlci5iaW5kVG8oX2NvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNy5faGFzRG9jdW1lbnRTeW1ib2xQcm92aWRlciA9IEVkaXRvckNvbnRleHRLZXlzLmhhc0RvY3VtZW50U3ltYm9sUHJvdmlkZXIuYmluZFRvKF9jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczcuX2hhc1JlZmVyZW5jZVByb3ZpZGVyID0gRWRpdG9yQ29udGV4dEtleXMuaGFzUmVmZXJlbmNlUHJvdmlkZXIuYmluZFRvKF9jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczcuX2hhc1JlbmFtZVByb3ZpZGVyID0gRWRpdG9yQ29udGV4dEtleXMuaGFzUmVuYW1lUHJvdmlkZXIuYmluZFRvKF9jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczcuX2hhc1NpZ25hdHVyZUhlbHBQcm92aWRlciA9IEVkaXRvckNvbnRleHRLZXlzLmhhc1NpZ25hdHVyZUhlbHBQcm92aWRlci5iaW5kVG8oX2NvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNy5faGFzSW5sYXlIaW50c1Byb3ZpZGVyID0gRWRpdG9yQ29udGV4dEtleXMuaGFzSW5sYXlIaW50c1Byb3ZpZGVyLmJpbmRUbyhfY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM3Ll9oYXNEb2N1bWVudEZvcm1hdHRpbmdQcm92aWRlciA9IEVkaXRvckNvbnRleHRLZXlzLmhhc0RvY3VtZW50Rm9ybWF0dGluZ1Byb3ZpZGVyLmJpbmRUbyhfY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM3Ll9oYXNEb2N1bWVudFNlbGVjdGlvbkZvcm1hdHRpbmdQcm92aWRlciA9IEVkaXRvckNvbnRleHRLZXlzLmhhc0RvY3VtZW50U2VsZWN0aW9uRm9ybWF0dGluZ1Byb3ZpZGVyLmJpbmRUbyhfY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM3Ll9oYXNNdWx0aXBsZURvY3VtZW50Rm9ybWF0dGluZ1Byb3ZpZGVyID0gRWRpdG9yQ29udGV4dEtleXMuaGFzTXVsdGlwbGVEb2N1bWVudEZvcm1hdHRpbmdQcm92aWRlci5iaW5kVG8oX2NvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNy5faGFzTXVsdGlwbGVEb2N1bWVudFNlbGVjdGlvbkZvcm1hdHRpbmdQcm92aWRlciA9IEVkaXRvckNvbnRleHRLZXlzLmhhc011bHRpcGxlRG9jdW1lbnRTZWxlY3Rpb25Gb3JtYXR0aW5nUHJvdmlkZXIuYmluZFRvKF9jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczcuX2lzSW5XYWxrVGhyb3VnaCA9IEVkaXRvckNvbnRleHRLZXlzLmlzSW5XYWxrVGhyb3VnaFNuaXBwZXQuYmluZFRvKF9jb250ZXh0S2V5U2VydmljZSk7CiAgICB2YXIgdXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICByZXR1cm4gX3RoaXM3Ll91cGRhdGUoKTsKICAgIH07CiAgICAvLyB1cGRhdGUgd2hlbiBtb2RlbC9tb2RlIGNoYW5nZXMKICAgIF90aGlzNy5fcmVnaXN0ZXIoX2VkaXRvci5vbkRpZENoYW5nZU1vZGVsKHVwZGF0ZSkpOwogICAgX3RoaXM3Ll9yZWdpc3RlcihfZWRpdG9yLm9uRGlkQ2hhbmdlTW9kZWxMYW5ndWFnZSh1cGRhdGUpKTsKICAgIC8vIHVwZGF0ZSB3aGVuIHJlZ2lzdHJpZXMgY2hhbmdlCiAgICBfdGhpczcuX3JlZ2lzdGVyKF9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5jb21wbGV0aW9uUHJvdmlkZXIub25EaWRDaGFuZ2UodXBkYXRlKSk7CiAgICBfdGhpczcuX3JlZ2lzdGVyKF9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5jb2RlQWN0aW9uUHJvdmlkZXIub25EaWRDaGFuZ2UodXBkYXRlKSk7CiAgICBfdGhpczcuX3JlZ2lzdGVyKF9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5jb2RlTGVuc1Byb3ZpZGVyLm9uRGlkQ2hhbmdlKHVwZGF0ZSkpOwogICAgX3RoaXM3Ll9yZWdpc3RlcihfbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuZGVmaW5pdGlvblByb3ZpZGVyLm9uRGlkQ2hhbmdlKHVwZGF0ZSkpOwogICAgX3RoaXM3Ll9yZWdpc3RlcihfbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuZGVjbGFyYXRpb25Qcm92aWRlci5vbkRpZENoYW5nZSh1cGRhdGUpKTsKICAgIF90aGlzNy5fcmVnaXN0ZXIoX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmltcGxlbWVudGF0aW9uUHJvdmlkZXIub25EaWRDaGFuZ2UodXBkYXRlKSk7CiAgICBfdGhpczcuX3JlZ2lzdGVyKF9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS50eXBlRGVmaW5pdGlvblByb3ZpZGVyLm9uRGlkQ2hhbmdlKHVwZGF0ZSkpOwogICAgX3RoaXM3Ll9yZWdpc3RlcihfbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuaG92ZXJQcm92aWRlci5vbkRpZENoYW5nZSh1cGRhdGUpKTsKICAgIF90aGlzNy5fcmVnaXN0ZXIoX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmRvY3VtZW50SGlnaGxpZ2h0UHJvdmlkZXIub25EaWRDaGFuZ2UodXBkYXRlKSk7CiAgICBfdGhpczcuX3JlZ2lzdGVyKF9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5kb2N1bWVudFN5bWJvbFByb3ZpZGVyLm9uRGlkQ2hhbmdlKHVwZGF0ZSkpOwogICAgX3RoaXM3Ll9yZWdpc3RlcihfbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UucmVmZXJlbmNlUHJvdmlkZXIub25EaWRDaGFuZ2UodXBkYXRlKSk7CiAgICBfdGhpczcuX3JlZ2lzdGVyKF9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5yZW5hbWVQcm92aWRlci5vbkRpZENoYW5nZSh1cGRhdGUpKTsKICAgIF90aGlzNy5fcmVnaXN0ZXIoX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmRvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlci5vbkRpZENoYW5nZSh1cGRhdGUpKTsKICAgIF90aGlzNy5fcmVnaXN0ZXIoX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdFByb3ZpZGVyLm9uRGlkQ2hhbmdlKHVwZGF0ZSkpOwogICAgX3RoaXM3Ll9yZWdpc3RlcihfbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2Uuc2lnbmF0dXJlSGVscFByb3ZpZGVyLm9uRGlkQ2hhbmdlKHVwZGF0ZSkpOwogICAgX3RoaXM3Ll9yZWdpc3RlcihfbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuaW5sYXlIaW50c1Byb3ZpZGVyLm9uRGlkQ2hhbmdlKHVwZGF0ZSkpOwogICAgdXBkYXRlKCk7CiAgICByZXR1cm4gX3RoaXM3OwogIH0KICBfY3JlYXRlQ2xhc3MoRWRpdG9yTW9kZUNvbnRleHQsIFt7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihFZGl0b3JNb2RlQ29udGV4dC5wcm90b3R5cGUpLCAiZGlzcG9zZSIsIHRoaXMpLmNhbGwodGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgdGhpcy5fY29udGV4dEtleVNlcnZpY2UuYnVmZmVyQ2hhbmdlRXZlbnRzKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczguX2xhbmdJZC5yZXNldCgpOwogICAgICAgIF90aGlzOC5faGFzQ29tcGxldGlvbkl0ZW1Qcm92aWRlci5yZXNldCgpOwogICAgICAgIF90aGlzOC5faGFzQ29kZUFjdGlvbnNQcm92aWRlci5yZXNldCgpOwogICAgICAgIF90aGlzOC5faGFzQ29kZUxlbnNQcm92aWRlci5yZXNldCgpOwogICAgICAgIF90aGlzOC5faGFzRGVmaW5pdGlvblByb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9oYXNEZWNsYXJhdGlvblByb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9oYXNJbXBsZW1lbnRhdGlvblByb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9oYXNUeXBlRGVmaW5pdGlvblByb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9oYXNIb3ZlclByb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9oYXNEb2N1bWVudEhpZ2hsaWdodFByb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9oYXNEb2N1bWVudFN5bWJvbFByb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9oYXNSZWZlcmVuY2VQcm92aWRlci5yZXNldCgpOwogICAgICAgIF90aGlzOC5faGFzUmVuYW1lUHJvdmlkZXIucmVzZXQoKTsKICAgICAgICBfdGhpczguX2hhc0RvY3VtZW50Rm9ybWF0dGluZ1Byb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9oYXNEb2N1bWVudFNlbGVjdGlvbkZvcm1hdHRpbmdQcm92aWRlci5yZXNldCgpOwogICAgICAgIF90aGlzOC5faGFzU2lnbmF0dXJlSGVscFByb3ZpZGVyLnJlc2V0KCk7CiAgICAgICAgX3RoaXM4Ll9pc0luV2Fsa1Rocm91Z2gucmVzZXQoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3VwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgIHZhciBtb2RlbCA9IHRoaXMuX2VkaXRvci5nZXRNb2RlbCgpOwogICAgICBpZiAoIW1vZGVsKSB7CiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9jb250ZXh0S2V5U2VydmljZS5idWZmZXJDaGFuZ2VFdmVudHMoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzOS5fbGFuZ0lkLnNldChtb2RlbC5nZXRMYW5ndWFnZUlkKCkpOwogICAgICAgIF90aGlzOS5faGFzQ29tcGxldGlvbkl0ZW1Qcm92aWRlci5zZXQoX3RoaXM5Ll9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5jb21wbGV0aW9uUHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNDb2RlQWN0aW9uc1Byb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmNvZGVBY3Rpb25Qcm92aWRlci5oYXMobW9kZWwpKTsKICAgICAgICBfdGhpczkuX2hhc0NvZGVMZW5zUHJvdmlkZXIuc2V0KF90aGlzOS5fbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuY29kZUxlbnNQcm92aWRlci5oYXMobW9kZWwpKTsKICAgICAgICBfdGhpczkuX2hhc0RlZmluaXRpb25Qcm92aWRlci5zZXQoX3RoaXM5Ll9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5kZWZpbml0aW9uUHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNEZWNsYXJhdGlvblByb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmRlY2xhcmF0aW9uUHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNJbXBsZW1lbnRhdGlvblByb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmltcGxlbWVudGF0aW9uUHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNUeXBlRGVmaW5pdGlvblByb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLnR5cGVEZWZpbml0aW9uUHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNIb3ZlclByb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmhvdmVyUHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNEb2N1bWVudEhpZ2hsaWdodFByb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmRvY3VtZW50SGlnaGxpZ2h0UHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNEb2N1bWVudFN5bWJvbFByb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmRvY3VtZW50U3ltYm9sUHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNSZWZlcmVuY2VQcm92aWRlci5zZXQoX3RoaXM5Ll9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5yZWZlcmVuY2VQcm92aWRlci5oYXMobW9kZWwpKTsKICAgICAgICBfdGhpczkuX2hhc1JlbmFtZVByb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLnJlbmFtZVByb3ZpZGVyLmhhcyhtb2RlbCkpOwogICAgICAgIF90aGlzOS5faGFzU2lnbmF0dXJlSGVscFByb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLnNpZ25hdHVyZUhlbHBQcm92aWRlci5oYXMobW9kZWwpKTsKICAgICAgICBfdGhpczkuX2hhc0lubGF5SGludHNQcm92aWRlci5zZXQoX3RoaXM5Ll9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5pbmxheUhpbnRzUHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNEb2N1bWVudEZvcm1hdHRpbmdQcm92aWRlci5zZXQoX3RoaXM5Ll9sYW5ndWFnZUZlYXR1cmVzU2VydmljZS5kb2N1bWVudEZvcm1hdHRpbmdFZGl0UHJvdmlkZXIuaGFzKG1vZGVsKSB8fCBfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdFByb3ZpZGVyLmhhcyhtb2RlbCkpOwogICAgICAgIF90aGlzOS5faGFzRG9jdW1lbnRTZWxlY3Rpb25Gb3JtYXR0aW5nUHJvdmlkZXIuc2V0KF90aGlzOS5fbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIuaGFzKG1vZGVsKSk7CiAgICAgICAgX3RoaXM5Ll9oYXNNdWx0aXBsZURvY3VtZW50Rm9ybWF0dGluZ1Byb3ZpZGVyLnNldChfdGhpczkuX2xhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlLmRvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlci5hbGwobW9kZWwpLmxlbmd0aCArIF90aGlzOS5fbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIuYWxsKG1vZGVsKS5sZW5ndGggPiAxKTsKICAgICAgICBfdGhpczkuX2hhc011bHRpcGxlRG9jdW1lbnRTZWxlY3Rpb25Gb3JtYXR0aW5nUHJvdmlkZXIuc2V0KF90aGlzOS5fbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIuYWxsKG1vZGVsKS5sZW5ndGggPiAxKTsKICAgICAgICBfdGhpczkuX2lzSW5XYWxrVGhyb3VnaC5zZXQobW9kZWwudXJpLnNjaGVtZSA9PT0gU2NoZW1hcy53YWxrVGhyb3VnaFNuaXBwZXQpOwogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEVkaXRvck1vZGVDb250ZXh0Owp9KERpc3Bvc2FibGUpOwp2YXIgQ29kZUVkaXRvcldpZGdldEZvY3VzVHJhY2tlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Rpc3Bvc2FibGU1KSB7CiAgX2luaGVyaXRzKENvZGVFZGl0b3JXaWRnZXRGb2N1c1RyYWNrZXIsIF9EaXNwb3NhYmxlNSk7CiAgdmFyIF9zdXBlcjUgPSBfY3JlYXRlU3VwZXIoQ29kZUVkaXRvcldpZGdldEZvY3VzVHJhY2tlcik7CiAgZnVuY3Rpb24gQ29kZUVkaXRvcldpZGdldEZvY3VzVHJhY2tlcihkb21FbGVtZW50KSB7CiAgICB2YXIgX3RoaXMxMDsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2RlRWRpdG9yV2lkZ2V0Rm9jdXNUcmFja2VyKTsKICAgIF90aGlzMTAgPSBfc3VwZXI1LmNhbGwodGhpcyk7CiAgICBfdGhpczEwLl9vbkNoYW5nZSA9IF90aGlzMTAuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKCkpOwogICAgX3RoaXMxMC5vbkNoYW5nZSA9IF90aGlzMTAuX29uQ2hhbmdlLmV2ZW50OwogICAgX3RoaXMxMC5faGFzRm9jdXMgPSBmYWxzZTsKICAgIF90aGlzMTAuX2RvbUZvY3VzVHJhY2tlciA9IF90aGlzMTAuX3JlZ2lzdGVyKGRvbS50cmFja0ZvY3VzKGRvbUVsZW1lbnQpKTsKICAgIF90aGlzMTAuX3JlZ2lzdGVyKF90aGlzMTAuX2RvbUZvY3VzVHJhY2tlci5vbkRpZEZvY3VzKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMxMC5faGFzRm9jdXMgPSB0cnVlOwogICAgICBfdGhpczEwLl9vbkNoYW5nZS5maXJlKHVuZGVmaW5lZCk7CiAgICB9KSk7CiAgICBfdGhpczEwLl9yZWdpc3RlcihfdGhpczEwLl9kb21Gb2N1c1RyYWNrZXIub25EaWRCbHVyKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMxMC5faGFzRm9jdXMgPSBmYWxzZTsKICAgICAgX3RoaXMxMC5fb25DaGFuZ2UuZmlyZSh1bmRlZmluZWQpOwogICAgfSkpOwogICAgcmV0dXJuIF90aGlzMTA7CiAgfQogIF9jcmVhdGVDbGFzcyhDb2RlRWRpdG9yV2lkZ2V0Rm9jdXNUcmFja2VyLCBbewogICAga2V5OiAiaGFzRm9jdXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc0ZvY3VzKCkgewogICAgICByZXR1cm4gdGhpcy5faGFzRm9jdXM7CiAgICB9CiAgfV0pOwogIHJldHVybiBDb2RlRWRpdG9yV2lkZ2V0Rm9jdXNUcmFja2VyOwp9KERpc3Bvc2FibGUpOwp2YXIgRWRpdG9yRGVjb3JhdGlvbnNDb2xsZWN0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFZGl0b3JEZWNvcmF0aW9uc0NvbGxlY3Rpb24oX2VkaXRvciwgZGVjb3JhdGlvbnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFZGl0b3JEZWNvcmF0aW9uc0NvbGxlY3Rpb24pOwogICAgdGhpcy5fZWRpdG9yID0gX2VkaXRvcjsKICAgIHRoaXMuX2RlY29yYXRpb25JZHMgPSBbXTsKICAgIHRoaXMuX2lzQ2hhbmdpbmdEZWNvcmF0aW9ucyA9IGZhbHNlOwogICAgaWYgKEFycmF5LmlzQXJyYXkoZGVjb3JhdGlvbnMpICYmIGRlY29yYXRpb25zLmxlbmd0aCA+IDApIHsKICAgICAgdGhpcy5zZXQoZGVjb3JhdGlvbnMpOwogICAgfQogIH0KICBfY3JlYXRlQ2xhc3MoRWRpdG9yRGVjb3JhdGlvbnNDb2xsZWN0aW9uLCBbewogICAga2V5OiAibGVuZ3RoIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZGVjb3JhdGlvbklkcy5sZW5ndGg7CiAgICB9CiAgfSwgewogICAga2V5OiAib25EaWRDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uRGlkQ2hhbmdlKGxpc3RlbmVyLCB0aGlzQXJncywgZGlzcG9zYWJsZXMpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy5fZWRpdG9yLm9uRGlkQ2hhbmdlTW9kZWxEZWNvcmF0aW9ucyhmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChfdGhpczExLl9pc0NoYW5naW5nRGVjb3JhdGlvbnMpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzQXJncywgZSk7CiAgICAgIH0sIGRpc3Bvc2FibGVzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRSYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmFuZ2UoaW5kZXgpIHsKICAgICAgaWYgKCF0aGlzLl9lZGl0b3IuaGFzTW9kZWwoKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGlmIChpbmRleCA+PSB0aGlzLl9kZWNvcmF0aW9uSWRzLmxlbmd0aCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9lZGl0b3IuZ2V0TW9kZWwoKS5nZXREZWNvcmF0aW9uUmFuZ2UodGhpcy5fZGVjb3JhdGlvbklkc1tpbmRleF0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFJhbmdlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmFuZ2VzKCkgewogICAgICBpZiAoIXRoaXMuX2VkaXRvci5oYXNNb2RlbCgpKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIHZhciBtb2RlbCA9IHRoaXMuX2VkaXRvci5nZXRNb2RlbCgpOwogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5fZGVjb3JhdGlvbklkcyksCiAgICAgICAgX3N0ZXAyOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZGVjb3JhdGlvbklkID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgdmFyIHJhbmdlID0gbW9kZWwuZ2V0RGVjb3JhdGlvblJhbmdlKGRlY29yYXRpb25JZCk7CiAgICAgICAgICBpZiAocmFuZ2UpIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2gocmFuZ2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhcyhkZWNvcmF0aW9uKSB7CiAgICAgIHJldHVybiB0aGlzLl9kZWNvcmF0aW9uSWRzLmluY2x1ZGVzKGRlY29yYXRpb24uaWQpOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgaWYgKHRoaXMuX2RlY29yYXRpb25JZHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgLy8gbm90aGluZyB0byBkbwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnNldChbXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQobmV3RGVjb3JhdGlvbnMpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwogICAgICB0cnkgewogICAgICAgIHRoaXMuX2lzQ2hhbmdpbmdEZWNvcmF0aW9ucyA9IHRydWU7CiAgICAgICAgdGhpcy5fZWRpdG9yLmNoYW5nZURlY29yYXRpb25zKGZ1bmN0aW9uIChhY2Nlc3NvcikgewogICAgICAgICAgX3RoaXMxMi5fZGVjb3JhdGlvbklkcyA9IGFjY2Vzc29yLmRlbHRhRGVjb3JhdGlvbnMoX3RoaXMxMi5fZGVjb3JhdGlvbklkcywgbmV3RGVjb3JhdGlvbnMpOwogICAgICAgIH0pOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuX2lzQ2hhbmdpbmdEZWNvcmF0aW9ucyA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBFZGl0b3JEZWNvcmF0aW9uc0NvbGxlY3Rpb247Cn0oKTsKdmFyIHNxdWlnZ2x5U3RhcnQgPSBlbmNvZGVVUklDb21wb25lbnQoIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgNiAzJyBlbmFibGUtYmFja2dyb3VuZD0nbmV3IDAgMCA2IDMnIGhlaWdodD0nMycgd2lkdGg9JzYnPjxnIGZpbGw9JyIpOwp2YXIgc3F1aWdnbHlFbmQgPSBlbmNvZGVVUklDb21wb25lbnQoIic+PHBvbHlnb24gcG9pbnRzPSc1LjUsMCAyLjUsMyAxLjEsMyA0LjEsMCcvPjxwb2x5Z29uIHBvaW50cz0nNCwwIDYsMiA2LDAuNiA1LjQsMCcvPjxwb2x5Z29uIHBvaW50cz0nMCwyIDEsMyAyLjQsMyAwLDAuNicvPjwvZz48L3N2Zz4iKTsKZnVuY3Rpb24gZ2V0U3F1aWdnbHlTVkdEYXRhKGNvbG9yKSB7CiAgcmV0dXJuIHNxdWlnZ2x5U3RhcnQgKyBlbmNvZGVVUklDb21wb25lbnQoY29sb3IudG9TdHJpbmcoKSkgKyBzcXVpZ2dseUVuZDsKfQp2YXIgZG90ZG90ZG90U3RhcnQgPSBlbmNvZGVVUklDb21wb25lbnQoIjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGhlaWdodD1cIjNcIiB3aWR0aD1cIjEyXCI+PGcgZmlsbD1cIiIpOwp2YXIgZG90ZG90ZG90RW5kID0gZW5jb2RlVVJJQ29tcG9uZW50KCJcIj48Y2lyY2xlIGN4PVwiMVwiIGN5PVwiMVwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCI1XCIgY3k9XCIxXCIgcj1cIjFcIi8+PGNpcmNsZSBjeD1cIjlcIiBjeT1cIjFcIiByPVwiMVwiLz48L2c+PC9zdmc+Iik7CmZ1bmN0aW9uIGdldERvdERvdERvdFNWR0RhdGEoY29sb3IpIHsKICByZXR1cm4gZG90ZG90ZG90U3RhcnQgKyBlbmNvZGVVUklDb21wb25lbnQoY29sb3IudG9TdHJpbmcoKSkgKyBkb3Rkb3Rkb3RFbmQ7Cn0KcmVnaXN0ZXJUaGVtaW5nUGFydGljaXBhbnQoZnVuY3Rpb24gKHRoZW1lLCBjb2xsZWN0b3IpIHsKICB2YXIgZXJyb3JCb3JkZXJDb2xvciA9IHRoZW1lLmdldENvbG9yKGVkaXRvckVycm9yQm9yZGVyKTsKICBpZiAoZXJyb3JCb3JkZXJDb2xvcikgewogICAgY29sbGVjdG9yLmFkZFJ1bGUoIi5tb25hY28tZWRpdG9yIC4iLmNvbmNhdCgic3F1aWdnbHktZXJyb3IiIC8qIENsYXNzTmFtZS5FZGl0b3JFcnJvckRlY29yYXRpb24gKi8sICIgeyBib3JkZXItYm90dG9tOiA0cHggZG91YmxlICIsIGVycm9yQm9yZGVyQ29sb3IsICI7IH0iKSk7CiAgfQogIHZhciBlcnJvckZvcmVncm91bmQgPSB0aGVtZS5nZXRDb2xvcihlZGl0b3JFcnJvckZvcmVncm91bmQpOwogIGlmIChlcnJvckZvcmVncm91bmQpIHsKICAgIGNvbGxlY3Rvci5hZGRSdWxlKCIubW9uYWNvLWVkaXRvciAuIi5jb25jYXQoInNxdWlnZ2x5LWVycm9yIiAvKiBDbGFzc05hbWUuRWRpdG9yRXJyb3JEZWNvcmF0aW9uICovLCAiIHsgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLCIsIGdldFNxdWlnZ2x5U1ZHRGF0YShlcnJvckZvcmVncm91bmQpLCAiXCIpIHJlcGVhdC14IGJvdHRvbSBsZWZ0OyB9IikpOwogIH0KICB2YXIgZXJyb3JCYWNrZ3JvdW5kID0gdGhlbWUuZ2V0Q29sb3IoZWRpdG9yRXJyb3JCYWNrZ3JvdW5kKTsKICBpZiAoZXJyb3JCYWNrZ3JvdW5kKSB7CiAgICBjb2xsZWN0b3IuYWRkUnVsZSgiLm1vbmFjby1lZGl0b3IgLiIuY29uY2F0KCJzcXVpZ2dseS1lcnJvciIgLyogQ2xhc3NOYW1lLkVkaXRvckVycm9yRGVjb3JhdGlvbiAqLywgIjo6YmVmb3JlIHsgZGlzcGxheTogYmxvY2s7IGNvbnRlbnQ6ICcnOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBiYWNrZ3JvdW5kOiAiLCBlcnJvckJhY2tncm91bmQsICI7IH0iKSk7CiAgfQogIHZhciB3YXJuaW5nQm9yZGVyQ29sb3IgPSB0aGVtZS5nZXRDb2xvcihlZGl0b3JXYXJuaW5nQm9yZGVyKTsKICBpZiAod2FybmluZ0JvcmRlckNvbG9yKSB7CiAgICBjb2xsZWN0b3IuYWRkUnVsZSgiLm1vbmFjby1lZGl0b3IgLiIuY29uY2F0KCJzcXVpZ2dseS13YXJuaW5nIiAvKiBDbGFzc05hbWUuRWRpdG9yV2FybmluZ0RlY29yYXRpb24gKi8sICIgeyBib3JkZXItYm90dG9tOiA0cHggZG91YmxlICIsIHdhcm5pbmdCb3JkZXJDb2xvciwgIjsgfSIpKTsKICB9CiAgdmFyIHdhcm5pbmdGb3JlZ3JvdW5kID0gdGhlbWUuZ2V0Q29sb3IoZWRpdG9yV2FybmluZ0ZvcmVncm91bmQpOwogIGlmICh3YXJuaW5nRm9yZWdyb3VuZCkgewogICAgY29sbGVjdG9yLmFkZFJ1bGUoIi5tb25hY28tZWRpdG9yIC4iLmNvbmNhdCgic3F1aWdnbHktd2FybmluZyIgLyogQ2xhc3NOYW1lLkVkaXRvcldhcm5pbmdEZWNvcmF0aW9uICovLCAiIHsgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLCIsIGdldFNxdWlnZ2x5U1ZHRGF0YSh3YXJuaW5nRm9yZWdyb3VuZCksICJcIikgcmVwZWF0LXggYm90dG9tIGxlZnQ7IH0iKSk7CiAgfQogIHZhciB3YXJuaW5nQmFja2dyb3VuZCA9IHRoZW1lLmdldENvbG9yKGVkaXRvcldhcm5pbmdCYWNrZ3JvdW5kKTsKICBpZiAod2FybmluZ0JhY2tncm91bmQpIHsKICAgIGNvbGxlY3Rvci5hZGRSdWxlKCIubW9uYWNvLWVkaXRvciAuIi5jb25jYXQoInNxdWlnZ2x5LXdhcm5pbmciIC8qIENsYXNzTmFtZS5FZGl0b3JXYXJuaW5nRGVjb3JhdGlvbiAqLywgIjo6YmVmb3JlIHsgZGlzcGxheTogYmxvY2s7IGNvbnRlbnQ6ICcnOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBiYWNrZ3JvdW5kOiAiLCB3YXJuaW5nQmFja2dyb3VuZCwgIjsgfSIpKTsKICB9CiAgdmFyIGluZm9Cb3JkZXJDb2xvciA9IHRoZW1lLmdldENvbG9yKGVkaXRvckluZm9Cb3JkZXIpOwogIGlmIChpbmZvQm9yZGVyQ29sb3IpIHsKICAgIGNvbGxlY3Rvci5hZGRSdWxlKCIubW9uYWNvLWVkaXRvciAuIi5jb25jYXQoInNxdWlnZ2x5LWluZm8iIC8qIENsYXNzTmFtZS5FZGl0b3JJbmZvRGVjb3JhdGlvbiAqLywgIiB7IGJvcmRlci1ib3R0b206IDRweCBkb3VibGUgIiwgaW5mb0JvcmRlckNvbG9yLCAiOyB9IikpOwogIH0KICB2YXIgaW5mb0ZvcmVncm91bmQgPSB0aGVtZS5nZXRDb2xvcihlZGl0b3JJbmZvRm9yZWdyb3VuZCk7CiAgaWYgKGluZm9Gb3JlZ3JvdW5kKSB7CiAgICBjb2xsZWN0b3IuYWRkUnVsZSgiLm1vbmFjby1lZGl0b3IgLiIuY29uY2F0KCJzcXVpZ2dseS1pbmZvIiAvKiBDbGFzc05hbWUuRWRpdG9ySW5mb0RlY29yYXRpb24gKi8sICIgeyBiYWNrZ3JvdW5kOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsIiwgZ2V0U3F1aWdnbHlTVkdEYXRhKGluZm9Gb3JlZ3JvdW5kKSwgIlwiKSByZXBlYXQteCBib3R0b20gbGVmdDsgfSIpKTsKICB9CiAgdmFyIGluZm9CYWNrZ3JvdW5kID0gdGhlbWUuZ2V0Q29sb3IoZWRpdG9ySW5mb0JhY2tncm91bmQpOwogIGlmIChpbmZvQmFja2dyb3VuZCkgewogICAgY29sbGVjdG9yLmFkZFJ1bGUoIi5tb25hY28tZWRpdG9yIC4iLmNvbmNhdCgic3F1aWdnbHktaW5mbyIgLyogQ2xhc3NOYW1lLkVkaXRvckluZm9EZWNvcmF0aW9uICovLCAiOjpiZWZvcmUgeyBkaXNwbGF5OiBibG9jazsgY29udGVudDogJyc7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6ICIsIGluZm9CYWNrZ3JvdW5kLCAiOyB9IikpOwogIH0KICB2YXIgaGludEJvcmRlckNvbG9yID0gdGhlbWUuZ2V0Q29sb3IoZWRpdG9ySGludEJvcmRlcik7CiAgaWYgKGhpbnRCb3JkZXJDb2xvcikgewogICAgY29sbGVjdG9yLmFkZFJ1bGUoIi5tb25hY28tZWRpdG9yIC4iLmNvbmNhdCgic3F1aWdnbHktaGludCIgLyogQ2xhc3NOYW1lLkVkaXRvckhpbnREZWNvcmF0aW9uICovLCAiIHsgYm9yZGVyLWJvdHRvbTogMnB4IGRvdHRlZCAiLCBoaW50Qm9yZGVyQ29sb3IsICI7IH0iKSk7CiAgfQogIHZhciBoaW50Rm9yZWdyb3VuZCA9IHRoZW1lLmdldENvbG9yKGVkaXRvckhpbnRGb3JlZ3JvdW5kKTsKICBpZiAoaGludEZvcmVncm91bmQpIHsKICAgIGNvbGxlY3Rvci5hZGRSdWxlKCIubW9uYWNvLWVkaXRvciAuIi5jb25jYXQoInNxdWlnZ2x5LWhpbnQiIC8qIENsYXNzTmFtZS5FZGl0b3JIaW50RGVjb3JhdGlvbiAqLywgIiB7IGJhY2tncm91bmQ6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwiLCBnZXREb3REb3REb3RTVkdEYXRhKGhpbnRGb3JlZ3JvdW5kKSwgIlwiKSBuby1yZXBlYXQgYm90dG9tIGxlZnQ7IH0iKSk7CiAgfQogIHZhciB1bm5lY2Vzc2FyeUZvcmVncm91bmQgPSB0aGVtZS5nZXRDb2xvcihlZGl0b3JVbm5lY2Vzc2FyeUNvZGVPcGFjaXR5KTsKICBpZiAodW5uZWNlc3NhcnlGb3JlZ3JvdW5kKSB7CiAgICBjb2xsZWN0b3IuYWRkUnVsZSgiLm1vbmFjby1lZGl0b3Iuc2hvd1VudXNlZCAuIi5jb25jYXQoInNxdWlnZ2x5LWlubGluZS11bm5lY2Vzc2FyeSIgLyogQ2xhc3NOYW1lLkVkaXRvclVubmVjZXNzYXJ5SW5saW5lRGVjb3JhdGlvbiAqLywgIiB7IG9wYWNpdHk6ICIsIHVubmVjZXNzYXJ5Rm9yZWdyb3VuZC5yZ2JhLmEsICI7IH0iKSk7CiAgfQogIHZhciB1bm5lY2Vzc2FyeUJvcmRlciA9IHRoZW1lLmdldENvbG9yKGVkaXRvclVubmVjZXNzYXJ5Q29kZUJvcmRlcik7CiAgaWYgKHVubmVjZXNzYXJ5Qm9yZGVyKSB7CiAgICBjb2xsZWN0b3IuYWRkUnVsZSgiLm1vbmFjby1lZGl0b3Iuc2hvd1VudXNlZCAuIi5jb25jYXQoInNxdWlnZ2x5LXVubmVjZXNzYXJ5IiAvKiBDbGFzc05hbWUuRWRpdG9yVW5uZWNlc3NhcnlEZWNvcmF0aW9uICovLCAiIHsgYm9yZGVyLWJvdHRvbTogMnB4IGRhc2hlZCAiLCB1bm5lY2Vzc2FyeUJvcmRlciwgIjsgfSIpKTsKICB9CiAgdmFyIGRlcHJlY2F0ZWRGb3JlZ3JvdW5kID0gdGhlbWUuZ2V0Q29sb3IoZWRpdG9yRm9yZWdyb3VuZCkgfHwgJ2luaGVyaXQnOwogIGNvbGxlY3Rvci5hZGRSdWxlKCIubW9uYWNvLWVkaXRvci5zaG93RGVwcmVjYXRlZCAuIi5jb25jYXQoInNxdWlnZ2x5LWlubGluZS1kZXByZWNhdGVkIiAvKiBDbGFzc05hbWUuRWRpdG9yRGVwcmVjYXRlZElubGluZURlY29yYXRpb24gKi8sICIgeyB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDsgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiAiLCBkZXByZWNhdGVkRm9yZWdyb3VuZCwgIn0iKSk7Cn0pOw=="},{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","nls","dom","onUnexpectedError","Emitter","EventDeliveryQueue","Disposable","dispose","Schemas","EditorConfiguration","EditorExtensionsRegistry","ICodeEditorService","View","ViewUserInputEvents","filterValidationDecorations","CursorsController","CursorColumns","Position","Range","Selection","InternalEditorAction","editorCommon","EditorContextKeys","ModelDecorationOptions","editorUnnecessaryCodeBorder","editorUnnecessaryCodeOpacity","editorErrorBorder","editorErrorForeground","editorHintBorder","editorHintForeground","editorInfoBorder","editorInfoForeground","editorWarningBorder","editorWarningForeground","editorForeground","editorErrorBackground","editorInfoBackground","editorWarningBackground","ViewModel","ICommandService","IContextKeyService","IInstantiationService","ServiceCollection","INotificationService","IThemeService","registerThemingParticipant","IAccessibilityService","withNullAsUndefined","MonospaceLineBreaksComputerFactory","DOMLineBreaksComputerFactory","WordOperations","ILanguageConfigurationService","applyFontInfo","ILanguageFeaturesService","EDITOR_ID","ModelData","model","viewModel","view","hasRealView","listenersToRemove","onBeforeDetached","CodeEditorWidget","domElement","_options","codeEditorWidgetOptions","instantiationService","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","languageConfigurationService","languageFeaturesService","_deliveryQueue","_onDidDispose","_register","onDidDispose","event","_onDidChangeModelContent","deliveryQueue","onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeModelTokens","onDidChangeModelTokens","_onDidChangeConfiguration","onDidChangeConfiguration","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","onDidAttemptReadOnlyEdit","_onDidLayoutChange","onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","onMouseUp","_onMouseDown","onMouseDown","_onMouseDrag","onMouseDrag","_onMouseDrop","onMouseDrop","_onMouseDropCanceled","onMouseDropCanceled","_onDropIntoEditor","onDropIntoEditor","_onContextMenu","onContextMenu","_onMouseMove","onMouseMove","_onMouseLeave","onMouseLeave","_onMouseWheel","onMouseWheel","_onKeyUp","onKeyUp","_onKeyDown","onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","onDidScrollChange","_onDidChangeViewZones","onDidChangeViewZones","_onDidChangeHiddenAreas","onDidChangeHiddenAreas","_bannerDomNode","_dropIntoEditorDecorations","createDecorationsCollection","options","assign","_domElement","_overflowWidgetsDomNode","overflowWidgetsDomNode","_id","_decorationTypeKeysToIds","_decorationTypeSubtypes","_telemetryData","telemetryData","_configuration","_createConfiguration","isSimpleWidget","onDidChange","fire","hasChanged","layoutInfo","get","_contextKeyService","createScoped","_notificationService","_codeEditorService","_commandService","_themeService","EditorContextKeysManager","EditorModeContext","_instantiationService","createChild","_modelData","_contributions","_actions","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","contributions","Array","isArray","getEditorContributions","id","Error","contribution","createInstance","ctor","err","getEditorActions","forEach","action","internalAction","label","alias","precondition","invokeFunction","accessor","runEditorCommand","isDropIntoEnabled","enabled","DragAndDropObserver","onDragEnter","undefined","onDragOver","getTargetAtClientPoint","clientX","clientY","position","showDropIndicatorAt","onDrop","removeDropIndicator","dataTransfer","onDragLeave","onDragEnd","addCodeEditor","getEditorType","EditorType","ICodeEditor","removeCodeEditor","keys","len","contributionId","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","fn","newOptions","updateOptions","getRawOptions","getWordAtPosition","preserveBOM","eolPreference","lineEnding","getValue","newValue","_model","hasTextFocus","detachedModel","_attachModel","hasModel","focus","oldModelUrl","uri","newModelUrl","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","getVisibleRangesPlusViewportAboveBelow","viewLayout","getWhitespaces","lineNumber","includeViewZones","_getVerticalOffsetForPosition","column","_getVerticalOffsetAfterPosition","ranges","_a","setHiddenAreas","map","lift","rawPosition","validatePosition","tabSize","getOptions","visibleColumnFromColumn","getLineContent","getPosition","source","isIPosition","setSelections","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","modelRange","verticalType","revealHorizontal","scrollType","isIRange","validatedModelRange","validateRange","viewRange","coordinatesConverter","convertModelRangeToViewRange","revealRange","_revealLine","revealType","_sendRevealRange","_revealPosition","getSelection","getSelections","something","isSelection","isISelection","isRange","_setSelectionImpl","selection","startLineNumber","startColumn","endLineNumber","endColumn","sel","_revealLines","range","revealVerticalInCenter","_revealRange","reason","getContentWidth","getScrollWidth","getCurrentScrollLeft","getContentHeight","getScrollHeight","getCurrentScrollTop","newScrollLeft","setScrollPosition","scrollLeft","newScrollTop","scrollTop","contributionsState","saveViewState","cursorState","saveCursorState","viewState","saveState","s","codeEditorState","restoreCursorState","restoreViewState","reducedState","reduceRestoreState","restoreState","push","getActions","filter","isSupported","handlerId","payload","_startComposition","_endComposition","args","_type","text","_compositionType","replaceCharCnt","replacePrevCharCnt","replaceNextCharCnt","positionDelta","_paste","pasteOnNewLine","multicursorText","mode","_cut","getAction","run","_triggerEditorCommand","_triggerCommand","executeCommand","startComposition","endComposition","type","compositionType","startPosition","getStartPosition","paste","endPosition","languageId","cut","command","getEditorCommand","pushStackElement","popStackElement","edits","endCursorState","cursorStateComputer","executeEdits","commands","executeCommands","decorations","EditorDecorationsCollection","callback","changeDecorations","getLineDecorations","getDecorationsInRange","oldDecorations","newDecorations","deltaDecorations","decorationIds","changeAccessor","decorationTypeKey","oldDecorationsIds","hasOwnProperty","cssClassName","createOverviewRuler","domNode","browserEvent","delegateVerticalScrollbarPointerDown","dimension","observeContainer","render","isFocused","widget","widgetData","getId","console","warn","addContentWidget","widgetId","layoutContentWidget","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","change","top","getScrollTop","left","getOffsetForColumn","glyphMarginWidth","lineNumbersWidth","decorationsWidth","getScrollLeft","height","forceRedraw","setAriaOptions","domNodeHeight","contains","removeChild","setReservedHeight","prepend","setAttribute","getLanguageId","setIsDominatedByLongLines","isDominatedByLongLines","setModelLineCount","getLineCount","onBeforeAttached","create","scheduleAtNextAnimationFrame","onWillDispose","setModel","onEvent","kind","reachedMaxCursorCount","localize","MAX_CURSOR_COUNT","positions","selections","e1","secondaryPositions","slice","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_createView","appendChild","toString","commandDelegate","viewUserInputEvents","getColorTheme","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","removeDecorationType","dropIntoEditorDecorationOptions","set","revealPosition","clear","modelData","modelLineNumber","modelColumn","modelPosition","viewPosition","convertModelPositionToViewPosition","getVerticalOffsetAfterLineNumber","getVerticalOffsetForLineNumber","register","description","className","_emitterOptions","_onDidChangeToTrue","_onDidChangeToFalse","_value","editor","_editor","createKey","_editorSimpleInput","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_editorTabMovesFocus","tabMovesFocus","_editorReadonly","readOnly","_inDiffEditor","inDiffEditor","_editorColumnSelection","columnSelection","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","reset","some","isEmpty","hasWidgetFocus","getModel","Boolean","_languageFeaturesService","_langId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasInlayHintsProvider","hasInlayHintsProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInWalkThrough","isInWalkThroughSnippet","update","_update","completionProvider","codeActionProvider","codeLensProvider","definitionProvider","declarationProvider","implementationProvider","typeDefinitionProvider","hoverProvider","documentHighlightProvider","documentSymbolProvider","referenceProvider","renameProvider","documentFormattingEditProvider","documentRangeFormattingEditProvider","signatureHelpProvider","inlayHintsProvider","bufferChangeEvents","has","all","scheme","walkThroughSnippet","_onChange","_hasFocus","_domFocusTracker","trackFocus","onDidFocus","onDidBlur","_decorationIds","_isChangingDecorations","listener","thisArgs","disposables","call","index","getDecorationRange","decorationId","decoration","includes","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","getDotDotDotSVGData","theme","collector","errorBorderColor","getColor","addRule","errorForeground","errorBackground","warningBorderColor","warningForeground","warningBackground","infoBorderColor","infoForeground","infoBackground","hintBorderColor","hintForeground","unnecessaryForeground","rgba","a","unnecessaryBorder","deprecatedForeground"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport '../services/markerDecorations.js';\nimport './media/editor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter, EventDeliveryQueue } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { EditorConfiguration } from '../config/editorConfiguration.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { View } from '../view.js';\nimport { ViewUserInputEvents } from '../view/viewUserInputEvents.js';\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\nimport { CursorsController } from '../../common/cursor/cursor.js';\nimport { CursorColumns } from '../../common/core/cursorColumns.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { editorUnnecessaryCodeBorder, editorUnnecessaryCodeOpacity } from '../../common/core/editorColorRegistry.js';\nimport { editorErrorBorder, editorErrorForeground, editorHintBorder, editorHintForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, editorForeground, editorErrorBackground, editorInfoBackground, editorWarningBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\nimport { WordOperations } from '../../common/cursor/cursorWordOperations.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nlet EDITOR_ID = 0;\nclass ModelData {\n    constructor(model, viewModel, view, hasRealView, listenersToRemove) {\n        this.model = model;\n        this.viewModel = viewModel;\n        this.view = view;\n        this.hasRealView = hasRealView;\n        this.listenersToRemove = listenersToRemove;\n    }\n    dispose() {\n        dispose(this.listenersToRemove);\n        this.model.onBeforeDetached();\n        if (this.hasRealView) {\n            this.view.dispose();\n        }\n        this.viewModel.dispose();\n    }\n}\nlet CodeEditorWidget = class CodeEditorWidget extends Disposable {\n    constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        //#region Eventing\n        this._deliveryQueue = new EventDeliveryQueue();\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidChangeModelContent = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelContent = this._onDidChangeModelContent.event;\n        this._onDidChangeModelLanguage = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\n        this._onDidChangeModelLanguageConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\n        this._onDidChangeModelOptions = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\n        this._onDidChangeModelDecorations = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n        this._onDidChangeModelTokens = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelTokens = this._onDidChangeModelTokens.event;\n        this._onDidChangeConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        this._onDidChangeModel = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModel = this._onDidChangeModel.event;\n        this._onDidChangeCursorPosition = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\n        this._onDidChangeCursorSelection = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\n        this._onDidAttemptReadOnlyEdit = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\n        this._onDidLayoutChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\n        this._editorTextFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\n        this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\n        this._editorWidgetFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\n        this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\n        this._onWillType = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onWillType = this._onWillType.event;\n        this._onDidType = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidType = this._onDidType.event;\n        this._onDidCompositionStart = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidCompositionStart = this._onDidCompositionStart.event;\n        this._onDidCompositionEnd = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidCompositionEnd = this._onDidCompositionEnd.event;\n        this._onDidPaste = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidPaste = this._onDidPaste.event;\n        this._onMouseUp = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onMouseUp = this._onMouseUp.event;\n        this._onMouseDown = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onMouseDown = this._onMouseDown.event;\n        this._onMouseDrag = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onMouseDrag = this._onMouseDrag.event;\n        this._onMouseDrop = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onMouseDrop = this._onMouseDrop.event;\n        this._onMouseDropCanceled = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onMouseDropCanceled = this._onMouseDropCanceled.event;\n        this._onDropIntoEditor = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDropIntoEditor = this._onDropIntoEditor.event;\n        this._onContextMenu = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onContextMenu = this._onContextMenu.event;\n        this._onMouseMove = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onMouseMove = this._onMouseMove.event;\n        this._onMouseLeave = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onMouseLeave = this._onMouseLeave.event;\n        this._onMouseWheel = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onMouseWheel = this._onMouseWheel.event;\n        this._onKeyUp = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onKeyUp = this._onKeyUp.event;\n        this._onKeyDown = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onKeyDown = this._onKeyDown.event;\n        this._onDidContentSizeChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidContentSizeChange = this._onDidContentSizeChange.event;\n        this._onDidScrollChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidScrollChange = this._onDidScrollChange.event;\n        this._onDidChangeViewZones = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeViewZones = this._onDidChangeViewZones.event;\n        this._onDidChangeHiddenAreas = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeHiddenAreas = this._onDidChangeHiddenAreas.event;\n        this._bannerDomNode = null;\n        this._dropIntoEditorDecorations = this.createDecorationsCollection();\n        const options = Object.assign({}, _options);\n        this._domElement = domElement;\n        this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n        delete options.overflowWidgetsDomNode;\n        this._id = (++EDITOR_ID);\n        this._decorationTypeKeysToIds = {};\n        this._decorationTypeSubtypes = {};\n        this._telemetryData = codeEditorWidgetOptions.telemetryData;\n        this._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || false, options, accessibilityService));\n        this._register(this._configuration.onDidChange((e) => {\n            this._onDidChangeConfiguration.fire(e);\n            const options = this._configuration.options;\n            if (e.hasChanged(133 /* EditorOption.layoutInfo */)) {\n                const layoutInfo = options.get(133 /* EditorOption.layoutInfo */);\n                this._onDidLayoutChange.fire(layoutInfo);\n            }\n        }));\n        this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n        this._notificationService = notificationService;\n        this._codeEditorService = codeEditorService;\n        this._commandService = commandService;\n        this._themeService = themeService;\n        this._register(new EditorContextKeysManager(this, this._contextKeyService));\n        this._register(new EditorModeContext(this, this._contextKeyService, languageFeaturesService));\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._modelData = null;\n        this._contributions = {};\n        this._actions = {};\n        this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\n        this._register(this._focusTracker.onChange(() => {\n            this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\n        }));\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        let contributions;\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n            contributions = codeEditorWidgetOptions.contributions;\n        }\n        else {\n            contributions = EditorExtensionsRegistry.getEditorContributions();\n        }\n        for (const desc of contributions) {\n            if (this._contributions[desc.id]) {\n                onUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n                continue;\n            }\n            try {\n                const contribution = this._instantiationService.createInstance(desc.ctor, this);\n                this._contributions[desc.id] = contribution;\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        EditorExtensionsRegistry.getEditorActions().forEach((action) => {\n            if (this._actions[action.id]) {\n                onUnexpectedError(new Error(`Cannot have two actions with the same id ${action.id}`));\n                return;\n            }\n            const internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), () => {\n                return this._instantiationService.invokeFunction((accessor) => {\n                    return Promise.resolve(action.runEditorCommand(accessor, this, null));\n                });\n            }, this._contextKeyService);\n            this._actions[internalAction.id] = internalAction;\n        });\n        const isDropIntoEnabled = () => {\n            return !this._configuration.options.get(83 /* EditorOption.readOnly */)\n                && this._configuration.options.get(32 /* EditorOption.dropIntoEditor */).enabled;\n        };\n        this._register(new dom.DragAndDropObserver(this._domElement, {\n            onDragEnter: () => undefined,\n            onDragOver: e => {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this.showDropIndicatorAt(target.position);\n                }\n            },\n            onDrop: (e) => __awaiter(this, void 0, void 0, function* () {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                this.removeDropIndicator();\n                if (!e.dataTransfer) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this._onDropIntoEditor.fire({ position: target.position, event: e });\n                }\n            }),\n            onDragLeave: () => {\n                this.removeDropIndicator();\n            },\n            onDragEnd: () => {\n                this.removeDropIndicator();\n            },\n        }));\n        this._codeEditorService.addCodeEditor(this);\n    }\n    //#endregion\n    get isSimpleWidget() {\n        return this._configuration.isSimpleWidget;\n    }\n    _createConfiguration(isSimpleWidget, options, accessibilityService) {\n        return new EditorConfiguration(isSimpleWidget, options, this._domElement, accessibilityService);\n    }\n    getId() {\n        return this.getEditorType() + ':' + this._id;\n    }\n    getEditorType() {\n        return editorCommon.EditorType.ICodeEditor;\n    }\n    dispose() {\n        this._codeEditorService.removeCodeEditor(this);\n        this._focusTracker.dispose();\n        const keys = Object.keys(this._contributions);\n        for (let i = 0, len = keys.length; i < len; i++) {\n            const contributionId = keys[i];\n            this._contributions[contributionId].dispose();\n        }\n        this._contributions = {};\n        this._actions = {};\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._removeDecorationTypes();\n        this._postDetachModelCleanup(this._detachModel());\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    invokeWithinContext(fn) {\n        return this._instantiationService.invokeFunction(fn);\n    }\n    updateOptions(newOptions) {\n        this._configuration.updateOptions(newOptions || {});\n    }\n    getOptions() {\n        return this._configuration.options;\n    }\n    getOption(id) {\n        return this._configuration.options.get(id);\n    }\n    getRawOptions() {\n        return this._configuration.getRawOptions();\n    }\n    getOverflowWidgetsDomNode() {\n        return this._overflowWidgetsDomNode;\n    }\n    getConfiguredWordAtPosition(position) {\n        if (!this._modelData) {\n            return null;\n        }\n        return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(119 /* EditorOption.wordSeparators */), position);\n    }\n    getValue(options = null) {\n        if (!this._modelData) {\n            return '';\n        }\n        const preserveBOM = (options && options.preserveBOM) ? true : false;\n        let eolPreference = 0 /* EndOfLinePreference.TextDefined */;\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\n            eolPreference = 1 /* EndOfLinePreference.LF */;\n        }\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n            eolPreference = 2 /* EndOfLinePreference.CRLF */;\n        }\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\n    }\n    setValue(newValue) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.model.setValue(newValue);\n    }\n    getModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model;\n    }\n    setModel(_model = null) {\n        const model = _model;\n        if (this._modelData === null && model === null) {\n            // Current model is the new model\n            return;\n        }\n        if (this._modelData && this._modelData.model === model) {\n            // Current model is the new model\n            return;\n        }\n        const hasTextFocus = this.hasTextFocus();\n        const detachedModel = this._detachModel();\n        this._attachModel(model);\n        if (hasTextFocus && this.hasModel()) {\n            this.focus();\n        }\n        const e = {\n            oldModelUrl: detachedModel ? detachedModel.uri : null,\n            newModelUrl: model ? model.uri : null\n        };\n        this._removeDecorationTypes();\n        this._onDidChangeModel.fire(e);\n        this._postDetachModelCleanup(detachedModel);\n    }\n    _removeDecorationTypes() {\n        this._decorationTypeKeysToIds = {};\n        if (this._decorationTypeSubtypes) {\n            for (const decorationType in this._decorationTypeSubtypes) {\n                const subTypes = this._decorationTypeSubtypes[decorationType];\n                for (const subType in subTypes) {\n                    this._removeDecorationType(decorationType + '-' + subType);\n                }\n            }\n            this._decorationTypeSubtypes = {};\n        }\n    }\n    getVisibleRanges() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRanges();\n    }\n    getVisibleRangesPlusViewportAboveBelow() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n    }\n    getWhitespaces() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\n    }\n    static _getVerticalOffsetAfterPosition(modelData, modelLineNumber, modelColumn, includeViewZones) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getTopForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    getTopForPosition(lineNumber, column) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column, false);\n    }\n    static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn, includeViewZones = false) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getBottomForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget._getVerticalOffsetAfterPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    setHiddenAreas(ranges) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)));\n    }\n    getVisibleColumnFromPosition(rawPosition) {\n        if (!this._modelData) {\n            return rawPosition.column;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const tabSize = this._modelData.model.getOptions().tabSize;\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n    }\n    getPosition() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.setSelections(source, [{\n                selectionStartLineNumber: position.lineNumber,\n                selectionStartColumn: position.column,\n                positionLineNumber: position.lineNumber,\n                positionColumn: position.column\n            }]);\n    }\n    _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Range.isIRange(modelRange)) {\n            throw new Error('Invalid arguments');\n        }\n        const validatedModelRange = this._modelData.model.validateRange(modelRange);\n        const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n        this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n    }\n    revealLine(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLine(lineNumber, revealType, scrollType) {\n        if (typeof lineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 0 /* VerticalRevealType.Simple */, true, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    _revealPosition(position, verticalType, revealHorizontal, scrollType) {\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n    }\n    getSelection() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelection();\n    }\n    getSelections() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        const isSelection = Selection.isISelection(something);\n        const isRange = Range.isIRange(something);\n        if (!isSelection && !isRange) {\n            throw new Error('Invalid arguments');\n        }\n        if (isSelection) {\n            this._setSelectionImpl(something, source);\n        }\n        else if (isRange) {\n            // act as if it was an IRange\n            const selection = {\n                selectionStartLineNumber: something.startLineNumber,\n                selectionStartColumn: something.startColumn,\n                positionLineNumber: something.endLineNumber,\n                positionColumn: something.endColumn\n            };\n            this._setSelectionImpl(selection, source);\n        }\n    }\n    _setSelectionImpl(sel, source) {\n        if (!this._modelData) {\n            return;\n        }\n        const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n        this._modelData.viewModel.setSelections(source, [selection]);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._revealRange(range, revealVerticalInCenter ? 1 /* VerticalRevealType.Center */ : 0 /* VerticalRevealType.Simple */, revealHorizontal, scrollType);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 6 /* VerticalRevealType.NearTopIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 3 /* VerticalRevealType.Top */, true, scrollType);\n    }\n    _revealRange(range, verticalType, revealHorizontal, scrollType) {\n        if (!Range.isIRange(range)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n    }\n    setSelections(ranges, source = 'api', reason = 0 /* CursorChangeReason.NotSet */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!ranges || ranges.length === 0) {\n            throw new Error('Invalid arguments');\n        }\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            if (!Selection.isISelection(ranges[i])) {\n                throw new Error('Invalid arguments');\n            }\n        }\n        this._modelData.viewModel.setSelections(source, ranges, reason);\n    }\n    getContentWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentWidth();\n    }\n    getScrollWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\n    }\n    getScrollLeft() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n    }\n    getContentHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentHeight();\n    }\n    getScrollHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\n    }\n    getScrollTop() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n    }\n    setScrollLeft(newScrollLeft, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollLeft !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollLeft: newScrollLeft\n        }, scrollType);\n    }\n    setScrollTop(newScrollTop, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollTop !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollTop: newScrollTop\n        }, scrollType);\n    }\n    setScrollPosition(position, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition(position, scrollType);\n    }\n    saveViewState() {\n        if (!this._modelData) {\n            return null;\n        }\n        const contributionsState = {};\n        const keys = Object.keys(this._contributions);\n        for (const id of keys) {\n            const contribution = this._contributions[id];\n            if (typeof contribution.saveViewState === 'function') {\n                contributionsState[id] = contribution.saveViewState();\n            }\n        }\n        const cursorState = this._modelData.viewModel.saveCursorState();\n        const viewState = this._modelData.viewModel.saveState();\n        return {\n            cursorState: cursorState,\n            viewState: viewState,\n            contributionsState: contributionsState\n        };\n    }\n    restoreViewState(s) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        const codeEditorState = s;\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n            const cursorState = codeEditorState.cursorState;\n            if (Array.isArray(cursorState)) {\n                if (cursorState.length > 0) {\n                    this._modelData.viewModel.restoreCursorState(cursorState);\n                }\n            }\n            else {\n                // Backwards compatibility\n                this._modelData.viewModel.restoreCursorState([cursorState]);\n            }\n            const contributionsState = codeEditorState.contributionsState || {};\n            const keys = Object.keys(this._contributions);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const id = keys[i];\n                const contribution = this._contributions[id];\n                if (typeof contribution.restoreViewState === 'function') {\n                    contribution.restoreViewState(contributionsState[id]);\n                }\n            }\n            const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n            this._modelData.view.restoreState(reducedState);\n        }\n    }\n    getContribution(id) {\n        return (this._contributions[id] || null);\n    }\n    getActions() {\n        const result = [];\n        const keys = Object.keys(this._actions);\n        for (let i = 0, len = keys.length; i < len; i++) {\n            const id = keys[i];\n            result.push(this._actions[id]);\n        }\n        return result;\n    }\n    getSupportedActions() {\n        let result = this.getActions();\n        result = result.filter(action => action.isSupported());\n        return result;\n    }\n    getAction(id) {\n        return this._actions[id] || null;\n    }\n    trigger(source, handlerId, payload) {\n        payload = payload || {};\n        switch (handlerId) {\n            case \"compositionStart\" /* editorCommon.Handler.CompositionStart */:\n                this._startComposition();\n                return;\n            case \"compositionEnd\" /* editorCommon.Handler.CompositionEnd */:\n                this._endComposition(source);\n                return;\n            case \"type\" /* editorCommon.Handler.Type */: {\n                const args = payload;\n                this._type(source, args.text || '');\n                return;\n            }\n            case \"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replaceCharCnt || 0, 0, 0);\n                return;\n            }\n            case \"compositionType\" /* editorCommon.Handler.CompositionType */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replacePrevCharCnt || 0, args.replaceNextCharCnt || 0, args.positionDelta || 0);\n                return;\n            }\n            case \"paste\" /* editorCommon.Handler.Paste */: {\n                const args = payload;\n                this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null);\n                return;\n            }\n            case \"cut\" /* editorCommon.Handler.Cut */:\n                this._cut(source);\n                return;\n        }\n        const action = this.getAction(handlerId);\n        if (action) {\n            Promise.resolve(action.run()).then(undefined, onUnexpectedError);\n            return;\n        }\n        if (!this._modelData) {\n            return;\n        }\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\n            return;\n        }\n        this._triggerCommand(handlerId, payload);\n    }\n    _triggerCommand(handlerId, payload) {\n        this._commandService.executeCommand(handlerId, payload);\n    }\n    _startComposition() {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.startComposition();\n        this._onDidCompositionStart.fire();\n    }\n    _endComposition(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.endComposition(source);\n        this._onDidCompositionEnd.fire();\n    }\n    _type(source, text) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        if (source === 'keyboard') {\n            this._onWillType.fire(text);\n        }\n        this._modelData.viewModel.type(text, source);\n        if (source === 'keyboard') {\n            this._onDidType.fire(text);\n        }\n    }\n    _compositionType(source, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);\n    }\n    _paste(source, text, pasteOnNewLine, multicursorText, mode) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        const viewModel = this._modelData.viewModel;\n        const startPosition = viewModel.getSelection().getStartPosition();\n        viewModel.paste(text, pasteOnNewLine, multicursorText, source);\n        const endPosition = viewModel.getSelection().getStartPosition();\n        if (source === 'keyboard') {\n            this._onDidPaste.fire({\n                range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n                languageId: mode\n            });\n        }\n    }\n    _cut(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.cut(source);\n    }\n    _triggerEditorCommand(source, handlerId, payload) {\n        const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n        if (command) {\n            payload = payload || {};\n            payload.source = source;\n            this._instantiationService.invokeFunction((accessor) => {\n                Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n            });\n            return true;\n        }\n        return false;\n    }\n    _getViewModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel;\n    }\n    pushUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(83 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.pushStackElement();\n        return true;\n    }\n    popUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(83 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.popStackElement();\n        return true;\n    }\n    executeEdits(source, edits, endCursorState) {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(83 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        let cursorStateComputer;\n        if (!endCursorState) {\n            cursorStateComputer = () => null;\n        }\n        else if (Array.isArray(endCursorState)) {\n            cursorStateComputer = () => endCursorState;\n        }\n        else {\n            cursorStateComputer = endCursorState;\n        }\n        this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\n        return true;\n    }\n    executeCommand(source, command) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommand(command, source);\n    }\n    executeCommands(source, commands) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommands(commands, source);\n    }\n    createDecorationsCollection(decorations) {\n        return new EditorDecorationsCollection(this, decorations);\n    }\n    changeDecorations(callback) {\n        if (!this._modelData) {\n            // callback will not be called\n            return null;\n        }\n        return this._modelData.model.changeDecorations(callback, this._id);\n    }\n    getLineDecorations(lineNumber) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    getDecorationsInRange(range) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getDecorationsInRange(range, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    /**\n     * @deprecated\n     */\n    deltaDecorations(oldDecorations, newDecorations) {\n        if (!this._modelData) {\n            return [];\n        }\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\n            return oldDecorations;\n        }\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n    }\n    removeDecorations(decorationIds) {\n        if (!this._modelData || decorationIds.length === 0) {\n            return;\n        }\n        this._modelData.model.changeDecorations((changeAccessor) => {\n            changeAccessor.deltaDecorations(decorationIds, []);\n        });\n    }\n    removeDecorationsByType(decorationTypeKey) {\n        // remove decorations for type and sub type\n        const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n        if (oldDecorationsIds) {\n            this.deltaDecorations(oldDecorationsIds, []);\n        }\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\n        }\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeSubtypes[decorationTypeKey];\n        }\n    }\n    getLayoutInfo() {\n        const options = this._configuration.options;\n        const layoutInfo = options.get(133 /* EditorOption.layoutInfo */);\n        return layoutInfo;\n    }\n    createOverviewRuler(cssClassName) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.createOverviewRuler(cssClassName);\n    }\n    getContainerDomNode() {\n        return this._domElement;\n    }\n    getDomNode() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.domNode.domNode;\n    }\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateVerticalScrollbarPointerDown(browserEvent);\n    }\n    layout(dimension) {\n        this._configuration.observeContainer(dimension);\n        this.render();\n    }\n    focus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.focus();\n    }\n    hasTextFocus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return false;\n        }\n        return this._modelData.view.isFocused();\n    }\n    hasWidgetFocus() {\n        return this._focusTracker && this._focusTracker.hasFocus();\n    }\n    addContentWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a content widget with the same id.');\n        }\n        this._contentWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addContentWidget(widgetData);\n        }\n    }\n    layoutContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutContentWidget(widgetData);\n            }\n        }\n    }\n    removeContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            delete this._contentWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeContentWidget(widgetData);\n            }\n        }\n    }\n    addOverlayWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting an overlay widget with the same id.');\n        }\n        this._overlayWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addOverlayWidget(widgetData);\n        }\n    }\n    layoutOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutOverlayWidget(widgetData);\n            }\n        }\n    }\n    removeOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            delete this._overlayWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeOverlayWidget(widgetData);\n            }\n        }\n    }\n    changeViewZones(callback) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.change(callback);\n    }\n    getTargetAtClientPoint(clientX, clientY) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n    }\n    getScrolledVisiblePosition(rawPosition) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const options = this._configuration.options;\n        const layoutInfo = options.get(133 /* EditorOption.layoutInfo */);\n        const top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n        const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n        return {\n            top: top,\n            left: left,\n            height: options.get(61 /* EditorOption.lineHeight */)\n        };\n    }\n    getOffsetForColumn(lineNumber, column) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return -1;\n        }\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\n    }\n    render(forceRedraw = false) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.render(true, forceRedraw);\n    }\n    setAriaOptions(options) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.setAriaOptions(options);\n    }\n    applyFontInfo(target) {\n        applyFontInfo(target, this._configuration.options.get(46 /* EditorOption.fontInfo */));\n    }\n    setBanner(domNode, domNodeHeight) {\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        this._bannerDomNode = domNode;\n        this._configuration.setReservedHeight(domNode ? domNodeHeight : 0);\n        if (this._bannerDomNode) {\n            this._domElement.prepend(this._bannerDomNode);\n        }\n    }\n    _attachModel(model) {\n        if (!model) {\n            this._modelData = null;\n            return;\n        }\n        const listenersToRemove = [];\n        this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n        this._configuration.setModelLineCount(model.getLineCount());\n        model.onBeforeAttached();\n        const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), (callback) => dom.scheduleAtNextAnimationFrame(callback), this.languageConfigurationService, this._themeService);\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n        listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n        listenersToRemove.push(viewModel.onEvent((e) => {\n            switch (e.kind) {\n                case 0 /* OutgoingViewModelEventKind.ContentSizeChanged */:\n                    this._onDidContentSizeChange.fire(e);\n                    break;\n                case 1 /* OutgoingViewModelEventKind.FocusChanged */:\n                    this._editorTextFocus.setValue(e.hasFocus);\n                    break;\n                case 2 /* OutgoingViewModelEventKind.ScrollChanged */:\n                    this._onDidScrollChange.fire(e);\n                    break;\n                case 3 /* OutgoingViewModelEventKind.ViewZonesChanged */:\n                    this._onDidChangeViewZones.fire();\n                    break;\n                case 4 /* OutgoingViewModelEventKind.HiddenAreasChanged */:\n                    this._onDidChangeHiddenAreas.fire();\n                    break;\n                case 5 /* OutgoingViewModelEventKind.ReadOnlyEditAttempt */:\n                    this._onDidAttemptReadOnlyEdit.fire();\n                    break;\n                case 6 /* OutgoingViewModelEventKind.CursorStateChanged */: {\n                    if (e.reachedMaxCursorCount) {\n                        this._notificationService.warn(nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}.\", CursorsController.MAX_CURSOR_COUNT));\n                    }\n                    const positions = [];\n                    for (let i = 0, len = e.selections.length; i < len; i++) {\n                        positions[i] = e.selections[i].getPosition();\n                    }\n                    const e1 = {\n                        position: positions[0],\n                        secondaryPositions: positions.slice(1),\n                        reason: e.reason,\n                        source: e.source\n                    };\n                    this._onDidChangeCursorPosition.fire(e1);\n                    const e2 = {\n                        selection: e.selections[0],\n                        secondarySelections: e.selections.slice(1),\n                        modelVersionId: e.modelVersionId,\n                        oldSelections: e.oldSelections,\n                        oldModelVersionId: e.oldModelVersionId,\n                        source: e.source,\n                        reason: e.reason\n                    };\n                    this._onDidChangeCursorSelection.fire(e2);\n                    break;\n                }\n                case 7 /* OutgoingViewModelEventKind.ModelDecorationsChanged */:\n                    this._onDidChangeModelDecorations.fire(e.event);\n                    break;\n                case 8 /* OutgoingViewModelEventKind.ModelLanguageChanged */:\n                    this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n                    this._onDidChangeModelLanguage.fire(e.event);\n                    break;\n                case 9 /* OutgoingViewModelEventKind.ModelLanguageConfigurationChanged */:\n                    this._onDidChangeModelLanguageConfiguration.fire(e.event);\n                    break;\n                case 10 /* OutgoingViewModelEventKind.ModelContentChanged */:\n                    this._onDidChangeModelContent.fire(e.event);\n                    break;\n                case 11 /* OutgoingViewModelEventKind.ModelOptionsChanged */:\n                    this._onDidChangeModelOptions.fire(e.event);\n                    break;\n                case 12 /* OutgoingViewModelEventKind.ModelTokensChanged */:\n                    this._onDidChangeModelTokens.fire(e.event);\n                    break;\n            }\n        }));\n        const [view, hasRealView] = this._createView(viewModel);\n        if (hasRealView) {\n            this._domElement.appendChild(view.domNode.domNode);\n            let keys = Object.keys(this._contentWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addContentWidget(this._contentWidgets[widgetId]);\n            }\n            keys = Object.keys(this._overlayWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\n            }\n            view.render(false, true);\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n        }\n        this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove);\n    }\n    _createView(viewModel) {\n        let commandDelegate;\n        if (this.isSimpleWidget) {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n                },\n                type: (text) => {\n                    this._type('keyboard', text);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    this._compositionType('keyboard', text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n                },\n                startComposition: () => {\n                    this._startComposition();\n                },\n                endComposition: () => {\n                    this._endComposition('keyboard');\n                },\n                cut: () => {\n                    this._cut('keyboard');\n                }\n            };\n        }\n        else {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    const payload = { text, pasteOnNewLine, multicursorText, mode };\n                    this._commandService.executeCommand(\"paste\" /* editorCommon.Handler.Paste */, payload);\n                },\n                type: (text) => {\n                    const payload = { text };\n                    this._commandService.executeCommand(\"type\" /* editorCommon.Handler.Type */, payload);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    // Try if possible to go through the existing `replacePreviousChar` command\n                    if (replaceNextCharCnt || positionDelta) {\n                        // must be handled through the new command\n                        const payload = { text, replacePrevCharCnt, replaceNextCharCnt, positionDelta };\n                        this._commandService.executeCommand(\"compositionType\" /* editorCommon.Handler.CompositionType */, payload);\n                    }\n                    else {\n                        const payload = { text, replaceCharCnt: replacePrevCharCnt };\n                        this._commandService.executeCommand(\"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */, payload);\n                    }\n                },\n                startComposition: () => {\n                    this._commandService.executeCommand(\"compositionStart\" /* editorCommon.Handler.CompositionStart */, {});\n                },\n                endComposition: () => {\n                    this._commandService.executeCommand(\"compositionEnd\" /* editorCommon.Handler.CompositionEnd */, {});\n                },\n                cut: () => {\n                    this._commandService.executeCommand(\"cut\" /* editorCommon.Handler.Cut */, {});\n                }\n            };\n        }\n        const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n        viewUserInputEvents.onKeyDown = (e) => this._onKeyDown.fire(e);\n        viewUserInputEvents.onKeyUp = (e) => this._onKeyUp.fire(e);\n        viewUserInputEvents.onContextMenu = (e) => this._onContextMenu.fire(e);\n        viewUserInputEvents.onMouseMove = (e) => this._onMouseMove.fire(e);\n        viewUserInputEvents.onMouseLeave = (e) => this._onMouseLeave.fire(e);\n        viewUserInputEvents.onMouseDown = (e) => this._onMouseDown.fire(e);\n        viewUserInputEvents.onMouseUp = (e) => this._onMouseUp.fire(e);\n        viewUserInputEvents.onMouseDrag = (e) => this._onMouseDrag.fire(e);\n        viewUserInputEvents.onMouseDrop = (e) => this._onMouseDrop.fire(e);\n        viewUserInputEvents.onMouseDropCanceled = (e) => this._onMouseDropCanceled.fire(e);\n        viewUserInputEvents.onMouseWheel = (e) => this._onMouseWheel.fire(e);\n        const view = new View(commandDelegate, this._configuration, this._themeService.getColorTheme(), viewModel, viewUserInputEvents, this._overflowWidgetsDomNode);\n        return [view, true];\n    }\n    _postDetachModelCleanup(detachedModel) {\n        detachedModel === null || detachedModel === void 0 ? void 0 : detachedModel.removeAllDecorationsWithOwnerId(this._id);\n    }\n    _detachModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        const model = this._modelData.model;\n        const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n        this._modelData.dispose();\n        this._modelData = null;\n        this._domElement.removeAttribute('data-mode-id');\n        if (removeDomNode && this._domElement.contains(removeDomNode)) {\n            this._domElement.removeChild(removeDomNode);\n        }\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        return model;\n    }\n    _removeDecorationType(key) {\n        this._codeEditorService.removeDecorationType(key);\n    }\n    hasModel() {\n        return (this._modelData !== null);\n    }\n    showDropIndicatorAt(position) {\n        const newDecorations = [{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: CodeEditorWidget.dropIntoEditorDecorationOptions\n            }];\n        this._dropIntoEditorDecorations.set(newDecorations);\n        this.revealPosition(position, 1 /* editorCommon.ScrollType.Immediate */);\n    }\n    removeDropIndicator() {\n        this._dropIntoEditorDecorations.clear();\n    }\n};\nCodeEditorWidget.dropIntoEditorDecorationOptions = ModelDecorationOptions.register({\n    description: 'workbench-dnd-target',\n    className: 'dnd-target'\n});\nCodeEditorWidget = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], CodeEditorWidget);\nexport { CodeEditorWidget };\nexport class BooleanEventEmitter extends Disposable {\n    constructor(_emitterOptions) {\n        super();\n        this._emitterOptions = _emitterOptions;\n        this._onDidChangeToTrue = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToTrue = this._onDidChangeToTrue.event;\n        this._onDidChangeToFalse = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToFalse = this._onDidChangeToFalse.event;\n        this._value = 0 /* BooleanEventValue.NotSet */;\n    }\n    setValue(_value) {\n        const value = (_value ? 2 /* BooleanEventValue.True */ : 1 /* BooleanEventValue.False */);\n        if (this._value === value) {\n            return;\n        }\n        this._value = value;\n        if (this._value === 2 /* BooleanEventValue.True */) {\n            this._onDidChangeToTrue.fire();\n        }\n        else if (this._value === 1 /* BooleanEventValue.False */) {\n            this._onDidChangeToFalse.fire();\n        }\n    }\n}\nclass EditorContextKeysManager extends Disposable {\n    constructor(editor, contextKeyService) {\n        super();\n        this._editor = editor;\n        contextKeyService.createKey('editorId', editor.getId());\n        this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n        this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n        this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n        this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n        this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n        this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n        this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n        this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n        this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n        this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n        this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n        this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n        this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n        this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n        this._updateFromConfig();\n        this._updateFromSelection();\n        this._updateFromFocus();\n        this._updateFromModel();\n        this._editorSimpleInput.set(this._editor.isSimpleWidget);\n    }\n    _updateFromConfig() {\n        const options = this._editor.getOptions();\n        this._editorTabMovesFocus.set(options.get(132 /* EditorOption.tabFocusMode */));\n        this._editorReadonly.set(options.get(83 /* EditorOption.readOnly */));\n        this._inDiffEditor.set(options.get(56 /* EditorOption.inDiffEditor */));\n        this._editorColumnSelection.set(options.get(18 /* EditorOption.columnSelection */));\n    }\n    _updateFromSelection() {\n        const selections = this._editor.getSelections();\n        if (!selections) {\n            this._hasMultipleSelections.reset();\n            this._hasNonEmptySelection.reset();\n        }\n        else {\n            this._hasMultipleSelections.set(selections.length > 1);\n            this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n        }\n    }\n    _updateFromFocus() {\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n        this._textInputFocus.set(this._editor.hasTextFocus());\n    }\n    _updateFromModel() {\n        const model = this._editor.getModel();\n        this._canUndo.set(Boolean(model && model.canUndo()));\n        this._canRedo.set(Boolean(model && model.canRedo()));\n    }\n}\nexport class EditorModeContext extends Disposable {\n    constructor(_editor, _contextKeyService, _languageFeaturesService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n        this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n        this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n        this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n        this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n        this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n        this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n        this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n        this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n        this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n        this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n        this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n        this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n        this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n        this._hasInlayHintsProvider = EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);\n        this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._isInWalkThrough = EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);\n        const update = () => this._update();\n        // update when model/mode changes\n        this._register(_editor.onDidChangeModel(update));\n        this._register(_editor.onDidChangeModelLanguage(update));\n        // update when registries change\n        this._register(_languageFeaturesService.completionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeActionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeLensProvider.onDidChange(update));\n        this._register(_languageFeaturesService.definitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.declarationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.implementationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.typeDefinitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.hoverProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentHighlightProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentSymbolProvider.onDidChange(update));\n        this._register(_languageFeaturesService.referenceProvider.onDidChange(update));\n        this._register(_languageFeaturesService.renameProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.signatureHelpProvider.onDidChange(update));\n        this._register(_languageFeaturesService.inlayHintsProvider.onDidChange(update));\n        update();\n    }\n    dispose() {\n        super.dispose();\n    }\n    reset() {\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.reset();\n            this._hasCompletionItemProvider.reset();\n            this._hasCodeActionsProvider.reset();\n            this._hasCodeLensProvider.reset();\n            this._hasDefinitionProvider.reset();\n            this._hasDeclarationProvider.reset();\n            this._hasImplementationProvider.reset();\n            this._hasTypeDefinitionProvider.reset();\n            this._hasHoverProvider.reset();\n            this._hasDocumentHighlightProvider.reset();\n            this._hasDocumentSymbolProvider.reset();\n            this._hasReferenceProvider.reset();\n            this._hasRenameProvider.reset();\n            this._hasDocumentFormattingProvider.reset();\n            this._hasDocumentSelectionFormattingProvider.reset();\n            this._hasSignatureHelpProvider.reset();\n            this._isInWalkThrough.reset();\n        });\n    }\n    _update() {\n        const model = this._editor.getModel();\n        if (!model) {\n            this.reset();\n            return;\n        }\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.set(model.getLanguageId());\n            this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(model));\n            this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(model));\n            this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(model));\n            this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(model));\n            this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(model));\n            this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(model));\n            this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(model));\n            this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(model));\n            this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(model));\n            this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(model));\n            this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(model));\n            this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(model));\n            this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(model));\n            this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(model));\n            this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(model) || this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(model).length + this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\n        });\n    }\n}\nclass CodeEditorWidgetFocusTracker extends Disposable {\n    constructor(domElement) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._hasFocus = false;\n        this._domFocusTracker = this._register(dom.trackFocus(domElement));\n        this._register(this._domFocusTracker.onDidFocus(() => {\n            this._hasFocus = true;\n            this._onChange.fire(undefined);\n        }));\n        this._register(this._domFocusTracker.onDidBlur(() => {\n            this._hasFocus = false;\n            this._onChange.fire(undefined);\n        }));\n    }\n    hasFocus() {\n        return this._hasFocus;\n    }\n}\nclass EditorDecorationsCollection {\n    constructor(_editor, decorations) {\n        this._editor = _editor;\n        this._decorationIds = [];\n        this._isChangingDecorations = false;\n        if (Array.isArray(decorations) && decorations.length > 0) {\n            this.set(decorations);\n        }\n    }\n    get length() {\n        return this._decorationIds.length;\n    }\n    onDidChange(listener, thisArgs, disposables) {\n        return this._editor.onDidChangeModelDecorations((e) => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            listener.call(thisArgs, e);\n        }, disposables);\n    }\n    getRange(index) {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (index >= this._decorationIds.length) {\n            return null;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorationIds[index]);\n    }\n    getRanges() {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const result = [];\n        for (const decorationId of this._decorationIds) {\n            const range = model.getDecorationRange(decorationId);\n            if (range) {\n                result.push(range);\n            }\n        }\n        return result;\n    }\n    has(decoration) {\n        return this._decorationIds.includes(decoration.id);\n    }\n    clear() {\n        if (this._decorationIds.length === 0) {\n            // nothing to do\n            return;\n        }\n        this.set([]);\n    }\n    set(newDecorations) {\n        try {\n            this._isChangingDecorations = true;\n            this._editor.changeDecorations((accessor) => {\n                this._decorationIds = accessor.deltaDecorations(this._decorationIds, newDecorations);\n            });\n        }\n        finally {\n            this._isChangingDecorations = false;\n        }\n    }\n}\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\nfunction getSquigglySVGData(color) {\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\nfunction getDotDotDotSVGData(color) {\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\nregisterThemingParticipant((theme, collector) => {\n    const errorBorderColor = theme.getColor(editorErrorBorder);\n    if (errorBorderColor) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* ClassName.EditorErrorDecoration */} { border-bottom: 4px double ${errorBorderColor}; }`);\n    }\n    const errorForeground = theme.getColor(editorErrorForeground);\n    if (errorForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* ClassName.EditorErrorDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\n    }\n    const errorBackground = theme.getColor(editorErrorBackground);\n    if (errorBackground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* ClassName.EditorErrorDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${errorBackground}; }`);\n    }\n    const warningBorderColor = theme.getColor(editorWarningBorder);\n    if (warningBorderColor) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* ClassName.EditorWarningDecoration */} { border-bottom: 4px double ${warningBorderColor}; }`);\n    }\n    const warningForeground = theme.getColor(editorWarningForeground);\n    if (warningForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* ClassName.EditorWarningDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\n    }\n    const warningBackground = theme.getColor(editorWarningBackground);\n    if (warningBackground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* ClassName.EditorWarningDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${warningBackground}; }`);\n    }\n    const infoBorderColor = theme.getColor(editorInfoBorder);\n    if (infoBorderColor) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* ClassName.EditorInfoDecoration */} { border-bottom: 4px double ${infoBorderColor}; }`);\n    }\n    const infoForeground = theme.getColor(editorInfoForeground);\n    if (infoForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* ClassName.EditorInfoDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\n    }\n    const infoBackground = theme.getColor(editorInfoBackground);\n    if (infoBackground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* ClassName.EditorInfoDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${infoBackground}; }`);\n    }\n    const hintBorderColor = theme.getColor(editorHintBorder);\n    if (hintBorderColor) {\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* ClassName.EditorHintDecoration */} { border-bottom: 2px dotted ${hintBorderColor}; }`);\n    }\n    const hintForeground = theme.getColor(editorHintForeground);\n    if (hintForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* ClassName.EditorHintDecoration */} { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\n    }\n    const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n    if (unnecessaryForeground) {\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */} { opacity: ${unnecessaryForeground.rgba.a}; }`);\n    }\n    const unnecessaryBorder = theme.getColor(editorUnnecessaryCodeBorder);\n    if (unnecessaryBorder) {\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-unnecessary\" /* ClassName.EditorUnnecessaryDecoration */} { border-bottom: 2px dashed ${unnecessaryBorder}; }`);\n    }\n    const deprecatedForeground = theme.getColor(editorForeground) || 'inherit';\n    collector.addRule(`.monaco-editor.showDeprecated .${\"squiggly-inline-deprecated\" /* ClassName.EditorDeprecatedInlineDecoration */} { text-decoration: line-through; text-decoration-color: ${deprecatedForeground}}`);\n});\n"],"mappings":"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"}]}