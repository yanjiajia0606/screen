{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/filters.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/filters.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS51bnNoaWZ0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZG90LWFsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnN0aWNreS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmNvZGUtcG9pbnQtYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIubWluLXNhZmUtaW50ZWdlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5tYXgtc2FmZS1pbnRlZ2VyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KaW1wb3J0IHsgTFJVQ2FjaGUgfSBmcm9tICcuL21hcC5qcyc7CmltcG9ydCAqIGFzIHN0cmluZ3MgZnJvbSAnLi9zdHJpbmdzLmpzJzsKLy8gQ29tYmluZWQgZmlsdGVycwovKioKICogQHJldHVybnMgQSBmaWx0ZXIgd2hpY2ggY29tYmluZXMgdGhlIHByb3ZpZGVkIHNldAogKiBvZiBmaWx0ZXJzIHdpdGggYW4gb3IuIFRoZSAqZmlyc3QqIGZpbHRlcnMgdGhhdAogKiBtYXRjaGVzIGRlZmluZWQgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcmV0dXJuZWQKICogZmlsdGVyLgogKi8KZXhwb3J0IGZ1bmN0aW9uIG9yKCkgewogIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmaWx0ZXIgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICBmaWx0ZXJbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgfQogIHJldHVybiBmdW5jdGlvbiAod29yZCwgd29yZFRvTWF0Y2hBZ2FpbnN0KSB7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZmlsdGVyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHZhciBtYXRjaCA9IGZpbHRlcltpXSh3b3JkLCB3b3JkVG9NYXRjaEFnYWluc3QpOwogICAgICBpZiAobWF0Y2gpIHsKICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH07Cn0KLy8gUHJlZml4CmV4cG9ydCB2YXIgbWF0Y2hlc1N0cmljdFByZWZpeCA9IF9tYXRjaGVzUHJlZml4LmJpbmQodW5kZWZpbmVkLCBmYWxzZSk7CmV4cG9ydCB2YXIgbWF0Y2hlc1ByZWZpeCA9IF9tYXRjaGVzUHJlZml4LmJpbmQodW5kZWZpbmVkLCB0cnVlKTsKZnVuY3Rpb24gX21hdGNoZXNQcmVmaXgoaWdub3JlQ2FzZSwgd29yZCwgd29yZFRvTWF0Y2hBZ2FpbnN0KSB7CiAgaWYgKCF3b3JkVG9NYXRjaEFnYWluc3QgfHwgd29yZFRvTWF0Y2hBZ2FpbnN0Lmxlbmd0aCA8IHdvcmQubGVuZ3RoKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgdmFyIG1hdGNoZXM7CiAgaWYgKGlnbm9yZUNhc2UpIHsKICAgIG1hdGNoZXMgPSBzdHJpbmdzLnN0YXJ0c1dpdGhJZ25vcmVDYXNlKHdvcmRUb01hdGNoQWdhaW5zdCwgd29yZCk7CiAgfSBlbHNlIHsKICAgIG1hdGNoZXMgPSB3b3JkVG9NYXRjaEFnYWluc3QuaW5kZXhPZih3b3JkKSA9PT0gMDsKICB9CiAgaWYgKCFtYXRjaGVzKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIHdvcmQubGVuZ3RoID4gMCA/IFt7CiAgICBzdGFydDogMCwKICAgIGVuZDogd29yZC5sZW5ndGgKICB9XSA6IFtdOwp9Ci8vIENvbnRpZ3VvdXMgU3Vic3RyaW5nCmV4cG9ydCBmdW5jdGlvbiBtYXRjaGVzQ29udGlndW91c1N1YlN0cmluZyh3b3JkLCB3b3JkVG9NYXRjaEFnYWluc3QpIHsKICB2YXIgaW5kZXggPSB3b3JkVG9NYXRjaEFnYWluc3QudG9Mb3dlckNhc2UoKS5pbmRleE9mKHdvcmQudG9Mb3dlckNhc2UoKSk7CiAgaWYgKGluZGV4ID09PSAtMSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIHJldHVybiBbewogICAgc3RhcnQ6IGluZGV4LAogICAgZW5kOiBpbmRleCArIHdvcmQubGVuZ3RoCiAgfV07Cn0KLy8gU3Vic3RyaW5nCmV4cG9ydCBmdW5jdGlvbiBtYXRjaGVzU3ViU3RyaW5nKHdvcmQsIHdvcmRUb01hdGNoQWdhaW5zdCkgewogIHJldHVybiBfbWF0Y2hlc1N1YlN0cmluZyh3b3JkLnRvTG93ZXJDYXNlKCksIHdvcmRUb01hdGNoQWdhaW5zdC50b0xvd2VyQ2FzZSgpLCAwLCAwKTsKfQpmdW5jdGlvbiBfbWF0Y2hlc1N1YlN0cmluZyh3b3JkLCB3b3JkVG9NYXRjaEFnYWluc3QsIGksIGopIHsKICBpZiAoaSA9PT0gd29yZC5sZW5ndGgpIHsKICAgIHJldHVybiBbXTsKICB9IGVsc2UgaWYgKGogPT09IHdvcmRUb01hdGNoQWdhaW5zdC5sZW5ndGgpIHsKICAgIHJldHVybiBudWxsOwogIH0gZWxzZSB7CiAgICBpZiAod29yZFtpXSA9PT0gd29yZFRvTWF0Y2hBZ2FpbnN0W2pdKSB7CiAgICAgIHZhciByZXN1bHQgPSBudWxsOwogICAgICBpZiAocmVzdWx0ID0gX21hdGNoZXNTdWJTdHJpbmcod29yZCwgd29yZFRvTWF0Y2hBZ2FpbnN0LCBpICsgMSwgaiArIDEpKSB7CiAgICAgICAgcmV0dXJuIGpvaW4oewogICAgICAgICAgc3RhcnQ6IGosCiAgICAgICAgICBlbmQ6IGogKyAxCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHJldHVybiBfbWF0Y2hlc1N1YlN0cmluZyh3b3JkLCB3b3JkVG9NYXRjaEFnYWluc3QsIGksIGogKyAxKTsKICB9Cn0KLy8gQ2FtZWxDYXNlCmZ1bmN0aW9uIGlzTG93ZXIoY29kZSkgewogIHJldHVybiA5NyAvKiBDaGFyQ29kZS5hICovIDw9IGNvZGUgJiYgY29kZSA8PSAxMjIgLyogQ2hhckNvZGUueiAqLzsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzVXBwZXIoY29kZSkgewogIHJldHVybiA2NSAvKiBDaGFyQ29kZS5BICovIDw9IGNvZGUgJiYgY29kZSA8PSA5MCAvKiBDaGFyQ29kZS5aICovOwp9CgpmdW5jdGlvbiBpc051bWJlcihjb2RlKSB7CiAgcmV0dXJuIDQ4IC8qIENoYXJDb2RlLkRpZ2l0MCAqLyA8PSBjb2RlICYmIGNvZGUgPD0gNTcgLyogQ2hhckNvZGUuRGlnaXQ5ICovOwp9CgpmdW5jdGlvbiBpc1doaXRlc3BhY2UoY29kZSkgewogIHJldHVybiBjb2RlID09PSAzMiAvKiBDaGFyQ29kZS5TcGFjZSAqLyB8fCBjb2RlID09PSA5IC8qIENoYXJDb2RlLlRhYiAqLyB8fCBjb2RlID09PSAxMCAvKiBDaGFyQ29kZS5MaW5lRmVlZCAqLyB8fCBjb2RlID09PSAxMyAvKiBDaGFyQ29kZS5DYXJyaWFnZVJldHVybiAqLzsKfQoKdmFyIHdvcmRTZXBhcmF0b3JzID0gbmV3IFNldCgpOwovLyBUaGVzZSBhcmUgY2hvc2VuIGFzIG5hdHVyYWwgd29yZCBzZXBhcmF0b3JzIGJhc2VkIG9uIHdyaXRlbiB0ZXh0LgovLyBJdCBpcyBhIHN1YnNldCBvZiB0aGUgd29yZCBzZXBhcmF0b3JzIHVzZWQgYnkgdGhlIG1vbmFjbyBlZGl0b3IuCicoKVtde308PmBcJyItLzs6LC4/IScuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24gKHMpIHsKICByZXR1cm4gd29yZFNlcGFyYXRvcnMuYWRkKHMuY2hhckNvZGVBdCgwKSk7Cn0pOwpmdW5jdGlvbiBpc1dvcmRTZXBhcmF0b3IoY29kZSkgewogIHJldHVybiBpc1doaXRlc3BhY2UoY29kZSkgfHwgd29yZFNlcGFyYXRvcnMuaGFzKGNvZGUpOwp9CmZ1bmN0aW9uIGNoYXJhY3RlcnNNYXRjaChjb2RlQSwgY29kZUIpIHsKICByZXR1cm4gY29kZUEgPT09IGNvZGVCIHx8IGlzV29yZFNlcGFyYXRvcihjb2RlQSkgJiYgaXNXb3JkU2VwYXJhdG9yKGNvZGVCKTsKfQpmdW5jdGlvbiBpc0FscGhhbnVtZXJpYyhjb2RlKSB7CiAgcmV0dXJuIGlzTG93ZXIoY29kZSkgfHwgaXNVcHBlcihjb2RlKSB8fCBpc051bWJlcihjb2RlKTsKfQpmdW5jdGlvbiBqb2luKGhlYWQsIHRhaWwpIHsKICBpZiAodGFpbC5sZW5ndGggPT09IDApIHsKICAgIHRhaWwgPSBbaGVhZF07CiAgfSBlbHNlIGlmIChoZWFkLmVuZCA9PT0gdGFpbFswXS5zdGFydCkgewogICAgdGFpbFswXS5zdGFydCA9IGhlYWQuc3RhcnQ7CiAgfSBlbHNlIHsKICAgIHRhaWwudW5zaGlmdChoZWFkKTsKICB9CiAgcmV0dXJuIHRhaWw7Cn0KZnVuY3Rpb24gbmV4dEFuY2hvcihjYW1lbENhc2VXb3JkLCBzdGFydCkgewogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGNhbWVsQ2FzZVdvcmQubGVuZ3RoOyBpKyspIHsKICAgIHZhciBjID0gY2FtZWxDYXNlV29yZC5jaGFyQ29kZUF0KGkpOwogICAgaWYgKGlzVXBwZXIoYykgfHwgaXNOdW1iZXIoYykgfHwgaSA+IDAgJiYgIWlzQWxwaGFudW1lcmljKGNhbWVsQ2FzZVdvcmQuY2hhckNvZGVBdChpIC0gMSkpKSB7CiAgICAgIHJldHVybiBpOwogICAgfQogIH0KICByZXR1cm4gY2FtZWxDYXNlV29yZC5sZW5ndGg7Cn0KZnVuY3Rpb24gX21hdGNoZXNDYW1lbENhc2Uod29yZCwgY2FtZWxDYXNlV29yZCwgaSwgaikgewogIGlmIChpID09PSB3b3JkLmxlbmd0aCkgewogICAgcmV0dXJuIFtdOwogIH0gZWxzZSBpZiAoaiA9PT0gY2FtZWxDYXNlV29yZC5sZW5ndGgpIHsKICAgIHJldHVybiBudWxsOwogIH0gZWxzZSBpZiAod29yZFtpXSAhPT0gY2FtZWxDYXNlV29yZFtqXS50b0xvd2VyQ2FzZSgpKSB7CiAgICByZXR1cm4gbnVsbDsKICB9IGVsc2UgewogICAgdmFyIHJlc3VsdCA9IG51bGw7CiAgICB2YXIgbmV4dFVwcGVySW5kZXggPSBqICsgMTsKICAgIHJlc3VsdCA9IF9tYXRjaGVzQ2FtZWxDYXNlKHdvcmQsIGNhbWVsQ2FzZVdvcmQsIGkgKyAxLCBqICsgMSk7CiAgICB3aGlsZSAoIXJlc3VsdCAmJiAobmV4dFVwcGVySW5kZXggPSBuZXh0QW5jaG9yKGNhbWVsQ2FzZVdvcmQsIG5leHRVcHBlckluZGV4KSkgPCBjYW1lbENhc2VXb3JkLmxlbmd0aCkgewogICAgICByZXN1bHQgPSBfbWF0Y2hlc0NhbWVsQ2FzZSh3b3JkLCBjYW1lbENhc2VXb3JkLCBpICsgMSwgbmV4dFVwcGVySW5kZXgpOwogICAgICBuZXh0VXBwZXJJbmRleCsrOwogICAgfQogICAgcmV0dXJuIHJlc3VsdCA9PT0gbnVsbCA/IG51bGwgOiBqb2luKHsKICAgICAgc3RhcnQ6IGosCiAgICAgIGVuZDogaiArIDEKICAgIH0sIHJlc3VsdCk7CiAgfQp9Ci8vIEhldXJpc3RpYyB0byBhdm9pZCBjb21wdXRpbmcgY2FtZWwgY2FzZSBtYXRjaGVyIGZvciB3b3JkcyB0aGF0IGRvbid0Ci8vIGxvb2sgbGlrZSBjYW1lbENhc2VXb3Jkcy4KZnVuY3Rpb24gYW5hbHl6ZUNhbWVsQ2FzZVdvcmQod29yZCkgewogIHZhciB1cHBlciA9IDAsCiAgICBsb3dlciA9IDAsCiAgICBhbHBoYSA9IDAsCiAgICBudW1lcmljID0gMCwKICAgIGNvZGUgPSAwOwogIGZvciAodmFyIGkgPSAwOyBpIDwgd29yZC5sZW5ndGg7IGkrKykgewogICAgY29kZSA9IHdvcmQuY2hhckNvZGVBdChpKTsKICAgIGlmIChpc1VwcGVyKGNvZGUpKSB7CiAgICAgIHVwcGVyKys7CiAgICB9CiAgICBpZiAoaXNMb3dlcihjb2RlKSkgewogICAgICBsb3dlcisrOwogICAgfQogICAgaWYgKGlzQWxwaGFudW1lcmljKGNvZGUpKSB7CiAgICAgIGFscGhhKys7CiAgICB9CiAgICBpZiAoaXNOdW1iZXIoY29kZSkpIHsKICAgICAgbnVtZXJpYysrOwogICAgfQogIH0KICB2YXIgdXBwZXJQZXJjZW50ID0gdXBwZXIgLyB3b3JkLmxlbmd0aDsKICB2YXIgbG93ZXJQZXJjZW50ID0gbG93ZXIgLyB3b3JkLmxlbmd0aDsKICB2YXIgYWxwaGFQZXJjZW50ID0gYWxwaGEgLyB3b3JkLmxlbmd0aDsKICB2YXIgbnVtZXJpY1BlcmNlbnQgPSBudW1lcmljIC8gd29yZC5sZW5ndGg7CiAgcmV0dXJuIHsKICAgIHVwcGVyUGVyY2VudDogdXBwZXJQZXJjZW50LAogICAgbG93ZXJQZXJjZW50OiBsb3dlclBlcmNlbnQsCiAgICBhbHBoYVBlcmNlbnQ6IGFscGhhUGVyY2VudCwKICAgIG51bWVyaWNQZXJjZW50OiBudW1lcmljUGVyY2VudAogIH07Cn0KZnVuY3Rpb24gaXNVcHBlckNhc2VXb3JkKGFuYWx5c2lzKSB7CiAgdmFyIHVwcGVyUGVyY2VudCA9IGFuYWx5c2lzLnVwcGVyUGVyY2VudCwKICAgIGxvd2VyUGVyY2VudCA9IGFuYWx5c2lzLmxvd2VyUGVyY2VudDsKICByZXR1cm4gbG93ZXJQZXJjZW50ID09PSAwICYmIHVwcGVyUGVyY2VudCA+IDAuNjsKfQpmdW5jdGlvbiBpc0NhbWVsQ2FzZVdvcmQoYW5hbHlzaXMpIHsKICB2YXIgdXBwZXJQZXJjZW50ID0gYW5hbHlzaXMudXBwZXJQZXJjZW50LAogICAgbG93ZXJQZXJjZW50ID0gYW5hbHlzaXMubG93ZXJQZXJjZW50LAogICAgYWxwaGFQZXJjZW50ID0gYW5hbHlzaXMuYWxwaGFQZXJjZW50LAogICAgbnVtZXJpY1BlcmNlbnQgPSBhbmFseXNpcy5udW1lcmljUGVyY2VudDsKICByZXR1cm4gbG93ZXJQZXJjZW50ID4gMC4yICYmIHVwcGVyUGVyY2VudCA8IDAuOCAmJiBhbHBoYVBlcmNlbnQgPiAwLjYgJiYgbnVtZXJpY1BlcmNlbnQgPCAwLjI7Cn0KLy8gSGV1cmlzdGljIHRvIGF2b2lkIGNvbXB1dGluZyBjYW1lbCBjYXNlIG1hdGNoZXIgZm9yIHdvcmRzIHRoYXQgZG9uJ3QKLy8gbG9vayBsaWtlIGNhbWVsIGNhc2UgcGF0dGVybnMuCmZ1bmN0aW9uIGlzQ2FtZWxDYXNlUGF0dGVybih3b3JkKSB7CiAgdmFyIHVwcGVyID0gMCwKICAgIGxvd2VyID0gMCwKICAgIGNvZGUgPSAwLAogICAgd2hpdGVzcGFjZSA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCB3b3JkLmxlbmd0aDsgaSsrKSB7CiAgICBjb2RlID0gd29yZC5jaGFyQ29kZUF0KGkpOwogICAgaWYgKGlzVXBwZXIoY29kZSkpIHsKICAgICAgdXBwZXIrKzsKICAgIH0KICAgIGlmIChpc0xvd2VyKGNvZGUpKSB7CiAgICAgIGxvd2VyKys7CiAgICB9CiAgICBpZiAoaXNXaGl0ZXNwYWNlKGNvZGUpKSB7CiAgICAgIHdoaXRlc3BhY2UrKzsKICAgIH0KICB9CiAgaWYgKCh1cHBlciA9PT0gMCB8fCBsb3dlciA9PT0gMCkgJiYgd2hpdGVzcGFjZSA9PT0gMCkgewogICAgcmV0dXJuIHdvcmQubGVuZ3RoIDw9IDMwOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdXBwZXIgPD0gNTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXNDYW1lbENhc2Uod29yZCwgY2FtZWxDYXNlV29yZCkgewogIGlmICghY2FtZWxDYXNlV29yZCkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGNhbWVsQ2FzZVdvcmQgPSBjYW1lbENhc2VXb3JkLnRyaW0oKTsKICBpZiAoY2FtZWxDYXNlV29yZC5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiBudWxsOwogIH0KICBpZiAoIWlzQ2FtZWxDYXNlUGF0dGVybih3b3JkKSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGlmIChjYW1lbENhc2VXb3JkLmxlbmd0aCA+IDYwKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgdmFyIGFuYWx5c2lzID0gYW5hbHl6ZUNhbWVsQ2FzZVdvcmQoY2FtZWxDYXNlV29yZCk7CiAgaWYgKCFpc0NhbWVsQ2FzZVdvcmQoYW5hbHlzaXMpKSB7CiAgICBpZiAoIWlzVXBwZXJDYXNlV29yZChhbmFseXNpcykpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBjYW1lbENhc2VXb3JkID0gY2FtZWxDYXNlV29yZC50b0xvd2VyQ2FzZSgpOwogIH0KICB2YXIgcmVzdWx0ID0gbnVsbDsKICB2YXIgaSA9IDA7CiAgd29yZCA9IHdvcmQudG9Mb3dlckNhc2UoKTsKICB3aGlsZSAoaSA8IGNhbWVsQ2FzZVdvcmQubGVuZ3RoICYmIChyZXN1bHQgPSBfbWF0Y2hlc0NhbWVsQ2FzZSh3b3JkLCBjYW1lbENhc2VXb3JkLCAwLCBpKSkgPT09IG51bGwpIHsKICAgIGkgPSBuZXh0QW5jaG9yKGNhbWVsQ2FzZVdvcmQsIGkgKyAxKTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfQovLyBNYXRjaGVzIGJlZ2lubmluZyBvZiB3b3JkcyBzdXBwb3J0aW5nIG5vbi1BU0NJSSBsYW5ndWFnZXMKLy8gSWYgYGNvbnRpZ3VvdXNgIGlzIHRydWUgdGhlbiBtYXRjaGVzIHdvcmQgd2l0aCBiZWdpbm5pbmdzIG9mIHRoZSB3b3JkcyBpbiB0aGUgdGFyZ2V0LiBFLmcuICJwdWwiIHdpbGwgbWF0Y2ggIkdpdDogUHVsbCIKLy8gT3RoZXJ3aXNlIGFsc28gbWF0Y2hlcyBzdWIgc3RyaW5nIG9mIHRoZSB3b3JkIHdpdGggYmVnaW5uaW5ncyBvZiB0aGUgd29yZHMgaW4gdGhlIHRhcmdldC4gRS5nLiAiZ3AiIG9yICJnIHAiIHdpbGwgbWF0Y2ggIkdpdDogUHVsbCIKLy8gVXNlZnVsIGluIGNhc2VzIHdoZXJlIHRoZSB0YXJnZXQgaXMgd29yZHMgKGUuZy4gY29tbWFuZCBsYWJlbHMpCmV4cG9ydCBmdW5jdGlvbiBtYXRjaGVzV29yZHMod29yZCwgdGFyZ2V0KSB7CiAgdmFyIGNvbnRpZ3VvdXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogIGlmICghdGFyZ2V0IHx8IHRhcmdldC5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiBudWxsOwogIH0KICB2YXIgcmVzdWx0ID0gbnVsbDsKICB2YXIgaSA9IDA7CiAgd29yZCA9IHdvcmQudG9Mb3dlckNhc2UoKTsKICB0YXJnZXQgPSB0YXJnZXQudG9Mb3dlckNhc2UoKTsKICB3aGlsZSAoaSA8IHRhcmdldC5sZW5ndGggJiYgKHJlc3VsdCA9IF9tYXRjaGVzV29yZHMod29yZCwgdGFyZ2V0LCAwLCBpLCBjb250aWd1b3VzKSkgPT09IG51bGwpIHsKICAgIGkgPSBuZXh0V29yZCh0YXJnZXQsIGkgKyAxKTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfQpmdW5jdGlvbiBfbWF0Y2hlc1dvcmRzKHdvcmQsIHRhcmdldCwgaSwgaiwgY29udGlndW91cykgewogIGlmIChpID09PSB3b3JkLmxlbmd0aCkgewogICAgcmV0dXJuIFtdOwogIH0gZWxzZSBpZiAoaiA9PT0gdGFyZ2V0Lmxlbmd0aCkgewogICAgcmV0dXJuIG51bGw7CiAgfSBlbHNlIGlmICghY2hhcmFjdGVyc01hdGNoKHdvcmQuY2hhckNvZGVBdChpKSwgdGFyZ2V0LmNoYXJDb2RlQXQoaikpKSB7CiAgICByZXR1cm4gbnVsbDsKICB9IGVsc2UgewogICAgdmFyIHJlc3VsdCA9IG51bGw7CiAgICB2YXIgbmV4dFdvcmRJbmRleCA9IGogKyAxOwogICAgcmVzdWx0ID0gX21hdGNoZXNXb3Jkcyh3b3JkLCB0YXJnZXQsIGkgKyAxLCBqICsgMSwgY29udGlndW91cyk7CiAgICBpZiAoIWNvbnRpZ3VvdXMpIHsKICAgICAgd2hpbGUgKCFyZXN1bHQgJiYgKG5leHRXb3JkSW5kZXggPSBuZXh0V29yZCh0YXJnZXQsIG5leHRXb3JkSW5kZXgpKSA8IHRhcmdldC5sZW5ndGgpIHsKICAgICAgICByZXN1bHQgPSBfbWF0Y2hlc1dvcmRzKHdvcmQsIHRhcmdldCwgaSArIDEsIG5leHRXb3JkSW5kZXgsIGNvbnRpZ3VvdXMpOwogICAgICAgIG5leHRXb3JkSW5kZXgrKzsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdCA9PT0gbnVsbCA/IG51bGwgOiBqb2luKHsKICAgICAgc3RhcnQ6IGosCiAgICAgIGVuZDogaiArIDEKICAgIH0sIHJlc3VsdCk7CiAgfQp9CmZ1bmN0aW9uIG5leHRXb3JkKHdvcmQsIHN0YXJ0KSB7CiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgd29yZC5sZW5ndGg7IGkrKykgewogICAgaWYgKGlzV29yZFNlcGFyYXRvcih3b3JkLmNoYXJDb2RlQXQoaSkpIHx8IGkgPiAwICYmIGlzV29yZFNlcGFyYXRvcih3b3JkLmNoYXJDb2RlQXQoaSAtIDEpKSkgewogICAgICByZXR1cm4gaTsKICAgIH0KICB9CiAgcmV0dXJuIHdvcmQubGVuZ3RoOwp9Ci8vIEZ1enp5CnZhciBmdXp6eUNvbnRpZ3VvdXNGaWx0ZXIgPSBvcihtYXRjaGVzUHJlZml4LCBtYXRjaGVzQ2FtZWxDYXNlLCBtYXRjaGVzQ29udGlndW91c1N1YlN0cmluZyk7CnZhciBmdXp6eVNlcGFyYXRlRmlsdGVyID0gb3IobWF0Y2hlc1ByZWZpeCwgbWF0Y2hlc0NhbWVsQ2FzZSwgbWF0Y2hlc1N1YlN0cmluZyk7CnZhciBmdXp6eVJlZ0V4cENhY2hlID0gbmV3IExSVUNhY2hlKDEwMDAwKTsgLy8gYm91bmRlZCB0byAxMDAwMCBlbGVtZW50cwpleHBvcnQgZnVuY3Rpb24gbWF0Y2hlc0Z1enp5KHdvcmQsIHdvcmRUb01hdGNoQWdhaW5zdCkgewogIHZhciBlbmFibGVTZXBhcmF0ZVN1YnN0cmluZ01hdGNoaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICBpZiAodHlwZW9mIHdvcmQgIT09ICdzdHJpbmcnIHx8IHR5cGVvZiB3b3JkVG9NYXRjaEFnYWluc3QgIT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gbnVsbDsgLy8gcmV0dXJuIGVhcmx5IGZvciBpbnZhbGlkIGlucHV0CiAgfQogIC8vIEZvcm0gUmVnRXhwIGZvciB3aWxkY2FyZCBtYXRjaGVzCiAgdmFyIHJlZ2V4cCA9IGZ1enp5UmVnRXhwQ2FjaGUuZ2V0KHdvcmQpOwogIGlmICghcmVnZXhwKSB7CiAgICByZWdleHAgPSBuZXcgUmVnRXhwKHN0cmluZ3MuY29udmVydFNpbXBsZTJSZWdFeHBQYXR0ZXJuKHdvcmQpLCAnaScpOwogICAgZnV6enlSZWdFeHBDYWNoZS5zZXQod29yZCwgcmVnZXhwKTsKICB9CiAgLy8gUmVnRXhwIEZpbHRlcgogIHZhciBtYXRjaCA9IHJlZ2V4cC5leGVjKHdvcmRUb01hdGNoQWdhaW5zdCk7CiAgaWYgKG1hdGNoKSB7CiAgICByZXR1cm4gW3sKICAgICAgc3RhcnQ6IG1hdGNoLmluZGV4LAogICAgICBlbmQ6IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoCiAgICB9XTsKICB9CiAgLy8gRGVmYXVsdCBGaWx0ZXIKICByZXR1cm4gZW5hYmxlU2VwYXJhdGVTdWJzdHJpbmdNYXRjaGluZyA/IGZ1enp5U2VwYXJhdGVGaWx0ZXIod29yZCwgd29yZFRvTWF0Y2hBZ2FpbnN0KSA6IGZ1enp5Q29udGlndW91c0ZpbHRlcih3b3JkLCB3b3JkVG9NYXRjaEFnYWluc3QpOwp9CmV4cG9ydCBmdW5jdGlvbiBhbnlTY29yZShwYXR0ZXJuLCBsb3dQYXR0ZXJuLCBwYXR0ZXJuUG9zLCB3b3JkLCBsb3dXb3JkLCB3b3JkUG9zKSB7CiAgdmFyIG1heCA9IE1hdGgubWluKDEzLCBwYXR0ZXJuLmxlbmd0aCk7CiAgZm9yICg7IHBhdHRlcm5Qb3MgPCBtYXg7IHBhdHRlcm5Qb3MrKykgewogICAgdmFyIHJlc3VsdCA9IGZ1enp5U2NvcmUocGF0dGVybiwgbG93UGF0dGVybiwgcGF0dGVyblBvcywgd29yZCwgbG93V29yZCwgd29yZFBvcywgewogICAgICBmaXJzdE1hdGNoQ2FuQmVXZWFrOiBmYWxzZSwKICAgICAgYm9vc3RGdWxsTWF0Y2g6IHRydWUKICAgIH0pOwogICAgaWYgKHJlc3VsdCkgewogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0KICByZXR1cm4gWzAsIHdvcmRQb3NdOwp9Ci8vI3JlZ2lvbiAtLS0gZnV6enlTY29yZSAtLS0KZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1hdGNoZXMoc2NvcmUpIHsKICBpZiAodHlwZW9mIHNjb3JlID09PSAndW5kZWZpbmVkJykgewogICAgcmV0dXJuIFtdOwogIH0KICB2YXIgcmVzID0gW107CiAgdmFyIHdvcmRQb3MgPSBzY29yZVsxXTsKICBmb3IgKHZhciBpID0gc2NvcmUubGVuZ3RoIC0gMTsgaSA+IDE7IGktLSkgewogICAgdmFyIHBvcyA9IHNjb3JlW2ldICsgd29yZFBvczsKICAgIHZhciBsYXN0ID0gcmVzW3Jlcy5sZW5ndGggLSAxXTsKICAgIGlmIChsYXN0ICYmIGxhc3QuZW5kID09PSBwb3MpIHsKICAgICAgbGFzdC5lbmQgPSBwb3MgKyAxOwogICAgfSBlbHNlIHsKICAgICAgcmVzLnB1c2goewogICAgICAgIHN0YXJ0OiBwb3MsCiAgICAgICAgZW5kOiBwb3MgKyAxCiAgICAgIH0pOwogICAgfQogIH0KICByZXR1cm4gcmVzOwp9CnZhciBfbWF4TGVuID0gMTI4OwpmdW5jdGlvbiBpbml0VGFibGUoKSB7CiAgdmFyIHRhYmxlID0gW107CiAgdmFyIHJvdyA9IFtdOwogIGZvciAodmFyIGkgPSAwOyBpIDw9IF9tYXhMZW47IGkrKykgewogICAgcm93W2ldID0gMDsKICB9CiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8PSBfbWF4TGVuOyBfaSsrKSB7CiAgICB0YWJsZS5wdXNoKHJvdy5zbGljZSgwKSk7CiAgfQogIHJldHVybiB0YWJsZTsKfQpmdW5jdGlvbiBpbml0QXJyKG1heExlbikgewogIHZhciByb3cgPSBbXTsKICBmb3IgKHZhciBpID0gMDsgaSA8PSBtYXhMZW47IGkrKykgewogICAgcm93W2ldID0gMDsKICB9CiAgcmV0dXJuIHJvdzsKfQp2YXIgX21pbldvcmRNYXRjaFBvcyA9IGluaXRBcnIoMiAqIF9tYXhMZW4pOyAvLyBtaW4gd29yZCBwb3NpdGlvbiBmb3IgYSBjZXJ0YWluIHBhdHRlcm4gcG9zaXRpb24KdmFyIF9tYXhXb3JkTWF0Y2hQb3MgPSBpbml0QXJyKDIgKiBfbWF4TGVuKTsgLy8gbWF4IHdvcmQgcG9zaXRpb24gZm9yIGEgY2VydGFpbiBwYXR0ZXJuIHBvc2l0aW9uCnZhciBfZGlhZyA9IGluaXRUYWJsZSgpOyAvLyB0aGUgbGVuZ3RoIG9mIGEgY29udGlndW91cyBkaWFnb25hbCBtYXRjaAp2YXIgX3RhYmxlID0gaW5pdFRhYmxlKCk7CnZhciBfYXJyb3dzID0gaW5pdFRhYmxlKCk7CnZhciBfZGVidWcgPSBmYWxzZTsKZnVuY3Rpb24gcHJpbnRUYWJsZSh0YWJsZSwgcGF0dGVybiwgcGF0dGVybkxlbiwgd29yZCwgd29yZExlbikgewogIGZ1bmN0aW9uIHBhZChzLCBuKSB7CiAgICB2YXIgcGFkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnICc7CiAgICB3aGlsZSAocy5sZW5ndGggPCBuKSB7CiAgICAgIHMgPSBwYWQgKyBzOwogICAgfQogICAgcmV0dXJuIHM7CiAgfQogIHZhciByZXQgPSAiIHwgICB8Ii5jb25jYXQod29yZC5zcGxpdCgnJykubWFwKGZ1bmN0aW9uIChjKSB7CiAgICByZXR1cm4gcGFkKGMsIDMpOwogIH0pLmpvaW4oJ3wnKSwgIlxuIik7CiAgZm9yICh2YXIgaSA9IDA7IGkgPD0gcGF0dGVybkxlbjsgaSsrKSB7CiAgICBpZiAoaSA9PT0gMCkgewogICAgICByZXQgKz0gJyB8JzsKICAgIH0gZWxzZSB7CiAgICAgIHJldCArPSAiIi5jb25jYXQocGF0dGVybltpIC0gMV0sICJ8Iik7CiAgICB9CiAgICByZXQgKz0gdGFibGVbaV0uc2xpY2UoMCwgd29yZExlbiArIDEpLm1hcChmdW5jdGlvbiAobikgewogICAgICByZXR1cm4gcGFkKG4udG9TdHJpbmcoKSwgMyk7CiAgICB9KS5qb2luKCd8JykgKyAnXG4nOwogIH0KICByZXR1cm4gcmV0Owp9CmZ1bmN0aW9uIHByaW50VGFibGVzKHBhdHRlcm4sIHBhdHRlcm5TdGFydCwgd29yZCwgd29yZFN0YXJ0KSB7CiAgcGF0dGVybiA9IHBhdHRlcm4uc3Vic3RyKHBhdHRlcm5TdGFydCk7CiAgd29yZCA9IHdvcmQuc3Vic3RyKHdvcmRTdGFydCk7CiAgY29uc29sZS5sb2cocHJpbnRUYWJsZShfdGFibGUsIHBhdHRlcm4sIHBhdHRlcm4ubGVuZ3RoLCB3b3JkLCB3b3JkLmxlbmd0aCkpOwogIGNvbnNvbGUubG9nKHByaW50VGFibGUoX2Fycm93cywgcGF0dGVybiwgcGF0dGVybi5sZW5ndGgsIHdvcmQsIHdvcmQubGVuZ3RoKSk7CiAgY29uc29sZS5sb2cocHJpbnRUYWJsZShfZGlhZywgcGF0dGVybiwgcGF0dGVybi5sZW5ndGgsIHdvcmQsIHdvcmQubGVuZ3RoKSk7Cn0KZnVuY3Rpb24gaXNTZXBhcmF0b3JBdFBvcyh2YWx1ZSwgaW5kZXgpIHsKICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHZhbHVlLmxlbmd0aCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgY29kZSA9IHZhbHVlLmNvZGVQb2ludEF0KGluZGV4KTsKICBzd2l0Y2ggKGNvZGUpIHsKICAgIGNhc2UgOTUgLyogQ2hhckNvZGUuVW5kZXJsaW5lICovOgogICAgY2FzZSA0NSAvKiBDaGFyQ29kZS5EYXNoICovOgogICAgY2FzZSA0NiAvKiBDaGFyQ29kZS5QZXJpb2QgKi86CiAgICBjYXNlIDMyIC8qIENoYXJDb2RlLlNwYWNlICovOgogICAgY2FzZSA0NyAvKiBDaGFyQ29kZS5TbGFzaCAqLzoKICAgIGNhc2UgOTIgLyogQ2hhckNvZGUuQmFja3NsYXNoICovOgogICAgY2FzZSAzOSAvKiBDaGFyQ29kZS5TaW5nbGVRdW90ZSAqLzoKICAgIGNhc2UgMzQgLyogQ2hhckNvZGUuRG91YmxlUXVvdGUgKi86CiAgICBjYXNlIDU4IC8qIENoYXJDb2RlLkNvbG9uICovOgogICAgY2FzZSAzNiAvKiBDaGFyQ29kZS5Eb2xsYXJTaWduICovOgogICAgY2FzZSA2MCAvKiBDaGFyQ29kZS5MZXNzVGhhbiAqLzoKICAgIGNhc2UgNjIgLyogQ2hhckNvZGUuR3JlYXRlclRoYW4gKi86CiAgICBjYXNlIDQwIC8qIENoYXJDb2RlLk9wZW5QYXJlbiAqLzoKICAgIGNhc2UgNDEgLyogQ2hhckNvZGUuQ2xvc2VQYXJlbiAqLzoKICAgIGNhc2UgOTEgLyogQ2hhckNvZGUuT3BlblNxdWFyZUJyYWNrZXQgKi86CiAgICBjYXNlIDkzIC8qIENoYXJDb2RlLkNsb3NlU3F1YXJlQnJhY2tldCAqLzoKICAgIGNhc2UgMTIzIC8qIENoYXJDb2RlLk9wZW5DdXJseUJyYWNlICovOgogICAgY2FzZSAxMjUgLyogQ2hhckNvZGUuQ2xvc2VDdXJseUJyYWNlICovOgogICAgICByZXR1cm4gdHJ1ZTsKICAgIGNhc2UgdW5kZWZpbmVkOgogICAgICByZXR1cm4gZmFsc2U7CiAgICBkZWZhdWx0OgogICAgICBpZiAoc3RyaW5ncy5pc0Vtb2ppSW1wcmVjaXNlKGNvZGUpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogIH0KfQpmdW5jdGlvbiBpc1doaXRlc3BhY2VBdFBvcyh2YWx1ZSwgaW5kZXgpIHsKICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHZhbHVlLmxlbmd0aCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgY29kZSA9IHZhbHVlLmNoYXJDb2RlQXQoaW5kZXgpOwogIHN3aXRjaCAoY29kZSkgewogICAgY2FzZSAzMiAvKiBDaGFyQ29kZS5TcGFjZSAqLzoKICAgIGNhc2UgOSAvKiBDaGFyQ29kZS5UYWIgKi86CiAgICAgIHJldHVybiB0cnVlOwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIGZhbHNlOwogIH0KfQpmdW5jdGlvbiBpc1VwcGVyQ2FzZUF0UG9zKHBvcywgd29yZCwgd29yZExvdykgewogIHJldHVybiB3b3JkW3Bvc10gIT09IHdvcmRMb3dbcG9zXTsKfQpleHBvcnQgZnVuY3Rpb24gaXNQYXR0ZXJuSW5Xb3JkKHBhdHRlcm5Mb3csIHBhdHRlcm5Qb3MsIHBhdHRlcm5MZW4sIHdvcmRMb3csIHdvcmRQb3MsIHdvcmRMZW4pIHsKICB2YXIgZmlsbE1pbldvcmRQb3NBcnIgPSBhcmd1bWVudHMubGVuZ3RoID4gNiAmJiBhcmd1bWVudHNbNl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s2XSA6IGZhbHNlOwogIHdoaWxlIChwYXR0ZXJuUG9zIDwgcGF0dGVybkxlbiAmJiB3b3JkUG9zIDwgd29yZExlbikgewogICAgaWYgKHBhdHRlcm5Mb3dbcGF0dGVyblBvc10gPT09IHdvcmRMb3dbd29yZFBvc10pIHsKICAgICAgaWYgKGZpbGxNaW5Xb3JkUG9zQXJyKSB7CiAgICAgICAgLy8gUmVtZW1iZXIgdGhlIG1pbiB3b3JkIHBvc2l0aW9uIGZvciBlYWNoIHBhdHRlcm4gcG9zaXRpb24KICAgICAgICBfbWluV29yZE1hdGNoUG9zW3BhdHRlcm5Qb3NdID0gd29yZFBvczsKICAgICAgfQogICAgICBwYXR0ZXJuUG9zICs9IDE7CiAgICB9CiAgICB3b3JkUG9zICs9IDE7CiAgfQogIHJldHVybiBwYXR0ZXJuUG9zID09PSBwYXR0ZXJuTGVuOyAvLyBwYXR0ZXJuIG11c3QgYmUgZXhoYXVzdGVkCn0KCmV4cG9ydCB2YXIgRnV6enlTY29yZTsKKGZ1bmN0aW9uIChGdXp6eVNjb3JlKSB7CiAgLyoqCiAgICogTm8gbWF0Y2hlcyBhbmQgdmFsdWUgYC0xMDBgCiAgICovCiAgRnV6enlTY29yZS5EZWZhdWx0ID0gWy0xMDAsIDBdOwogIGZ1bmN0aW9uIGlzRGVmYXVsdChzY29yZSkgewogICAgcmV0dXJuICFzY29yZSB8fCBzY29yZS5sZW5ndGggPT09IDIgJiYgc2NvcmVbMF0gPT09IC0xMDAgJiYgc2NvcmVbMV0gPT09IDA7CiAgfQogIEZ1enp5U2NvcmUuaXNEZWZhdWx0ID0gaXNEZWZhdWx0Owp9KShGdXp6eVNjb3JlIHx8IChGdXp6eVNjb3JlID0ge30pKTsKZXhwb3J0IHZhciBGdXp6eVNjb3JlT3B0aW9ucyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlQ2xhc3MoZnVuY3Rpb24gRnV6enlTY29yZU9wdGlvbnMoZmlyc3RNYXRjaENhbkJlV2VhaywgYm9vc3RGdWxsTWF0Y2gpIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRnV6enlTY29yZU9wdGlvbnMpOwogIHRoaXMuZmlyc3RNYXRjaENhbkJlV2VhayA9IGZpcnN0TWF0Y2hDYW5CZVdlYWs7CiAgdGhpcy5ib29zdEZ1bGxNYXRjaCA9IGJvb3N0RnVsbE1hdGNoOwp9KTsKRnV6enlTY29yZU9wdGlvbnMuZGVmYXVsdCA9IHsKICBib29zdEZ1bGxNYXRjaDogdHJ1ZSwKICBmaXJzdE1hdGNoQ2FuQmVXZWFrOiBmYWxzZQp9OwpleHBvcnQgZnVuY3Rpb24gZnV6enlTY29yZShwYXR0ZXJuLCBwYXR0ZXJuTG93LCBwYXR0ZXJuU3RhcnQsIHdvcmQsIHdvcmRMb3csIHdvcmRTdGFydCkgewogIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiBGdXp6eVNjb3JlT3B0aW9ucy5kZWZhdWx0OwogIHZhciBwYXR0ZXJuTGVuID0gcGF0dGVybi5sZW5ndGggPiBfbWF4TGVuID8gX21heExlbiA6IHBhdHRlcm4ubGVuZ3RoOwogIHZhciB3b3JkTGVuID0gd29yZC5sZW5ndGggPiBfbWF4TGVuID8gX21heExlbiA6IHdvcmQubGVuZ3RoOwogIGlmIChwYXR0ZXJuU3RhcnQgPj0gcGF0dGVybkxlbiB8fCB3b3JkU3RhcnQgPj0gd29yZExlbiB8fCBwYXR0ZXJuTGVuIC0gcGF0dGVyblN0YXJ0ID4gd29yZExlbiAtIHdvcmRTdGFydCkgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CiAgLy8gUnVuIGEgc2ltcGxlIGNoZWNrIGlmIHRoZSBjaGFyYWN0ZXJzIG9mIHBhdHRlcm4gb2NjdXIKICAvLyAoaW4gb3JkZXIpIGF0IGFsbCBpbiB3b3JkLiBJZiB0aGF0IGlzbid0IHRoZSBjYXNlIHdlCiAgLy8gc3RvcCBiZWNhdXNlIG5vIG1hdGNoIHdpbGwgYmUgcG9zc2libGUKICBpZiAoIWlzUGF0dGVybkluV29yZChwYXR0ZXJuTG93LCBwYXR0ZXJuU3RhcnQsIHBhdHRlcm5MZW4sIHdvcmRMb3csIHdvcmRTdGFydCwgd29yZExlbiwgdHJ1ZSkpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQogIC8vIEZpbmQgdGhlIG1heCBtYXRjaGluZyB3b3JkIHBvc2l0aW9uIGZvciBlYWNoIHBhdHRlcm4gcG9zaXRpb24KICAvLyBOT1RFOiB0aGUgbWluIG1hdGNoaW5nIHdvcmQgcG9zaXRpb24gd2FzIGZpbGxlZCBpbiBhYm92ZSwgaW4gdGhlIGBpc1BhdHRlcm5JbldvcmRgIGNhbGwKICBfZmlsbEluTWF4V29yZE1hdGNoUG9zKHBhdHRlcm5MZW4sIHdvcmRMZW4sIHBhdHRlcm5TdGFydCwgd29yZFN0YXJ0LCBwYXR0ZXJuTG93LCB3b3JkTG93KTsKICB2YXIgcm93ID0gMTsKICB2YXIgY29sdW1uID0gMTsKICB2YXIgcGF0dGVyblBvcyA9IHBhdHRlcm5TdGFydDsKICB2YXIgd29yZFBvcyA9IHdvcmRTdGFydDsKICB2YXIgaGFzU3Ryb25nRmlyc3RNYXRjaCA9IFtmYWxzZV07CiAgLy8gVGhlcmUgd2lsbCBiZSBhIG1hdGNoLCBmaWxsIGluIHRhYmxlcwogIGZvciAocm93ID0gMSwgcGF0dGVyblBvcyA9IHBhdHRlcm5TdGFydDsgcGF0dGVyblBvcyA8IHBhdHRlcm5MZW47IHJvdysrLCBwYXR0ZXJuUG9zKyspIHsKICAgIC8vIFJlZHVjZSBzZWFyY2ggc3BhY2UgdG8gcG9zc2libGUgbWF0Y2hpbmcgd29yZCBwb3NpdGlvbnMgYW5kIHRvIHBvc3NpYmxlIGFjY2VzcyBmcm9tIG5leHQgcm93CiAgICB2YXIgbWluV29yZE1hdGNoUG9zID0gX21pbldvcmRNYXRjaFBvc1twYXR0ZXJuUG9zXTsKICAgIHZhciBtYXhXb3JkTWF0Y2hQb3MgPSBfbWF4V29yZE1hdGNoUG9zW3BhdHRlcm5Qb3NdOwogICAgdmFyIG5leHRNYXhXb3JkTWF0Y2hQb3MgPSBwYXR0ZXJuUG9zICsgMSA8IHBhdHRlcm5MZW4gPyBfbWF4V29yZE1hdGNoUG9zW3BhdHRlcm5Qb3MgKyAxXSA6IHdvcmRMZW47CiAgICBmb3IgKGNvbHVtbiA9IG1pbldvcmRNYXRjaFBvcyAtIHdvcmRTdGFydCArIDEsIHdvcmRQb3MgPSBtaW5Xb3JkTWF0Y2hQb3M7IHdvcmRQb3MgPCBuZXh0TWF4V29yZE1hdGNoUG9zOyBjb2x1bW4rKywgd29yZFBvcysrKSB7CiAgICAgIHZhciBzY29yZSA9IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSOwogICAgICB2YXIgY2FuQ29tZURpYWcgPSBmYWxzZTsKICAgICAgaWYgKHdvcmRQb3MgPD0gbWF4V29yZE1hdGNoUG9zKSB7CiAgICAgICAgc2NvcmUgPSBfZG9TY29yZShwYXR0ZXJuLCBwYXR0ZXJuTG93LCBwYXR0ZXJuUG9zLCBwYXR0ZXJuU3RhcnQsIHdvcmQsIHdvcmRMb3csIHdvcmRQb3MsIHdvcmRMZW4sIHdvcmRTdGFydCwgX2RpYWdbcm93IC0gMV1bY29sdW1uIC0gMV0gPT09IDAsIGhhc1N0cm9uZ0ZpcnN0TWF0Y2gpOwogICAgICB9CiAgICAgIHZhciBkaWFnU2NvcmUgPSAwOwogICAgICBpZiAoc2NvcmUgIT09IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSB7CiAgICAgICAgY2FuQ29tZURpYWcgPSB0cnVlOwogICAgICAgIGRpYWdTY29yZSA9IHNjb3JlICsgX3RhYmxlW3JvdyAtIDFdW2NvbHVtbiAtIDFdOwogICAgICB9CiAgICAgIHZhciBjYW5Db21lTGVmdCA9IHdvcmRQb3MgPiBtaW5Xb3JkTWF0Y2hQb3M7CiAgICAgIHZhciBsZWZ0U2NvcmUgPSBjYW5Db21lTGVmdCA/IF90YWJsZVtyb3ddW2NvbHVtbiAtIDFdICsgKF9kaWFnW3Jvd11bY29sdW1uIC0gMV0gPiAwID8gLTUgOiAwKSA6IDA7IC8vIHBlbmFsdHkgZm9yIGEgZ2FwIHN0YXJ0CiAgICAgIHZhciBjYW5Db21lTGVmdExlZnQgPSB3b3JkUG9zID4gbWluV29yZE1hdGNoUG9zICsgMSAmJiBfZGlhZ1tyb3ddW2NvbHVtbiAtIDFdID4gMDsKICAgICAgdmFyIGxlZnRMZWZ0U2NvcmUgPSBjYW5Db21lTGVmdExlZnQgPyBfdGFibGVbcm93XVtjb2x1bW4gLSAyXSArIChfZGlhZ1tyb3ddW2NvbHVtbiAtIDJdID4gMCA/IC01IDogMCkgOiAwOyAvLyBwZW5hbHR5IGZvciBhIGdhcCBzdGFydAogICAgICBpZiAoY2FuQ29tZUxlZnRMZWZ0ICYmICghY2FuQ29tZUxlZnQgfHwgbGVmdExlZnRTY29yZSA+PSBsZWZ0U2NvcmUpICYmICghY2FuQ29tZURpYWcgfHwgbGVmdExlZnRTY29yZSA+PSBkaWFnU2NvcmUpKSB7CiAgICAgICAgLy8gYWx3YXlzIHByZWZlciBjaG9vc2luZyBsZWZ0IGxlZnQgdG8ganVtcCBvdmVyIGEgZGlhZ29uYWwgYmVjYXVzZSB0aGF0IG1lYW5zIGEgbWF0Y2ggaXMgZWFybGllciBpbiB0aGUgd29yZAogICAgICAgIF90YWJsZVtyb3ddW2NvbHVtbl0gPSBsZWZ0TGVmdFNjb3JlOwogICAgICAgIF9hcnJvd3Nbcm93XVtjb2x1bW5dID0gMyAvKiBBcnJvdy5MZWZ0TGVmdCAqLzsKICAgICAgICBfZGlhZ1tyb3ddW2NvbHVtbl0gPSAwOwogICAgICB9IGVsc2UgaWYgKGNhbkNvbWVMZWZ0ICYmICghY2FuQ29tZURpYWcgfHwgbGVmdFNjb3JlID49IGRpYWdTY29yZSkpIHsKICAgICAgICAvLyBhbHdheXMgcHJlZmVyIGNob29zaW5nIGxlZnQgc2luY2UgdGhhdCBtZWFucyBhIG1hdGNoIGlzIGVhcmxpZXIgaW4gdGhlIHdvcmQKICAgICAgICBfdGFibGVbcm93XVtjb2x1bW5dID0gbGVmdFNjb3JlOwogICAgICAgIF9hcnJvd3Nbcm93XVtjb2x1bW5dID0gMiAvKiBBcnJvdy5MZWZ0ICovOwogICAgICAgIF9kaWFnW3Jvd11bY29sdW1uXSA9IDA7CiAgICAgIH0gZWxzZSBpZiAoY2FuQ29tZURpYWcpIHsKICAgICAgICBfdGFibGVbcm93XVtjb2x1bW5dID0gZGlhZ1Njb3JlOwogICAgICAgIF9hcnJvd3Nbcm93XVtjb2x1bW5dID0gMSAvKiBBcnJvdy5EaWFnICovOwogICAgICAgIF9kaWFnW3Jvd11bY29sdW1uXSA9IF9kaWFnW3JvdyAtIDFdW2NvbHVtbiAtIDFdICsgMTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIm5vdCBwb3NzaWJsZSIpOwogICAgICB9CiAgICB9CiAgfQogIGlmIChfZGVidWcpIHsKICAgIHByaW50VGFibGVzKHBhdHRlcm4sIHBhdHRlcm5TdGFydCwgd29yZCwgd29yZFN0YXJ0KTsKICB9CiAgaWYgKCFoYXNTdHJvbmdGaXJzdE1hdGNoWzBdICYmICFvcHRpb25zLmZpcnN0TWF0Y2hDYW5CZVdlYWspIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQogIHJvdy0tOwogIGNvbHVtbi0tOwogIHZhciByZXN1bHQgPSBbX3RhYmxlW3Jvd11bY29sdW1uXSwgd29yZFN0YXJ0XTsKICB2YXIgYmFja3dhcmRzRGlhZ0xlbmd0aCA9IDA7CiAgdmFyIG1heE1hdGNoQ29sdW1uID0gMDsKICB3aGlsZSAocm93ID49IDEpIHsKICAgIC8vIEZpbmQgdGhlIGNvbHVtbiB3aGVyZSB3ZSBnbyBkaWFnb25hbGx5IHVwCiAgICB2YXIgZGlhZ0NvbHVtbiA9IGNvbHVtbjsKICAgIGRvIHsKICAgICAgdmFyIGFycm93ID0gX2Fycm93c1tyb3ddW2RpYWdDb2x1bW5dOwogICAgICBpZiAoYXJyb3cgPT09IDMgLyogQXJyb3cuTGVmdExlZnQgKi8pIHsKICAgICAgICBkaWFnQ29sdW1uID0gZGlhZ0NvbHVtbiAtIDI7CiAgICAgIH0gZWxzZSBpZiAoYXJyb3cgPT09IDIgLyogQXJyb3cuTGVmdCAqLykgewogICAgICAgIGRpYWdDb2x1bW4gPSBkaWFnQ29sdW1uIC0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBmb3VuZCB0aGUgZGlhZ29uYWwKICAgICAgICBicmVhazsKICAgICAgfQogICAgfSB3aGlsZSAoZGlhZ0NvbHVtbiA+PSAxKTsKICAgIC8vIE92ZXJ0dXJuIHRoZSAiZm9yd2FyZHMiIGRlY2lzaW9uIGlmIGtlZXBpbmcgdGhlICJiYWNrd2FyZHMiIGRpYWdvbmFsIHdvdWxkIGdpdmUgYSBiZXR0ZXIgbWF0Y2gKICAgIGlmIChiYWNrd2FyZHNEaWFnTGVuZ3RoID4gMSAvLyBvbmx5IGlmIHdlIHdvdWxkIGhhdmUgYSBjb250aWd1b3VzIG1hdGNoIG9mIDMgY2hhcmFjdGVycwogICAgJiYgcGF0dGVybkxvd1twYXR0ZXJuU3RhcnQgKyByb3cgLSAxXSA9PT0gd29yZExvd1t3b3JkU3RhcnQgKyBjb2x1bW4gLSAxXSAvLyBvbmx5IGlmIHdlIGNhbiBkbyBhIGNvbnRpZ3VvdXMgbWF0Y2ggZGlhZ29uYWxseQogICAgJiYgIWlzVXBwZXJDYXNlQXRQb3MoZGlhZ0NvbHVtbiArIHdvcmRTdGFydCAtIDEsIHdvcmQsIHdvcmRMb3cpIC8vIG9ubHkgaWYgdGhlIGZvcndhcmRzIGNob3NlIGRpYWdvbmFsIGlzIG5vdCBhbiB1cHBlcmNhc2UKICAgICYmIGJhY2t3YXJkc0RpYWdMZW5ndGggKyAxID4gX2RpYWdbcm93XVtkaWFnQ29sdW1uXSAvLyBvbmx5IGlmIG91ciBjb250aWd1b3VzIG1hdGNoIHdvdWxkIGJlIGxvbmdlciB0aGFuIHRoZSAiZm9yd2FyZHMiIGNvbnRpZ3VvdXMgbWF0Y2gKICAgICkgewogICAgICBkaWFnQ29sdW1uID0gY29sdW1uOwogICAgfQogICAgaWYgKGRpYWdDb2x1bW4gPT09IGNvbHVtbikgewogICAgICAvLyB0aGlzIGlzIGEgY29udGlndW91cyBtYXRjaAogICAgICBiYWNrd2FyZHNEaWFnTGVuZ3RoKys7CiAgICB9IGVsc2UgewogICAgICBiYWNrd2FyZHNEaWFnTGVuZ3RoID0gMTsKICAgIH0KICAgIGlmICghbWF4TWF0Y2hDb2x1bW4pIHsKICAgICAgLy8gcmVtZW1iZXIgdGhlIGxhc3QgbWF0Y2hlZCBjb2x1bW4KICAgICAgbWF4TWF0Y2hDb2x1bW4gPSBkaWFnQ29sdW1uOwogICAgfQogICAgcm93LS07CiAgICBjb2x1bW4gPSBkaWFnQ29sdW1uIC0gMTsKICAgIHJlc3VsdC5wdXNoKGNvbHVtbik7CiAgfQogIGlmICh3b3JkTGVuID09PSBwYXR0ZXJuTGVuICYmIG9wdGlvbnMuYm9vc3RGdWxsTWF0Y2gpIHsKICAgIC8vIHRoZSB3b3JkIG1hdGNoZXMgdGhlIHBhdHRlcm4gd2l0aCBhbGwgY2hhcmFjdGVycyEKICAgIC8vIGdpdmluZyB0aGUgc2NvcmUgYSB0b3RhbCBtYXRjaCBib29zdCAodG8gY29tZSB1cCBhaGVhZCBvdGhlciB3b3JkcykKICAgIHJlc3VsdFswXSArPSAyOwogIH0KICAvLyBBZGQgMSBwZW5hbHR5IGZvciBlYWNoIHNraXBwZWQgY2hhcmFjdGVyIGluIHRoZSB3b3JkCiAgdmFyIHNraXBwZWRDaGFyc0NvdW50ID0gbWF4TWF0Y2hDb2x1bW4gLSBwYXR0ZXJuTGVuOwogIHJlc3VsdFswXSAtPSBza2lwcGVkQ2hhcnNDb3VudDsKICByZXR1cm4gcmVzdWx0Owp9CmZ1bmN0aW9uIF9maWxsSW5NYXhXb3JkTWF0Y2hQb3MocGF0dGVybkxlbiwgd29yZExlbiwgcGF0dGVyblN0YXJ0LCB3b3JkU3RhcnQsIHBhdHRlcm5Mb3csIHdvcmRMb3cpIHsKICB2YXIgcGF0dGVyblBvcyA9IHBhdHRlcm5MZW4gLSAxOwogIHZhciB3b3JkUG9zID0gd29yZExlbiAtIDE7CiAgd2hpbGUgKHBhdHRlcm5Qb3MgPj0gcGF0dGVyblN0YXJ0ICYmIHdvcmRQb3MgPj0gd29yZFN0YXJ0KSB7CiAgICBpZiAocGF0dGVybkxvd1twYXR0ZXJuUG9zXSA9PT0gd29yZExvd1t3b3JkUG9zXSkgewogICAgICBfbWF4V29yZE1hdGNoUG9zW3BhdHRlcm5Qb3NdID0gd29yZFBvczsKICAgICAgcGF0dGVyblBvcy0tOwogICAgfQogICAgd29yZFBvcy0tOwogIH0KfQpmdW5jdGlvbiBfZG9TY29yZShwYXR0ZXJuLCBwYXR0ZXJuTG93LCBwYXR0ZXJuUG9zLCBwYXR0ZXJuU3RhcnQsIHdvcmQsIHdvcmRMb3csIHdvcmRQb3MsIHdvcmRMZW4sIHdvcmRTdGFydCwgbmV3TWF0Y2hTdGFydCwgb3V0Rmlyc3RNYXRjaFN0cm9uZykgewogIGlmIChwYXR0ZXJuTG93W3BhdHRlcm5Qb3NdICE9PSB3b3JkTG93W3dvcmRQb3NdKSB7CiAgICByZXR1cm4gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7CiAgfQogIHZhciBzY29yZSA9IDE7CiAgdmFyIGlzR2FwTG9jYXRpb24gPSBmYWxzZTsKICBpZiAod29yZFBvcyA9PT0gcGF0dGVyblBvcyAtIHBhdHRlcm5TdGFydCkgewogICAgLy8gY29tbW9uIHByZWZpeDogYGZvb2JhciA8LT4gZm9vYmF6YAogICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl4KICAgIHNjb3JlID0gcGF0dGVybltwYXR0ZXJuUG9zXSA9PT0gd29yZFt3b3JkUG9zXSA/IDcgOiA1OwogIH0gZWxzZSBpZiAoaXNVcHBlckNhc2VBdFBvcyh3b3JkUG9zLCB3b3JkLCB3b3JkTG93KSAmJiAod29yZFBvcyA9PT0gMCB8fCAhaXNVcHBlckNhc2VBdFBvcyh3b3JkUG9zIC0gMSwgd29yZCwgd29yZExvdykpKSB7CiAgICAvLyBoaXR0aW5nIHVwcGVyLWNhc2U6IGBmb28gPC0+IGZvck90aGVyc2AKICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl4gXgogICAgc2NvcmUgPSBwYXR0ZXJuW3BhdHRlcm5Qb3NdID09PSB3b3JkW3dvcmRQb3NdID8gNyA6IDU7CiAgICBpc0dhcExvY2F0aW9uID0gdHJ1ZTsKICB9IGVsc2UgaWYgKGlzU2VwYXJhdG9yQXRQb3Mod29yZExvdywgd29yZFBvcykgJiYgKHdvcmRQb3MgPT09IDAgfHwgIWlzU2VwYXJhdG9yQXRQb3Mod29yZExvdywgd29yZFBvcyAtIDEpKSkgewogICAgLy8gaGl0dGluZyBhIHNlcGFyYXRvcjogYC4gPC0+IGZvby5iYXJgCiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXgogICAgc2NvcmUgPSA1OwogIH0gZWxzZSBpZiAoaXNTZXBhcmF0b3JBdFBvcyh3b3JkTG93LCB3b3JkUG9zIC0gMSkgfHwgaXNXaGl0ZXNwYWNlQXRQb3Mod29yZExvdywgd29yZFBvcyAtIDEpKSB7CiAgICAvLyBwb3N0IHNlcGFyYXRvcjogYGZvbyA8LT4gYmFyX2Zvb2AKICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eCiAgICBzY29yZSA9IDU7CiAgICBpc0dhcExvY2F0aW9uID0gdHJ1ZTsKICB9CiAgaWYgKHNjb3JlID4gMSAmJiBwYXR0ZXJuUG9zID09PSBwYXR0ZXJuU3RhcnQpIHsKICAgIG91dEZpcnN0TWF0Y2hTdHJvbmdbMF0gPSB0cnVlOwogIH0KICBpZiAoIWlzR2FwTG9jYXRpb24pIHsKICAgIGlzR2FwTG9jYXRpb24gPSBpc1VwcGVyQ2FzZUF0UG9zKHdvcmRQb3MsIHdvcmQsIHdvcmRMb3cpIHx8IGlzU2VwYXJhdG9yQXRQb3Mod29yZExvdywgd29yZFBvcyAtIDEpIHx8IGlzV2hpdGVzcGFjZUF0UG9zKHdvcmRMb3csIHdvcmRQb3MgLSAxKTsKICB9CiAgLy8KICBpZiAocGF0dGVyblBvcyA9PT0gcGF0dGVyblN0YXJ0KSB7CiAgICAvLyBmaXJzdCBjaGFyYWN0ZXIgaW4gcGF0dGVybgogICAgaWYgKHdvcmRQb3MgPiB3b3JkU3RhcnQpIHsKICAgICAgLy8gdGhlIGZpcnN0IHBhdHRlcm4gY2hhcmFjdGVyIHdvdWxkIG1hdGNoIGEgd29yZCBjaGFyYWN0ZXIgdGhhdCBpcyBub3QgYXQgdGhlIHdvcmQgc3RhcnQKICAgICAgLy8gc28gaW50cm9kdWNlIGEgcGVuYWx0eSB0byBhY2NvdW50IGZvciB0aGUgZ2FwIHByZWNlZGluZyB0aGlzIG1hdGNoCiAgICAgIHNjb3JlIC09IGlzR2FwTG9jYXRpb24gPyAzIDogNTsKICAgIH0KICB9IGVsc2UgewogICAgaWYgKG5ld01hdGNoU3RhcnQpIHsKICAgICAgLy8gdGhpcyB3b3VsZCBiZSB0aGUgYmVnaW5uaW5nIG9mIGEgbmV3IG1hdGNoIChpLmUuIHRoZXJlIHdvdWxkIGJlIGEgZ2FwIGJlZm9yZSB0aGlzIGxvY2F0aW9uKQogICAgICBzY29yZSArPSBpc0dhcExvY2F0aW9uID8gMiA6IDA7CiAgICB9IGVsc2UgewogICAgICAvLyB0aGlzIGlzIHBhcnQgb2YgYSBjb250aWd1b3VzIG1hdGNoLCBzbyBnaXZlIGl0IGEgc2xpZ2h0IGJvbnVzLCBidXQgZG8gc28gb25seSBpZiBpdCB3b3VsZCBub3QgYmUgYSBwcmVmZXJyZWQgZ2FwIGxvY2F0aW9uCiAgICAgIHNjb3JlICs9IGlzR2FwTG9jYXRpb24gPyAwIDogMTsKICAgIH0KICB9CiAgaWYgKHdvcmRQb3MgKyAxID09PSB3b3JkTGVuKSB7CiAgICAvLyB3ZSBhbHdheXMgcGVuYWxpemUgZ2FwcywgYnV0IHRoaXMgZ2l2ZXMgdW5mYWlyIGFkdmFudGFnZXMgdG8gYSBtYXRjaCB0aGF0IHdvdWxkIG1hdGNoIHRoZSBsYXN0IGNoYXJhY3RlciBpbiB0aGUgd29yZAogICAgLy8gc28gcHJldGVuZCB0aGVyZSBpcyBhIGdhcCBhZnRlciB0aGUgbGFzdCBjaGFyYWN0ZXIgaW4gdGhlIHdvcmQgdG8gbm9ybWFsaXplIHRoaW5ncwogICAgc2NvcmUgLT0gaXNHYXBMb2NhdGlvbiA/IDMgOiA1OwogIH0KICByZXR1cm4gc2NvcmU7Cn0KLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiAtLS0gZ3JhY2VmdWwgLS0tCmV4cG9ydCBmdW5jdGlvbiBmdXp6eVNjb3JlR3JhY2VmdWxBZ2dyZXNzaXZlKHBhdHRlcm4sIGxvd1BhdHRlcm4sIHBhdHRlcm5Qb3MsIHdvcmQsIGxvd1dvcmQsIHdvcmRQb3MsIG9wdGlvbnMpIHsKICByZXR1cm4gZnV6enlTY29yZVdpdGhQZXJtdXRhdGlvbnMocGF0dGVybiwgbG93UGF0dGVybiwgcGF0dGVyblBvcywgd29yZCwgbG93V29yZCwgd29yZFBvcywgdHJ1ZSwgb3B0aW9ucyk7Cn0KZnVuY3Rpb24gZnV6enlTY29yZVdpdGhQZXJtdXRhdGlvbnMocGF0dGVybiwgbG93UGF0dGVybiwgcGF0dGVyblBvcywgd29yZCwgbG93V29yZCwgd29yZFBvcywgYWdncmVzc2l2ZSwgb3B0aW9ucykgewogIHZhciB0b3AgPSBmdXp6eVNjb3JlKHBhdHRlcm4sIGxvd1BhdHRlcm4sIHBhdHRlcm5Qb3MsIHdvcmQsIGxvd1dvcmQsIHdvcmRQb3MsIG9wdGlvbnMpOwogIGlmICh0b3AgJiYgIWFnZ3Jlc3NpdmUpIHsKICAgIC8vIHdoZW4gdXNpbmcgdGhlIG9yaWdpbmFsIHBhdHRlcm4geWllbGQgYSByZXN1bHQgd2VgCiAgICAvLyByZXR1cm4gaXQgdW5sZXNzIHdlIGFyZSBhZ2dyZXNzaXZlIGFuZCB0cnkgdG8gZmluZAogICAgLy8gYSBiZXR0ZXIgYWxpZ25tZW50LCBlLmcuIGBjbm9gIC0+IGBeY29ebnNeb2xlYCBvciBgXmNeb15uc29sZWAuCiAgICByZXR1cm4gdG9wOwogIH0KICBpZiAocGF0dGVybi5sZW5ndGggPj0gMykgewogICAgLy8gV2hlbiB0aGUgcGF0dGVybiBpcyBsb25nIGVub3VnaCB0aGVuIHRyeSBhIGZldyAobWF4IDcpCiAgICAvLyBwZXJtdXRhdGlvbnMgb2YgdGhlIHBhdHRlcm4gdG8gZmluZCBhIGJldHRlciBtYXRjaC4gVGhlCiAgICAvLyBwZXJtdXRhdGlvbnMgb25seSBzd2FwIG5laWdoYm91cmluZyBjaGFyYWN0ZXJzLCBlLmcKICAgIC8vIGBjbm9zb2AgYmVjb21lcyBgY29uc29gLCBgY25zb29gLCBgY25vb3NgLgogICAgdmFyIHRyaWVzID0gTWF0aC5taW4oNywgcGF0dGVybi5sZW5ndGggLSAxKTsKICAgIGZvciAodmFyIG1vdmluZ1BhdHRlcm5Qb3MgPSBwYXR0ZXJuUG9zICsgMTsgbW92aW5nUGF0dGVyblBvcyA8IHRyaWVzOyBtb3ZpbmdQYXR0ZXJuUG9zKyspIHsKICAgICAgdmFyIG5ld1BhdHRlcm4gPSBuZXh0VHlwb1Blcm11dGF0aW9uKHBhdHRlcm4sIG1vdmluZ1BhdHRlcm5Qb3MpOwogICAgICBpZiAobmV3UGF0dGVybikgewogICAgICAgIHZhciBjYW5kaWRhdGUgPSBmdXp6eVNjb3JlKG5ld1BhdHRlcm4sIG5ld1BhdHRlcm4udG9Mb3dlckNhc2UoKSwgcGF0dGVyblBvcywgd29yZCwgbG93V29yZCwgd29yZFBvcywgb3B0aW9ucyk7CiAgICAgICAgaWYgKGNhbmRpZGF0ZSkgewogICAgICAgICAgY2FuZGlkYXRlWzBdIC09IDM7IC8vIHBlcm11dGF0aW9uIHBlbmFsdHkKICAgICAgICAgIGlmICghdG9wIHx8IGNhbmRpZGF0ZVswXSA+IHRvcFswXSkgewogICAgICAgICAgICB0b3AgPSBjYW5kaWRhdGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIHJldHVybiB0b3A7Cn0KZnVuY3Rpb24gbmV4dFR5cG9QZXJtdXRhdGlvbihwYXR0ZXJuLCBwYXR0ZXJuUG9zKSB7CiAgaWYgKHBhdHRlcm5Qb3MgKyAxID49IHBhdHRlcm4ubGVuZ3RoKSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KICB2YXIgc3dhcDEgPSBwYXR0ZXJuW3BhdHRlcm5Qb3NdOwogIHZhciBzd2FwMiA9IHBhdHRlcm5bcGF0dGVyblBvcyArIDFdOwogIGlmIChzd2FwMSA9PT0gc3dhcDIpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQogIHJldHVybiBwYXR0ZXJuLnNsaWNlKDAsIHBhdHRlcm5Qb3MpICsgc3dhcDIgKyBzd2FwMSArIHBhdHRlcm4uc2xpY2UocGF0dGVyblBvcyArIDIpOwp9Ci8vI2VuZHJlZ2lvbg=="},{"version":3,"names":["LRUCache","strings","or","filter","word","wordToMatchAgainst","i","len","length","match","matchesStrictPrefix","_matchesPrefix","bind","undefined","matchesPrefix","ignoreCase","matches","startsWithIgnoreCase","indexOf","start","end","matchesContiguousSubString","index","toLowerCase","matchesSubString","_matchesSubString","j","result","join","isLower","code","isUpper","isNumber","isWhitespace","wordSeparators","Set","split","forEach","s","add","charCodeAt","isWordSeparator","has","charactersMatch","codeA","codeB","isAlphanumeric","head","tail","unshift","nextAnchor","camelCaseWord","c","_matchesCamelCase","nextUpperIndex","analyzeCamelCaseWord","upper","lower","alpha","numeric","upperPercent","lowerPercent","alphaPercent","numericPercent","isUpperCaseWord","analysis","isCamelCaseWord","isCamelCasePattern","whitespace","matchesCamelCase","trim","matchesWords","target","contiguous","_matchesWords","nextWord","nextWordIndex","fuzzyContiguousFilter","fuzzySeparateFilter","fuzzyRegExpCache","matchesFuzzy","enableSeparateSubstringMatching","regexp","get","RegExp","convertSimple2RegExpPattern","set","exec","anyScore","pattern","lowPattern","patternPos","lowWord","wordPos","max","Math","min","fuzzyScore","firstMatchCanBeWeak","boostFullMatch","createMatches","score","res","pos","last","push","_maxLen","initTable","table","row","slice","initArr","maxLen","_minWordMatchPos","_maxWordMatchPos","_diag","_table","_arrows","_debug","printTable","patternLen","wordLen","pad","n","ret","map","toString","printTables","patternStart","wordStart","substr","console","log","isSeparatorAtPos","value","codePointAt","isEmojiImprecise","isWhitespaceAtPos","isUpperCaseAtPos","wordLow","isPatternInWord","patternLow","fillMinWordPosArr","FuzzyScore","Default","isDefault","FuzzyScoreOptions","default","options","_fillInMaxWordMatchPos","column","hasStrongFirstMatch","minWordMatchPos","maxWordMatchPos","nextMaxWordMatchPos","Number","MIN_SAFE_INTEGER","canComeDiag","_doScore","diagScore","MAX_SAFE_INTEGER","canComeLeft","leftScore","canComeLeftLeft","leftLeftScore","Error","backwardsDiagLength","maxMatchColumn","diagColumn","arrow","skippedCharsCount","newMatchStart","outFirstMatchStrong","isGapLocation","fuzzyScoreGracefulAggressive","fuzzyScoreWithPermutations","aggressive","top","tries","movingPatternPos","newPattern","nextTypoPermutation","candidate","swap1","swap2"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/filters.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LRUCache } from './map.js';\nimport * as strings from './strings.js';\n// Combined filters\n/**\n * @returns A filter which combines the provided set\n * of filters with an or. The *first* filters that\n * matches defined the return value of the returned\n * filter.\n */\nexport function or(...filter) {\n    return function (word, wordToMatchAgainst) {\n        for (let i = 0, len = filter.length; i < len; i++) {\n            const match = filter[i](word, wordToMatchAgainst);\n            if (match) {\n                return match;\n            }\n        }\n        return null;\n    };\n}\n// Prefix\nexport const matchesStrictPrefix = _matchesPrefix.bind(undefined, false);\nexport const matchesPrefix = _matchesPrefix.bind(undefined, true);\nfunction _matchesPrefix(ignoreCase, word, wordToMatchAgainst) {\n    if (!wordToMatchAgainst || wordToMatchAgainst.length < word.length) {\n        return null;\n    }\n    let matches;\n    if (ignoreCase) {\n        matches = strings.startsWithIgnoreCase(wordToMatchAgainst, word);\n    }\n    else {\n        matches = wordToMatchAgainst.indexOf(word) === 0;\n    }\n    if (!matches) {\n        return null;\n    }\n    return word.length > 0 ? [{ start: 0, end: word.length }] : [];\n}\n// Contiguous Substring\nexport function matchesContiguousSubString(word, wordToMatchAgainst) {\n    const index = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\n    if (index === -1) {\n        return null;\n    }\n    return [{ start: index, end: index + word.length }];\n}\n// Substring\nexport function matchesSubString(word, wordToMatchAgainst) {\n    return _matchesSubString(word.toLowerCase(), wordToMatchAgainst.toLowerCase(), 0, 0);\n}\nfunction _matchesSubString(word, wordToMatchAgainst, i, j) {\n    if (i === word.length) {\n        return [];\n    }\n    else if (j === wordToMatchAgainst.length) {\n        return null;\n    }\n    else {\n        if (word[i] === wordToMatchAgainst[j]) {\n            let result = null;\n            if (result = _matchesSubString(word, wordToMatchAgainst, i + 1, j + 1)) {\n                return join({ start: j, end: j + 1 }, result);\n            }\n            return null;\n        }\n        return _matchesSubString(word, wordToMatchAgainst, i, j + 1);\n    }\n}\n// CamelCase\nfunction isLower(code) {\n    return 97 /* CharCode.a */ <= code && code <= 122 /* CharCode.z */;\n}\nexport function isUpper(code) {\n    return 65 /* CharCode.A */ <= code && code <= 90 /* CharCode.Z */;\n}\nfunction isNumber(code) {\n    return 48 /* CharCode.Digit0 */ <= code && code <= 57 /* CharCode.Digit9 */;\n}\nfunction isWhitespace(code) {\n    return (code === 32 /* CharCode.Space */\n        || code === 9 /* CharCode.Tab */\n        || code === 10 /* CharCode.LineFeed */\n        || code === 13 /* CharCode.CarriageReturn */);\n}\nconst wordSeparators = new Set();\n// These are chosen as natural word separators based on writen text.\n// It is a subset of the word separators used by the monaco editor.\n'()[]{}<>`\\'\"-/;:,.?!'\n    .split('')\n    .forEach(s => wordSeparators.add(s.charCodeAt(0)));\nfunction isWordSeparator(code) {\n    return isWhitespace(code) || wordSeparators.has(code);\n}\nfunction charactersMatch(codeA, codeB) {\n    return (codeA === codeB) || (isWordSeparator(codeA) && isWordSeparator(codeB));\n}\nfunction isAlphanumeric(code) {\n    return isLower(code) || isUpper(code) || isNumber(code);\n}\nfunction join(head, tail) {\n    if (tail.length === 0) {\n        tail = [head];\n    }\n    else if (head.end === tail[0].start) {\n        tail[0].start = head.start;\n    }\n    else {\n        tail.unshift(head);\n    }\n    return tail;\n}\nfunction nextAnchor(camelCaseWord, start) {\n    for (let i = start; i < camelCaseWord.length; i++) {\n        const c = camelCaseWord.charCodeAt(i);\n        if (isUpper(c) || isNumber(c) || (i > 0 && !isAlphanumeric(camelCaseWord.charCodeAt(i - 1)))) {\n            return i;\n        }\n    }\n    return camelCaseWord.length;\n}\nfunction _matchesCamelCase(word, camelCaseWord, i, j) {\n    if (i === word.length) {\n        return [];\n    }\n    else if (j === camelCaseWord.length) {\n        return null;\n    }\n    else if (word[i] !== camelCaseWord[j].toLowerCase()) {\n        return null;\n    }\n    else {\n        let result = null;\n        let nextUpperIndex = j + 1;\n        result = _matchesCamelCase(word, camelCaseWord, i + 1, j + 1);\n        while (!result && (nextUpperIndex = nextAnchor(camelCaseWord, nextUpperIndex)) < camelCaseWord.length) {\n            result = _matchesCamelCase(word, camelCaseWord, i + 1, nextUpperIndex);\n            nextUpperIndex++;\n        }\n        return result === null ? null : join({ start: j, end: j + 1 }, result);\n    }\n}\n// Heuristic to avoid computing camel case matcher for words that don't\n// look like camelCaseWords.\nfunction analyzeCamelCaseWord(word) {\n    let upper = 0, lower = 0, alpha = 0, numeric = 0, code = 0;\n    for (let i = 0; i < word.length; i++) {\n        code = word.charCodeAt(i);\n        if (isUpper(code)) {\n            upper++;\n        }\n        if (isLower(code)) {\n            lower++;\n        }\n        if (isAlphanumeric(code)) {\n            alpha++;\n        }\n        if (isNumber(code)) {\n            numeric++;\n        }\n    }\n    const upperPercent = upper / word.length;\n    const lowerPercent = lower / word.length;\n    const alphaPercent = alpha / word.length;\n    const numericPercent = numeric / word.length;\n    return { upperPercent, lowerPercent, alphaPercent, numericPercent };\n}\nfunction isUpperCaseWord(analysis) {\n    const { upperPercent, lowerPercent } = analysis;\n    return lowerPercent === 0 && upperPercent > 0.6;\n}\nfunction isCamelCaseWord(analysis) {\n    const { upperPercent, lowerPercent, alphaPercent, numericPercent } = analysis;\n    return lowerPercent > 0.2 && upperPercent < 0.8 && alphaPercent > 0.6 && numericPercent < 0.2;\n}\n// Heuristic to avoid computing camel case matcher for words that don't\n// look like camel case patterns.\nfunction isCamelCasePattern(word) {\n    let upper = 0, lower = 0, code = 0, whitespace = 0;\n    for (let i = 0; i < word.length; i++) {\n        code = word.charCodeAt(i);\n        if (isUpper(code)) {\n            upper++;\n        }\n        if (isLower(code)) {\n            lower++;\n        }\n        if (isWhitespace(code)) {\n            whitespace++;\n        }\n    }\n    if ((upper === 0 || lower === 0) && whitespace === 0) {\n        return word.length <= 30;\n    }\n    else {\n        return upper <= 5;\n    }\n}\nexport function matchesCamelCase(word, camelCaseWord) {\n    if (!camelCaseWord) {\n        return null;\n    }\n    camelCaseWord = camelCaseWord.trim();\n    if (camelCaseWord.length === 0) {\n        return null;\n    }\n    if (!isCamelCasePattern(word)) {\n        return null;\n    }\n    if (camelCaseWord.length > 60) {\n        return null;\n    }\n    const analysis = analyzeCamelCaseWord(camelCaseWord);\n    if (!isCamelCaseWord(analysis)) {\n        if (!isUpperCaseWord(analysis)) {\n            return null;\n        }\n        camelCaseWord = camelCaseWord.toLowerCase();\n    }\n    let result = null;\n    let i = 0;\n    word = word.toLowerCase();\n    while (i < camelCaseWord.length && (result = _matchesCamelCase(word, camelCaseWord, 0, i)) === null) {\n        i = nextAnchor(camelCaseWord, i + 1);\n    }\n    return result;\n}\n// Matches beginning of words supporting non-ASCII languages\n// If `contiguous` is true then matches word with beginnings of the words in the target. E.g. \"pul\" will match \"Git: Pull\"\n// Otherwise also matches sub string of the word with beginnings of the words in the target. E.g. \"gp\" or \"g p\" will match \"Git: Pull\"\n// Useful in cases where the target is words (e.g. command labels)\nexport function matchesWords(word, target, contiguous = false) {\n    if (!target || target.length === 0) {\n        return null;\n    }\n    let result = null;\n    let i = 0;\n    word = word.toLowerCase();\n    target = target.toLowerCase();\n    while (i < target.length && (result = _matchesWords(word, target, 0, i, contiguous)) === null) {\n        i = nextWord(target, i + 1);\n    }\n    return result;\n}\nfunction _matchesWords(word, target, i, j, contiguous) {\n    if (i === word.length) {\n        return [];\n    }\n    else if (j === target.length) {\n        return null;\n    }\n    else if (!charactersMatch(word.charCodeAt(i), target.charCodeAt(j))) {\n        return null;\n    }\n    else {\n        let result = null;\n        let nextWordIndex = j + 1;\n        result = _matchesWords(word, target, i + 1, j + 1, contiguous);\n        if (!contiguous) {\n            while (!result && (nextWordIndex = nextWord(target, nextWordIndex)) < target.length) {\n                result = _matchesWords(word, target, i + 1, nextWordIndex, contiguous);\n                nextWordIndex++;\n            }\n        }\n        return result === null ? null : join({ start: j, end: j + 1 }, result);\n    }\n}\nfunction nextWord(word, start) {\n    for (let i = start; i < word.length; i++) {\n        if (isWordSeparator(word.charCodeAt(i)) ||\n            (i > 0 && isWordSeparator(word.charCodeAt(i - 1)))) {\n            return i;\n        }\n    }\n    return word.length;\n}\n// Fuzzy\nconst fuzzyContiguousFilter = or(matchesPrefix, matchesCamelCase, matchesContiguousSubString);\nconst fuzzySeparateFilter = or(matchesPrefix, matchesCamelCase, matchesSubString);\nconst fuzzyRegExpCache = new LRUCache(10000); // bounded to 10000 elements\nexport function matchesFuzzy(word, wordToMatchAgainst, enableSeparateSubstringMatching = false) {\n    if (typeof word !== 'string' || typeof wordToMatchAgainst !== 'string') {\n        return null; // return early for invalid input\n    }\n    // Form RegExp for wildcard matches\n    let regexp = fuzzyRegExpCache.get(word);\n    if (!regexp) {\n        regexp = new RegExp(strings.convertSimple2RegExpPattern(word), 'i');\n        fuzzyRegExpCache.set(word, regexp);\n    }\n    // RegExp Filter\n    const match = regexp.exec(wordToMatchAgainst);\n    if (match) {\n        return [{ start: match.index, end: match.index + match[0].length }];\n    }\n    // Default Filter\n    return enableSeparateSubstringMatching ? fuzzySeparateFilter(word, wordToMatchAgainst) : fuzzyContiguousFilter(word, wordToMatchAgainst);\n}\nexport function anyScore(pattern, lowPattern, patternPos, word, lowWord, wordPos) {\n    const max = Math.min(13, pattern.length);\n    for (; patternPos < max; patternPos++) {\n        const result = fuzzyScore(pattern, lowPattern, patternPos, word, lowWord, wordPos, { firstMatchCanBeWeak: false, boostFullMatch: true });\n        if (result) {\n            return result;\n        }\n    }\n    return [0, wordPos];\n}\n//#region --- fuzzyScore ---\nexport function createMatches(score) {\n    if (typeof score === 'undefined') {\n        return [];\n    }\n    const res = [];\n    const wordPos = score[1];\n    for (let i = score.length - 1; i > 1; i--) {\n        const pos = score[i] + wordPos;\n        const last = res[res.length - 1];\n        if (last && last.end === pos) {\n            last.end = pos + 1;\n        }\n        else {\n            res.push({ start: pos, end: pos + 1 });\n        }\n    }\n    return res;\n}\nconst _maxLen = 128;\nfunction initTable() {\n    const table = [];\n    const row = [];\n    for (let i = 0; i <= _maxLen; i++) {\n        row[i] = 0;\n    }\n    for (let i = 0; i <= _maxLen; i++) {\n        table.push(row.slice(0));\n    }\n    return table;\n}\nfunction initArr(maxLen) {\n    const row = [];\n    for (let i = 0; i <= maxLen; i++) {\n        row[i] = 0;\n    }\n    return row;\n}\nconst _minWordMatchPos = initArr(2 * _maxLen); // min word position for a certain pattern position\nconst _maxWordMatchPos = initArr(2 * _maxLen); // max word position for a certain pattern position\nconst _diag = initTable(); // the length of a contiguous diagonal match\nconst _table = initTable();\nconst _arrows = initTable();\nconst _debug = false;\nfunction printTable(table, pattern, patternLen, word, wordLen) {\n    function pad(s, n, pad = ' ') {\n        while (s.length < n) {\n            s = pad + s;\n        }\n        return s;\n    }\n    let ret = ` |   |${word.split('').map(c => pad(c, 3)).join('|')}\\n`;\n    for (let i = 0; i <= patternLen; i++) {\n        if (i === 0) {\n            ret += ' |';\n        }\n        else {\n            ret += `${pattern[i - 1]}|`;\n        }\n        ret += table[i].slice(0, wordLen + 1).map(n => pad(n.toString(), 3)).join('|') + '\\n';\n    }\n    return ret;\n}\nfunction printTables(pattern, patternStart, word, wordStart) {\n    pattern = pattern.substr(patternStart);\n    word = word.substr(wordStart);\n    console.log(printTable(_table, pattern, pattern.length, word, word.length));\n    console.log(printTable(_arrows, pattern, pattern.length, word, word.length));\n    console.log(printTable(_diag, pattern, pattern.length, word, word.length));\n}\nfunction isSeparatorAtPos(value, index) {\n    if (index < 0 || index >= value.length) {\n        return false;\n    }\n    const code = value.codePointAt(index);\n    switch (code) {\n        case 95 /* CharCode.Underline */:\n        case 45 /* CharCode.Dash */:\n        case 46 /* CharCode.Period */:\n        case 32 /* CharCode.Space */:\n        case 47 /* CharCode.Slash */:\n        case 92 /* CharCode.Backslash */:\n        case 39 /* CharCode.SingleQuote */:\n        case 34 /* CharCode.DoubleQuote */:\n        case 58 /* CharCode.Colon */:\n        case 36 /* CharCode.DollarSign */:\n        case 60 /* CharCode.LessThan */:\n        case 62 /* CharCode.GreaterThan */:\n        case 40 /* CharCode.OpenParen */:\n        case 41 /* CharCode.CloseParen */:\n        case 91 /* CharCode.OpenSquareBracket */:\n        case 93 /* CharCode.CloseSquareBracket */:\n        case 123 /* CharCode.OpenCurlyBrace */:\n        case 125 /* CharCode.CloseCurlyBrace */:\n            return true;\n        case undefined:\n            return false;\n        default:\n            if (strings.isEmojiImprecise(code)) {\n                return true;\n            }\n            return false;\n    }\n}\nfunction isWhitespaceAtPos(value, index) {\n    if (index < 0 || index >= value.length) {\n        return false;\n    }\n    const code = value.charCodeAt(index);\n    switch (code) {\n        case 32 /* CharCode.Space */:\n        case 9 /* CharCode.Tab */:\n            return true;\n        default:\n            return false;\n    }\n}\nfunction isUpperCaseAtPos(pos, word, wordLow) {\n    return word[pos] !== wordLow[pos];\n}\nexport function isPatternInWord(patternLow, patternPos, patternLen, wordLow, wordPos, wordLen, fillMinWordPosArr = false) {\n    while (patternPos < patternLen && wordPos < wordLen) {\n        if (patternLow[patternPos] === wordLow[wordPos]) {\n            if (fillMinWordPosArr) {\n                // Remember the min word position for each pattern position\n                _minWordMatchPos[patternPos] = wordPos;\n            }\n            patternPos += 1;\n        }\n        wordPos += 1;\n    }\n    return patternPos === patternLen; // pattern must be exhausted\n}\nexport var FuzzyScore;\n(function (FuzzyScore) {\n    /**\n     * No matches and value `-100`\n     */\n    FuzzyScore.Default = ([-100, 0]);\n    function isDefault(score) {\n        return !score || (score.length === 2 && score[0] === -100 && score[1] === 0);\n    }\n    FuzzyScore.isDefault = isDefault;\n})(FuzzyScore || (FuzzyScore = {}));\nexport class FuzzyScoreOptions {\n    constructor(firstMatchCanBeWeak, boostFullMatch) {\n        this.firstMatchCanBeWeak = firstMatchCanBeWeak;\n        this.boostFullMatch = boostFullMatch;\n    }\n}\nFuzzyScoreOptions.default = { boostFullMatch: true, firstMatchCanBeWeak: false };\nexport function fuzzyScore(pattern, patternLow, patternStart, word, wordLow, wordStart, options = FuzzyScoreOptions.default) {\n    const patternLen = pattern.length > _maxLen ? _maxLen : pattern.length;\n    const wordLen = word.length > _maxLen ? _maxLen : word.length;\n    if (patternStart >= patternLen || wordStart >= wordLen || (patternLen - patternStart) > (wordLen - wordStart)) {\n        return undefined;\n    }\n    // Run a simple check if the characters of pattern occur\n    // (in order) at all in word. If that isn't the case we\n    // stop because no match will be possible\n    if (!isPatternInWord(patternLow, patternStart, patternLen, wordLow, wordStart, wordLen, true)) {\n        return undefined;\n    }\n    // Find the max matching word position for each pattern position\n    // NOTE: the min matching word position was filled in above, in the `isPatternInWord` call\n    _fillInMaxWordMatchPos(patternLen, wordLen, patternStart, wordStart, patternLow, wordLow);\n    let row = 1;\n    let column = 1;\n    let patternPos = patternStart;\n    let wordPos = wordStart;\n    const hasStrongFirstMatch = [false];\n    // There will be a match, fill in tables\n    for (row = 1, patternPos = patternStart; patternPos < patternLen; row++, patternPos++) {\n        // Reduce search space to possible matching word positions and to possible access from next row\n        const minWordMatchPos = _minWordMatchPos[patternPos];\n        const maxWordMatchPos = _maxWordMatchPos[patternPos];\n        const nextMaxWordMatchPos = (patternPos + 1 < patternLen ? _maxWordMatchPos[patternPos + 1] : wordLen);\n        for (column = minWordMatchPos - wordStart + 1, wordPos = minWordMatchPos; wordPos < nextMaxWordMatchPos; column++, wordPos++) {\n            let score = Number.MIN_SAFE_INTEGER;\n            let canComeDiag = false;\n            if (wordPos <= maxWordMatchPos) {\n                score = _doScore(pattern, patternLow, patternPos, patternStart, word, wordLow, wordPos, wordLen, wordStart, _diag[row - 1][column - 1] === 0, hasStrongFirstMatch);\n            }\n            let diagScore = 0;\n            if (score !== Number.MAX_SAFE_INTEGER) {\n                canComeDiag = true;\n                diagScore = score + _table[row - 1][column - 1];\n            }\n            const canComeLeft = wordPos > minWordMatchPos;\n            const leftScore = canComeLeft ? _table[row][column - 1] + (_diag[row][column - 1] > 0 ? -5 : 0) : 0; // penalty for a gap start\n            const canComeLeftLeft = wordPos > minWordMatchPos + 1 && _diag[row][column - 1] > 0;\n            const leftLeftScore = canComeLeftLeft ? _table[row][column - 2] + (_diag[row][column - 2] > 0 ? -5 : 0) : 0; // penalty for a gap start\n            if (canComeLeftLeft && (!canComeLeft || leftLeftScore >= leftScore) && (!canComeDiag || leftLeftScore >= diagScore)) {\n                // always prefer choosing left left to jump over a diagonal because that means a match is earlier in the word\n                _table[row][column] = leftLeftScore;\n                _arrows[row][column] = 3 /* Arrow.LeftLeft */;\n                _diag[row][column] = 0;\n            }\n            else if (canComeLeft && (!canComeDiag || leftScore >= diagScore)) {\n                // always prefer choosing left since that means a match is earlier in the word\n                _table[row][column] = leftScore;\n                _arrows[row][column] = 2 /* Arrow.Left */;\n                _diag[row][column] = 0;\n            }\n            else if (canComeDiag) {\n                _table[row][column] = diagScore;\n                _arrows[row][column] = 1 /* Arrow.Diag */;\n                _diag[row][column] = _diag[row - 1][column - 1] + 1;\n            }\n            else {\n                throw new Error(`not possible`);\n            }\n        }\n    }\n    if (_debug) {\n        printTables(pattern, patternStart, word, wordStart);\n    }\n    if (!hasStrongFirstMatch[0] && !options.firstMatchCanBeWeak) {\n        return undefined;\n    }\n    row--;\n    column--;\n    const result = [_table[row][column], wordStart];\n    let backwardsDiagLength = 0;\n    let maxMatchColumn = 0;\n    while (row >= 1) {\n        // Find the column where we go diagonally up\n        let diagColumn = column;\n        do {\n            const arrow = _arrows[row][diagColumn];\n            if (arrow === 3 /* Arrow.LeftLeft */) {\n                diagColumn = diagColumn - 2;\n            }\n            else if (arrow === 2 /* Arrow.Left */) {\n                diagColumn = diagColumn - 1;\n            }\n            else {\n                // found the diagonal\n                break;\n            }\n        } while (diagColumn >= 1);\n        // Overturn the \"forwards\" decision if keeping the \"backwards\" diagonal would give a better match\n        if (backwardsDiagLength > 1 // only if we would have a contiguous match of 3 characters\n            && patternLow[patternStart + row - 1] === wordLow[wordStart + column - 1] // only if we can do a contiguous match diagonally\n            && !isUpperCaseAtPos(diagColumn + wordStart - 1, word, wordLow) // only if the forwards chose diagonal is not an uppercase\n            && backwardsDiagLength + 1 > _diag[row][diagColumn] // only if our contiguous match would be longer than the \"forwards\" contiguous match\n        ) {\n            diagColumn = column;\n        }\n        if (diagColumn === column) {\n            // this is a contiguous match\n            backwardsDiagLength++;\n        }\n        else {\n            backwardsDiagLength = 1;\n        }\n        if (!maxMatchColumn) {\n            // remember the last matched column\n            maxMatchColumn = diagColumn;\n        }\n        row--;\n        column = diagColumn - 1;\n        result.push(column);\n    }\n    if (wordLen === patternLen && options.boostFullMatch) {\n        // the word matches the pattern with all characters!\n        // giving the score a total match boost (to come up ahead other words)\n        result[0] += 2;\n    }\n    // Add 1 penalty for each skipped character in the word\n    const skippedCharsCount = maxMatchColumn - patternLen;\n    result[0] -= skippedCharsCount;\n    return result;\n}\nfunction _fillInMaxWordMatchPos(patternLen, wordLen, patternStart, wordStart, patternLow, wordLow) {\n    let patternPos = patternLen - 1;\n    let wordPos = wordLen - 1;\n    while (patternPos >= patternStart && wordPos >= wordStart) {\n        if (patternLow[patternPos] === wordLow[wordPos]) {\n            _maxWordMatchPos[patternPos] = wordPos;\n            patternPos--;\n        }\n        wordPos--;\n    }\n}\nfunction _doScore(pattern, patternLow, patternPos, patternStart, word, wordLow, wordPos, wordLen, wordStart, newMatchStart, outFirstMatchStrong) {\n    if (patternLow[patternPos] !== wordLow[wordPos]) {\n        return Number.MIN_SAFE_INTEGER;\n    }\n    let score = 1;\n    let isGapLocation = false;\n    if (wordPos === (patternPos - patternStart)) {\n        // common prefix: `foobar <-> foobaz`\n        //                            ^^^^^\n        score = pattern[patternPos] === word[wordPos] ? 7 : 5;\n    }\n    else if (isUpperCaseAtPos(wordPos, word, wordLow) && (wordPos === 0 || !isUpperCaseAtPos(wordPos - 1, word, wordLow))) {\n        // hitting upper-case: `foo <-> forOthers`\n        //                              ^^ ^\n        score = pattern[patternPos] === word[wordPos] ? 7 : 5;\n        isGapLocation = true;\n    }\n    else if (isSeparatorAtPos(wordLow, wordPos) && (wordPos === 0 || !isSeparatorAtPos(wordLow, wordPos - 1))) {\n        // hitting a separator: `. <-> foo.bar`\n        //                                ^\n        score = 5;\n    }\n    else if (isSeparatorAtPos(wordLow, wordPos - 1) || isWhitespaceAtPos(wordLow, wordPos - 1)) {\n        // post separator: `foo <-> bar_foo`\n        //                              ^^^\n        score = 5;\n        isGapLocation = true;\n    }\n    if (score > 1 && patternPos === patternStart) {\n        outFirstMatchStrong[0] = true;\n    }\n    if (!isGapLocation) {\n        isGapLocation = isUpperCaseAtPos(wordPos, word, wordLow) || isSeparatorAtPos(wordLow, wordPos - 1) || isWhitespaceAtPos(wordLow, wordPos - 1);\n    }\n    //\n    if (patternPos === patternStart) { // first character in pattern\n        if (wordPos > wordStart) {\n            // the first pattern character would match a word character that is not at the word start\n            // so introduce a penalty to account for the gap preceding this match\n            score -= isGapLocation ? 3 : 5;\n        }\n    }\n    else {\n        if (newMatchStart) {\n            // this would be the beginning of a new match (i.e. there would be a gap before this location)\n            score += isGapLocation ? 2 : 0;\n        }\n        else {\n            // this is part of a contiguous match, so give it a slight bonus, but do so only if it would not be a preferred gap location\n            score += isGapLocation ? 0 : 1;\n        }\n    }\n    if (wordPos + 1 === wordLen) {\n        // we always penalize gaps, but this gives unfair advantages to a match that would match the last character in the word\n        // so pretend there is a gap after the last character in the word to normalize things\n        score -= isGapLocation ? 3 : 5;\n    }\n    return score;\n}\n//#endregion\n//#region --- graceful ---\nexport function fuzzyScoreGracefulAggressive(pattern, lowPattern, patternPos, word, lowWord, wordPos, options) {\n    return fuzzyScoreWithPermutations(pattern, lowPattern, patternPos, word, lowWord, wordPos, true, options);\n}\nfunction fuzzyScoreWithPermutations(pattern, lowPattern, patternPos, word, lowWord, wordPos, aggressive, options) {\n    let top = fuzzyScore(pattern, lowPattern, patternPos, word, lowWord, wordPos, options);\n    if (top && !aggressive) {\n        // when using the original pattern yield a result we`\n        // return it unless we are aggressive and try to find\n        // a better alignment, e.g. `cno` -> `^co^ns^ole` or `^c^o^nsole`.\n        return top;\n    }\n    if (pattern.length >= 3) {\n        // When the pattern is long enough then try a few (max 7)\n        // permutations of the pattern to find a better match. The\n        // permutations only swap neighbouring characters, e.g\n        // `cnoso` becomes `conso`, `cnsoo`, `cnoos`.\n        const tries = Math.min(7, pattern.length - 1);\n        for (let movingPatternPos = patternPos + 1; movingPatternPos < tries; movingPatternPos++) {\n            const newPattern = nextTypoPermutation(pattern, movingPatternPos);\n            if (newPattern) {\n                const candidate = fuzzyScore(newPattern, newPattern.toLowerCase(), patternPos, word, lowWord, wordPos, options);\n                if (candidate) {\n                    candidate[0] -= 3; // permutation penalty\n                    if (!top || candidate[0] > top[0]) {\n                        top = candidate;\n                    }\n                }\n            }\n        }\n    }\n    return top;\n}\nfunction nextTypoPermutation(pattern, patternPos) {\n    if (patternPos + 1 >= pattern.length) {\n        return undefined;\n    }\n    const swap1 = pattern[patternPos];\n    const swap2 = pattern[patternPos + 1];\n    if (swap1 === swap2) {\n        return undefined;\n    }\n    return pattern.slice(0, patternPos)\n        + swap2\n        + swap1\n        + pattern.slice(patternPos + 2);\n}\n//#endregion\n"],"mappings":"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"}]}