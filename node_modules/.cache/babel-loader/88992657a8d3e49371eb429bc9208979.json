{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KaW1wb3J0ICogYXMgbmxzIGZyb20gJy4uLy4uL25scy5qcyc7CmltcG9ydCB7IFVSSSB9IGZyb20gJy4uLy4uL2Jhc2UvY29tbW9uL3VyaS5qcyc7CmltcG9ydCB7IElDb2RlRWRpdG9yU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvY29kZUVkaXRvclNlcnZpY2UuanMnOwppbXBvcnQgeyBQb3NpdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9jb3JlL3Bvc2l0aW9uLmpzJzsKaW1wb3J0IHsgSU1vZGVsU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9zZXJ2aWNlcy9tb2RlbC5qcyc7CmltcG9ydCB7IElUZXh0TW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi4vY29tbW9uL3NlcnZpY2VzL3Jlc29sdmVyU2VydmljZS5qcyc7CmltcG9ydCB7IE1lbnVJZCwgTWVudVJlZ2lzdHJ5IH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vYWN0aW9ucy9jb21tb24vYWN0aW9ucy5qcyc7CmltcG9ydCB7IENvbW1hbmRzUmVnaXN0cnkgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9jb21tYW5kcy9jb21tb24vY29tbWFuZHMuanMnOwppbXBvcnQgeyBDb250ZXh0S2V5RXhwciwgSUNvbnRleHRLZXlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vY29udGV4dGtleS9jb21tb24vY29udGV4dGtleS5qcyc7CmltcG9ydCB7IElJbnN0YW50aWF0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2luc3RhbnRpYXRpb24vY29tbW9uL2luc3RhbnRpYXRpb24uanMnOwppbXBvcnQgeyBLZXliaW5kaW5nc1JlZ2lzdHJ5IH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0va2V5YmluZGluZy9jb21tb24va2V5YmluZGluZ3NSZWdpc3RyeS5qcyc7CmltcG9ydCB7IFJlZ2lzdHJ5IH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vcmVnaXN0cnkvY29tbW9uL3BsYXRmb3JtLmpzJzsKaW1wb3J0IHsgSVRlbGVtZXRyeVNlcnZpY2UgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS90ZWxlbWV0cnkvY29tbW9uL3RlbGVtZXRyeS5qcyc7CmltcG9ydCB7IHdpdGhOdWxsQXNVbmRlZmluZWQsIGFzc2VydFR5cGUgfSBmcm9tICcuLi8uLi9iYXNlL2NvbW1vbi90eXBlcy5qcyc7CmltcG9ydCB7IElMb2dTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vcGxhdGZvcm0vbG9nL2NvbW1vbi9sb2cuanMnOwpleHBvcnQgdmFyIENvbW1hbmQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENvbW1hbmQob3B0cykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbW1hbmQpOwogICAgdGhpcy5pZCA9IG9wdHMuaWQ7CiAgICB0aGlzLnByZWNvbmRpdGlvbiA9IG9wdHMucHJlY29uZGl0aW9uOwogICAgdGhpcy5fa2JPcHRzID0gb3B0cy5rYk9wdHM7CiAgICB0aGlzLl9tZW51T3B0cyA9IG9wdHMubWVudU9wdHM7CiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IG9wdHMuZGVzY3JpcHRpb247CiAgfQogIF9jcmVhdGVDbGFzcyhDb21tYW5kLCBbewogICAga2V5OiAicmVnaXN0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl9tZW51T3B0cykpIHsKICAgICAgICB0aGlzLl9tZW51T3B0cy5mb3JFYWNoKHRoaXMuX3JlZ2lzdGVyTWVudUl0ZW0sIHRoaXMpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuX21lbnVPcHRzKSB7CiAgICAgICAgdGhpcy5fcmVnaXN0ZXJNZW51SXRlbSh0aGlzLl9tZW51T3B0cyk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX2tiT3B0cykgewogICAgICAgIHZhciBrYk9wdHNBcnIgPSBBcnJheS5pc0FycmF5KHRoaXMuX2tiT3B0cykgPyB0aGlzLl9rYk9wdHMgOiBbdGhpcy5fa2JPcHRzXTsKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoa2JPcHRzQXJyKSwKICAgICAgICAgIF9zdGVwOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIga2JPcHRzID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIHZhciBrYldoZW4gPSBrYk9wdHMua2JFeHByOwogICAgICAgICAgICBpZiAodGhpcy5wcmVjb25kaXRpb24pIHsKICAgICAgICAgICAgICBpZiAoa2JXaGVuKSB7CiAgICAgICAgICAgICAgICBrYldoZW4gPSBDb250ZXh0S2V5RXhwci5hbmQoa2JXaGVuLCB0aGlzLnByZWNvbmRpdGlvbik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGtiV2hlbiA9IHRoaXMucHJlY29uZGl0aW9uOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZGVzYyA9IHsKICAgICAgICAgICAgICBpZDogdGhpcy5pZCwKICAgICAgICAgICAgICB3ZWlnaHQ6IGtiT3B0cy53ZWlnaHQsCiAgICAgICAgICAgICAgYXJnczoga2JPcHRzLmFyZ3MsCiAgICAgICAgICAgICAgd2hlbjoga2JXaGVuLAogICAgICAgICAgICAgIHByaW1hcnk6IGtiT3B0cy5wcmltYXJ5LAogICAgICAgICAgICAgIHNlY29uZGFyeToga2JPcHRzLnNlY29uZGFyeSwKICAgICAgICAgICAgICB3aW46IGtiT3B0cy53aW4sCiAgICAgICAgICAgICAgbGludXg6IGtiT3B0cy5saW51eCwKICAgICAgICAgICAgICBtYWM6IGtiT3B0cy5tYWMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgS2V5YmluZGluZ3NSZWdpc3RyeS5yZWdpc3RlcktleWJpbmRpbmdSdWxlKGRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgQ29tbWFuZHNSZWdpc3RyeS5yZWdpc3RlckNvbW1hbmQoewogICAgICAgIGlkOiB0aGlzLmlkLAogICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoYWNjZXNzb3IsIGFyZ3MpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5ydW5Db21tYW5kKGFjY2Vzc29yLCBhcmdzKTsKICAgICAgICB9LAogICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbgogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcmVnaXN0ZXJNZW51SXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlZ2lzdGVyTWVudUl0ZW0oaXRlbSkgewogICAgICBNZW51UmVnaXN0cnkuYXBwZW5kTWVudUl0ZW0oaXRlbS5tZW51SWQsIHsKICAgICAgICBncm91cDogaXRlbS5ncm91cCwKICAgICAgICBjb21tYW5kOiB7CiAgICAgICAgICBpZDogdGhpcy5pZCwKICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLAogICAgICAgICAgaWNvbjogaXRlbS5pY29uLAogICAgICAgICAgcHJlY29uZGl0aW9uOiB0aGlzLnByZWNvbmRpdGlvbgogICAgICAgIH0sCiAgICAgICAgd2hlbjogaXRlbS53aGVuLAogICAgICAgIG9yZGVyOiBpdGVtLm9yZGVyCiAgICAgIH0pOwogICAgfQogIH1dKTsKICByZXR1cm4gQ29tbWFuZDsKfSgpOwpleHBvcnQgdmFyIE11bHRpQ29tbWFuZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbW1hbmQpIHsKICBfaW5oZXJpdHMoTXVsdGlDb21tYW5kLCBfQ29tbWFuZCk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihNdWx0aUNvbW1hbmQpOwogIGZ1bmN0aW9uIE11bHRpQ29tbWFuZCgpIHsKICAgIHZhciBfdGhpczI7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTXVsdGlDb21tYW5kKTsKICAgIF90aGlzMiA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgX3RoaXMyLl9pbXBsZW1lbnRhdGlvbnMgPSBbXTsKICAgIHJldHVybiBfdGhpczI7CiAgfQogIC8qKgogICAqIEEgaGlnaGVyIHByaW9yaXR5IGdldHMgdG8gYmUgbG9va2VkIGF0IGZpcnN0CiAgICovCiAgX2NyZWF0ZUNsYXNzKE11bHRpQ29tbWFuZCwgW3sKICAgIGtleTogImFkZEltcGxlbWVudGF0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRJbXBsZW1lbnRhdGlvbihwcmlvcml0eSwgbmFtZSwgaW1wbGVtZW50YXRpb24pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMuX2ltcGxlbWVudGF0aW9ucy5wdXNoKHsKICAgICAgICBwcmlvcml0eTogcHJpb3JpdHksCiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBpbXBsZW1lbnRhdGlvbjogaW1wbGVtZW50YXRpb24KICAgICAgfSk7CiAgICAgIHRoaXMuX2ltcGxlbWVudGF0aW9ucy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGIucHJpb3JpdHkgLSBhLnByaW9yaXR5OwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXNwb3NlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpczMuX2ltcGxlbWVudGF0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoX3RoaXMzLl9pbXBsZW1lbnRhdGlvbnNbaV0uaW1wbGVtZW50YXRpb24gPT09IGltcGxlbWVudGF0aW9uKSB7CiAgICAgICAgICAgICAgX3RoaXMzLl9pbXBsZW1lbnRhdGlvbnMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJydW5Db21tYW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBydW5Db21tYW5kKGFjY2Vzc29yLCBhcmdzKSB7CiAgICAgIHZhciBsb2dTZXJ2aWNlID0gYWNjZXNzb3IuZ2V0KElMb2dTZXJ2aWNlKTsKICAgICAgbG9nU2VydmljZS50cmFjZSgiRXhlY3V0aW5nIENvbW1hbmQgJyIuY29uY2F0KHRoaXMuaWQsICInIHdoaWNoIGhhcyAiKS5jb25jYXQodGhpcy5faW1wbGVtZW50YXRpb25zLmxlbmd0aCwgIiBib3VuZC4iKSk7CiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5faW1wbGVtZW50YXRpb25zKSwKICAgICAgICBfc3RlcDI7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpbXBsID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgdmFyIHJlc3VsdCA9IGltcGwuaW1wbGVtZW50YXRpb24oYWNjZXNzb3IsIGFyZ3MpOwogICAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgICBsb2dTZXJ2aWNlLnRyYWNlKCJDb21tYW5kICciLmNvbmNhdCh0aGlzLmlkLCAiJyB3YXMgaGFuZGxlZCBieSAnIikuY29uY2F0KGltcGwubmFtZSwgIicuIikpOwogICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQogICAgICBsb2dTZXJ2aWNlLnRyYWNlKCJUaGUgQ29tbWFuZCAnIi5jb25jYXQodGhpcy5pZCwgIicgd2FzIG5vdCBoYW5kbGVkIGJ5IGFueSBpbXBsZW1lbnRhdGlvbi4iKSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBNdWx0aUNvbW1hbmQ7Cn0oQ29tbWFuZCk7Ci8vI2VuZHJlZ2lvbgovKioKICogQSBjb21tYW5kIHRoYXQgZGVsZWdhdGVzIHRvIGFub3RoZXIgY29tbWFuZCdzIGltcGxlbWVudGF0aW9uLgogKgogKiBUaGlzIGxldHMgZGlmZmVyZW50IGNvbW1hbmRzIGJlIHJlZ2lzdGVyZWQgYnV0IHNoYXJlIHRoZSBzYW1lIGltcGxlbWVudGF0aW9uCiAqLwpleHBvcnQgdmFyIFByb3h5Q29tbWFuZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbW1hbmQyKSB7CiAgX2luaGVyaXRzKFByb3h5Q29tbWFuZCwgX0NvbW1hbmQyKTsKICB2YXIgX3N1cGVyMiA9IF9jcmVhdGVTdXBlcihQcm94eUNvbW1hbmQpOwogIGZ1bmN0aW9uIFByb3h5Q29tbWFuZChjb21tYW5kLCBvcHRzKSB7CiAgICB2YXIgX3RoaXM0OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3h5Q29tbWFuZCk7CiAgICBfdGhpczQgPSBfc3VwZXIyLmNhbGwodGhpcywgb3B0cyk7CiAgICBfdGhpczQuY29tbWFuZCA9IGNvbW1hbmQ7CiAgICByZXR1cm4gX3RoaXM0OwogIH0KICBfY3JlYXRlQ2xhc3MoUHJveHlDb21tYW5kLCBbewogICAga2V5OiAicnVuQ29tbWFuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcnVuQ29tbWFuZChhY2Nlc3NvciwgYXJncykgewogICAgICByZXR1cm4gdGhpcy5jb21tYW5kLnJ1bkNvbW1hbmQoYWNjZXNzb3IsIGFyZ3MpOwogICAgfQogIH1dKTsKICByZXR1cm4gUHJveHlDb21tYW5kOwp9KENvbW1hbmQpOwpleHBvcnQgdmFyIEVkaXRvckNvbW1hbmQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21tYW5kMykgewogIF9pbmhlcml0cyhFZGl0b3JDb21tYW5kLCBfQ29tbWFuZDMpOwogIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyKEVkaXRvckNvbW1hbmQpOwogIGZ1bmN0aW9uIEVkaXRvckNvbW1hbmQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRpdG9yQ29tbWFuZCk7CiAgICByZXR1cm4gX3N1cGVyMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBfY3JlYXRlQ2xhc3MoRWRpdG9yQ29tbWFuZCwgW3sKICAgIGtleTogInJ1bkNvbW1hbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJ1bkNvbW1hbmQoYWNjZXNzb3IsIGFyZ3MpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHJldHVybiBFZGl0b3JDb21tYW5kLnJ1bkVkaXRvckNvbW1hbmQoYWNjZXNzb3IsIGFyZ3MsIHRoaXMucHJlY29uZGl0aW9uLCBmdW5jdGlvbiAoYWNjZXNzb3IsIGVkaXRvciwgYXJncykgewogICAgICAgIHJldHVybiBfdGhpczUucnVuRWRpdG9yQ29tbWFuZChhY2Nlc3NvciwgZWRpdG9yLCBhcmdzKTsKICAgICAgfSk7CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJiaW5kVG9Db250cmlidXRpb24iLAogICAgdmFsdWU6CiAgICAvKioKICAgICAqIENyZWF0ZSBhIGNvbW1hbmQgY2xhc3MgdGhhdCBpcyBib3VuZCB0byBhIGNlcnRhaW4gZWRpdG9yIGNvbnRyaWJ1dGlvbi4KICAgICAqLwogICAgZnVuY3Rpb24gYmluZFRvQ29udHJpYnV0aW9uKGNvbnRyb2xsZXJHZXR0ZXIpIHsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0VkaXRvckNvbW1hbmQpIHsKICAgICAgICBfaW5oZXJpdHMoRWRpdG9yQ29udHJvbGxlckNvbW1hbmRJbXBsLCBfRWRpdG9yQ29tbWFuZCk7CiAgICAgICAgdmFyIF9zdXBlcjQgPSBfY3JlYXRlU3VwZXIoRWRpdG9yQ29udHJvbGxlckNvbW1hbmRJbXBsKTsKICAgICAgICBmdW5jdGlvbiBFZGl0b3JDb250cm9sbGVyQ29tbWFuZEltcGwob3B0cykgewogICAgICAgICAgdmFyIF90aGlzNjsKICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFZGl0b3JDb250cm9sbGVyQ29tbWFuZEltcGwpOwogICAgICAgICAgX3RoaXM2ID0gX3N1cGVyNC5jYWxsKHRoaXMsIG9wdHMpOwogICAgICAgICAgX3RoaXM2Ll9jYWxsYmFjayA9IG9wdHMuaGFuZGxlcjsKICAgICAgICAgIHJldHVybiBfdGhpczY7CiAgICAgICAgfQogICAgICAgIF9jcmVhdGVDbGFzcyhFZGl0b3JDb250cm9sbGVyQ29tbWFuZEltcGwsIFt7CiAgICAgICAgICBrZXk6ICJydW5FZGl0b3JDb21tYW5kIiwKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBydW5FZGl0b3JDb21tYW5kKGFjY2Vzc29yLCBlZGl0b3IsIGFyZ3MpIHsKICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBjb250cm9sbGVyR2V0dGVyKGVkaXRvcik7CiAgICAgICAgICAgIGlmIChjb250cm9sbGVyKSB7CiAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2soY29udHJvbGxlciwgYXJncyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9XSk7CiAgICAgICAgcmV0dXJuIEVkaXRvckNvbnRyb2xsZXJDb21tYW5kSW1wbDsKICAgICAgfShFZGl0b3JDb21tYW5kKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJydW5FZGl0b3JDb21tYW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBydW5FZGl0b3JDb21tYW5kKGFjY2Vzc29yLCBhcmdzLCBwcmVjb25kaXRpb24sIHJ1bm5lcikgewogICAgICB2YXIgY29kZUVkaXRvclNlcnZpY2UgPSBhY2Nlc3Nvci5nZXQoSUNvZGVFZGl0b3JTZXJ2aWNlKTsKICAgICAgLy8gRmluZCB0aGUgZWRpdG9yIHdpdGggdGV4dCBmb2N1cyBvciBhY3RpdmUKICAgICAgdmFyIGVkaXRvciA9IGNvZGVFZGl0b3JTZXJ2aWNlLmdldEZvY3VzZWRDb2RlRWRpdG9yKCkgfHwgY29kZUVkaXRvclNlcnZpY2UuZ2V0QWN0aXZlQ29kZUVkaXRvcigpOwogICAgICBpZiAoIWVkaXRvcikgewogICAgICAgIC8vIHdlbGwsIGF0IGxlYXN0IHdlIHRyaWVkLi4uCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJldHVybiBlZGl0b3IuaW52b2tlV2l0aGluQ29udGV4dChmdW5jdGlvbiAoZWRpdG9yQWNjZXNzb3IpIHsKICAgICAgICB2YXIga2JTZXJ2aWNlID0gZWRpdG9yQWNjZXNzb3IuZ2V0KElDb250ZXh0S2V5U2VydmljZSk7CiAgICAgICAgaWYgKCFrYlNlcnZpY2UuY29udGV4dE1hdGNoZXNSdWxlcyh3aXRoTnVsbEFzVW5kZWZpbmVkKHByZWNvbmRpdGlvbikpKSB7CiAgICAgICAgICAvLyBwcmVjb25kaXRpb24gZG9lcyBub3QgaG9sZAogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcnVubmVyKGVkaXRvckFjY2Vzc29yLCBlZGl0b3IsIGFyZ3MpOwogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEVkaXRvckNvbW1hbmQ7Cn0oQ29tbWFuZCk7CmV4cG9ydCB2YXIgRWRpdG9yQWN0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRWRpdG9yQ29tbWFuZDIpIHsKICBfaW5oZXJpdHMoRWRpdG9yQWN0aW9uLCBfRWRpdG9yQ29tbWFuZDIpOwogIHZhciBfc3VwZXI1ID0gX2NyZWF0ZVN1cGVyKEVkaXRvckFjdGlvbik7CiAgZnVuY3Rpb24gRWRpdG9yQWN0aW9uKG9wdHMpIHsKICAgIHZhciBfdGhpczc7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRpdG9yQWN0aW9uKTsKICAgIF90aGlzNyA9IF9zdXBlcjUuY2FsbCh0aGlzLCBFZGl0b3JBY3Rpb24uY29udmVydE9wdGlvbnMob3B0cykpOwogICAgX3RoaXM3LmxhYmVsID0gb3B0cy5sYWJlbDsKICAgIF90aGlzNy5hbGlhcyA9IG9wdHMuYWxpYXM7CiAgICByZXR1cm4gX3RoaXM3OwogIH0KICBfY3JlYXRlQ2xhc3MoRWRpdG9yQWN0aW9uLCBbewogICAga2V5OiAicnVuRWRpdG9yQ29tbWFuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcnVuRWRpdG9yQ29tbWFuZChhY2Nlc3NvciwgZWRpdG9yLCBhcmdzKSB7CiAgICAgIHRoaXMucmVwb3J0VGVsZW1ldHJ5KGFjY2Vzc29yLCBlZGl0b3IpOwogICAgICByZXR1cm4gdGhpcy5ydW4oYWNjZXNzb3IsIGVkaXRvciwgYXJncyB8fCB7fSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVwb3J0VGVsZW1ldHJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXBvcnRUZWxlbWV0cnkoYWNjZXNzb3IsIGVkaXRvcikgewogICAgICBhY2Nlc3Nvci5nZXQoSVRlbGVtZXRyeVNlcnZpY2UpLnB1YmxpY0xvZzIoJ2VkaXRvckFjdGlvbkludm9rZWQnLCB7CiAgICAgICAgbmFtZTogdGhpcy5sYWJlbCwKICAgICAgICBpZDogdGhpcy5pZAogICAgICB9KTsKICAgIH0KICB9XSwgW3sKICAgIGtleTogImNvbnZlcnRPcHRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb252ZXJ0T3B0aW9ucyhvcHRzKSB7CiAgICAgIHZhciBtZW51T3B0czsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0cy5tZW51T3B0cykpIHsKICAgICAgICBtZW51T3B0cyA9IG9wdHMubWVudU9wdHM7CiAgICAgIH0gZWxzZSBpZiAob3B0cy5tZW51T3B0cykgewogICAgICAgIG1lbnVPcHRzID0gW29wdHMubWVudU9wdHNdOwogICAgICB9IGVsc2UgewogICAgICAgIG1lbnVPcHRzID0gW107CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd2l0aERlZmF1bHRzKGl0ZW0pIHsKICAgICAgICBpZiAoIWl0ZW0ubWVudUlkKSB7CiAgICAgICAgICBpdGVtLm1lbnVJZCA9IE1lbnVJZC5FZGl0b3JDb250ZXh0OwogICAgICAgIH0KICAgICAgICBpZiAoIWl0ZW0udGl0bGUpIHsKICAgICAgICAgIGl0ZW0udGl0bGUgPSBvcHRzLmxhYmVsOwogICAgICAgIH0KICAgICAgICBpdGVtLndoZW4gPSBDb250ZXh0S2V5RXhwci5hbmQob3B0cy5wcmVjb25kaXRpb24sIGl0ZW0ud2hlbik7CiAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgIH0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0cy5jb250ZXh0TWVudU9wdHMpKSB7CiAgICAgICAgdmFyIF9tZW51T3B0czsKICAgICAgICAoX21lbnVPcHRzID0gbWVudU9wdHMpLnB1c2guYXBwbHkoX21lbnVPcHRzLCBfdG9Db25zdW1hYmxlQXJyYXkob3B0cy5jb250ZXh0TWVudU9wdHMubWFwKHdpdGhEZWZhdWx0cykpKTsKICAgICAgfSBlbHNlIGlmIChvcHRzLmNvbnRleHRNZW51T3B0cykgewogICAgICAgIG1lbnVPcHRzLnB1c2god2l0aERlZmF1bHRzKG9wdHMuY29udGV4dE1lbnVPcHRzKSk7CiAgICAgIH0KICAgICAgb3B0cy5tZW51T3B0cyA9IG1lbnVPcHRzOwogICAgICByZXR1cm4gb3B0czsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEVkaXRvckFjdGlvbjsKfShFZGl0b3JDb21tYW5kKTsKZXhwb3J0IHZhciBNdWx0aUVkaXRvckFjdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0VkaXRvckFjdGlvbikgewogIF9pbmhlcml0cyhNdWx0aUVkaXRvckFjdGlvbiwgX0VkaXRvckFjdGlvbik7CiAgdmFyIF9zdXBlcjYgPSBfY3JlYXRlU3VwZXIoTXVsdGlFZGl0b3JBY3Rpb24pOwogIGZ1bmN0aW9uIE11bHRpRWRpdG9yQWN0aW9uKCkgewogICAgdmFyIF90aGlzODsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNdWx0aUVkaXRvckFjdGlvbik7CiAgICBfdGhpczggPSBfc3VwZXI2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpczguX2ltcGxlbWVudGF0aW9ucyA9IFtdOwogICAgcmV0dXJuIF90aGlzODsKICB9CiAgLyoqCiAgICogQSBoaWdoZXIgcHJpb3JpdHkgZ2V0cyB0byBiZSBsb29rZWQgYXQgZmlyc3QKICAgKi8KICBfY3JlYXRlQ2xhc3MoTXVsdGlFZGl0b3JBY3Rpb24sIFt7CiAgICBrZXk6ICJhZGRJbXBsZW1lbnRhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkSW1wbGVtZW50YXRpb24ocHJpb3JpdHksIGltcGxlbWVudGF0aW9uKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICB0aGlzLl9pbXBsZW1lbnRhdGlvbnMucHVzaChbcHJpb3JpdHksIGltcGxlbWVudGF0aW9uXSk7CiAgICAgIHRoaXMuX2ltcGxlbWVudGF0aW9ucy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGJbMF0gLSBhWzBdOwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXNwb3NlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpczkuX2ltcGxlbWVudGF0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoX3RoaXM5Ll9pbXBsZW1lbnRhdGlvbnNbaV1bMV0gPT09IGltcGxlbWVudGF0aW9uKSB7CiAgICAgICAgICAgICAgX3RoaXM5Ll9pbXBsZW1lbnRhdGlvbnMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJydW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJ1bihhY2Nlc3NvciwgZWRpdG9yLCBhcmdzKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5faW1wbGVtZW50YXRpb25zKSwKICAgICAgICBfc3RlcDM7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpbXBsID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgdmFyIHJlc3VsdCA9IGltcGxbMV0oYWNjZXNzb3IsIGVkaXRvciwgYXJncyk7CiAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnYm9vbGVhbicpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBNdWx0aUVkaXRvckFjdGlvbjsKfShFZGl0b3JBY3Rpb24pOwovLyNlbmRyZWdpb24KLy8gLS0tIFJlZ2lzdHJhdGlvbiBvZiBjb21tYW5kcyBhbmQgYWN0aW9ucwpleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJNb2RlbEFuZFBvc2l0aW9uQ29tbWFuZChpZCwgaGFuZGxlcikgewogIENvbW1hbmRzUmVnaXN0cnkucmVnaXN0ZXJDb21tYW5kKGlkLCBmdW5jdGlvbiAoYWNjZXNzb3IpIHsKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CiAgICB2YXIgaW5zdGFTZXJ2aWNlID0gYWNjZXNzb3IuZ2V0KElJbnN0YW50aWF0aW9uU2VydmljZSk7CiAgICB2YXIgcmVzb3VyY2UgPSBhcmdzWzBdLAogICAgICBwb3NpdGlvbiA9IGFyZ3NbMV07CiAgICBhc3NlcnRUeXBlKFVSSS5pc1VyaShyZXNvdXJjZSkpOwogICAgYXNzZXJ0VHlwZShQb3NpdGlvbi5pc0lQb3NpdGlvbihwb3NpdGlvbikpOwogICAgdmFyIG1vZGVsID0gYWNjZXNzb3IuZ2V0KElNb2RlbFNlcnZpY2UpLmdldE1vZGVsKHJlc291cmNlKTsKICAgIGlmIChtb2RlbCkgewogICAgICB2YXIgZWRpdG9yUG9zaXRpb24gPSBQb3NpdGlvbi5saWZ0KHBvc2l0aW9uKTsKICAgICAgcmV0dXJuIGluc3RhU2VydmljZS5pbnZva2VGdW5jdGlvbi5hcHBseShpbnN0YVNlcnZpY2UsIFtoYW5kbGVyLCBtb2RlbCwgZWRpdG9yUG9zaXRpb25dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYXJncy5zbGljZSgyKSkpKTsKICAgIH0KICAgIHJldHVybiBhY2Nlc3Nvci5nZXQoSVRleHRNb2RlbFNlcnZpY2UpLmNyZWF0ZU1vZGVsUmVmZXJlbmNlKHJlc291cmNlKS50aGVuKGZ1bmN0aW9uIChyZWZlcmVuY2UpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIHJlc3VsdCA9IGluc3RhU2VydmljZS5pbnZva2VGdW5jdGlvbihoYW5kbGVyLCByZWZlcmVuY2Uub2JqZWN0LnRleHRFZGl0b3JNb2RlbCwgUG9zaXRpb24ubGlmdChwb3NpdGlvbiksIGFyZ3Muc2xpY2UoMikpOwogICAgICAgICAgcmVzb2x2ZShyZXN1bHQpOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICByZWZlcmVuY2UuZGlzcG9zZSgpOwogICAgICB9KTsKICAgIH0pOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckVkaXRvckNvbW1hbmQoZWRpdG9yQ29tbWFuZCkgewogIEVkaXRvckNvbnRyaWJ1dGlvblJlZ2lzdHJ5LklOU1RBTkNFLnJlZ2lzdGVyRWRpdG9yQ29tbWFuZChlZGl0b3JDb21tYW5kKTsKICByZXR1cm4gZWRpdG9yQ29tbWFuZDsKfQpleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJFZGl0b3JBY3Rpb24oY3RvcikgewogIHZhciBhY3Rpb24gPSBuZXcgY3RvcigpOwogIEVkaXRvckNvbnRyaWJ1dGlvblJlZ2lzdHJ5LklOU1RBTkNFLnJlZ2lzdGVyRWRpdG9yQWN0aW9uKGFjdGlvbik7CiAgcmV0dXJuIGFjdGlvbjsKfQpleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJNdWx0aUVkaXRvckFjdGlvbihhY3Rpb24pIHsKICBFZGl0b3JDb250cmlidXRpb25SZWdpc3RyeS5JTlNUQU5DRS5yZWdpc3RlckVkaXRvckFjdGlvbihhY3Rpb24pOwogIHJldHVybiBhY3Rpb247Cn0KZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFudGlhdGVkRWRpdG9yQWN0aW9uKGVkaXRvckFjdGlvbikgewogIEVkaXRvckNvbnRyaWJ1dGlvblJlZ2lzdHJ5LklOU1RBTkNFLnJlZ2lzdGVyRWRpdG9yQWN0aW9uKGVkaXRvckFjdGlvbik7Cn0KZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyRWRpdG9yQ29udHJpYnV0aW9uKGlkLCBjdG9yKSB7CiAgRWRpdG9yQ29udHJpYnV0aW9uUmVnaXN0cnkuSU5TVEFOQ0UucmVnaXN0ZXJFZGl0b3JDb250cmlidXRpb24oaWQsIGN0b3IpOwp9CmV4cG9ydCB2YXIgRWRpdG9yRXh0ZW5zaW9uc1JlZ2lzdHJ5OwooZnVuY3Rpb24gKEVkaXRvckV4dGVuc2lvbnNSZWdpc3RyeSkgewogIGZ1bmN0aW9uIGdldEVkaXRvckNvbW1hbmQoY29tbWFuZElkKSB7CiAgICByZXR1cm4gRWRpdG9yQ29udHJpYnV0aW9uUmVnaXN0cnkuSU5TVEFOQ0UuZ2V0RWRpdG9yQ29tbWFuZChjb21tYW5kSWQpOwogIH0KICBFZGl0b3JFeHRlbnNpb25zUmVnaXN0cnkuZ2V0RWRpdG9yQ29tbWFuZCA9IGdldEVkaXRvckNvbW1hbmQ7CiAgZnVuY3Rpb24gZ2V0RWRpdG9yQWN0aW9ucygpIHsKICAgIHJldHVybiBFZGl0b3JDb250cmlidXRpb25SZWdpc3RyeS5JTlNUQU5DRS5nZXRFZGl0b3JBY3Rpb25zKCk7CiAgfQogIEVkaXRvckV4dGVuc2lvbnNSZWdpc3RyeS5nZXRFZGl0b3JBY3Rpb25zID0gZ2V0RWRpdG9yQWN0aW9uczsKICBmdW5jdGlvbiBnZXRFZGl0b3JDb250cmlidXRpb25zKCkgewogICAgcmV0dXJuIEVkaXRvckNvbnRyaWJ1dGlvblJlZ2lzdHJ5LklOU1RBTkNFLmdldEVkaXRvckNvbnRyaWJ1dGlvbnMoKTsKICB9CiAgRWRpdG9yRXh0ZW5zaW9uc1JlZ2lzdHJ5LmdldEVkaXRvckNvbnRyaWJ1dGlvbnMgPSBnZXRFZGl0b3JDb250cmlidXRpb25zOwogIGZ1bmN0aW9uIGdldFNvbWVFZGl0b3JDb250cmlidXRpb25zKGlkcykgewogICAgcmV0dXJuIEVkaXRvckNvbnRyaWJ1dGlvblJlZ2lzdHJ5LklOU1RBTkNFLmdldEVkaXRvckNvbnRyaWJ1dGlvbnMoKS5maWx0ZXIoZnVuY3Rpb24gKGMpIHsKICAgICAgcmV0dXJuIGlkcy5pbmRleE9mKGMuaWQpID49IDA7CiAgICB9KTsKICB9CiAgRWRpdG9yRXh0ZW5zaW9uc1JlZ2lzdHJ5LmdldFNvbWVFZGl0b3JDb250cmlidXRpb25zID0gZ2V0U29tZUVkaXRvckNvbnRyaWJ1dGlvbnM7CiAgZnVuY3Rpb24gZ2V0RGlmZkVkaXRvckNvbnRyaWJ1dGlvbnMoKSB7CiAgICByZXR1cm4gRWRpdG9yQ29udHJpYnV0aW9uUmVnaXN0cnkuSU5TVEFOQ0UuZ2V0RGlmZkVkaXRvckNvbnRyaWJ1dGlvbnMoKTsKICB9CiAgRWRpdG9yRXh0ZW5zaW9uc1JlZ2lzdHJ5LmdldERpZmZFZGl0b3JDb250cmlidXRpb25zID0gZ2V0RGlmZkVkaXRvckNvbnRyaWJ1dGlvbnM7Cn0pKEVkaXRvckV4dGVuc2lvbnNSZWdpc3RyeSB8fCAoRWRpdG9yRXh0ZW5zaW9uc1JlZ2lzdHJ5ID0ge30pKTsKLy8gRWRpdG9yIGV4dGVuc2lvbiBwb2ludHMKdmFyIEV4dGVuc2lvbnMgPSB7CiAgRWRpdG9yQ29tbW9uQ29udHJpYnV0aW9uczogJ2VkaXRvci5jb250cmlidXRpb25zJwp9Owp2YXIgRWRpdG9yQ29udHJpYnV0aW9uUmVnaXN0cnkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEVkaXRvckNvbnRyaWJ1dGlvblJlZ2lzdHJ5KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVkaXRvckNvbnRyaWJ1dGlvblJlZ2lzdHJ5KTsKICAgIHRoaXMuZWRpdG9yQ29udHJpYnV0aW9ucyA9IFtdOwogICAgdGhpcy5kaWZmRWRpdG9yQ29udHJpYnV0aW9ucyA9IFtdOwogICAgdGhpcy5lZGl0b3JBY3Rpb25zID0gW107CiAgICB0aGlzLmVkaXRvckNvbW1hbmRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICB9CiAgX2NyZWF0ZUNsYXNzKEVkaXRvckNvbnRyaWJ1dGlvblJlZ2lzdHJ5LCBbewogICAga2V5OiAicmVnaXN0ZXJFZGl0b3JDb250cmlidXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyRWRpdG9yQ29udHJpYnV0aW9uKGlkLCBjdG9yKSB7CiAgICAgIHRoaXMuZWRpdG9yQ29udHJpYnV0aW9ucy5wdXNoKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgY3RvcjogY3RvcgogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRFZGl0b3JDb250cmlidXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFZGl0b3JDb250cmlidXRpb25zKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0b3JDb250cmlidXRpb25zLnNsaWNlKDApOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERpZmZFZGl0b3JDb250cmlidXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREaWZmRWRpdG9yQ29udHJpYnV0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuZGlmZkVkaXRvckNvbnRyaWJ1dGlvbnMuc2xpY2UoMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0ZXJFZGl0b3JBY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyRWRpdG9yQWN0aW9uKGFjdGlvbikgewogICAgICBhY3Rpb24ucmVnaXN0ZXIoKTsKICAgICAgdGhpcy5lZGl0b3JBY3Rpb25zLnB1c2goYWN0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRFZGl0b3JBY3Rpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFZGl0b3JBY3Rpb25zKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0b3JBY3Rpb25zLnNsaWNlKDApOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZ2lzdGVyRWRpdG9yQ29tbWFuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJFZGl0b3JDb21tYW5kKGVkaXRvckNvbW1hbmQpIHsKICAgICAgZWRpdG9yQ29tbWFuZC5yZWdpc3RlcigpOwogICAgICB0aGlzLmVkaXRvckNvbW1hbmRzW2VkaXRvckNvbW1hbmQuaWRdID0gZWRpdG9yQ29tbWFuZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRFZGl0b3JDb21tYW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFZGl0b3JDb21tYW5kKGNvbW1hbmRJZCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0b3JDb21tYW5kc1tjb21tYW5kSWRdIHx8IG51bGw7CiAgICB9CiAgfV0pOwogIHJldHVybiBFZGl0b3JDb250cmlidXRpb25SZWdpc3RyeTsKfSgpOwpFZGl0b3JDb250cmlidXRpb25SZWdpc3RyeS5JTlNUQU5DRSA9IG5ldyBFZGl0b3JDb250cmlidXRpb25SZWdpc3RyeSgpOwpSZWdpc3RyeS5hZGQoRXh0ZW5zaW9ucy5FZGl0b3JDb21tb25Db250cmlidXRpb25zLCBFZGl0b3JDb250cmlidXRpb25SZWdpc3RyeS5JTlNUQU5DRSk7CmZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZChjb21tYW5kKSB7CiAgY29tbWFuZC5yZWdpc3RlcigpOwogIHJldHVybiBjb21tYW5kOwp9CmV4cG9ydCB2YXIgVW5kb0NvbW1hbmQgPSByZWdpc3RlckNvbW1hbmQobmV3IE11bHRpQ29tbWFuZCh7CiAgaWQ6ICd1bmRvJywKICBwcmVjb25kaXRpb246IHVuZGVmaW5lZCwKICBrYk9wdHM6IHsKICAgIHdlaWdodDogMCAvKiBLZXliaW5kaW5nV2VpZ2h0LkVkaXRvckNvcmUgKi8sCiAgICBwcmltYXJ5OiAyMDQ4IC8qIEtleU1vZC5DdHJsQ21kICovIHwgNTYgLyogS2V5Q29kZS5LZXlaICovCiAgfSwKCiAgbWVudU9wdHM6IFt7CiAgICBtZW51SWQ6IE1lbnVJZC5NZW51YmFyRWRpdE1lbnUsCiAgICBncm91cDogJzFfZG8nLAogICAgdGl0bGU6IG5scy5sb2NhbGl6ZSh7CiAgICAgIGtleTogJ21pVW5kbycsCiAgICAgIGNvbW1lbnQ6IFsnJiYgZGVub3RlcyBhIG1uZW1vbmljJ10KICAgIH0sICImJlVuZG8iKSwKICAgIG9yZGVyOiAxCiAgfSwgewogICAgbWVudUlkOiBNZW51SWQuQ29tbWFuZFBhbGV0dGUsCiAgICBncm91cDogJycsCiAgICB0aXRsZTogbmxzLmxvY2FsaXplKCd1bmRvJywgIlVuZG8iKSwKICAgIG9yZGVyOiAxCiAgfV0KfSkpOwpyZWdpc3RlckNvbW1hbmQobmV3IFByb3h5Q29tbWFuZChVbmRvQ29tbWFuZCwgewogIGlkOiAnZGVmYXVsdDp1bmRvJywKICBwcmVjb25kaXRpb246IHVuZGVmaW5lZAp9KSk7CmV4cG9ydCB2YXIgUmVkb0NvbW1hbmQgPSByZWdpc3RlckNvbW1hbmQobmV3IE11bHRpQ29tbWFuZCh7CiAgaWQ6ICdyZWRvJywKICBwcmVjb25kaXRpb246IHVuZGVmaW5lZCwKICBrYk9wdHM6IHsKICAgIHdlaWdodDogMCAvKiBLZXliaW5kaW5nV2VpZ2h0LkVkaXRvckNvcmUgKi8sCiAgICBwcmltYXJ5OiAyMDQ4IC8qIEtleU1vZC5DdHJsQ21kICovIHwgNTUgLyogS2V5Q29kZS5LZXlZICovLAogICAgc2Vjb25kYXJ5OiBbMjA0OCAvKiBLZXlNb2QuQ3RybENtZCAqLyB8IDEwMjQgLyogS2V5TW9kLlNoaWZ0ICovIHwgNTYgLyogS2V5Q29kZS5LZXlaICovXSwKICAgIG1hYzogewogICAgICBwcmltYXJ5OiAyMDQ4IC8qIEtleU1vZC5DdHJsQ21kICovIHwgMTAyNCAvKiBLZXlNb2QuU2hpZnQgKi8gfCA1NiAvKiBLZXlDb2RlLktleVogKi8KICAgIH0KICB9LAoKICBtZW51T3B0czogW3sKICAgIG1lbnVJZDogTWVudUlkLk1lbnViYXJFZGl0TWVudSwKICAgIGdyb3VwOiAnMV9kbycsCiAgICB0aXRsZTogbmxzLmxvY2FsaXplKHsKICAgICAga2V5OiAnbWlSZWRvJywKICAgICAgY29tbWVudDogWycmJiBkZW5vdGVzIGEgbW5lbW9uaWMnXQogICAgfSwgIiYmUmVkbyIpLAogICAgb3JkZXI6IDIKICB9LCB7CiAgICBtZW51SWQ6IE1lbnVJZC5Db21tYW5kUGFsZXR0ZSwKICAgIGdyb3VwOiAnJywKICAgIHRpdGxlOiBubHMubG9jYWxpemUoJ3JlZG8nLCAiUmVkbyIpLAogICAgb3JkZXI6IDEKICB9XQp9KSk7CnJlZ2lzdGVyQ29tbWFuZChuZXcgUHJveHlDb21tYW5kKFJlZG9Db21tYW5kLCB7CiAgaWQ6ICdkZWZhdWx0OnJlZG8nLAogIHByZWNvbmRpdGlvbjogdW5kZWZpbmVkCn0pKTsKZXhwb3J0IHZhciBTZWxlY3RBbGxDb21tYW5kID0gcmVnaXN0ZXJDb21tYW5kKG5ldyBNdWx0aUNvbW1hbmQoewogIGlkOiAnZWRpdG9yLmFjdGlvbi5zZWxlY3RBbGwnLAogIHByZWNvbmRpdGlvbjogdW5kZWZpbmVkLAogIGtiT3B0czogewogICAgd2VpZ2h0OiAwIC8qIEtleWJpbmRpbmdXZWlnaHQuRWRpdG9yQ29yZSAqLywKICAgIGtiRXhwcjogbnVsbCwKICAgIHByaW1hcnk6IDIwNDggLyogS2V5TW9kLkN0cmxDbWQgKi8gfCAzMSAvKiBLZXlDb2RlLktleUEgKi8KICB9LAoKICBtZW51T3B0czogW3sKICAgIG1lbnVJZDogTWVudUlkLk1lbnViYXJTZWxlY3Rpb25NZW51LAogICAgZ3JvdXA6ICcxX2Jhc2ljJywKICAgIHRpdGxlOiBubHMubG9jYWxpemUoewogICAgICBrZXk6ICdtaVNlbGVjdEFsbCcsCiAgICAgIGNvbW1lbnQ6IFsnJiYgZGVub3RlcyBhIG1uZW1vbmljJ10KICAgIH0sICImJlNlbGVjdCBBbGwiKSwKICAgIG9yZGVyOiAxCiAgfSwgewogICAgbWVudUlkOiBNZW51SWQuQ29tbWFuZFBhbGV0dGUsCiAgICBncm91cDogJycsCiAgICB0aXRsZTogbmxzLmxvY2FsaXplKCdzZWxlY3RBbGwnLCAiU2VsZWN0IEFsbCIpLAogICAgb3JkZXI6IDEKICB9XQp9KSk7"},{"version":3,"names":["nls","URI","ICodeEditorService","Position","IModelService","ITextModelService","MenuId","MenuRegistry","CommandsRegistry","ContextKeyExpr","IContextKeyService","IInstantiationService","KeybindingsRegistry","Registry","ITelemetryService","withNullAsUndefined","assertType","ILogService","Command","opts","id","precondition","_kbOpts","kbOpts","_menuOpts","menuOpts","_description","description","Array","isArray","forEach","_registerMenuItem","kbOptsArr","kbWhen","kbExpr","and","desc","weight","args","when","primary","secondary","win","linux","mac","registerKeybindingRule","registerCommand","handler","accessor","runCommand","item","appendMenuItem","menuId","group","command","title","icon","order","MultiCommand","arguments","_implementations","priority","name","implementation","push","sort","a","b","dispose","i","length","splice","logService","get","trace","impl","result","ProxyCommand","EditorCommand","runEditorCommand","editor","controllerGetter","_callback","controller","runner","codeEditorService","getFocusedCodeEditor","getActiveCodeEditor","invokeWithinContext","editorAccessor","kbService","contextMatchesRules","EditorAction","convertOptions","label","alias","reportTelemetry","run","publicLog2","withDefaults","EditorContext","contextMenuOpts","map","MultiEditorAction","registerModelAndPositionCommand","instaService","resource","position","isUri","isIPosition","model","getModel","editorPosition","lift","invokeFunction","slice","createModelReference","then","reference","Promise","resolve","reject","object","textEditorModel","err","finally","registerEditorCommand","editorCommand","EditorContributionRegistry","INSTANCE","registerEditorAction","ctor","action","registerMultiEditorAction","registerInstantiatedEditorAction","editorAction","registerEditorContribution","EditorExtensionsRegistry","getEditorCommand","commandId","getEditorActions","getEditorContributions","getSomeEditorContributions","ids","filter","c","indexOf","getDiffEditorContributions","Extensions","EditorCommonContributions","editorContributions","diffEditorContributions","editorActions","editorCommands","Object","create","register","add","UndoCommand","undefined","MenubarEditMenu","localize","key","comment","CommandPalette","RedoCommand","SelectAllCommand","MenubarSelectionMenu"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { URI } from '../../base/common/uri.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { Position } from '../common/core/position.js';\nimport { IModelService } from '../common/services/model.js';\nimport { ITextModelService } from '../common/services/resolverService.js';\nimport { MenuId, MenuRegistry } from '../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { withNullAsUndefined, assertType } from '../../base/common/types.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nexport class Command {\n    constructor(opts) {\n        this.id = opts.id;\n        this.precondition = opts.precondition;\n        this._kbOpts = opts.kbOpts;\n        this._menuOpts = opts.menuOpts;\n        this._description = opts.description;\n    }\n    register() {\n        if (Array.isArray(this._menuOpts)) {\n            this._menuOpts.forEach(this._registerMenuItem, this);\n        }\n        else if (this._menuOpts) {\n            this._registerMenuItem(this._menuOpts);\n        }\n        if (this._kbOpts) {\n            const kbOptsArr = Array.isArray(this._kbOpts) ? this._kbOpts : [this._kbOpts];\n            for (const kbOpts of kbOptsArr) {\n                let kbWhen = kbOpts.kbExpr;\n                if (this.precondition) {\n                    if (kbWhen) {\n                        kbWhen = ContextKeyExpr.and(kbWhen, this.precondition);\n                    }\n                    else {\n                        kbWhen = this.precondition;\n                    }\n                }\n                const desc = {\n                    id: this.id,\n                    weight: kbOpts.weight,\n                    args: kbOpts.args,\n                    when: kbWhen,\n                    primary: kbOpts.primary,\n                    secondary: kbOpts.secondary,\n                    win: kbOpts.win,\n                    linux: kbOpts.linux,\n                    mac: kbOpts.mac,\n                };\n                KeybindingsRegistry.registerKeybindingRule(desc);\n            }\n        }\n        CommandsRegistry.registerCommand({\n            id: this.id,\n            handler: (accessor, args) => this.runCommand(accessor, args),\n            description: this._description\n        });\n    }\n    _registerMenuItem(item) {\n        MenuRegistry.appendMenuItem(item.menuId, {\n            group: item.group,\n            command: {\n                id: this.id,\n                title: item.title,\n                icon: item.icon,\n                precondition: this.precondition\n            },\n            when: item.when,\n            order: item.order\n        });\n    }\n}\nexport class MultiCommand extends Command {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, name, implementation) {\n        this._implementations.push({ priority, name, implementation });\n        this._implementations.sort((a, b) => b.priority - a.priority);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i].implementation === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    runCommand(accessor, args) {\n        const logService = accessor.get(ILogService);\n        logService.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);\n        for (const impl of this._implementations) {\n            const result = impl.implementation(accessor, args);\n            if (result) {\n                logService.trace(`Command '${this.id}' was handled by '${impl.name}'.`);\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n        logService.trace(`The Command '${this.id}' was not handled by any implementation.`);\n    }\n}\n//#endregion\n/**\n * A command that delegates to another command's implementation.\n *\n * This lets different commands be registered but share the same implementation\n */\nexport class ProxyCommand extends Command {\n    constructor(command, opts) {\n        super(opts);\n        this.command = command;\n    }\n    runCommand(accessor, args) {\n        return this.command.runCommand(accessor, args);\n    }\n}\nexport class EditorCommand extends Command {\n    /**\n     * Create a command class that is bound to a certain editor contribution.\n     */\n    static bindToContribution(controllerGetter) {\n        return class EditorControllerCommandImpl extends EditorCommand {\n            constructor(opts) {\n                super(opts);\n                this._callback = opts.handler;\n            }\n            runEditorCommand(accessor, editor, args) {\n                const controller = controllerGetter(editor);\n                if (controller) {\n                    this._callback(controller, args);\n                }\n            }\n        };\n    }\n    static runEditorCommand(accessor, args, precondition, runner) {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        // Find the editor with text focus or active\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        return editor.invokeWithinContext((editorAccessor) => {\n            const kbService = editorAccessor.get(IContextKeyService);\n            if (!kbService.contextMatchesRules(withNullAsUndefined(precondition))) {\n                // precondition does not hold\n                return;\n            }\n            return runner(editorAccessor, editor, args);\n        });\n    }\n    runCommand(accessor, args) {\n        return EditorCommand.runEditorCommand(accessor, args, this.precondition, (accessor, editor, args) => this.runEditorCommand(accessor, editor, args));\n    }\n}\nexport class EditorAction extends EditorCommand {\n    constructor(opts) {\n        super(EditorAction.convertOptions(opts));\n        this.label = opts.label;\n        this.alias = opts.alias;\n    }\n    static convertOptions(opts) {\n        let menuOpts;\n        if (Array.isArray(opts.menuOpts)) {\n            menuOpts = opts.menuOpts;\n        }\n        else if (opts.menuOpts) {\n            menuOpts = [opts.menuOpts];\n        }\n        else {\n            menuOpts = [];\n        }\n        function withDefaults(item) {\n            if (!item.menuId) {\n                item.menuId = MenuId.EditorContext;\n            }\n            if (!item.title) {\n                item.title = opts.label;\n            }\n            item.when = ContextKeyExpr.and(opts.precondition, item.when);\n            return item;\n        }\n        if (Array.isArray(opts.contextMenuOpts)) {\n            menuOpts.push(...opts.contextMenuOpts.map(withDefaults));\n        }\n        else if (opts.contextMenuOpts) {\n            menuOpts.push(withDefaults(opts.contextMenuOpts));\n        }\n        opts.menuOpts = menuOpts;\n        return opts;\n    }\n    runEditorCommand(accessor, editor, args) {\n        this.reportTelemetry(accessor, editor);\n        return this.run(accessor, editor, args || {});\n    }\n    reportTelemetry(accessor, editor) {\n        accessor.get(ITelemetryService).publicLog2('editorActionInvoked', { name: this.label, id: this.id });\n    }\n}\nexport class MultiEditorAction extends EditorAction {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, implementation) {\n        this._implementations.push([priority, implementation]);\n        this._implementations.sort((a, b) => b[0] - a[0]);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i][1] === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    run(accessor, editor, args) {\n        for (const impl of this._implementations) {\n            const result = impl[1](accessor, editor, args);\n            if (result) {\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n    }\n}\n//#endregion\n// --- Registration of commands and actions\nexport function registerModelAndPositionCommand(id, handler) {\n    CommandsRegistry.registerCommand(id, function (accessor, ...args) {\n        const instaService = accessor.get(IInstantiationService);\n        const [resource, position] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        const model = accessor.get(IModelService).getModel(resource);\n        if (model) {\n            const editorPosition = Position.lift(position);\n            return instaService.invokeFunction(handler, model, editorPosition, ...args.slice(2));\n        }\n        return accessor.get(ITextModelService).createModelReference(resource).then(reference => {\n            return new Promise((resolve, reject) => {\n                try {\n                    const result = instaService.invokeFunction(handler, reference.object.textEditorModel, Position.lift(position), args.slice(2));\n                    resolve(result);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }).finally(() => {\n                reference.dispose();\n            });\n        });\n    });\n}\nexport function registerEditorCommand(editorCommand) {\n    EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);\n    return editorCommand;\n}\nexport function registerEditorAction(ctor) {\n    const action = new ctor();\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerMultiEditorAction(action) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerInstantiatedEditorAction(editorAction) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);\n}\nexport function registerEditorContribution(id, ctor) {\n    EditorContributionRegistry.INSTANCE.registerEditorContribution(id, ctor);\n}\nexport var EditorExtensionsRegistry;\n(function (EditorExtensionsRegistry) {\n    function getEditorCommand(commandId) {\n        return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);\n    }\n    EditorExtensionsRegistry.getEditorCommand = getEditorCommand;\n    function getEditorActions() {\n        return EditorContributionRegistry.INSTANCE.getEditorActions();\n    }\n    EditorExtensionsRegistry.getEditorActions = getEditorActions;\n    function getEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions();\n    }\n    EditorExtensionsRegistry.getEditorContributions = getEditorContributions;\n    function getSomeEditorContributions(ids) {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(c => ids.indexOf(c.id) >= 0);\n    }\n    EditorExtensionsRegistry.getSomeEditorContributions = getSomeEditorContributions;\n    function getDiffEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();\n    }\n    EditorExtensionsRegistry.getDiffEditorContributions = getDiffEditorContributions;\n})(EditorExtensionsRegistry || (EditorExtensionsRegistry = {}));\n// Editor extension points\nconst Extensions = {\n    EditorCommonContributions: 'editor.contributions'\n};\nclass EditorContributionRegistry {\n    constructor() {\n        this.editorContributions = [];\n        this.diffEditorContributions = [];\n        this.editorActions = [];\n        this.editorCommands = Object.create(null);\n    }\n    registerEditorContribution(id, ctor) {\n        this.editorContributions.push({ id, ctor: ctor });\n    }\n    getEditorContributions() {\n        return this.editorContributions.slice(0);\n    }\n    getDiffEditorContributions() {\n        return this.diffEditorContributions.slice(0);\n    }\n    registerEditorAction(action) {\n        action.register();\n        this.editorActions.push(action);\n    }\n    getEditorActions() {\n        return this.editorActions.slice(0);\n    }\n    registerEditorCommand(editorCommand) {\n        editorCommand.register();\n        this.editorCommands[editorCommand.id] = editorCommand;\n    }\n    getEditorCommand(commandId) {\n        return (this.editorCommands[commandId] || null);\n    }\n}\nEditorContributionRegistry.INSTANCE = new EditorContributionRegistry();\nRegistry.add(Extensions.EditorCommonContributions, EditorContributionRegistry.INSTANCE);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const UndoCommand = registerCommand(new MultiCommand({\n    id: 'undo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 56 /* KeyCode.KeyZ */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miUndo', comment: ['&& denotes a mnemonic'] }, \"&&Undo\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('undo', \"Undo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(UndoCommand, { id: 'default:undo', precondition: undefined }));\nexport const RedoCommand = registerCommand(new MultiCommand({\n    id: 'redo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 55 /* KeyCode.KeyY */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */],\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */ }\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miRedo', comment: ['&& denotes a mnemonic'] }, \"&&Redo\"),\n            order: 2\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('redo', \"Redo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(RedoCommand, { id: 'default:redo', precondition: undefined }));\nexport const SelectAllCommand = registerCommand(new MultiCommand({\n    id: 'editor.action.selectAll',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 31 /* KeyCode.KeyA */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarSelectionMenu,\n            group: '1_basic',\n            title: nls.localize({ key: 'miSelectAll', comment: ['&& denotes a mnemonic'] }, \"&&Select All\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('selectAll', \"Select All\"),\n            order: 1\n        }]\n}));\n"],"mappings":"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"}]}