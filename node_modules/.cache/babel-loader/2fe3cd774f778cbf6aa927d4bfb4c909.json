{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInput.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInput.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZ2V0IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0LmpzIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mLmpzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7Ci8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uCiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwp2YXIgX19hd2FpdGVyID0gdGhpcyAmJiB0aGlzLl9fYXdhaXRlciB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7CiAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlc29sdmUodmFsdWUpOwogICAgfSk7CiAgfQogIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgewogICAgICB0cnkgewogICAgICAgIHN0ZXAoZ2VuZXJhdG9yWyJ0aHJvdyJdKHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7CiAgICAgIHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOwogICAgfQogICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOwogIH0pOwp9OwppbXBvcnQgKiBhcyBkb20gZnJvbSAnLi4vLi4vLi4vYnJvd3Nlci9kb20uanMnOwppbXBvcnQgeyBTdGFuZGFyZEtleWJvYXJkRXZlbnQgfSBmcm9tICcuLi8uLi8uLi9icm93c2VyL2tleWJvYXJkRXZlbnQuanMnOwppbXBvcnQgeyBBY3Rpb25CYXIgfSBmcm9tICcuLi8uLi8uLi9icm93c2VyL3VpL2FjdGlvbmJhci9hY3Rpb25iYXIuanMnOwppbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi8uLi8uLi9icm93c2VyL3VpL2J1dHRvbi9idXR0b24uanMnOwppbXBvcnQgeyBDb3VudEJhZGdlIH0gZnJvbSAnLi4vLi4vLi4vYnJvd3Nlci91aS9jb3VudEJhZGdlL2NvdW50QmFkZ2UuanMnOwppbXBvcnQgeyByZW5kZXJMYWJlbFdpdGhJY29ucyB9IGZyb20gJy4uLy4uLy4uL2Jyb3dzZXIvdWkvaWNvbkxhYmVsL2ljb25MYWJlbHMuanMnOwppbXBvcnQgeyBQcm9ncmVzc0JhciB9IGZyb20gJy4uLy4uLy4uL2Jyb3dzZXIvdWkvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuanMnOwppbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuLi8uLi8uLi9jb21tb24vYWN0aW9ucy5qcyc7CmltcG9ydCB7IGVxdWFscyB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9hcnJheXMuanMnOwppbXBvcnQgeyBUaW1lb3V0VGltZXIgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vYXN5bmMuanMnOwppbXBvcnQgeyBDYW5jZWxsYXRpb25Ub2tlbiB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9jYW5jZWxsYXRpb24uanMnOwppbXBvcnQgeyBDb2RpY29uIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2NvZGljb25zLmpzJzsKaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9ldmVudC5qcyc7CmltcG9ydCB7IERpc3Bvc2FibGUsIERpc3Bvc2FibGVTdG9yZSwgZGlzcG9zZSB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9saWZlY3ljbGUuanMnOwppbXBvcnQgeyBpc0lPUyB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9wbGF0Zm9ybS5qcyc7CmltcG9ydCBTZXZlcml0eSBmcm9tICcuLi8uLi8uLi9jb21tb24vc2V2ZXJpdHkuanMnOwppbXBvcnQgeyB3aXRoTnVsbEFzVW5kZWZpbmVkIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL3R5cGVzLmpzJzsKaW1wb3J0IHsgZ2V0SWNvbkNsYXNzIH0gZnJvbSAnLi9xdWlja0lucHV0VXRpbHMuanMnOwppbXBvcnQgeyBJdGVtQWN0aXZhdGlvbiwgTk9fS0VZX01PRFMsIFF1aWNrSW5wdXRIaWRlUmVhc29uIH0gZnJvbSAnLi4vY29tbW9uL3F1aWNrSW5wdXQuanMnOwppbXBvcnQgJy4vbWVkaWEvcXVpY2tJbnB1dC5jc3MnOwppbXBvcnQgeyBsb2NhbGl6ZSB9IGZyb20gJy4uLy4uLy4uLy4uL25scy5qcyc7CmltcG9ydCB7IFF1aWNrSW5wdXRCb3ggfSBmcm9tICcuL3F1aWNrSW5wdXRCb3guanMnOwppbXBvcnQgeyBRdWlja0lucHV0TGlzdCwgUXVpY2tJbnB1dExpc3RGb2N1cyB9IGZyb20gJy4vcXVpY2tJbnB1dExpc3QuanMnOwp2YXIgJCA9IGRvbS4kOwp2YXIgYmFja0J1dHRvbiA9IHsKICBpY29uQ2xhc3M6IENvZGljb24ucXVpY2tJbnB1dEJhY2suY2xhc3NOYW1lcywKICB0b29sdGlwOiBsb2NhbGl6ZSgncXVpY2tJbnB1dC5iYWNrJywgIkJhY2siKSwKICBoYW5kbGU6IC0xIC8vIFRPRE8KfTsKdmFyIFF1aWNrSW5wdXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlKSB7CiAgX2luaGVyaXRzKFF1aWNrSW5wdXQsIF9EaXNwb3NhYmxlKTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFF1aWNrSW5wdXQpOwogIGZ1bmN0aW9uIFF1aWNrSW5wdXQodWkpIHsKICAgIHZhciBfdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBRdWlja0lucHV0KTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcyk7CiAgICBfdGhpcy51aSA9IHVpOwogICAgX3RoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgX3RoaXMuX2VuYWJsZWQgPSB0cnVlOwogICAgX3RoaXMuX2J1c3kgPSBmYWxzZTsKICAgIF90aGlzLl9pZ25vcmVGb2N1c091dCA9IGZhbHNlOwogICAgX3RoaXMuX2J1dHRvbnMgPSBbXTsKICAgIF90aGlzLm5vVmFsaWRhdGlvbk1lc3NhZ2UgPSBRdWlja0lucHV0Lm5vUHJvbXB0TWVzc2FnZTsKICAgIF90aGlzLl9zZXZlcml0eSA9IFNldmVyaXR5Lklnbm9yZTsKICAgIF90aGlzLmJ1dHRvbnNVcGRhdGVkID0gZmFsc2U7CiAgICBfdGhpcy5vbkRpZFRyaWdnZXJCdXR0b25FbWl0dGVyID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKCkpOwogICAgX3RoaXMub25EaWRIaWRlRW1pdHRlciA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzLm9uRGlzcG9zZUVtaXR0ZXIgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpcy52aXNpYmxlRGlzcG9zYWJsZXMgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IERpc3Bvc2FibGVTdG9yZSgpKTsKICAgIF90aGlzLm9uRGlkSGlkZSA9IF90aGlzLm9uRGlkSGlkZUVtaXR0ZXIuZXZlbnQ7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhRdWlja0lucHV0LCBbewogICAga2V5OiAidGl0bGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl90aXRsZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh0aXRsZSkgewogICAgICB0aGlzLl90aXRsZSA9IHRpdGxlOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImRlc2NyaXB0aW9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGVzY3JpcHRpb24pIHsKICAgICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGVwIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3RlcHM7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoc3RlcCkgewogICAgICB0aGlzLl9zdGVwcyA9IHN0ZXA7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidG90YWxTdGVwcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3RvdGFsU3RlcHM7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodG90YWxTdGVwcykgewogICAgICB0aGlzLl90b3RhbFN0ZXBzID0gdG90YWxTdGVwczsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlbmFibGVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChlbmFibGVkKSB7CiAgICAgIHRoaXMuX2VuYWJsZWQgPSBlbmFibGVkOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbnRleHRLZXkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb250ZXh0S2V5OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGNvbnRleHRLZXkpIHsKICAgICAgdGhpcy5fY29udGV4dEtleSA9IGNvbnRleHRLZXk7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYnVzeSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2J1c3k7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoYnVzeSkgewogICAgICB0aGlzLl9idXN5ID0gYnVzeTsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpZ25vcmVGb2N1c091dCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2lnbm9yZUZvY3VzT3V0OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGlnbm9yZUZvY3VzT3V0KSB7CiAgICAgIHZhciBzaG91bGRVcGRhdGUgPSB0aGlzLl9pZ25vcmVGb2N1c091dCAhPT0gaWdub3JlRm9jdXNPdXQgJiYgIWlzSU9TOwogICAgICB0aGlzLl9pZ25vcmVGb2N1c091dCA9IGlnbm9yZUZvY3VzT3V0ICYmICFpc0lPUzsKICAgICAgaWYgKHNob3VsZFVwZGF0ZSkgewogICAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJidXR0b25zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fYnV0dG9uczsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChidXR0b25zKSB7CiAgICAgIHRoaXMuX2J1dHRvbnMgPSBidXR0b25zOwogICAgICB0aGlzLmJ1dHRvbnNVcGRhdGVkID0gdHJ1ZTsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0aW9uTWVzc2FnZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRpb25NZXNzYWdlOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbGlkYXRpb25NZXNzYWdlKSB7CiAgICAgIHRoaXMuX3ZhbGlkYXRpb25NZXNzYWdlID0gdmFsaWRhdGlvbk1lc3NhZ2U7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V2ZXJpdHkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zZXZlcml0eTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChzZXZlcml0eSkgewogICAgICB0aGlzLl9zZXZlcml0eSA9IHNldmVyaXR5OwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBpZiAodGhpcy52aXNpYmxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMudmlzaWJsZURpc3Bvc2FibGVzLmFkZCh0aGlzLnVpLm9uRGlkVHJpZ2dlckJ1dHRvbihmdW5jdGlvbiAoYnV0dG9uKSB7CiAgICAgICAgaWYgKF90aGlzMi5idXR0b25zLmluZGV4T2YoYnV0dG9uKSAhPT0gLTEpIHsKICAgICAgICAgIF90aGlzMi5vbkRpZFRyaWdnZXJCdXR0b25FbWl0dGVyLmZpcmUoYnV0dG9uKTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgICAgdGhpcy51aS5zaG93KHRoaXMpOwogICAgICAvLyB1cGRhdGUgcHJvcGVydGllcyBpbiB0aGUgY29udHJvbGxlciB0aGF0IGdldCByZXNldCBpbiB0aGUgdWkuc2hvdygpIGNhbGwKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBtZXNzYWdlL3Byb21wdCBnZXRzIHJlbmRlcmVkCiAgICAgIHRoaXMuX2xhc3RWYWxpZGF0aW9uTWVzc2FnZSA9IHVuZGVmaW5lZDsKICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBpbnB1dCBib3ggaGFzIHRoZSByaWdodCBzZXZlcml0eSBhcHBsaWVkCiAgICAgIHRoaXMuX2xhc3RTZXZlcml0eSA9IHVuZGVmaW5lZDsKICAgICAgaWYgKHRoaXMuYnV0dG9ucy5sZW5ndGgpIHsKICAgICAgICAvLyBpZiB0aGVyZSBhcmUgYnV0dG9ucywgdGhlIHVpLnNob3coKSBjbGVhcnMgdGhlbSBvdXQgb2YgdGhlIFVJIHNvIHdlIHNob3VsZAogICAgICAgIC8vIHJlcmVuZGVyIHRoZW0uCiAgICAgICAgdGhpcy5idXR0b25zVXBkYXRlZCA9IHRydWU7CiAgICAgIH0KICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICBpZiAoIXRoaXMudmlzaWJsZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnVpLmhpZGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkaWRIaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaWRIaWRlKCkgewogICAgICB2YXIgcmVhc29uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBRdWlja0lucHV0SGlkZVJlYXNvbi5PdGhlcjsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMudmlzaWJsZURpc3Bvc2FibGVzLmNsZWFyKCk7CiAgICAgIHRoaXMub25EaWRIaWRlRW1pdHRlci5maXJlKHsKICAgICAgICByZWFzb246IHJlYXNvbgogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGlmICghdGhpcy52aXNpYmxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciB0aXRsZSA9IHRoaXMuZ2V0VGl0bGUoKTsKICAgICAgaWYgKHRpdGxlICYmIHRoaXMudWkudGl0bGUudGV4dENvbnRlbnQgIT09IHRpdGxlKSB7CiAgICAgICAgdGhpcy51aS50aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlOwogICAgICB9IGVsc2UgaWYgKCF0aXRsZSAmJiB0aGlzLnVpLnRpdGxlLmlubmVySFRNTCAhPT0gJyZuYnNwOycpIHsKICAgICAgICB0aGlzLnVpLnRpdGxlLmlubmVyVGV4dCA9ICJceEEwIjsKICAgICAgfQogICAgICB2YXIgZGVzY3JpcHRpb24gPSB0aGlzLmdldERlc2NyaXB0aW9uKCk7CiAgICAgIGlmICh0aGlzLnVpLmRlc2NyaXB0aW9uMS50ZXh0Q29udGVudCAhPT0gZGVzY3JpcHRpb24pIHsKICAgICAgICB0aGlzLnVpLmRlc2NyaXB0aW9uMS50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uOwogICAgICB9CiAgICAgIGlmICh0aGlzLnVpLmRlc2NyaXB0aW9uMi50ZXh0Q29udGVudCAhPT0gZGVzY3JpcHRpb24pIHsKICAgICAgICB0aGlzLnVpLmRlc2NyaXB0aW9uMi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uOwogICAgICB9CiAgICAgIGlmICh0aGlzLmJ1c3kgJiYgIXRoaXMuYnVzeURlbGF5KSB7CiAgICAgICAgdGhpcy5idXN5RGVsYXkgPSBuZXcgVGltZW91dFRpbWVyKCk7CiAgICAgICAgdGhpcy5idXN5RGVsYXkuc2V0SWZOb3RTZXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzMy52aXNpYmxlKSB7CiAgICAgICAgICAgIF90aGlzMy51aS5wcm9ncmVzc0Jhci5pbmZpbml0ZSgpOwogICAgICAgICAgfQogICAgICAgIH0sIDgwMCk7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmJ1c3kgJiYgdGhpcy5idXN5RGVsYXkpIHsKICAgICAgICB0aGlzLnVpLnByb2dyZXNzQmFyLnN0b3AoKTsKICAgICAgICB0aGlzLmJ1c3lEZWxheS5jYW5jZWwoKTsKICAgICAgICB0aGlzLmJ1c3lEZWxheSA9IHVuZGVmaW5lZDsKICAgICAgfQogICAgICBpZiAodGhpcy5idXR0b25zVXBkYXRlZCkgewogICAgICAgIHRoaXMuYnV0dG9uc1VwZGF0ZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLnVpLmxlZnRBY3Rpb25CYXIuY2xlYXIoKTsKICAgICAgICB2YXIgbGVmdEJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnMuZmlsdGVyKGZ1bmN0aW9uIChidXR0b24pIHsKICAgICAgICAgIHJldHVybiBidXR0b24gPT09IGJhY2tCdXR0b247CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy51aS5sZWZ0QWN0aW9uQmFyLnB1c2gobGVmdEJ1dHRvbnMubWFwKGZ1bmN0aW9uIChidXR0b24sIGluZGV4KSB7CiAgICAgICAgICB2YXIgYWN0aW9uID0gbmV3IEFjdGlvbigiaWQtIi5jb25jYXQoaW5kZXgpLCAnJywgYnV0dG9uLmljb25DbGFzcyB8fCBnZXRJY29uQ2xhc3MoYnV0dG9uLmljb25QYXRoKSwgdHJ1ZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzMywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EaWRUcmlnZ2VyQnV0dG9uRW1pdHRlci5maXJlKGJ1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYWN0aW9uLnRvb2x0aXAgPSBidXR0b24udG9vbHRpcCB8fCAnJzsKICAgICAgICAgIHJldHVybiBhY3Rpb247CiAgICAgICAgfSksIHsKICAgICAgICAgIGljb246IHRydWUsCiAgICAgICAgICBsYWJlbDogZmFsc2UKICAgICAgICB9KTsKICAgICAgICB0aGlzLnVpLnJpZ2h0QWN0aW9uQmFyLmNsZWFyKCk7CiAgICAgICAgdmFyIHJpZ2h0QnV0dG9ucyA9IHRoaXMuYnV0dG9ucy5maWx0ZXIoZnVuY3Rpb24gKGJ1dHRvbikgewogICAgICAgICAgcmV0dXJuIGJ1dHRvbiAhPT0gYmFja0J1dHRvbjsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnVpLnJpZ2h0QWN0aW9uQmFyLnB1c2gocmlnaHRCdXR0b25zLm1hcChmdW5jdGlvbiAoYnV0dG9uLCBpbmRleCkgewogICAgICAgICAgdmFyIGFjdGlvbiA9IG5ldyBBY3Rpb24oImlkLSIuY29uY2F0KGluZGV4KSwgJycsIGJ1dHRvbi5pY29uQ2xhc3MgfHwgZ2V0SWNvbkNsYXNzKGJ1dHRvbi5pY29uUGF0aCksIHRydWUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EaWRUcmlnZ2VyQnV0dG9uRW1pdHRlci5maXJlKGJ1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfSk7CiAgICAgICAgICBhY3Rpb24udG9vbHRpcCA9IGJ1dHRvbi50b29sdGlwIHx8ICcnOwogICAgICAgICAgcmV0dXJuIGFjdGlvbjsKICAgICAgICB9KSwgewogICAgICAgICAgaWNvbjogdHJ1ZSwKICAgICAgICAgIGxhYmVsOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMudWkuaWdub3JlRm9jdXNPdXQgPSB0aGlzLmlnbm9yZUZvY3VzT3V0OwogICAgICB0aGlzLnVpLnNldEVuYWJsZWQodGhpcy5lbmFibGVkKTsKICAgICAgdGhpcy51aS5zZXRDb250ZXh0S2V5KHRoaXMuY29udGV4dEtleSk7CiAgICAgIHZhciB2YWxpZGF0aW9uTWVzc2FnZSA9IHRoaXMudmFsaWRhdGlvbk1lc3NhZ2UgfHwgdGhpcy5ub1ZhbGlkYXRpb25NZXNzYWdlOwogICAgICBpZiAodGhpcy5fbGFzdFZhbGlkYXRpb25NZXNzYWdlICE9PSB2YWxpZGF0aW9uTWVzc2FnZSkgewogICAgICAgIHRoaXMuX2xhc3RWYWxpZGF0aW9uTWVzc2FnZSA9IHZhbGlkYXRpb25NZXNzYWdlOwogICAgICAgIGRvbS5yZXNldC5hcHBseShkb20sIFt0aGlzLnVpLm1lc3NhZ2VdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVuZGVyTGFiZWxXaXRoSWNvbnModmFsaWRhdGlvbk1lc3NhZ2UpKSkpOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9sYXN0U2V2ZXJpdHkgIT09IHRoaXMuc2V2ZXJpdHkpIHsKICAgICAgICB0aGlzLl9sYXN0U2V2ZXJpdHkgPSB0aGlzLnNldmVyaXR5OwogICAgICAgIHRoaXMuc2hvd01lc3NhZ2VEZWNvcmF0aW9uKHRoaXMuc2V2ZXJpdHkpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VGl0bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpdGxlKCkgewogICAgICBpZiAodGhpcy50aXRsZSAmJiB0aGlzLnN0ZXApIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KHRoaXMudGl0bGUsICIgKCIpLmNvbmNhdCh0aGlzLmdldFN0ZXBzKCksICIpIik7CiAgICAgIH0KICAgICAgaWYgKHRoaXMudGl0bGUpIHsKICAgICAgICByZXR1cm4gdGhpcy50aXRsZTsKICAgICAgfQogICAgICBpZiAodGhpcy5zdGVwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RlcHMoKTsKICAgICAgfQogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0RGVzY3JpcHRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbiB8fCAnJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTdGVwcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3RlcHMoKSB7CiAgICAgIGlmICh0aGlzLnN0ZXAgJiYgdGhpcy50b3RhbFN0ZXBzKSB7CiAgICAgICAgcmV0dXJuIGxvY2FsaXplKCdxdWlja0lucHV0LnN0ZXBzJywgInswfS97MX0iLCB0aGlzLnN0ZXAsIHRoaXMudG90YWxTdGVwcyk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RlcCkgewogICAgICAgIHJldHVybiBTdHJpbmcodGhpcy5zdGVwKTsKICAgICAgfQogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd01lc3NhZ2VEZWNvcmF0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93TWVzc2FnZURlY29yYXRpb24oc2V2ZXJpdHkpIHsKICAgICAgdGhpcy51aS5pbnB1dEJveC5zaG93RGVjb3JhdGlvbihzZXZlcml0eSk7CiAgICAgIGlmIChzZXZlcml0eSAhPT0gU2V2ZXJpdHkuSWdub3JlKSB7CiAgICAgICAgdmFyIHN0eWxlcyA9IHRoaXMudWkuaW5wdXRCb3guc3R5bGVzRm9yVHlwZShzZXZlcml0eSk7CiAgICAgICAgdGhpcy51aS5tZXNzYWdlLnN0eWxlLmNvbG9yID0gc3R5bGVzLmZvcmVncm91bmQgPyAiIi5jb25jYXQoc3R5bGVzLmZvcmVncm91bmQpIDogJyc7CiAgICAgICAgdGhpcy51aS5tZXNzYWdlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHN0eWxlcy5iYWNrZ3JvdW5kID8gIiIuY29uY2F0KHN0eWxlcy5iYWNrZ3JvdW5kKSA6ICcnOwogICAgICAgIHRoaXMudWkubWVzc2FnZS5zdHlsZS5ib3JkZXIgPSBzdHlsZXMuYm9yZGVyID8gIjFweCBzb2xpZCAiLmNvbmNhdChzdHlsZXMuYm9yZGVyKSA6ICcnOwogICAgICAgIHRoaXMudWkubWVzc2FnZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnLTJweCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51aS5tZXNzYWdlLnN0eWxlLmNvbG9yID0gJyc7CiAgICAgICAgdGhpcy51aS5tZXNzYWdlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOwogICAgICAgIHRoaXMudWkubWVzc2FnZS5zdHlsZS5ib3JkZXIgPSAnJzsKICAgICAgICB0aGlzLnVpLm1lc3NhZ2Uuc3R5bGUubWFyZ2luQm90dG9tID0gJyc7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICB0aGlzLmhpZGUoKTsKICAgICAgdGhpcy5vbkRpc3Bvc2VFbWl0dGVyLmZpcmUoKTsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoUXVpY2tJbnB1dC5wcm90b3R5cGUpLCAiZGlzcG9zZSIsIHRoaXMpLmNhbGwodGhpcyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBRdWlja0lucHV0Owp9KERpc3Bvc2FibGUpOwpRdWlja0lucHV0Lm5vUHJvbXB0TWVzc2FnZSA9IGxvY2FsaXplKCdpbnB1dE1vZGVFbnRyeScsICJQcmVzcyAnRW50ZXInIHRvIGNvbmZpcm0geW91ciBpbnB1dCBvciAnRXNjYXBlJyB0byBjYW5jZWwiKTsKdmFyIFF1aWNrUGljayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1F1aWNrSW5wdXQpIHsKICBfaW5oZXJpdHMoUXVpY2tQaWNrLCBfUXVpY2tJbnB1dCk7CiAgdmFyIF9zdXBlcjIgPSBfY3JlYXRlU3VwZXIoUXVpY2tQaWNrKTsKICBmdW5jdGlvbiBRdWlja1BpY2soKSB7CiAgICB2YXIgX3RoaXM0OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFF1aWNrUGljayk7CiAgICBfdGhpczQgPSBfc3VwZXIyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpczQuX3ZhbHVlID0gJyc7CiAgICBfdGhpczQub25EaWRDaGFuZ2VWYWx1ZUVtaXR0ZXIgPSBfdGhpczQuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKCkpOwogICAgX3RoaXM0Lm9uV2lsbEFjY2VwdEVtaXR0ZXIgPSBfdGhpczQuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKCkpOwogICAgX3RoaXM0Lm9uRGlkQWNjZXB0RW1pdHRlciA9IF90aGlzNC5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpczQub25EaWRDdXN0b21FbWl0dGVyID0gX3RoaXM0Ll9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzNC5faXRlbXMgPSBbXTsKICAgIF90aGlzNC5pdGVtc1VwZGF0ZWQgPSBmYWxzZTsKICAgIF90aGlzNC5fY2FuU2VsZWN0TWFueSA9IGZhbHNlOwogICAgX3RoaXM0Ll9jYW5BY2NlcHRJbkJhY2tncm91bmQgPSBmYWxzZTsKICAgIF90aGlzNC5fbWF0Y2hPbkRlc2NyaXB0aW9uID0gZmFsc2U7CiAgICBfdGhpczQuX21hdGNoT25EZXRhaWwgPSBmYWxzZTsKICAgIF90aGlzNC5fbWF0Y2hPbkxhYmVsID0gdHJ1ZTsKICAgIF90aGlzNC5fbWF0Y2hPbkxhYmVsTW9kZSA9ICdmdXp6eSc7CiAgICBfdGhpczQuX3NvcnRCeUxhYmVsID0gdHJ1ZTsKICAgIF90aGlzNC5fYXV0b0ZvY3VzT25MaXN0ID0gdHJ1ZTsKICAgIF90aGlzNC5fa2VlcFNjcm9sbFBvc2l0aW9uID0gZmFsc2U7CiAgICBfdGhpczQuX2l0ZW1BY3RpdmF0aW9uID0gX3RoaXM0LnVpLmlzU2NyZWVuUmVhZGVyT3B0aW1pemVkKCkgPyBJdGVtQWN0aXZhdGlvbi5OT05FIC8qIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2lzc3Vlcy81NzUwMSAqLyA6IEl0ZW1BY3RpdmF0aW9uLkZJUlNUOwogICAgX3RoaXM0Ll9hY3RpdmVJdGVtcyA9IFtdOwogICAgX3RoaXM0LmFjdGl2ZUl0ZW1zVXBkYXRlZCA9IGZhbHNlOwogICAgX3RoaXM0LmFjdGl2ZUl0ZW1zVG9Db25maXJtID0gW107CiAgICBfdGhpczQub25EaWRDaGFuZ2VBY3RpdmVFbWl0dGVyID0gX3RoaXM0Ll9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzNC5fc2VsZWN0ZWRJdGVtcyA9IFtdOwogICAgX3RoaXM0LnNlbGVjdGVkSXRlbXNVcGRhdGVkID0gZmFsc2U7CiAgICBfdGhpczQuc2VsZWN0ZWRJdGVtc1RvQ29uZmlybSA9IFtdOwogICAgX3RoaXM0Lm9uRGlkQ2hhbmdlU2VsZWN0aW9uRW1pdHRlciA9IF90aGlzNC5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpczQub25EaWRUcmlnZ2VySXRlbUJ1dHRvbkVtaXR0ZXIgPSBfdGhpczQuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKCkpOwogICAgX3RoaXM0LnZhbHVlU2VsZWN0aW9uVXBkYXRlZCA9IHRydWU7CiAgICBfdGhpczQuX29rID0gJ2RlZmF1bHQnOwogICAgX3RoaXM0Ll9jdXN0b21CdXR0b24gPSBmYWxzZTsKICAgIF90aGlzNC5maWx0ZXJWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICByZXR1cm4gdmFsdWU7CiAgICB9OwogICAgX3RoaXM0Lm9uRGlkQ2hhbmdlVmFsdWUgPSBfdGhpczQub25EaWRDaGFuZ2VWYWx1ZUVtaXR0ZXIuZXZlbnQ7CiAgICBfdGhpczQub25XaWxsQWNjZXB0ID0gX3RoaXM0Lm9uV2lsbEFjY2VwdEVtaXR0ZXIuZXZlbnQ7CiAgICBfdGhpczQub25EaWRBY2NlcHQgPSBfdGhpczQub25EaWRBY2NlcHRFbWl0dGVyLmV2ZW50OwogICAgX3RoaXM0Lm9uRGlkQ2hhbmdlQWN0aXZlID0gX3RoaXM0Lm9uRGlkQ2hhbmdlQWN0aXZlRW1pdHRlci5ldmVudDsKICAgIF90aGlzNC5vbkRpZENoYW5nZVNlbGVjdGlvbiA9IF90aGlzNC5vbkRpZENoYW5nZVNlbGVjdGlvbkVtaXR0ZXIuZXZlbnQ7CiAgICBfdGhpczQub25EaWRUcmlnZ2VySXRlbUJ1dHRvbiA9IF90aGlzNC5vbkRpZFRyaWdnZXJJdGVtQnV0dG9uRW1pdHRlci5ldmVudDsKICAgIHJldHVybiBfdGhpczQ7CiAgfQogIF9jcmVhdGVDbGFzcyhRdWlja1BpY2ssIFt7CiAgICBrZXk6ICJxdWlja05hdmlnYXRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcXVpY2tOYXZpZ2F0ZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChxdWlja05hdmlnYXRlKSB7CiAgICAgIHRoaXMuX3F1aWNrTmF2aWdhdGUgPSBxdWlja05hdmlnYXRlOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInZhbHVlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdmFsdWU7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgdGhpcy5kb1NldFZhbHVlKHZhbHVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkb1NldFZhbHVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkb1NldFZhbHVlKHZhbHVlLCBza2lwVXBkYXRlKSB7CiAgICAgIGlmICh0aGlzLl92YWx1ZSAhPT0gdmFsdWUpIHsKICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlOwogICAgICAgIGlmICghc2tpcFVwZGF0ZSkgewogICAgICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMudmlzaWJsZSkgewogICAgICAgICAgdmFyIGRpZEZpbHRlciA9IHRoaXMudWkubGlzdC5maWx0ZXIodGhpcy5maWx0ZXJWYWx1ZSh0aGlzLl92YWx1ZSkpOwogICAgICAgICAgaWYgKGRpZEZpbHRlcikgewogICAgICAgICAgICB0aGlzLnRyeVNlbGVjdEZpcnN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMub25EaWRDaGFuZ2VWYWx1ZUVtaXR0ZXIuZmlyZSh0aGlzLl92YWx1ZSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJhcmlhTGFiZWwiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9hcmlhTGFiZWw7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoYXJpYUxhYmVsKSB7CiAgICAgIHRoaXMuX2FyaWFMYWJlbCA9IGFyaWFMYWJlbDsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwbGFjZWhvbGRlciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BsYWNlaG9sZGVyOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHBsYWNlaG9sZGVyKSB7CiAgICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXRlbXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9pdGVtczsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChpdGVtcykgewogICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zOwogICAgICB0aGlzLml0ZW1zVXBkYXRlZCA9IHRydWU7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2Nyb2xsVG9wIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy51aS5saXN0LnNjcm9sbFRvcDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChzY3JvbGxUb3ApIHsKICAgICAgdGhpcy51aS5saXN0LnNjcm9sbFRvcCA9IHNjcm9sbFRvcDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5TZWxlY3RNYW55IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY2FuU2VsZWN0TWFueTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChjYW5TZWxlY3RNYW55KSB7CiAgICAgIHRoaXMuX2NhblNlbGVjdE1hbnkgPSBjYW5TZWxlY3RNYW55OwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImNhbkFjY2VwdEluQmFja2dyb3VuZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NhbkFjY2VwdEluQmFja2dyb3VuZDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChjYW5BY2NlcHRJbkJhY2tncm91bmQpIHsKICAgICAgdGhpcy5fY2FuQWNjZXB0SW5CYWNrZ3JvdW5kID0gY2FuQWNjZXB0SW5CYWNrZ3JvdW5kOwogICAgfQogIH0sIHsKICAgIGtleTogIm1hdGNoT25EZXNjcmlwdGlvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX21hdGNoT25EZXNjcmlwdGlvbjsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChtYXRjaE9uRGVzY3JpcHRpb24pIHsKICAgICAgdGhpcy5fbWF0Y2hPbkRlc2NyaXB0aW9uID0gbWF0Y2hPbkRlc2NyaXB0aW9uOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1hdGNoT25EZXRhaWwiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9tYXRjaE9uRGV0YWlsOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG1hdGNoT25EZXRhaWwpIHsKICAgICAgdGhpcy5fbWF0Y2hPbkRldGFpbCA9IG1hdGNoT25EZXRhaWw7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAibWF0Y2hPbkxhYmVsIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fbWF0Y2hPbkxhYmVsOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KG1hdGNoT25MYWJlbCkgewogICAgICB0aGlzLl9tYXRjaE9uTGFiZWwgPSBtYXRjaE9uTGFiZWw7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAibWF0Y2hPbkxhYmVsTW9kZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX21hdGNoT25MYWJlbE1vZGU7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobWF0Y2hPbkxhYmVsTW9kZSkgewogICAgICB0aGlzLl9tYXRjaE9uTGFiZWxNb2RlID0gbWF0Y2hPbkxhYmVsTW9kZTsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzb3J0QnlMYWJlbCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3NvcnRCeUxhYmVsOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHNvcnRCeUxhYmVsKSB7CiAgICAgIHRoaXMuX3NvcnRCeUxhYmVsID0gc29ydEJ5TGFiZWw7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYXV0b0ZvY3VzT25MaXN0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fYXV0b0ZvY3VzT25MaXN0OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGF1dG9Gb2N1c09uTGlzdCkgewogICAgICB0aGlzLl9hdXRvRm9jdXNPbkxpc3QgPSBhdXRvRm9jdXNPbkxpc3Q7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAia2VlcFNjcm9sbFBvc2l0aW9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fa2VlcFNjcm9sbFBvc2l0aW9uOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGtlZXBTY3JvbGxQb3NpdGlvbikgewogICAgICB0aGlzLl9rZWVwU2Nyb2xsUG9zaXRpb24gPSBrZWVwU2Nyb2xsUG9zaXRpb247CiAgICB9CiAgfSwgewogICAga2V5OiAiaXRlbUFjdGl2YXRpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9pdGVtQWN0aXZhdGlvbjsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChpdGVtQWN0aXZhdGlvbikgewogICAgICB0aGlzLl9pdGVtQWN0aXZhdGlvbiA9IGl0ZW1BY3RpdmF0aW9uOwogICAgfQogIH0sIHsKICAgIGtleTogImFjdGl2ZUl0ZW1zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fYWN0aXZlSXRlbXM7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoYWN0aXZlSXRlbXMpIHsKICAgICAgdGhpcy5fYWN0aXZlSXRlbXMgPSBhY3RpdmVJdGVtczsKICAgICAgdGhpcy5hY3RpdmVJdGVtc1VwZGF0ZWQgPSB0cnVlOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNlbGVjdGVkSXRlbXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZEl0ZW1zOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHNlbGVjdGVkSXRlbXMpIHsKICAgICAgdGhpcy5fc2VsZWN0ZWRJdGVtcyA9IHNlbGVjdGVkSXRlbXM7CiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtc1VwZGF0ZWQgPSB0cnVlOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImtleU1vZHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0aGlzLl9xdWlja05hdmlnYXRlKSB7CiAgICAgICAgLy8gRGlzYWJsZSBrZXlNb2RzIHdoZW4gcXVpY2sgbmF2aWdhdGUgaXMgZW5hYmxlZAogICAgICAgIC8vIGJlY2F1c2UgaW4gdGhpcyBtb2RlbCB0aGUgaW50ZXJhY3Rpb24gaXMgcHVyZWx5CiAgICAgICAgLy8ga2V5Ym9hcmQgZHJpdmVuIGFuZCBDdHJsL0FsdCBhcmUgdHlwaWNhbGx5CiAgICAgICAgLy8gcHJlc3NlZCBhbmQgaG9sZCBkdXJpbmcgdGhpcyBpbnRlcmFjdGlvbi4KICAgICAgICByZXR1cm4gTk9fS0VZX01PRFM7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudWkua2V5TW9kczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWx1ZVNlbGVjdGlvbiIsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZVNlbGVjdGlvbikgewogICAgICB0aGlzLl92YWx1ZVNlbGVjdGlvbiA9IHZhbHVlU2VsZWN0aW9uOwogICAgICB0aGlzLnZhbHVlU2VsZWN0aW9uVXBkYXRlZCA9IHRydWU7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3VzdG9tQnV0dG9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY3VzdG9tQnV0dG9uOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHNob3dDdXN0b21CdXR0b24pIHsKICAgICAgdGhpcy5fY3VzdG9tQnV0dG9uID0gc2hvd0N1c3RvbUJ1dHRvbjsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjdXN0b21MYWJlbCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUJ1dHRvbkxhYmVsOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGxhYmVsKSB7CiAgICAgIHRoaXMuX2N1c3RvbUJ1dHRvbkxhYmVsID0gbGFiZWw7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3VzdG9tSG92ZXIiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jdXN0b21CdXR0b25Ib3ZlcjsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChob3ZlcikgewogICAgICB0aGlzLl9jdXN0b21CdXR0b25Ib3ZlciA9IGhvdmVyOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9rIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fb2s7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoc2hvd09rQnV0dG9uKSB7CiAgICAgIHRoaXMuX29rID0gc2hvd09rQnV0dG9uOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImhpZGVJbnB1dCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5faGlkZUlucHV0OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGhpZGVJbnB1dCkgewogICAgICB0aGlzLl9oaWRlSW5wdXQgPSBoaWRlSW5wdXQ7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidHJ5U2VsZWN0Rmlyc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyeVNlbGVjdEZpcnN0KCkgewogICAgICBpZiAodGhpcy5hdXRvRm9jdXNPbkxpc3QpIHsKICAgICAgICBpZiAoIXRoaXMuY2FuU2VsZWN0TWFueSkgewogICAgICAgICAgdGhpcy51aS5saXN0LmZvY3VzKFF1aWNrSW5wdXRMaXN0Rm9jdXMuRmlyc3QpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICBpZiAoIXRoaXMudmlzaWJsZSkgewogICAgICAgIHRoaXMudmlzaWJsZURpc3Bvc2FibGVzLmFkZCh0aGlzLnVpLmlucHV0Qm94Lm9uRGlkQ2hhbmdlKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgX3RoaXM1LmRvU2V0VmFsdWUodmFsdWUsIHRydWUgLyogc2tpcCB1cGRhdGUgc2luY2UgdGhpcyBvcmlnaW5hdGVzIGZyb20gdGhlIFVJICovKTsKICAgICAgICB9KSk7CgogICAgICAgIHRoaXMudmlzaWJsZURpc3Bvc2FibGVzLmFkZCh0aGlzLnVpLmlucHV0Qm94Lm9uTW91c2VEb3duKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgaWYgKCFfdGhpczUuYXV0b0ZvY3VzT25MaXN0KSB7CiAgICAgICAgICAgIF90aGlzNS51aS5saXN0LmNsZWFyRm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICAgICAgdGhpcy52aXNpYmxlRGlzcG9zYWJsZXMuYWRkKCh0aGlzLl9oaWRlSW5wdXQgPyB0aGlzLnVpLmxpc3QgOiB0aGlzLnVpLmlucHV0Qm94KS5vbktleURvd24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHsKICAgICAgICAgICAgY2FzZSAxOCAvKiBLZXlDb2RlLkRvd25BcnJvdyAqLzoKICAgICAgICAgICAgICBfdGhpczUudWkubGlzdC5mb2N1cyhRdWlja0lucHV0TGlzdEZvY3VzLk5leHQpOwogICAgICAgICAgICAgIGlmIChfdGhpczUuY2FuU2VsZWN0TWFueSkgewogICAgICAgICAgICAgICAgX3RoaXM1LnVpLmxpc3QuZG9tRm9jdXMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZG9tLkV2ZW50SGVscGVyLnN0b3AoZXZlbnQsIHRydWUpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE2IC8qIEtleUNvZGUuVXBBcnJvdyAqLzoKICAgICAgICAgICAgICBpZiAoX3RoaXM1LnVpLmxpc3QuZ2V0Rm9jdXNlZEVsZW1lbnRzKCkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfdGhpczUudWkubGlzdC5mb2N1cyhRdWlja0lucHV0TGlzdEZvY3VzLlByZXZpb3VzKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXM1LnVpLmxpc3QuZm9jdXMoUXVpY2tJbnB1dExpc3RGb2N1cy5MYXN0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKF90aGlzNS5jYW5TZWxlY3RNYW55KSB7CiAgICAgICAgICAgICAgICBfdGhpczUudWkubGlzdC5kb21Gb2N1cygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkb20uRXZlbnRIZWxwZXIuc3RvcChldmVudCwgdHJ1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTIgLyogS2V5Q29kZS5QYWdlRG93biAqLzoKICAgICAgICAgICAgICBfdGhpczUudWkubGlzdC5mb2N1cyhRdWlja0lucHV0TGlzdEZvY3VzLk5leHRQYWdlKTsKICAgICAgICAgICAgICBpZiAoX3RoaXM1LmNhblNlbGVjdE1hbnkpIHsKICAgICAgICAgICAgICAgIF90aGlzNS51aS5saXN0LmRvbUZvY3VzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGRvbS5FdmVudEhlbHBlci5zdG9wKGV2ZW50LCB0cnVlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMSAvKiBLZXlDb2RlLlBhZ2VVcCAqLzoKICAgICAgICAgICAgICBfdGhpczUudWkubGlzdC5mb2N1cyhRdWlja0lucHV0TGlzdEZvY3VzLlByZXZpb3VzUGFnZSk7CiAgICAgICAgICAgICAgaWYgKF90aGlzNS5jYW5TZWxlY3RNYW55KSB7CiAgICAgICAgICAgICAgICBfdGhpczUudWkubGlzdC5kb21Gb2N1cygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkb20uRXZlbnRIZWxwZXIuc3RvcChldmVudCwgdHJ1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTcgLyogS2V5Q29kZS5SaWdodEFycm93ICovOgogICAgICAgICAgICAgIGlmICghX3RoaXM1Ll9jYW5BY2NlcHRJbkJhY2tncm91bmQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsgLy8gbmVlZHMgdG8gYmUgZW5hYmxlZAogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCFfdGhpczUudWkuaW5wdXRCb3guaXNTZWxlY3Rpb25BdEVuZCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47IC8vIGVuc3VyZSBpbnB1dCBib3ggc2VsZWN0aW9uIGF0IGVuZAogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKF90aGlzNS5hY3RpdmVJdGVtc1swXSkgewogICAgICAgICAgICAgICAgX3RoaXM1Ll9zZWxlY3RlZEl0ZW1zID0gW190aGlzNS5hY3RpdmVJdGVtc1swXV07CiAgICAgICAgICAgICAgICBfdGhpczUub25EaWRDaGFuZ2VTZWxlY3Rpb25FbWl0dGVyLmZpcmUoX3RoaXM1LnNlbGVjdGVkSXRlbXMpOwogICAgICAgICAgICAgICAgX3RoaXM1LmhhbmRsZUFjY2VwdCh0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTQgLyogS2V5Q29kZS5Ib21lICovOgogICAgICAgICAgICAgIGlmICgoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSAmJiAhZXZlbnQuc2hpZnRLZXkgJiYgIWV2ZW50LmFsdEtleSkgewogICAgICAgICAgICAgICAgX3RoaXM1LnVpLmxpc3QuZm9jdXMoUXVpY2tJbnB1dExpc3RGb2N1cy5GaXJzdCk7CiAgICAgICAgICAgICAgICBkb20uRXZlbnRIZWxwZXIuc3RvcChldmVudCwgdHJ1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEzIC8qIEtleUNvZGUuRW5kICovOgogICAgICAgICAgICAgIGlmICgoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSAmJiAhZXZlbnQuc2hpZnRLZXkgJiYgIWV2ZW50LmFsdEtleSkgewogICAgICAgICAgICAgICAgX3RoaXM1LnVpLmxpc3QuZm9jdXMoUXVpY2tJbnB1dExpc3RGb2N1cy5MYXN0KTsKICAgICAgICAgICAgICAgIGRvbS5FdmVudEhlbHBlci5zdG9wKGV2ZW50LCB0cnVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSkpOwogICAgICAgIHRoaXMudmlzaWJsZURpc3Bvc2FibGVzLmFkZCh0aGlzLnVpLm9uRGlkQWNjZXB0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfdGhpczUuY2FuU2VsZWN0TWFueSkgewogICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gY2hlY2tlZCBlbGVtZW50cywgaXQgbWVhbnMgdGhhdCBhbiBvbkRpZENoYW5nZVNlbGVjdGlvbiBuZXZlciBmaXJlZCB0byBvdmVyd3JpdGUKICAgICAgICAgICAgLy8gYF9zZWxlY3RlZEl0ZW1zYC4gSW4gdGhhdCBjYXNlLCB3ZSBzaG91bGQgZW1pdCBvbmUgd2l0aCBhbiBlbXB0eSBhcnJheSB0byBlbnN1cmUgdGhhdAogICAgICAgICAgICAvLyBgLnNlbGVjdGVkSXRlbXNgIGlzIHVwIHRvIGRhdGUuCiAgICAgICAgICAgIGlmICghX3RoaXM1LnVpLmxpc3QuZ2V0Q2hlY2tlZEVsZW1lbnRzKCkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgX3RoaXM1Ll9zZWxlY3RlZEl0ZW1zID0gW107CiAgICAgICAgICAgICAgX3RoaXM1Lm9uRGlkQ2hhbmdlU2VsZWN0aW9uRW1pdHRlci5maXJlKF90aGlzNS5zZWxlY3RlZEl0ZW1zKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChfdGhpczUuYWN0aXZlSXRlbXNbMF0pIHsKICAgICAgICAgICAgLy8gRm9yIHNpbmdsZS1zZWxlY3QsIHdlIHNldCBgc2VsZWN0ZWRJdGVtc2AgdG8gdGhlIGl0ZW0gdGhhdCB3YXMgYWNjZXB0ZWQuCiAgICAgICAgICAgIF90aGlzNS5fc2VsZWN0ZWRJdGVtcyA9IFtfdGhpczUuYWN0aXZlSXRlbXNbMF1dOwogICAgICAgICAgICBfdGhpczUub25EaWRDaGFuZ2VTZWxlY3Rpb25FbWl0dGVyLmZpcmUoX3RoaXM1LnNlbGVjdGVkSXRlbXMpOwogICAgICAgICAgfQogICAgICAgICAgX3RoaXM1LmhhbmRsZUFjY2VwdChmYWxzZSk7CiAgICAgICAgfSkpOwogICAgICAgIHRoaXMudmlzaWJsZURpc3Bvc2FibGVzLmFkZCh0aGlzLnVpLm9uRGlkQ3VzdG9tKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNS5vbkRpZEN1c3RvbUVtaXR0ZXIuZmlyZSgpOwogICAgICAgIH0pKTsKICAgICAgICB0aGlzLnZpc2libGVEaXNwb3NhYmxlcy5hZGQodGhpcy51aS5saXN0Lm9uRGlkQ2hhbmdlRm9jdXMoZnVuY3Rpb24gKGZvY3VzZWRJdGVtcykgewogICAgICAgICAgaWYgKF90aGlzNS5hY3RpdmVJdGVtc1VwZGF0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuOyAvLyBFeHBlY3QgYW5vdGhlciBldmVudC4KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoX3RoaXM1LmFjdGl2ZUl0ZW1zVG9Db25maXJtICE9PSBfdGhpczUuX2FjdGl2ZUl0ZW1zICYmIGVxdWFscyhmb2N1c2VkSXRlbXMsIF90aGlzNS5fYWN0aXZlSXRlbXMsIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIHJldHVybiBhID09PSBiOwogICAgICAgICAgfSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgX3RoaXM1Ll9hY3RpdmVJdGVtcyA9IGZvY3VzZWRJdGVtczsKICAgICAgICAgIF90aGlzNS5vbkRpZENoYW5nZUFjdGl2ZUVtaXR0ZXIuZmlyZShmb2N1c2VkSXRlbXMpOwogICAgICAgIH0pKTsKICAgICAgICB0aGlzLnZpc2libGVEaXNwb3NhYmxlcy5hZGQodGhpcy51aS5saXN0Lm9uRGlkQ2hhbmdlU2VsZWN0aW9uKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtcyA9IF9yZWYuaXRlbXMsCiAgICAgICAgICAgIGV2ZW50ID0gX3JlZi5ldmVudDsKICAgICAgICAgIGlmIChfdGhpczUuY2FuU2VsZWN0TWFueSkgewogICAgICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBfdGhpczUudWkubGlzdC5zZXRTZWxlY3RlZEVsZW1lbnRzKFtdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXM1LnNlbGVjdGVkSXRlbXNUb0NvbmZpcm0gIT09IF90aGlzNS5fc2VsZWN0ZWRJdGVtcyAmJiBlcXVhbHMoc2VsZWN0ZWRJdGVtcywgX3RoaXM1Ll9zZWxlY3RlZEl0ZW1zLCBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICByZXR1cm4gYSA9PT0gYjsKICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzNS5fc2VsZWN0ZWRJdGVtcyA9IHNlbGVjdGVkSXRlbXM7CiAgICAgICAgICBfdGhpczUub25EaWRDaGFuZ2VTZWxlY3Rpb25FbWl0dGVyLmZpcmUoc2VsZWN0ZWRJdGVtcyk7CiAgICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGgpIHsKICAgICAgICAgICAgX3RoaXM1LmhhbmRsZUFjY2VwdChldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgZXZlbnQuYnV0dG9uID09PSAxIC8qIG1vdXNlIG1pZGRsZSBjbGljayAqLyk7CiAgICAgICAgICB9CiAgICAgICAgfSkpOwoKICAgICAgICB0aGlzLnZpc2libGVEaXNwb3NhYmxlcy5hZGQodGhpcy51aS5saXN0Lm9uQ2hhbmdlZENoZWNrZWRFbGVtZW50cyhmdW5jdGlvbiAoY2hlY2tlZEl0ZW1zKSB7CiAgICAgICAgICBpZiAoIV90aGlzNS5jYW5TZWxlY3RNYW55KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChfdGhpczUuc2VsZWN0ZWRJdGVtc1RvQ29uZmlybSAhPT0gX3RoaXM1Ll9zZWxlY3RlZEl0ZW1zICYmIGVxdWFscyhjaGVja2VkSXRlbXMsIF90aGlzNS5fc2VsZWN0ZWRJdGVtcywgZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgcmV0dXJuIGEgPT09IGI7CiAgICAgICAgICB9KSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpczUuX3NlbGVjdGVkSXRlbXMgPSBjaGVja2VkSXRlbXM7CiAgICAgICAgICBfdGhpczUub25EaWRDaGFuZ2VTZWxlY3Rpb25FbWl0dGVyLmZpcmUoY2hlY2tlZEl0ZW1zKTsKICAgICAgICB9KSk7CiAgICAgICAgdGhpcy52aXNpYmxlRGlzcG9zYWJsZXMuYWRkKHRoaXMudWkubGlzdC5vbkJ1dHRvblRyaWdnZXJlZChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdGhpczUub25EaWRUcmlnZ2VySXRlbUJ1dHRvbkVtaXR0ZXIuZmlyZShldmVudCk7CiAgICAgICAgfSkpOwogICAgICAgIHRoaXMudmlzaWJsZURpc3Bvc2FibGVzLmFkZCh0aGlzLnJlZ2lzdGVyUXVpY2tOYXZpZ2F0aW9uKCkpOwogICAgICAgIHRoaXMudmFsdWVTZWxlY3Rpb25VcGRhdGVkID0gdHJ1ZTsKICAgICAgfQogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihRdWlja1BpY2sucHJvdG90eXBlKSwgInNob3ciLCB0aGlzKS5jYWxsKHRoaXMpOyAvLyBUT0RPOiBXaHkgaGF2ZSBzaG93KCkgYnViYmxlIHVwIHdoaWxlIHVwZGF0ZSgpIHRyaWNrbGVzIGRvd24/IChDb3VsZCBtb3ZlIHNldENvbWJvYm94QWNjZXNzaWJpbGl0eSgpIGhlcmUuKQogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZUFjY2VwdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQWNjZXB0KGluQmFja2dyb3VuZCkgewogICAgICAvLyBGaWd1cmUgb3V0IHZldG8gdmlhIGBvbldpbGxBY2NlcHRgIGV2ZW50CiAgICAgIHZhciBfdmV0byA9IGZhbHNlOwogICAgICB0aGlzLm9uV2lsbEFjY2VwdEVtaXR0ZXIuZmlyZSh7CiAgICAgICAgdmV0bzogZnVuY3Rpb24gdmV0bygpIHsKICAgICAgICAgIHJldHVybiBfdmV0byA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gQ29udGludWUgd2l0aCBgb25EaWRBY2NlcHRgIGlmIG5vIHZldG8KICAgICAgaWYgKCFfdmV0bykgewogICAgICAgIHRoaXMub25EaWRBY2NlcHRFbWl0dGVyLmZpcmUoewogICAgICAgICAgaW5CYWNrZ3JvdW5kOiBpbkJhY2tncm91bmQKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlZ2lzdGVyUXVpY2tOYXZpZ2F0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlclF1aWNrTmF2aWdhdGlvbigpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHJldHVybiBkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMudWkuY29udGFpbmVyLCBkb20uRXZlbnRUeXBlLktFWV9VUCwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoX3RoaXM2LmNhblNlbGVjdE1hbnkgfHwgIV90aGlzNi5fcXVpY2tOYXZpZ2F0ZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIga2V5Ym9hcmRFdmVudCA9IG5ldyBTdGFuZGFyZEtleWJvYXJkRXZlbnQoZSk7CiAgICAgICAgdmFyIGtleUNvZGUgPSBrZXlib2FyZEV2ZW50LmtleUNvZGU7CiAgICAgICAgLy8gU2VsZWN0IGVsZW1lbnQgd2hlbiBrZXlzIGFyZSBwcmVzc2VkIHRoYXQgc2lnbmFsIGl0CiAgICAgICAgdmFyIHF1aWNrTmF2S2V5cyA9IF90aGlzNi5fcXVpY2tOYXZpZ2F0ZS5rZXliaW5kaW5nczsKICAgICAgICB2YXIgd2FzVHJpZ2dlcktleVByZXNzZWQgPSBxdWlja05hdktleXMuc29tZShmdW5jdGlvbiAoaykgewogICAgICAgICAgdmFyIF9rJGdldFBhcnRzID0gay5nZXRQYXJ0cygpLAogICAgICAgICAgICBfayRnZXRQYXJ0czIgPSBfc2xpY2VkVG9BcnJheShfayRnZXRQYXJ0cywgMiksCiAgICAgICAgICAgIGZpcnN0UGFydCA9IF9rJGdldFBhcnRzMlswXSwKICAgICAgICAgICAgY2hvcmRQYXJ0ID0gX2skZ2V0UGFydHMyWzFdOwogICAgICAgICAgaWYgKGNob3JkUGFydCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZmlyc3RQYXJ0LnNoaWZ0S2V5ICYmIGtleUNvZGUgPT09IDQgLyogS2V5Q29kZS5TaGlmdCAqLykgewogICAgICAgICAgICBpZiAoa2V5Ym9hcmRFdmVudC5jdHJsS2V5IHx8IGtleWJvYXJkRXZlbnQuYWx0S2V5IHx8IGtleWJvYXJkRXZlbnQubWV0YUtleSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gdGhpcyBpcyBhbiBvcHRpbWlzdGljIGNoZWNrIGZvciB0aGUgc2hpZnQga2V5IGJlaW5nIHVzZWQgdG8gbmF2aWdhdGUgYmFjayBpbiBxdWljayBpbnB1dAogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChmaXJzdFBhcnQuYWx0S2V5ICYmIGtleUNvZGUgPT09IDYgLyogS2V5Q29kZS5BbHQgKi8pIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZmlyc3RQYXJ0LmN0cmxLZXkgJiYga2V5Q29kZSA9PT0gNSAvKiBLZXlDb2RlLkN0cmwgKi8pIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZmlyc3RQYXJ0Lm1ldGFLZXkgJiYga2V5Q29kZSA9PT0gNTcgLyogS2V5Q29kZS5NZXRhICovKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0pOwogICAgICAgIGlmICh3YXNUcmlnZ2VyS2V5UHJlc3NlZCkgewogICAgICAgICAgaWYgKF90aGlzNi5hY3RpdmVJdGVtc1swXSkgewogICAgICAgICAgICBfdGhpczYuX3NlbGVjdGVkSXRlbXMgPSBbX3RoaXM2LmFjdGl2ZUl0ZW1zWzBdXTsKICAgICAgICAgICAgX3RoaXM2Lm9uRGlkQ2hhbmdlU2VsZWN0aW9uRW1pdHRlci5maXJlKF90aGlzNi5zZWxlY3RlZEl0ZW1zKTsKICAgICAgICAgICAgX3RoaXM2LmhhbmRsZUFjY2VwdChmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBVbnNldCBxdWljayBuYXZpZ2F0ZSBhZnRlciBwcmVzcy4gSXQgaXMgb25seSB2YWxpZCBvbmNlCiAgICAgICAgICAvLyBhbmQgc2hvdWxkIG5vdCByZXN1bHQgaW4gYW55IGJlaGF2aW91ciBjaGFuZ2UgYWZ0ZXJ3YXJkcwogICAgICAgICAgLy8gaWYgdGhlIHBpY2tlciByZW1haW5zIG9wZW4gYmVjYXVzZSB0aGVyZSB3YXMgbm8gYWN0aXZlIGl0ZW0KICAgICAgICAgIF90aGlzNi5fcXVpY2tOYXZpZ2F0ZSA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICBpZiAoIXRoaXMudmlzaWJsZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyBzdG9yZSB0aGUgc2Nyb2xsVG9wIGJlZm9yZSBpdCBpcyByZXNldAogICAgICB2YXIgc2Nyb2xsVG9wQmVmb3JlID0gdGhpcy5rZWVwU2Nyb2xsUG9zaXRpb24gPyB0aGlzLnNjcm9sbFRvcCA6IDA7CiAgICAgIHZhciBoaWRlSW5wdXQgPSAhIXRoaXMuX2hpZGVJbnB1dCAmJiB0aGlzLl9pdGVtcy5sZW5ndGggPiAwOwogICAgICB0aGlzLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4taW5wdXQnLCBoaWRlSW5wdXQgJiYgIXRoaXMuZGVzY3JpcHRpb24pOwogICAgICB2YXIgdmlzaWJpbGl0aWVzID0gewogICAgICAgIHRpdGxlOiAhIXRoaXMudGl0bGUgfHwgISF0aGlzLnN0ZXAgfHwgISF0aGlzLmJ1dHRvbnMubGVuZ3RoLAogICAgICAgIGRlc2NyaXB0aW9uOiAhIXRoaXMuZGVzY3JpcHRpb24sCiAgICAgICAgY2hlY2tBbGw6IHRoaXMuY2FuU2VsZWN0TWFueSAmJiAhdGhpcy5faGlkZUNoZWNrQWxsLAogICAgICAgIGNoZWNrQm94OiB0aGlzLmNhblNlbGVjdE1hbnksCiAgICAgICAgaW5wdXRCb3g6ICFoaWRlSW5wdXQsCiAgICAgICAgcHJvZ3Jlc3NCYXI6ICFoaWRlSW5wdXQsCiAgICAgICAgdmlzaWJsZUNvdW50OiB0cnVlLAogICAgICAgIGNvdW50OiB0aGlzLmNhblNlbGVjdE1hbnksCiAgICAgICAgb2s6IHRoaXMub2sgPT09ICdkZWZhdWx0JyA/IHRoaXMuY2FuU2VsZWN0TWFueSA6IHRoaXMub2ssCiAgICAgICAgbGlzdDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAhIXRoaXMudmFsaWRhdGlvbk1lc3NhZ2UsCiAgICAgICAgY3VzdG9tQnV0dG9uOiB0aGlzLmN1c3RvbUJ1dHRvbgogICAgICB9OwogICAgICB0aGlzLnVpLnNldFZpc2liaWxpdGllcyh2aXNpYmlsaXRpZXMpOwogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihRdWlja1BpY2sucHJvdG90eXBlKSwgInVwZGF0ZSIsIHRoaXMpLmNhbGwodGhpcyk7CiAgICAgIGlmICh0aGlzLnVpLmlucHV0Qm94LnZhbHVlICE9PSB0aGlzLnZhbHVlKSB7CiAgICAgICAgdGhpcy51aS5pbnB1dEJveC52YWx1ZSA9IHRoaXMudmFsdWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMudmFsdWVTZWxlY3Rpb25VcGRhdGVkKSB7CiAgICAgICAgdGhpcy52YWx1ZVNlbGVjdGlvblVwZGF0ZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLnVpLmlucHV0Qm94LnNlbGVjdCh0aGlzLl92YWx1ZVNlbGVjdGlvbiAmJiB7CiAgICAgICAgICBzdGFydDogdGhpcy5fdmFsdWVTZWxlY3Rpb25bMF0sCiAgICAgICAgICBlbmQ6IHRoaXMuX3ZhbHVlU2VsZWN0aW9uWzFdCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMudWkuaW5wdXRCb3gucGxhY2Vob2xkZXIgIT09ICh0aGlzLnBsYWNlaG9sZGVyIHx8ICcnKSkgewogICAgICAgIHRoaXMudWkuaW5wdXRCb3gucGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyIHx8ICcnOwogICAgICB9CiAgICAgIHZhciBhcmlhTGFiZWwgPSB0aGlzLmFyaWFMYWJlbDsKICAgICAgaWYgKCFhcmlhTGFiZWwpIHsKICAgICAgICBhcmlhTGFiZWwgPSB0aGlzLnBsYWNlaG9sZGVyIHx8IFF1aWNrUGljay5ERUZBVUxUX0FSSUFfTEFCRUw7CiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIHRpdGxlLCBpbmNsdWRlIGl0IGluIHRoZSBhcmlhIGxhYmVsLgogICAgICAgIGlmICh0aGlzLnRpdGxlKSB7CiAgICAgICAgICBhcmlhTGFiZWwgKz0gIiAtICIuY29uY2F0KHRoaXMudGl0bGUpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy51aS5pbnB1dEJveC5hcmlhTGFiZWwgIT09IGFyaWFMYWJlbCkgewogICAgICAgIHRoaXMudWkuaW5wdXRCb3guYXJpYUxhYmVsID0gYXJpYUxhYmVsOwogICAgICB9CiAgICAgIHRoaXMudWkubGlzdC5tYXRjaE9uRGVzY3JpcHRpb24gPSB0aGlzLm1hdGNoT25EZXNjcmlwdGlvbjsKICAgICAgdGhpcy51aS5saXN0Lm1hdGNoT25EZXRhaWwgPSB0aGlzLm1hdGNoT25EZXRhaWw7CiAgICAgIHRoaXMudWkubGlzdC5tYXRjaE9uTGFiZWwgPSB0aGlzLm1hdGNoT25MYWJlbDsKICAgICAgdGhpcy51aS5saXN0Lm1hdGNoT25MYWJlbE1vZGUgPSB0aGlzLm1hdGNoT25MYWJlbE1vZGU7CiAgICAgIHRoaXMudWkubGlzdC5zb3J0QnlMYWJlbCA9IHRoaXMuc29ydEJ5TGFiZWw7CiAgICAgIGlmICh0aGlzLml0ZW1zVXBkYXRlZCkgewogICAgICAgIHRoaXMuaXRlbXNVcGRhdGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy51aS5saXN0LnNldEVsZW1lbnRzKHRoaXMuaXRlbXMpOwogICAgICAgIHRoaXMudWkubGlzdC5maWx0ZXIodGhpcy5maWx0ZXJWYWx1ZSh0aGlzLnVpLmlucHV0Qm94LnZhbHVlKSk7CiAgICAgICAgdGhpcy51aS5jaGVja0FsbC5jaGVja2VkID0gdGhpcy51aS5saXN0LmdldEFsbFZpc2libGVDaGVja2VkKCk7CiAgICAgICAgdGhpcy51aS52aXNpYmxlQ291bnQuc2V0Q291bnQodGhpcy51aS5saXN0LmdldFZpc2libGVDb3VudCgpKTsKICAgICAgICB0aGlzLnVpLmNvdW50LnNldENvdW50KHRoaXMudWkubGlzdC5nZXRDaGVja2VkQ291bnQoKSk7CiAgICAgICAgc3dpdGNoICh0aGlzLl9pdGVtQWN0aXZhdGlvbikgewogICAgICAgICAgY2FzZSBJdGVtQWN0aXZhdGlvbi5OT05FOgogICAgICAgICAgICB0aGlzLl9pdGVtQWN0aXZhdGlvbiA9IEl0ZW1BY3RpdmF0aW9uLkZJUlNUOyAvLyBvbmx5IHZhbGlkIG9uY2UsIHRoZW4gdW5zZXQKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIEl0ZW1BY3RpdmF0aW9uLlNFQ09ORDoKICAgICAgICAgICAgdGhpcy51aS5saXN0LmZvY3VzKFF1aWNrSW5wdXRMaXN0Rm9jdXMuU2Vjb25kKTsKICAgICAgICAgICAgdGhpcy5faXRlbUFjdGl2YXRpb24gPSBJdGVtQWN0aXZhdGlvbi5GSVJTVDsgLy8gb25seSB2YWxpZCBvbmNlLCB0aGVuIHVuc2V0CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBJdGVtQWN0aXZhdGlvbi5MQVNUOgogICAgICAgICAgICB0aGlzLnVpLmxpc3QuZm9jdXMoUXVpY2tJbnB1dExpc3RGb2N1cy5MYXN0KTsKICAgICAgICAgICAgdGhpcy5faXRlbUFjdGl2YXRpb24gPSBJdGVtQWN0aXZhdGlvbi5GSVJTVDsgLy8gb25seSB2YWxpZCBvbmNlLCB0aGVuIHVuc2V0CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhpcy50cnlTZWxlY3RGaXJzdCgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMudWkuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1jaGVja2JveGVzJykgIT09ICEhdGhpcy5jYW5TZWxlY3RNYW55KSB7CiAgICAgICAgaWYgKHRoaXMuY2FuU2VsZWN0TWFueSkgewogICAgICAgICAgdGhpcy51aS5saXN0LmNsZWFyRm9jdXMoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy50cnlTZWxlY3RGaXJzdCgpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5hY3RpdmVJdGVtc1VwZGF0ZWQpIHsKICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1zVXBkYXRlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuYWN0aXZlSXRlbXNUb0NvbmZpcm0gPSB0aGlzLl9hY3RpdmVJdGVtczsKICAgICAgICB0aGlzLnVpLmxpc3Quc2V0Rm9jdXNlZEVsZW1lbnRzKHRoaXMuYWN0aXZlSXRlbXMpOwogICAgICAgIGlmICh0aGlzLmFjdGl2ZUl0ZW1zVG9Db25maXJtID09PSB0aGlzLl9hY3RpdmVJdGVtcykgewogICAgICAgICAgdGhpcy5hY3RpdmVJdGVtc1RvQ29uZmlybSA9IG51bGw7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbXNVcGRhdGVkKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zVXBkYXRlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtc1RvQ29uZmlybSA9IHRoaXMuX3NlbGVjdGVkSXRlbXM7CiAgICAgICAgaWYgKHRoaXMuY2FuU2VsZWN0TWFueSkgewogICAgICAgICAgdGhpcy51aS5saXN0LnNldENoZWNrZWRFbGVtZW50cyh0aGlzLnNlbGVjdGVkSXRlbXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVpLmxpc3Quc2V0U2VsZWN0ZWRFbGVtZW50cyh0aGlzLnNlbGVjdGVkSXRlbXMpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW1zVG9Db25maXJtID09PSB0aGlzLl9zZWxlY3RlZEl0ZW1zKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbXNUb0NvbmZpcm0gPSBudWxsOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnVpLmN1c3RvbUJ1dHRvbi5sYWJlbCA9IHRoaXMuY3VzdG9tTGFiZWwgfHwgJyc7CiAgICAgIHRoaXMudWkuY3VzdG9tQnV0dG9uLmVsZW1lbnQudGl0bGUgPSB0aGlzLmN1c3RvbUhvdmVyIHx8ICcnOwogICAgICB0aGlzLnVpLnNldENvbWJvYm94QWNjZXNzaWJpbGl0eSh0cnVlKTsKICAgICAgaWYgKCF2aXNpYmlsaXRpZXMuaW5wdXRCb3gpIHsKICAgICAgICAvLyB3ZSBuZWVkIHRvIG1vdmUgZm9jdXMgaW50byB0aGUgdHJlZSB0byBkZXRlY3Qga2V5YmluZGluZ3MKICAgICAgICAvLyBwcm9wZXJseSB3aGVuIHRoZSBpbnB1dCBib3ggaXMgbm90IHZpc2libGUgKHF1aWNrIG5hdikKICAgICAgICB0aGlzLnVpLmxpc3QuZG9tRm9jdXMoKTsKICAgICAgICAvLyBGb2N1cyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbGlzdCBpZiBtdWx0aXNlbGVjdCBpcyBlbmFibGVkCiAgICAgICAgaWYgKHRoaXMuY2FuU2VsZWN0TWFueSkgewogICAgICAgICAgdGhpcy51aS5saXN0LmZvY3VzKFF1aWNrSW5wdXRMaXN0Rm9jdXMuRmlyc3QpOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBTZXQgdGhlIHNjcm9sbCBwb3NpdGlvbiB0byB3aGF0IGl0IHdhcyBiZWZvcmUgdXBkYXRpbmcgdGhlIGl0ZW1zCiAgICAgIGlmICh0aGlzLmtlZXBTY3JvbGxQb3NpdGlvbikgewogICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wQmVmb3JlOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBRdWlja1BpY2s7Cn0oUXVpY2tJbnB1dCk7ClF1aWNrUGljay5ERUZBVUxUX0FSSUFfTEFCRUwgPSBsb2NhbGl6ZSgncXVpY2tJbnB1dEJveC5hcmlhTGFiZWwnLCAiVHlwZSB0byBuYXJyb3cgZG93biByZXN1bHRzLiIpOwpleHBvcnQgdmFyIFF1aWNrSW5wdXRDb250cm9sbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRGlzcG9zYWJsZTIpIHsKICBfaW5oZXJpdHMoUXVpY2tJbnB1dENvbnRyb2xsZXIsIF9EaXNwb3NhYmxlMik7CiAgdmFyIF9zdXBlcjMgPSBfY3JlYXRlU3VwZXIoUXVpY2tJbnB1dENvbnRyb2xsZXIpOwogIGZ1bmN0aW9uIFF1aWNrSW5wdXRDb250cm9sbGVyKG9wdGlvbnMpIHsKICAgIHZhciBfdGhpczc7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUXVpY2tJbnB1dENvbnRyb2xsZXIpOwogICAgX3RoaXM3ID0gX3N1cGVyMy5jYWxsKHRoaXMpOwogICAgX3RoaXM3Lm9wdGlvbnMgPSBvcHRpb25zOwogICAgX3RoaXM3LmNvbWJvYm94QWNjZXNzaWJpbGl0eSA9IGZhbHNlOwogICAgX3RoaXM3LmVuYWJsZWQgPSB0cnVlOwogICAgX3RoaXM3Lm9uRGlkQWNjZXB0RW1pdHRlciA9IF90aGlzNy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpczcub25EaWRDdXN0b21FbWl0dGVyID0gX3RoaXM3Ll9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzNy5vbkRpZFRyaWdnZXJCdXR0b25FbWl0dGVyID0gX3RoaXM3Ll9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzNy5rZXlNb2RzID0gewogICAgICBjdHJsQ21kOiBmYWxzZSwKICAgICAgYWx0OiBmYWxzZQogICAgfTsKICAgIF90aGlzNy5jb250cm9sbGVyID0gbnVsbDsKICAgIF90aGlzNy5vblNob3dFbWl0dGVyID0gX3RoaXM3Ll9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzNy5vblNob3cgPSBfdGhpczcub25TaG93RW1pdHRlci5ldmVudDsKICAgIF90aGlzNy5vbkhpZGVFbWl0dGVyID0gX3RoaXM3Ll9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzNy5vbkhpZGUgPSBfdGhpczcub25IaWRlRW1pdHRlci5ldmVudDsKICAgIF90aGlzNy5pZFByZWZpeCA9IG9wdGlvbnMuaWRQcmVmaXg7CiAgICBfdGhpczcucGFyZW50RWxlbWVudCA9IG9wdGlvbnMuY29udGFpbmVyOwogICAgX3RoaXM3LnN0eWxlcyA9IG9wdGlvbnMuc3R5bGVzOwogICAgX3RoaXM3LnJlZ2lzdGVyS2V5TW9kc0xpc3RlbmVycygpOwogICAgcmV0dXJuIF90aGlzNzsKICB9CiAgX2NyZWF0ZUNsYXNzKFF1aWNrSW5wdXRDb250cm9sbGVyLCBbewogICAga2V5OiAicmVnaXN0ZXJLZXlNb2RzTGlzdGVuZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlcktleU1vZHNMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiBsaXN0ZW5lcihlKSB7CiAgICAgICAgX3RoaXM4LmtleU1vZHMuY3RybENtZCA9IGUuY3RybEtleSB8fCBlLm1ldGFLZXk7CiAgICAgICAgX3RoaXM4LmtleU1vZHMuYWx0ID0gZS5hbHRLZXk7CiAgICAgIH07CiAgICAgIHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIod2luZG93LCBkb20uRXZlbnRUeXBlLktFWV9ET1dOLCBsaXN0ZW5lciwgdHJ1ZSkpOwogICAgICB0aGlzLl9yZWdpc3Rlcihkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHdpbmRvdywgZG9tLkV2ZW50VHlwZS5LRVlfVVAsIGxpc3RlbmVyLCB0cnVlKSk7CiAgICAgIHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIod2luZG93LCBkb20uRXZlbnRUeXBlLk1PVVNFX0RPV04sIGxpc3RlbmVyLCB0cnVlKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VUkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVJKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgaWYgKHRoaXMudWkpIHsKICAgICAgICByZXR1cm4gdGhpcy51aTsKICAgICAgfQogICAgICB2YXIgY29udGFpbmVyID0gZG9tLmFwcGVuZCh0aGlzLnBhcmVudEVsZW1lbnQsICQoJy5xdWljay1pbnB1dC13aWRnZXQuc2hvdy1maWxlLWljb25zJykpOwogICAgICBjb250YWluZXIudGFiSW5kZXggPSAtMTsKICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIHZhciBzdHlsZVNoZWV0ID0gZG9tLmNyZWF0ZVN0eWxlU2hlZXQoY29udGFpbmVyKTsKICAgICAgdmFyIHRpdGxlQmFyID0gZG9tLmFwcGVuZChjb250YWluZXIsICQoJy5xdWljay1pbnB1dC10aXRsZWJhcicpKTsKICAgICAgdmFyIGxlZnRBY3Rpb25CYXIgPSB0aGlzLl9yZWdpc3RlcihuZXcgQWN0aW9uQmFyKHRpdGxlQmFyKSk7CiAgICAgIGxlZnRBY3Rpb25CYXIuZG9tTm9kZS5jbGFzc0xpc3QuYWRkKCdxdWljay1pbnB1dC1sZWZ0LWFjdGlvbi1iYXInKTsKICAgICAgdmFyIHRpdGxlID0gZG9tLmFwcGVuZCh0aXRsZUJhciwgJCgnLnF1aWNrLWlucHV0LXRpdGxlJykpOwogICAgICB2YXIgcmlnaHRBY3Rpb25CYXIgPSB0aGlzLl9yZWdpc3RlcihuZXcgQWN0aW9uQmFyKHRpdGxlQmFyKSk7CiAgICAgIHJpZ2h0QWN0aW9uQmFyLmRvbU5vZGUuY2xhc3NMaXN0LmFkZCgncXVpY2staW5wdXQtcmlnaHQtYWN0aW9uLWJhcicpOwogICAgICB2YXIgZGVzY3JpcHRpb24xID0gZG9tLmFwcGVuZChjb250YWluZXIsICQoJy5xdWljay1pbnB1dC1kZXNjcmlwdGlvbicpKTsKICAgICAgdmFyIGhlYWRlckNvbnRhaW5lciA9IGRvbS5hcHBlbmQoY29udGFpbmVyLCAkKCcucXVpY2staW5wdXQtaGVhZGVyJykpOwogICAgICB2YXIgY2hlY2tBbGwgPSBkb20uYXBwZW5kKGhlYWRlckNvbnRhaW5lciwgJCgnaW5wdXQucXVpY2staW5wdXQtY2hlY2stYWxsJykpOwogICAgICBjaGVja0FsbC50eXBlID0gJ2NoZWNrYm94JzsKICAgICAgY2hlY2tBbGwuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbG9jYWxpemUoJ3F1aWNrSW5wdXQuY2hlY2tBbGwnLCAiVG9nZ2xlIGFsbCBjaGVja2JveGVzIikpOwogICAgICB0aGlzLl9yZWdpc3Rlcihkb20uYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXIoY2hlY2tBbGwsIGRvbS5FdmVudFR5cGUuQ0hBTkdFLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBjaGVja2VkID0gY2hlY2tBbGwuY2hlY2tlZDsKICAgICAgICBsaXN0LnNldEFsbFZpc2libGVDaGVja2VkKGNoZWNrZWQpOwogICAgICB9KSk7CiAgICAgIHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoY2hlY2tBbGwsIGRvbS5FdmVudFR5cGUuQ0xJQ0ssIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKGUueCB8fCBlLnkpIHsKICAgICAgICAgIC8vIEF2b2lkICdjbGljaycgdHJpZ2dlcmVkIGJ5ICdzcGFjZScuLi4KICAgICAgICAgIGlucHV0Qm94LnNldEZvY3VzKCk7CiAgICAgICAgfQogICAgICB9KSk7CiAgICAgIHZhciBkZXNjcmlwdGlvbjIgPSBkb20uYXBwZW5kKGhlYWRlckNvbnRhaW5lciwgJCgnLnF1aWNrLWlucHV0LWRlc2NyaXB0aW9uJykpOwogICAgICB2YXIgZXh0cmFDb250YWluZXIgPSBkb20uYXBwZW5kKGhlYWRlckNvbnRhaW5lciwgJCgnLnF1aWNrLWlucHV0LWFuZC1tZXNzYWdlJykpOwogICAgICB2YXIgZmlsdGVyQ29udGFpbmVyID0gZG9tLmFwcGVuZChleHRyYUNvbnRhaW5lciwgJCgnLnF1aWNrLWlucHV0LWZpbHRlcicpKTsKICAgICAgdmFyIGlucHV0Qm94ID0gdGhpcy5fcmVnaXN0ZXIobmV3IFF1aWNrSW5wdXRCb3goZmlsdGVyQ29udGFpbmVyKSk7CiAgICAgIGlucHV0Qm94LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsICIiLmNvbmNhdCh0aGlzLmlkUHJlZml4LCAibWVzc2FnZSIpKTsKICAgICAgdmFyIHZpc2libGVDb3VudENvbnRhaW5lciA9IGRvbS5hcHBlbmQoZmlsdGVyQ29udGFpbmVyLCAkKCcucXVpY2staW5wdXQtdmlzaWJsZS1jb3VudCcpKTsKICAgICAgdmlzaWJsZUNvdW50Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpOwogICAgICB2aXNpYmxlQ291bnRDb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWF0b21pYycsICd0cnVlJyk7CiAgICAgIHZhciB2aXNpYmxlQ291bnQgPSBuZXcgQ291bnRCYWRnZSh2aXNpYmxlQ291bnRDb250YWluZXIsIHsKICAgICAgICBjb3VudEZvcm1hdDogbG9jYWxpemUoewogICAgICAgICAga2V5OiAncXVpY2tJbnB1dC52aXNpYmxlQ291bnQnLAogICAgICAgICAgY29tbWVudDogWydUaGlzIHRlbGxzIHRoZSB1c2VyIGhvdyBtYW55IGl0ZW1zIGFyZSBzaG93biBpbiBhIGxpc3Qgb2YgaXRlbXMgdG8gc2VsZWN0IGZyb20uIFRoZSBpdGVtcyBjYW4gYmUgYW55dGhpbmcuIEN1cnJlbnRseSBub3QgdmlzaWJsZSwgYnV0IHJlYWQgYnkgc2NyZWVuIHJlYWRlcnMuJ10KICAgICAgICB9LCAiezB9IFJlc3VsdHMiKQogICAgICB9KTsKICAgICAgdmFyIGNvdW50Q29udGFpbmVyID0gZG9tLmFwcGVuZChmaWx0ZXJDb250YWluZXIsICQoJy5xdWljay1pbnB1dC1jb3VudCcpKTsKICAgICAgY291bnRDb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAncG9saXRlJyk7CiAgICAgIHZhciBjb3VudCA9IG5ldyBDb3VudEJhZGdlKGNvdW50Q29udGFpbmVyLCB7CiAgICAgICAgY291bnRGb3JtYXQ6IGxvY2FsaXplKHsKICAgICAgICAgIGtleTogJ3F1aWNrSW5wdXQuY291bnRTZWxlY3RlZCcsCiAgICAgICAgICBjb21tZW50OiBbJ1RoaXMgdGVsbHMgdGhlIHVzZXIgaG93IG1hbnkgaXRlbXMgYXJlIHNlbGVjdGVkIGluIGEgbGlzdCBvZiBpdGVtcyB0byBzZWxlY3QgZnJvbS4gVGhlIGl0ZW1zIGNhbiBiZSBhbnl0aGluZy4nXQogICAgICAgIH0sICJ7MH0gU2VsZWN0ZWQiKQogICAgICB9KTsKICAgICAgdmFyIG9rQ29udGFpbmVyID0gZG9tLmFwcGVuZChoZWFkZXJDb250YWluZXIsICQoJy5xdWljay1pbnB1dC1hY3Rpb24nKSk7CiAgICAgIHZhciBvayA9IG5ldyBCdXR0b24ob2tDb250YWluZXIpOwogICAgICBvay5sYWJlbCA9IGxvY2FsaXplKCdvaycsICJPSyIpOwogICAgICB0aGlzLl9yZWdpc3Rlcihvay5vbkRpZENsaWNrKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXM5Lm9uRGlkQWNjZXB0RW1pdHRlci5maXJlKCk7CiAgICAgIH0pKTsKICAgICAgdmFyIGN1c3RvbUJ1dHRvbkNvbnRhaW5lciA9IGRvbS5hcHBlbmQoaGVhZGVyQ29udGFpbmVyLCAkKCcucXVpY2staW5wdXQtYWN0aW9uJykpOwogICAgICB2YXIgY3VzdG9tQnV0dG9uID0gbmV3IEJ1dHRvbihjdXN0b21CdXR0b25Db250YWluZXIpOwogICAgICBjdXN0b21CdXR0b24ubGFiZWwgPSBsb2NhbGl6ZSgnY3VzdG9tJywgIkN1c3RvbSIpOwogICAgICB0aGlzLl9yZWdpc3RlcihjdXN0b21CdXR0b24ub25EaWRDbGljayhmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzOS5vbkRpZEN1c3RvbUVtaXR0ZXIuZmlyZSgpOwogICAgICB9KSk7CiAgICAgIHZhciBtZXNzYWdlID0gZG9tLmFwcGVuZChleHRyYUNvbnRhaW5lciwgJCgiIyIuY29uY2F0KHRoaXMuaWRQcmVmaXgsICJtZXNzYWdlLnF1aWNrLWlucHV0LW1lc3NhZ2UiKSkpOwogICAgICB2YXIgbGlzdCA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBRdWlja0lucHV0TGlzdChjb250YWluZXIsIHRoaXMuaWRQcmVmaXggKyAnbGlzdCcsIHRoaXMub3B0aW9ucykpOwogICAgICB0aGlzLl9yZWdpc3RlcihsaXN0Lm9uQ2hhbmdlZEFsbFZpc2libGVDaGVja2VkKGZ1bmN0aW9uIChjaGVja2VkKSB7CiAgICAgICAgY2hlY2tBbGwuY2hlY2tlZCA9IGNoZWNrZWQ7CiAgICAgIH0pKTsKICAgICAgdGhpcy5fcmVnaXN0ZXIobGlzdC5vbkNoYW5nZWRWaXNpYmxlQ291bnQoZnVuY3Rpb24gKGMpIHsKICAgICAgICB2aXNpYmxlQ291bnQuc2V0Q291bnQoYyk7CiAgICAgIH0pKTsKICAgICAgdGhpcy5fcmVnaXN0ZXIobGlzdC5vbkNoYW5nZWRDaGVja2VkQ291bnQoZnVuY3Rpb24gKGMpIHsKICAgICAgICBjb3VudC5zZXRDb3VudChjKTsKICAgICAgfSkpOwogICAgICB0aGlzLl9yZWdpc3RlcihsaXN0Lm9uTGVhdmUoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIERlZmVyIHRvIGF2b2lkIHRoZSBpbnB1dCBmaWVsZCByZWFjdGluZyB0byB0aGUgdHJpZ2dlcmluZyBrZXkuCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpbnB1dEJveC5zZXRGb2N1cygpOwogICAgICAgICAgaWYgKF90aGlzOS5jb250cm9sbGVyIGluc3RhbmNlb2YgUXVpY2tQaWNrICYmIF90aGlzOS5jb250cm9sbGVyLmNhblNlbGVjdE1hbnkpIHsKICAgICAgICAgICAgbGlzdC5jbGVhckZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMCk7CiAgICAgIH0pKTsKICAgICAgdGhpcy5fcmVnaXN0ZXIobGlzdC5vbkRpZENoYW5nZUZvY3VzKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXM5LmNvbWJvYm94QWNjZXNzaWJpbGl0eSkgewogICAgICAgICAgX3RoaXM5LmdldFVJKCkuaW5wdXRCb3guc2V0QXR0cmlidXRlKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLCBfdGhpczkuZ2V0VUkoKS5saXN0LmdldEFjdGl2ZURlc2NlbmRhbnQoKSB8fCAnJyk7CiAgICAgICAgfQogICAgICB9KSk7CiAgICAgIHZhciBwcm9ncmVzc0JhciA9IG5ldyBQcm9ncmVzc0Jhcihjb250YWluZXIpOwogICAgICBwcm9ncmVzc0Jhci5nZXRDb250YWluZXIoKS5jbGFzc0xpc3QuYWRkKCdxdWljay1pbnB1dC1wcm9ncmVzcycpOwogICAgICB2YXIgZm9jdXNUcmFja2VyID0gZG9tLnRyYWNrRm9jdXMoY29udGFpbmVyKTsKICAgICAgdGhpcy5fcmVnaXN0ZXIoZm9jdXNUcmFja2VyKTsKICAgICAgdGhpcy5fcmVnaXN0ZXIoZG9tLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihjb250YWluZXIsIGRvbS5FdmVudFR5cGUuRk9DVVMsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXM5LnByZXZpb3VzRm9jdXNFbGVtZW50ID0gZS5yZWxhdGVkVGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgPyBlLnJlbGF0ZWRUYXJnZXQgOiB1bmRlZmluZWQ7CiAgICAgIH0sIHRydWUpKTsKICAgICAgdGhpcy5fcmVnaXN0ZXIoZm9jdXNUcmFja2VyLm9uRGlkQmx1cihmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCFfdGhpczkuZ2V0VUkoKS5pZ25vcmVGb2N1c091dCAmJiAhX3RoaXM5Lm9wdGlvbnMuaWdub3JlRm9jdXNPdXQoKSkgewogICAgICAgICAgX3RoaXM5LmhpZGUoUXVpY2tJbnB1dEhpZGVSZWFzb24uQmx1cik7CiAgICAgICAgfQogICAgICAgIF90aGlzOS5wcmV2aW91c0ZvY3VzRWxlbWVudCA9IHVuZGVmaW5lZDsKICAgICAgfSkpOwogICAgICB0aGlzLl9yZWdpc3Rlcihkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGNvbnRhaW5lciwgZG9tLkV2ZW50VHlwZS5GT0NVUywgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpbnB1dEJveC5zZXRGb2N1cygpOwogICAgICB9KSk7CiAgICAgIHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoY29udGFpbmVyLCBkb20uRXZlbnRUeXBlLktFWV9ET1dOLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBldmVudCA9IG5ldyBTdGFuZGFyZEtleWJvYXJkRXZlbnQoZSk7CiAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7CiAgICAgICAgICBjYXNlIDMgLyogS2V5Q29kZS5FbnRlciAqLzoKICAgICAgICAgICAgZG9tLkV2ZW50SGVscGVyLnN0b3AoZSwgdHJ1ZSk7CiAgICAgICAgICAgIF90aGlzOS5vbkRpZEFjY2VwdEVtaXR0ZXIuZmlyZSgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgOSAvKiBLZXlDb2RlLkVzY2FwZSAqLzoKICAgICAgICAgICAgZG9tLkV2ZW50SGVscGVyLnN0b3AoZSwgdHJ1ZSk7CiAgICAgICAgICAgIF90aGlzOS5oaWRlKFF1aWNrSW5wdXRIaWRlUmVhc29uLkdlc3R1cmUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMiAvKiBLZXlDb2RlLlRhYiAqLzoKICAgICAgICAgICAgaWYgKCFldmVudC5hbHRLZXkgJiYgIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50Lm1ldGFLZXkpIHsKICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0gWycuYWN0aW9uLWxhYmVsLmNvZGljb24nXTsKICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1jaGVja2JveGVzJykpIHsKICAgICAgICAgICAgICAgIHNlbGVjdG9ycy5wdXNoKCdpbnB1dCcpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZWxlY3RvcnMucHVzaCgnaW5wdXRbdHlwZT10ZXh0XScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoX3RoaXM5LmdldFVJKCkubGlzdC5pc0Rpc3BsYXllZCgpKSB7CiAgICAgICAgICAgICAgICBzZWxlY3RvcnMucHVzaCgnLm1vbmFjby1saXN0Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHZhciBzdG9wcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5qb2luKCcsICcpKTsKICAgICAgICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkgJiYgZXZlbnQudGFyZ2V0ID09PSBzdG9wc1swXSkgewogICAgICAgICAgICAgICAgZG9tLkV2ZW50SGVscGVyLnN0b3AoZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBzdG9wc1tzdG9wcy5sZW5ndGggLSAxXS5mb2N1cygpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIGV2ZW50LnRhcmdldCA9PT0gc3RvcHNbc3RvcHMubGVuZ3RoIC0gMV0pIHsKICAgICAgICAgICAgICAgIGRvbS5FdmVudEhlbHBlci5zdG9wKGUsIHRydWUpOwogICAgICAgICAgICAgICAgc3RvcHNbMF0uZm9jdXMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9KSk7CiAgICAgIHRoaXMudWkgPSB7CiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsCiAgICAgICAgc3R5bGVTaGVldDogc3R5bGVTaGVldCwKICAgICAgICBsZWZ0QWN0aW9uQmFyOiBsZWZ0QWN0aW9uQmFyLAogICAgICAgIHRpdGxlQmFyOiB0aXRsZUJhciwKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgZGVzY3JpcHRpb24xOiBkZXNjcmlwdGlvbjEsCiAgICAgICAgZGVzY3JpcHRpb24yOiBkZXNjcmlwdGlvbjIsCiAgICAgICAgcmlnaHRBY3Rpb25CYXI6IHJpZ2h0QWN0aW9uQmFyLAogICAgICAgIGNoZWNrQWxsOiBjaGVja0FsbCwKICAgICAgICBmaWx0ZXJDb250YWluZXI6IGZpbHRlckNvbnRhaW5lciwKICAgICAgICBpbnB1dEJveDogaW5wdXRCb3gsCiAgICAgICAgdmlzaWJsZUNvdW50Q29udGFpbmVyOiB2aXNpYmxlQ291bnRDb250YWluZXIsCiAgICAgICAgdmlzaWJsZUNvdW50OiB2aXNpYmxlQ291bnQsCiAgICAgICAgY291bnRDb250YWluZXI6IGNvdW50Q29udGFpbmVyLAogICAgICAgIGNvdW50OiBjb3VudCwKICAgICAgICBva0NvbnRhaW5lcjogb2tDb250YWluZXIsCiAgICAgICAgb2s6IG9rLAogICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgY3VzdG9tQnV0dG9uQ29udGFpbmVyOiBjdXN0b21CdXR0b25Db250YWluZXIsCiAgICAgICAgY3VzdG9tQnV0dG9uOiBjdXN0b21CdXR0b24sCiAgICAgICAgbGlzdDogbGlzdCwKICAgICAgICBwcm9ncmVzc0JhcjogcHJvZ3Jlc3NCYXIsCiAgICAgICAgb25EaWRBY2NlcHQ6IHRoaXMub25EaWRBY2NlcHRFbWl0dGVyLmV2ZW50LAogICAgICAgIG9uRGlkQ3VzdG9tOiB0aGlzLm9uRGlkQ3VzdG9tRW1pdHRlci5ldmVudCwKICAgICAgICBvbkRpZFRyaWdnZXJCdXR0b246IHRoaXMub25EaWRUcmlnZ2VyQnV0dG9uRW1pdHRlci5ldmVudCwKICAgICAgICBpZ25vcmVGb2N1c091dDogZmFsc2UsCiAgICAgICAga2V5TW9kczogdGhpcy5rZXlNb2RzLAogICAgICAgIGlzU2NyZWVuUmVhZGVyT3B0aW1pemVkOiBmdW5jdGlvbiBpc1NjcmVlblJlYWRlck9wdGltaXplZCgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkub3B0aW9ucy5pc1NjcmVlblJlYWRlck9wdGltaXplZCgpOwogICAgICAgIH0sCiAgICAgICAgc2hvdzogZnVuY3Rpb24gc2hvdyhjb250cm9sbGVyKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM5LnNob3coY29udHJvbGxlcik7CiAgICAgICAgfSwKICAgICAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzOS5oaWRlKCk7CiAgICAgICAgfSwKICAgICAgICBzZXRWaXNpYmlsaXRpZXM6IGZ1bmN0aW9uIHNldFZpc2liaWxpdGllcyh2aXNpYmlsaXRpZXMpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuc2V0VmlzaWJpbGl0aWVzKHZpc2liaWxpdGllcyk7CiAgICAgICAgfSwKICAgICAgICBzZXRDb21ib2JveEFjY2Vzc2liaWxpdHk6IGZ1bmN0aW9uIHNldENvbWJvYm94QWNjZXNzaWJpbGl0eShlbmFibGVkKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM5LnNldENvbWJvYm94QWNjZXNzaWJpbGl0eShlbmFibGVkKTsKICAgICAgICB9LAogICAgICAgIHNldEVuYWJsZWQ6IGZ1bmN0aW9uIHNldEVuYWJsZWQoZW5hYmxlZCkgewogICAgICAgICAgcmV0dXJuIF90aGlzOS5zZXRFbmFibGVkKGVuYWJsZWQpOwogICAgICAgIH0sCiAgICAgICAgc2V0Q29udGV4dEtleTogZnVuY3Rpb24gc2V0Q29udGV4dEtleShjb250ZXh0S2V5KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM5Lm9wdGlvbnMuc2V0Q29udGV4dEtleShjb250ZXh0S2V5KTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7CiAgICAgIHJldHVybiB0aGlzLnVpOwogICAgfQogIH0sIHsKICAgIGtleTogInBpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBpY2socGlja3MpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHZhciB0b2tlbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogQ2FuY2VsbGF0aW9uVG9rZW4uTm9uZTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChkb1Jlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBfcmVzb2x2ZSA9IGZ1bmN0aW9uIHJlc29sdmUocmVzdWx0KSB7CiAgICAgICAgICB2YXIgX2E7CiAgICAgICAgICBfcmVzb2x2ZSA9IGRvUmVzb2x2ZTsKICAgICAgICAgIChfYSA9IG9wdGlvbnMub25LZXlNb2RzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChvcHRpb25zLCBpbnB1dC5rZXlNb2RzKTsKICAgICAgICAgIGRvUmVzb2x2ZShyZXN1bHQpOwogICAgICAgIH07CiAgICAgICAgaWYgKHRva2VuLmlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKSB7CiAgICAgICAgICBfcmVzb2x2ZSh1bmRlZmluZWQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgaW5wdXQgPSBfdGhpczEwLmNyZWF0ZVF1aWNrUGljaygpOwogICAgICAgIHZhciBhY3RpdmVJdGVtOwogICAgICAgIHZhciBkaXNwb3NhYmxlcyA9IFtpbnB1dCwgaW5wdXQub25EaWRBY2NlcHQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKGlucHV0LmNhblNlbGVjdE1hbnkpIHsKICAgICAgICAgICAgX3Jlc29sdmUoaW5wdXQuc2VsZWN0ZWRJdGVtcy5zbGljZSgpKTsKICAgICAgICAgICAgaW5wdXQuaGlkZSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGlucHV0LmFjdGl2ZUl0ZW1zWzBdOwogICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgX3Jlc29sdmUocmVzdWx0KTsKICAgICAgICAgICAgICBpbnB1dC5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KSwgaW5wdXQub25EaWRDaGFuZ2VBY3RpdmUoZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICAgICAgICB2YXIgZm9jdXNlZCA9IGl0ZW1zWzBdOwogICAgICAgICAgaWYgKGZvY3VzZWQgJiYgb3B0aW9ucy5vbkRpZEZvY3VzKSB7CiAgICAgICAgICAgIG9wdGlvbnMub25EaWRGb2N1cyhmb2N1c2VkKTsKICAgICAgICAgIH0KICAgICAgICB9KSwgaW5wdXQub25EaWRDaGFuZ2VTZWxlY3Rpb24oZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICAgICAgICBpZiAoIWlucHV0LmNhblNlbGVjdE1hbnkpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZW1zWzBdOwogICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgX3Jlc29sdmUocmVzdWx0KTsKICAgICAgICAgICAgICBpbnB1dC5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KSwgaW5wdXQub25EaWRUcmlnZ2VySXRlbUJ1dHRvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvcHRpb25zLm9uRGlkVHJpZ2dlckl0ZW1CdXR0b24gJiYgb3B0aW9ucy5vbkRpZFRyaWdnZXJJdGVtQnV0dG9uKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZXZlbnQpLCB7CiAgICAgICAgICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uIHJlbW92ZUl0ZW0oKSB7CiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5wdXQuaXRlbXMuaW5kZXhPZihldmVudC5pdGVtKTsKICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBpbnB1dC5pdGVtcy5zbGljZSgpOwogICAgICAgICAgICAgICAgdmFyIHJlbW92ZWQgPSBpdGVtcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUl0ZW1zID0gaW5wdXQuYWN0aXZlSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChhY3RpdmVJdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhY3RpdmVJdGVtICE9PSByZW1vdmVkWzBdOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIga2VlcFNjcm9sbFBvc2l0aW9uQmVmb3JlID0gaW5wdXQua2VlcFNjcm9sbFBvc2l0aW9uOwogICAgICAgICAgICAgICAgaW5wdXQua2VlcFNjcm9sbFBvc2l0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlucHV0Lml0ZW1zID0gaXRlbXM7CiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbXMpIHsKICAgICAgICAgICAgICAgICAgaW5wdXQuYWN0aXZlSXRlbXMgPSBhY3RpdmVJdGVtczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlucHV0LmtlZXBTY3JvbGxQb3NpdGlvbiA9IGtlZXBTY3JvbGxQb3NpdGlvbkJlZm9yZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9KSwgaW5wdXQub25EaWRDaGFuZ2VWYWx1ZShmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIGlmIChhY3RpdmVJdGVtICYmICF2YWx1ZSAmJiAoaW5wdXQuYWN0aXZlSXRlbXMubGVuZ3RoICE9PSAxIHx8IGlucHV0LmFjdGl2ZUl0ZW1zWzBdICE9PSBhY3RpdmVJdGVtKSkgewogICAgICAgICAgICBpbnB1dC5hY3RpdmVJdGVtcyA9IFthY3RpdmVJdGVtXTsKICAgICAgICAgIH0KICAgICAgICB9KSwgdG9rZW4ub25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaW5wdXQuaGlkZSgpOwogICAgICAgIH0pLCBpbnB1dC5vbkRpZEhpZGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgZGlzcG9zZShkaXNwb3NhYmxlcyk7CiAgICAgICAgICBfcmVzb2x2ZSh1bmRlZmluZWQpOwogICAgICAgIH0pXTsKICAgICAgICBpbnB1dC50aXRsZSA9IG9wdGlvbnMudGl0bGU7CiAgICAgICAgaW5wdXQuY2FuU2VsZWN0TWFueSA9ICEhb3B0aW9ucy5jYW5QaWNrTWFueTsKICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IG9wdGlvbnMucGxhY2VIb2xkZXI7CiAgICAgICAgaW5wdXQuaWdub3JlRm9jdXNPdXQgPSAhIW9wdGlvbnMuaWdub3JlRm9jdXNMb3N0OwogICAgICAgIGlucHV0Lm1hdGNoT25EZXNjcmlwdGlvbiA9ICEhb3B0aW9ucy5tYXRjaE9uRGVzY3JpcHRpb247CiAgICAgICAgaW5wdXQubWF0Y2hPbkRldGFpbCA9ICEhb3B0aW9ucy5tYXRjaE9uRGV0YWlsOwogICAgICAgIGlucHV0Lm1hdGNoT25MYWJlbCA9IG9wdGlvbnMubWF0Y2hPbkxhYmVsID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5tYXRjaE9uTGFiZWw7IC8vIGRlZmF1bHQgdG8gdHJ1ZQogICAgICAgIGlucHV0LmF1dG9Gb2N1c09uTGlzdCA9IG9wdGlvbnMuYXV0b0ZvY3VzT25MaXN0ID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5hdXRvRm9jdXNPbkxpc3Q7IC8vIGRlZmF1bHQgdG8gdHJ1ZQogICAgICAgIGlucHV0LnF1aWNrTmF2aWdhdGUgPSBvcHRpb25zLnF1aWNrTmF2aWdhdGU7CiAgICAgICAgaW5wdXQuaGlkZUlucHV0ID0gISFvcHRpb25zLmhpZGVJbnB1dDsKICAgICAgICBpbnB1dC5jb250ZXh0S2V5ID0gb3B0aW9ucy5jb250ZXh0S2V5OwogICAgICAgIGlucHV0LmJ1c3kgPSB0cnVlOwogICAgICAgIFByb21pc2UuYWxsKFtwaWNrcywgb3B0aW9ucy5hY3RpdmVJdGVtXSkudGhlbihmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgIHZhciBfcmVmMyA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKSwKICAgICAgICAgICAgaXRlbXMgPSBfcmVmM1swXSwKICAgICAgICAgICAgX2FjdGl2ZUl0ZW0gPSBfcmVmM1sxXTsKICAgICAgICAgIGFjdGl2ZUl0ZW0gPSBfYWN0aXZlSXRlbTsKICAgICAgICAgIGlucHV0LmJ1c3kgPSBmYWxzZTsKICAgICAgICAgIGlucHV0Lml0ZW1zID0gaXRlbXM7CiAgICAgICAgICBpZiAoaW5wdXQuY2FuU2VsZWN0TWFueSkgewogICAgICAgICAgICBpbnB1dC5zZWxlY3RlZEl0ZW1zID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udHlwZSAhPT0gJ3NlcGFyYXRvcicgJiYgaXRlbS5waWNrZWQ7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHsKICAgICAgICAgICAgaW5wdXQuYWN0aXZlSXRlbXMgPSBbYWN0aXZlSXRlbV07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaW5wdXQuc2hvdygpOwogICAgICAgIFByb21pc2UucmVzb2x2ZShwaWNrcykudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgaW5wdXQuaGlkZSgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVRdWlja1BpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVF1aWNrUGljaygpIHsKICAgICAgdmFyIHVpID0gdGhpcy5nZXRVSSgpOwogICAgICByZXR1cm4gbmV3IFF1aWNrUGljayh1aSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdyhjb250cm9sbGVyKSB7CiAgICAgIHZhciB1aSA9IHRoaXMuZ2V0VUkoKTsKICAgICAgdGhpcy5vblNob3dFbWl0dGVyLmZpcmUoKTsKICAgICAgdmFyIG9sZENvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xsZXI7CiAgICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7CiAgICAgIGlmIChvbGRDb250cm9sbGVyKSB7CiAgICAgICAgb2xkQ29udHJvbGxlci5kaWRIaWRlKCk7CiAgICAgIH0KICAgICAgdGhpcy5zZXRFbmFibGVkKHRydWUpOwogICAgICB1aS5sZWZ0QWN0aW9uQmFyLmNsZWFyKCk7CiAgICAgIHVpLnRpdGxlLnRleHRDb250ZW50ID0gJyc7CiAgICAgIHVpLmRlc2NyaXB0aW9uMS50ZXh0Q29udGVudCA9ICcnOwogICAgICB1aS5kZXNjcmlwdGlvbjIudGV4dENvbnRlbnQgPSAnJzsKICAgICAgdWkucmlnaHRBY3Rpb25CYXIuY2xlYXIoKTsKICAgICAgdWkuY2hlY2tBbGwuY2hlY2tlZCA9IGZhbHNlOwogICAgICAvLyB1aS5pbnB1dEJveC52YWx1ZSA9ICcnOyBBdm9pZCB0cmlnZ2VyaW5nIGFuIGV2ZW50LgogICAgICB1aS5pbnB1dEJveC5wbGFjZWhvbGRlciA9ICcnOwogICAgICB1aS5pbnB1dEJveC5wYXNzd29yZCA9IGZhbHNlOwogICAgICB1aS5pbnB1dEJveC5zaG93RGVjb3JhdGlvbihTZXZlcml0eS5JZ25vcmUpOwogICAgICB1aS52aXNpYmxlQ291bnQuc2V0Q291bnQoMCk7CiAgICAgIHVpLmNvdW50LnNldENvdW50KDApOwogICAgICBkb20ucmVzZXQodWkubWVzc2FnZSk7CiAgICAgIHVpLnByb2dyZXNzQmFyLnN0b3AoKTsKICAgICAgdWkubGlzdC5zZXRFbGVtZW50cyhbXSk7CiAgICAgIHVpLmxpc3QubWF0Y2hPbkRlc2NyaXB0aW9uID0gZmFsc2U7CiAgICAgIHVpLmxpc3QubWF0Y2hPbkRldGFpbCA9IGZhbHNlOwogICAgICB1aS5saXN0Lm1hdGNoT25MYWJlbCA9IHRydWU7CiAgICAgIHVpLmxpc3Quc29ydEJ5TGFiZWwgPSB0cnVlOwogICAgICB1aS5pZ25vcmVGb2N1c091dCA9IGZhbHNlOwogICAgICB0aGlzLnNldENvbWJvYm94QWNjZXNzaWJpbGl0eShmYWxzZSk7CiAgICAgIHVpLmlucHV0Qm94LmFyaWFMYWJlbCA9ICcnOwogICAgICB2YXIgYmFja0tleWJpbmRpbmdMYWJlbCA9IHRoaXMub3B0aW9ucy5iYWNrS2V5YmluZGluZ0xhYmVsKCk7CiAgICAgIGJhY2tCdXR0b24udG9vbHRpcCA9IGJhY2tLZXliaW5kaW5nTGFiZWwgPyBsb2NhbGl6ZSgncXVpY2tJbnB1dC5iYWNrV2l0aEtleWJpbmRpbmcnLCAiQmFjayAoezB9KSIsIGJhY2tLZXliaW5kaW5nTGFiZWwpIDogbG9jYWxpemUoJ3F1aWNrSW5wdXQuYmFjaycsICJCYWNrIik7CiAgICAgIHVpLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7CiAgICAgIHVpLmlucHV0Qm94LnNldEZvY3VzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VmlzaWJpbGl0aWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWaXNpYmlsaXRpZXModmlzaWJpbGl0aWVzKSB7CiAgICAgIHZhciB1aSA9IHRoaXMuZ2V0VUkoKTsKICAgICAgdWkudGl0bGUuc3R5bGUuZGlzcGxheSA9IHZpc2liaWxpdGllcy50aXRsZSA/ICcnIDogJ25vbmUnOwogICAgICB1aS5kZXNjcmlwdGlvbjEuc3R5bGUuZGlzcGxheSA9IHZpc2liaWxpdGllcy5kZXNjcmlwdGlvbiAmJiAodmlzaWJpbGl0aWVzLmlucHV0Qm94IHx8IHZpc2liaWxpdGllcy5jaGVja0FsbCkgPyAnJyA6ICdub25lJzsKICAgICAgdWkuZGVzY3JpcHRpb24yLnN0eWxlLmRpc3BsYXkgPSB2aXNpYmlsaXRpZXMuZGVzY3JpcHRpb24gJiYgISh2aXNpYmlsaXRpZXMuaW5wdXRCb3ggfHwgdmlzaWJpbGl0aWVzLmNoZWNrQWxsKSA/ICcnIDogJ25vbmUnOwogICAgICB1aS5jaGVja0FsbC5zdHlsZS5kaXNwbGF5ID0gdmlzaWJpbGl0aWVzLmNoZWNrQWxsID8gJycgOiAnbm9uZSc7CiAgICAgIHVpLmZpbHRlckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gdmlzaWJpbGl0aWVzLmlucHV0Qm94ID8gJycgOiAnbm9uZSc7CiAgICAgIHVpLnZpc2libGVDb3VudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gdmlzaWJpbGl0aWVzLnZpc2libGVDb3VudCA/ICcnIDogJ25vbmUnOwogICAgICB1aS5jb3VudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gdmlzaWJpbGl0aWVzLmNvdW50ID8gJycgOiAnbm9uZSc7CiAgICAgIHVpLm9rQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSB2aXNpYmlsaXRpZXMub2sgPyAnJyA6ICdub25lJzsKICAgICAgdWkuY3VzdG9tQnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSB2aXNpYmlsaXRpZXMuY3VzdG9tQnV0dG9uID8gJycgOiAnbm9uZSc7CiAgICAgIHVpLm1lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9IHZpc2liaWxpdGllcy5tZXNzYWdlID8gJycgOiAnbm9uZSc7CiAgICAgIHVpLnByb2dyZXNzQmFyLmdldENvbnRhaW5lcigpLnN0eWxlLmRpc3BsYXkgPSB2aXNpYmlsaXRpZXMucHJvZ3Jlc3NCYXIgPyAnJyA6ICdub25lJzsKICAgICAgdWkubGlzdC5kaXNwbGF5KCEhdmlzaWJpbGl0aWVzLmxpc3QpOwogICAgICB1aS5jb250YWluZXIuY2xhc3NMaXN0W3Zpc2liaWxpdGllcy5jaGVja0JveCA/ICdhZGQnIDogJ3JlbW92ZSddKCdzaG93LWNoZWNrYm94ZXMnKTsKICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTsgLy8gVE9ETwogICAgfQogIH0sIHsKICAgIGtleTogInNldENvbWJvYm94QWNjZXNzaWJpbGl0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q29tYm9ib3hBY2Nlc3NpYmlsaXR5KGVuYWJsZWQpIHsKICAgICAgaWYgKGVuYWJsZWQgIT09IHRoaXMuY29tYm9ib3hBY2Nlc3NpYmlsaXR5KSB7CiAgICAgICAgdmFyIHVpID0gdGhpcy5nZXRVSSgpOwogICAgICAgIHRoaXMuY29tYm9ib3hBY2Nlc3NpYmlsaXR5ID0gZW5hYmxlZDsKICAgICAgICBpZiAodGhpcy5jb21ib2JveEFjY2Vzc2liaWxpdHkpIHsKICAgICAgICAgIHVpLmlucHV0Qm94LnNldEF0dHJpYnV0ZSgncm9sZScsICdjb21ib2JveCcpOwogICAgICAgICAgdWkuaW5wdXRCb3guc2V0QXR0cmlidXRlKCdhcmlhLWhhc3BvcHVwJywgJ3RydWUnKTsKICAgICAgICAgIHVpLmlucHV0Qm94LnNldEF0dHJpYnV0ZSgnYXJpYS1hdXRvY29tcGxldGUnLCAnbGlzdCcpOwogICAgICAgICAgdWkuaW5wdXRCb3guc2V0QXR0cmlidXRlKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLCB1aS5saXN0LmdldEFjdGl2ZURlc2NlbmRhbnQoKSB8fCAnJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHVpLmlucHV0Qm94LnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpOwogICAgICAgICAgdWkuaW5wdXRCb3gucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhhc3BvcHVwJyk7CiAgICAgICAgICB1aS5pbnB1dEJveC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtYXV0b2NvbXBsZXRlJyk7CiAgICAgICAgICB1aS5pbnB1dEJveC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldEVuYWJsZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEVuYWJsZWQoZW5hYmxlZCkgewogICAgICBpZiAoZW5hYmxlZCAhPT0gdGhpcy5lbmFibGVkKSB7CiAgICAgICAgdGhpcy5lbmFibGVkID0gZW5hYmxlZDsKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5nZXRVSSgpLmxlZnRBY3Rpb25CYXIudmlld0l0ZW1zKSwKICAgICAgICAgIF9zdGVwOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICBpdGVtLmdldEFjdGlvbigpLmVuYWJsZWQgPSBlbmFibGVkOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICB9CiAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmdldFVJKCkucmlnaHRBY3Rpb25CYXIudmlld0l0ZW1zKSwKICAgICAgICAgIF9zdGVwMjsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIF9pdGVtID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICBfaXRlbS5nZXRBY3Rpb24oKS5lbmFibGVkID0gZW5hYmxlZDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5nZXRVSSgpLmNoZWNrQWxsLmRpc2FibGVkID0gIWVuYWJsZWQ7CiAgICAgICAgLy8gdGhpcy5nZXRVSSgpLmlucHV0Qm94LmVuYWJsZWQgPSBlbmFibGVkOyBBdm9pZCBsb29zaW5nIGZvY3VzLgogICAgICAgIHRoaXMuZ2V0VUkoKS5vay5lbmFibGVkID0gZW5hYmxlZDsKICAgICAgICB0aGlzLmdldFVJKCkubGlzdC5lbmFibGVkID0gZW5hYmxlZDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImhpZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGUocmVhc29uKSB7CiAgICAgIHZhciBfYTsKICAgICAgdmFyIGNvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xsZXI7CiAgICAgIGlmIChjb250cm9sbGVyKSB7CiAgICAgICAgdmFyIGZvY3VzQ2hhbmdlZCA9ICEoKF9hID0gdGhpcy51aSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRhaW5lci5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSk7CiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbnVsbDsKICAgICAgICB0aGlzLm9uSGlkZUVtaXR0ZXIuZmlyZSgpOwogICAgICAgIHRoaXMuZ2V0VUkoKS5jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBpZiAoIWZvY3VzQ2hhbmdlZCkgewogICAgICAgICAgdmFyIGN1cnJlbnRFbGVtZW50ID0gdGhpcy5wcmV2aW91c0ZvY3VzRWxlbWVudDsKICAgICAgICAgIHdoaWxlIChjdXJyZW50RWxlbWVudCAmJiAhY3VycmVudEVsZW1lbnQub2Zmc2V0UGFyZW50KSB7CiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gd2l0aE51bGxBc1VuZGVmaW5lZChjdXJyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjdXJyZW50RWxlbWVudCA9PT0gbnVsbCB8fCBjdXJyZW50RWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudEVsZW1lbnQub2Zmc2V0UGFyZW50KSB7CiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50LmZvY3VzKCk7CiAgICAgICAgICAgIHRoaXMucHJldmlvdXNGb2N1c0VsZW1lbnQgPSB1bmRlZmluZWQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm9wdGlvbnMucmV0dXJuRm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY29udHJvbGxlci5kaWRIaWRlKHJlYXNvbik7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJsYXlvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxheW91dChkaW1lbnNpb24sIHRpdGxlQmFyT2Zmc2V0KSB7CiAgICAgIHRoaXMuZGltZW5zaW9uID0gZGltZW5zaW9uOwogICAgICB0aGlzLnRpdGxlQmFyT2Zmc2V0ID0gdGl0bGVCYXJPZmZzZXQ7CiAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlTGF5b3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVMYXlvdXQoKSB7CiAgICAgIGlmICh0aGlzLnVpKSB7CiAgICAgICAgdGhpcy51aS5jb250YWluZXIuc3R5bGUudG9wID0gIiIuY29uY2F0KHRoaXMudGl0bGVCYXJPZmZzZXQsICJweCIpOwogICAgICAgIHZhciBzdHlsZSA9IHRoaXMudWkuY29udGFpbmVyLnN0eWxlOwogICAgICAgIHZhciB3aWR0aCA9IE1hdGgubWluKHRoaXMuZGltZW5zaW9uLndpZHRoICogMC42MiAvKiBnb2xkZW4gY3V0ICovLCBRdWlja0lucHV0Q29udHJvbGxlci5NQVhfV0lEVEgpOwogICAgICAgIHN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnOwogICAgICAgIHN0eWxlLm1hcmdpbkxlZnQgPSAnLScgKyB3aWR0aCAvIDIgKyAncHgnOwogICAgICAgIHRoaXMudWkuaW5wdXRCb3gubGF5b3V0KCk7CiAgICAgICAgdGhpcy51aS5saXN0LmxheW91dCh0aGlzLmRpbWVuc2lvbiAmJiB0aGlzLmRpbWVuc2lvbi5oZWlnaHQgKiAwLjQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYXBwbHlTdHlsZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5U3R5bGVzKHN0eWxlcykgewogICAgICB0aGlzLnN0eWxlcyA9IHN0eWxlczsKICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTdHlsZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0eWxlcygpIHsKICAgICAgaWYgKHRoaXMudWkpIHsKICAgICAgICB2YXIgX3RoaXMkc3R5bGVzJHdpZGdldCA9IHRoaXMuc3R5bGVzLndpZGdldCwKICAgICAgICAgIHF1aWNrSW5wdXRUaXRsZUJhY2tncm91bmQgPSBfdGhpcyRzdHlsZXMkd2lkZ2V0LnF1aWNrSW5wdXRUaXRsZUJhY2tncm91bmQsCiAgICAgICAgICBxdWlja0lucHV0QmFja2dyb3VuZCA9IF90aGlzJHN0eWxlcyR3aWRnZXQucXVpY2tJbnB1dEJhY2tncm91bmQsCiAgICAgICAgICBxdWlja0lucHV0Rm9yZWdyb3VuZCA9IF90aGlzJHN0eWxlcyR3aWRnZXQucXVpY2tJbnB1dEZvcmVncm91bmQsCiAgICAgICAgICBjb250cmFzdEJvcmRlciA9IF90aGlzJHN0eWxlcyR3aWRnZXQuY29udHJhc3RCb3JkZXIsCiAgICAgICAgICB3aWRnZXRTaGFkb3cgPSBfdGhpcyRzdHlsZXMkd2lkZ2V0LndpZGdldFNoYWRvdzsKICAgICAgICB0aGlzLnVpLnRpdGxlQmFyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHF1aWNrSW5wdXRUaXRsZUJhY2tncm91bmQgPyBxdWlja0lucHV0VGl0bGVCYWNrZ3JvdW5kLnRvU3RyaW5nKCkgOiAnJzsKICAgICAgICB0aGlzLnVpLmNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBxdWlja0lucHV0QmFja2dyb3VuZCA/IHF1aWNrSW5wdXRCYWNrZ3JvdW5kLnRvU3RyaW5nKCkgOiAnJzsKICAgICAgICB0aGlzLnVpLmNvbnRhaW5lci5zdHlsZS5jb2xvciA9IHF1aWNrSW5wdXRGb3JlZ3JvdW5kID8gcXVpY2tJbnB1dEZvcmVncm91bmQudG9TdHJpbmcoKSA6ICcnOwogICAgICAgIHRoaXMudWkuY29udGFpbmVyLnN0eWxlLmJvcmRlciA9IGNvbnRyYXN0Qm9yZGVyID8gIjFweCBzb2xpZCAiLmNvbmNhdChjb250cmFzdEJvcmRlcikgOiAnJzsKICAgICAgICB0aGlzLnVpLmNvbnRhaW5lci5zdHlsZS5ib3hTaGFkb3cgPSB3aWRnZXRTaGFkb3cgPyAiMCAwIDhweCAycHggIi5jb25jYXQod2lkZ2V0U2hhZG93KSA6ICcnOwogICAgICAgIHRoaXMudWkuaW5wdXRCb3guc3R5bGUodGhpcy5zdHlsZXMuaW5wdXRCb3gpOwogICAgICAgIHRoaXMudWkuY291bnQuc3R5bGUodGhpcy5zdHlsZXMuY291bnRCYWRnZSk7CiAgICAgICAgdGhpcy51aS5vay5zdHlsZSh0aGlzLnN0eWxlcy5idXR0b24pOwogICAgICAgIHRoaXMudWkuY3VzdG9tQnV0dG9uLnN0eWxlKHRoaXMuc3R5bGVzLmJ1dHRvbik7CiAgICAgICAgdGhpcy51aS5wcm9ncmVzc0Jhci5zdHlsZSh0aGlzLnN0eWxlcy5wcm9ncmVzc0Jhcik7CiAgICAgICAgdGhpcy51aS5saXN0LnN0eWxlKHRoaXMuc3R5bGVzLmxpc3QpOwogICAgICAgIHZhciBjb250ZW50ID0gW107CiAgICAgICAgaWYgKHRoaXMuc3R5bGVzLmxpc3QucGlja2VyR3JvdXBCb3JkZXIpIHsKICAgICAgICAgIGNvbnRlbnQucHVzaCgiLnF1aWNrLWlucHV0LWxpc3QgLnF1aWNrLWlucHV0LWxpc3QtZW50cnkgeyBib3JkZXItdG9wLWNvbG9yOiAgIi5jb25jYXQodGhpcy5zdHlsZXMubGlzdC5waWNrZXJHcm91cEJvcmRlciwgIjsgfSIpKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuc3R5bGVzLmxpc3QucGlja2VyR3JvdXBGb3JlZ3JvdW5kKSB7CiAgICAgICAgICBjb250ZW50LnB1c2goIi5xdWljay1pbnB1dC1saXN0IC5xdWljay1pbnB1dC1saXN0LXNlcGFyYXRvciB7IGNvbG9yOiAgIi5jb25jYXQodGhpcy5zdHlsZXMubGlzdC5waWNrZXJHcm91cEZvcmVncm91bmQsICI7IH0iKSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnN0eWxlcy5rZXliaW5kaW5nTGFiZWwua2V5YmluZGluZ0xhYmVsQmFja2dyb3VuZCB8fCB0aGlzLnN0eWxlcy5rZXliaW5kaW5nTGFiZWwua2V5YmluZGluZ0xhYmVsQm9yZGVyIHx8IHRoaXMuc3R5bGVzLmtleWJpbmRpbmdMYWJlbC5rZXliaW5kaW5nTGFiZWxCb3R0b21Cb3JkZXIgfHwgdGhpcy5zdHlsZXMua2V5YmluZGluZ0xhYmVsLmtleWJpbmRpbmdMYWJlbFNoYWRvdyB8fCB0aGlzLnN0eWxlcy5rZXliaW5kaW5nTGFiZWwua2V5YmluZGluZ0xhYmVsRm9yZWdyb3VuZCkgewogICAgICAgICAgY29udGVudC5wdXNoKCcucXVpY2staW5wdXQtbGlzdCAubW9uYWNvLWtleWJpbmRpbmcgPiAubW9uYWNvLWtleWJpbmRpbmcta2V5IHsnKTsKICAgICAgICAgIGlmICh0aGlzLnN0eWxlcy5rZXliaW5kaW5nTGFiZWwua2V5YmluZGluZ0xhYmVsQmFja2dyb3VuZCkgewogICAgICAgICAgICBjb250ZW50LnB1c2goImJhY2tncm91bmQtY29sb3I6ICIuY29uY2F0KHRoaXMuc3R5bGVzLmtleWJpbmRpbmdMYWJlbC5rZXliaW5kaW5nTGFiZWxCYWNrZ3JvdW5kLCAiOyIpKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLnN0eWxlcy5rZXliaW5kaW5nTGFiZWwua2V5YmluZGluZ0xhYmVsQm9yZGVyKSB7CiAgICAgICAgICAgIC8vIE9yZGVyIG1hdHRlcnMgaGVyZS4gYGJvcmRlci1jb2xvcmAgbXVzdCBjb21lIGJlZm9yZSBgYm9yZGVyLWJvdHRvbS1jb2xvcmAuCiAgICAgICAgICAgIGNvbnRlbnQucHVzaCgiYm9yZGVyLWNvbG9yOiAiLmNvbmNhdCh0aGlzLnN0eWxlcy5rZXliaW5kaW5nTGFiZWwua2V5YmluZGluZ0xhYmVsQm9yZGVyLCAiOyIpKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLnN0eWxlcy5rZXliaW5kaW5nTGFiZWwua2V5YmluZGluZ0xhYmVsQm90dG9tQm9yZGVyKSB7CiAgICAgICAgICAgIGNvbnRlbnQucHVzaCgiYm9yZGVyLWJvdHRvbS1jb2xvcjogIi5jb25jYXQodGhpcy5zdHlsZXMua2V5YmluZGluZ0xhYmVsLmtleWJpbmRpbmdMYWJlbEJvdHRvbUJvcmRlciwgIjsiKSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5zdHlsZXMua2V5YmluZGluZ0xhYmVsLmtleWJpbmRpbmdMYWJlbFNoYWRvdykgewogICAgICAgICAgICBjb250ZW50LnB1c2goImJveC1zaGFkb3c6IGluc2V0IDAgLTFweCAwICIuY29uY2F0KHRoaXMuc3R5bGVzLmtleWJpbmRpbmdMYWJlbC5rZXliaW5kaW5nTGFiZWxTaGFkb3csICI7IikpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuc3R5bGVzLmtleWJpbmRpbmdMYWJlbC5rZXliaW5kaW5nTGFiZWxGb3JlZ3JvdW5kKSB7CiAgICAgICAgICAgIGNvbnRlbnQucHVzaCgiY29sb3I6ICIuY29uY2F0KHRoaXMuc3R5bGVzLmtleWJpbmRpbmdMYWJlbC5rZXliaW5kaW5nTGFiZWxGb3JlZ3JvdW5kLCAiOyIpKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnRlbnQucHVzaCgnfScpOwogICAgICAgIH0KICAgICAgICB2YXIgbmV3U3R5bGVzID0gY29udGVudC5qb2luKCdcbicpOwogICAgICAgIGlmIChuZXdTdHlsZXMgIT09IHRoaXMudWkuc3R5bGVTaGVldC50ZXh0Q29udGVudCkgewogICAgICAgICAgdGhpcy51aS5zdHlsZVNoZWV0LnRleHRDb250ZW50ID0gbmV3U3R5bGVzOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH1dKTsKICByZXR1cm4gUXVpY2tJbnB1dENvbnRyb2xsZXI7Cn0oRGlzcG9zYWJsZSk7ClF1aWNrSW5wdXRDb250cm9sbGVyLk1BWF9XSURUSCA9IDYwMDsgLy8gTWF4IHRvdGFsIHdpZHRoIG9mIHF1aWNrIGlucHV0IHdpZGdldA=="},{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","dom","StandardKeyboardEvent","ActionBar","Button","CountBadge","renderLabelWithIcons","ProgressBar","Action","equals","TimeoutTimer","CancellationToken","Codicon","Emitter","Disposable","DisposableStore","dispose","isIOS","Severity","withNullAsUndefined","getIconClass","ItemActivation","NO_KEY_MODS","QuickInputHideReason","localize","QuickInputBox","QuickInputList","QuickInputListFocus","$","backButton","iconClass","quickInputBack","classNames","tooltip","handle","QuickInput","ui","visible","_enabled","_busy","_ignoreFocusOut","_buttons","noValidationMessage","noPromptMessage","_severity","Ignore","buttonsUpdated","onDidTriggerButtonEmitter","_register","onDidHideEmitter","onDisposeEmitter","visibleDisposables","onDidHide","event","_title","title","update","_description","description","_steps","_totalSteps","totalSteps","enabled","_contextKey","contextKey","busy","ignoreFocusOut","shouldUpdate","buttons","_validationMessage","validationMessage","severity","add","onDidTriggerButton","button","indexOf","fire","show","_lastValidationMessage","undefined","_lastSeverity","length","hide","reason","Other","clear","getTitle","textContent","innerHTML","innerText","getDescription","description1","description2","busyDelay","setIfNotSet","progressBar","infinite","stop","cancel","leftActionBar","leftButtons","filter","push","map","index","action","iconPath","icon","label","rightActionBar","rightButtons","setEnabled","setContextKey","reset","message","showMessageDecoration","getSteps","String","inputBox","showDecoration","styles","stylesForType","style","color","foreground","backgroundColor","background","border","marginBottom","QuickPick","arguments","_value","onDidChangeValueEmitter","onWillAcceptEmitter","onDidAcceptEmitter","onDidCustomEmitter","_items","itemsUpdated","_canSelectMany","_canAcceptInBackground","_matchOnDescription","_matchOnDetail","_matchOnLabel","_matchOnLabelMode","_sortByLabel","_autoFocusOnList","_keepScrollPosition","_itemActivation","isScreenReaderOptimized","NONE","FIRST","_activeItems","activeItemsUpdated","activeItemsToConfirm","onDidChangeActiveEmitter","_selectedItems","selectedItemsUpdated","selectedItemsToConfirm","onDidChangeSelectionEmitter","onDidTriggerItemButtonEmitter","valueSelectionUpdated","_ok","_customButton","filterValue","onDidChangeValue","onWillAccept","onDidAccept","onDidChangeActive","onDidChangeSelection","onDidTriggerItemButton","_quickNavigate","quickNavigate","doSetValue","skipUpdate","didFilter","list","trySelectFirst","_ariaLabel","ariaLabel","_placeholder","placeholder","items","scrollTop","canSelectMany","canAcceptInBackground","matchOnDescription","matchOnDetail","matchOnLabel","matchOnLabelMode","sortByLabel","autoFocusOnList","keepScrollPosition","itemActivation","activeItems","selectedItems","keyMods","valueSelection","_valueSelection","showCustomButton","_customButtonLabel","_customButtonHover","hover","showOkButton","_hideInput","hideInput","focus","First","onDidChange","onMouseDown","clearFocus","onKeyDown","keyCode","Next","domFocus","EventHelper","getFocusedElements","Previous","Last","NextPage","PreviousPage","isSelectionAtEnd","handleAccept","ctrlKey","metaKey","shiftKey","altKey","getCheckedElements","onDidCustom","onDidChangeFocus","focusedItems","a","b","setSelectedElements","MouseEvent","onChangedCheckedElements","checkedItems","onButtonTriggered","registerQuickNavigation","inBackground","veto","addDisposableListener","container","EventType","KEY_UP","keyboardEvent","quickNavKeys","keybindings","wasTriggerKeyPressed","some","k","getParts","firstPart","chordPart","scrollTopBefore","classList","toggle","visibilities","checkAll","_hideCheckAll","checkBox","visibleCount","count","ok","customButton","setVisibilities","select","start","end","DEFAULT_ARIA_LABEL","setElements","checked","getAllVisibleChecked","setCount","getVisibleCount","getCheckedCount","SECOND","Second","LAST","contains","setFocusedElements","setCheckedElements","customLabel","element","customHover","setComboboxAccessibility","QuickInputController","options","comboboxAccessibility","ctrlCmd","alt","controller","onShowEmitter","onShow","onHideEmitter","onHide","idPrefix","parentElement","registerKeyModsListeners","listener","window","KEY_DOWN","MOUSE_DOWN","append","tabIndex","display","styleSheet","createStyleSheet","titleBar","domNode","headerContainer","type","setAttribute","addStandardDisposableListener","CHANGE","setAllVisibleChecked","CLICK","x","y","setFocus","extraContainer","filterContainer","visibleCountContainer","countFormat","key","comment","countContainer","okContainer","onDidClick","customButtonContainer","onChangedAllVisibleChecked","onChangedVisibleCount","c","onChangedCheckedCount","onLeave","setTimeout","getUI","getActiveDescendant","getContainer","focusTracker","trackFocus","FOCUS","previousFocusElement","relatedTarget","HTMLElement","onDidBlur","Blur","Gesture","selectors","isDisplayed","stops","querySelectorAll","join","target","updateStyles","picks","token","None","doResolve","_a","onKeyMods","call","input","isCancellationRequested","createQuickPick","activeItem","disposables","slice","focused","onDidFocus","Object","assign","removeItem","item","removed","splice","keepScrollPositionBefore","onCancellationRequested","canPickMany","placeHolder","ignoreFocusLost","all","_activeItem","picked","err","oldController","didHide","password","backKeybindingLabel","updateLayout","removeAttribute","viewItems","getAction","disabled","focusChanged","document","activeElement","currentElement","offsetParent","returnFocus","dimension","titleBarOffset","top","width","Math","min","MAX_WIDTH","marginLeft","layout","height","widget","quickInputTitleBackground","quickInputBackground","quickInputForeground","contrastBorder","widgetShadow","toString","boxShadow","countBadge","content","pickerGroupBorder","pickerGroupForeground","keybindingLabel","keybindingLabelBackground","keybindingLabelBorder","keybindingLabelBottomBorder","keybindingLabelShadow","keybindingLabelForeground","newStyles"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInput.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../browser/keyboardEvent.js';\nimport { ActionBar } from '../../../browser/ui/actionbar/actionbar.js';\nimport { Button } from '../../../browser/ui/button/button.js';\nimport { CountBadge } from '../../../browser/ui/countBadge/countBadge.js';\nimport { renderLabelWithIcons } from '../../../browser/ui/iconLabel/iconLabels.js';\nimport { ProgressBar } from '../../../browser/ui/progressbar/progressbar.js';\nimport { Action } from '../../../common/actions.js';\nimport { equals } from '../../../common/arrays.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { CancellationToken } from '../../../common/cancellation.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { isIOS } from '../../../common/platform.js';\nimport Severity from '../../../common/severity.js';\nimport { withNullAsUndefined } from '../../../common/types.js';\nimport { getIconClass } from './quickInputUtils.js';\nimport { ItemActivation, NO_KEY_MODS, QuickInputHideReason } from '../common/quickInput.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../../nls.js';\nimport { QuickInputBox } from './quickInputBox.js';\nimport { QuickInputList, QuickInputListFocus } from './quickInputList.js';\nconst $ = dom.$;\nconst backButton = {\n    iconClass: Codicon.quickInputBack.classNames,\n    tooltip: localize('quickInput.back', \"Back\"),\n    handle: -1 // TODO\n};\nclass QuickInput extends Disposable {\n    constructor(ui) {\n        super();\n        this.ui = ui;\n        this.visible = false;\n        this._enabled = true;\n        this._busy = false;\n        this._ignoreFocusOut = false;\n        this._buttons = [];\n        this.noValidationMessage = QuickInput.noPromptMessage;\n        this._severity = Severity.Ignore;\n        this.buttonsUpdated = false;\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\n        this.onDidHideEmitter = this._register(new Emitter());\n        this.onDisposeEmitter = this._register(new Emitter());\n        this.visibleDisposables = this._register(new DisposableStore());\n        this.onDidHide = this.onDidHideEmitter.event;\n    }\n    get title() {\n        return this._title;\n    }\n    set title(title) {\n        this._title = title;\n        this.update();\n    }\n    get description() {\n        return this._description;\n    }\n    set description(description) {\n        this._description = description;\n        this.update();\n    }\n    get step() {\n        return this._steps;\n    }\n    set step(step) {\n        this._steps = step;\n        this.update();\n    }\n    get totalSteps() {\n        return this._totalSteps;\n    }\n    set totalSteps(totalSteps) {\n        this._totalSteps = totalSteps;\n        this.update();\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(enabled) {\n        this._enabled = enabled;\n        this.update();\n    }\n    get contextKey() {\n        return this._contextKey;\n    }\n    set contextKey(contextKey) {\n        this._contextKey = contextKey;\n        this.update();\n    }\n    get busy() {\n        return this._busy;\n    }\n    set busy(busy) {\n        this._busy = busy;\n        this.update();\n    }\n    get ignoreFocusOut() {\n        return this._ignoreFocusOut;\n    }\n    set ignoreFocusOut(ignoreFocusOut) {\n        const shouldUpdate = this._ignoreFocusOut !== ignoreFocusOut && !isIOS;\n        this._ignoreFocusOut = ignoreFocusOut && !isIOS;\n        if (shouldUpdate) {\n            this.update();\n        }\n    }\n    get buttons() {\n        return this._buttons;\n    }\n    set buttons(buttons) {\n        this._buttons = buttons;\n        this.buttonsUpdated = true;\n        this.update();\n    }\n    get validationMessage() {\n        return this._validationMessage;\n    }\n    set validationMessage(validationMessage) {\n        this._validationMessage = validationMessage;\n        this.update();\n    }\n    get severity() {\n        return this._severity;\n    }\n    set severity(severity) {\n        this._severity = severity;\n        this.update();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        this.visibleDisposables.add(this.ui.onDidTriggerButton(button => {\n            if (this.buttons.indexOf(button) !== -1) {\n                this.onDidTriggerButtonEmitter.fire(button);\n            }\n        }));\n        this.ui.show(this);\n        // update properties in the controller that get reset in the ui.show() call\n        this.visible = true;\n        // This ensures the message/prompt gets rendered\n        this._lastValidationMessage = undefined;\n        // This ensures the input box has the right severity applied\n        this._lastSeverity = undefined;\n        if (this.buttons.length) {\n            // if there are buttons, the ui.show() clears them out of the UI so we should\n            // rerender them.\n            this.buttonsUpdated = true;\n        }\n        this.update();\n    }\n    hide() {\n        if (!this.visible) {\n            return;\n        }\n        this.ui.hide();\n    }\n    didHide(reason = QuickInputHideReason.Other) {\n        this.visible = false;\n        this.visibleDisposables.clear();\n        this.onDidHideEmitter.fire({ reason });\n    }\n    update() {\n        if (!this.visible) {\n            return;\n        }\n        const title = this.getTitle();\n        if (title && this.ui.title.textContent !== title) {\n            this.ui.title.textContent = title;\n        }\n        else if (!title && this.ui.title.innerHTML !== '&nbsp;') {\n            this.ui.title.innerText = '\\u00a0';\n        }\n        const description = this.getDescription();\n        if (this.ui.description1.textContent !== description) {\n            this.ui.description1.textContent = description;\n        }\n        if (this.ui.description2.textContent !== description) {\n            this.ui.description2.textContent = description;\n        }\n        if (this.busy && !this.busyDelay) {\n            this.busyDelay = new TimeoutTimer();\n            this.busyDelay.setIfNotSet(() => {\n                if (this.visible) {\n                    this.ui.progressBar.infinite();\n                }\n            }, 800);\n        }\n        if (!this.busy && this.busyDelay) {\n            this.ui.progressBar.stop();\n            this.busyDelay.cancel();\n            this.busyDelay = undefined;\n        }\n        if (this.buttonsUpdated) {\n            this.buttonsUpdated = false;\n            this.ui.leftActionBar.clear();\n            const leftButtons = this.buttons.filter(button => button === backButton);\n            this.ui.leftActionBar.push(leftButtons.map((button, index) => {\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, () => __awaiter(this, void 0, void 0, function* () {\n                    this.onDidTriggerButtonEmitter.fire(button);\n                }));\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n            this.ui.rightActionBar.clear();\n            const rightButtons = this.buttons.filter(button => button !== backButton);\n            this.ui.rightActionBar.push(rightButtons.map((button, index) => {\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, () => __awaiter(this, void 0, void 0, function* () {\n                    this.onDidTriggerButtonEmitter.fire(button);\n                }));\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n        }\n        this.ui.ignoreFocusOut = this.ignoreFocusOut;\n        this.ui.setEnabled(this.enabled);\n        this.ui.setContextKey(this.contextKey);\n        const validationMessage = this.validationMessage || this.noValidationMessage;\n        if (this._lastValidationMessage !== validationMessage) {\n            this._lastValidationMessage = validationMessage;\n            dom.reset(this.ui.message, ...renderLabelWithIcons(validationMessage));\n        }\n        if (this._lastSeverity !== this.severity) {\n            this._lastSeverity = this.severity;\n            this.showMessageDecoration(this.severity);\n        }\n    }\n    getTitle() {\n        if (this.title && this.step) {\n            return `${this.title} (${this.getSteps()})`;\n        }\n        if (this.title) {\n            return this.title;\n        }\n        if (this.step) {\n            return this.getSteps();\n        }\n        return '';\n    }\n    getDescription() {\n        return this.description || '';\n    }\n    getSteps() {\n        if (this.step && this.totalSteps) {\n            return localize('quickInput.steps', \"{0}/{1}\", this.step, this.totalSteps);\n        }\n        if (this.step) {\n            return String(this.step);\n        }\n        return '';\n    }\n    showMessageDecoration(severity) {\n        this.ui.inputBox.showDecoration(severity);\n        if (severity !== Severity.Ignore) {\n            const styles = this.ui.inputBox.stylesForType(severity);\n            this.ui.message.style.color = styles.foreground ? `${styles.foreground}` : '';\n            this.ui.message.style.backgroundColor = styles.background ? `${styles.background}` : '';\n            this.ui.message.style.border = styles.border ? `1px solid ${styles.border}` : '';\n            this.ui.message.style.marginBottom = '-2px';\n        }\n        else {\n            this.ui.message.style.color = '';\n            this.ui.message.style.backgroundColor = '';\n            this.ui.message.style.border = '';\n            this.ui.message.style.marginBottom = '';\n        }\n    }\n    dispose() {\n        this.hide();\n        this.onDisposeEmitter.fire();\n        super.dispose();\n    }\n}\nQuickInput.noPromptMessage = localize('inputModeEntry', \"Press 'Enter' to confirm your input or 'Escape' to cancel\");\nclass QuickPick extends QuickInput {\n    constructor() {\n        super(...arguments);\n        this._value = '';\n        this.onDidChangeValueEmitter = this._register(new Emitter());\n        this.onWillAcceptEmitter = this._register(new Emitter());\n        this.onDidAcceptEmitter = this._register(new Emitter());\n        this.onDidCustomEmitter = this._register(new Emitter());\n        this._items = [];\n        this.itemsUpdated = false;\n        this._canSelectMany = false;\n        this._canAcceptInBackground = false;\n        this._matchOnDescription = false;\n        this._matchOnDetail = false;\n        this._matchOnLabel = true;\n        this._matchOnLabelMode = 'fuzzy';\n        this._sortByLabel = true;\n        this._autoFocusOnList = true;\n        this._keepScrollPosition = false;\n        this._itemActivation = this.ui.isScreenReaderOptimized() ? ItemActivation.NONE /* https://github.com/microsoft/vscode/issues/57501 */ : ItemActivation.FIRST;\n        this._activeItems = [];\n        this.activeItemsUpdated = false;\n        this.activeItemsToConfirm = [];\n        this.onDidChangeActiveEmitter = this._register(new Emitter());\n        this._selectedItems = [];\n        this.selectedItemsUpdated = false;\n        this.selectedItemsToConfirm = [];\n        this.onDidChangeSelectionEmitter = this._register(new Emitter());\n        this.onDidTriggerItemButtonEmitter = this._register(new Emitter());\n        this.valueSelectionUpdated = true;\n        this._ok = 'default';\n        this._customButton = false;\n        this.filterValue = (value) => value;\n        this.onDidChangeValue = this.onDidChangeValueEmitter.event;\n        this.onWillAccept = this.onWillAcceptEmitter.event;\n        this.onDidAccept = this.onDidAcceptEmitter.event;\n        this.onDidChangeActive = this.onDidChangeActiveEmitter.event;\n        this.onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n        this.onDidTriggerItemButton = this.onDidTriggerItemButtonEmitter.event;\n    }\n    get quickNavigate() {\n        return this._quickNavigate;\n    }\n    set quickNavigate(quickNavigate) {\n        this._quickNavigate = quickNavigate;\n        this.update();\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        this.doSetValue(value);\n    }\n    doSetValue(value, skipUpdate) {\n        if (this._value !== value) {\n            this._value = value;\n            if (!skipUpdate) {\n                this.update();\n            }\n            if (this.visible) {\n                const didFilter = this.ui.list.filter(this.filterValue(this._value));\n                if (didFilter) {\n                    this.trySelectFirst();\n                }\n            }\n            this.onDidChangeValueEmitter.fire(this._value);\n        }\n    }\n    set ariaLabel(ariaLabel) {\n        this._ariaLabel = ariaLabel;\n        this.update();\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    get placeholder() {\n        return this._placeholder;\n    }\n    set placeholder(placeholder) {\n        this._placeholder = placeholder;\n        this.update();\n    }\n    get items() {\n        return this._items;\n    }\n    get scrollTop() {\n        return this.ui.list.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.ui.list.scrollTop = scrollTop;\n    }\n    set items(items) {\n        this._items = items;\n        this.itemsUpdated = true;\n        this.update();\n    }\n    get canSelectMany() {\n        return this._canSelectMany;\n    }\n    set canSelectMany(canSelectMany) {\n        this._canSelectMany = canSelectMany;\n        this.update();\n    }\n    get canAcceptInBackground() {\n        return this._canAcceptInBackground;\n    }\n    set canAcceptInBackground(canAcceptInBackground) {\n        this._canAcceptInBackground = canAcceptInBackground;\n    }\n    get matchOnDescription() {\n        return this._matchOnDescription;\n    }\n    set matchOnDescription(matchOnDescription) {\n        this._matchOnDescription = matchOnDescription;\n        this.update();\n    }\n    get matchOnDetail() {\n        return this._matchOnDetail;\n    }\n    set matchOnDetail(matchOnDetail) {\n        this._matchOnDetail = matchOnDetail;\n        this.update();\n    }\n    get matchOnLabel() {\n        return this._matchOnLabel;\n    }\n    set matchOnLabel(matchOnLabel) {\n        this._matchOnLabel = matchOnLabel;\n        this.update();\n    }\n    get matchOnLabelMode() {\n        return this._matchOnLabelMode;\n    }\n    set matchOnLabelMode(matchOnLabelMode) {\n        this._matchOnLabelMode = matchOnLabelMode;\n        this.update();\n    }\n    get sortByLabel() {\n        return this._sortByLabel;\n    }\n    set sortByLabel(sortByLabel) {\n        this._sortByLabel = sortByLabel;\n        this.update();\n    }\n    get autoFocusOnList() {\n        return this._autoFocusOnList;\n    }\n    set autoFocusOnList(autoFocusOnList) {\n        this._autoFocusOnList = autoFocusOnList;\n        this.update();\n    }\n    get keepScrollPosition() {\n        return this._keepScrollPosition;\n    }\n    set keepScrollPosition(keepScrollPosition) {\n        this._keepScrollPosition = keepScrollPosition;\n    }\n    get itemActivation() {\n        return this._itemActivation;\n    }\n    set itemActivation(itemActivation) {\n        this._itemActivation = itemActivation;\n    }\n    get activeItems() {\n        return this._activeItems;\n    }\n    set activeItems(activeItems) {\n        this._activeItems = activeItems;\n        this.activeItemsUpdated = true;\n        this.update();\n    }\n    get selectedItems() {\n        return this._selectedItems;\n    }\n    set selectedItems(selectedItems) {\n        this._selectedItems = selectedItems;\n        this.selectedItemsUpdated = true;\n        this.update();\n    }\n    get keyMods() {\n        if (this._quickNavigate) {\n            // Disable keyMods when quick navigate is enabled\n            // because in this model the interaction is purely\n            // keyboard driven and Ctrl/Alt are typically\n            // pressed and hold during this interaction.\n            return NO_KEY_MODS;\n        }\n        return this.ui.keyMods;\n    }\n    set valueSelection(valueSelection) {\n        this._valueSelection = valueSelection;\n        this.valueSelectionUpdated = true;\n        this.update();\n    }\n    get customButton() {\n        return this._customButton;\n    }\n    set customButton(showCustomButton) {\n        this._customButton = showCustomButton;\n        this.update();\n    }\n    get customLabel() {\n        return this._customButtonLabel;\n    }\n    set customLabel(label) {\n        this._customButtonLabel = label;\n        this.update();\n    }\n    get customHover() {\n        return this._customButtonHover;\n    }\n    set customHover(hover) {\n        this._customButtonHover = hover;\n        this.update();\n    }\n    get ok() {\n        return this._ok;\n    }\n    set ok(showOkButton) {\n        this._ok = showOkButton;\n        this.update();\n    }\n    get hideInput() {\n        return !!this._hideInput;\n    }\n    set hideInput(hideInput) {\n        this._hideInput = hideInput;\n        this.update();\n    }\n    trySelectFirst() {\n        if (this.autoFocusOnList) {\n            if (!this.canSelectMany) {\n                this.ui.list.focus(QuickInputListFocus.First);\n            }\n        }\n    }\n    show() {\n        if (!this.visible) {\n            this.visibleDisposables.add(this.ui.inputBox.onDidChange(value => {\n                this.doSetValue(value, true /* skip update since this originates from the UI */);\n            }));\n            this.visibleDisposables.add(this.ui.inputBox.onMouseDown(event => {\n                if (!this.autoFocusOnList) {\n                    this.ui.list.clearFocus();\n                }\n            }));\n            this.visibleDisposables.add((this._hideInput ? this.ui.list : this.ui.inputBox).onKeyDown((event) => {\n                switch (event.keyCode) {\n                    case 18 /* KeyCode.DownArrow */:\n                        this.ui.list.focus(QuickInputListFocus.Next);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 16 /* KeyCode.UpArrow */:\n                        if (this.ui.list.getFocusedElements().length) {\n                            this.ui.list.focus(QuickInputListFocus.Previous);\n                        }\n                        else {\n                            this.ui.list.focus(QuickInputListFocus.Last);\n                        }\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 12 /* KeyCode.PageDown */:\n                        this.ui.list.focus(QuickInputListFocus.NextPage);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 11 /* KeyCode.PageUp */:\n                        this.ui.list.focus(QuickInputListFocus.PreviousPage);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 17 /* KeyCode.RightArrow */:\n                        if (!this._canAcceptInBackground) {\n                            return; // needs to be enabled\n                        }\n                        if (!this.ui.inputBox.isSelectionAtEnd()) {\n                            return; // ensure input box selection at end\n                        }\n                        if (this.activeItems[0]) {\n                            this._selectedItems = [this.activeItems[0]];\n                            this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                            this.handleAccept(true);\n                        }\n                        break;\n                    case 14 /* KeyCode.Home */:\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\n                            this.ui.list.focus(QuickInputListFocus.First);\n                            dom.EventHelper.stop(event, true);\n                        }\n                        break;\n                    case 13 /* KeyCode.End */:\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\n                            this.ui.list.focus(QuickInputListFocus.Last);\n                            dom.EventHelper.stop(event, true);\n                        }\n                        break;\n                }\n            }));\n            this.visibleDisposables.add(this.ui.onDidAccept(() => {\n                if (this.canSelectMany) {\n                    // if there are no checked elements, it means that an onDidChangeSelection never fired to overwrite\n                    // `_selectedItems`. In that case, we should emit one with an empty array to ensure that\n                    // `.selectedItems` is up to date.\n                    if (!this.ui.list.getCheckedElements().length) {\n                        this._selectedItems = [];\n                        this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                    }\n                }\n                else if (this.activeItems[0]) {\n                    // For single-select, we set `selectedItems` to the item that was accepted.\n                    this._selectedItems = [this.activeItems[0]];\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                }\n                this.handleAccept(false);\n            }));\n            this.visibleDisposables.add(this.ui.onDidCustom(() => {\n                this.onDidCustomEmitter.fire();\n            }));\n            this.visibleDisposables.add(this.ui.list.onDidChangeFocus(focusedItems => {\n                if (this.activeItemsUpdated) {\n                    return; // Expect another event.\n                }\n                if (this.activeItemsToConfirm !== this._activeItems && equals(focusedItems, this._activeItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._activeItems = focusedItems;\n                this.onDidChangeActiveEmitter.fire(focusedItems);\n            }));\n            this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({ items: selectedItems, event }) => {\n                if (this.canSelectMany) {\n                    if (selectedItems.length) {\n                        this.ui.list.setSelectedElements([]);\n                    }\n                    return;\n                }\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(selectedItems, this._selectedItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._selectedItems = selectedItems;\n                this.onDidChangeSelectionEmitter.fire(selectedItems);\n                if (selectedItems.length) {\n                    this.handleAccept(event instanceof MouseEvent && event.button === 1 /* mouse middle click */);\n                }\n            }));\n            this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(checkedItems => {\n                if (!this.canSelectMany) {\n                    return;\n                }\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(checkedItems, this._selectedItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._selectedItems = checkedItems;\n                this.onDidChangeSelectionEmitter.fire(checkedItems);\n            }));\n            this.visibleDisposables.add(this.ui.list.onButtonTriggered(event => this.onDidTriggerItemButtonEmitter.fire(event)));\n            this.visibleDisposables.add(this.registerQuickNavigation());\n            this.valueSelectionUpdated = true;\n        }\n        super.show(); // TODO: Why have show() bubble up while update() trickles down? (Could move setComboboxAccessibility() here.)\n    }\n    handleAccept(inBackground) {\n        // Figure out veto via `onWillAccept` event\n        let veto = false;\n        this.onWillAcceptEmitter.fire({ veto: () => veto = true });\n        // Continue with `onDidAccept` if no veto\n        if (!veto) {\n            this.onDidAcceptEmitter.fire({ inBackground });\n        }\n    }\n    registerQuickNavigation() {\n        return dom.addDisposableListener(this.ui.container, dom.EventType.KEY_UP, e => {\n            if (this.canSelectMany || !this._quickNavigate) {\n                return;\n            }\n            const keyboardEvent = new StandardKeyboardEvent(e);\n            const keyCode = keyboardEvent.keyCode;\n            // Select element when keys are pressed that signal it\n            const quickNavKeys = this._quickNavigate.keybindings;\n            const wasTriggerKeyPressed = quickNavKeys.some(k => {\n                const [firstPart, chordPart] = k.getParts();\n                if (chordPart) {\n                    return false;\n                }\n                if (firstPart.shiftKey && keyCode === 4 /* KeyCode.Shift */) {\n                    if (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\n                        return false; // this is an optimistic check for the shift key being used to navigate back in quick input\n                    }\n                    return true;\n                }\n                if (firstPart.altKey && keyCode === 6 /* KeyCode.Alt */) {\n                    return true;\n                }\n                if (firstPart.ctrlKey && keyCode === 5 /* KeyCode.Ctrl */) {\n                    return true;\n                }\n                if (firstPart.metaKey && keyCode === 57 /* KeyCode.Meta */) {\n                    return true;\n                }\n                return false;\n            });\n            if (wasTriggerKeyPressed) {\n                if (this.activeItems[0]) {\n                    this._selectedItems = [this.activeItems[0]];\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                    this.handleAccept(false);\n                }\n                // Unset quick navigate after press. It is only valid once\n                // and should not result in any behaviour change afterwards\n                // if the picker remains open because there was no active item\n                this._quickNavigate = undefined;\n            }\n        });\n    }\n    update() {\n        if (!this.visible) {\n            return;\n        }\n        // store the scrollTop before it is reset\n        const scrollTopBefore = this.keepScrollPosition ? this.scrollTop : 0;\n        const hideInput = !!this._hideInput && this._items.length > 0;\n        this.ui.container.classList.toggle('hidden-input', hideInput && !this.description);\n        const visibilities = {\n            title: !!this.title || !!this.step || !!this.buttons.length,\n            description: !!this.description,\n            checkAll: this.canSelectMany && !this._hideCheckAll,\n            checkBox: this.canSelectMany,\n            inputBox: !hideInput,\n            progressBar: !hideInput,\n            visibleCount: true,\n            count: this.canSelectMany,\n            ok: this.ok === 'default' ? this.canSelectMany : this.ok,\n            list: true,\n            message: !!this.validationMessage,\n            customButton: this.customButton\n        };\n        this.ui.setVisibilities(visibilities);\n        super.update();\n        if (this.ui.inputBox.value !== this.value) {\n            this.ui.inputBox.value = this.value;\n        }\n        if (this.valueSelectionUpdated) {\n            this.valueSelectionUpdated = false;\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\n        }\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n            this.ui.inputBox.placeholder = (this.placeholder || '');\n        }\n        let ariaLabel = this.ariaLabel;\n        if (!ariaLabel) {\n            ariaLabel = this.placeholder || QuickPick.DEFAULT_ARIA_LABEL;\n            // If we have a title, include it in the aria label.\n            if (this.title) {\n                ariaLabel += ` - ${this.title}`;\n            }\n        }\n        if (this.ui.inputBox.ariaLabel !== ariaLabel) {\n            this.ui.inputBox.ariaLabel = ariaLabel;\n        }\n        this.ui.list.matchOnDescription = this.matchOnDescription;\n        this.ui.list.matchOnDetail = this.matchOnDetail;\n        this.ui.list.matchOnLabel = this.matchOnLabel;\n        this.ui.list.matchOnLabelMode = this.matchOnLabelMode;\n        this.ui.list.sortByLabel = this.sortByLabel;\n        if (this.itemsUpdated) {\n            this.itemsUpdated = false;\n            this.ui.list.setElements(this.items);\n            this.ui.list.filter(this.filterValue(this.ui.inputBox.value));\n            this.ui.checkAll.checked = this.ui.list.getAllVisibleChecked();\n            this.ui.visibleCount.setCount(this.ui.list.getVisibleCount());\n            this.ui.count.setCount(this.ui.list.getCheckedCount());\n            switch (this._itemActivation) {\n                case ItemActivation.NONE:\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                case ItemActivation.SECOND:\n                    this.ui.list.focus(QuickInputListFocus.Second);\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                case ItemActivation.LAST:\n                    this.ui.list.focus(QuickInputListFocus.Last);\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                default:\n                    this.trySelectFirst();\n                    break;\n            }\n        }\n        if (this.ui.container.classList.contains('show-checkboxes') !== !!this.canSelectMany) {\n            if (this.canSelectMany) {\n                this.ui.list.clearFocus();\n            }\n            else {\n                this.trySelectFirst();\n            }\n        }\n        if (this.activeItemsUpdated) {\n            this.activeItemsUpdated = false;\n            this.activeItemsToConfirm = this._activeItems;\n            this.ui.list.setFocusedElements(this.activeItems);\n            if (this.activeItemsToConfirm === this._activeItems) {\n                this.activeItemsToConfirm = null;\n            }\n        }\n        if (this.selectedItemsUpdated) {\n            this.selectedItemsUpdated = false;\n            this.selectedItemsToConfirm = this._selectedItems;\n            if (this.canSelectMany) {\n                this.ui.list.setCheckedElements(this.selectedItems);\n            }\n            else {\n                this.ui.list.setSelectedElements(this.selectedItems);\n            }\n            if (this.selectedItemsToConfirm === this._selectedItems) {\n                this.selectedItemsToConfirm = null;\n            }\n        }\n        this.ui.customButton.label = this.customLabel || '';\n        this.ui.customButton.element.title = this.customHover || '';\n        this.ui.setComboboxAccessibility(true);\n        if (!visibilities.inputBox) {\n            // we need to move focus into the tree to detect keybindings\n            // properly when the input box is not visible (quick nav)\n            this.ui.list.domFocus();\n            // Focus the first element in the list if multiselect is enabled\n            if (this.canSelectMany) {\n                this.ui.list.focus(QuickInputListFocus.First);\n            }\n        }\n        // Set the scroll position to what it was before updating the items\n        if (this.keepScrollPosition) {\n            this.scrollTop = scrollTopBefore;\n        }\n    }\n}\nQuickPick.DEFAULT_ARIA_LABEL = localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\nexport class QuickInputController extends Disposable {\n    constructor(options) {\n        super();\n        this.options = options;\n        this.comboboxAccessibility = false;\n        this.enabled = true;\n        this.onDidAcceptEmitter = this._register(new Emitter());\n        this.onDidCustomEmitter = this._register(new Emitter());\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\n        this.keyMods = { ctrlCmd: false, alt: false };\n        this.controller = null;\n        this.onShowEmitter = this._register(new Emitter());\n        this.onShow = this.onShowEmitter.event;\n        this.onHideEmitter = this._register(new Emitter());\n        this.onHide = this.onHideEmitter.event;\n        this.idPrefix = options.idPrefix;\n        this.parentElement = options.container;\n        this.styles = options.styles;\n        this.registerKeyModsListeners();\n    }\n    registerKeyModsListeners() {\n        const listener = (e) => {\n            this.keyMods.ctrlCmd = e.ctrlKey || e.metaKey;\n            this.keyMods.alt = e.altKey;\n        };\n        this._register(dom.addDisposableListener(window, dom.EventType.KEY_DOWN, listener, true));\n        this._register(dom.addDisposableListener(window, dom.EventType.KEY_UP, listener, true));\n        this._register(dom.addDisposableListener(window, dom.EventType.MOUSE_DOWN, listener, true));\n    }\n    getUI() {\n        if (this.ui) {\n            return this.ui;\n        }\n        const container = dom.append(this.parentElement, $('.quick-input-widget.show-file-icons'));\n        container.tabIndex = -1;\n        container.style.display = 'none';\n        const styleSheet = dom.createStyleSheet(container);\n        const titleBar = dom.append(container, $('.quick-input-titlebar'));\n        const leftActionBar = this._register(new ActionBar(titleBar));\n        leftActionBar.domNode.classList.add('quick-input-left-action-bar');\n        const title = dom.append(titleBar, $('.quick-input-title'));\n        const rightActionBar = this._register(new ActionBar(titleBar));\n        rightActionBar.domNode.classList.add('quick-input-right-action-bar');\n        const description1 = dom.append(container, $('.quick-input-description'));\n        const headerContainer = dom.append(container, $('.quick-input-header'));\n        const checkAll = dom.append(headerContainer, $('input.quick-input-check-all'));\n        checkAll.type = 'checkbox';\n        checkAll.setAttribute('aria-label', localize('quickInput.checkAll', \"Toggle all checkboxes\"));\n        this._register(dom.addStandardDisposableListener(checkAll, dom.EventType.CHANGE, e => {\n            const checked = checkAll.checked;\n            list.setAllVisibleChecked(checked);\n        }));\n        this._register(dom.addDisposableListener(checkAll, dom.EventType.CLICK, e => {\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space'...\n                inputBox.setFocus();\n            }\n        }));\n        const description2 = dom.append(headerContainer, $('.quick-input-description'));\n        const extraContainer = dom.append(headerContainer, $('.quick-input-and-message'));\n        const filterContainer = dom.append(extraContainer, $('.quick-input-filter'));\n        const inputBox = this._register(new QuickInputBox(filterContainer));\n        inputBox.setAttribute('aria-describedby', `${this.idPrefix}message`);\n        const visibleCountContainer = dom.append(filterContainer, $('.quick-input-visible-count'));\n        visibleCountContainer.setAttribute('aria-live', 'polite');\n        visibleCountContainer.setAttribute('aria-atomic', 'true');\n        const visibleCount = new CountBadge(visibleCountContainer, { countFormat: localize({ key: 'quickInput.visibleCount', comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.'] }, \"{0} Results\") });\n        const countContainer = dom.append(filterContainer, $('.quick-input-count'));\n        countContainer.setAttribute('aria-live', 'polite');\n        const count = new CountBadge(countContainer, { countFormat: localize({ key: 'quickInput.countSelected', comment: ['This tells the user how many items are selected in a list of items to select from. The items can be anything.'] }, \"{0} Selected\") });\n        const okContainer = dom.append(headerContainer, $('.quick-input-action'));\n        const ok = new Button(okContainer);\n        ok.label = localize('ok', \"OK\");\n        this._register(ok.onDidClick(e => {\n            this.onDidAcceptEmitter.fire();\n        }));\n        const customButtonContainer = dom.append(headerContainer, $('.quick-input-action'));\n        const customButton = new Button(customButtonContainer);\n        customButton.label = localize('custom', \"Custom\");\n        this._register(customButton.onDidClick(e => {\n            this.onDidCustomEmitter.fire();\n        }));\n        const message = dom.append(extraContainer, $(`#${this.idPrefix}message.quick-input-message`));\n        const list = this._register(new QuickInputList(container, this.idPrefix + 'list', this.options));\n        this._register(list.onChangedAllVisibleChecked(checked => {\n            checkAll.checked = checked;\n        }));\n        this._register(list.onChangedVisibleCount(c => {\n            visibleCount.setCount(c);\n        }));\n        this._register(list.onChangedCheckedCount(c => {\n            count.setCount(c);\n        }));\n        this._register(list.onLeave(() => {\n            // Defer to avoid the input field reacting to the triggering key.\n            setTimeout(() => {\n                inputBox.setFocus();\n                if (this.controller instanceof QuickPick && this.controller.canSelectMany) {\n                    list.clearFocus();\n                }\n            }, 0);\n        }));\n        this._register(list.onDidChangeFocus(() => {\n            if (this.comboboxAccessibility) {\n                this.getUI().inputBox.setAttribute('aria-activedescendant', this.getUI().list.getActiveDescendant() || '');\n            }\n        }));\n        const progressBar = new ProgressBar(container);\n        progressBar.getContainer().classList.add('quick-input-progress');\n        const focusTracker = dom.trackFocus(container);\n        this._register(focusTracker);\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, e => {\n            this.previousFocusElement = e.relatedTarget instanceof HTMLElement ? e.relatedTarget : undefined;\n        }, true));\n        this._register(focusTracker.onDidBlur(() => {\n            if (!this.getUI().ignoreFocusOut && !this.options.ignoreFocusOut()) {\n                this.hide(QuickInputHideReason.Blur);\n            }\n            this.previousFocusElement = undefined;\n        }));\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, (e) => {\n            inputBox.setFocus();\n        }));\n        this._register(dom.addDisposableListener(container, dom.EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case 3 /* KeyCode.Enter */:\n                    dom.EventHelper.stop(e, true);\n                    this.onDidAcceptEmitter.fire();\n                    break;\n                case 9 /* KeyCode.Escape */:\n                    dom.EventHelper.stop(e, true);\n                    this.hide(QuickInputHideReason.Gesture);\n                    break;\n                case 2 /* KeyCode.Tab */:\n                    if (!event.altKey && !event.ctrlKey && !event.metaKey) {\n                        const selectors = ['.action-label.codicon'];\n                        if (container.classList.contains('show-checkboxes')) {\n                            selectors.push('input');\n                        }\n                        else {\n                            selectors.push('input[type=text]');\n                        }\n                        if (this.getUI().list.isDisplayed()) {\n                            selectors.push('.monaco-list');\n                        }\n                        const stops = container.querySelectorAll(selectors.join(', '));\n                        if (event.shiftKey && event.target === stops[0]) {\n                            dom.EventHelper.stop(e, true);\n                            stops[stops.length - 1].focus();\n                        }\n                        else if (!event.shiftKey && event.target === stops[stops.length - 1]) {\n                            dom.EventHelper.stop(e, true);\n                            stops[0].focus();\n                        }\n                    }\n                    break;\n            }\n        }));\n        this.ui = {\n            container,\n            styleSheet,\n            leftActionBar,\n            titleBar,\n            title,\n            description1,\n            description2,\n            rightActionBar,\n            checkAll,\n            filterContainer,\n            inputBox,\n            visibleCountContainer,\n            visibleCount,\n            countContainer,\n            count,\n            okContainer,\n            ok,\n            message,\n            customButtonContainer,\n            customButton,\n            list,\n            progressBar,\n            onDidAccept: this.onDidAcceptEmitter.event,\n            onDidCustom: this.onDidCustomEmitter.event,\n            onDidTriggerButton: this.onDidTriggerButtonEmitter.event,\n            ignoreFocusOut: false,\n            keyMods: this.keyMods,\n            isScreenReaderOptimized: () => this.options.isScreenReaderOptimized(),\n            show: controller => this.show(controller),\n            hide: () => this.hide(),\n            setVisibilities: visibilities => this.setVisibilities(visibilities),\n            setComboboxAccessibility: enabled => this.setComboboxAccessibility(enabled),\n            setEnabled: enabled => this.setEnabled(enabled),\n            setContextKey: contextKey => this.options.setContextKey(contextKey),\n        };\n        this.updateStyles();\n        return this.ui;\n    }\n    pick(picks, options = {}, token = CancellationToken.None) {\n        return new Promise((doResolve, reject) => {\n            let resolve = (result) => {\n                var _a;\n                resolve = doResolve;\n                (_a = options.onKeyMods) === null || _a === void 0 ? void 0 : _a.call(options, input.keyMods);\n                doResolve(result);\n            };\n            if (token.isCancellationRequested) {\n                resolve(undefined);\n                return;\n            }\n            const input = this.createQuickPick();\n            let activeItem;\n            const disposables = [\n                input,\n                input.onDidAccept(() => {\n                    if (input.canSelectMany) {\n                        resolve(input.selectedItems.slice());\n                        input.hide();\n                    }\n                    else {\n                        const result = input.activeItems[0];\n                        if (result) {\n                            resolve(result);\n                            input.hide();\n                        }\n                    }\n                }),\n                input.onDidChangeActive(items => {\n                    const focused = items[0];\n                    if (focused && options.onDidFocus) {\n                        options.onDidFocus(focused);\n                    }\n                }),\n                input.onDidChangeSelection(items => {\n                    if (!input.canSelectMany) {\n                        const result = items[0];\n                        if (result) {\n                            resolve(result);\n                            input.hide();\n                        }\n                    }\n                }),\n                input.onDidTriggerItemButton(event => options.onDidTriggerItemButton && options.onDidTriggerItemButton(Object.assign(Object.assign({}, event), { removeItem: () => {\n                        const index = input.items.indexOf(event.item);\n                        if (index !== -1) {\n                            const items = input.items.slice();\n                            const removed = items.splice(index, 1);\n                            const activeItems = input.activeItems.filter(activeItem => activeItem !== removed[0]);\n                            const keepScrollPositionBefore = input.keepScrollPosition;\n                            input.keepScrollPosition = true;\n                            input.items = items;\n                            if (activeItems) {\n                                input.activeItems = activeItems;\n                            }\n                            input.keepScrollPosition = keepScrollPositionBefore;\n                        }\n                    } }))),\n                input.onDidChangeValue(value => {\n                    if (activeItem && !value && (input.activeItems.length !== 1 || input.activeItems[0] !== activeItem)) {\n                        input.activeItems = [activeItem];\n                    }\n                }),\n                token.onCancellationRequested(() => {\n                    input.hide();\n                }),\n                input.onDidHide(() => {\n                    dispose(disposables);\n                    resolve(undefined);\n                }),\n            ];\n            input.title = options.title;\n            input.canSelectMany = !!options.canPickMany;\n            input.placeholder = options.placeHolder;\n            input.ignoreFocusOut = !!options.ignoreFocusLost;\n            input.matchOnDescription = !!options.matchOnDescription;\n            input.matchOnDetail = !!options.matchOnDetail;\n            input.matchOnLabel = (options.matchOnLabel === undefined) || options.matchOnLabel; // default to true\n            input.autoFocusOnList = (options.autoFocusOnList === undefined) || options.autoFocusOnList; // default to true\n            input.quickNavigate = options.quickNavigate;\n            input.hideInput = !!options.hideInput;\n            input.contextKey = options.contextKey;\n            input.busy = true;\n            Promise.all([picks, options.activeItem])\n                .then(([items, _activeItem]) => {\n                activeItem = _activeItem;\n                input.busy = false;\n                input.items = items;\n                if (input.canSelectMany) {\n                    input.selectedItems = items.filter(item => item.type !== 'separator' && item.picked);\n                }\n                if (activeItem) {\n                    input.activeItems = [activeItem];\n                }\n            });\n            input.show();\n            Promise.resolve(picks).then(undefined, err => {\n                reject(err);\n                input.hide();\n            });\n        });\n    }\n    createQuickPick() {\n        const ui = this.getUI();\n        return new QuickPick(ui);\n    }\n    show(controller) {\n        const ui = this.getUI();\n        this.onShowEmitter.fire();\n        const oldController = this.controller;\n        this.controller = controller;\n        if (oldController) {\n            oldController.didHide();\n        }\n        this.setEnabled(true);\n        ui.leftActionBar.clear();\n        ui.title.textContent = '';\n        ui.description1.textContent = '';\n        ui.description2.textContent = '';\n        ui.rightActionBar.clear();\n        ui.checkAll.checked = false;\n        // ui.inputBox.value = ''; Avoid triggering an event.\n        ui.inputBox.placeholder = '';\n        ui.inputBox.password = false;\n        ui.inputBox.showDecoration(Severity.Ignore);\n        ui.visibleCount.setCount(0);\n        ui.count.setCount(0);\n        dom.reset(ui.message);\n        ui.progressBar.stop();\n        ui.list.setElements([]);\n        ui.list.matchOnDescription = false;\n        ui.list.matchOnDetail = false;\n        ui.list.matchOnLabel = true;\n        ui.list.sortByLabel = true;\n        ui.ignoreFocusOut = false;\n        this.setComboboxAccessibility(false);\n        ui.inputBox.ariaLabel = '';\n        const backKeybindingLabel = this.options.backKeybindingLabel();\n        backButton.tooltip = backKeybindingLabel ? localize('quickInput.backWithKeybinding', \"Back ({0})\", backKeybindingLabel) : localize('quickInput.back', \"Back\");\n        ui.container.style.display = '';\n        this.updateLayout();\n        ui.inputBox.setFocus();\n    }\n    setVisibilities(visibilities) {\n        const ui = this.getUI();\n        ui.title.style.display = visibilities.title ? '' : 'none';\n        ui.description1.style.display = visibilities.description && (visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\n        ui.description2.style.display = visibilities.description && !(visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\n        ui.checkAll.style.display = visibilities.checkAll ? '' : 'none';\n        ui.filterContainer.style.display = visibilities.inputBox ? '' : 'none';\n        ui.visibleCountContainer.style.display = visibilities.visibleCount ? '' : 'none';\n        ui.countContainer.style.display = visibilities.count ? '' : 'none';\n        ui.okContainer.style.display = visibilities.ok ? '' : 'none';\n        ui.customButtonContainer.style.display = visibilities.customButton ? '' : 'none';\n        ui.message.style.display = visibilities.message ? '' : 'none';\n        ui.progressBar.getContainer().style.display = visibilities.progressBar ? '' : 'none';\n        ui.list.display(!!visibilities.list);\n        ui.container.classList[visibilities.checkBox ? 'add' : 'remove']('show-checkboxes');\n        this.updateLayout(); // TODO\n    }\n    setComboboxAccessibility(enabled) {\n        if (enabled !== this.comboboxAccessibility) {\n            const ui = this.getUI();\n            this.comboboxAccessibility = enabled;\n            if (this.comboboxAccessibility) {\n                ui.inputBox.setAttribute('role', 'combobox');\n                ui.inputBox.setAttribute('aria-haspopup', 'true');\n                ui.inputBox.setAttribute('aria-autocomplete', 'list');\n                ui.inputBox.setAttribute('aria-activedescendant', ui.list.getActiveDescendant() || '');\n            }\n            else {\n                ui.inputBox.removeAttribute('role');\n                ui.inputBox.removeAttribute('aria-haspopup');\n                ui.inputBox.removeAttribute('aria-autocomplete');\n                ui.inputBox.removeAttribute('aria-activedescendant');\n            }\n        }\n    }\n    setEnabled(enabled) {\n        if (enabled !== this.enabled) {\n            this.enabled = enabled;\n            for (const item of this.getUI().leftActionBar.viewItems) {\n                item.getAction().enabled = enabled;\n            }\n            for (const item of this.getUI().rightActionBar.viewItems) {\n                item.getAction().enabled = enabled;\n            }\n            this.getUI().checkAll.disabled = !enabled;\n            // this.getUI().inputBox.enabled = enabled; Avoid loosing focus.\n            this.getUI().ok.enabled = enabled;\n            this.getUI().list.enabled = enabled;\n        }\n    }\n    hide(reason) {\n        var _a;\n        const controller = this.controller;\n        if (controller) {\n            const focusChanged = !((_a = this.ui) === null || _a === void 0 ? void 0 : _a.container.contains(document.activeElement));\n            this.controller = null;\n            this.onHideEmitter.fire();\n            this.getUI().container.style.display = 'none';\n            if (!focusChanged) {\n                let currentElement = this.previousFocusElement;\n                while (currentElement && !currentElement.offsetParent) {\n                    currentElement = withNullAsUndefined(currentElement.parentElement);\n                }\n                if (currentElement === null || currentElement === void 0 ? void 0 : currentElement.offsetParent) {\n                    currentElement.focus();\n                    this.previousFocusElement = undefined;\n                }\n                else {\n                    this.options.returnFocus();\n                }\n            }\n            controller.didHide(reason);\n        }\n    }\n    layout(dimension, titleBarOffset) {\n        this.dimension = dimension;\n        this.titleBarOffset = titleBarOffset;\n        this.updateLayout();\n    }\n    updateLayout() {\n        if (this.ui) {\n            this.ui.container.style.top = `${this.titleBarOffset}px`;\n            const style = this.ui.container.style;\n            const width = Math.min(this.dimension.width * 0.62 /* golden cut */, QuickInputController.MAX_WIDTH);\n            style.width = width + 'px';\n            style.marginLeft = '-' + (width / 2) + 'px';\n            this.ui.inputBox.layout();\n            this.ui.list.layout(this.dimension && this.dimension.height * 0.4);\n        }\n    }\n    applyStyles(styles) {\n        this.styles = styles;\n        this.updateStyles();\n    }\n    updateStyles() {\n        if (this.ui) {\n            const { quickInputTitleBackground, quickInputBackground, quickInputForeground, contrastBorder, widgetShadow, } = this.styles.widget;\n            this.ui.titleBar.style.backgroundColor = quickInputTitleBackground ? quickInputTitleBackground.toString() : '';\n            this.ui.container.style.backgroundColor = quickInputBackground ? quickInputBackground.toString() : '';\n            this.ui.container.style.color = quickInputForeground ? quickInputForeground.toString() : '';\n            this.ui.container.style.border = contrastBorder ? `1px solid ${contrastBorder}` : '';\n            this.ui.container.style.boxShadow = widgetShadow ? `0 0 8px 2px ${widgetShadow}` : '';\n            this.ui.inputBox.style(this.styles.inputBox);\n            this.ui.count.style(this.styles.countBadge);\n            this.ui.ok.style(this.styles.button);\n            this.ui.customButton.style(this.styles.button);\n            this.ui.progressBar.style(this.styles.progressBar);\n            this.ui.list.style(this.styles.list);\n            const content = [];\n            if (this.styles.list.pickerGroupBorder) {\n                content.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`);\n            }\n            if (this.styles.list.pickerGroupForeground) {\n                content.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`);\n            }\n            if (this.styles.keybindingLabel.keybindingLabelBackground ||\n                this.styles.keybindingLabel.keybindingLabelBorder ||\n                this.styles.keybindingLabel.keybindingLabelBottomBorder ||\n                this.styles.keybindingLabel.keybindingLabelShadow ||\n                this.styles.keybindingLabel.keybindingLabelForeground) {\n                content.push('.quick-input-list .monaco-keybinding > .monaco-keybinding-key {');\n                if (this.styles.keybindingLabel.keybindingLabelBackground) {\n                    content.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelBorder) {\n                    // Order matters here. `border-color` must come before `border-bottom-color`.\n                    content.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelBottomBorder) {\n                    content.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelShadow) {\n                    content.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelForeground) {\n                    content.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`);\n                }\n                content.push('}');\n            }\n            const newStyles = content.join('\\n');\n            if (newStyles !== this.ui.styleSheet.textContent) {\n                this.ui.styleSheet.textContent = newStyles;\n            }\n        }\n    }\n}\nQuickInputController.MAX_WIDTH = 600; // Max total width of quick input widget\n"],"mappings":"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"}]}