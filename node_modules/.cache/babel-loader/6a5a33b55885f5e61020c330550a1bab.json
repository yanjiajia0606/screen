{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/platform/list/browser/listService.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/platform/list/browser/listService.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIjsKaW1wb3J0IF9nZXQgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyI7CnZhciBfcHJvcGVydGllczsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LnRvLXN0cmluZy10YWcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KdmFyIF9fZGVjb3JhdGUgPSB0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHsKICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsCiAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywKICAgIGQ7CiAgaWYgKCh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoUmVmbGVjdCkpID09PSAib2JqZWN0IiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gImZ1bmN0aW9uIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO2Vsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7CiAgfQogIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7Cn07CnZhciBfX3BhcmFtID0gdGhpcyAmJiB0aGlzLl9fcGFyYW0gfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikgewogIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsKICAgIGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7CiAgfTsKfTsKaW1wb3J0IHsgY3JlYXRlU3R5bGVTaGVldCB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci9kb20uanMnOwppbXBvcnQgeyBQYWdlZExpc3QgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2Jyb3dzZXIvdWkvbGlzdC9saXN0UGFnaW5nLmpzJzsKaW1wb3J0IHsgRGVmYXVsdFN0eWxlQ29udHJvbGxlciwgaXNTZWxlY3Rpb25SYW5nZUNoYW5nZUV2ZW50IGFzIF9pc1NlbGVjdGlvblJhbmdlQ2hhbmdlRXZlbnQsIGlzU2VsZWN0aW9uU2luZ2xlQ2hhbmdlRXZlbnQgYXMgX2lzU2VsZWN0aW9uU2luZ2xlQ2hhbmdlRXZlbnQsIExpc3QsIFR5cGVOYXZpZ2F0aW9uTW9kZSB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci91aS9saXN0L2xpc3RXaWRnZXQuanMnOwppbXBvcnQgeyBUYWJsZSB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci91aS90YWJsZS90YWJsZVdpZGdldC5qcyc7CmltcG9ydCB7IFRyZWVGaW5kTW9kZSB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci91aS90cmVlL2Fic3RyYWN0VHJlZS5qcyc7CmltcG9ydCB7IEFzeW5jRGF0YVRyZWUsIENvbXByZXNzaWJsZUFzeW5jRGF0YVRyZWUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2Jyb3dzZXIvdWkvdHJlZS9hc3luY0RhdGFUcmVlLmpzJzsKaW1wb3J0IHsgRGF0YVRyZWUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2Jyb3dzZXIvdWkvdHJlZS9kYXRhVHJlZS5qcyc7CmltcG9ydCB7IENvbXByZXNzaWJsZU9iamVjdFRyZWUsIE9iamVjdFRyZWUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2Jyb3dzZXIvdWkvdHJlZS9vYmplY3RUcmVlLmpzJzsKaW1wb3J0IHsgRW1pdHRlciwgRXZlbnQgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9ldmVudC5qcyc7CmltcG9ydCB7IGNvbWJpbmVkRGlzcG9zYWJsZSwgRGlzcG9zYWJsZSwgRGlzcG9zYWJsZVN0b3JlLCBkaXNwb3NlIGFzIF9kaXNwb3NlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9saWZlY3ljbGUuanMnOwppbXBvcnQgeyBsb2NhbGl6ZSB9IGZyb20gJy4uLy4uLy4uL25scy5qcyc7CmltcG9ydCB7IElDb25maWd1cmF0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL2NvbmZpZ3VyYXRpb24vY29tbW9uL2NvbmZpZ3VyYXRpb24uanMnOwppbXBvcnQgeyBFeHRlbnNpb25zIGFzIENvbmZpZ3VyYXRpb25FeHRlbnNpb25zIH0gZnJvbSAnLi4vLi4vY29uZmlndXJhdGlvbi9jb21tb24vY29uZmlndXJhdGlvblJlZ2lzdHJ5LmpzJzsKaW1wb3J0IHsgQ29udGV4dEtleUV4cHIsIElDb250ZXh0S2V5U2VydmljZSwgUmF3Q29udGV4dEtleSB9IGZyb20gJy4uLy4uL2NvbnRleHRrZXkvY29tbW9uL2NvbnRleHRrZXkuanMnOwppbXBvcnQgeyBJbnB1dEZvY3VzZWRDb250ZXh0S2V5IH0gZnJvbSAnLi4vLi4vY29udGV4dGtleS9jb21tb24vY29udGV4dGtleXMuanMnOwppbXBvcnQgeyBJQ29udGV4dFZpZXdTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29udGV4dHZpZXcvYnJvd3Nlci9jb250ZXh0Vmlldy5qcyc7CmltcG9ydCB7IGNyZWF0ZURlY29yYXRvciwgSUluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vaW5zdGFudGlhdGlvbi9jb21tb24vaW5zdGFudGlhdGlvbi5qcyc7CmltcG9ydCB7IElLZXliaW5kaW5nU2VydmljZSB9IGZyb20gJy4uLy4uL2tleWJpbmRpbmcvY29tbW9uL2tleWJpbmRpbmcuanMnOwppbXBvcnQgeyBSZWdpc3RyeSB9IGZyb20gJy4uLy4uL3JlZ2lzdHJ5L2NvbW1vbi9wbGF0Zm9ybS5qcyc7CmltcG9ydCB7IGF0dGFjaExpc3RTdHlsZXIsIGNvbXB1dGVTdHlsZXMsIGRlZmF1bHRMaXN0U3R5bGVzIH0gZnJvbSAnLi4vLi4vdGhlbWUvY29tbW9uL3N0eWxlci5qcyc7CmltcG9ydCB7IElUaGVtZVNlcnZpY2UgfSBmcm9tICcuLi8uLi90aGVtZS9jb21tb24vdGhlbWVTZXJ2aWNlLmpzJzsKZXhwb3J0IHZhciBJTGlzdFNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3IoJ2xpc3RTZXJ2aWNlJyk7CnZhciBMaXN0U2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gTGlzdFNlcnZpY2UoX3RoZW1lU2VydmljZSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpc3RTZXJ2aWNlKTsKICAgIHRoaXMuX3RoZW1lU2VydmljZSA9IF90aGVtZVNlcnZpY2U7CiAgICB0aGlzLmRpc3Bvc2FibGVzID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpOwogICAgdGhpcy5saXN0cyA9IFtdOwogICAgdGhpcy5fbGFzdEZvY3VzZWRXaWRnZXQgPSB1bmRlZmluZWQ7CiAgICB0aGlzLl9oYXNDcmVhdGVkU3R5bGVDb250cm9sbGVyID0gZmFsc2U7CiAgfQogIF9jcmVhdGVDbGFzcyhMaXN0U2VydmljZSwgW3sKICAgIGtleTogImxhc3RGb2N1c2VkTGlzdCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2xhc3RGb2N1c2VkV2lkZ2V0OwogICAgfQogIH0sIHsKICAgIGtleTogInNldExhc3RGb2N1c2VkTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGFzdEZvY3VzZWRMaXN0KHdpZGdldCkgewogICAgICB2YXIgX2EsIF9iOwogICAgICBpZiAod2lkZ2V0ID09PSB0aGlzLl9sYXN0Rm9jdXNlZFdpZGdldCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAoX2EgPSB0aGlzLl9sYXN0Rm9jdXNlZFdpZGdldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEhUTUxFbGVtZW50KCkuY2xhc3NMaXN0LnJlbW92ZSgnbGFzdC1mb2N1c2VkJyk7CiAgICAgIHRoaXMuX2xhc3RGb2N1c2VkV2lkZ2V0ID0gd2lkZ2V0OwogICAgICAoX2IgPSB0aGlzLl9sYXN0Rm9jdXNlZFdpZGdldCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmdldEhUTUxFbGVtZW50KCkuY2xhc3NMaXN0LmFkZCgnbGFzdC1mb2N1c2VkJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyKHdpZGdldCwgZXh0cmFDb250ZXh0S2V5cykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIXRoaXMuX2hhc0NyZWF0ZWRTdHlsZUNvbnRyb2xsZXIpIHsKICAgICAgICB0aGlzLl9oYXNDcmVhdGVkU3R5bGVDb250cm9sbGVyID0gdHJ1ZTsKICAgICAgICAvLyBjcmVhdGUgYSBzaGFyZWQgZGVmYXVsdCB0cmVlIHN0eWxlIHNoZWV0IGZvciBwZXJmb3JtYW5jZSByZWFzb25zCiAgICAgICAgdmFyIHN0eWxlQ29udHJvbGxlciA9IG5ldyBEZWZhdWx0U3R5bGVDb250cm9sbGVyKGNyZWF0ZVN0eWxlU2hlZXQoKSwgJycpOwogICAgICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKGF0dGFjaExpc3RTdHlsZXIoc3R5bGVDb250cm9sbGVyLCB0aGlzLl90aGVtZVNlcnZpY2UpKTsKICAgICAgfQogICAgICBpZiAodGhpcy5saXN0cy5zb21lKGZ1bmN0aW9uIChsKSB7CiAgICAgICAgcmV0dXJuIGwud2lkZ2V0ID09PSB3aWRnZXQ7CiAgICAgIH0pKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcmVnaXN0ZXIgdGhlIHNhbWUgd2lkZ2V0IG11bHRpcGxlIHRpbWVzJyk7CiAgICAgIH0KICAgICAgLy8gS2VlcCBpbiBvdXIgbGlzdHMgbGlzdAogICAgICB2YXIgcmVnaXN0ZXJlZExpc3QgPSB7CiAgICAgICAgd2lkZ2V0OiB3aWRnZXQsCiAgICAgICAgZXh0cmFDb250ZXh0S2V5czogZXh0cmFDb250ZXh0S2V5cwogICAgICB9OwogICAgICB0aGlzLmxpc3RzLnB1c2gocmVnaXN0ZXJlZExpc3QpOwogICAgICAvLyBDaGVjayBmb3IgY3VycmVudGx5IGJlaW5nIGZvY3VzZWQKICAgICAgaWYgKHdpZGdldC5nZXRIVE1MRWxlbWVudCgpID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7CiAgICAgICAgdGhpcy5zZXRMYXN0Rm9jdXNlZExpc3Qod2lkZ2V0KTsKICAgICAgfQogICAgICByZXR1cm4gY29tYmluZWREaXNwb3NhYmxlKHdpZGdldC5vbkRpZEZvY3VzKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuc2V0TGFzdEZvY3VzZWRMaXN0KHdpZGdldCk7CiAgICAgIH0pLCB0b0Rpc3Bvc2FibGUoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpcy5saXN0cy5zcGxpY2UoX3RoaXMubGlzdHMuaW5kZXhPZihyZWdpc3RlcmVkTGlzdCksIDEpOwogICAgICB9KSwgd2lkZ2V0Lm9uRGlkRGlzcG9zZShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubGlzdHMgPSBfdGhpcy5saXN0cy5maWx0ZXIoZnVuY3Rpb24gKGwpIHsKICAgICAgICAgIHJldHVybiBsICE9PSByZWdpc3RlcmVkTGlzdDsKICAgICAgICB9KTsKICAgICAgICBpZiAoX3RoaXMuX2xhc3RGb2N1c2VkV2lkZ2V0ID09PSB3aWRnZXQpIHsKICAgICAgICAgIF90aGlzLnNldExhc3RGb2N1c2VkTGlzdCh1bmRlZmluZWQpOwogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpOwogICAgfQogIH1dKTsKICByZXR1cm4gTGlzdFNlcnZpY2U7Cn0oKTsKTGlzdFNlcnZpY2UgPSBfX2RlY29yYXRlKFtfX3BhcmFtKDAsIElUaGVtZVNlcnZpY2UpXSwgTGlzdFNlcnZpY2UpOwpleHBvcnQgeyBMaXN0U2VydmljZSB9OwpleHBvcnQgdmFyIFJhd1dvcmtiZW5jaExpc3RGb2N1c0NvbnRleHRLZXkgPSBuZXcgUmF3Q29udGV4dEtleSgnbGlzdEZvY3VzJywgdHJ1ZSk7CmV4cG9ydCB2YXIgV29ya2JlbmNoTGlzdFN1cHBvcnRzTXVsdGlTZWxlY3RDb250ZXh0S2V5ID0gbmV3IFJhd0NvbnRleHRLZXkoJ2xpc3RTdXBwb3J0c011bHRpc2VsZWN0JywgdHJ1ZSk7CmV4cG9ydCB2YXIgV29ya2JlbmNoTGlzdEZvY3VzQ29udGV4dEtleSA9IENvbnRleHRLZXlFeHByLmFuZChSYXdXb3JrYmVuY2hMaXN0Rm9jdXNDb250ZXh0S2V5LCBDb250ZXh0S2V5RXhwci5ub3QoSW5wdXRGb2N1c2VkQ29udGV4dEtleSkpOwpleHBvcnQgdmFyIFdvcmtiZW5jaExpc3RIYXNTZWxlY3Rpb25PckZvY3VzID0gbmV3IFJhd0NvbnRleHRLZXkoJ2xpc3RIYXNTZWxlY3Rpb25PckZvY3VzJywgZmFsc2UpOwpleHBvcnQgdmFyIFdvcmtiZW5jaExpc3REb3VibGVTZWxlY3Rpb24gPSBuZXcgUmF3Q29udGV4dEtleSgnbGlzdERvdWJsZVNlbGVjdGlvbicsIGZhbHNlKTsKZXhwb3J0IHZhciBXb3JrYmVuY2hMaXN0TXVsdGlTZWxlY3Rpb24gPSBuZXcgUmF3Q29udGV4dEtleSgnbGlzdE11bHRpU2VsZWN0aW9uJywgZmFsc2UpOwpleHBvcnQgdmFyIFdvcmtiZW5jaExpc3RTZWxlY3Rpb25OYXZpZ2F0aW9uID0gbmV3IFJhd0NvbnRleHRLZXkoJ2xpc3RTZWxlY3Rpb25OYXZpZ2F0aW9uJywgZmFsc2UpOwpleHBvcnQgdmFyIFdvcmtiZW5jaExpc3RTdXBwb3J0c0ZpbmQgPSBuZXcgUmF3Q29udGV4dEtleSgnbGlzdFN1cHBvcnRzRmluZCcsIHRydWUpOwpleHBvcnQgdmFyIFdvcmtiZW5jaFRyZWVFbGVtZW50Q2FuQ29sbGFwc2UgPSBuZXcgUmF3Q29udGV4dEtleSgndHJlZUVsZW1lbnRDYW5Db2xsYXBzZScsIGZhbHNlKTsKZXhwb3J0IHZhciBXb3JrYmVuY2hUcmVlRWxlbWVudEhhc1BhcmVudCA9IG5ldyBSYXdDb250ZXh0S2V5KCd0cmVlRWxlbWVudEhhc1BhcmVudCcsIGZhbHNlKTsKZXhwb3J0IHZhciBXb3JrYmVuY2hUcmVlRWxlbWVudENhbkV4cGFuZCA9IG5ldyBSYXdDb250ZXh0S2V5KCd0cmVlRWxlbWVudENhbkV4cGFuZCcsIGZhbHNlKTsKZXhwb3J0IHZhciBXb3JrYmVuY2hUcmVlRWxlbWVudEhhc0NoaWxkID0gbmV3IFJhd0NvbnRleHRLZXkoJ3RyZWVFbGVtZW50SGFzQ2hpbGQnLCBmYWxzZSk7CmV4cG9ydCB2YXIgV29ya2JlbmNoVHJlZUZpbmRPcGVuID0gbmV3IFJhd0NvbnRleHRLZXkoJ3RyZWVGaW5kT3BlbicsIGZhbHNlKTsKdmFyIFdvcmtiZW5jaExpc3RUeXBlTmF2aWdhdGlvbk1vZGVLZXkgPSAnbGlzdFR5cGVOYXZpZ2F0aW9uTW9kZSc7Ci8qKgogKiBAZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBXb3JrYmVuY2hMaXN0VHlwZU5hdmlnYXRpb25Nb2RlS2V5CiAqLwp2YXIgV29ya2JlbmNoTGlzdEF1dG9tYXRpY0tleWJvYXJkTmF2aWdhdGlvbkxlZ2FjeUtleSA9ICdsaXN0QXV0b21hdGljS2V5Ym9hcmROYXZpZ2F0aW9uJzsKZnVuY3Rpb24gY3JlYXRlU2NvcGVkQ29udGV4dEtleVNlcnZpY2UoY29udGV4dEtleVNlcnZpY2UsIHdpZGdldCkgewogIHZhciByZXN1bHQgPSBjb250ZXh0S2V5U2VydmljZS5jcmVhdGVTY29wZWQod2lkZ2V0LmdldEhUTUxFbGVtZW50KCkpOwogIFJhd1dvcmtiZW5jaExpc3RGb2N1c0NvbnRleHRLZXkuYmluZFRvKHJlc3VsdCk7CiAgcmV0dXJuIHJlc3VsdDsKfQp2YXIgbXVsdGlTZWxlY3RNb2RpZmllclNldHRpbmdLZXkgPSAnd29ya2JlbmNoLmxpc3QubXVsdGlTZWxlY3RNb2RpZmllcic7CnZhciBvcGVuTW9kZVNldHRpbmdLZXkgPSAnd29ya2JlbmNoLmxpc3Qub3Blbk1vZGUnOwp2YXIgaG9yaXpvbnRhbFNjcm9sbGluZ0tleSA9ICd3b3JrYmVuY2gubGlzdC5ob3Jpem9udGFsU2Nyb2xsaW5nJzsKdmFyIGRlZmF1bHRGaW5kTW9kZVNldHRpbmdLZXkgPSAnd29ya2JlbmNoLmxpc3QuZGVmYXVsdEZpbmRNb2RlJzsKLyoqIEBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHdvcmtiZW5jaC5saXN0LmRlZmF1bHRGaW5kTW9kZSAqLwp2YXIga2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ0tleSA9ICd3b3JrYmVuY2gubGlzdC5rZXlib2FyZE5hdmlnYXRpb24nOwp2YXIgdHJlZUluZGVudEtleSA9ICd3b3JrYmVuY2gudHJlZS5pbmRlbnQnOwp2YXIgdHJlZVJlbmRlckluZGVudEd1aWRlc0tleSA9ICd3b3JrYmVuY2gudHJlZS5yZW5kZXJJbmRlbnRHdWlkZXMnOwp2YXIgbGlzdFNtb290aFNjcm9sbGluZyA9ICd3b3JrYmVuY2gubGlzdC5zbW9vdGhTY3JvbGxpbmcnOwp2YXIgbW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5S2V5ID0gJ3dvcmtiZW5jaC5saXN0Lm1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eSc7CnZhciBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHlLZXkgPSAnd29ya2JlbmNoLmxpc3QuZmFzdFNjcm9sbFNlbnNpdGl2aXR5JzsKdmFyIHRyZWVFeHBhbmRNb2RlID0gJ3dvcmtiZW5jaC50cmVlLmV4cGFuZE1vZGUnOwpmdW5jdGlvbiB1c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIoY29uZmlndXJhdGlvblNlcnZpY2UpIHsKICByZXR1cm4gY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUobXVsdGlTZWxlY3RNb2RpZmllclNldHRpbmdLZXkpID09PSAnYWx0JzsKfQp2YXIgTXVsdGlwbGVTZWxlY3Rpb25Db250cm9sbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRGlzcG9zYWJsZSkgewogIF9pbmhlcml0cyhNdWx0aXBsZVNlbGVjdGlvbkNvbnRyb2xsZXIsIF9EaXNwb3NhYmxlKTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKE11bHRpcGxlU2VsZWN0aW9uQ29udHJvbGxlcik7CiAgZnVuY3Rpb24gTXVsdGlwbGVTZWxlY3Rpb25Db250cm9sbGVyKGNvbmZpZ3VyYXRpb25TZXJ2aWNlKSB7CiAgICB2YXIgX3RoaXMyOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE11bHRpcGxlU2VsZWN0aW9uQ29udHJvbGxlcik7CiAgICBfdGhpczIgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgIF90aGlzMi5jb25maWd1cmF0aW9uU2VydmljZSA9IGNvbmZpZ3VyYXRpb25TZXJ2aWNlOwogICAgX3RoaXMyLnVzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllciA9IHVzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllcihjb25maWd1cmF0aW9uU2VydmljZSk7CiAgICBfdGhpczIucmVnaXN0ZXJMaXN0ZW5lcnMoKTsKICAgIHJldHVybiBfdGhpczI7CiAgfQogIF9jcmVhdGVDbGFzcyhNdWx0aXBsZVNlbGVjdGlvbkNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICJyZWdpc3Rlckxpc3RlbmVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLmNvbmZpZ3VyYXRpb25TZXJ2aWNlLm9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbihmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKG11bHRpU2VsZWN0TW9kaWZpZXJTZXR0aW5nS2V5KSkgewogICAgICAgICAgX3RoaXMzLnVzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllciA9IHVzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllcihfdGhpczMuY29uZmlndXJhdGlvblNlcnZpY2UpOwogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImlzU2VsZWN0aW9uU2luZ2xlQ2hhbmdlRXZlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2VsZWN0aW9uU2luZ2xlQ2hhbmdlRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMudXNlQWx0QXNNdWx0aXBsZVNlbGVjdGlvbk1vZGlmaWVyKSB7CiAgICAgICAgcmV0dXJuIGV2ZW50LmJyb3dzZXJFdmVudC5hbHRLZXk7CiAgICAgIH0KICAgICAgcmV0dXJuIF9pc1NlbGVjdGlvblNpbmdsZUNoYW5nZUV2ZW50KGV2ZW50KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1NlbGVjdGlvblJhbmdlQ2hhbmdlRXZlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2VsZWN0aW9uUmFuZ2VDaGFuZ2VFdmVudChldmVudCkgewogICAgICByZXR1cm4gX2lzU2VsZWN0aW9uUmFuZ2VDaGFuZ2VFdmVudChldmVudCk7CiAgICB9CiAgfV0pOwogIHJldHVybiBNdWx0aXBsZVNlbGVjdGlvbkNvbnRyb2xsZXI7Cn0oRGlzcG9zYWJsZSk7CmZ1bmN0aW9uIHRvV29ya2JlbmNoTGlzdE9wdGlvbnMoYWNjZXNzb3IsIG9wdGlvbnMpIHsKICB2YXIgX2E7CiAgdmFyIGNvbmZpZ3VyYXRpb25TZXJ2aWNlID0gYWNjZXNzb3IuZ2V0KElDb25maWd1cmF0aW9uU2VydmljZSk7CiAgdmFyIGtleWJpbmRpbmdTZXJ2aWNlID0gYWNjZXNzb3IuZ2V0KElLZXliaW5kaW5nU2VydmljZSk7CiAgdmFyIGRpc3Bvc2FibGVzID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpOwogIHZhciByZXN1bHQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7CiAgICBrZXlib2FyZE5hdmlnYXRpb25EZWxlZ2F0ZTogewogICAgICBtaWdodFByb2R1Y2VQcmludGFibGVDaGFyYWN0ZXI6IGZ1bmN0aW9uIG1pZ2h0UHJvZHVjZVByaW50YWJsZUNoYXJhY3RlcihlKSB7CiAgICAgICAgcmV0dXJuIGtleWJpbmRpbmdTZXJ2aWNlLm1pZ2h0UHJvZHVjZVByaW50YWJsZUNoYXJhY3RlcihlKTsKICAgICAgfQogICAgfSwKICAgIHNtb290aFNjcm9sbGluZzogQm9vbGVhbihjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShsaXN0U21vb3RoU2Nyb2xsaW5nKSksCiAgICBtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHk6IGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKG1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eUtleSksCiAgICBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHk6IGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGZhc3RTY3JvbGxTZW5zaXRpdml0eUtleSksCiAgICBtdWx0aXBsZVNlbGVjdGlvbkNvbnRyb2xsZXI6IChfYSA9IG9wdGlvbnMubXVsdGlwbGVTZWxlY3Rpb25Db250cm9sbGVyKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBkaXNwb3NhYmxlcy5hZGQobmV3IE11bHRpcGxlU2VsZWN0aW9uQ29udHJvbGxlcihjb25maWd1cmF0aW9uU2VydmljZSkpLAogICAga2V5Ym9hcmROYXZpZ2F0aW9uRXZlbnRGaWx0ZXI6IGNyZWF0ZUtleWJvYXJkTmF2aWdhdGlvbkV2ZW50RmlsdGVyKGtleWJpbmRpbmdTZXJ2aWNlKQogIH0pOwogIHJldHVybiBbcmVzdWx0LCBkaXNwb3NhYmxlc107Cn0KdmFyIFdvcmtiZW5jaExpc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9MaXN0KSB7CiAgX2luaGVyaXRzKFdvcmtiZW5jaExpc3QsIF9MaXN0KTsKICB2YXIgX3N1cGVyMiA9IF9jcmVhdGVTdXBlcihXb3JrYmVuY2hMaXN0KTsKICBmdW5jdGlvbiBXb3JrYmVuY2hMaXN0KHVzZXIsIGNvbnRhaW5lciwgZGVsZWdhdGUsIHJlbmRlcmVycywgb3B0aW9ucywgY29udGV4dEtleVNlcnZpY2UsIGxpc3RTZXJ2aWNlLCB0aGVtZVNlcnZpY2UsIGNvbmZpZ3VyYXRpb25TZXJ2aWNlLCBpbnN0YW50aWF0aW9uU2VydmljZSkgewogICAgdmFyIF90aGlzNDsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXb3JrYmVuY2hMaXN0KTsKICAgIHZhciBob3Jpem9udGFsU2Nyb2xsaW5nID0gdHlwZW9mIG9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmhvcml6b250YWxTY3JvbGxpbmcgOiBCb29sZWFuKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGhvcml6b250YWxTY3JvbGxpbmdLZXkpKTsKICAgIHZhciBfaW5zdGFudGlhdGlvblNlcnZpY2UgPSBpbnN0YW50aWF0aW9uU2VydmljZS5pbnZva2VGdW5jdGlvbih0b1dvcmtiZW5jaExpc3RPcHRpb25zLCBvcHRpb25zKSwKICAgICAgX2luc3RhbnRpYXRpb25TZXJ2aWNlMiA9IF9zbGljZWRUb0FycmF5KF9pbnN0YW50aWF0aW9uU2VydmljZSwgMiksCiAgICAgIHdvcmtiZW5jaExpc3RPcHRpb25zID0gX2luc3RhbnRpYXRpb25TZXJ2aWNlMlswXSwKICAgICAgd29ya2JlbmNoTGlzdE9wdGlvbnNEaXNwb3NhYmxlID0gX2luc3RhbnRpYXRpb25TZXJ2aWNlMlsxXTsKICAgIF90aGlzNCA9IF9zdXBlcjIuY2FsbCh0aGlzLCB1c2VyLCBjb250YWluZXIsIGRlbGVnYXRlLCByZW5kZXJlcnMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsKICAgICAga2V5Ym9hcmRTdXBwb3J0OiBmYWxzZQogICAgfSwgY29tcHV0ZVN0eWxlcyh0aGVtZVNlcnZpY2UuZ2V0Q29sb3JUaGVtZSgpLCBkZWZhdWx0TGlzdFN0eWxlcykpLCB3b3JrYmVuY2hMaXN0T3B0aW9ucyksIHsKICAgICAgaG9yaXpvbnRhbFNjcm9sbGluZzogaG9yaXpvbnRhbFNjcm9sbGluZwogICAgfSkpOwogICAgX3RoaXM0LmRpc3Bvc2FibGVzLmFkZCh3b3JrYmVuY2hMaXN0T3B0aW9uc0Rpc3Bvc2FibGUpOwogICAgX3RoaXM0LmNvbnRleHRLZXlTZXJ2aWNlID0gY3JlYXRlU2NvcGVkQ29udGV4dEtleVNlcnZpY2UoY29udGV4dEtleVNlcnZpY2UsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXM0KSk7CiAgICBfdGhpczQudGhlbWVTZXJ2aWNlID0gdGhlbWVTZXJ2aWNlOwogICAgX3RoaXM0Lmxpc3RTdXBwb3J0c011bHRpU2VsZWN0ID0gV29ya2JlbmNoTGlzdFN1cHBvcnRzTXVsdGlTZWxlY3RDb250ZXh0S2V5LmJpbmRUbyhfdGhpczQuY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM0Lmxpc3RTdXBwb3J0c011bHRpU2VsZWN0LnNldChvcHRpb25zLm11bHRpcGxlU2VsZWN0aW9uU3VwcG9ydCAhPT0gZmFsc2UpOwogICAgdmFyIGxpc3RTZWxlY3Rpb25OYXZpZ2F0aW9uID0gV29ya2JlbmNoTGlzdFNlbGVjdGlvbk5hdmlnYXRpb24uYmluZFRvKF90aGlzNC5jb250ZXh0S2V5U2VydmljZSk7CiAgICBsaXN0U2VsZWN0aW9uTmF2aWdhdGlvbi5zZXQoQm9vbGVhbihvcHRpb25zLnNlbGVjdGlvbk5hdmlnYXRpb24pKTsKICAgIF90aGlzNC5saXN0SGFzU2VsZWN0aW9uT3JGb2N1cyA9IFdvcmtiZW5jaExpc3RIYXNTZWxlY3Rpb25PckZvY3VzLmJpbmRUbyhfdGhpczQuY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM0Lmxpc3REb3VibGVTZWxlY3Rpb24gPSBXb3JrYmVuY2hMaXN0RG91YmxlU2VsZWN0aW9uLmJpbmRUbyhfdGhpczQuY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM0Lmxpc3RNdWx0aVNlbGVjdGlvbiA9IFdvcmtiZW5jaExpc3RNdWx0aVNlbGVjdGlvbi5iaW5kVG8oX3RoaXM0LmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNC5ob3Jpem9udGFsU2Nyb2xsaW5nID0gb3B0aW9ucy5ob3Jpem9udGFsU2Nyb2xsaW5nOwogICAgX3RoaXM0Ll91c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIgPSB1c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIoY29uZmlndXJhdGlvblNlcnZpY2UpOwogICAgX3RoaXM0LmRpc3Bvc2FibGVzLmFkZChfdGhpczQuY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM0LmRpc3Bvc2FibGVzLmFkZChsaXN0U2VydmljZS5yZWdpc3RlcihfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzNCkpKTsKICAgIGlmIChvcHRpb25zLm92ZXJyaWRlU3R5bGVzKSB7CiAgICAgIF90aGlzNC51cGRhdGVTdHlsZXMob3B0aW9ucy5vdmVycmlkZVN0eWxlcyk7CiAgICB9CiAgICBfdGhpczQuZGlzcG9zYWJsZXMuYWRkKF90aGlzNC5vbkRpZENoYW5nZVNlbGVjdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzZWxlY3Rpb24gPSBfdGhpczQuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIHZhciBmb2N1cyA9IF90aGlzNC5nZXRGb2N1cygpOwogICAgICBfdGhpczQuY29udGV4dEtleVNlcnZpY2UuYnVmZmVyQ2hhbmdlRXZlbnRzKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQubGlzdEhhc1NlbGVjdGlvbk9yRm9jdXMuc2V0KHNlbGVjdGlvbi5sZW5ndGggPiAwIHx8IGZvY3VzLmxlbmd0aCA+IDApOwogICAgICAgIF90aGlzNC5saXN0TXVsdGlTZWxlY3Rpb24uc2V0KHNlbGVjdGlvbi5sZW5ndGggPiAxKTsKICAgICAgICBfdGhpczQubGlzdERvdWJsZVNlbGVjdGlvbi5zZXQoc2VsZWN0aW9uLmxlbmd0aCA9PT0gMik7CiAgICAgIH0pOwogICAgfSkpOwogICAgX3RoaXM0LmRpc3Bvc2FibGVzLmFkZChfdGhpczQub25EaWRDaGFuZ2VGb2N1cyhmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzZWxlY3Rpb24gPSBfdGhpczQuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIHZhciBmb2N1cyA9IF90aGlzNC5nZXRGb2N1cygpOwogICAgICBfdGhpczQubGlzdEhhc1NlbGVjdGlvbk9yRm9jdXMuc2V0KHNlbGVjdGlvbi5sZW5ndGggPiAwIHx8IGZvY3VzLmxlbmd0aCA+IDApOwogICAgfSkpOwogICAgX3RoaXM0LmRpc3Bvc2FibGVzLmFkZChjb25maWd1cmF0aW9uU2VydmljZS5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24oZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24obXVsdGlTZWxlY3RNb2RpZmllclNldHRpbmdLZXkpKSB7CiAgICAgICAgX3RoaXM0Ll91c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIgPSB1c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIoY29uZmlndXJhdGlvblNlcnZpY2UpOwogICAgICB9CiAgICAgIHZhciBvcHRpb25zID0ge307CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKGhvcml6b250YWxTY3JvbGxpbmdLZXkpICYmIF90aGlzNC5ob3Jpem9udGFsU2Nyb2xsaW5nID09PSB1bmRlZmluZWQpIHsKICAgICAgICB2YXIgX2hvcml6b250YWxTY3JvbGxpbmcgPSBCb29sZWFuKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGhvcml6b250YWxTY3JvbGxpbmdLZXkpKTsKICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgewogICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGluZzogX2hvcml6b250YWxTY3JvbGxpbmcKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoZS5hZmZlY3RzQ29uZmlndXJhdGlvbihsaXN0U21vb3RoU2Nyb2xsaW5nKSkgewogICAgICAgIHZhciBzbW9vdGhTY3JvbGxpbmcgPSBCb29sZWFuKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGxpc3RTbW9vdGhTY3JvbGxpbmcpKTsKICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgewogICAgICAgICAgc21vb3RoU2Nyb2xsaW5nOiBzbW9vdGhTY3JvbGxpbmcKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoZS5hZmZlY3RzQ29uZmlndXJhdGlvbihtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHlLZXkpKSB7CiAgICAgICAgdmFyIG1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eSA9IGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKG1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eUtleSk7CiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsKICAgICAgICAgIG1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eTogbW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24oZmFzdFNjcm9sbFNlbnNpdGl2aXR5S2V5KSkgewogICAgICAgIHZhciBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHkgPSBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShmYXN0U2Nyb2xsU2Vuc2l0aXZpdHlLZXkpOwogICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7CiAgICAgICAgICBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHk6IGZhc3RTY3JvbGxTZW5zaXRpdml0eQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChPYmplY3Qua2V5cyhvcHRpb25zKS5sZW5ndGggPiAwKSB7CiAgICAgICAgX3RoaXM0LnVwZGF0ZU9wdGlvbnMob3B0aW9ucyk7CiAgICAgIH0KICAgIH0pKTsKICAgIF90aGlzNC5uYXZpZ2F0b3IgPSBuZXcgTGlzdFJlc291cmNlTmF2aWdhdG9yKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXM0KSwgT2JqZWN0LmFzc2lnbih7CiAgICAgIGNvbmZpZ3VyYXRpb25TZXJ2aWNlOiBjb25maWd1cmF0aW9uU2VydmljZQogICAgfSwgb3B0aW9ucykpOwogICAgX3RoaXM0LmRpc3Bvc2FibGVzLmFkZChfdGhpczQubmF2aWdhdG9yKTsKICAgIHJldHVybiBfdGhpczQ7CiAgfQogIF9jcmVhdGVDbGFzcyhXb3JrYmVuY2hMaXN0LCBbewogICAga2V5OiAidXBkYXRlT3B0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFdvcmtiZW5jaExpc3QucHJvdG90eXBlKSwgInVwZGF0ZU9wdGlvbnMiLCB0aGlzKS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgICBpZiAob3B0aW9ucy5vdmVycmlkZVN0eWxlcykgewogICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMpOwogICAgICB9CiAgICAgIGlmIChvcHRpb25zLm11bHRpcGxlU2VsZWN0aW9uU3VwcG9ydCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5saXN0U3VwcG9ydHNNdWx0aVNlbGVjdC5zZXQoISFvcHRpb25zLm11bHRpcGxlU2VsZWN0aW9uU3VwcG9ydCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTdHlsZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0eWxlcyhzdHlsZXMpIHsKICAgICAgdmFyIF9hOwogICAgICAoX2EgPSB0aGlzLl9zdHlsZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNwb3NlKCk7CiAgICAgIHRoaXMuX3N0eWxlciA9IGF0dGFjaExpc3RTdHlsZXIodGhpcywgdGhpcy50aGVtZVNlcnZpY2UsIHN0eWxlcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdmFyIF9hOwogICAgICAoX2EgPSB0aGlzLl9zdHlsZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNwb3NlKCk7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFdvcmtiZW5jaExpc3QucHJvdG90eXBlKSwgImRpc3Bvc2UiLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gV29ya2JlbmNoTGlzdDsKfShMaXN0KTsKV29ya2JlbmNoTGlzdCA9IF9fZGVjb3JhdGUoW19fcGFyYW0oNSwgSUNvbnRleHRLZXlTZXJ2aWNlKSwgX19wYXJhbSg2LCBJTGlzdFNlcnZpY2UpLCBfX3BhcmFtKDcsIElUaGVtZVNlcnZpY2UpLCBfX3BhcmFtKDgsIElDb25maWd1cmF0aW9uU2VydmljZSksIF9fcGFyYW0oOSwgSUluc3RhbnRpYXRpb25TZXJ2aWNlKV0sIFdvcmtiZW5jaExpc3QpOwpleHBvcnQgeyBXb3JrYmVuY2hMaXN0IH07CnZhciBXb3JrYmVuY2hQYWdlZExpc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QYWdlZExpc3QpIHsKICBfaW5oZXJpdHMoV29ya2JlbmNoUGFnZWRMaXN0LCBfUGFnZWRMaXN0KTsKICB2YXIgX3N1cGVyMyA9IF9jcmVhdGVTdXBlcihXb3JrYmVuY2hQYWdlZExpc3QpOwogIGZ1bmN0aW9uIFdvcmtiZW5jaFBhZ2VkTGlzdCh1c2VyLCBjb250YWluZXIsIGRlbGVnYXRlLCByZW5kZXJlcnMsIG9wdGlvbnMsIGNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZSwgdGhlbWVTZXJ2aWNlLCBjb25maWd1cmF0aW9uU2VydmljZSwgaW5zdGFudGlhdGlvblNlcnZpY2UpIHsKICAgIHZhciBfdGhpczU7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV29ya2JlbmNoUGFnZWRMaXN0KTsKICAgIHZhciBob3Jpem9udGFsU2Nyb2xsaW5nID0gdHlwZW9mIG9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmhvcml6b250YWxTY3JvbGxpbmcgOiBCb29sZWFuKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGhvcml6b250YWxTY3JvbGxpbmdLZXkpKTsKICAgIHZhciBfaW5zdGFudGlhdGlvblNlcnZpY2UzID0gaW5zdGFudGlhdGlvblNlcnZpY2UuaW52b2tlRnVuY3Rpb24odG9Xb3JrYmVuY2hMaXN0T3B0aW9ucywgb3B0aW9ucyksCiAgICAgIF9pbnN0YW50aWF0aW9uU2VydmljZTQgPSBfc2xpY2VkVG9BcnJheShfaW5zdGFudGlhdGlvblNlcnZpY2UzLCAyKSwKICAgICAgd29ya2JlbmNoTGlzdE9wdGlvbnMgPSBfaW5zdGFudGlhdGlvblNlcnZpY2U0WzBdLAogICAgICB3b3JrYmVuY2hMaXN0T3B0aW9uc0Rpc3Bvc2FibGUgPSBfaW5zdGFudGlhdGlvblNlcnZpY2U0WzFdOwogICAgX3RoaXM1ID0gX3N1cGVyMy5jYWxsKHRoaXMsIHVzZXIsIGNvbnRhaW5lciwgZGVsZWdhdGUsIHJlbmRlcmVycywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oewogICAgICBrZXlib2FyZFN1cHBvcnQ6IGZhbHNlCiAgICB9LCBjb21wdXRlU3R5bGVzKHRoZW1lU2VydmljZS5nZXRDb2xvclRoZW1lKCksIGRlZmF1bHRMaXN0U3R5bGVzKSksIHdvcmtiZW5jaExpc3RPcHRpb25zKSwgewogICAgICBob3Jpem9udGFsU2Nyb2xsaW5nOiBob3Jpem9udGFsU2Nyb2xsaW5nCiAgICB9KSk7CiAgICBfdGhpczUuZGlzcG9zYWJsZXMgPSBuZXcgRGlzcG9zYWJsZVN0b3JlKCk7CiAgICBfdGhpczUuZGlzcG9zYWJsZXMuYWRkKHdvcmtiZW5jaExpc3RPcHRpb25zRGlzcG9zYWJsZSk7CiAgICBfdGhpczUuY29udGV4dEtleVNlcnZpY2UgPSBjcmVhdGVTY29wZWRDb250ZXh0S2V5U2VydmljZShjb250ZXh0S2V5U2VydmljZSwgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczUpKTsKICAgIF90aGlzNS50aGVtZVNlcnZpY2UgPSB0aGVtZVNlcnZpY2U7CiAgICBfdGhpczUuaG9yaXpvbnRhbFNjcm9sbGluZyA9IG9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGluZzsKICAgIF90aGlzNS5saXN0U3VwcG9ydHNNdWx0aVNlbGVjdCA9IFdvcmtiZW5jaExpc3RTdXBwb3J0c011bHRpU2VsZWN0Q29udGV4dEtleS5iaW5kVG8oX3RoaXM1LmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIF90aGlzNS5saXN0U3VwcG9ydHNNdWx0aVNlbGVjdC5zZXQob3B0aW9ucy5tdWx0aXBsZVNlbGVjdGlvblN1cHBvcnQgIT09IGZhbHNlKTsKICAgIHZhciBsaXN0U2VsZWN0aW9uTmF2aWdhdGlvbiA9IFdvcmtiZW5jaExpc3RTZWxlY3Rpb25OYXZpZ2F0aW9uLmJpbmRUbyhfdGhpczUuY29udGV4dEtleVNlcnZpY2UpOwogICAgbGlzdFNlbGVjdGlvbk5hdmlnYXRpb24uc2V0KEJvb2xlYW4ob3B0aW9ucy5zZWxlY3Rpb25OYXZpZ2F0aW9uKSk7CiAgICBfdGhpczUuX3VzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllciA9IHVzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllcihjb25maWd1cmF0aW9uU2VydmljZSk7CiAgICBfdGhpczUuZGlzcG9zYWJsZXMuYWRkKF90aGlzNS5jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczUuZGlzcG9zYWJsZXMuYWRkKGxpc3RTZXJ2aWNlLnJlZ2lzdGVyKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXM1KSkpOwogICAgaWYgKG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMpIHsKICAgICAgX3RoaXM1LnVwZGF0ZVN0eWxlcyhvcHRpb25zLm92ZXJyaWRlU3R5bGVzKTsKICAgIH0KICAgIGlmIChvcHRpb25zLm92ZXJyaWRlU3R5bGVzKSB7CiAgICAgIF90aGlzNS5kaXNwb3NhYmxlcy5hZGQoYXR0YWNoTGlzdFN0eWxlcihfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzNSksIHRoZW1lU2VydmljZSwgb3B0aW9ucy5vdmVycmlkZVN0eWxlcykpOwogICAgfQogICAgX3RoaXM1LmRpc3Bvc2FibGVzLmFkZChjb25maWd1cmF0aW9uU2VydmljZS5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24oZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24obXVsdGlTZWxlY3RNb2RpZmllclNldHRpbmdLZXkpKSB7CiAgICAgICAgX3RoaXM1Ll91c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIgPSB1c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIoY29uZmlndXJhdGlvblNlcnZpY2UpOwogICAgICB9CiAgICAgIHZhciBvcHRpb25zID0ge307CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKGhvcml6b250YWxTY3JvbGxpbmdLZXkpICYmIF90aGlzNS5ob3Jpem9udGFsU2Nyb2xsaW5nID09PSB1bmRlZmluZWQpIHsKICAgICAgICB2YXIgX2hvcml6b250YWxTY3JvbGxpbmcyID0gQm9vbGVhbihjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShob3Jpem9udGFsU2Nyb2xsaW5nS2V5KSk7CiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsKICAgICAgICAgIGhvcml6b250YWxTY3JvbGxpbmc6IF9ob3Jpem9udGFsU2Nyb2xsaW5nMgogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKGxpc3RTbW9vdGhTY3JvbGxpbmcpKSB7CiAgICAgICAgdmFyIHNtb290aFNjcm9sbGluZyA9IEJvb2xlYW4oY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUobGlzdFNtb290aFNjcm9sbGluZykpOwogICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7CiAgICAgICAgICBzbW9vdGhTY3JvbGxpbmc6IHNtb290aFNjcm9sbGluZwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKG1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eUtleSkpIHsKICAgICAgICB2YXIgbW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5ID0gY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUobW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5S2V5KTsKICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgewogICAgICAgICAgbW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5OiBtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHkKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoZS5hZmZlY3RzQ29uZmlndXJhdGlvbihmYXN0U2Nyb2xsU2Vuc2l0aXZpdHlLZXkpKSB7CiAgICAgICAgdmFyIGZhc3RTY3JvbGxTZW5zaXRpdml0eSA9IGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGZhc3RTY3JvbGxTZW5zaXRpdml0eUtleSk7CiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsKICAgICAgICAgIGZhc3RTY3JvbGxTZW5zaXRpdml0eTogZmFzdFNjcm9sbFNlbnNpdGl2aXR5CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKE9iamVjdC5rZXlzKG9wdGlvbnMpLmxlbmd0aCA+IDApIHsKICAgICAgICBfdGhpczUudXBkYXRlT3B0aW9ucyhvcHRpb25zKTsKICAgICAgfQogICAgfSkpOwogICAgX3RoaXM1Lm5hdmlnYXRvciA9IG5ldyBMaXN0UmVzb3VyY2VOYXZpZ2F0b3IoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczUpLCBPYmplY3QuYXNzaWduKHsKICAgICAgY29uZmlndXJhdGlvblNlcnZpY2U6IGNvbmZpZ3VyYXRpb25TZXJ2aWNlCiAgICB9LCBvcHRpb25zKSk7CiAgICBfdGhpczUuZGlzcG9zYWJsZXMuYWRkKF90aGlzNS5uYXZpZ2F0b3IpOwogICAgcmV0dXJuIF90aGlzNTsKICB9CiAgX2NyZWF0ZUNsYXNzKFdvcmtiZW5jaFBhZ2VkTGlzdCwgW3sKICAgIGtleTogInVwZGF0ZU9wdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMob3B0aW9ucykgewogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihXb3JrYmVuY2hQYWdlZExpc3QucHJvdG90eXBlKSwgInVwZGF0ZU9wdGlvbnMiLCB0aGlzKS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgICBpZiAob3B0aW9ucy5vdmVycmlkZVN0eWxlcykgewogICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMpOwogICAgICB9CiAgICAgIGlmIChvcHRpb25zLm11bHRpcGxlU2VsZWN0aW9uU3VwcG9ydCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5saXN0U3VwcG9ydHNNdWx0aVNlbGVjdC5zZXQoISFvcHRpb25zLm11bHRpcGxlU2VsZWN0aW9uU3VwcG9ydCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTdHlsZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0eWxlcyhzdHlsZXMpIHsKICAgICAgdmFyIF9hOwogICAgICAoX2EgPSB0aGlzLl9zdHlsZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNwb3NlKCk7CiAgICAgIHRoaXMuX3N0eWxlciA9IGF0dGFjaExpc3RTdHlsZXIodGhpcywgdGhpcy50aGVtZVNlcnZpY2UsIHN0eWxlcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdmFyIF9hOwogICAgICAoX2EgPSB0aGlzLl9zdHlsZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNwb3NlKCk7CiAgICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpOwogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihXb3JrYmVuY2hQYWdlZExpc3QucHJvdG90eXBlKSwgImRpc3Bvc2UiLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gV29ya2JlbmNoUGFnZWRMaXN0Owp9KFBhZ2VkTGlzdCk7CldvcmtiZW5jaFBhZ2VkTGlzdCA9IF9fZGVjb3JhdGUoW19fcGFyYW0oNSwgSUNvbnRleHRLZXlTZXJ2aWNlKSwgX19wYXJhbSg2LCBJTGlzdFNlcnZpY2UpLCBfX3BhcmFtKDcsIElUaGVtZVNlcnZpY2UpLCBfX3BhcmFtKDgsIElDb25maWd1cmF0aW9uU2VydmljZSksIF9fcGFyYW0oOSwgSUluc3RhbnRpYXRpb25TZXJ2aWNlKV0sIFdvcmtiZW5jaFBhZ2VkTGlzdCk7CmV4cG9ydCB7IFdvcmtiZW5jaFBhZ2VkTGlzdCB9Owp2YXIgV29ya2JlbmNoVGFibGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9UYWJsZSkgewogIF9pbmhlcml0cyhXb3JrYmVuY2hUYWJsZSwgX1RhYmxlKTsKICB2YXIgX3N1cGVyNCA9IF9jcmVhdGVTdXBlcihXb3JrYmVuY2hUYWJsZSk7CiAgZnVuY3Rpb24gV29ya2JlbmNoVGFibGUodXNlciwgY29udGFpbmVyLCBkZWxlZ2F0ZSwgY29sdW1ucywgcmVuZGVyZXJzLCBvcHRpb25zLCBjb250ZXh0S2V5U2VydmljZSwgbGlzdFNlcnZpY2UsIHRoZW1lU2VydmljZSwgY29uZmlndXJhdGlvblNlcnZpY2UsIGluc3RhbnRpYXRpb25TZXJ2aWNlKSB7CiAgICB2YXIgX3RoaXM2OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdvcmtiZW5jaFRhYmxlKTsKICAgIHZhciBob3Jpem9udGFsU2Nyb2xsaW5nID0gdHlwZW9mIG9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmhvcml6b250YWxTY3JvbGxpbmcgOiBCb29sZWFuKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGhvcml6b250YWxTY3JvbGxpbmdLZXkpKTsKICAgIHZhciBfaW5zdGFudGlhdGlvblNlcnZpY2U1ID0gaW5zdGFudGlhdGlvblNlcnZpY2UuaW52b2tlRnVuY3Rpb24odG9Xb3JrYmVuY2hMaXN0T3B0aW9ucywgb3B0aW9ucyksCiAgICAgIF9pbnN0YW50aWF0aW9uU2VydmljZTYgPSBfc2xpY2VkVG9BcnJheShfaW5zdGFudGlhdGlvblNlcnZpY2U1LCAyKSwKICAgICAgd29ya2JlbmNoTGlzdE9wdGlvbnMgPSBfaW5zdGFudGlhdGlvblNlcnZpY2U2WzBdLAogICAgICB3b3JrYmVuY2hMaXN0T3B0aW9uc0Rpc3Bvc2FibGUgPSBfaW5zdGFudGlhdGlvblNlcnZpY2U2WzFdOwogICAgX3RoaXM2ID0gX3N1cGVyNC5jYWxsKHRoaXMsIHVzZXIsIGNvbnRhaW5lciwgZGVsZWdhdGUsIGNvbHVtbnMsIHJlbmRlcmVycywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oewogICAgICBrZXlib2FyZFN1cHBvcnQ6IGZhbHNlCiAgICB9LCBjb21wdXRlU3R5bGVzKHRoZW1lU2VydmljZS5nZXRDb2xvclRoZW1lKCksIGRlZmF1bHRMaXN0U3R5bGVzKSksIHdvcmtiZW5jaExpc3RPcHRpb25zKSwgewogICAgICBob3Jpem9udGFsU2Nyb2xsaW5nOiBob3Jpem9udGFsU2Nyb2xsaW5nCiAgICB9KSk7CiAgICBfdGhpczYuZGlzcG9zYWJsZXMuYWRkKHdvcmtiZW5jaExpc3RPcHRpb25zRGlzcG9zYWJsZSk7CiAgICBfdGhpczYuY29udGV4dEtleVNlcnZpY2UgPSBjcmVhdGVTY29wZWRDb250ZXh0S2V5U2VydmljZShjb250ZXh0S2V5U2VydmljZSwgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczYpKTsKICAgIF90aGlzNi50aGVtZVNlcnZpY2UgPSB0aGVtZVNlcnZpY2U7CiAgICBfdGhpczYubGlzdFN1cHBvcnRzTXVsdGlTZWxlY3QgPSBXb3JrYmVuY2hMaXN0U3VwcG9ydHNNdWx0aVNlbGVjdENvbnRleHRLZXkuYmluZFRvKF90aGlzNi5jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczYubGlzdFN1cHBvcnRzTXVsdGlTZWxlY3Quc2V0KG9wdGlvbnMubXVsdGlwbGVTZWxlY3Rpb25TdXBwb3J0ICE9PSBmYWxzZSk7CiAgICB2YXIgbGlzdFNlbGVjdGlvbk5hdmlnYXRpb24gPSBXb3JrYmVuY2hMaXN0U2VsZWN0aW9uTmF2aWdhdGlvbi5iaW5kVG8oX3RoaXM2LmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIGxpc3RTZWxlY3Rpb25OYXZpZ2F0aW9uLnNldChCb29sZWFuKG9wdGlvbnMuc2VsZWN0aW9uTmF2aWdhdGlvbikpOwogICAgX3RoaXM2Lmxpc3RIYXNTZWxlY3Rpb25PckZvY3VzID0gV29ya2JlbmNoTGlzdEhhc1NlbGVjdGlvbk9yRm9jdXMuYmluZFRvKF90aGlzNi5jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczYubGlzdERvdWJsZVNlbGVjdGlvbiA9IFdvcmtiZW5jaExpc3REb3VibGVTZWxlY3Rpb24uYmluZFRvKF90aGlzNi5jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczYubGlzdE11bHRpU2VsZWN0aW9uID0gV29ya2JlbmNoTGlzdE11bHRpU2VsZWN0aW9uLmJpbmRUbyhfdGhpczYuY29udGV4dEtleVNlcnZpY2UpOwogICAgX3RoaXM2Lmhvcml6b250YWxTY3JvbGxpbmcgPSBvcHRpb25zLmhvcml6b250YWxTY3JvbGxpbmc7CiAgICBfdGhpczYuX3VzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllciA9IHVzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllcihjb25maWd1cmF0aW9uU2VydmljZSk7CiAgICBfdGhpczYuZGlzcG9zYWJsZXMuYWRkKF90aGlzNi5jb250ZXh0S2V5U2VydmljZSk7CiAgICBfdGhpczYuZGlzcG9zYWJsZXMuYWRkKGxpc3RTZXJ2aWNlLnJlZ2lzdGVyKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXM2KSkpOwogICAgaWYgKG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMpIHsKICAgICAgX3RoaXM2LnVwZGF0ZVN0eWxlcyhvcHRpb25zLm92ZXJyaWRlU3R5bGVzKTsKICAgIH0KICAgIF90aGlzNi5kaXNwb3NhYmxlcy5hZGQoX3RoaXM2Lm9uRGlkQ2hhbmdlU2VsZWN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNlbGVjdGlvbiA9IF90aGlzNi5nZXRTZWxlY3Rpb24oKTsKICAgICAgdmFyIGZvY3VzID0gX3RoaXM2LmdldEZvY3VzKCk7CiAgICAgIF90aGlzNi5jb250ZXh0S2V5U2VydmljZS5idWZmZXJDaGFuZ2VFdmVudHMoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNi5saXN0SGFzU2VsZWN0aW9uT3JGb2N1cy5zZXQoc2VsZWN0aW9uLmxlbmd0aCA+IDAgfHwgZm9jdXMubGVuZ3RoID4gMCk7CiAgICAgICAgX3RoaXM2Lmxpc3RNdWx0aVNlbGVjdGlvbi5zZXQoc2VsZWN0aW9uLmxlbmd0aCA+IDEpOwogICAgICAgIF90aGlzNi5saXN0RG91YmxlU2VsZWN0aW9uLnNldChzZWxlY3Rpb24ubGVuZ3RoID09PSAyKTsKICAgICAgfSk7CiAgICB9KSk7CiAgICBfdGhpczYuZGlzcG9zYWJsZXMuYWRkKF90aGlzNi5vbkRpZENoYW5nZUZvY3VzKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNlbGVjdGlvbiA9IF90aGlzNi5nZXRTZWxlY3Rpb24oKTsKICAgICAgdmFyIGZvY3VzID0gX3RoaXM2LmdldEZvY3VzKCk7CiAgICAgIF90aGlzNi5saXN0SGFzU2VsZWN0aW9uT3JGb2N1cy5zZXQoc2VsZWN0aW9uLmxlbmd0aCA+IDAgfHwgZm9jdXMubGVuZ3RoID4gMCk7CiAgICB9KSk7CiAgICBfdGhpczYuZGlzcG9zYWJsZXMuYWRkKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLm9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbihmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5hZmZlY3RzQ29uZmlndXJhdGlvbihtdWx0aVNlbGVjdE1vZGlmaWVyU2V0dGluZ0tleSkpIHsKICAgICAgICBfdGhpczYuX3VzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllciA9IHVzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllcihjb25maWd1cmF0aW9uU2VydmljZSk7CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7fTsKICAgICAgaWYgKGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24oaG9yaXpvbnRhbFNjcm9sbGluZ0tleSkgJiYgX3RoaXM2Lmhvcml6b250YWxTY3JvbGxpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHZhciBfaG9yaXpvbnRhbFNjcm9sbGluZzMgPSBCb29sZWFuKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGhvcml6b250YWxTY3JvbGxpbmdLZXkpKTsKICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgewogICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGluZzogX2hvcml6b250YWxTY3JvbGxpbmczCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24obGlzdFNtb290aFNjcm9sbGluZykpIHsKICAgICAgICB2YXIgc21vb3RoU2Nyb2xsaW5nID0gQm9vbGVhbihjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShsaXN0U21vb3RoU2Nyb2xsaW5nKSk7CiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsKICAgICAgICAgIHNtb290aFNjcm9sbGluZzogc21vb3RoU2Nyb2xsaW5nCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24obW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5S2V5KSkgewogICAgICAgIHZhciBtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHkgPSBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHlLZXkpOwogICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7CiAgICAgICAgICBtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHk6IG1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKGZhc3RTY3JvbGxTZW5zaXRpdml0eUtleSkpIHsKICAgICAgICB2YXIgZmFzdFNjcm9sbFNlbnNpdGl2aXR5ID0gY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUoZmFzdFNjcm9sbFNlbnNpdGl2aXR5S2V5KTsKICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgewogICAgICAgICAgZmFzdFNjcm9sbFNlbnNpdGl2aXR5OiBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHkKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoT2JqZWN0LmtleXMob3B0aW9ucykubGVuZ3RoID4gMCkgewogICAgICAgIF90aGlzNi51cGRhdGVPcHRpb25zKG9wdGlvbnMpOwogICAgICB9CiAgICB9KSk7CiAgICBfdGhpczYubmF2aWdhdG9yID0gbmV3IFRhYmxlUmVzb3VyY2VOYXZpZ2F0b3IoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczYpLCBPYmplY3QuYXNzaWduKHsKICAgICAgY29uZmlndXJhdGlvblNlcnZpY2U6IGNvbmZpZ3VyYXRpb25TZXJ2aWNlCiAgICB9LCBvcHRpb25zKSk7CiAgICBfdGhpczYuZGlzcG9zYWJsZXMuYWRkKF90aGlzNi5uYXZpZ2F0b3IpOwogICAgcmV0dXJuIF90aGlzNjsKICB9CiAgX2NyZWF0ZUNsYXNzKFdvcmtiZW5jaFRhYmxlLCBbewogICAga2V5OiAidXBkYXRlT3B0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFdvcmtiZW5jaFRhYmxlLnByb3RvdHlwZSksICJ1cGRhdGVPcHRpb25zIiwgdGhpcykuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgICAgaWYgKG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMpIHsKICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcyhvcHRpb25zLm92ZXJyaWRlU3R5bGVzKTsKICAgICAgfQogICAgICBpZiAob3B0aW9ucy5tdWx0aXBsZVNlbGVjdGlvblN1cHBvcnQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMubGlzdFN1cHBvcnRzTXVsdGlTZWxlY3Quc2V0KCEhb3B0aW9ucy5tdWx0aXBsZVNlbGVjdGlvblN1cHBvcnQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlU3R5bGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTdHlsZXMoc3R5bGVzKSB7CiAgICAgIHZhciBfYTsKICAgICAgKF9hID0gdGhpcy5fc3R5bGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlzcG9zZSgpOwogICAgICB0aGlzLl9zdHlsZXIgPSBhdHRhY2hMaXN0U3R5bGVyKHRoaXMsIHRoaXMudGhlbWVTZXJ2aWNlLCBzdHlsZXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHZhciBfYTsKICAgICAgKF9hID0gdGhpcy5fc3R5bGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlzcG9zZSgpOwogICAgICB0aGlzLmRpc3Bvc2FibGVzLmRpc3Bvc2UoKTsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoV29ya2JlbmNoVGFibGUucHJvdG90eXBlKSwgImRpc3Bvc2UiLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gV29ya2JlbmNoVGFibGU7Cn0oVGFibGUpOwpXb3JrYmVuY2hUYWJsZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oNiwgSUNvbnRleHRLZXlTZXJ2aWNlKSwgX19wYXJhbSg3LCBJTGlzdFNlcnZpY2UpLCBfX3BhcmFtKDgsIElUaGVtZVNlcnZpY2UpLCBfX3BhcmFtKDksIElDb25maWd1cmF0aW9uU2VydmljZSksIF9fcGFyYW0oMTAsIElJbnN0YW50aWF0aW9uU2VydmljZSldLCBXb3JrYmVuY2hUYWJsZSk7CmV4cG9ydCB7IFdvcmtiZW5jaFRhYmxlIH07CnZhciBSZXNvdXJjZU5hdmlnYXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Rpc3Bvc2FibGUyKSB7CiAgX2luaGVyaXRzKFJlc291cmNlTmF2aWdhdG9yLCBfRGlzcG9zYWJsZTIpOwogIHZhciBfc3VwZXI1ID0gX2NyZWF0ZVN1cGVyKFJlc291cmNlTmF2aWdhdG9yKTsKICBmdW5jdGlvbiBSZXNvdXJjZU5hdmlnYXRvcih3aWRnZXQsIG9wdGlvbnMpIHsKICAgIHZhciBfdGhpczc7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzb3VyY2VOYXZpZ2F0b3IpOwogICAgdmFyIF9hOwogICAgX3RoaXM3ID0gX3N1cGVyNS5jYWxsKHRoaXMpOwogICAgX3RoaXM3LndpZGdldCA9IHdpZGdldDsKICAgIF90aGlzNy5fb25EaWRPcGVuID0gX3RoaXM3Ll9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzNy5vbkRpZE9wZW4gPSBfdGhpczcuX29uRGlkT3Blbi5ldmVudDsKICAgIF90aGlzNy5fcmVnaXN0ZXIoRXZlbnQuZmlsdGVyKF90aGlzNy53aWRnZXQub25EaWRDaGFuZ2VTZWxlY3Rpb24sIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmJyb3dzZXJFdmVudCBpbnN0YW5jZW9mIEtleWJvYXJkRXZlbnQ7CiAgICB9KShmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gX3RoaXM3Lm9uU2VsZWN0aW9uRnJvbUtleWJvYXJkKGUpOwogICAgfSkpOwogICAgX3RoaXM3Ll9yZWdpc3RlcihfdGhpczcud2lkZ2V0Lm9uUG9pbnRlcihmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gX3RoaXM3Lm9uUG9pbnRlcihlLmVsZW1lbnQsIGUuYnJvd3NlckV2ZW50KTsKICAgIH0pKTsKICAgIF90aGlzNy5fcmVnaXN0ZXIoX3RoaXM3LndpZGdldC5vbk1vdXNlRGJsQ2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIF90aGlzNy5vbk1vdXNlRGJsQ2xpY2soZS5lbGVtZW50LCBlLmJyb3dzZXJFdmVudCk7CiAgICB9KSk7CiAgICBpZiAodHlwZW9mIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3Blbk9uU2luZ2xlQ2xpY2spICE9PSAnYm9vbGVhbicgJiYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jb25maWd1cmF0aW9uU2VydmljZSkpIHsKICAgICAgX3RoaXM3Lm9wZW5PblNpbmdsZUNsaWNrID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShvcGVuTW9kZVNldHRpbmdLZXkpKSAhPT0gJ2RvdWJsZUNsaWNrJzsKICAgICAgX3RoaXM3Ll9yZWdpc3RlcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY29uZmlndXJhdGlvblNlcnZpY2Uub25EaWRDaGFuZ2VDb25maWd1cmF0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczcub3Blbk9uU2luZ2xlQ2xpY2sgPSAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKG9wZW5Nb2RlU2V0dGluZ0tleSkpICE9PSAnZG91YmxlQ2xpY2snOwogICAgICB9KSk7CiAgICB9IGVsc2UgewogICAgICBfdGhpczcub3Blbk9uU2luZ2xlQ2xpY2sgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3Blbk9uU2luZ2xlQ2xpY2spICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRydWU7CiAgICB9CiAgICByZXR1cm4gX3RoaXM3OwogIH0KICBfY3JlYXRlQ2xhc3MoUmVzb3VyY2VOYXZpZ2F0b3IsIFt7CiAgICBrZXk6ICJvblNlbGVjdGlvbkZyb21LZXlib2FyZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TZWxlY3Rpb25Gcm9tS2V5Ym9hcmQoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmVsZW1lbnRzLmxlbmd0aCAhPT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgc2VsZWN0aW9uS2V5Ym9hcmRFdmVudCA9IGV2ZW50LmJyb3dzZXJFdmVudDsKICAgICAgdmFyIHByZXNlcnZlRm9jdXMgPSB0eXBlb2Ygc2VsZWN0aW9uS2V5Ym9hcmRFdmVudC5wcmVzZXJ2ZUZvY3VzID09PSAnYm9vbGVhbicgPyBzZWxlY3Rpb25LZXlib2FyZEV2ZW50LnByZXNlcnZlRm9jdXMgOiB0cnVlOwogICAgICB2YXIgcGlubmVkID0gdHlwZW9mIHNlbGVjdGlvbktleWJvYXJkRXZlbnQucGlubmVkID09PSAnYm9vbGVhbicgPyBzZWxlY3Rpb25LZXlib2FyZEV2ZW50LnBpbm5lZCA6ICFwcmVzZXJ2ZUZvY3VzOwogICAgICB2YXIgc2lkZUJ5U2lkZSA9IGZhbHNlOwogICAgICB0aGlzLl9vcGVuKHRoaXMuZ2V0U2VsZWN0ZWRFbGVtZW50KCksIHByZXNlcnZlRm9jdXMsIHBpbm5lZCwgc2lkZUJ5U2lkZSwgZXZlbnQuYnJvd3NlckV2ZW50KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvblBvaW50ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUG9pbnRlcihlbGVtZW50LCBicm93c2VyRXZlbnQpIHsKICAgICAgaWYgKCF0aGlzLm9wZW5PblNpbmdsZUNsaWNrKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpc0RvdWJsZUNsaWNrID0gYnJvd3NlckV2ZW50LmRldGFpbCA9PT0gMjsKICAgICAgaWYgKGlzRG91YmxlQ2xpY2spIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGlzTWlkZGxlQ2xpY2sgPSBicm93c2VyRXZlbnQuYnV0dG9uID09PSAxOwogICAgICB2YXIgcHJlc2VydmVGb2N1cyA9IHRydWU7CiAgICAgIHZhciBwaW5uZWQgPSBpc01pZGRsZUNsaWNrOwogICAgICB2YXIgc2lkZUJ5U2lkZSA9IGJyb3dzZXJFdmVudC5jdHJsS2V5IHx8IGJyb3dzZXJFdmVudC5tZXRhS2V5IHx8IGJyb3dzZXJFdmVudC5hbHRLZXk7CiAgICAgIHRoaXMuX29wZW4oZWxlbWVudCwgcHJlc2VydmVGb2N1cywgcGlubmVkLCBzaWRlQnlTaWRlLCBicm93c2VyRXZlbnQpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uTW91c2VEYmxDbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Nb3VzZURibENsaWNrKGVsZW1lbnQsIGJyb3dzZXJFdmVudCkgewogICAgICBpZiAoIWJyb3dzZXJFdmVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyBjb3BpZWQgZnJvbSBBYnN0cmFjdFRyZWUKICAgICAgdmFyIHRhcmdldCA9IGJyb3dzZXJFdmVudC50YXJnZXQ7CiAgICAgIHZhciBvblR3aXN0aWUgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb25hY28tdGwtdHdpc3RpZScpIHx8IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vbmFjby1pY29uLWxhYmVsJykgJiYgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZm9sZGVyLWljb24nKSAmJiBicm93c2VyRXZlbnQub2Zmc2V0WCA8IDE2OwogICAgICBpZiAob25Ud2lzdGllKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBwcmVzZXJ2ZUZvY3VzID0gZmFsc2U7CiAgICAgIHZhciBwaW5uZWQgPSB0cnVlOwogICAgICB2YXIgc2lkZUJ5U2lkZSA9IGJyb3dzZXJFdmVudC5jdHJsS2V5IHx8IGJyb3dzZXJFdmVudC5tZXRhS2V5IHx8IGJyb3dzZXJFdmVudC5hbHRLZXk7CiAgICAgIHRoaXMuX29wZW4oZWxlbWVudCwgcHJlc2VydmVGb2N1cywgcGlubmVkLCBzaWRlQnlTaWRlLCBicm93c2VyRXZlbnQpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9vcGVuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfb3BlbihlbGVtZW50LCBwcmVzZXJ2ZUZvY3VzLCBwaW5uZWQsIHNpZGVCeVNpZGUsIGJyb3dzZXJFdmVudCkgewogICAgICBpZiAoIWVsZW1lbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fb25EaWRPcGVuLmZpcmUoewogICAgICAgIGVkaXRvck9wdGlvbnM6IHsKICAgICAgICAgIHByZXNlcnZlRm9jdXM6IHByZXNlcnZlRm9jdXMsCiAgICAgICAgICBwaW5uZWQ6IHBpbm5lZCwKICAgICAgICAgIHJldmVhbElmVmlzaWJsZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgc2lkZUJ5U2lkZTogc2lkZUJ5U2lkZSwKICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgIGJyb3dzZXJFdmVudDogYnJvd3NlckV2ZW50CiAgICAgIH0pOwogICAgfQogIH1dKTsKICByZXR1cm4gUmVzb3VyY2VOYXZpZ2F0b3I7Cn0oRGlzcG9zYWJsZSk7CnZhciBMaXN0UmVzb3VyY2VOYXZpZ2F0b3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZXNvdXJjZU5hdmlnYXRvcikgewogIF9pbmhlcml0cyhMaXN0UmVzb3VyY2VOYXZpZ2F0b3IsIF9SZXNvdXJjZU5hdmlnYXRvcik7CiAgdmFyIF9zdXBlcjYgPSBfY3JlYXRlU3VwZXIoTGlzdFJlc291cmNlTmF2aWdhdG9yKTsKICBmdW5jdGlvbiBMaXN0UmVzb3VyY2VOYXZpZ2F0b3Iod2lkZ2V0LCBvcHRpb25zKSB7CiAgICB2YXIgX3RoaXM4OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpc3RSZXNvdXJjZU5hdmlnYXRvcik7CiAgICBfdGhpczggPSBfc3VwZXI2LmNhbGwodGhpcywgd2lkZ2V0LCBvcHRpb25zKTsKICAgIF90aGlzOC53aWRnZXQgPSB3aWRnZXQ7CiAgICByZXR1cm4gX3RoaXM4OwogIH0KICBfY3JlYXRlQ2xhc3MoTGlzdFJlc291cmNlTmF2aWdhdG9yLCBbewogICAga2V5OiAiZ2V0U2VsZWN0ZWRFbGVtZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZWxlY3RlZEVsZW1lbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLndpZGdldC5nZXRTZWxlY3RlZEVsZW1lbnRzKClbMF07CiAgICB9CiAgfV0pOwogIHJldHVybiBMaXN0UmVzb3VyY2VOYXZpZ2F0b3I7Cn0oUmVzb3VyY2VOYXZpZ2F0b3IpOwp2YXIgVGFibGVSZXNvdXJjZU5hdmlnYXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Jlc291cmNlTmF2aWdhdG9yMikgewogIF9pbmhlcml0cyhUYWJsZVJlc291cmNlTmF2aWdhdG9yLCBfUmVzb3VyY2VOYXZpZ2F0b3IyKTsKICB2YXIgX3N1cGVyNyA9IF9jcmVhdGVTdXBlcihUYWJsZVJlc291cmNlTmF2aWdhdG9yKTsKICBmdW5jdGlvbiBUYWJsZVJlc291cmNlTmF2aWdhdG9yKHdpZGdldCwgb3B0aW9ucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRhYmxlUmVzb3VyY2VOYXZpZ2F0b3IpOwogICAgcmV0dXJuIF9zdXBlcjcuY2FsbCh0aGlzLCB3aWRnZXQsIG9wdGlvbnMpOwogIH0KICBfY3JlYXRlQ2xhc3MoVGFibGVSZXNvdXJjZU5hdmlnYXRvciwgW3sKICAgIGtleTogImdldFNlbGVjdGVkRWxlbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VsZWN0ZWRFbGVtZW50KCkgewogICAgICByZXR1cm4gdGhpcy53aWRnZXQuZ2V0U2VsZWN0ZWRFbGVtZW50cygpWzBdOwogICAgfQogIH1dKTsKICByZXR1cm4gVGFibGVSZXNvdXJjZU5hdmlnYXRvcjsKfShSZXNvdXJjZU5hdmlnYXRvcik7CnZhciBUcmVlUmVzb3VyY2VOYXZpZ2F0b3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZXNvdXJjZU5hdmlnYXRvcjMpIHsKICBfaW5oZXJpdHMoVHJlZVJlc291cmNlTmF2aWdhdG9yLCBfUmVzb3VyY2VOYXZpZ2F0b3IzKTsKICB2YXIgX3N1cGVyOCA9IF9jcmVhdGVTdXBlcihUcmVlUmVzb3VyY2VOYXZpZ2F0b3IpOwogIGZ1bmN0aW9uIFRyZWVSZXNvdXJjZU5hdmlnYXRvcih3aWRnZXQsIG9wdGlvbnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUcmVlUmVzb3VyY2VOYXZpZ2F0b3IpOwogICAgcmV0dXJuIF9zdXBlcjguY2FsbCh0aGlzLCB3aWRnZXQsIG9wdGlvbnMpOwogIH0KICBfY3JlYXRlQ2xhc3MoVHJlZVJlc291cmNlTmF2aWdhdG9yLCBbewogICAga2V5OiAiZ2V0U2VsZWN0ZWRFbGVtZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZWxlY3RlZEVsZW1lbnQoKSB7CiAgICAgIHZhciBfYTsKICAgICAgcmV0dXJuIChfYSA9IHRoaXMud2lkZ2V0LmdldFNlbGVjdGlvbigpWzBdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7CiAgICB9CiAgfV0pOwogIHJldHVybiBUcmVlUmVzb3VyY2VOYXZpZ2F0b3I7Cn0oUmVzb3VyY2VOYXZpZ2F0b3IpOwpmdW5jdGlvbiBjcmVhdGVLZXlib2FyZE5hdmlnYXRpb25FdmVudEZpbHRlcihrZXliaW5kaW5nU2VydmljZSkgewogIHZhciBpbkNob3JkID0gZmFsc2U7CiAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgewogICAgaWYgKGV2ZW50LnRvS2V5YmluZGluZygpLmlzTW9kaWZpZXJLZXkoKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoaW5DaG9yZCkgewogICAgICBpbkNob3JkID0gZmFsc2U7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhciByZXN1bHQgPSBrZXliaW5kaW5nU2VydmljZS5zb2Z0RGlzcGF0Y2goZXZlbnQsIGV2ZW50LnRhcmdldCk7CiAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LmVudGVyQ2hvcmQpIHsKICAgICAgaW5DaG9yZCA9IHRydWU7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGluQ2hvcmQgPSBmYWxzZTsKICAgIHJldHVybiAhcmVzdWx0OwogIH07Cn0KdmFyIFdvcmtiZW5jaE9iamVjdFRyZWUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9PYmplY3RUcmVlKSB7CiAgX2luaGVyaXRzKFdvcmtiZW5jaE9iamVjdFRyZWUsIF9PYmplY3RUcmVlKTsKICB2YXIgX3N1cGVyOSA9IF9jcmVhdGVTdXBlcihXb3JrYmVuY2hPYmplY3RUcmVlKTsKICBmdW5jdGlvbiBXb3JrYmVuY2hPYmplY3RUcmVlKHVzZXIsIGNvbnRhaW5lciwgZGVsZWdhdGUsIHJlbmRlcmVycywgb3B0aW9ucywgaW5zdGFudGlhdGlvblNlcnZpY2UsIGNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZSwgdGhlbWVTZXJ2aWNlLCBjb25maWd1cmF0aW9uU2VydmljZSkgewogICAgdmFyIF90aGlzOTsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXb3JrYmVuY2hPYmplY3RUcmVlKTsKICAgIHZhciBfaW5zdGFudGlhdGlvblNlcnZpY2U3ID0gaW5zdGFudGlhdGlvblNlcnZpY2UuaW52b2tlRnVuY3Rpb24od29ya2JlbmNoVHJlZURhdGFQcmVhbWJsZSwgb3B0aW9ucyksCiAgICAgIHRyZWVPcHRpb25zID0gX2luc3RhbnRpYXRpb25TZXJ2aWNlNy5vcHRpb25zLAogICAgICBnZXRUeXBlTmF2aWdhdGlvbk1vZGUgPSBfaW5zdGFudGlhdGlvblNlcnZpY2U3LmdldFR5cGVOYXZpZ2F0aW9uTW9kZSwKICAgICAgZGlzcG9zYWJsZSA9IF9pbnN0YW50aWF0aW9uU2VydmljZTcuZGlzcG9zYWJsZTsKICAgIF90aGlzOSA9IF9zdXBlcjkuY2FsbCh0aGlzLCB1c2VyLCBjb250YWluZXIsIGRlbGVnYXRlLCByZW5kZXJlcnMsIHRyZWVPcHRpb25zKTsKICAgIF90aGlzOS5kaXNwb3NhYmxlcy5hZGQoZGlzcG9zYWJsZSk7CiAgICBfdGhpczkuaW50ZXJuYWxzID0gbmV3IFdvcmtiZW5jaFRyZWVJbnRlcm5hbHMoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpczkpLCBvcHRpb25zLCBnZXRUeXBlTmF2aWdhdGlvbk1vZGUsIG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMsIGNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZSwgdGhlbWVTZXJ2aWNlLCBjb25maWd1cmF0aW9uU2VydmljZSk7CiAgICBfdGhpczkuZGlzcG9zYWJsZXMuYWRkKF90aGlzOS5pbnRlcm5hbHMpOwogICAgcmV0dXJuIF90aGlzOTsKICB9CiAgX2NyZWF0ZUNsYXNzKFdvcmtiZW5jaE9iamVjdFRyZWUsIFt7CiAgICBrZXk6ICJ1cGRhdGVPcHRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoV29ya2JlbmNoT2JqZWN0VHJlZS5wcm90b3R5cGUpLCAidXBkYXRlT3B0aW9ucyIsIHRoaXMpLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgICAgIHRoaXMuaW50ZXJuYWxzLnVwZGF0ZU9wdGlvbnMob3B0aW9ucyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBXb3JrYmVuY2hPYmplY3RUcmVlOwp9KE9iamVjdFRyZWUpOwpXb3JrYmVuY2hPYmplY3RUcmVlID0gX19kZWNvcmF0ZShbX19wYXJhbSg1LCBJSW5zdGFudGlhdGlvblNlcnZpY2UpLCBfX3BhcmFtKDYsIElDb250ZXh0S2V5U2VydmljZSksIF9fcGFyYW0oNywgSUxpc3RTZXJ2aWNlKSwgX19wYXJhbSg4LCBJVGhlbWVTZXJ2aWNlKSwgX19wYXJhbSg5LCBJQ29uZmlndXJhdGlvblNlcnZpY2UpXSwgV29ya2JlbmNoT2JqZWN0VHJlZSk7CmV4cG9ydCB7IFdvcmtiZW5jaE9iamVjdFRyZWUgfTsKdmFyIFdvcmtiZW5jaENvbXByZXNzaWJsZU9iamVjdFRyZWUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wcmVzc2libGVPYmplY3RUcikgewogIF9pbmhlcml0cyhXb3JrYmVuY2hDb21wcmVzc2libGVPYmplY3RUcmVlLCBfQ29tcHJlc3NpYmxlT2JqZWN0VHIpOwogIHZhciBfc3VwZXIxMCA9IF9jcmVhdGVTdXBlcihXb3JrYmVuY2hDb21wcmVzc2libGVPYmplY3RUcmVlKTsKICBmdW5jdGlvbiBXb3JrYmVuY2hDb21wcmVzc2libGVPYmplY3RUcmVlKHVzZXIsIGNvbnRhaW5lciwgZGVsZWdhdGUsIHJlbmRlcmVycywgb3B0aW9ucywgaW5zdGFudGlhdGlvblNlcnZpY2UsIGNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZSwgdGhlbWVTZXJ2aWNlLCBjb25maWd1cmF0aW9uU2VydmljZSkgewogICAgdmFyIF90aGlzMTA7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV29ya2JlbmNoQ29tcHJlc3NpYmxlT2JqZWN0VHJlZSk7CiAgICB2YXIgX2luc3RhbnRpYXRpb25TZXJ2aWNlOCA9IGluc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uKHdvcmtiZW5jaFRyZWVEYXRhUHJlYW1ibGUsIG9wdGlvbnMpLAogICAgICB0cmVlT3B0aW9ucyA9IF9pbnN0YW50aWF0aW9uU2VydmljZTgub3B0aW9ucywKICAgICAgZ2V0VHlwZU5hdmlnYXRpb25Nb2RlID0gX2luc3RhbnRpYXRpb25TZXJ2aWNlOC5nZXRUeXBlTmF2aWdhdGlvbk1vZGUsCiAgICAgIGRpc3Bvc2FibGUgPSBfaW5zdGFudGlhdGlvblNlcnZpY2U4LmRpc3Bvc2FibGU7CiAgICBfdGhpczEwID0gX3N1cGVyMTAuY2FsbCh0aGlzLCB1c2VyLCBjb250YWluZXIsIGRlbGVnYXRlLCByZW5kZXJlcnMsIHRyZWVPcHRpb25zKTsKICAgIF90aGlzMTAuZGlzcG9zYWJsZXMuYWRkKGRpc3Bvc2FibGUpOwogICAgX3RoaXMxMC5pbnRlcm5hbHMgPSBuZXcgV29ya2JlbmNoVHJlZUludGVybmFscyhfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMTApLCBvcHRpb25zLCBnZXRUeXBlTmF2aWdhdGlvbk1vZGUsIG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMsIGNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZSwgdGhlbWVTZXJ2aWNlLCBjb25maWd1cmF0aW9uU2VydmljZSk7CiAgICBfdGhpczEwLmRpc3Bvc2FibGVzLmFkZChfdGhpczEwLmludGVybmFscyk7CiAgICByZXR1cm4gX3RoaXMxMDsKICB9CiAgX2NyZWF0ZUNsYXNzKFdvcmtiZW5jaENvbXByZXNzaWJsZU9iamVjdFRyZWUsIFt7CiAgICBrZXk6ICJ1cGRhdGVPcHRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKCkgewogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFdvcmtiZW5jaENvbXByZXNzaWJsZU9iamVjdFRyZWUucHJvdG90eXBlKSwgInVwZGF0ZU9wdGlvbnMiLCB0aGlzKS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgICBpZiAob3B0aW9ucy5vdmVycmlkZVN0eWxlcykgewogICAgICAgIHRoaXMuaW50ZXJuYWxzLnVwZGF0ZVN0eWxlT3ZlcnJpZGVzKG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMpOwogICAgICB9CiAgICAgIHRoaXMuaW50ZXJuYWxzLnVwZGF0ZU9wdGlvbnMob3B0aW9ucyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBXb3JrYmVuY2hDb21wcmVzc2libGVPYmplY3RUcmVlOwp9KENvbXByZXNzaWJsZU9iamVjdFRyZWUpOwpXb3JrYmVuY2hDb21wcmVzc2libGVPYmplY3RUcmVlID0gX19kZWNvcmF0ZShbX19wYXJhbSg1LCBJSW5zdGFudGlhdGlvblNlcnZpY2UpLCBfX3BhcmFtKDYsIElDb250ZXh0S2V5U2VydmljZSksIF9fcGFyYW0oNywgSUxpc3RTZXJ2aWNlKSwgX19wYXJhbSg4LCBJVGhlbWVTZXJ2aWNlKSwgX19wYXJhbSg5LCBJQ29uZmlndXJhdGlvblNlcnZpY2UpXSwgV29ya2JlbmNoQ29tcHJlc3NpYmxlT2JqZWN0VHJlZSk7CmV4cG9ydCB7IFdvcmtiZW5jaENvbXByZXNzaWJsZU9iamVjdFRyZWUgfTsKdmFyIFdvcmtiZW5jaERhdGFUcmVlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRGF0YVRyZWUpIHsKICBfaW5oZXJpdHMoV29ya2JlbmNoRGF0YVRyZWUsIF9EYXRhVHJlZSk7CiAgdmFyIF9zdXBlcjExID0gX2NyZWF0ZVN1cGVyKFdvcmtiZW5jaERhdGFUcmVlKTsKICBmdW5jdGlvbiBXb3JrYmVuY2hEYXRhVHJlZSh1c2VyLCBjb250YWluZXIsIGRlbGVnYXRlLCByZW5kZXJlcnMsIGRhdGFTb3VyY2UsIG9wdGlvbnMsIGluc3RhbnRpYXRpb25TZXJ2aWNlLCBjb250ZXh0S2V5U2VydmljZSwgbGlzdFNlcnZpY2UsIHRoZW1lU2VydmljZSwgY29uZmlndXJhdGlvblNlcnZpY2UpIHsKICAgIHZhciBfdGhpczExOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdvcmtiZW5jaERhdGFUcmVlKTsKICAgIHZhciBfaW5zdGFudGlhdGlvblNlcnZpY2U5ID0gaW5zdGFudGlhdGlvblNlcnZpY2UuaW52b2tlRnVuY3Rpb24od29ya2JlbmNoVHJlZURhdGFQcmVhbWJsZSwgb3B0aW9ucyksCiAgICAgIHRyZWVPcHRpb25zID0gX2luc3RhbnRpYXRpb25TZXJ2aWNlOS5vcHRpb25zLAogICAgICBnZXRUeXBlTmF2aWdhdGlvbk1vZGUgPSBfaW5zdGFudGlhdGlvblNlcnZpY2U5LmdldFR5cGVOYXZpZ2F0aW9uTW9kZSwKICAgICAgZGlzcG9zYWJsZSA9IF9pbnN0YW50aWF0aW9uU2VydmljZTkuZGlzcG9zYWJsZTsKICAgIF90aGlzMTEgPSBfc3VwZXIxMS5jYWxsKHRoaXMsIHVzZXIsIGNvbnRhaW5lciwgZGVsZWdhdGUsIHJlbmRlcmVycywgZGF0YVNvdXJjZSwgdHJlZU9wdGlvbnMpOwogICAgX3RoaXMxMS5kaXNwb3NhYmxlcy5hZGQoZGlzcG9zYWJsZSk7CiAgICBfdGhpczExLmludGVybmFscyA9IG5ldyBXb3JrYmVuY2hUcmVlSW50ZXJuYWxzKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMxMSksIG9wdGlvbnMsIGdldFR5cGVOYXZpZ2F0aW9uTW9kZSwgb3B0aW9ucy5vdmVycmlkZVN0eWxlcywgY29udGV4dEtleVNlcnZpY2UsIGxpc3RTZXJ2aWNlLCB0aGVtZVNlcnZpY2UsIGNvbmZpZ3VyYXRpb25TZXJ2aWNlKTsKICAgIF90aGlzMTEuZGlzcG9zYWJsZXMuYWRkKF90aGlzMTEuaW50ZXJuYWxzKTsKICAgIHJldHVybiBfdGhpczExOwogIH0KICBfY3JlYXRlQ2xhc3MoV29ya2JlbmNoRGF0YVRyZWUsIFt7CiAgICBrZXk6ICJ1cGRhdGVPcHRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKCkgewogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFdvcmtiZW5jaERhdGFUcmVlLnByb3RvdHlwZSksICJ1cGRhdGVPcHRpb25zIiwgdGhpcykuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgICAgaWYgKG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMpIHsKICAgICAgICB0aGlzLmludGVybmFscy51cGRhdGVTdHlsZU92ZXJyaWRlcyhvcHRpb25zLm92ZXJyaWRlU3R5bGVzKTsKICAgICAgfQogICAgICB0aGlzLmludGVybmFscy51cGRhdGVPcHRpb25zKG9wdGlvbnMpOwogICAgfQogIH1dKTsKICByZXR1cm4gV29ya2JlbmNoRGF0YVRyZWU7Cn0oRGF0YVRyZWUpOwpXb3JrYmVuY2hEYXRhVHJlZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oNiwgSUluc3RhbnRpYXRpb25TZXJ2aWNlKSwgX19wYXJhbSg3LCBJQ29udGV4dEtleVNlcnZpY2UpLCBfX3BhcmFtKDgsIElMaXN0U2VydmljZSksIF9fcGFyYW0oOSwgSVRoZW1lU2VydmljZSksIF9fcGFyYW0oMTAsIElDb25maWd1cmF0aW9uU2VydmljZSldLCBXb3JrYmVuY2hEYXRhVHJlZSk7CmV4cG9ydCB7IFdvcmtiZW5jaERhdGFUcmVlIH07CnZhciBXb3JrYmVuY2hBc3luY0RhdGFUcmVlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQXN5bmNEYXRhVHJlZSkgewogIF9pbmhlcml0cyhXb3JrYmVuY2hBc3luY0RhdGFUcmVlLCBfQXN5bmNEYXRhVHJlZSk7CiAgdmFyIF9zdXBlcjEyID0gX2NyZWF0ZVN1cGVyKFdvcmtiZW5jaEFzeW5jRGF0YVRyZWUpOwogIGZ1bmN0aW9uIFdvcmtiZW5jaEFzeW5jRGF0YVRyZWUodXNlciwgY29udGFpbmVyLCBkZWxlZ2F0ZSwgcmVuZGVyZXJzLCBkYXRhU291cmNlLCBvcHRpb25zLCBpbnN0YW50aWF0aW9uU2VydmljZSwgY29udGV4dEtleVNlcnZpY2UsIGxpc3RTZXJ2aWNlLCB0aGVtZVNlcnZpY2UsIGNvbmZpZ3VyYXRpb25TZXJ2aWNlKSB7CiAgICB2YXIgX3RoaXMxMjsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXb3JrYmVuY2hBc3luY0RhdGFUcmVlKTsKICAgIHZhciBfaW5zdGFudGlhdGlvblNlcnZpY2UxMCA9IGluc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uKHdvcmtiZW5jaFRyZWVEYXRhUHJlYW1ibGUsIG9wdGlvbnMpLAogICAgICB0cmVlT3B0aW9ucyA9IF9pbnN0YW50aWF0aW9uU2VydmljZTEwLm9wdGlvbnMsCiAgICAgIGdldFR5cGVOYXZpZ2F0aW9uTW9kZSA9IF9pbnN0YW50aWF0aW9uU2VydmljZTEwLmdldFR5cGVOYXZpZ2F0aW9uTW9kZSwKICAgICAgZGlzcG9zYWJsZSA9IF9pbnN0YW50aWF0aW9uU2VydmljZTEwLmRpc3Bvc2FibGU7CiAgICBfdGhpczEyID0gX3N1cGVyMTIuY2FsbCh0aGlzLCB1c2VyLCBjb250YWluZXIsIGRlbGVnYXRlLCByZW5kZXJlcnMsIGRhdGFTb3VyY2UsIHRyZWVPcHRpb25zKTsKICAgIF90aGlzMTIuZGlzcG9zYWJsZXMuYWRkKGRpc3Bvc2FibGUpOwogICAgX3RoaXMxMi5pbnRlcm5hbHMgPSBuZXcgV29ya2JlbmNoVHJlZUludGVybmFscyhfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzMTIpLCBvcHRpb25zLCBnZXRUeXBlTmF2aWdhdGlvbk1vZGUsIG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMsIGNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZSwgdGhlbWVTZXJ2aWNlLCBjb25maWd1cmF0aW9uU2VydmljZSk7CiAgICBfdGhpczEyLmRpc3Bvc2FibGVzLmFkZChfdGhpczEyLmludGVybmFscyk7CiAgICByZXR1cm4gX3RoaXMxMjsKICB9CiAgX2NyZWF0ZUNsYXNzKFdvcmtiZW5jaEFzeW5jRGF0YVRyZWUsIFt7CiAgICBrZXk6ICJvbkRpZE9wZW4iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmludGVybmFscy5vbkRpZE9wZW47CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlT3B0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlT3B0aW9ucygpIHsKICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihXb3JrYmVuY2hBc3luY0RhdGFUcmVlLnByb3RvdHlwZSksICJ1cGRhdGVPcHRpb25zIiwgdGhpcykuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgICAgaWYgKG9wdGlvbnMub3ZlcnJpZGVTdHlsZXMpIHsKICAgICAgICB0aGlzLmludGVybmFscy51cGRhdGVTdHlsZU92ZXJyaWRlcyhvcHRpb25zLm92ZXJyaWRlU3R5bGVzKTsKICAgICAgfQogICAgICB0aGlzLmludGVybmFscy51cGRhdGVPcHRpb25zKG9wdGlvbnMpOwogICAgfQogIH1dKTsKICByZXR1cm4gV29ya2JlbmNoQXN5bmNEYXRhVHJlZTsKfShBc3luY0RhdGFUcmVlKTsKV29ya2JlbmNoQXN5bmNEYXRhVHJlZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oNiwgSUluc3RhbnRpYXRpb25TZXJ2aWNlKSwgX19wYXJhbSg3LCBJQ29udGV4dEtleVNlcnZpY2UpLCBfX3BhcmFtKDgsIElMaXN0U2VydmljZSksIF9fcGFyYW0oOSwgSVRoZW1lU2VydmljZSksIF9fcGFyYW0oMTAsIElDb25maWd1cmF0aW9uU2VydmljZSldLCBXb3JrYmVuY2hBc3luY0RhdGFUcmVlKTsKZXhwb3J0IHsgV29ya2JlbmNoQXN5bmNEYXRhVHJlZSB9Owp2YXIgV29ya2JlbmNoQ29tcHJlc3NpYmxlQXN5bmNEYXRhVHJlZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXByZXNzaWJsZUFzeW5jRGF0KSB7CiAgX2luaGVyaXRzKFdvcmtiZW5jaENvbXByZXNzaWJsZUFzeW5jRGF0YVRyZWUsIF9Db21wcmVzc2libGVBc3luY0RhdCk7CiAgdmFyIF9zdXBlcjEzID0gX2NyZWF0ZVN1cGVyKFdvcmtiZW5jaENvbXByZXNzaWJsZUFzeW5jRGF0YVRyZWUpOwogIGZ1bmN0aW9uIFdvcmtiZW5jaENvbXByZXNzaWJsZUFzeW5jRGF0YVRyZWUodXNlciwgY29udGFpbmVyLCB2aXJ0dWFsRGVsZWdhdGUsIGNvbXByZXNzaW9uRGVsZWdhdGUsIHJlbmRlcmVycywgZGF0YVNvdXJjZSwgb3B0aW9ucywgaW5zdGFudGlhdGlvblNlcnZpY2UsIGNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZSwgdGhlbWVTZXJ2aWNlLCBjb25maWd1cmF0aW9uU2VydmljZSkgewogICAgdmFyIF90aGlzMTM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV29ya2JlbmNoQ29tcHJlc3NpYmxlQXN5bmNEYXRhVHJlZSk7CiAgICB2YXIgX2luc3RhbnRpYXRpb25TZXJ2aWNlMTEgPSBpbnN0YW50aWF0aW9uU2VydmljZS5pbnZva2VGdW5jdGlvbih3b3JrYmVuY2hUcmVlRGF0YVByZWFtYmxlLCBvcHRpb25zKSwKICAgICAgdHJlZU9wdGlvbnMgPSBfaW5zdGFudGlhdGlvblNlcnZpY2UxMS5vcHRpb25zLAogICAgICBnZXRUeXBlTmF2aWdhdGlvbk1vZGUgPSBfaW5zdGFudGlhdGlvblNlcnZpY2UxMS5nZXRUeXBlTmF2aWdhdGlvbk1vZGUsCiAgICAgIGRpc3Bvc2FibGUgPSBfaW5zdGFudGlhdGlvblNlcnZpY2UxMS5kaXNwb3NhYmxlOwogICAgX3RoaXMxMyA9IF9zdXBlcjEzLmNhbGwodGhpcywgdXNlciwgY29udGFpbmVyLCB2aXJ0dWFsRGVsZWdhdGUsIGNvbXByZXNzaW9uRGVsZWdhdGUsIHJlbmRlcmVycywgZGF0YVNvdXJjZSwgdHJlZU9wdGlvbnMpOwogICAgX3RoaXMxMy5kaXNwb3NhYmxlcy5hZGQoZGlzcG9zYWJsZSk7CiAgICBfdGhpczEzLmludGVybmFscyA9IG5ldyBXb3JrYmVuY2hUcmVlSW50ZXJuYWxzKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMxMyksIG9wdGlvbnMsIGdldFR5cGVOYXZpZ2F0aW9uTW9kZSwgb3B0aW9ucy5vdmVycmlkZVN0eWxlcywgY29udGV4dEtleVNlcnZpY2UsIGxpc3RTZXJ2aWNlLCB0aGVtZVNlcnZpY2UsIGNvbmZpZ3VyYXRpb25TZXJ2aWNlKTsKICAgIF90aGlzMTMuZGlzcG9zYWJsZXMuYWRkKF90aGlzMTMuaW50ZXJuYWxzKTsKICAgIHJldHVybiBfdGhpczEzOwogIH0KICBfY3JlYXRlQ2xhc3MoV29ya2JlbmNoQ29tcHJlc3NpYmxlQXN5bmNEYXRhVHJlZSwgW3sKICAgIGtleTogInVwZGF0ZU9wdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMob3B0aW9ucykgewogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihXb3JrYmVuY2hDb21wcmVzc2libGVBc3luY0RhdGFUcmVlLnByb3RvdHlwZSksICJ1cGRhdGVPcHRpb25zIiwgdGhpcykuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgICAgdGhpcy5pbnRlcm5hbHMudXBkYXRlT3B0aW9ucyhvcHRpb25zKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFdvcmtiZW5jaENvbXByZXNzaWJsZUFzeW5jRGF0YVRyZWU7Cn0oQ29tcHJlc3NpYmxlQXN5bmNEYXRhVHJlZSk7CldvcmtiZW5jaENvbXByZXNzaWJsZUFzeW5jRGF0YVRyZWUgPSBfX2RlY29yYXRlKFtfX3BhcmFtKDcsIElJbnN0YW50aWF0aW9uU2VydmljZSksIF9fcGFyYW0oOCwgSUNvbnRleHRLZXlTZXJ2aWNlKSwgX19wYXJhbSg5LCBJTGlzdFNlcnZpY2UpLCBfX3BhcmFtKDEwLCBJVGhlbWVTZXJ2aWNlKSwgX19wYXJhbSgxMSwgSUNvbmZpZ3VyYXRpb25TZXJ2aWNlKV0sIFdvcmtiZW5jaENvbXByZXNzaWJsZUFzeW5jRGF0YVRyZWUpOwpleHBvcnQgeyBXb3JrYmVuY2hDb21wcmVzc2libGVBc3luY0RhdGFUcmVlIH07CmZ1bmN0aW9uIGdldERlZmF1bHRUcmVlRmluZE1vZGUoY29uZmlndXJhdGlvblNlcnZpY2UpIHsKICB2YXIgdmFsdWUgPSBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShkZWZhdWx0RmluZE1vZGVTZXR0aW5nS2V5KTsKICBpZiAodmFsdWUgPT09ICdoaWdobGlnaHQnKSB7CiAgICByZXR1cm4gVHJlZUZpbmRNb2RlLkhpZ2hsaWdodDsKICB9IGVsc2UgaWYgKHZhbHVlID09PSAnZmlsdGVyJykgewogICAgcmV0dXJuIFRyZWVGaW5kTW9kZS5GaWx0ZXI7CiAgfQogIHZhciBkZXByZWNhdGVkVmFsdWUgPSBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShrZXlib2FyZE5hdmlnYXRpb25TZXR0aW5nS2V5KTsKICBpZiAoZGVwcmVjYXRlZFZhbHVlID09PSAnc2ltcGxlJyB8fCBkZXByZWNhdGVkVmFsdWUgPT09ICdoaWdobGlnaHQnKSB7CiAgICByZXR1cm4gVHJlZUZpbmRNb2RlLkhpZ2hsaWdodDsKICB9IGVsc2UgaWYgKGRlcHJlY2F0ZWRWYWx1ZSA9PT0gJ2ZpbHRlcicpIHsKICAgIHJldHVybiBUcmVlRmluZE1vZGUuRmlsdGVyOwogIH0KICByZXR1cm4gdW5kZWZpbmVkOwp9CmZ1bmN0aW9uIHdvcmtiZW5jaFRyZWVEYXRhUHJlYW1ibGUoYWNjZXNzb3IsIG9wdGlvbnMpIHsKICB2YXIgX2E7CiAgdmFyIGNvbmZpZ3VyYXRpb25TZXJ2aWNlID0gYWNjZXNzb3IuZ2V0KElDb25maWd1cmF0aW9uU2VydmljZSk7CiAgdmFyIGNvbnRleHRWaWV3U2VydmljZSA9IGFjY2Vzc29yLmdldChJQ29udGV4dFZpZXdTZXJ2aWNlKTsKICB2YXIgY29udGV4dEtleVNlcnZpY2UgPSBhY2Nlc3Nvci5nZXQoSUNvbnRleHRLZXlTZXJ2aWNlKTsKICB2YXIgaW5zdGFudGlhdGlvblNlcnZpY2UgPSBhY2Nlc3Nvci5nZXQoSUluc3RhbnRpYXRpb25TZXJ2aWNlKTsKICB2YXIgZ2V0VHlwZU5hdmlnYXRpb25Nb2RlID0gZnVuY3Rpb24gZ2V0VHlwZU5hdmlnYXRpb25Nb2RlKCkgewogICAgLy8gZ2l2ZSBwcmlvcml0eSB0byB0aGUgY29udGV4dCBrZXkgdmFsdWUgdG8gc3BlY2lmeSBhIHZhbHVlCiAgICB2YXIgbW9kZVN0cmluZyA9IGNvbnRleHRLZXlTZXJ2aWNlLmdldENvbnRleHRLZXlWYWx1ZShXb3JrYmVuY2hMaXN0VHlwZU5hdmlnYXRpb25Nb2RlS2V5KTsKICAgIGlmIChtb2RlU3RyaW5nID09PSAnYXV0b21hdGljJykgewogICAgICByZXR1cm4gVHlwZU5hdmlnYXRpb25Nb2RlLkF1dG9tYXRpYzsKICAgIH0gZWxzZSBpZiAobW9kZVN0cmluZyA9PT0gJ3RyaWdnZXInKSB7CiAgICAgIHJldHVybiBUeXBlTmF2aWdhdGlvbk1vZGUuVHJpZ2dlcjsKICAgIH0KICAgIC8vIGFsc28gY2hlY2sgdGhlIGRlcHJlY2F0ZWQgY29udGV4dCBrZXkgdG8gc2V0IHRoZSBtb2RlIHRvICd0cmlnZ2VyJwogICAgdmFyIG1vZGVCb29sZWFuID0gY29udGV4dEtleVNlcnZpY2UuZ2V0Q29udGV4dEtleVZhbHVlKFdvcmtiZW5jaExpc3RBdXRvbWF0aWNLZXlib2FyZE5hdmlnYXRpb25MZWdhY3lLZXkpOwogICAgaWYgKG1vZGVCb29sZWFuID09PSBmYWxzZSkgewogICAgICByZXR1cm4gVHlwZU5hdmlnYXRpb25Nb2RlLlRyaWdnZXI7CiAgICB9CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH07CiAgdmFyIGhvcml6b250YWxTY3JvbGxpbmcgPSBvcHRpb25zLmhvcml6b250YWxTY3JvbGxpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGluZyA6IEJvb2xlYW4oY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUoaG9yaXpvbnRhbFNjcm9sbGluZ0tleSkpOwogIHZhciBfaW5zdGFudGlhdGlvblNlcnZpY2UxMiA9IGluc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uKHRvV29ya2JlbmNoTGlzdE9wdGlvbnMsIG9wdGlvbnMpLAogICAgX2luc3RhbnRpYXRpb25TZXJ2aWNlMTMgPSBfc2xpY2VkVG9BcnJheShfaW5zdGFudGlhdGlvblNlcnZpY2UxMiwgMiksCiAgICB3b3JrYmVuY2hMaXN0T3B0aW9ucyA9IF9pbnN0YW50aWF0aW9uU2VydmljZTEzWzBdLAogICAgZGlzcG9zYWJsZSA9IF9pbnN0YW50aWF0aW9uU2VydmljZTEzWzFdOwogIHZhciBhZGRpdGlvbmFsU2Nyb2xsSGVpZ2h0ID0gb3B0aW9ucy5hZGRpdGlvbmFsU2Nyb2xsSGVpZ2h0OwogIHJldHVybiB7CiAgICBnZXRUeXBlTmF2aWdhdGlvbk1vZGU6IGdldFR5cGVOYXZpZ2F0aW9uTW9kZSwKICAgIGRpc3Bvc2FibGU6IGRpc3Bvc2FibGUsCiAgICBvcHRpb25zOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oewogICAgICAvLyAuLi5vcHRpb25zLCAvLyBUT0RPQEpvYW8gd2h5IGlzIHRoaXMgbm90IHNwbGF0dGVkIGhlcmU/CiAgICAgIGtleWJvYXJkU3VwcG9ydDogZmFsc2UKICAgIH0sIHdvcmtiZW5jaExpc3RPcHRpb25zKSwgewogICAgICBpbmRlbnQ6IHR5cGVvZiBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZSh0cmVlSW5kZW50S2V5KSA9PT0gJ251bWJlcicgPyBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZSh0cmVlSW5kZW50S2V5KSA6IHVuZGVmaW5lZCwKICAgICAgcmVuZGVySW5kZW50R3VpZGVzOiBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZSh0cmVlUmVuZGVySW5kZW50R3VpZGVzS2V5KSwKICAgICAgc21vb3RoU2Nyb2xsaW5nOiBCb29sZWFuKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGxpc3RTbW9vdGhTY3JvbGxpbmcpKSwKICAgICAgZGVmYXVsdEZpbmRNb2RlOiBnZXREZWZhdWx0VHJlZUZpbmRNb2RlKGNvbmZpZ3VyYXRpb25TZXJ2aWNlKSwKICAgICAgaG9yaXpvbnRhbFNjcm9sbGluZzogaG9yaXpvbnRhbFNjcm9sbGluZywKICAgICAgYWRkaXRpb25hbFNjcm9sbEhlaWdodDogYWRkaXRpb25hbFNjcm9sbEhlaWdodCwKICAgICAgaGlkZVR3aXN0aWVzT2ZDaGlsZGxlc3NFbGVtZW50czogb3B0aW9ucy5oaWRlVHdpc3RpZXNPZkNoaWxkbGVzc0VsZW1lbnRzLAogICAgICBleHBhbmRPbmx5T25Ud2lzdGllQ2xpY2s6IChfYSA9IG9wdGlvbnMuZXhwYW5kT25seU9uVHdpc3RpZUNsaWNrKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZSh0cmVlRXhwYW5kTW9kZSkgPT09ICdkb3VibGVDbGljaycsCiAgICAgIGNvbnRleHRWaWV3UHJvdmlkZXI6IGNvbnRleHRWaWV3U2VydmljZQogICAgfSkKICB9Owp9CnZhciBXb3JrYmVuY2hUcmVlSW50ZXJuYWxzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBXb3JrYmVuY2hUcmVlSW50ZXJuYWxzKHRyZWUsIG9wdGlvbnMsIGdldFR5cGVOYXZpZ2F0aW9uTW9kZSwgb3ZlcnJpZGVTdHlsZXMsIGNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZSwgdGhlbWVTZXJ2aWNlLCBjb25maWd1cmF0aW9uU2VydmljZSkgewogICAgdmFyIF90aGlzMTQgPSB0aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdvcmtiZW5jaFRyZWVJbnRlcm5hbHMpOwogICAgdmFyIF9hOwogICAgdGhpcy50cmVlID0gdHJlZTsKICAgIHRoaXMudGhlbWVTZXJ2aWNlID0gdGhlbWVTZXJ2aWNlOwogICAgdGhpcy5kaXNwb3NhYmxlcyA9IFtdOwogICAgdGhpcy5jb250ZXh0S2V5U2VydmljZSA9IGNyZWF0ZVNjb3BlZENvbnRleHRLZXlTZXJ2aWNlKGNvbnRleHRLZXlTZXJ2aWNlLCB0cmVlKTsKICAgIHRoaXMubGlzdFN1cHBvcnRzTXVsdGlTZWxlY3QgPSBXb3JrYmVuY2hMaXN0U3VwcG9ydHNNdWx0aVNlbGVjdENvbnRleHRLZXkuYmluZFRvKHRoaXMuY29udGV4dEtleVNlcnZpY2UpOwogICAgdGhpcy5saXN0U3VwcG9ydHNNdWx0aVNlbGVjdC5zZXQob3B0aW9ucy5tdWx0aXBsZVNlbGVjdGlvblN1cHBvcnQgIT09IGZhbHNlKTsKICAgIHZhciBsaXN0U2VsZWN0aW9uTmF2aWdhdGlvbiA9IFdvcmtiZW5jaExpc3RTZWxlY3Rpb25OYXZpZ2F0aW9uLmJpbmRUbyh0aGlzLmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIGxpc3RTZWxlY3Rpb25OYXZpZ2F0aW9uLnNldChCb29sZWFuKG9wdGlvbnMuc2VsZWN0aW9uTmF2aWdhdGlvbikpOwogICAgdGhpcy5saXN0U3VwcG9ydEZpbmRXaWRnZXQgPSBXb3JrYmVuY2hMaXN0U3VwcG9ydHNGaW5kLmJpbmRUbyh0aGlzLmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIHRoaXMubGlzdFN1cHBvcnRGaW5kV2lkZ2V0LnNldCgoX2EgPSBvcHRpb25zLmZpbmRXaWRnZXRFbmFibGVkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0cnVlKTsKICAgIHRoaXMuaGFzU2VsZWN0aW9uT3JGb2N1cyA9IFdvcmtiZW5jaExpc3RIYXNTZWxlY3Rpb25PckZvY3VzLmJpbmRUbyh0aGlzLmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIHRoaXMuaGFzRG91YmxlU2VsZWN0aW9uID0gV29ya2JlbmNoTGlzdERvdWJsZVNlbGVjdGlvbi5iaW5kVG8odGhpcy5jb250ZXh0S2V5U2VydmljZSk7CiAgICB0aGlzLmhhc011bHRpU2VsZWN0aW9uID0gV29ya2JlbmNoTGlzdE11bHRpU2VsZWN0aW9uLmJpbmRUbyh0aGlzLmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIHRoaXMudHJlZUVsZW1lbnRDYW5Db2xsYXBzZSA9IFdvcmtiZW5jaFRyZWVFbGVtZW50Q2FuQ29sbGFwc2UuYmluZFRvKHRoaXMuY29udGV4dEtleVNlcnZpY2UpOwogICAgdGhpcy50cmVlRWxlbWVudEhhc1BhcmVudCA9IFdvcmtiZW5jaFRyZWVFbGVtZW50SGFzUGFyZW50LmJpbmRUbyh0aGlzLmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIHRoaXMudHJlZUVsZW1lbnRDYW5FeHBhbmQgPSBXb3JrYmVuY2hUcmVlRWxlbWVudENhbkV4cGFuZC5iaW5kVG8odGhpcy5jb250ZXh0S2V5U2VydmljZSk7CiAgICB0aGlzLnRyZWVFbGVtZW50SGFzQ2hpbGQgPSBXb3JrYmVuY2hUcmVlRWxlbWVudEhhc0NoaWxkLmJpbmRUbyh0aGlzLmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIHRoaXMudHJlZUZpbmRPcGVuID0gV29ya2JlbmNoVHJlZUZpbmRPcGVuLmJpbmRUbyh0aGlzLmNvbnRleHRLZXlTZXJ2aWNlKTsKICAgIHRoaXMuX3VzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllciA9IHVzZUFsdEFzTXVsdGlwbGVTZWxlY3Rpb25Nb2RpZmllcihjb25maWd1cmF0aW9uU2VydmljZSk7CiAgICB0aGlzLnVwZGF0ZVN0eWxlT3ZlcnJpZGVzKG92ZXJyaWRlU3R5bGVzKTsKICAgIHZhciB1cGRhdGVDb2xsYXBzZUNvbnRleHRLZXlzID0gZnVuY3Rpb24gdXBkYXRlQ29sbGFwc2VDb250ZXh0S2V5cygpIHsKICAgICAgdmFyIGZvY3VzID0gdHJlZS5nZXRGb2N1cygpWzBdOwogICAgICBpZiAoIWZvY3VzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBub2RlID0gdHJlZS5nZXROb2RlKGZvY3VzKTsKICAgICAgX3RoaXMxNC50cmVlRWxlbWVudENhbkNvbGxhcHNlLnNldChub2RlLmNvbGxhcHNpYmxlICYmICFub2RlLmNvbGxhcHNlZCk7CiAgICAgIF90aGlzMTQudHJlZUVsZW1lbnRIYXNQYXJlbnQuc2V0KCEhdHJlZS5nZXRQYXJlbnRFbGVtZW50KGZvY3VzKSk7CiAgICAgIF90aGlzMTQudHJlZUVsZW1lbnRDYW5FeHBhbmQuc2V0KG5vZGUuY29sbGFwc2libGUgJiYgbm9kZS5jb2xsYXBzZWQpOwogICAgICBfdGhpczE0LnRyZWVFbGVtZW50SGFzQ2hpbGQuc2V0KCEhdHJlZS5nZXRGaXJzdEVsZW1lbnRDaGlsZChmb2N1cykpOwogICAgfTsKICAgIHZhciBpbnRlcmVzdGluZ0NvbnRleHRLZXlzID0gbmV3IFNldCgpOwogICAgaW50ZXJlc3RpbmdDb250ZXh0S2V5cy5hZGQoV29ya2JlbmNoTGlzdFR5cGVOYXZpZ2F0aW9uTW9kZUtleSk7CiAgICBpbnRlcmVzdGluZ0NvbnRleHRLZXlzLmFkZChXb3JrYmVuY2hMaXN0QXV0b21hdGljS2V5Ym9hcmROYXZpZ2F0aW9uTGVnYWN5S2V5KTsKICAgIHRoaXMuZGlzcG9zYWJsZXMucHVzaCh0aGlzLmNvbnRleHRLZXlTZXJ2aWNlLCBsaXN0U2VydmljZS5yZWdpc3Rlcih0cmVlKSwgdHJlZS5vbkRpZENoYW5nZVNlbGVjdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzZWxlY3Rpb24gPSB0cmVlLmdldFNlbGVjdGlvbigpOwogICAgICB2YXIgZm9jdXMgPSB0cmVlLmdldEZvY3VzKCk7CiAgICAgIF90aGlzMTQuY29udGV4dEtleVNlcnZpY2UuYnVmZmVyQ2hhbmdlRXZlbnRzKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczE0Lmhhc1NlbGVjdGlvbk9yRm9jdXMuc2V0KHNlbGVjdGlvbi5sZW5ndGggPiAwIHx8IGZvY3VzLmxlbmd0aCA+IDApOwogICAgICAgIF90aGlzMTQuaGFzTXVsdGlTZWxlY3Rpb24uc2V0KHNlbGVjdGlvbi5sZW5ndGggPiAxKTsKICAgICAgICBfdGhpczE0Lmhhc0RvdWJsZVNlbGVjdGlvbi5zZXQoc2VsZWN0aW9uLmxlbmd0aCA9PT0gMik7CiAgICAgIH0pOwogICAgfSksIHRyZWUub25EaWRDaGFuZ2VGb2N1cyhmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzZWxlY3Rpb24gPSB0cmVlLmdldFNlbGVjdGlvbigpOwogICAgICB2YXIgZm9jdXMgPSB0cmVlLmdldEZvY3VzKCk7CiAgICAgIF90aGlzMTQuaGFzU2VsZWN0aW9uT3JGb2N1cy5zZXQoc2VsZWN0aW9uLmxlbmd0aCA+IDAgfHwgZm9jdXMubGVuZ3RoID4gMCk7CiAgICAgIHVwZGF0ZUNvbGxhcHNlQ29udGV4dEtleXMoKTsKICAgIH0pLCB0cmVlLm9uRGlkQ2hhbmdlQ29sbGFwc2VTdGF0ZSh1cGRhdGVDb2xsYXBzZUNvbnRleHRLZXlzKSwgdHJlZS5vbkRpZENoYW5nZU1vZGVsKHVwZGF0ZUNvbGxhcHNlQ29udGV4dEtleXMpLCB0cmVlLm9uRGlkQ2hhbmdlRmluZE9wZW5TdGF0ZShmdW5jdGlvbiAoZW5hYmxlZCkgewogICAgICByZXR1cm4gX3RoaXMxNC50cmVlRmluZE9wZW4uc2V0KGVuYWJsZWQpOwogICAgfSksIGNvbmZpZ3VyYXRpb25TZXJ2aWNlLm9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbihmdW5jdGlvbiAoZSkgewogICAgICB2YXIgbmV3T3B0aW9ucyA9IHt9OwogICAgICBpZiAoZS5hZmZlY3RzQ29uZmlndXJhdGlvbihtdWx0aVNlbGVjdE1vZGlmaWVyU2V0dGluZ0tleSkpIHsKICAgICAgICBfdGhpczE0Ll91c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIgPSB1c2VBbHRBc011bHRpcGxlU2VsZWN0aW9uTW9kaWZpZXIoY29uZmlndXJhdGlvblNlcnZpY2UpOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKHRyZWVJbmRlbnRLZXkpKSB7CiAgICAgICAgdmFyIGluZGVudCA9IGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKHRyZWVJbmRlbnRLZXkpOwogICAgICAgIG5ld09wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG5ld09wdGlvbnMpLCB7CiAgICAgICAgICBpbmRlbnQ6IGluZGVudAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKHRyZWVSZW5kZXJJbmRlbnRHdWlkZXNLZXkpKSB7CiAgICAgICAgdmFyIHJlbmRlckluZGVudEd1aWRlcyA9IGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKHRyZWVSZW5kZXJJbmRlbnRHdWlkZXNLZXkpOwogICAgICAgIG5ld09wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG5ld09wdGlvbnMpLCB7CiAgICAgICAgICByZW5kZXJJbmRlbnRHdWlkZXM6IHJlbmRlckluZGVudEd1aWRlcwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKGxpc3RTbW9vdGhTY3JvbGxpbmcpKSB7CiAgICAgICAgdmFyIHNtb290aFNjcm9sbGluZyA9IEJvb2xlYW4oY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUobGlzdFNtb290aFNjcm9sbGluZykpOwogICAgICAgIG5ld09wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG5ld09wdGlvbnMpLCB7CiAgICAgICAgICBzbW9vdGhTY3JvbGxpbmc6IHNtb290aFNjcm9sbGluZwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKGRlZmF1bHRGaW5kTW9kZVNldHRpbmdLZXkpIHx8IGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24oa2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ0tleSkpIHsKICAgICAgICB0cmVlLnVwZGF0ZU9wdGlvbnMoewogICAgICAgICAgZGVmYXVsdEZpbmRNb2RlOiBnZXREZWZhdWx0VHJlZUZpbmRNb2RlKGNvbmZpZ3VyYXRpb25TZXJ2aWNlKQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKGhvcml6b250YWxTY3JvbGxpbmdLZXkpICYmIG9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGluZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIGhvcml6b250YWxTY3JvbGxpbmcgPSBCb29sZWFuKGNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKGhvcml6b250YWxTY3JvbGxpbmdLZXkpKTsKICAgICAgICBuZXdPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBuZXdPcHRpb25zKSwgewogICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbGluZzogaG9yaXpvbnRhbFNjcm9sbGluZwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKHRyZWVFeHBhbmRNb2RlKSAmJiBvcHRpb25zLmV4cGFuZE9ubHlPblR3aXN0aWVDbGljayA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbmV3T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbmV3T3B0aW9ucyksIHsKICAgICAgICAgIGV4cGFuZE9ubHlPblR3aXN0aWVDbGljazogY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUodHJlZUV4cGFuZE1vZGUpID09PSAnZG91YmxlQ2xpY2snCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24obW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5S2V5KSkgewogICAgICAgIHZhciBtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHkgPSBjb25maWd1cmF0aW9uU2VydmljZS5nZXRWYWx1ZShtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHlLZXkpOwogICAgICAgIG5ld09wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG5ld09wdGlvbnMpLCB7CiAgICAgICAgICBtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHk6IG1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChlLmFmZmVjdHNDb25maWd1cmF0aW9uKGZhc3RTY3JvbGxTZW5zaXRpdml0eUtleSkpIHsKICAgICAgICB2YXIgZmFzdFNjcm9sbFNlbnNpdGl2aXR5ID0gY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUoZmFzdFNjcm9sbFNlbnNpdGl2aXR5S2V5KTsKICAgICAgICBuZXdPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBuZXdPcHRpb25zKSwgewogICAgICAgICAgZmFzdFNjcm9sbFNlbnNpdGl2aXR5OiBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHkKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoT2JqZWN0LmtleXMobmV3T3B0aW9ucykubGVuZ3RoID4gMCkgewogICAgICAgIHRyZWUudXBkYXRlT3B0aW9ucyhuZXdPcHRpb25zKTsKICAgICAgfQogICAgfSksIHRoaXMuY29udGV4dEtleVNlcnZpY2Uub25EaWRDaGFuZ2VDb250ZXh0KGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLmFmZmVjdHNTb21lKGludGVyZXN0aW5nQ29udGV4dEtleXMpKSB7CiAgICAgICAgdHJlZS51cGRhdGVPcHRpb25zKHsKICAgICAgICAgIHR5cGVOYXZpZ2F0aW9uTW9kZTogZ2V0VHlwZU5hdmlnYXRpb25Nb2RlKCkKICAgICAgICB9KTsKICAgICAgfQogICAgfSkpOwogICAgdGhpcy5uYXZpZ2F0b3IgPSBuZXcgVHJlZVJlc291cmNlTmF2aWdhdG9yKHRyZWUsIE9iamVjdC5hc3NpZ24oewogICAgICBjb25maWd1cmF0aW9uU2VydmljZTogY29uZmlndXJhdGlvblNlcnZpY2UKICAgIH0sIG9wdGlvbnMpKTsKICAgIHRoaXMuZGlzcG9zYWJsZXMucHVzaCh0aGlzLm5hdmlnYXRvcik7CiAgfQogIF9jcmVhdGVDbGFzcyhXb3JrYmVuY2hUcmVlSW50ZXJuYWxzLCBbewogICAga2V5OiAib25EaWRPcGVuIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5uYXZpZ2F0b3Iub25EaWRPcGVuOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZU9wdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucy5tdWx0aXBsZVNlbGVjdGlvblN1cHBvcnQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMubGlzdFN1cHBvcnRzTXVsdGlTZWxlY3Quc2V0KCEhb3B0aW9ucy5tdWx0aXBsZVNlbGVjdGlvblN1cHBvcnQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlU3R5bGVPdmVycmlkZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0eWxlT3ZlcnJpZGVzKG92ZXJyaWRlU3R5bGVzKSB7CiAgICAgIF9kaXNwb3NlKHRoaXMuc3R5bGVyKTsKICAgICAgdGhpcy5zdHlsZXIgPSBvdmVycmlkZVN0eWxlcyA/IGF0dGFjaExpc3RTdHlsZXIodGhpcy50cmVlLCB0aGlzLnRoZW1lU2VydmljZSwgb3ZlcnJpZGVTdHlsZXMpIDogRGlzcG9zYWJsZS5Ob25lOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuZGlzcG9zYWJsZXMgPSBfZGlzcG9zZSh0aGlzLmRpc3Bvc2FibGVzKTsKICAgICAgX2Rpc3Bvc2UodGhpcy5zdHlsZXIpOwogICAgICB0aGlzLnN0eWxlciA9IHVuZGVmaW5lZDsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFdvcmtiZW5jaFRyZWVJbnRlcm5hbHM7Cn0oKTsKV29ya2JlbmNoVHJlZUludGVybmFscyA9IF9fZGVjb3JhdGUoW19fcGFyYW0oNCwgSUNvbnRleHRLZXlTZXJ2aWNlKSwgX19wYXJhbSg1LCBJTGlzdFNlcnZpY2UpLCBfX3BhcmFtKDYsIElUaGVtZVNlcnZpY2UpLCBfX3BhcmFtKDcsIElDb25maWd1cmF0aW9uU2VydmljZSldLCBXb3JrYmVuY2hUcmVlSW50ZXJuYWxzKTsKdmFyIGNvbmZpZ3VyYXRpb25SZWdpc3RyeSA9IFJlZ2lzdHJ5LmFzKENvbmZpZ3VyYXRpb25FeHRlbnNpb25zLkNvbmZpZ3VyYXRpb24pOwpjb25maWd1cmF0aW9uUmVnaXN0cnkucmVnaXN0ZXJDb25maWd1cmF0aW9uKHsKICBpZDogJ3dvcmtiZW5jaCcsCiAgb3JkZXI6IDcsCiAgdGl0bGU6IGxvY2FsaXplKCd3b3JrYmVuY2hDb25maWd1cmF0aW9uVGl0bGUnLCAiV29ya2JlbmNoIiksCiAgdHlwZTogJ29iamVjdCcsCiAgcHJvcGVydGllczogKF9wcm9wZXJ0aWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcHJvcGVydGllcywgbXVsdGlTZWxlY3RNb2RpZmllclNldHRpbmdLZXksIHsKICAgIHR5cGU6ICdzdHJpbmcnLAogICAgZW51bTogWydjdHJsQ21kJywgJ2FsdCddLAogICAgbWFya2Rvd25FbnVtRGVzY3JpcHRpb25zOiBbbG9jYWxpemUoJ211bHRpU2VsZWN0TW9kaWZpZXIuY3RybENtZCcsICJNYXBzIHRvIGBDb250cm9sYCBvbiBXaW5kb3dzIGFuZCBMaW51eCBhbmQgdG8gYENvbW1hbmRgIG9uIG1hY09TLiIpLCBsb2NhbGl6ZSgnbXVsdGlTZWxlY3RNb2RpZmllci5hbHQnLCAiTWFwcyB0byBgQWx0YCBvbiBXaW5kb3dzIGFuZCBMaW51eCBhbmQgdG8gYE9wdGlvbmAgb24gbWFjT1MuIildLAogICAgZGVmYXVsdDogJ2N0cmxDbWQnLAogICAgZGVzY3JpcHRpb246IGxvY2FsaXplKHsKICAgICAga2V5OiAnbXVsdGlTZWxlY3RNb2RpZmllcicsCiAgICAgIGNvbW1lbnQ6IFsnLSBgY3RybENtZGAgcmVmZXJzIHRvIGEgdmFsdWUgdGhlIHNldHRpbmcgY2FuIHRha2UgYW5kIHNob3VsZCBub3QgYmUgbG9jYWxpemVkLicsICctIGBDb250cm9sYCBhbmQgYENvbW1hbmRgIHJlZmVyIHRvIHRoZSBtb2RpZmllciBrZXlzIEN0cmwgb3IgQ21kIG9uIHRoZSBrZXlib2FyZCBhbmQgY2FuIGJlIGxvY2FsaXplZC4nXQogICAgfSwgIlRoZSBtb2RpZmllciB0byBiZSB1c2VkIHRvIGFkZCBhbiBpdGVtIGluIHRyZWVzIGFuZCBsaXN0cyB0byBhIG11bHRpLXNlbGVjdGlvbiB3aXRoIHRoZSBtb3VzZSAoZm9yIGV4YW1wbGUgaW4gdGhlIGV4cGxvcmVyLCBvcGVuIGVkaXRvcnMgYW5kIHNjbSB2aWV3KS4gVGhlICdPcGVuIHRvIFNpZGUnIG1vdXNlIGdlc3R1cmVzIC0gaWYgc3VwcG9ydGVkIC0gd2lsbCBhZGFwdCBzdWNoIHRoYXQgdGhleSBkbyBub3QgY29uZmxpY3Qgd2l0aCB0aGUgbXVsdGlzZWxlY3QgbW9kaWZpZXIuIikKICB9KSwgX2RlZmluZVByb3BlcnR5KF9wcm9wZXJ0aWVzLCBvcGVuTW9kZVNldHRpbmdLZXksIHsKICAgIHR5cGU6ICdzdHJpbmcnLAogICAgZW51bTogWydzaW5nbGVDbGljaycsICdkb3VibGVDbGljayddLAogICAgZGVmYXVsdDogJ3NpbmdsZUNsaWNrJywKICAgIGRlc2NyaXB0aW9uOiBsb2NhbGl6ZSh7CiAgICAgIGtleTogJ29wZW5Nb2RlTW9kaWZpZXInLAogICAgICBjb21tZW50OiBbJ2BzaW5nbGVDbGlja2AgYW5kIGBkb3VibGVDbGlja2AgcmVmZXJzIHRvIGEgdmFsdWUgdGhlIHNldHRpbmcgY2FuIHRha2UgYW5kIHNob3VsZCBub3QgYmUgbG9jYWxpemVkLiddCiAgICB9LCAiQ29udHJvbHMgaG93IHRvIG9wZW4gaXRlbXMgaW4gdHJlZXMgYW5kIGxpc3RzIHVzaW5nIHRoZSBtb3VzZSAoaWYgc3VwcG9ydGVkKS4gTm90ZSB0aGF0IHNvbWUgdHJlZXMgYW5kIGxpc3RzIG1pZ2h0IGNob29zZSB0byBpZ25vcmUgdGhpcyBzZXR0aW5nIGlmIGl0IGlzIG5vdCBhcHBsaWNhYmxlLiIpCiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfcHJvcGVydGllcywgaG9yaXpvbnRhbFNjcm9sbGluZ0tleSwgewogICAgdHlwZTogJ2Jvb2xlYW4nLAogICAgZGVmYXVsdDogZmFsc2UsCiAgICBkZXNjcmlwdGlvbjogbG9jYWxpemUoJ2hvcml6b250YWxTY3JvbGxpbmcgc2V0dGluZycsICJDb250cm9scyB3aGV0aGVyIGxpc3RzIGFuZCB0cmVlcyBzdXBwb3J0IGhvcml6b250YWwgc2Nyb2xsaW5nIGluIHRoZSB3b3JrYmVuY2guIFdhcm5pbmc6IHR1cm5pbmcgb24gdGhpcyBzZXR0aW5nIGhhcyBhIHBlcmZvcm1hbmNlIGltcGxpY2F0aW9uLiIpCiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfcHJvcGVydGllcywgdHJlZUluZGVudEtleSwgewogICAgdHlwZTogJ251bWJlcicsCiAgICBkZWZhdWx0OiA4LAogICAgbWluaW11bTogNCwKICAgIG1heGltdW06IDQwLAogICAgZGVzY3JpcHRpb246IGxvY2FsaXplKCd0cmVlIGluZGVudCBzZXR0aW5nJywgIkNvbnRyb2xzIHRyZWUgaW5kZW50YXRpb24gaW4gcGl4ZWxzLiIpCiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfcHJvcGVydGllcywgdHJlZVJlbmRlckluZGVudEd1aWRlc0tleSwgewogICAgdHlwZTogJ3N0cmluZycsCiAgICBlbnVtOiBbJ25vbmUnLCAnb25Ib3ZlcicsICdhbHdheXMnXSwKICAgIGRlZmF1bHQ6ICdvbkhvdmVyJywKICAgIGRlc2NyaXB0aW9uOiBsb2NhbGl6ZSgncmVuZGVyIHRyZWUgaW5kZW50IGd1aWRlcycsICJDb250cm9scyB3aGV0aGVyIHRoZSB0cmVlIHNob3VsZCByZW5kZXIgaW5kZW50IGd1aWRlcy4iKQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3Byb3BlcnRpZXMsIGxpc3RTbW9vdGhTY3JvbGxpbmcsIHsKICAgIHR5cGU6ICdib29sZWFuJywKICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgZGVzY3JpcHRpb246IGxvY2FsaXplKCdsaXN0IHNtb290aFNjcm9sbGluZyBzZXR0aW5nJywgIkNvbnRyb2xzIHdoZXRoZXIgbGlzdHMgYW5kIHRyZWVzIGhhdmUgc21vb3RoIHNjcm9sbGluZy4iKQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3Byb3BlcnRpZXMsIG1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eUtleSwgewogICAgdHlwZTogJ251bWJlcicsCiAgICBkZWZhdWx0OiAxLAogICAgbWFya2Rvd25EZXNjcmlwdGlvbjogbG9jYWxpemUoJ01vdXNlIFdoZWVsIFNjcm9sbCBTZW5zaXRpdml0eScsICJBIG11bHRpcGxpZXIgdG8gYmUgdXNlZCBvbiB0aGUgYGRlbHRhWGAgYW5kIGBkZWx0YVlgIG9mIG1vdXNlIHdoZWVsIHNjcm9sbCBldmVudHMuIikKICB9KSwgX2RlZmluZVByb3BlcnR5KF9wcm9wZXJ0aWVzLCBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHlLZXksIHsKICAgIHR5cGU6ICdudW1iZXInLAogICAgZGVmYXVsdDogNSwKICAgIGRlc2NyaXB0aW9uOiBsb2NhbGl6ZSgnRmFzdCBTY3JvbGwgU2Vuc2l0aXZpdHknLCAiU2Nyb2xsaW5nIHNwZWVkIG11bHRpcGxpZXIgd2hlbiBwcmVzc2luZyBgQWx0YC4iKQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3Byb3BlcnRpZXMsIGRlZmF1bHRGaW5kTW9kZVNldHRpbmdLZXksIHsKICAgIHR5cGU6ICdzdHJpbmcnLAogICAgZW51bTogWydoaWdobGlnaHQnLCAnZmlsdGVyJ10sCiAgICBlbnVtRGVzY3JpcHRpb25zOiBbbG9jYWxpemUoJ2RlZmF1bHRGaW5kTW9kZVNldHRpbmdLZXkuaGlnaGxpZ2h0JywgIkhpZ2hsaWdodCBlbGVtZW50cyB3aGVuIHNlYXJjaGluZy4gRnVydGhlciB1cCBhbmQgZG93biBuYXZpZ2F0aW9uIHdpbGwgdHJhdmVyc2Ugb25seSB0aGUgaGlnaGxpZ2h0ZWQgZWxlbWVudHMuIiksIGxvY2FsaXplKCdkZWZhdWx0RmluZE1vZGVTZXR0aW5nS2V5LmZpbHRlcicsICJGaWx0ZXIgZWxlbWVudHMgd2hlbiBzZWFyY2hpbmcuIildLAogICAgZGVmYXVsdDogJ2hpZ2hsaWdodCcsCiAgICBkZXNjcmlwdGlvbjogbG9jYWxpemUoJ2RlZmF1bHRGaW5kTW9kZVNldHRpbmdLZXknLCAiQ29udHJvbHMgdGhlIGRlZmF1bHQgZmluZCBtb2RlIGZvciBsaXN0cyBhbmQgdHJlZXMgaW4gdGhlIHdvcmtiZW5jaC4iKQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3Byb3BlcnRpZXMsIGtleWJvYXJkTmF2aWdhdGlvblNldHRpbmdLZXksIHsKICAgIHR5cGU6ICdzdHJpbmcnLAogICAgZW51bTogWydzaW1wbGUnLCAnaGlnaGxpZ2h0JywgJ2ZpbHRlciddLAogICAgZW51bURlc2NyaXB0aW9uczogW2xvY2FsaXplKCdrZXlib2FyZE5hdmlnYXRpb25TZXR0aW5nS2V5LnNpbXBsZScsICJTaW1wbGUga2V5Ym9hcmQgbmF2aWdhdGlvbiBmb2N1c2VzIGVsZW1lbnRzIHdoaWNoIG1hdGNoIHRoZSBrZXlib2FyZCBpbnB1dC4gTWF0Y2hpbmcgaXMgZG9uZSBvbmx5IG9uIHByZWZpeGVzLiIpLCBsb2NhbGl6ZSgna2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ0tleS5oaWdobGlnaHQnLCAiSGlnaGxpZ2h0IGtleWJvYXJkIG5hdmlnYXRpb24gaGlnaGxpZ2h0cyBlbGVtZW50cyB3aGljaCBtYXRjaCB0aGUga2V5Ym9hcmQgaW5wdXQuIEZ1cnRoZXIgdXAgYW5kIGRvd24gbmF2aWdhdGlvbiB3aWxsIHRyYXZlcnNlIG9ubHkgdGhlIGhpZ2hsaWdodGVkIGVsZW1lbnRzLiIpLCBsb2NhbGl6ZSgna2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ0tleS5maWx0ZXInLCAiRmlsdGVyIGtleWJvYXJkIG5hdmlnYXRpb24gd2lsbCBmaWx0ZXIgb3V0IGFuZCBoaWRlIGFsbCB0aGUgZWxlbWVudHMgd2hpY2ggZG8gbm90IG1hdGNoIHRoZSBrZXlib2FyZCBpbnB1dC4iKV0sCiAgICBkZWZhdWx0OiAnaGlnaGxpZ2h0JywKICAgIGRlc2NyaXB0aW9uOiBsb2NhbGl6ZSgna2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ0tleScsICJDb250cm9scyB0aGUga2V5Ym9hcmQgbmF2aWdhdGlvbiBzdHlsZSBmb3IgbGlzdHMgYW5kIHRyZWVzIGluIHRoZSB3b3JrYmVuY2guIENhbiBiZSBzaW1wbGUsIGhpZ2hsaWdodCBhbmQgZmlsdGVyLiIpLAogICAgZGVwcmVjYXRlZDogdHJ1ZSwKICAgIGRlcHJlY2F0aW9uTWVzc2FnZTogbG9jYWxpemUoJ2tleWJvYXJkTmF2aWdhdGlvblNldHRpbmdLZXlEZXByZWNhdGVkJywgIlBsZWFzZSB1c2UgJ3dvcmtiZW5jaC5saXN0LmRlZmF1bHRGaW5kTW9kZScgaW5zdGVhZC4iKQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3Byb3BlcnRpZXMsIHRyZWVFeHBhbmRNb2RlLCB7CiAgICB0eXBlOiAnc3RyaW5nJywKICAgIGVudW06IFsnc2luZ2xlQ2xpY2snLCAnZG91YmxlQ2xpY2snXSwKICAgIGRlZmF1bHQ6ICdzaW5nbGVDbGljaycsCiAgICBkZXNjcmlwdGlvbjogbG9jYWxpemUoJ2V4cGFuZCBtb2RlJywgIkNvbnRyb2xzIGhvdyB0cmVlIGZvbGRlcnMgYXJlIGV4cGFuZGVkIHdoZW4gY2xpY2tpbmcgdGhlIGZvbGRlciBuYW1lcy4gTm90ZSB0aGF0IHNvbWUgdHJlZXMgYW5kIGxpc3RzIG1pZ2h0IGNob29zZSB0byBpZ25vcmUgdGhpcyBzZXR0aW5nIGlmIGl0IGlzIG5vdCBhcHBsaWNhYmxlLiIpCiAgfSksIF9wcm9wZXJ0aWVzKQp9KTs="},{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","createStyleSheet","PagedList","DefaultStyleController","isSelectionRangeChangeEvent","isSelectionSingleChangeEvent","List","TypeNavigationMode","Table","TreeFindMode","AsyncDataTree","CompressibleAsyncDataTree","DataTree","CompressibleObjectTree","ObjectTree","Emitter","Event","combinedDisposable","Disposable","DisposableStore","dispose","toDisposable","localize","IConfigurationService","Extensions","ConfigurationExtensions","ContextKeyExpr","IContextKeyService","RawContextKey","InputFocusedContextKey","IContextViewService","createDecorator","IInstantiationService","IKeybindingService","Registry","attachListStyler","computeStyles","defaultListStyles","IThemeService","IListService","ListService","_themeService","disposables","lists","_lastFocusedWidget","undefined","_hasCreatedStyleController","widget","_a","_b","getHTMLElement","classList","remove","add","extraContextKeys","styleController","some","l","Error","registeredList","push","document","activeElement","setLastFocusedList","onDidFocus","splice","indexOf","onDidDispose","filter","RawWorkbenchListFocusContextKey","WorkbenchListSupportsMultiSelectContextKey","WorkbenchListFocusContextKey","and","not","WorkbenchListHasSelectionOrFocus","WorkbenchListDoubleSelection","WorkbenchListMultiSelection","WorkbenchListSelectionNavigation","WorkbenchListSupportsFind","WorkbenchTreeElementCanCollapse","WorkbenchTreeElementHasParent","WorkbenchTreeElementCanExpand","WorkbenchTreeElementHasChild","WorkbenchTreeFindOpen","WorkbenchListTypeNavigationModeKey","WorkbenchListAutomaticKeyboardNavigationLegacyKey","createScopedContextKeyService","contextKeyService","result","createScoped","bindTo","multiSelectModifierSettingKey","openModeSettingKey","horizontalScrollingKey","defaultFindModeSettingKey","keyboardNavigationSettingKey","treeIndentKey","treeRenderIndentGuidesKey","listSmoothScrolling","mouseWheelScrollSensitivityKey","fastScrollSensitivityKey","treeExpandMode","useAltAsMultipleSelectionModifier","configurationService","getValue","MultipleSelectionController","registerListeners","_register","onDidChangeConfiguration","e","affectsConfiguration","event","browserEvent","altKey","toWorkbenchListOptions","accessor","options","get","keybindingService","assign","keyboardNavigationDelegate","mightProducePrintableCharacter","smoothScrolling","Boolean","mouseWheelScrollSensitivity","fastScrollSensitivity","multipleSelectionController","keyboardNavigationEventFilter","createKeyboardNavigationEventFilter","WorkbenchList","user","container","delegate","renderers","listService","themeService","instantiationService","horizontalScrolling","invokeFunction","workbenchListOptions","workbenchListOptionsDisposable","keyboardSupport","getColorTheme","listSupportsMultiSelect","set","multipleSelectionSupport","listSelectionNavigation","selectionNavigation","listHasSelectionOrFocus","listDoubleSelection","listMultiSelection","_useAltAsMultipleSelectionModifier","register","overrideStyles","updateStyles","onDidChangeSelection","selection","getSelection","focus","getFocus","bufferChangeEvents","onDidChangeFocus","keys","updateOptions","navigator","ListResourceNavigator","styles","_styler","WorkbenchPagedList","WorkbenchTable","columns","TableResourceNavigator","ResourceNavigator","_onDidOpen","onDidOpen","KeyboardEvent","onSelectionFromKeyboard","onPointer","element","onMouseDblClick","openOnSingleClick","elements","selectionKeyboardEvent","preserveFocus","pinned","sideBySide","_open","getSelectedElement","isDoubleClick","detail","isMiddleClick","button","ctrlKey","metaKey","onTwistie","contains","offsetX","fire","editorOptions","revealIfVisible","getSelectedElements","TreeResourceNavigator","inChord","toKeybinding","isModifierKey","softDispatch","enterChord","WorkbenchObjectTree","workbenchTreeDataPreamble","treeOptions","getTypeNavigationMode","disposable","internals","WorkbenchTreeInternals","WorkbenchCompressibleObjectTree","updateStyleOverrides","WorkbenchDataTree","dataSource","WorkbenchAsyncDataTree","WorkbenchCompressibleAsyncDataTree","virtualDelegate","compressionDelegate","getDefaultTreeFindMode","value","Highlight","Filter","deprecatedValue","contextViewService","modeString","getContextKeyValue","Automatic","Trigger","modeBoolean","additionalScrollHeight","indent","renderIndentGuides","defaultFindMode","hideTwistiesOfChildlessElements","expandOnlyOnTwistieClick","contextViewProvider","tree","listSupportFindWidget","findWidgetEnabled","hasSelectionOrFocus","hasDoubleSelection","hasMultiSelection","treeElementCanCollapse","treeElementHasParent","treeElementCanExpand","treeElementHasChild","treeFindOpen","updateCollapseContextKeys","node","getNode","collapsible","collapsed","getParentElement","getFirstElementChild","interestingContextKeys","Set","onDidChangeCollapseState","onDidChangeModel","onDidChangeFindOpenState","enabled","newOptions","onDidChangeContext","affectsSome","typeNavigationMode","styler","None","configurationRegistry","as","Configuration","registerConfiguration","id","order","title","type","properties","enum","markdownEnumDescriptions","default","description","comment","minimum","maximum","markdownDescription","enumDescriptions","deprecated","deprecationMessage"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/platform/list/browser/listService.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createStyleSheet } from '../../../base/browser/dom.js';\nimport { PagedList } from '../../../base/browser/ui/list/listPaging.js';\nimport { DefaultStyleController, isSelectionRangeChangeEvent, isSelectionSingleChangeEvent, List, TypeNavigationMode } from '../../../base/browser/ui/list/listWidget.js';\nimport { Table } from '../../../base/browser/ui/table/tableWidget.js';\nimport { TreeFindMode } from '../../../base/browser/ui/tree/abstractTree.js';\nimport { AsyncDataTree, CompressibleAsyncDataTree } from '../../../base/browser/ui/tree/asyncDataTree.js';\nimport { DataTree } from '../../../base/browser/ui/tree/dataTree.js';\nimport { CompressibleObjectTree, ObjectTree } from '../../../base/browser/ui/tree/objectTree.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { combinedDisposable, Disposable, DisposableStore, dispose, toDisposable } from '../../../base/common/lifecycle.js';\nimport { localize } from '../../../nls.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { Extensions as ConfigurationExtensions } from '../../configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { InputFocusedContextKey } from '../../contextkey/common/contextkeys.js';\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\nimport { createDecorator, IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { Registry } from '../../registry/common/platform.js';\nimport { attachListStyler, computeStyles, defaultListStyles } from '../../theme/common/styler.js';\nimport { IThemeService } from '../../theme/common/themeService.js';\nexport const IListService = createDecorator('listService');\nlet ListService = class ListService {\n    constructor(_themeService) {\n        this._themeService = _themeService;\n        this.disposables = new DisposableStore();\n        this.lists = [];\n        this._lastFocusedWidget = undefined;\n        this._hasCreatedStyleController = false;\n    }\n    get lastFocusedList() {\n        return this._lastFocusedWidget;\n    }\n    setLastFocusedList(widget) {\n        var _a, _b;\n        if (widget === this._lastFocusedWidget) {\n            return;\n        }\n        (_a = this._lastFocusedWidget) === null || _a === void 0 ? void 0 : _a.getHTMLElement().classList.remove('last-focused');\n        this._lastFocusedWidget = widget;\n        (_b = this._lastFocusedWidget) === null || _b === void 0 ? void 0 : _b.getHTMLElement().classList.add('last-focused');\n    }\n    register(widget, extraContextKeys) {\n        if (!this._hasCreatedStyleController) {\n            this._hasCreatedStyleController = true;\n            // create a shared default tree style sheet for performance reasons\n            const styleController = new DefaultStyleController(createStyleSheet(), '');\n            this.disposables.add(attachListStyler(styleController, this._themeService));\n        }\n        if (this.lists.some(l => l.widget === widget)) {\n            throw new Error('Cannot register the same widget multiple times');\n        }\n        // Keep in our lists list\n        const registeredList = { widget, extraContextKeys };\n        this.lists.push(registeredList);\n        // Check for currently being focused\n        if (widget.getHTMLElement() === document.activeElement) {\n            this.setLastFocusedList(widget);\n        }\n        return combinedDisposable(widget.onDidFocus(() => this.setLastFocusedList(widget)), toDisposable(() => this.lists.splice(this.lists.indexOf(registeredList), 1)), widget.onDidDispose(() => {\n            this.lists = this.lists.filter(l => l !== registeredList);\n            if (this._lastFocusedWidget === widget) {\n                this.setLastFocusedList(undefined);\n            }\n        }));\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n};\nListService = __decorate([\n    __param(0, IThemeService)\n], ListService);\nexport { ListService };\nexport const RawWorkbenchListFocusContextKey = new RawContextKey('listFocus', true);\nexport const WorkbenchListSupportsMultiSelectContextKey = new RawContextKey('listSupportsMultiselect', true);\nexport const WorkbenchListFocusContextKey = ContextKeyExpr.and(RawWorkbenchListFocusContextKey, ContextKeyExpr.not(InputFocusedContextKey));\nexport const WorkbenchListHasSelectionOrFocus = new RawContextKey('listHasSelectionOrFocus', false);\nexport const WorkbenchListDoubleSelection = new RawContextKey('listDoubleSelection', false);\nexport const WorkbenchListMultiSelection = new RawContextKey('listMultiSelection', false);\nexport const WorkbenchListSelectionNavigation = new RawContextKey('listSelectionNavigation', false);\nexport const WorkbenchListSupportsFind = new RawContextKey('listSupportsFind', true);\nexport const WorkbenchTreeElementCanCollapse = new RawContextKey('treeElementCanCollapse', false);\nexport const WorkbenchTreeElementHasParent = new RawContextKey('treeElementHasParent', false);\nexport const WorkbenchTreeElementCanExpand = new RawContextKey('treeElementCanExpand', false);\nexport const WorkbenchTreeElementHasChild = new RawContextKey('treeElementHasChild', false);\nexport const WorkbenchTreeFindOpen = new RawContextKey('treeFindOpen', false);\nconst WorkbenchListTypeNavigationModeKey = 'listTypeNavigationMode';\n/**\n * @deprecated in favor of WorkbenchListTypeNavigationModeKey\n */\nconst WorkbenchListAutomaticKeyboardNavigationLegacyKey = 'listAutomaticKeyboardNavigation';\nfunction createScopedContextKeyService(contextKeyService, widget) {\n    const result = contextKeyService.createScoped(widget.getHTMLElement());\n    RawWorkbenchListFocusContextKey.bindTo(result);\n    return result;\n}\nconst multiSelectModifierSettingKey = 'workbench.list.multiSelectModifier';\nconst openModeSettingKey = 'workbench.list.openMode';\nconst horizontalScrollingKey = 'workbench.list.horizontalScrolling';\nconst defaultFindModeSettingKey = 'workbench.list.defaultFindMode';\n/** @deprecated in favor of workbench.list.defaultFindMode */\nconst keyboardNavigationSettingKey = 'workbench.list.keyboardNavigation';\nconst treeIndentKey = 'workbench.tree.indent';\nconst treeRenderIndentGuidesKey = 'workbench.tree.renderIndentGuides';\nconst listSmoothScrolling = 'workbench.list.smoothScrolling';\nconst mouseWheelScrollSensitivityKey = 'workbench.list.mouseWheelScrollSensitivity';\nconst fastScrollSensitivityKey = 'workbench.list.fastScrollSensitivity';\nconst treeExpandMode = 'workbench.tree.expandMode';\nfunction useAltAsMultipleSelectionModifier(configurationService) {\n    return configurationService.getValue(multiSelectModifierSettingKey) === 'alt';\n}\nclass MultipleSelectionController extends Disposable {\n    constructor(configurationService) {\n        super();\n        this.configurationService = configurationService;\n        this.useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\n                this.useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(this.configurationService);\n            }\n        }));\n    }\n    isSelectionSingleChangeEvent(event) {\n        if (this.useAltAsMultipleSelectionModifier) {\n            return event.browserEvent.altKey;\n        }\n        return isSelectionSingleChangeEvent(event);\n    }\n    isSelectionRangeChangeEvent(event) {\n        return isSelectionRangeChangeEvent(event);\n    }\n}\nfunction toWorkbenchListOptions(accessor, options) {\n    var _a;\n    const configurationService = accessor.get(IConfigurationService);\n    const keybindingService = accessor.get(IKeybindingService);\n    const disposables = new DisposableStore();\n    const result = Object.assign(Object.assign({}, options), { keyboardNavigationDelegate: { mightProducePrintableCharacter(e) { return keybindingService.mightProducePrintableCharacter(e); } }, smoothScrolling: Boolean(configurationService.getValue(listSmoothScrolling)), mouseWheelScrollSensitivity: configurationService.getValue(mouseWheelScrollSensitivityKey), fastScrollSensitivity: configurationService.getValue(fastScrollSensitivityKey), multipleSelectionController: (_a = options.multipleSelectionController) !== null && _a !== void 0 ? _a : disposables.add(new MultipleSelectionController(configurationService)), keyboardNavigationEventFilter: createKeyboardNavigationEventFilter(keybindingService) });\n    return [result, disposables];\n}\nlet WorkbenchList = class WorkbenchList extends List {\n    constructor(user, container, delegate, renderers, options, contextKeyService, listService, themeService, configurationService, instantiationService) {\n        const horizontalScrolling = typeof options.horizontalScrolling !== 'undefined' ? options.horizontalScrolling : Boolean(configurationService.getValue(horizontalScrollingKey));\n        const [workbenchListOptions, workbenchListOptionsDisposable] = instantiationService.invokeFunction(toWorkbenchListOptions, options);\n        super(user, container, delegate, renderers, Object.assign(Object.assign(Object.assign({ keyboardSupport: false }, computeStyles(themeService.getColorTheme(), defaultListStyles)), workbenchListOptions), { horizontalScrolling }));\n        this.disposables.add(workbenchListOptionsDisposable);\n        this.contextKeyService = createScopedContextKeyService(contextKeyService, this);\n        this.themeService = themeService;\n        this.listSupportsMultiSelect = WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService);\n        this.listSupportsMultiSelect.set(options.multipleSelectionSupport !== false);\n        const listSelectionNavigation = WorkbenchListSelectionNavigation.bindTo(this.contextKeyService);\n        listSelectionNavigation.set(Boolean(options.selectionNavigation));\n        this.listHasSelectionOrFocus = WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService);\n        this.listDoubleSelection = WorkbenchListDoubleSelection.bindTo(this.contextKeyService);\n        this.listMultiSelection = WorkbenchListMultiSelection.bindTo(this.contextKeyService);\n        this.horizontalScrolling = options.horizontalScrolling;\n        this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n        this.disposables.add(this.contextKeyService);\n        this.disposables.add(listService.register(this));\n        if (options.overrideStyles) {\n            this.updateStyles(options.overrideStyles);\n        }\n        this.disposables.add(this.onDidChangeSelection(() => {\n            const selection = this.getSelection();\n            const focus = this.getFocus();\n            this.contextKeyService.bufferChangeEvents(() => {\n                this.listHasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\n                this.listMultiSelection.set(selection.length > 1);\n                this.listDoubleSelection.set(selection.length === 2);\n            });\n        }));\n        this.disposables.add(this.onDidChangeFocus(() => {\n            const selection = this.getSelection();\n            const focus = this.getFocus();\n            this.listHasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\n        }));\n        this.disposables.add(configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\n                this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n            }\n            let options = {};\n            if (e.affectsConfiguration(horizontalScrollingKey) && this.horizontalScrolling === undefined) {\n                const horizontalScrolling = Boolean(configurationService.getValue(horizontalScrollingKey));\n                options = Object.assign(Object.assign({}, options), { horizontalScrolling });\n            }\n            if (e.affectsConfiguration(listSmoothScrolling)) {\n                const smoothScrolling = Boolean(configurationService.getValue(listSmoothScrolling));\n                options = Object.assign(Object.assign({}, options), { smoothScrolling });\n            }\n            if (e.affectsConfiguration(mouseWheelScrollSensitivityKey)) {\n                const mouseWheelScrollSensitivity = configurationService.getValue(mouseWheelScrollSensitivityKey);\n                options = Object.assign(Object.assign({}, options), { mouseWheelScrollSensitivity });\n            }\n            if (e.affectsConfiguration(fastScrollSensitivityKey)) {\n                const fastScrollSensitivity = configurationService.getValue(fastScrollSensitivityKey);\n                options = Object.assign(Object.assign({}, options), { fastScrollSensitivity });\n            }\n            if (Object.keys(options).length > 0) {\n                this.updateOptions(options);\n            }\n        }));\n        this.navigator = new ListResourceNavigator(this, Object.assign({ configurationService }, options));\n        this.disposables.add(this.navigator);\n    }\n    updateOptions(options) {\n        super.updateOptions(options);\n        if (options.overrideStyles) {\n            this.updateStyles(options.overrideStyles);\n        }\n        if (options.multipleSelectionSupport !== undefined) {\n            this.listSupportsMultiSelect.set(!!options.multipleSelectionSupport);\n        }\n    }\n    updateStyles(styles) {\n        var _a;\n        (_a = this._styler) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styler = attachListStyler(this, this.themeService, styles);\n    }\n    dispose() {\n        var _a;\n        (_a = this._styler) === null || _a === void 0 ? void 0 : _a.dispose();\n        super.dispose();\n    }\n};\nWorkbenchList = __decorate([\n    __param(5, IContextKeyService),\n    __param(6, IListService),\n    __param(7, IThemeService),\n    __param(8, IConfigurationService),\n    __param(9, IInstantiationService)\n], WorkbenchList);\nexport { WorkbenchList };\nlet WorkbenchPagedList = class WorkbenchPagedList extends PagedList {\n    constructor(user, container, delegate, renderers, options, contextKeyService, listService, themeService, configurationService, instantiationService) {\n        const horizontalScrolling = typeof options.horizontalScrolling !== 'undefined' ? options.horizontalScrolling : Boolean(configurationService.getValue(horizontalScrollingKey));\n        const [workbenchListOptions, workbenchListOptionsDisposable] = instantiationService.invokeFunction(toWorkbenchListOptions, options);\n        super(user, container, delegate, renderers, Object.assign(Object.assign(Object.assign({ keyboardSupport: false }, computeStyles(themeService.getColorTheme(), defaultListStyles)), workbenchListOptions), { horizontalScrolling }));\n        this.disposables = new DisposableStore();\n        this.disposables.add(workbenchListOptionsDisposable);\n        this.contextKeyService = createScopedContextKeyService(contextKeyService, this);\n        this.themeService = themeService;\n        this.horizontalScrolling = options.horizontalScrolling;\n        this.listSupportsMultiSelect = WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService);\n        this.listSupportsMultiSelect.set(options.multipleSelectionSupport !== false);\n        const listSelectionNavigation = WorkbenchListSelectionNavigation.bindTo(this.contextKeyService);\n        listSelectionNavigation.set(Boolean(options.selectionNavigation));\n        this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n        this.disposables.add(this.contextKeyService);\n        this.disposables.add(listService.register(this));\n        if (options.overrideStyles) {\n            this.updateStyles(options.overrideStyles);\n        }\n        if (options.overrideStyles) {\n            this.disposables.add(attachListStyler(this, themeService, options.overrideStyles));\n        }\n        this.disposables.add(configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\n                this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n            }\n            let options = {};\n            if (e.affectsConfiguration(horizontalScrollingKey) && this.horizontalScrolling === undefined) {\n                const horizontalScrolling = Boolean(configurationService.getValue(horizontalScrollingKey));\n                options = Object.assign(Object.assign({}, options), { horizontalScrolling });\n            }\n            if (e.affectsConfiguration(listSmoothScrolling)) {\n                const smoothScrolling = Boolean(configurationService.getValue(listSmoothScrolling));\n                options = Object.assign(Object.assign({}, options), { smoothScrolling });\n            }\n            if (e.affectsConfiguration(mouseWheelScrollSensitivityKey)) {\n                const mouseWheelScrollSensitivity = configurationService.getValue(mouseWheelScrollSensitivityKey);\n                options = Object.assign(Object.assign({}, options), { mouseWheelScrollSensitivity });\n            }\n            if (e.affectsConfiguration(fastScrollSensitivityKey)) {\n                const fastScrollSensitivity = configurationService.getValue(fastScrollSensitivityKey);\n                options = Object.assign(Object.assign({}, options), { fastScrollSensitivity });\n            }\n            if (Object.keys(options).length > 0) {\n                this.updateOptions(options);\n            }\n        }));\n        this.navigator = new ListResourceNavigator(this, Object.assign({ configurationService }, options));\n        this.disposables.add(this.navigator);\n    }\n    updateOptions(options) {\n        super.updateOptions(options);\n        if (options.overrideStyles) {\n            this.updateStyles(options.overrideStyles);\n        }\n        if (options.multipleSelectionSupport !== undefined) {\n            this.listSupportsMultiSelect.set(!!options.multipleSelectionSupport);\n        }\n    }\n    updateStyles(styles) {\n        var _a;\n        (_a = this._styler) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styler = attachListStyler(this, this.themeService, styles);\n    }\n    dispose() {\n        var _a;\n        (_a = this._styler) === null || _a === void 0 ? void 0 : _a.dispose();\n        this.disposables.dispose();\n        super.dispose();\n    }\n};\nWorkbenchPagedList = __decorate([\n    __param(5, IContextKeyService),\n    __param(6, IListService),\n    __param(7, IThemeService),\n    __param(8, IConfigurationService),\n    __param(9, IInstantiationService)\n], WorkbenchPagedList);\nexport { WorkbenchPagedList };\nlet WorkbenchTable = class WorkbenchTable extends Table {\n    constructor(user, container, delegate, columns, renderers, options, contextKeyService, listService, themeService, configurationService, instantiationService) {\n        const horizontalScrolling = typeof options.horizontalScrolling !== 'undefined' ? options.horizontalScrolling : Boolean(configurationService.getValue(horizontalScrollingKey));\n        const [workbenchListOptions, workbenchListOptionsDisposable] = instantiationService.invokeFunction(toWorkbenchListOptions, options);\n        super(user, container, delegate, columns, renderers, Object.assign(Object.assign(Object.assign({ keyboardSupport: false }, computeStyles(themeService.getColorTheme(), defaultListStyles)), workbenchListOptions), { horizontalScrolling }));\n        this.disposables.add(workbenchListOptionsDisposable);\n        this.contextKeyService = createScopedContextKeyService(contextKeyService, this);\n        this.themeService = themeService;\n        this.listSupportsMultiSelect = WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService);\n        this.listSupportsMultiSelect.set(options.multipleSelectionSupport !== false);\n        const listSelectionNavigation = WorkbenchListSelectionNavigation.bindTo(this.contextKeyService);\n        listSelectionNavigation.set(Boolean(options.selectionNavigation));\n        this.listHasSelectionOrFocus = WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService);\n        this.listDoubleSelection = WorkbenchListDoubleSelection.bindTo(this.contextKeyService);\n        this.listMultiSelection = WorkbenchListMultiSelection.bindTo(this.contextKeyService);\n        this.horizontalScrolling = options.horizontalScrolling;\n        this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n        this.disposables.add(this.contextKeyService);\n        this.disposables.add(listService.register(this));\n        if (options.overrideStyles) {\n            this.updateStyles(options.overrideStyles);\n        }\n        this.disposables.add(this.onDidChangeSelection(() => {\n            const selection = this.getSelection();\n            const focus = this.getFocus();\n            this.contextKeyService.bufferChangeEvents(() => {\n                this.listHasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\n                this.listMultiSelection.set(selection.length > 1);\n                this.listDoubleSelection.set(selection.length === 2);\n            });\n        }));\n        this.disposables.add(this.onDidChangeFocus(() => {\n            const selection = this.getSelection();\n            const focus = this.getFocus();\n            this.listHasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\n        }));\n        this.disposables.add(configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\n                this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n            }\n            let options = {};\n            if (e.affectsConfiguration(horizontalScrollingKey) && this.horizontalScrolling === undefined) {\n                const horizontalScrolling = Boolean(configurationService.getValue(horizontalScrollingKey));\n                options = Object.assign(Object.assign({}, options), { horizontalScrolling });\n            }\n            if (e.affectsConfiguration(listSmoothScrolling)) {\n                const smoothScrolling = Boolean(configurationService.getValue(listSmoothScrolling));\n                options = Object.assign(Object.assign({}, options), { smoothScrolling });\n            }\n            if (e.affectsConfiguration(mouseWheelScrollSensitivityKey)) {\n                const mouseWheelScrollSensitivity = configurationService.getValue(mouseWheelScrollSensitivityKey);\n                options = Object.assign(Object.assign({}, options), { mouseWheelScrollSensitivity });\n            }\n            if (e.affectsConfiguration(fastScrollSensitivityKey)) {\n                const fastScrollSensitivity = configurationService.getValue(fastScrollSensitivityKey);\n                options = Object.assign(Object.assign({}, options), { fastScrollSensitivity });\n            }\n            if (Object.keys(options).length > 0) {\n                this.updateOptions(options);\n            }\n        }));\n        this.navigator = new TableResourceNavigator(this, Object.assign({ configurationService }, options));\n        this.disposables.add(this.navigator);\n    }\n    updateOptions(options) {\n        super.updateOptions(options);\n        if (options.overrideStyles) {\n            this.updateStyles(options.overrideStyles);\n        }\n        if (options.multipleSelectionSupport !== undefined) {\n            this.listSupportsMultiSelect.set(!!options.multipleSelectionSupport);\n        }\n    }\n    updateStyles(styles) {\n        var _a;\n        (_a = this._styler) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styler = attachListStyler(this, this.themeService, styles);\n    }\n    dispose() {\n        var _a;\n        (_a = this._styler) === null || _a === void 0 ? void 0 : _a.dispose();\n        this.disposables.dispose();\n        super.dispose();\n    }\n};\nWorkbenchTable = __decorate([\n    __param(6, IContextKeyService),\n    __param(7, IListService),\n    __param(8, IThemeService),\n    __param(9, IConfigurationService),\n    __param(10, IInstantiationService)\n], WorkbenchTable);\nexport { WorkbenchTable };\nclass ResourceNavigator extends Disposable {\n    constructor(widget, options) {\n        var _a;\n        super();\n        this.widget = widget;\n        this._onDidOpen = this._register(new Emitter());\n        this.onDidOpen = this._onDidOpen.event;\n        this._register(Event.filter(this.widget.onDidChangeSelection, e => e.browserEvent instanceof KeyboardEvent)(e => this.onSelectionFromKeyboard(e)));\n        this._register(this.widget.onPointer((e) => this.onPointer(e.element, e.browserEvent)));\n        this._register(this.widget.onMouseDblClick((e) => this.onMouseDblClick(e.element, e.browserEvent)));\n        if (typeof (options === null || options === void 0 ? void 0 : options.openOnSingleClick) !== 'boolean' && (options === null || options === void 0 ? void 0 : options.configurationService)) {\n            this.openOnSingleClick = (options === null || options === void 0 ? void 0 : options.configurationService.getValue(openModeSettingKey)) !== 'doubleClick';\n            this._register(options === null || options === void 0 ? void 0 : options.configurationService.onDidChangeConfiguration(() => {\n                this.openOnSingleClick = (options === null || options === void 0 ? void 0 : options.configurationService.getValue(openModeSettingKey)) !== 'doubleClick';\n            }));\n        }\n        else {\n            this.openOnSingleClick = (_a = options === null || options === void 0 ? void 0 : options.openOnSingleClick) !== null && _a !== void 0 ? _a : true;\n        }\n    }\n    onSelectionFromKeyboard(event) {\n        if (event.elements.length !== 1) {\n            return;\n        }\n        const selectionKeyboardEvent = event.browserEvent;\n        const preserveFocus = typeof selectionKeyboardEvent.preserveFocus === 'boolean' ? selectionKeyboardEvent.preserveFocus : true;\n        const pinned = typeof selectionKeyboardEvent.pinned === 'boolean' ? selectionKeyboardEvent.pinned : !preserveFocus;\n        const sideBySide = false;\n        this._open(this.getSelectedElement(), preserveFocus, pinned, sideBySide, event.browserEvent);\n    }\n    onPointer(element, browserEvent) {\n        if (!this.openOnSingleClick) {\n            return;\n        }\n        const isDoubleClick = browserEvent.detail === 2;\n        if (isDoubleClick) {\n            return;\n        }\n        const isMiddleClick = browserEvent.button === 1;\n        const preserveFocus = true;\n        const pinned = isMiddleClick;\n        const sideBySide = browserEvent.ctrlKey || browserEvent.metaKey || browserEvent.altKey;\n        this._open(element, preserveFocus, pinned, sideBySide, browserEvent);\n    }\n    onMouseDblClick(element, browserEvent) {\n        if (!browserEvent) {\n            return;\n        }\n        // copied from AbstractTree\n        const target = browserEvent.target;\n        const onTwistie = target.classList.contains('monaco-tl-twistie')\n            || (target.classList.contains('monaco-icon-label') && target.classList.contains('folder-icon') && browserEvent.offsetX < 16);\n        if (onTwistie) {\n            return;\n        }\n        const preserveFocus = false;\n        const pinned = true;\n        const sideBySide = (browserEvent.ctrlKey || browserEvent.metaKey || browserEvent.altKey);\n        this._open(element, preserveFocus, pinned, sideBySide, browserEvent);\n    }\n    _open(element, preserveFocus, pinned, sideBySide, browserEvent) {\n        if (!element) {\n            return;\n        }\n        this._onDidOpen.fire({\n            editorOptions: {\n                preserveFocus,\n                pinned,\n                revealIfVisible: true\n            },\n            sideBySide,\n            element,\n            browserEvent\n        });\n    }\n}\nclass ListResourceNavigator extends ResourceNavigator {\n    constructor(widget, options) {\n        super(widget, options);\n        this.widget = widget;\n    }\n    getSelectedElement() {\n        return this.widget.getSelectedElements()[0];\n    }\n}\nclass TableResourceNavigator extends ResourceNavigator {\n    constructor(widget, options) {\n        super(widget, options);\n    }\n    getSelectedElement() {\n        return this.widget.getSelectedElements()[0];\n    }\n}\nclass TreeResourceNavigator extends ResourceNavigator {\n    constructor(widget, options) {\n        super(widget, options);\n    }\n    getSelectedElement() {\n        var _a;\n        return (_a = this.widget.getSelection()[0]) !== null && _a !== void 0 ? _a : undefined;\n    }\n}\nfunction createKeyboardNavigationEventFilter(keybindingService) {\n    let inChord = false;\n    return event => {\n        if (event.toKeybinding().isModifierKey()) {\n            return false;\n        }\n        if (inChord) {\n            inChord = false;\n            return false;\n        }\n        const result = keybindingService.softDispatch(event, event.target);\n        if (result === null || result === void 0 ? void 0 : result.enterChord) {\n            inChord = true;\n            return false;\n        }\n        inChord = false;\n        return !result;\n    };\n}\nlet WorkbenchObjectTree = class WorkbenchObjectTree extends ObjectTree {\n    constructor(user, container, delegate, renderers, options, instantiationService, contextKeyService, listService, themeService, configurationService) {\n        const { options: treeOptions, getTypeNavigationMode, disposable } = instantiationService.invokeFunction(workbenchTreeDataPreamble, options);\n        super(user, container, delegate, renderers, treeOptions);\n        this.disposables.add(disposable);\n        this.internals = new WorkbenchTreeInternals(this, options, getTypeNavigationMode, options.overrideStyles, contextKeyService, listService, themeService, configurationService);\n        this.disposables.add(this.internals);\n    }\n    updateOptions(options) {\n        super.updateOptions(options);\n        this.internals.updateOptions(options);\n    }\n};\nWorkbenchObjectTree = __decorate([\n    __param(5, IInstantiationService),\n    __param(6, IContextKeyService),\n    __param(7, IListService),\n    __param(8, IThemeService),\n    __param(9, IConfigurationService)\n], WorkbenchObjectTree);\nexport { WorkbenchObjectTree };\nlet WorkbenchCompressibleObjectTree = class WorkbenchCompressibleObjectTree extends CompressibleObjectTree {\n    constructor(user, container, delegate, renderers, options, instantiationService, contextKeyService, listService, themeService, configurationService) {\n        const { options: treeOptions, getTypeNavigationMode, disposable } = instantiationService.invokeFunction(workbenchTreeDataPreamble, options);\n        super(user, container, delegate, renderers, treeOptions);\n        this.disposables.add(disposable);\n        this.internals = new WorkbenchTreeInternals(this, options, getTypeNavigationMode, options.overrideStyles, contextKeyService, listService, themeService, configurationService);\n        this.disposables.add(this.internals);\n    }\n    updateOptions(options = {}) {\n        super.updateOptions(options);\n        if (options.overrideStyles) {\n            this.internals.updateStyleOverrides(options.overrideStyles);\n        }\n        this.internals.updateOptions(options);\n    }\n};\nWorkbenchCompressibleObjectTree = __decorate([\n    __param(5, IInstantiationService),\n    __param(6, IContextKeyService),\n    __param(7, IListService),\n    __param(8, IThemeService),\n    __param(9, IConfigurationService)\n], WorkbenchCompressibleObjectTree);\nexport { WorkbenchCompressibleObjectTree };\nlet WorkbenchDataTree = class WorkbenchDataTree extends DataTree {\n    constructor(user, container, delegate, renderers, dataSource, options, instantiationService, contextKeyService, listService, themeService, configurationService) {\n        const { options: treeOptions, getTypeNavigationMode, disposable } = instantiationService.invokeFunction(workbenchTreeDataPreamble, options);\n        super(user, container, delegate, renderers, dataSource, treeOptions);\n        this.disposables.add(disposable);\n        this.internals = new WorkbenchTreeInternals(this, options, getTypeNavigationMode, options.overrideStyles, contextKeyService, listService, themeService, configurationService);\n        this.disposables.add(this.internals);\n    }\n    updateOptions(options = {}) {\n        super.updateOptions(options);\n        if (options.overrideStyles) {\n            this.internals.updateStyleOverrides(options.overrideStyles);\n        }\n        this.internals.updateOptions(options);\n    }\n};\nWorkbenchDataTree = __decorate([\n    __param(6, IInstantiationService),\n    __param(7, IContextKeyService),\n    __param(8, IListService),\n    __param(9, IThemeService),\n    __param(10, IConfigurationService)\n], WorkbenchDataTree);\nexport { WorkbenchDataTree };\nlet WorkbenchAsyncDataTree = class WorkbenchAsyncDataTree extends AsyncDataTree {\n    constructor(user, container, delegate, renderers, dataSource, options, instantiationService, contextKeyService, listService, themeService, configurationService) {\n        const { options: treeOptions, getTypeNavigationMode, disposable } = instantiationService.invokeFunction(workbenchTreeDataPreamble, options);\n        super(user, container, delegate, renderers, dataSource, treeOptions);\n        this.disposables.add(disposable);\n        this.internals = new WorkbenchTreeInternals(this, options, getTypeNavigationMode, options.overrideStyles, contextKeyService, listService, themeService, configurationService);\n        this.disposables.add(this.internals);\n    }\n    get onDidOpen() { return this.internals.onDidOpen; }\n    updateOptions(options = {}) {\n        super.updateOptions(options);\n        if (options.overrideStyles) {\n            this.internals.updateStyleOverrides(options.overrideStyles);\n        }\n        this.internals.updateOptions(options);\n    }\n};\nWorkbenchAsyncDataTree = __decorate([\n    __param(6, IInstantiationService),\n    __param(7, IContextKeyService),\n    __param(8, IListService),\n    __param(9, IThemeService),\n    __param(10, IConfigurationService)\n], WorkbenchAsyncDataTree);\nexport { WorkbenchAsyncDataTree };\nlet WorkbenchCompressibleAsyncDataTree = class WorkbenchCompressibleAsyncDataTree extends CompressibleAsyncDataTree {\n    constructor(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, options, instantiationService, contextKeyService, listService, themeService, configurationService) {\n        const { options: treeOptions, getTypeNavigationMode, disposable } = instantiationService.invokeFunction(workbenchTreeDataPreamble, options);\n        super(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, treeOptions);\n        this.disposables.add(disposable);\n        this.internals = new WorkbenchTreeInternals(this, options, getTypeNavigationMode, options.overrideStyles, contextKeyService, listService, themeService, configurationService);\n        this.disposables.add(this.internals);\n    }\n    updateOptions(options) {\n        super.updateOptions(options);\n        this.internals.updateOptions(options);\n    }\n};\nWorkbenchCompressibleAsyncDataTree = __decorate([\n    __param(7, IInstantiationService),\n    __param(8, IContextKeyService),\n    __param(9, IListService),\n    __param(10, IThemeService),\n    __param(11, IConfigurationService)\n], WorkbenchCompressibleAsyncDataTree);\nexport { WorkbenchCompressibleAsyncDataTree };\nfunction getDefaultTreeFindMode(configurationService) {\n    const value = configurationService.getValue(defaultFindModeSettingKey);\n    if (value === 'highlight') {\n        return TreeFindMode.Highlight;\n    }\n    else if (value === 'filter') {\n        return TreeFindMode.Filter;\n    }\n    const deprecatedValue = configurationService.getValue(keyboardNavigationSettingKey);\n    if (deprecatedValue === 'simple' || deprecatedValue === 'highlight') {\n        return TreeFindMode.Highlight;\n    }\n    else if (deprecatedValue === 'filter') {\n        return TreeFindMode.Filter;\n    }\n    return undefined;\n}\nfunction workbenchTreeDataPreamble(accessor, options) {\n    var _a;\n    const configurationService = accessor.get(IConfigurationService);\n    const contextViewService = accessor.get(IContextViewService);\n    const contextKeyService = accessor.get(IContextKeyService);\n    const instantiationService = accessor.get(IInstantiationService);\n    const getTypeNavigationMode = () => {\n        // give priority to the context key value to specify a value\n        const modeString = contextKeyService.getContextKeyValue(WorkbenchListTypeNavigationModeKey);\n        if (modeString === 'automatic') {\n            return TypeNavigationMode.Automatic;\n        }\n        else if (modeString === 'trigger') {\n            return TypeNavigationMode.Trigger;\n        }\n        // also check the deprecated context key to set the mode to 'trigger'\n        const modeBoolean = contextKeyService.getContextKeyValue(WorkbenchListAutomaticKeyboardNavigationLegacyKey);\n        if (modeBoolean === false) {\n            return TypeNavigationMode.Trigger;\n        }\n        return undefined;\n    };\n    const horizontalScrolling = options.horizontalScrolling !== undefined ? options.horizontalScrolling : Boolean(configurationService.getValue(horizontalScrollingKey));\n    const [workbenchListOptions, disposable] = instantiationService.invokeFunction(toWorkbenchListOptions, options);\n    const additionalScrollHeight = options.additionalScrollHeight;\n    return {\n        getTypeNavigationMode,\n        disposable,\n        options: Object.assign(Object.assign({ \n            // ...options, // TODO@Joao why is this not splatted here?\n            keyboardSupport: false }, workbenchListOptions), { indent: typeof configurationService.getValue(treeIndentKey) === 'number' ? configurationService.getValue(treeIndentKey) : undefined, renderIndentGuides: configurationService.getValue(treeRenderIndentGuidesKey), smoothScrolling: Boolean(configurationService.getValue(listSmoothScrolling)), defaultFindMode: getDefaultTreeFindMode(configurationService), horizontalScrolling,\n            additionalScrollHeight, hideTwistiesOfChildlessElements: options.hideTwistiesOfChildlessElements, expandOnlyOnTwistieClick: (_a = options.expandOnlyOnTwistieClick) !== null && _a !== void 0 ? _a : (configurationService.getValue(treeExpandMode) === 'doubleClick'), contextViewProvider: contextViewService })\n    };\n}\nlet WorkbenchTreeInternals = class WorkbenchTreeInternals {\n    constructor(tree, options, getTypeNavigationMode, overrideStyles, contextKeyService, listService, themeService, configurationService) {\n        var _a;\n        this.tree = tree;\n        this.themeService = themeService;\n        this.disposables = [];\n        this.contextKeyService = createScopedContextKeyService(contextKeyService, tree);\n        this.listSupportsMultiSelect = WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService);\n        this.listSupportsMultiSelect.set(options.multipleSelectionSupport !== false);\n        const listSelectionNavigation = WorkbenchListSelectionNavigation.bindTo(this.contextKeyService);\n        listSelectionNavigation.set(Boolean(options.selectionNavigation));\n        this.listSupportFindWidget = WorkbenchListSupportsFind.bindTo(this.contextKeyService);\n        this.listSupportFindWidget.set((_a = options.findWidgetEnabled) !== null && _a !== void 0 ? _a : true);\n        this.hasSelectionOrFocus = WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService);\n        this.hasDoubleSelection = WorkbenchListDoubleSelection.bindTo(this.contextKeyService);\n        this.hasMultiSelection = WorkbenchListMultiSelection.bindTo(this.contextKeyService);\n        this.treeElementCanCollapse = WorkbenchTreeElementCanCollapse.bindTo(this.contextKeyService);\n        this.treeElementHasParent = WorkbenchTreeElementHasParent.bindTo(this.contextKeyService);\n        this.treeElementCanExpand = WorkbenchTreeElementCanExpand.bindTo(this.contextKeyService);\n        this.treeElementHasChild = WorkbenchTreeElementHasChild.bindTo(this.contextKeyService);\n        this.treeFindOpen = WorkbenchTreeFindOpen.bindTo(this.contextKeyService);\n        this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n        this.updateStyleOverrides(overrideStyles);\n        const updateCollapseContextKeys = () => {\n            const focus = tree.getFocus()[0];\n            if (!focus) {\n                return;\n            }\n            const node = tree.getNode(focus);\n            this.treeElementCanCollapse.set(node.collapsible && !node.collapsed);\n            this.treeElementHasParent.set(!!tree.getParentElement(focus));\n            this.treeElementCanExpand.set(node.collapsible && node.collapsed);\n            this.treeElementHasChild.set(!!tree.getFirstElementChild(focus));\n        };\n        const interestingContextKeys = new Set();\n        interestingContextKeys.add(WorkbenchListTypeNavigationModeKey);\n        interestingContextKeys.add(WorkbenchListAutomaticKeyboardNavigationLegacyKey);\n        this.disposables.push(this.contextKeyService, listService.register(tree), tree.onDidChangeSelection(() => {\n            const selection = tree.getSelection();\n            const focus = tree.getFocus();\n            this.contextKeyService.bufferChangeEvents(() => {\n                this.hasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\n                this.hasMultiSelection.set(selection.length > 1);\n                this.hasDoubleSelection.set(selection.length === 2);\n            });\n        }), tree.onDidChangeFocus(() => {\n            const selection = tree.getSelection();\n            const focus = tree.getFocus();\n            this.hasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\n            updateCollapseContextKeys();\n        }), tree.onDidChangeCollapseState(updateCollapseContextKeys), tree.onDidChangeModel(updateCollapseContextKeys), tree.onDidChangeFindOpenState(enabled => this.treeFindOpen.set(enabled)), configurationService.onDidChangeConfiguration(e => {\n            let newOptions = {};\n            if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\n                this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n            }\n            if (e.affectsConfiguration(treeIndentKey)) {\n                const indent = configurationService.getValue(treeIndentKey);\n                newOptions = Object.assign(Object.assign({}, newOptions), { indent });\n            }\n            if (e.affectsConfiguration(treeRenderIndentGuidesKey)) {\n                const renderIndentGuides = configurationService.getValue(treeRenderIndentGuidesKey);\n                newOptions = Object.assign(Object.assign({}, newOptions), { renderIndentGuides });\n            }\n            if (e.affectsConfiguration(listSmoothScrolling)) {\n                const smoothScrolling = Boolean(configurationService.getValue(listSmoothScrolling));\n                newOptions = Object.assign(Object.assign({}, newOptions), { smoothScrolling });\n            }\n            if (e.affectsConfiguration(defaultFindModeSettingKey) || e.affectsConfiguration(keyboardNavigationSettingKey)) {\n                tree.updateOptions({ defaultFindMode: getDefaultTreeFindMode(configurationService) });\n            }\n            if (e.affectsConfiguration(horizontalScrollingKey) && options.horizontalScrolling === undefined) {\n                const horizontalScrolling = Boolean(configurationService.getValue(horizontalScrollingKey));\n                newOptions = Object.assign(Object.assign({}, newOptions), { horizontalScrolling });\n            }\n            if (e.affectsConfiguration(treeExpandMode) && options.expandOnlyOnTwistieClick === undefined) {\n                newOptions = Object.assign(Object.assign({}, newOptions), { expandOnlyOnTwistieClick: configurationService.getValue(treeExpandMode) === 'doubleClick' });\n            }\n            if (e.affectsConfiguration(mouseWheelScrollSensitivityKey)) {\n                const mouseWheelScrollSensitivity = configurationService.getValue(mouseWheelScrollSensitivityKey);\n                newOptions = Object.assign(Object.assign({}, newOptions), { mouseWheelScrollSensitivity });\n            }\n            if (e.affectsConfiguration(fastScrollSensitivityKey)) {\n                const fastScrollSensitivity = configurationService.getValue(fastScrollSensitivityKey);\n                newOptions = Object.assign(Object.assign({}, newOptions), { fastScrollSensitivity });\n            }\n            if (Object.keys(newOptions).length > 0) {\n                tree.updateOptions(newOptions);\n            }\n        }), this.contextKeyService.onDidChangeContext(e => {\n            if (e.affectsSome(interestingContextKeys)) {\n                tree.updateOptions({ typeNavigationMode: getTypeNavigationMode() });\n            }\n        }));\n        this.navigator = new TreeResourceNavigator(tree, Object.assign({ configurationService }, options));\n        this.disposables.push(this.navigator);\n    }\n    get onDidOpen() { return this.navigator.onDidOpen; }\n    updateOptions(options) {\n        if (options.multipleSelectionSupport !== undefined) {\n            this.listSupportsMultiSelect.set(!!options.multipleSelectionSupport);\n        }\n    }\n    updateStyleOverrides(overrideStyles) {\n        dispose(this.styler);\n        this.styler = overrideStyles ? attachListStyler(this.tree, this.themeService, overrideStyles) : Disposable.None;\n    }\n    dispose() {\n        this.disposables = dispose(this.disposables);\n        dispose(this.styler);\n        this.styler = undefined;\n    }\n};\nWorkbenchTreeInternals = __decorate([\n    __param(4, IContextKeyService),\n    __param(5, IListService),\n    __param(6, IThemeService),\n    __param(7, IConfigurationService)\n], WorkbenchTreeInternals);\nconst configurationRegistry = Registry.as(ConfigurationExtensions.Configuration);\nconfigurationRegistry.registerConfiguration({\n    id: 'workbench',\n    order: 7,\n    title: localize('workbenchConfigurationTitle', \"Workbench\"),\n    type: 'object',\n    properties: {\n        [multiSelectModifierSettingKey]: {\n            type: 'string',\n            enum: ['ctrlCmd', 'alt'],\n            markdownEnumDescriptions: [\n                localize('multiSelectModifier.ctrlCmd', \"Maps to `Control` on Windows and Linux and to `Command` on macOS.\"),\n                localize('multiSelectModifier.alt', \"Maps to `Alt` on Windows and Linux and to `Option` on macOS.\")\n            ],\n            default: 'ctrlCmd',\n            description: localize({\n                key: 'multiSelectModifier',\n                comment: [\n                    '- `ctrlCmd` refers to a value the setting can take and should not be localized.',\n                    '- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized.'\n                ]\n            }, \"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.\")\n        },\n        [openModeSettingKey]: {\n            type: 'string',\n            enum: ['singleClick', 'doubleClick'],\n            default: 'singleClick',\n            description: localize({\n                key: 'openModeModifier',\n                comment: ['`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized.']\n            }, \"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.\")\n        },\n        [horizontalScrollingKey]: {\n            type: 'boolean',\n            default: false,\n            description: localize('horizontalScrolling setting', \"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.\")\n        },\n        [treeIndentKey]: {\n            type: 'number',\n            default: 8,\n            minimum: 4,\n            maximum: 40,\n            description: localize('tree indent setting', \"Controls tree indentation in pixels.\")\n        },\n        [treeRenderIndentGuidesKey]: {\n            type: 'string',\n            enum: ['none', 'onHover', 'always'],\n            default: 'onHover',\n            description: localize('render tree indent guides', \"Controls whether the tree should render indent guides.\")\n        },\n        [listSmoothScrolling]: {\n            type: 'boolean',\n            default: false,\n            description: localize('list smoothScrolling setting', \"Controls whether lists and trees have smooth scrolling.\"),\n        },\n        [mouseWheelScrollSensitivityKey]: {\n            type: 'number',\n            default: 1,\n            markdownDescription: localize('Mouse Wheel Scroll Sensitivity', \"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.\")\n        },\n        [fastScrollSensitivityKey]: {\n            type: 'number',\n            default: 5,\n            description: localize('Fast Scroll Sensitivity', \"Scrolling speed multiplier when pressing `Alt`.\")\n        },\n        [defaultFindModeSettingKey]: {\n            type: 'string',\n            enum: ['highlight', 'filter'],\n            enumDescriptions: [\n                localize('defaultFindModeSettingKey.highlight', \"Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements.\"),\n                localize('defaultFindModeSettingKey.filter', \"Filter elements when searching.\")\n            ],\n            default: 'highlight',\n            description: localize('defaultFindModeSettingKey', \"Controls the default find mode for lists and trees in the workbench.\")\n        },\n        [keyboardNavigationSettingKey]: {\n            type: 'string',\n            enum: ['simple', 'highlight', 'filter'],\n            enumDescriptions: [\n                localize('keyboardNavigationSettingKey.simple', \"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes.\"),\n                localize('keyboardNavigationSettingKey.highlight', \"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements.\"),\n                localize('keyboardNavigationSettingKey.filter', \"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.\")\n            ],\n            default: 'highlight',\n            description: localize('keyboardNavigationSettingKey', \"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.\"),\n            deprecated: true,\n            deprecationMessage: localize('keyboardNavigationSettingKeyDeprecated', \"Please use 'workbench.list.defaultFindMode' instead.\")\n        },\n        [treeExpandMode]: {\n            type: 'string',\n            enum: ['singleClick', 'doubleClick'],\n            default: 'singleClick',\n            description: localize('expand mode', \"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.\"),\n        }\n    }\n});\n"],"mappings":"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"}]}