{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KaW1wb3J0ICogYXMgc3RyaW5ncyBmcm9tICcuLi8uLi8uLi8uLi9iYXNlL2NvbW1vbi9zdHJpbmdzLmpzJzsKaW1wb3J0IHsgU3RyaW5nQnVmZmVyLCBjcmVhdGVMaW5lU3RhcnRzLCBjcmVhdGVMaW5lU3RhcnRzRmFzdCB9IGZyb20gJy4vcGllY2VUcmVlQmFzZS5qcyc7CmltcG9ydCB7IFBpZWNlVHJlZVRleHRCdWZmZXIgfSBmcm9tICcuL3BpZWNlVHJlZVRleHRCdWZmZXIuanMnOwpleHBvcnQgdmFyIFBpZWNlVHJlZVRleHRCdWZmZXJGYWN0b3J5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBQaWVjZVRyZWVUZXh0QnVmZmVyRmFjdG9yeShfY2h1bmtzLCBfYm9tLCBfY3IsIF9sZiwgX2NybGYsIF9jb250YWluc1JUTCwgX2NvbnRhaW5zVW51c3VhbExpbmVUZXJtaW5hdG9ycywgX2lzQmFzaWNBU0NJSSwgX25vcm1hbGl6ZUVPTCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBpZWNlVHJlZVRleHRCdWZmZXJGYWN0b3J5KTsKICAgIHRoaXMuX2NodW5rcyA9IF9jaHVua3M7CiAgICB0aGlzLl9ib20gPSBfYm9tOwogICAgdGhpcy5fY3IgPSBfY3I7CiAgICB0aGlzLl9sZiA9IF9sZjsKICAgIHRoaXMuX2NybGYgPSBfY3JsZjsKICAgIHRoaXMuX2NvbnRhaW5zUlRMID0gX2NvbnRhaW5zUlRMOwogICAgdGhpcy5fY29udGFpbnNVbnVzdWFsTGluZVRlcm1pbmF0b3JzID0gX2NvbnRhaW5zVW51c3VhbExpbmVUZXJtaW5hdG9yczsKICAgIHRoaXMuX2lzQmFzaWNBU0NJSSA9IF9pc0Jhc2ljQVNDSUk7CiAgICB0aGlzLl9ub3JtYWxpemVFT0wgPSBfbm9ybWFsaXplRU9MOwogIH0KICBfY3JlYXRlQ2xhc3MoUGllY2VUcmVlVGV4dEJ1ZmZlckZhY3RvcnksIFt7CiAgICBrZXk6ICJfZ2V0RU9MIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RU9MKGRlZmF1bHRFT0wpIHsKICAgICAgdmFyIHRvdGFsRU9MQ291bnQgPSB0aGlzLl9jciArIHRoaXMuX2xmICsgdGhpcy5fY3JsZjsKICAgICAgdmFyIHRvdGFsQ1JDb3VudCA9IHRoaXMuX2NyICsgdGhpcy5fY3JsZjsKICAgICAgaWYgKHRvdGFsRU9MQ291bnQgPT09IDApIHsKICAgICAgICAvLyBUaGlzIGlzIGFuIGVtcHR5IGZpbGUgb3IgYSBmaWxlIHdpdGggcHJlY2lzZWx5IG9uZSBsaW5lCiAgICAgICAgcmV0dXJuIGRlZmF1bHRFT0wgPT09IDEgLyogRGVmYXVsdEVuZE9mTGluZS5MRiAqLyA/ICdcbicgOiAnXHJcbic7CiAgICAgIH0KICAgICAgaWYgKHRvdGFsQ1JDb3VudCA+IHRvdGFsRU9MQ291bnQgLyAyKSB7CiAgICAgICAgLy8gTW9yZSB0aGFuIGhhbGYgb2YgdGhlIGZpbGUgY29udGFpbnMgXHJcbiBlbmRpbmcgbGluZXMKICAgICAgICByZXR1cm4gJ1xyXG4nOwogICAgICB9CiAgICAgIC8vIEF0IGxlYXN0IG9uZSBsaW5lIG1vcmUgZW5kcyBpbiBcbgogICAgICByZXR1cm4gJ1xuJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShkZWZhdWx0RU9MKSB7CiAgICAgIHZhciBlb2wgPSB0aGlzLl9nZXRFT0woZGVmYXVsdEVPTCk7CiAgICAgIHZhciBjaHVua3MgPSB0aGlzLl9jaHVua3M7CiAgICAgIGlmICh0aGlzLl9ub3JtYWxpemVFT0wgJiYgKGVvbCA9PT0gJ1xyXG4nICYmICh0aGlzLl9jciA+IDAgfHwgdGhpcy5fbGYgPiAwKSB8fCBlb2wgPT09ICdcbicgJiYgKHRoaXMuX2NyID4gMCB8fCB0aGlzLl9jcmxmID4gMCkpKSB7CiAgICAgICAgLy8gTm9ybWFsaXplIHBpZWNlcwogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaHVua3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIHZhciBzdHIgPSBjaHVua3NbaV0uYnVmZmVyLnJlcGxhY2UoL1xyXG58XHJ8XG4vZywgZW9sKTsKICAgICAgICAgIHZhciBuZXdMaW5lU3RhcnQgPSBjcmVhdGVMaW5lU3RhcnRzRmFzdChzdHIpOwogICAgICAgICAgY2h1bmtzW2ldID0gbmV3IFN0cmluZ0J1ZmZlcihzdHIsIG5ld0xpbmVTdGFydCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciB0ZXh0QnVmZmVyID0gbmV3IFBpZWNlVHJlZVRleHRCdWZmZXIoY2h1bmtzLCB0aGlzLl9ib20sIGVvbCwgdGhpcy5fY29udGFpbnNSVEwsIHRoaXMuX2NvbnRhaW5zVW51c3VhbExpbmVUZXJtaW5hdG9ycywgdGhpcy5faXNCYXNpY0FTQ0lJLCB0aGlzLl9ub3JtYWxpemVFT0wpOwogICAgICByZXR1cm4gewogICAgICAgIHRleHRCdWZmZXI6IHRleHRCdWZmZXIsCiAgICAgICAgZGlzcG9zYWJsZTogdGV4dEJ1ZmZlcgogICAgICB9OwogICAgfQogIH1dKTsKICByZXR1cm4gUGllY2VUcmVlVGV4dEJ1ZmZlckZhY3Rvcnk7Cn0oKTsKZXhwb3J0IHZhciBQaWVjZVRyZWVUZXh0QnVmZmVyQnVpbGRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUGllY2VUcmVlVGV4dEJ1ZmZlckJ1aWxkZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGllY2VUcmVlVGV4dEJ1ZmZlckJ1aWxkZXIpOwogICAgdGhpcy5jaHVua3MgPSBbXTsKICAgIHRoaXMuQk9NID0gJyc7CiAgICB0aGlzLl9oYXNQcmV2aW91c0NoYXIgPSBmYWxzZTsKICAgIHRoaXMuX3ByZXZpb3VzQ2hhciA9IDA7CiAgICB0aGlzLl90bXBMaW5lU3RhcnRzID0gW107CiAgICB0aGlzLmNyID0gMDsKICAgIHRoaXMubGYgPSAwOwogICAgdGhpcy5jcmxmID0gMDsKICAgIHRoaXMuY29udGFpbnNSVEwgPSBmYWxzZTsKICAgIHRoaXMuY29udGFpbnNVbnVzdWFsTGluZVRlcm1pbmF0b3JzID0gZmFsc2U7CiAgICB0aGlzLmlzQmFzaWNBU0NJSSA9IHRydWU7CiAgfQogIF9jcmVhdGVDbGFzcyhQaWVjZVRyZWVUZXh0QnVmZmVyQnVpbGRlciwgW3sKICAgIGtleTogImFjY2VwdENodW5rIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhY2NlcHRDaHVuayhjaHVuaykgewogICAgICBpZiAoY2h1bmsubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmNodW5rcy5sZW5ndGggPT09IDApIHsKICAgICAgICBpZiAoc3RyaW5ncy5zdGFydHNXaXRoVVRGOEJPTShjaHVuaykpIHsKICAgICAgICAgIHRoaXMuQk9NID0gc3RyaW5ncy5VVEY4X0JPTV9DSEFSQUNURVI7CiAgICAgICAgICBjaHVuayA9IGNodW5rLnN1YnN0cigxKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIGxhc3RDaGFyID0gY2h1bmsuY2hhckNvZGVBdChjaHVuay5sZW5ndGggLSAxKTsKICAgICAgaWYgKGxhc3RDaGFyID09PSAxMyAvKiBDaGFyQ29kZS5DYXJyaWFnZVJldHVybiAqLyB8fCBsYXN0Q2hhciA+PSAweEQ4MDAgJiYgbGFzdENoYXIgPD0gMHhEQkZGKSB7CiAgICAgICAgLy8gbGFzdCBjaGFyYWN0ZXIgaXMgXHIgb3IgYSBoaWdoIHN1cnJvZ2F0ZSA9PiBrZWVwIGl0IGJhY2sKICAgICAgICB0aGlzLl9hY2NlcHRDaHVuazEoY2h1bmsuc3Vic3RyKDAsIGNodW5rLmxlbmd0aCAtIDEpLCBmYWxzZSk7CiAgICAgICAgdGhpcy5faGFzUHJldmlvdXNDaGFyID0gdHJ1ZTsKICAgICAgICB0aGlzLl9wcmV2aW91c0NoYXIgPSBsYXN0Q2hhcjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9hY2NlcHRDaHVuazEoY2h1bmssIGZhbHNlKTsKICAgICAgICB0aGlzLl9oYXNQcmV2aW91c0NoYXIgPSBmYWxzZTsKICAgICAgICB0aGlzLl9wcmV2aW91c0NoYXIgPSBsYXN0Q2hhcjsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9hY2NlcHRDaHVuazEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hY2NlcHRDaHVuazEoY2h1bmssIGFsbG93RW1wdHlTdHJpbmdzKSB7CiAgICAgIGlmICghYWxsb3dFbXB0eVN0cmluZ3MgJiYgY2h1bmsubGVuZ3RoID09PSAwKSB7CiAgICAgICAgLy8gTm90aGluZyB0byBkbwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5faGFzUHJldmlvdXNDaGFyKSB7CiAgICAgICAgdGhpcy5fYWNjZXB0Q2h1bmsyKFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5fcHJldmlvdXNDaGFyKSArIGNodW5rKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9hY2NlcHRDaHVuazIoY2h1bmspOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX2FjY2VwdENodW5rMiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FjY2VwdENodW5rMihjaHVuaykgewogICAgICB2YXIgbGluZVN0YXJ0cyA9IGNyZWF0ZUxpbmVTdGFydHModGhpcy5fdG1wTGluZVN0YXJ0cywgY2h1bmspOwogICAgICB0aGlzLmNodW5rcy5wdXNoKG5ldyBTdHJpbmdCdWZmZXIoY2h1bmssIGxpbmVTdGFydHMubGluZVN0YXJ0cykpOwogICAgICB0aGlzLmNyICs9IGxpbmVTdGFydHMuY3I7CiAgICAgIHRoaXMubGYgKz0gbGluZVN0YXJ0cy5sZjsKICAgICAgdGhpcy5jcmxmICs9IGxpbmVTdGFydHMuY3JsZjsKICAgICAgaWYgKHRoaXMuaXNCYXNpY0FTQ0lJKSB7CiAgICAgICAgdGhpcy5pc0Jhc2ljQVNDSUkgPSBsaW5lU3RhcnRzLmlzQmFzaWNBU0NJSTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuaXNCYXNpY0FTQ0lJICYmICF0aGlzLmNvbnRhaW5zUlRMKSB7CiAgICAgICAgLy8gTm8gbmVlZCB0byBjaGVjayBpZiBpdCBpcyBiYXNpYyBBU0NJSQogICAgICAgIHRoaXMuY29udGFpbnNSVEwgPSBzdHJpbmdzLmNvbnRhaW5zUlRMKGNodW5rKTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuaXNCYXNpY0FTQ0lJICYmICF0aGlzLmNvbnRhaW5zVW51c3VhbExpbmVUZXJtaW5hdG9ycykgewogICAgICAgIC8vIE5vIG5lZWQgdG8gY2hlY2sgaWYgaXQgaXMgYmFzaWMgQVNDSUkKICAgICAgICB0aGlzLmNvbnRhaW5zVW51c3VhbExpbmVUZXJtaW5hdG9ycyA9IHN0cmluZ3MuY29udGFpbnNVbnVzdWFsTGluZVRlcm1pbmF0b3JzKGNodW5rKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZpbmlzaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmluaXNoKCkgewogICAgICB2YXIgbm9ybWFsaXplRU9MID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlOwogICAgICB0aGlzLl9maW5pc2goKTsKICAgICAgcmV0dXJuIG5ldyBQaWVjZVRyZWVUZXh0QnVmZmVyRmFjdG9yeSh0aGlzLmNodW5rcywgdGhpcy5CT00sIHRoaXMuY3IsIHRoaXMubGYsIHRoaXMuY3JsZiwgdGhpcy5jb250YWluc1JUTCwgdGhpcy5jb250YWluc1VudXN1YWxMaW5lVGVybWluYXRvcnMsIHRoaXMuaXNCYXNpY0FTQ0lJLCBub3JtYWxpemVFT0wpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9maW5pc2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maW5pc2goKSB7CiAgICAgIGlmICh0aGlzLmNodW5rcy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLl9hY2NlcHRDaHVuazEoJycsIHRydWUpOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9oYXNQcmV2aW91c0NoYXIpIHsKICAgICAgICB0aGlzLl9oYXNQcmV2aW91c0NoYXIgPSBmYWxzZTsKICAgICAgICAvLyByZWNyZWF0ZSBsYXN0IGNodW5rCiAgICAgICAgdmFyIGxhc3RDaHVuayA9IHRoaXMuY2h1bmtzW3RoaXMuY2h1bmtzLmxlbmd0aCAtIDFdOwogICAgICAgIGxhc3RDaHVuay5idWZmZXIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLl9wcmV2aW91c0NoYXIpOwogICAgICAgIHZhciBuZXdMaW5lU3RhcnRzID0gY3JlYXRlTGluZVN0YXJ0c0Zhc3QobGFzdENodW5rLmJ1ZmZlcik7CiAgICAgICAgbGFzdENodW5rLmxpbmVTdGFydHMgPSBuZXdMaW5lU3RhcnRzOwogICAgICAgIGlmICh0aGlzLl9wcmV2aW91c0NoYXIgPT09IDEzIC8qIENoYXJDb2RlLkNhcnJpYWdlUmV0dXJuICovKSB7CiAgICAgICAgICB0aGlzLmNyKys7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBQaWVjZVRyZWVUZXh0QnVmZmVyQnVpbGRlcjsKfSgpOw=="},{"version":3,"names":["strings","StringBuffer","createLineStarts","createLineStartsFast","PieceTreeTextBuffer","PieceTreeTextBufferFactory","_chunks","_bom","_cr","_lf","_crlf","_containsRTL","_containsUnusualLineTerminators","_isBasicASCII","_normalizeEOL","defaultEOL","totalEOLCount","totalCRCount","eol","_getEOL","chunks","i","len","length","str","buffer","replace","newLineStart","textBuffer","disposable","PieceTreeTextBufferBuilder","BOM","_hasPreviousChar","_previousChar","_tmpLineStarts","cr","lf","crlf","containsRTL","containsUnusualLineTerminators","isBasicASCII","chunk","startsWithUTF8BOM","UTF8_BOM_CHARACTER","substr","lastChar","charCodeAt","_acceptChunk1","allowEmptyStrings","_acceptChunk2","String","fromCharCode","lineStarts","push","normalizeEOL","_finish","lastChunk","newLineStarts"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { StringBuffer, createLineStarts, createLineStartsFast } from './pieceTreeBase.js';\nimport { PieceTreeTextBuffer } from './pieceTreeTextBuffer.js';\nexport class PieceTreeTextBufferFactory {\n    constructor(_chunks, _bom, _cr, _lf, _crlf, _containsRTL, _containsUnusualLineTerminators, _isBasicASCII, _normalizeEOL) {\n        this._chunks = _chunks;\n        this._bom = _bom;\n        this._cr = _cr;\n        this._lf = _lf;\n        this._crlf = _crlf;\n        this._containsRTL = _containsRTL;\n        this._containsUnusualLineTerminators = _containsUnusualLineTerminators;\n        this._isBasicASCII = _isBasicASCII;\n        this._normalizeEOL = _normalizeEOL;\n    }\n    _getEOL(defaultEOL) {\n        const totalEOLCount = this._cr + this._lf + this._crlf;\n        const totalCRCount = this._cr + this._crlf;\n        if (totalEOLCount === 0) {\n            // This is an empty file or a file with precisely one line\n            return (defaultEOL === 1 /* DefaultEndOfLine.LF */ ? '\\n' : '\\r\\n');\n        }\n        if (totalCRCount > totalEOLCount / 2) {\n            // More than half of the file contains \\r\\n ending lines\n            return '\\r\\n';\n        }\n        // At least one line more ends in \\n\n        return '\\n';\n    }\n    create(defaultEOL) {\n        const eol = this._getEOL(defaultEOL);\n        const chunks = this._chunks;\n        if (this._normalizeEOL &&\n            ((eol === '\\r\\n' && (this._cr > 0 || this._lf > 0))\n                || (eol === '\\n' && (this._cr > 0 || this._crlf > 0)))) {\n            // Normalize pieces\n            for (let i = 0, len = chunks.length; i < len; i++) {\n                const str = chunks[i].buffer.replace(/\\r\\n|\\r|\\n/g, eol);\n                const newLineStart = createLineStartsFast(str);\n                chunks[i] = new StringBuffer(str, newLineStart);\n            }\n        }\n        const textBuffer = new PieceTreeTextBuffer(chunks, this._bom, eol, this._containsRTL, this._containsUnusualLineTerminators, this._isBasicASCII, this._normalizeEOL);\n        return { textBuffer: textBuffer, disposable: textBuffer };\n    }\n}\nexport class PieceTreeTextBufferBuilder {\n    constructor() {\n        this.chunks = [];\n        this.BOM = '';\n        this._hasPreviousChar = false;\n        this._previousChar = 0;\n        this._tmpLineStarts = [];\n        this.cr = 0;\n        this.lf = 0;\n        this.crlf = 0;\n        this.containsRTL = false;\n        this.containsUnusualLineTerminators = false;\n        this.isBasicASCII = true;\n    }\n    acceptChunk(chunk) {\n        if (chunk.length === 0) {\n            return;\n        }\n        if (this.chunks.length === 0) {\n            if (strings.startsWithUTF8BOM(chunk)) {\n                this.BOM = strings.UTF8_BOM_CHARACTER;\n                chunk = chunk.substr(1);\n            }\n        }\n        const lastChar = chunk.charCodeAt(chunk.length - 1);\n        if (lastChar === 13 /* CharCode.CarriageReturn */ || (lastChar >= 0xD800 && lastChar <= 0xDBFF)) {\n            // last character is \\r or a high surrogate => keep it back\n            this._acceptChunk1(chunk.substr(0, chunk.length - 1), false);\n            this._hasPreviousChar = true;\n            this._previousChar = lastChar;\n        }\n        else {\n            this._acceptChunk1(chunk, false);\n            this._hasPreviousChar = false;\n            this._previousChar = lastChar;\n        }\n    }\n    _acceptChunk1(chunk, allowEmptyStrings) {\n        if (!allowEmptyStrings && chunk.length === 0) {\n            // Nothing to do\n            return;\n        }\n        if (this._hasPreviousChar) {\n            this._acceptChunk2(String.fromCharCode(this._previousChar) + chunk);\n        }\n        else {\n            this._acceptChunk2(chunk);\n        }\n    }\n    _acceptChunk2(chunk) {\n        const lineStarts = createLineStarts(this._tmpLineStarts, chunk);\n        this.chunks.push(new StringBuffer(chunk, lineStarts.lineStarts));\n        this.cr += lineStarts.cr;\n        this.lf += lineStarts.lf;\n        this.crlf += lineStarts.crlf;\n        if (this.isBasicASCII) {\n            this.isBasicASCII = lineStarts.isBasicASCII;\n        }\n        if (!this.isBasicASCII && !this.containsRTL) {\n            // No need to check if it is basic ASCII\n            this.containsRTL = strings.containsRTL(chunk);\n        }\n        if (!this.isBasicASCII && !this.containsUnusualLineTerminators) {\n            // No need to check if it is basic ASCII\n            this.containsUnusualLineTerminators = strings.containsUnusualLineTerminators(chunk);\n        }\n    }\n    finish(normalizeEOL = true) {\n        this._finish();\n        return new PieceTreeTextBufferFactory(this.chunks, this.BOM, this.cr, this.lf, this.crlf, this.containsRTL, this.containsUnusualLineTerminators, this.isBasicASCII, normalizeEOL);\n    }\n    _finish() {\n        if (this.chunks.length === 0) {\n            this._acceptChunk1('', true);\n        }\n        if (this._hasPreviousChar) {\n            this._hasPreviousChar = false;\n            // recreate last chunk\n            const lastChunk = this.chunks[this.chunks.length - 1];\n            lastChunk.buffer += String.fromCharCode(this._previousChar);\n            const newLineStarts = createLineStartsFast(lastChunk.buffer);\n            lastChunk.lineStarts = newLineStarts;\n            if (this._previousChar === 13 /* CharCode.CarriageReturn */) {\n                this.cr++;\n            }\n        }\n    }\n}\n"],"mappings":"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"}]}