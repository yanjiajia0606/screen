{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaInput.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaInput.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfZ2V0IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0LmpzIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mLmpzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7Ci8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uCiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwppbXBvcnQgKiBhcyBicm93c2VyIGZyb20gJy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci9icm93c2VyLmpzJzsKaW1wb3J0ICogYXMgZG9tIGZyb20gJy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci9kb20uanMnOwppbXBvcnQgeyBTdGFuZGFyZEtleWJvYXJkRXZlbnQgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2Jyb3dzZXIva2V5Ym9hcmRFdmVudC5qcyc7CmltcG9ydCB7IFJ1bk9uY2VTY2hlZHVsZXIgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9hc3luYy5qcyc7CmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9ldmVudC5qcyc7CmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9saWZlY3ljbGUuanMnOwppbXBvcnQgeyBNaW1lcyB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL21pbWUuanMnOwppbXBvcnQgKiBhcyBzdHJpbmdzIGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL3N0cmluZ3MuanMnOwppbXBvcnQgeyBUZXh0QXJlYVN0YXRlLCBfZGVidWdDb21wb3NpdGlvbiB9IGZyb20gJy4vdGV4dEFyZWFTdGF0ZS5qcyc7CmltcG9ydCB7IFNlbGVjdGlvbiB9IGZyb20gJy4uLy4uL2NvbW1vbi9jb3JlL3NlbGVjdGlvbi5qcyc7CmV4cG9ydCB2YXIgVGV4dEFyZWFTeW50ZXRoaWNFdmVudHM7CihmdW5jdGlvbiAoVGV4dEFyZWFTeW50ZXRoaWNFdmVudHMpIHsKICBUZXh0QXJlYVN5bnRldGhpY0V2ZW50cy5UYXAgPSAnLW1vbmFjby10ZXh0YXJlYS1zeW50aGV0aWMtdGFwJzsKfSkoVGV4dEFyZWFTeW50ZXRoaWNFdmVudHMgfHwgKFRleHRBcmVhU3ludGV0aGljRXZlbnRzID0ge30pKTsKZXhwb3J0IHZhciBDb3B5T3B0aW9ucyA9IHsKICBmb3JjZUNvcHlXaXRoU3ludGF4SGlnaGxpZ2h0aW5nOiBmYWxzZQp9OwovKioKICogRXZlcnkgdGltZSB3ZSB3cml0ZSB0byB0aGUgY2xpcGJvYXJkLCB3ZSByZWNvcmQgYSBiaXQgb2YgZXh0cmEgbWV0YWRhdGEgaGVyZS4KICogRXZlcnkgdGltZSB3ZSByZWFkIGZyb20gdGhlIGNpcGJvYXJkLCBpZiB0aGUgdGV4dCBtYXRjaGVzIG91ciBsYXN0IHdyaXR0ZW4gdGV4dCwKICogd2UgY2FuIGZldGNoIHRoZSBwcmV2aW91cyBtZXRhZGF0YS4KICovCmV4cG9ydCB2YXIgSW5NZW1vcnlDbGlwYm9hcmRNZXRhZGF0YU1hbmFnZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEluTWVtb3J5Q2xpcGJvYXJkTWV0YWRhdGFNYW5hZ2VyKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEluTWVtb3J5Q2xpcGJvYXJkTWV0YWRhdGFNYW5hZ2VyKTsKICAgIHRoaXMuX2xhc3RTdGF0ZSA9IG51bGw7CiAgfQogIF9jcmVhdGVDbGFzcyhJbk1lbW9yeUNsaXBib2FyZE1ldGFkYXRhTWFuYWdlciwgW3sKICAgIGtleTogInNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0KGxhc3RDb3BpZWRWYWx1ZSwgZGF0YSkgewogICAgICB0aGlzLl9sYXN0U3RhdGUgPSB7CiAgICAgICAgbGFzdENvcGllZFZhbHVlOiBsYXN0Q29waWVkVmFsdWUsCiAgICAgICAgZGF0YTogZGF0YQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KHBhc3RlZFRleHQpIHsKICAgICAgaWYgKHRoaXMuX2xhc3RTdGF0ZSAmJiB0aGlzLl9sYXN0U3RhdGUubGFzdENvcGllZFZhbHVlID09PSBwYXN0ZWRUZXh0KSB7CiAgICAgICAgLy8gbWF0Y2ghCiAgICAgICAgcmV0dXJuIHRoaXMuX2xhc3RTdGF0ZS5kYXRhOwogICAgICB9CiAgICAgIHRoaXMuX2xhc3RTdGF0ZSA9IG51bGw7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH1dKTsKICByZXR1cm4gSW5NZW1vcnlDbGlwYm9hcmRNZXRhZGF0YU1hbmFnZXI7Cn0oKTsKSW5NZW1vcnlDbGlwYm9hcmRNZXRhZGF0YU1hbmFnZXIuSU5TVEFOQ0UgPSBuZXcgSW5NZW1vcnlDbGlwYm9hcmRNZXRhZGF0YU1hbmFnZXIoKTsKdmFyIENvbXBvc2l0aW9uQ29udGV4dCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ29tcG9zaXRpb25Db250ZXh0KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbXBvc2l0aW9uQ29udGV4dCk7CiAgICB0aGlzLl9sYXN0VHlwZVRleHRMZW5ndGggPSAwOwogIH0KICBfY3JlYXRlQ2xhc3MoQ29tcG9zaXRpb25Db250ZXh0LCBbewogICAga2V5OiAiaGFuZGxlQ29tcG9zaXRpb25VcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNvbXBvc2l0aW9uVXBkYXRlKHRleHQpIHsKICAgICAgdGV4dCA9IHRleHQgfHwgJyc7CiAgICAgIHZhciB0eXBlSW5wdXQgPSB7CiAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICByZXBsYWNlUHJldkNoYXJDbnQ6IHRoaXMuX2xhc3RUeXBlVGV4dExlbmd0aCwKICAgICAgICByZXBsYWNlTmV4dENoYXJDbnQ6IDAsCiAgICAgICAgcG9zaXRpb25EZWx0YTogMAogICAgICB9OwogICAgICB0aGlzLl9sYXN0VHlwZVRleHRMZW5ndGggPSB0ZXh0Lmxlbmd0aDsKICAgICAgcmV0dXJuIHR5cGVJbnB1dDsKICAgIH0KICB9XSk7CiAgcmV0dXJuIENvbXBvc2l0aW9uQ29udGV4dDsKfSgpOwovKioKICogV3JpdGVzIHNjcmVlbiByZWFkZXIgY29udGVudCB0byB0aGUgdGV4dGFyZWEgYW5kIGlzIGFibGUgdG8gYW5hbHl6ZSBpdHMgaW5wdXQgZXZlbnRzIHRvIGdlbmVyYXRlOgogKiAgLSBvbkN1dAogKiAgLSBvblBhc3RlCiAqICAtIG9uVHlwZQogKgogKiBDb21wb3NpdGlvbiBldmVudHMgYXJlIGdlbmVyYXRlZCBmb3IgcHJlc2VudGF0aW9uIHB1cnBvc2VzIChjb21wb3NpdGlvbiBpbnB1dCBpcyByZWZsZWN0ZWQgaW4gb25UeXBlKS4KICovCmV4cG9ydCB2YXIgVGV4dEFyZWFJbnB1dCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Rpc3Bvc2FibGUpIHsKICBfaW5oZXJpdHMoVGV4dEFyZWFJbnB1dCwgX0Rpc3Bvc2FibGUpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoVGV4dEFyZWFJbnB1dCk7CiAgZnVuY3Rpb24gVGV4dEFyZWFJbnB1dChfaG9zdCwgX3RleHRBcmVhLCBfT1MsIF9icm93c2VyKSB7CiAgICB2YXIgX3RoaXM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGV4dEFyZWFJbnB1dCk7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgX3RoaXMuX2hvc3QgPSBfaG9zdDsKICAgIF90aGlzLl90ZXh0QXJlYSA9IF90ZXh0QXJlYTsKICAgIF90aGlzLl9PUyA9IF9PUzsKICAgIF90aGlzLl9icm93c2VyID0gX2Jyb3dzZXI7CiAgICBfdGhpcy5fb25Gb2N1cyA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzLm9uRm9jdXMgPSBfdGhpcy5fb25Gb2N1cy5ldmVudDsKICAgIF90aGlzLl9vbkJsdXIgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpcy5vbkJsdXIgPSBfdGhpcy5fb25CbHVyLmV2ZW50OwogICAgX3RoaXMuX29uS2V5RG93biA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzLm9uS2V5RG93biA9IF90aGlzLl9vbktleURvd24uZXZlbnQ7CiAgICBfdGhpcy5fb25LZXlVcCA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzLm9uS2V5VXAgPSBfdGhpcy5fb25LZXlVcC5ldmVudDsKICAgIF90aGlzLl9vbkN1dCA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzLm9uQ3V0ID0gX3RoaXMuX29uQ3V0LmV2ZW50OwogICAgX3RoaXMuX29uUGFzdGUgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpcy5vblBhc3RlID0gX3RoaXMuX29uUGFzdGUuZXZlbnQ7CiAgICBfdGhpcy5fb25UeXBlID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKCkpOwogICAgX3RoaXMub25UeXBlID0gX3RoaXMuX29uVHlwZS5ldmVudDsKICAgIF90aGlzLl9vbkNvbXBvc2l0aW9uU3RhcnQgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpcy5vbkNvbXBvc2l0aW9uU3RhcnQgPSBfdGhpcy5fb25Db21wb3NpdGlvblN0YXJ0LmV2ZW50OwogICAgX3RoaXMuX29uQ29tcG9zaXRpb25VcGRhdGUgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpcy5vbkNvbXBvc2l0aW9uVXBkYXRlID0gX3RoaXMuX29uQ29tcG9zaXRpb25VcGRhdGUuZXZlbnQ7CiAgICBfdGhpcy5fb25Db21wb3NpdGlvbkVuZCA9IF90aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzLm9uQ29tcG9zaXRpb25FbmQgPSBfdGhpcy5fb25Db21wb3NpdGlvbkVuZC5ldmVudDsKICAgIF90aGlzLl9vblNlbGVjdGlvbkNoYW5nZVJlcXVlc3QgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXIoKSk7CiAgICBfdGhpcy5vblNlbGVjdGlvbkNoYW5nZVJlcXVlc3QgPSBfdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2VSZXF1ZXN0LmV2ZW50OwogICAgX3RoaXMuX2FzeW5jVHJpZ2dlckN1dCA9IF90aGlzLl9yZWdpc3RlcihuZXcgUnVuT25jZVNjaGVkdWxlcihmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5fb25DdXQuZmlyZSgpOwogICAgfSwgMCkpOwogICAgX3RoaXMuX2FzeW5jRm9jdXNHYWluV3JpdGVTY3JlZW5SZWFkZXJDb250ZW50ID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBSdW5PbmNlU2NoZWR1bGVyKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLndyaXRlU2NyZWVuUmVhZGVyQ29udGVudCgnYXN5bmNGb2N1c0dhaW4nKTsKICAgIH0sIDApKTsKICAgIF90aGlzLl90ZXh0QXJlYVN0YXRlID0gVGV4dEFyZWFTdGF0ZS5FTVBUWTsKICAgIF90aGlzLl9zZWxlY3Rpb25DaGFuZ2VMaXN0ZW5lciA9IG51bGw7CiAgICBfdGhpcy53cml0ZVNjcmVlblJlYWRlckNvbnRlbnQoJ2N0b3InKTsKICAgIF90aGlzLl9oYXNGb2N1cyA9IGZhbHNlOwogICAgX3RoaXMuX2N1cnJlbnRDb21wb3NpdGlvbiA9IG51bGw7CiAgICB2YXIgbGFzdEtleURvd24gPSBudWxsOwogICAgX3RoaXMuX3JlZ2lzdGVyKF90aGlzLl90ZXh0QXJlYS5vbktleURvd24oZnVuY3Rpb24gKF9lKSB7CiAgICAgIHZhciBlID0gbmV3IFN0YW5kYXJkS2V5Ym9hcmRFdmVudChfZSk7CiAgICAgIGlmIChlLmtleUNvZGUgPT09IDEwOSAvKiBLZXlDb2RlLktFWV9JTl9DT01QT1NJVElPTiAqLyB8fCBfdGhpcy5fY3VycmVudENvbXBvc2l0aW9uICYmIGUua2V5Q29kZSA9PT0gMSAvKiBLZXlDb2RlLkJhY2tzcGFjZSAqLykgewogICAgICAgIC8vIFN0b3AgcHJvcGFnYXRpb24gZm9yIGtleURvd24gZXZlbnRzIGlmIHRoZSBJTUUgaXMgcHJvY2Vzc2luZyBrZXkgaW5wdXQKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9CiAgICAgIGlmIChlLmVxdWFscyg5IC8qIEtleUNvZGUuRXNjYXBlICovKSkgewogICAgICAgIC8vIFByZXZlbnQgZGVmYXVsdCBhbHdheXMgZm9yIGBFc2NgLCBvdGhlcndpc2UgaXQgd2lsbCBnZW5lcmF0ZSBhIGtleXByZXNzCiAgICAgICAgLy8gU2VlIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvbXM1MzY5Mzkodj12cy44NSkuYXNweAogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgICBsYXN0S2V5RG93biA9IGU7CiAgICAgIF90aGlzLl9vbktleURvd24uZmlyZShlKTsKICAgIH0pKTsKICAgIF90aGlzLl9yZWdpc3RlcihfdGhpcy5fdGV4dEFyZWEub25LZXlVcChmdW5jdGlvbiAoX2UpIHsKICAgICAgdmFyIGUgPSBuZXcgU3RhbmRhcmRLZXlib2FyZEV2ZW50KF9lKTsKICAgICAgX3RoaXMuX29uS2V5VXAuZmlyZShlKTsKICAgIH0pKTsKICAgIF90aGlzLl9yZWdpc3RlcihfdGhpcy5fdGV4dEFyZWEub25Db21wb3NpdGlvblN0YXJ0KGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChfZGVidWdDb21wb3NpdGlvbikgewogICAgICAgIGNvbnNvbGUubG9nKCJbY29tcG9zaXRpb25zdGFydF0iLCBlKTsKICAgICAgfQogICAgICB2YXIgY3VycmVudENvbXBvc2l0aW9uID0gbmV3IENvbXBvc2l0aW9uQ29udGV4dCgpOwogICAgICBpZiAoX3RoaXMuX2N1cnJlbnRDb21wb3NpdGlvbikgewogICAgICAgIC8vIHNpbXBseSByZXNldCB0aGUgY29tcG9zaXRpb24gY29udGV4dAogICAgICAgIF90aGlzLl9jdXJyZW50Q29tcG9zaXRpb24gPSBjdXJyZW50Q29tcG9zaXRpb247CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIF90aGlzLl9jdXJyZW50Q29tcG9zaXRpb24gPSBjdXJyZW50Q29tcG9zaXRpb247CiAgICAgIGlmIChfdGhpcy5fT1MgPT09IDIgLyogT3BlcmF0aW5nU3lzdGVtLk1hY2ludG9zaCAqLyAmJiBsYXN0S2V5RG93biAmJiBsYXN0S2V5RG93bi5lcXVhbHMoMTA5IC8qIEtleUNvZGUuS0VZX0lOX0NPTVBPU0lUSU9OICovKSAmJiBfdGhpcy5fdGV4dEFyZWFTdGF0ZS5zZWxlY3Rpb25TdGFydCA9PT0gX3RoaXMuX3RleHRBcmVhU3RhdGUuc2VsZWN0aW9uRW5kICYmIF90aGlzLl90ZXh0QXJlYVN0YXRlLnNlbGVjdGlvblN0YXJ0ID4gMCAmJiBfdGhpcy5fdGV4dEFyZWFTdGF0ZS52YWx1ZS5zdWJzdHIoX3RoaXMuX3RleHRBcmVhU3RhdGUuc2VsZWN0aW9uU3RhcnQgLSAxLCAxKSA9PT0gZS5kYXRhICYmIChsYXN0S2V5RG93bi5jb2RlID09PSAnQXJyb3dSaWdodCcgfHwgbGFzdEtleURvd24uY29kZSA9PT0gJ0Fycm93TGVmdCcpKSB7CiAgICAgICAgLy8gSGFuZGxpbmcgbG9uZyBwcmVzcyBjYXNlIG9uIENocm9taXVtL1NhZmFyaSBtYWNPUyArIGFycm93IGtleSA9PiBwcmV0ZW5kIHRoZSBjaGFyYWN0ZXIgd2FzIHNlbGVjdGVkCiAgICAgICAgaWYgKF9kZWJ1Z0NvbXBvc2l0aW9uKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiW2NvbXBvc2l0aW9uc3RhcnRdIEhhbmRsaW5nIGxvbmcgcHJlc3MgY2FzZSBvbiBtYWNPUyArIGFycm93IGtleSIsIGUpOwogICAgICAgIH0KICAgICAgICAvLyBQcmV0ZW5kIHRoZSBwcmV2aW91cyBjaGFyYWN0ZXIgd2FzIGNvbXBvc2VkIChpbiBvcmRlciB0byBnZXQgaXQgcmVtb3ZlZCBieSBzdWJzZXF1ZW50IGNvbXBvc2l0aW9udXBkYXRlIGV2ZW50cykKICAgICAgICBjdXJyZW50Q29tcG9zaXRpb24uaGFuZGxlQ29tcG9zaXRpb25VcGRhdGUoJ3gnKTsKICAgICAgICBfdGhpcy5fb25Db21wb3NpdGlvblN0YXJ0LmZpcmUoewogICAgICAgICAgZGF0YTogZS5kYXRhCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChfdGhpcy5fYnJvd3Nlci5pc0FuZHJvaWQpIHsKICAgICAgICAvLyB3aGVuIHRhcHBpbmcgb24gdGhlIGVkaXRvciwgQW5kcm9pZCBlbnRlcnMgY29tcG9zaXRpb24gbW9kZSB0byBlZGl0IHRoZSBjdXJyZW50IHdvcmQKICAgICAgICAvLyBzbyB3ZSBjYW5ub3QgY2xlYXIgdGhlIHRleHRhcmVhIG9uIEFuZHJvaWQgYW5kIHdlIG11c3QgcHJldGVuZCB0aGUgY3VycmVudCB3b3JkIHdhcyBzZWxlY3RlZAogICAgICAgIF90aGlzLl9vbkNvbXBvc2l0aW9uU3RhcnQuZmlyZSh7CiAgICAgICAgICBkYXRhOiBlLmRhdGEKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX3RoaXMuX29uQ29tcG9zaXRpb25TdGFydC5maXJlKHsKICAgICAgICBkYXRhOiBlLmRhdGEKICAgICAgfSk7CiAgICB9KSk7CiAgICBfdGhpcy5fcmVnaXN0ZXIoX3RoaXMuX3RleHRBcmVhLm9uQ29tcG9zaXRpb25VcGRhdGUoZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKF9kZWJ1Z0NvbXBvc2l0aW9uKSB7CiAgICAgICAgY29uc29sZS5sb2coIltjb21wb3NpdGlvbnVwZGF0ZV0iLCBlKTsKICAgICAgfQogICAgICB2YXIgY3VycmVudENvbXBvc2l0aW9uID0gX3RoaXMuX2N1cnJlbnRDb21wb3NpdGlvbjsKICAgICAgaWYgKCFjdXJyZW50Q29tcG9zaXRpb24pIHsKICAgICAgICAvLyBzaG91bGQgbm90IGJlIHBvc3NpYmxlIHRvIHJlY2VpdmUgYSAnY29tcG9zaXRpb251cGRhdGUnIHdpdGhvdXQgYSAnY29tcG9zaXRpb25zdGFydCcKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKF90aGlzLl9icm93c2VyLmlzQW5kcm9pZCkgewogICAgICAgIC8vIE9uIEFuZHJvaWQsIHRoZSBkYXRhIHNlbnQgd2l0aCB0aGUgY29tcG9zaXRpb24gdXBkYXRlIGV2ZW50IGlzIHVudXNhYmxlLgogICAgICAgIC8vIEZvciBleGFtcGxlLCBpZiB0aGUgY3Vyc29yIGlzIGluIHRoZSBtaWRkbGUgb2YgYSB3b3JkIGxpa2UgTWljfG9zb2Z0CiAgICAgICAgLy8gYW5kIE1pY3Jvc29mdCBpcyBjaG9zZW4gZnJvbSB0aGUga2V5Ym9hcmQncyBzdWdnZXN0aW9ucywgdGhlIGUuZGF0YSB3aWxsIGNvbnRhaW4gIk1pY3Jvc29mdCIuCiAgICAgICAgLy8gVGhpcyBpcyBub3QgcmVhbGx5IHVzYWJsZSBiZWNhdXNlIGl0IGRvZXNuJ3QgdGVsbCB1cyB3aGVyZSB0aGUgZWRpdCBiZWdhbiBhbmQgd2hlcmUgaXQgZW5kZWQuCiAgICAgICAgdmFyIG5ld1N0YXRlID0gVGV4dEFyZWFTdGF0ZS5yZWFkRnJvbVRleHRBcmVhKF90aGlzLl90ZXh0QXJlYSk7CiAgICAgICAgdmFyIF90eXBlSW5wdXQgPSBUZXh0QXJlYVN0YXRlLmRlZHVjZUFuZHJvaWRDb21wb3NpdGlvbklucHV0KF90aGlzLl90ZXh0QXJlYVN0YXRlLCBuZXdTdGF0ZSk7CiAgICAgICAgX3RoaXMuX3RleHRBcmVhU3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICBfdGhpcy5fb25UeXBlLmZpcmUoX3R5cGVJbnB1dCk7CiAgICAgICAgX3RoaXMuX29uQ29tcG9zaXRpb25VcGRhdGUuZmlyZShlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHR5cGVJbnB1dCA9IGN1cnJlbnRDb21wb3NpdGlvbi5oYW5kbGVDb21wb3NpdGlvblVwZGF0ZShlLmRhdGEpOwogICAgICBfdGhpcy5fdGV4dEFyZWFTdGF0ZSA9IFRleHRBcmVhU3RhdGUucmVhZEZyb21UZXh0QXJlYShfdGhpcy5fdGV4dEFyZWEpOwogICAgICBfdGhpcy5fb25UeXBlLmZpcmUodHlwZUlucHV0KTsKICAgICAgX3RoaXMuX29uQ29tcG9zaXRpb25VcGRhdGUuZmlyZShlKTsKICAgIH0pKTsKICAgIF90aGlzLl9yZWdpc3RlcihfdGhpcy5fdGV4dEFyZWEub25Db21wb3NpdGlvbkVuZChmdW5jdGlvbiAoZSkgewogICAgICBpZiAoX2RlYnVnQ29tcG9zaXRpb24pIHsKICAgICAgICBjb25zb2xlLmxvZygiW2NvbXBvc2l0aW9uZW5kXSIsIGUpOwogICAgICB9CiAgICAgIHZhciBjdXJyZW50Q29tcG9zaXRpb24gPSBfdGhpcy5fY3VycmVudENvbXBvc2l0aW9uOwogICAgICBpZiAoIWN1cnJlbnRDb21wb3NpdGlvbikgewogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvbW9uYWNvLWVkaXRvci9pc3N1ZXMvMTY2MwogICAgICAgIC8vIE9uIGlPUyAxMy4yLCBDaGluZXNlIHN5c3RlbSBJTUUgcmFuZG9tbHkgdHJpZ2dlciBhbiBhZGRpdGlvbmFsIGNvbXBvc2l0aW9uZW5kIGV2ZW50IHdpdGggZW1wdHkgZGF0YQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBfdGhpcy5fY3VycmVudENvbXBvc2l0aW9uID0gbnVsbDsKICAgICAgaWYgKF90aGlzLl9icm93c2VyLmlzQW5kcm9pZCkgewogICAgICAgIC8vIE9uIEFuZHJvaWQsIHRoZSBkYXRhIHNlbnQgd2l0aCB0aGUgY29tcG9zaXRpb24gdXBkYXRlIGV2ZW50IGlzIHVudXNhYmxlLgogICAgICAgIC8vIEZvciBleGFtcGxlLCBpZiB0aGUgY3Vyc29yIGlzIGluIHRoZSBtaWRkbGUgb2YgYSB3b3JkIGxpa2UgTWljfG9zb2Z0CiAgICAgICAgLy8gYW5kIE1pY3Jvc29mdCBpcyBjaG9zZW4gZnJvbSB0aGUga2V5Ym9hcmQncyBzdWdnZXN0aW9ucywgdGhlIGUuZGF0YSB3aWxsIGNvbnRhaW4gIk1pY3Jvc29mdCIuCiAgICAgICAgLy8gVGhpcyBpcyBub3QgcmVhbGx5IHVzYWJsZSBiZWNhdXNlIGl0IGRvZXNuJ3QgdGVsbCB1cyB3aGVyZSB0aGUgZWRpdCBiZWdhbiBhbmQgd2hlcmUgaXQgZW5kZWQuCiAgICAgICAgdmFyIG5ld1N0YXRlID0gVGV4dEFyZWFTdGF0ZS5yZWFkRnJvbVRleHRBcmVhKF90aGlzLl90ZXh0QXJlYSk7CiAgICAgICAgdmFyIF90eXBlSW5wdXQyID0gVGV4dEFyZWFTdGF0ZS5kZWR1Y2VBbmRyb2lkQ29tcG9zaXRpb25JbnB1dChfdGhpcy5fdGV4dEFyZWFTdGF0ZSwgbmV3U3RhdGUpOwogICAgICAgIF90aGlzLl90ZXh0QXJlYVN0YXRlID0gbmV3U3RhdGU7CiAgICAgICAgX3RoaXMuX29uVHlwZS5maXJlKF90eXBlSW5wdXQyKTsKICAgICAgICBfdGhpcy5fb25Db21wb3NpdGlvbkVuZC5maXJlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciB0eXBlSW5wdXQgPSBjdXJyZW50Q29tcG9zaXRpb24uaGFuZGxlQ29tcG9zaXRpb25VcGRhdGUoZS5kYXRhKTsKICAgICAgX3RoaXMuX3RleHRBcmVhU3RhdGUgPSBUZXh0QXJlYVN0YXRlLnJlYWRGcm9tVGV4dEFyZWEoX3RoaXMuX3RleHRBcmVhKTsKICAgICAgX3RoaXMuX29uVHlwZS5maXJlKHR5cGVJbnB1dCk7CiAgICAgIF90aGlzLl9vbkNvbXBvc2l0aW9uRW5kLmZpcmUoKTsKICAgIH0pKTsKICAgIF90aGlzLl9yZWdpc3RlcihfdGhpcy5fdGV4dEFyZWEub25JbnB1dChmdW5jdGlvbiAoZSkgewogICAgICBpZiAoX2RlYnVnQ29tcG9zaXRpb24pIHsKICAgICAgICBjb25zb2xlLmxvZygiW2lucHV0XSIsIGUpOwogICAgICB9CiAgICAgIC8vIFByZXRlbmQgaGVyZSB3ZSB0b3VjaGVkIHRoZSB0ZXh0IGFyZWEsIGFzIHRoZSBgaW5wdXRgIGV2ZW50IHdpbGwgbW9zdCBsaWtlbHkKICAgICAgLy8gcmVzdWx0IGluIGEgYHNlbGVjdGlvbmNoYW5nZWAgZXZlbnQgd2hpY2ggd2Ugd2FudCB0byBpZ25vcmUKICAgICAgX3RoaXMuX3RleHRBcmVhLnNldElnbm9yZVNlbGVjdGlvbkNoYW5nZVRpbWUoJ3JlY2VpdmVkIGlucHV0IGV2ZW50Jyk7CiAgICAgIGlmIChfdGhpcy5fY3VycmVudENvbXBvc2l0aW9uKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBuZXdTdGF0ZSA9IFRleHRBcmVhU3RhdGUucmVhZEZyb21UZXh0QXJlYShfdGhpcy5fdGV4dEFyZWEpOwogICAgICB2YXIgdHlwZUlucHV0ID0gVGV4dEFyZWFTdGF0ZS5kZWR1Y2VJbnB1dChfdGhpcy5fdGV4dEFyZWFTdGF0ZSwgbmV3U3RhdGUsIC8qY291bGRCZUVtb2ppSW5wdXQqL190aGlzLl9PUyA9PT0gMiAvKiBPcGVyYXRpbmdTeXN0ZW0uTWFjaW50b3NoICovKTsKICAgICAgaWYgKHR5cGVJbnB1dC5yZXBsYWNlUHJldkNoYXJDbnQgPT09IDAgJiYgdHlwZUlucHV0LnRleHQubGVuZ3RoID09PSAxICYmIHN0cmluZ3MuaXNIaWdoU3Vycm9nYXRlKHR5cGVJbnB1dC50ZXh0LmNoYXJDb2RlQXQoMCkpKSB7CiAgICAgICAgLy8gSWdub3JlIGludmFsaWQgaW5wdXQgYnV0IGtlZXAgaXQgYXJvdW5kIGZvciBuZXh0IHRpbWUKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX3RoaXMuX3RleHRBcmVhU3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgaWYgKHR5cGVJbnB1dC50ZXh0ICE9PSAnJyB8fCB0eXBlSW5wdXQucmVwbGFjZVByZXZDaGFyQ250ICE9PSAwIHx8IHR5cGVJbnB1dC5yZXBsYWNlTmV4dENoYXJDbnQgIT09IDAgfHwgdHlwZUlucHV0LnBvc2l0aW9uRGVsdGEgIT09IDApIHsKICAgICAgICBfdGhpcy5fb25UeXBlLmZpcmUodHlwZUlucHV0KTsKICAgICAgfQogICAgfSkpOwogICAgLy8gLS0tIENsaXBib2FyZCBvcGVyYXRpb25zCiAgICBfdGhpcy5fcmVnaXN0ZXIoX3RoaXMuX3RleHRBcmVhLm9uQ3V0KGZ1bmN0aW9uIChlKSB7CiAgICAgIC8vIFByZXRlbmQgaGVyZSB3ZSB0b3VjaGVkIHRoZSB0ZXh0IGFyZWEsIGFzIHRoZSBgY3V0YCBldmVudCB3aWxsIG1vc3QgbGlrZWx5CiAgICAgIC8vIHJlc3VsdCBpbiBhIGBzZWxlY3Rpb25jaGFuZ2VgIGV2ZW50IHdoaWNoIHdlIHdhbnQgdG8gaWdub3JlCiAgICAgIF90aGlzLl90ZXh0QXJlYS5zZXRJZ25vcmVTZWxlY3Rpb25DaGFuZ2VUaW1lKCdyZWNlaXZlZCBjdXQgZXZlbnQnKTsKICAgICAgX3RoaXMuX2Vuc3VyZUNsaXBib2FyZEdldHNFZGl0b3JTZWxlY3Rpb24oZSk7CiAgICAgIF90aGlzLl9hc3luY1RyaWdnZXJDdXQuc2NoZWR1bGUoKTsKICAgIH0pKTsKICAgIF90aGlzLl9yZWdpc3RlcihfdGhpcy5fdGV4dEFyZWEub25Db3B5KGZ1bmN0aW9uIChlKSB7CiAgICAgIF90aGlzLl9lbnN1cmVDbGlwYm9hcmRHZXRzRWRpdG9yU2VsZWN0aW9uKGUpOwogICAgfSkpOwogICAgX3RoaXMuX3JlZ2lzdGVyKF90aGlzLl90ZXh0QXJlYS5vblBhc3RlKGZ1bmN0aW9uIChlKSB7CiAgICAgIC8vIFByZXRlbmQgaGVyZSB3ZSB0b3VjaGVkIHRoZSB0ZXh0IGFyZWEsIGFzIHRoZSBgcGFzdGVgIGV2ZW50IHdpbGwgbW9zdCBsaWtlbHkKICAgICAgLy8gcmVzdWx0IGluIGEgYHNlbGVjdGlvbmNoYW5nZWAgZXZlbnQgd2hpY2ggd2Ugd2FudCB0byBpZ25vcmUKICAgICAgX3RoaXMuX3RleHRBcmVhLnNldElnbm9yZVNlbGVjdGlvbkNoYW5nZVRpbWUoJ3JlY2VpdmVkIHBhc3RlIGV2ZW50Jyk7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKCFlLmNsaXBib2FyZERhdGEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIF9DbGlwYm9hcmRFdmVudFV0aWxzJCA9IENsaXBib2FyZEV2ZW50VXRpbHMuZ2V0VGV4dERhdGEoZS5jbGlwYm9hcmREYXRhKSwKICAgICAgICBfQ2xpcGJvYXJkRXZlbnRVdGlscyQyID0gX3NsaWNlZFRvQXJyYXkoX0NsaXBib2FyZEV2ZW50VXRpbHMkLCAyKSwKICAgICAgICB0ZXh0ID0gX0NsaXBib2FyZEV2ZW50VXRpbHMkMlswXSwKICAgICAgICBtZXRhZGF0YSA9IF9DbGlwYm9hcmRFdmVudFV0aWxzJDJbMV07CiAgICAgIGlmICghdGV4dCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyB0cnkgdGhlIGluLW1lbW9yeSBzdG9yZQogICAgICBtZXRhZGF0YSA9IG1ldGFkYXRhIHx8IEluTWVtb3J5Q2xpcGJvYXJkTWV0YWRhdGFNYW5hZ2VyLklOU1RBTkNFLmdldCh0ZXh0KTsKICAgICAgX3RoaXMuX29uUGFzdGUuZmlyZSh7CiAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICBtZXRhZGF0YTogbWV0YWRhdGEKICAgICAgfSk7CiAgICB9KSk7CiAgICBfdGhpcy5fcmVnaXN0ZXIoX3RoaXMuX3RleHRBcmVhLm9uRm9jdXMoZnVuY3Rpb24gKCkgewogICAgICB2YXIgaGFkRm9jdXMgPSBfdGhpcy5faGFzRm9jdXM7CiAgICAgIF90aGlzLl9zZXRIYXNGb2N1cyh0cnVlKTsKICAgICAgaWYgKF90aGlzLl9icm93c2VyLmlzU2FmYXJpICYmICFoYWRGb2N1cyAmJiBfdGhpcy5faGFzRm9jdXMpIHsKICAgICAgICAvLyBXaGVuICJ0YWJiaW5nIGludG8iIHRoZSB0ZXh0YXJlYSwgaW1tZWRpYXRlbHkgYWZ0ZXIgZGlzcGF0Y2hpbmcgdGhlICdmb2N1cycgZXZlbnQsCiAgICAgICAgLy8gU2FmYXJpIHdpbGwgYWx3YXlzIG1vdmUgdGhlIHNlbGVjdGlvbiBhdCBvZmZzZXQgMCBpbiB0aGUgdGV4dGFyZWEKICAgICAgICBfdGhpcy5fYXN5bmNGb2N1c0dhaW5Xcml0ZVNjcmVlblJlYWRlckNvbnRlbnQuc2NoZWR1bGUoKTsKICAgICAgfQogICAgfSkpOwogICAgX3RoaXMuX3JlZ2lzdGVyKF90aGlzLl90ZXh0QXJlYS5vbkJsdXIoZnVuY3Rpb24gKCkgewogICAgICBpZiAoX3RoaXMuX2N1cnJlbnRDb21wb3NpdGlvbikgewogICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L3ZzY29kZS9pc3N1ZXMvMTEyNjIxCiAgICAgICAgLy8gd2hlcmUgY29tcG9zaXRpb25lbmQgaXMgbm90IHRyaWdnZXJlZCB3aGVuIHRoZSBlZGl0b3IKICAgICAgICAvLyBpcyB0YWtlbiBvZmYtZG9tIGR1cmluZyBhIGNvbXBvc2l0aW9uCiAgICAgICAgLy8gQ2xlYXIgdGhlIGZsYWcgdG8gYmUgYWJsZSB0byB3cml0ZSB0byB0aGUgdGV4dGFyZWEKICAgICAgICBfdGhpcy5fY3VycmVudENvbXBvc2l0aW9uID0gbnVsbDsKICAgICAgICAvLyBDbGVhciB0aGUgdGV4dGFyZWEgdG8gYXZvaWQgYW4gdW53YW50ZWQgY3Vyc29yIHR5cGUKICAgICAgICBfdGhpcy53cml0ZVNjcmVlblJlYWRlckNvbnRlbnQoJ2JsdXJXaXRob3V0Q29tcG9zaXRpb25FbmQnKTsKICAgICAgICAvLyBGaXJlIGFydGlmaWNpYWwgY29tcG9zaXRpb24gZW5kCiAgICAgICAgX3RoaXMuX29uQ29tcG9zaXRpb25FbmQuZmlyZSgpOwogICAgICB9CiAgICAgIF90aGlzLl9zZXRIYXNGb2N1cyhmYWxzZSk7CiAgICB9KSk7CiAgICBfdGhpcy5fcmVnaXN0ZXIoX3RoaXMuX3RleHRBcmVhLm9uU3ludGhldGljVGFwKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLl9icm93c2VyLmlzQW5kcm9pZCAmJiBfdGhpcy5fY3VycmVudENvbXBvc2l0aW9uKSB7CiAgICAgICAgLy8gb24gQW5kcm9pZCwgdGFwcGluZyBkb2VzIG5vdCBjYW5jZWwgdGhlIGN1cnJlbnQgY29tcG9zaXRpb24sIHNvIHRoZQogICAgICAgIC8vIHRleHRhcmVhIGlzIHN0dWNrIHNob3dpbmcgdGhlIG9sZCBjb21wb3NpdGlvbgogICAgICAgIC8vIENsZWFyIHRoZSBmbGFnIHRvIGJlIGFibGUgdG8gd3JpdGUgdG8gdGhlIHRleHRhcmVhCiAgICAgICAgX3RoaXMuX2N1cnJlbnRDb21wb3NpdGlvbiA9IG51bGw7CiAgICAgICAgLy8gQ2xlYXIgdGhlIHRleHRhcmVhIHRvIGF2b2lkIGFuIHVud2FudGVkIGN1cnNvciB0eXBlCiAgICAgICAgX3RoaXMud3JpdGVTY3JlZW5SZWFkZXJDb250ZW50KCd0YXBXaXRob3V0Q29tcG9zaXRpb25FbmQnKTsKICAgICAgICAvLyBGaXJlIGFydGlmaWNpYWwgY29tcG9zaXRpb24gZW5kCiAgICAgICAgX3RoaXMuX29uQ29tcG9zaXRpb25FbmQuZmlyZSgpOwogICAgICB9CiAgICB9KSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhUZXh0QXJlYUlucHV0LCBbewogICAga2V5OiAiX2luc3RhbGxTZWxlY3Rpb25DaGFuZ2VMaXN0ZW5lciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2luc3RhbGxTZWxlY3Rpb25DaGFuZ2VMaXN0ZW5lcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L3ZzY29kZS9pc3N1ZXMvMjcyMTYgYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2lzc3Vlcy85ODI1NgogICAgICAvLyBXaGVuIHVzaW5nIGEgQnJhaWxsZSBkaXNwbGF5LCBpdCBpcyBwb3NzaWJsZSBmb3IgdXNlcnMgdG8gcmVwb3NpdGlvbiB0aGUKICAgICAgLy8gc3lzdGVtIGNhcmV0LiBUaGlzIGlzIHJlZmxlY3RlZCBpbiBDaHJvbWUgYXMgYSBgc2VsZWN0aW9uY2hhbmdlYCBldmVudC4KICAgICAgLy8KICAgICAgLy8gVGhlIGBzZWxlY3Rpb25jaGFuZ2VgIGV2ZW50IGFwcGVhcnMgdG8gYmUgZW1pdHRlZCB1bmRlciBudW1lcm91cyBvdGhlciBjaXJjdW1zdGFuY2VzLAogICAgICAvLyBzbyBpdCBpcyBxdWl0ZSBhIGNoYWxsZW5nZSB0byBkaXN0aW5ndWlzaCBhIGBzZWxlY3Rpb25jaGFuZ2VgIGNvbWluZyBpbiBmcm9tIGEgdXNlcgogICAgICAvLyB1c2luZyBhIEJyYWlsbGUgZGlzcGxheSBmcm9tIGFsbCB0aGUgb3RoZXIgY2FzZXMuCiAgICAgIC8vCiAgICAgIC8vIFRoZSBwcm9ibGVtcyB3aXRoIHRoZSBgc2VsZWN0aW9uY2hhbmdlYCBldmVudCBhcmU6CiAgICAgIC8vICAqIHRoZSBldmVudCBpcyBlbWl0dGVkIHdoZW4gdGhlIHRleHRhcmVhIGlzIGZvY3VzZWQgcHJvZ3JhbW1hdGljYWxseSAtLSB0ZXh0YXJlYS5mb2N1cygpCiAgICAgIC8vICAqIHRoZSBldmVudCBpcyBlbWl0dGVkIHdoZW4gdGhlIHNlbGVjdGlvbiBpcyBjaGFuZ2VkIGluIHRoZSB0ZXh0YXJlYSBwcm9ncmFtbWF0aWNhbGx5IC0tIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKC4uLikKICAgICAgLy8gICogdGhlIGV2ZW50IGlzIGVtaXR0ZWQgd2hlbiB0aGUgdmFsdWUgb2YgdGhlIHRleHRhcmVhIGlzIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSAtLSB0ZXh0YXJlYS52YWx1ZSA9ICcuLi4nCiAgICAgIC8vICAqIHRoZSBldmVudCBpcyBlbWl0dGVkIHdoZW4gdGFiYmluZyBpbnRvIHRoZSB0ZXh0YXJlYQogICAgICAvLyAgKiB0aGUgZXZlbnQgaXMgZW1pdHRlZCBhc3luY2hyb25vdXNseSAoc29tZXRpbWVzIHdpdGggYSBkZWxheSBhcyBoaWdoIGFzIGEgZmV3IHRlbnMgb2YgbXMpCiAgICAgIC8vICAqIHRoZSBldmVudCBzb21ldGltZXMgY29tZXMgaW4gYnVyc3RzIGZvciBhIHNpbmdsZSBsb2dpY2FsIHRleHRhcmVhIG9wZXJhdGlvbgogICAgICAvLyBgc2VsZWN0aW9uY2hhbmdlYCBldmVudHMgb2Z0ZW4gY29tZSBtdWx0aXBsZSB0aW1lcyBmb3IgYSBzaW5nbGUgbG9naWNhbCBjaGFuZ2UKICAgICAgLy8gc28gdGhyb3R0bGUgbXVsdGlwbGUgYHNlbGVjdGlvbmNoYW5nZWAgZXZlbnRzIHRoYXQgYnVyc3QgaW4gYSBzaG9ydCBwZXJpb2Qgb2YgdGltZS4KICAgICAgdmFyIHByZXZpb3VzU2VsZWN0aW9uQ2hhbmdlRXZlbnRUaW1lID0gMDsKICAgICAgcmV0dXJuIGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9jdW1lbnQsICdzZWxlY3Rpb25jaGFuZ2UnLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICghX3RoaXMyLl9oYXNGb2N1cykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoX3RoaXMyLl9jdXJyZW50Q29tcG9zaXRpb24pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFfdGhpczIuX2Jyb3dzZXIuaXNDaHJvbWUpIHsKICAgICAgICAgIC8vIFN1cHBvcnQgb25seSBmb3IgQ2hyb21lIHVudGlsIHRlc3RpbmcgaGFwcGVucyBvbiBvdGhlciBicm93c2VycwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICB2YXIgZGVsdGExID0gbm93IC0gcHJldmlvdXNTZWxlY3Rpb25DaGFuZ2VFdmVudFRpbWU7CiAgICAgICAgcHJldmlvdXNTZWxlY3Rpb25DaGFuZ2VFdmVudFRpbWUgPSBub3c7CiAgICAgICAgaWYgKGRlbHRhMSA8IDUpIHsKICAgICAgICAgIC8vIHJlY2VpdmVkIGFub3RoZXIgYHNlbGVjdGlvbmNoYW5nZWAgZXZlbnQgd2l0aGluIDVtcyBvZiB0aGUgcHJldmlvdXMgYHNlbGVjdGlvbmNoYW5nZWAgZXZlbnQKICAgICAgICAgIC8vID0+IGlnbm9yZSBpdAogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgZGVsdGEyID0gbm93IC0gX3RoaXMyLl90ZXh0QXJlYS5nZXRJZ25vcmVTZWxlY3Rpb25DaGFuZ2VUaW1lKCk7CiAgICAgICAgX3RoaXMyLl90ZXh0QXJlYS5yZXNldFNlbGVjdGlvbkNoYW5nZVRpbWUoKTsKICAgICAgICBpZiAoZGVsdGEyIDwgMTAwKSB7CiAgICAgICAgICAvLyByZWNlaXZlZCBhIGBzZWxlY3Rpb25jaGFuZ2VgIGV2ZW50IHdpdGhpbiAxMDBtcyBzaW5jZSB3ZSB0b3VjaGVkIHRoZSB0ZXh0YXJlYQogICAgICAgICAgLy8gPT4gaWdub3JlIGl0LCBzaW5jZSB3ZSBjYXVzZWQgaXQKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFfdGhpczIuX3RleHRBcmVhU3RhdGUuc2VsZWN0aW9uU3RhcnRQb3NpdGlvbiB8fCAhX3RoaXMyLl90ZXh0QXJlYVN0YXRlLnNlbGVjdGlvbkVuZFBvc2l0aW9uKSB7CiAgICAgICAgICAvLyBDYW5ub3QgY29ycmVsYXRlIGEgcG9zaXRpb24gaW4gdGhlIHRleHRhcmVhIHdpdGggYSBwb3NpdGlvbiBpbiB0aGUgZWRpdG9yLi4uCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBuZXdWYWx1ZSA9IF90aGlzMi5fdGV4dEFyZWEuZ2V0VmFsdWUoKTsKICAgICAgICBpZiAoX3RoaXMyLl90ZXh0QXJlYVN0YXRlLnZhbHVlICE9PSBuZXdWYWx1ZSkgewogICAgICAgICAgLy8gQ2Fubm90IGNvcnJlbGF0ZSBhIHBvc2l0aW9uIGluIHRoZSB0ZXh0YXJlYSB3aXRoIGEgcG9zaXRpb24gaW4gdGhlIGVkaXRvci4uLgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgbmV3U2VsZWN0aW9uU3RhcnQgPSBfdGhpczIuX3RleHRBcmVhLmdldFNlbGVjdGlvblN0YXJ0KCk7CiAgICAgICAgdmFyIG5ld1NlbGVjdGlvbkVuZCA9IF90aGlzMi5fdGV4dEFyZWEuZ2V0U2VsZWN0aW9uRW5kKCk7CiAgICAgICAgaWYgKF90aGlzMi5fdGV4dEFyZWFTdGF0ZS5zZWxlY3Rpb25TdGFydCA9PT0gbmV3U2VsZWN0aW9uU3RhcnQgJiYgX3RoaXMyLl90ZXh0QXJlYVN0YXRlLnNlbGVjdGlvbkVuZCA9PT0gbmV3U2VsZWN0aW9uRW5kKSB7CiAgICAgICAgICAvLyBOb3RoaW5nIHRvIGRvLi4uCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBfbmV3U2VsZWN0aW9uU3RhcnRQb3NpdGlvbiA9IF90aGlzMi5fdGV4dEFyZWFTdGF0ZS5kZWR1Y2VFZGl0b3JQb3NpdGlvbihuZXdTZWxlY3Rpb25TdGFydCk7CiAgICAgICAgdmFyIG5ld1NlbGVjdGlvblN0YXJ0UG9zaXRpb24gPSBfdGhpczIuX2hvc3QuZGVkdWNlTW9kZWxQb3NpdGlvbihfbmV3U2VsZWN0aW9uU3RhcnRQb3NpdGlvblswXSwgX25ld1NlbGVjdGlvblN0YXJ0UG9zaXRpb25bMV0sIF9uZXdTZWxlY3Rpb25TdGFydFBvc2l0aW9uWzJdKTsKICAgICAgICB2YXIgX25ld1NlbGVjdGlvbkVuZFBvc2l0aW9uID0gX3RoaXMyLl90ZXh0QXJlYVN0YXRlLmRlZHVjZUVkaXRvclBvc2l0aW9uKG5ld1NlbGVjdGlvbkVuZCk7CiAgICAgICAgdmFyIG5ld1NlbGVjdGlvbkVuZFBvc2l0aW9uID0gX3RoaXMyLl9ob3N0LmRlZHVjZU1vZGVsUG9zaXRpb24oX25ld1NlbGVjdGlvbkVuZFBvc2l0aW9uWzBdLCBfbmV3U2VsZWN0aW9uRW5kUG9zaXRpb25bMV0sIF9uZXdTZWxlY3Rpb25FbmRQb3NpdGlvblsyXSk7CiAgICAgICAgdmFyIG5ld1NlbGVjdGlvbiA9IG5ldyBTZWxlY3Rpb24obmV3U2VsZWN0aW9uU3RhcnRQb3NpdGlvbi5saW5lTnVtYmVyLCBuZXdTZWxlY3Rpb25TdGFydFBvc2l0aW9uLmNvbHVtbiwgbmV3U2VsZWN0aW9uRW5kUG9zaXRpb24ubGluZU51bWJlciwgbmV3U2VsZWN0aW9uRW5kUG9zaXRpb24uY29sdW1uKTsKICAgICAgICBfdGhpczIuX29uU2VsZWN0aW9uQ2hhbmdlUmVxdWVzdC5maXJlKG5ld1NlbGVjdGlvbik7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFRleHRBcmVhSW5wdXQucHJvdG90eXBlKSwgImRpc3Bvc2UiLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgICBpZiAodGhpcy5fc2VsZWN0aW9uQ2hhbmdlTGlzdGVuZXIpIHsKICAgICAgICB0aGlzLl9zZWxlY3Rpb25DaGFuZ2VMaXN0ZW5lci5kaXNwb3NlKCk7CiAgICAgICAgdGhpcy5fc2VsZWN0aW9uQ2hhbmdlTGlzdGVuZXIgPSBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZm9jdXNUZXh0QXJlYSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9jdXNUZXh0QXJlYSgpIHsKICAgICAgLy8gU2V0dGluZyB0aGlzLl9oYXNGb2N1cyBhbmQgd3JpdGluZyB0aGUgc2NyZWVuIHJlYWRlciBjb250ZW50CiAgICAgIC8vIHdpbGwgcmVzdWx0IGluIGEgZm9jdXMoKSBhbmQgc2V0U2VsZWN0aW9uUmFuZ2UoKSBpbiB0aGUgdGV4dGFyZWEKICAgICAgdGhpcy5fc2V0SGFzRm9jdXModHJ1ZSk7CiAgICAgIC8vIElmIHRoZSBlZGl0b3IgaXMgb2ZmIERPTSwgZm9jdXMgY2Fubm90IGJlIHJlYWxseSBzZXQsIHNvIGxldCdzIGRvdWJsZSBjaGVjayB0aGF0IHdlIGhhdmUgbWFuYWdlZCB0byBzZXQgdGhlIGZvY3VzCiAgICAgIHRoaXMucmVmcmVzaEZvY3VzU3RhdGUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0ZvY3VzZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzRm9jdXNlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2hhc0ZvY3VzOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZnJlc2hGb2N1c1N0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoRm9jdXNTdGF0ZSgpIHsKICAgICAgdGhpcy5fc2V0SGFzRm9jdXModGhpcy5fdGV4dEFyZWEuaGFzRm9jdXMoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3NldEhhc0ZvY3VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0SGFzRm9jdXMobmV3SGFzRm9jdXMpIHsKICAgICAgaWYgKHRoaXMuX2hhc0ZvY3VzID09PSBuZXdIYXNGb2N1cykgewogICAgICAgIC8vIG5vIGNoYW5nZQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9oYXNGb2N1cyA9IG5ld0hhc0ZvY3VzOwogICAgICBpZiAodGhpcy5fc2VsZWN0aW9uQ2hhbmdlTGlzdGVuZXIpIHsKICAgICAgICB0aGlzLl9zZWxlY3Rpb25DaGFuZ2VMaXN0ZW5lci5kaXNwb3NlKCk7CiAgICAgICAgdGhpcy5fc2VsZWN0aW9uQ2hhbmdlTGlzdGVuZXIgPSBudWxsOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9oYXNGb2N1cykgewogICAgICAgIHRoaXMuX3NlbGVjdGlvbkNoYW5nZUxpc3RlbmVyID0gdGhpcy5faW5zdGFsbFNlbGVjdGlvbkNoYW5nZUxpc3RlbmVyKCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX2hhc0ZvY3VzKSB7CiAgICAgICAgdGhpcy53cml0ZVNjcmVlblJlYWRlckNvbnRlbnQoJ2ZvY3VzZ2FpbicpOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9oYXNGb2N1cykgewogICAgICAgIHRoaXMuX29uRm9jdXMuZmlyZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX29uQmx1ci5maXJlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2V0QW5kV3JpdGVUZXh0QXJlYVN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0QW5kV3JpdGVUZXh0QXJlYVN0YXRlKHJlYXNvbiwgdGV4dEFyZWFTdGF0ZSkgewogICAgICBpZiAoIXRoaXMuX2hhc0ZvY3VzKSB7CiAgICAgICAgdGV4dEFyZWFTdGF0ZSA9IHRleHRBcmVhU3RhdGUuY29sbGFwc2VTZWxlY3Rpb24oKTsKICAgICAgfQogICAgICB0ZXh0QXJlYVN0YXRlLndyaXRlVG9UZXh0QXJlYShyZWFzb24sIHRoaXMuX3RleHRBcmVhLCB0aGlzLl9oYXNGb2N1cyk7CiAgICAgIHRoaXMuX3RleHRBcmVhU3RhdGUgPSB0ZXh0QXJlYVN0YXRlOwogICAgfQogIH0sIHsKICAgIGtleTogIndyaXRlU2NyZWVuUmVhZGVyQ29udGVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gd3JpdGVTY3JlZW5SZWFkZXJDb250ZW50KHJlYXNvbikgewogICAgICBpZiAodGhpcy5fY3VycmVudENvbXBvc2l0aW9uKSB7CiAgICAgICAgLy8gRG8gbm90IHdyaXRlIHRvIHRoZSB0ZXh0IGFyZWEgd2hlbiBkb2luZyBjb21wb3NpdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9zZXRBbmRXcml0ZVRleHRBcmVhU3RhdGUocmVhc29uLCB0aGlzLl9ob3N0LmdldFNjcmVlblJlYWRlckNvbnRlbnQodGhpcy5fdGV4dEFyZWFTdGF0ZSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9lbnN1cmVDbGlwYm9hcmRHZXRzRWRpdG9yU2VsZWN0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZW5zdXJlQ2xpcGJvYXJkR2V0c0VkaXRvclNlbGVjdGlvbihlKSB7CiAgICAgIHZhciBkYXRhVG9Db3B5ID0gdGhpcy5faG9zdC5nZXREYXRhVG9Db3B5KCk7CiAgICAgIHZhciBzdG9yZWRNZXRhZGF0YSA9IHsKICAgICAgICB2ZXJzaW9uOiAxLAogICAgICAgIGlzRnJvbUVtcHR5U2VsZWN0aW9uOiBkYXRhVG9Db3B5LmlzRnJvbUVtcHR5U2VsZWN0aW9uLAogICAgICAgIG11bHRpY3Vyc29yVGV4dDogZGF0YVRvQ29weS5tdWx0aWN1cnNvclRleHQsCiAgICAgICAgbW9kZTogZGF0YVRvQ29weS5tb2RlCiAgICAgIH07CiAgICAgIEluTWVtb3J5Q2xpcGJvYXJkTWV0YWRhdGFNYW5hZ2VyLklOU1RBTkNFLnNldCgKICAgICAgLy8gV2hlbiB3cml0aW5nICJMSU5FXHJcbiIgdG8gdGhlIGNsaXBib2FyZCBhbmQgdGhlbiBwYXN0aW5nLAogICAgICAvLyBGaXJlZm94IHBhc3RlcyAiTElORVxuIiwgc28gbGV0J3Mgd29yayBhcm91bmQgdGhpcyBxdWlyawogICAgICB0aGlzLl9icm93c2VyLmlzRmlyZWZveCA/IGRhdGFUb0NvcHkudGV4dC5yZXBsYWNlKC9cclxuL2csICdcbicpIDogZGF0YVRvQ29weS50ZXh0LCBzdG9yZWRNZXRhZGF0YSk7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKGUuY2xpcGJvYXJkRGF0YSkgewogICAgICAgIENsaXBib2FyZEV2ZW50VXRpbHMuc2V0VGV4dERhdGEoZS5jbGlwYm9hcmREYXRhLCBkYXRhVG9Db3B5LnRleHQsIGRhdGFUb0NvcHkuaHRtbCwgc3RvcmVkTWV0YWRhdGEpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBUZXh0QXJlYUlucHV0Owp9KERpc3Bvc2FibGUpOwp2YXIgQ2xpcGJvYXJkRXZlbnRVdGlscyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ2xpcGJvYXJkRXZlbnRVdGlscygpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGlwYm9hcmRFdmVudFV0aWxzKTsKICB9CiAgX2NyZWF0ZUNsYXNzKENsaXBib2FyZEV2ZW50VXRpbHMsIG51bGwsIFt7CiAgICBrZXk6ICJnZXRUZXh0RGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGV4dERhdGEoY2xpcGJvYXJkRGF0YSkgewogICAgICB2YXIgdGV4dCA9IGNsaXBib2FyZERhdGEuZ2V0RGF0YShNaW1lcy50ZXh0KTsKICAgICAgdmFyIG1ldGFkYXRhID0gbnVsbDsKICAgICAgdmFyIHJhd21ldGFkYXRhID0gY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd2c2NvZGUtZWRpdG9yLWRhdGEnKTsKICAgICAgaWYgKHR5cGVvZiByYXdtZXRhZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbWV0YWRhdGEgPSBKU09OLnBhcnNlKHJhd21ldGFkYXRhKTsKICAgICAgICAgIGlmIChtZXRhZGF0YS52ZXJzaW9uICE9PSAxKSB7CiAgICAgICAgICAgIG1ldGFkYXRhID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIC8vIG5vIHByb2JsZW0hCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PT0gMCAmJiBtZXRhZGF0YSA9PT0gbnVsbCAmJiBjbGlwYm9hcmREYXRhLmZpbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAvLyBubyB0ZXh0dWFsIGRhdGEgcGFzdGVkLCBnZW5lcmF0ZSB0ZXh0IGZyb20gZmlsZSBuYW1lcwogICAgICAgIHZhciBmaWxlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNsaXBib2FyZERhdGEuZmlsZXMsIDApOwogICAgICAgIHJldHVybiBbZmlsZXMubWFwKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lOwogICAgICAgIH0pLmpvaW4oJ1xuJyksIG51bGxdOwogICAgICB9CiAgICAgIHJldHVybiBbdGV4dCwgbWV0YWRhdGFdOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFRleHREYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUZXh0RGF0YShjbGlwYm9hcmREYXRhLCB0ZXh0LCBodG1sLCBtZXRhZGF0YSkgewogICAgICBjbGlwYm9hcmREYXRhLnNldERhdGEoTWltZXMudGV4dCwgdGV4dCk7CiAgICAgIGlmICh0eXBlb2YgaHRtbCA9PT0gJ3N0cmluZycpIHsKICAgICAgICBjbGlwYm9hcmREYXRhLnNldERhdGEoJ3RleHQvaHRtbCcsIGh0bWwpOwogICAgICB9CiAgICAgIGNsaXBib2FyZERhdGEuc2V0RGF0YSgndnNjb2RlLWVkaXRvci1kYXRhJywgSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEpKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIENsaXBib2FyZEV2ZW50VXRpbHM7Cn0oKTsKZXhwb3J0IHZhciBUZXh0QXJlYVdyYXBwZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlMikgewogIF9pbmhlcml0cyhUZXh0QXJlYVdyYXBwZXIsIF9EaXNwb3NhYmxlMik7CiAgdmFyIF9zdXBlcjIgPSBfY3JlYXRlU3VwZXIoVGV4dEFyZWFXcmFwcGVyKTsKICBmdW5jdGlvbiBUZXh0QXJlYVdyYXBwZXIoX2FjdHVhbCkgewogICAgdmFyIF90aGlzMzsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUZXh0QXJlYVdyYXBwZXIpOwogICAgX3RoaXMzID0gX3N1cGVyMi5jYWxsKHRoaXMpOwogICAgX3RoaXMzLl9hY3R1YWwgPSBfYWN0dWFsOwogICAgX3RoaXMzLm9uS2V5RG93biA9IF90aGlzMy5fcmVnaXN0ZXIoZG9tLmNyZWF0ZUV2ZW50RW1pdHRlcihfdGhpczMuX2FjdHVhbCwgJ2tleWRvd24nKSkuZXZlbnQ7CiAgICBfdGhpczMub25LZXlVcCA9IF90aGlzMy5fcmVnaXN0ZXIoZG9tLmNyZWF0ZUV2ZW50RW1pdHRlcihfdGhpczMuX2FjdHVhbCwgJ2tleXVwJykpLmV2ZW50OwogICAgX3RoaXMzLm9uQ29tcG9zaXRpb25TdGFydCA9IF90aGlzMy5fcmVnaXN0ZXIoZG9tLmNyZWF0ZUV2ZW50RW1pdHRlcihfdGhpczMuX2FjdHVhbCwgJ2NvbXBvc2l0aW9uc3RhcnQnKSkuZXZlbnQ7CiAgICBfdGhpczMub25Db21wb3NpdGlvblVwZGF0ZSA9IF90aGlzMy5fcmVnaXN0ZXIoZG9tLmNyZWF0ZUV2ZW50RW1pdHRlcihfdGhpczMuX2FjdHVhbCwgJ2NvbXBvc2l0aW9udXBkYXRlJykpLmV2ZW50OwogICAgX3RoaXMzLm9uQ29tcG9zaXRpb25FbmQgPSBfdGhpczMuX3JlZ2lzdGVyKGRvbS5jcmVhdGVFdmVudEVtaXR0ZXIoX3RoaXMzLl9hY3R1YWwsICdjb21wb3NpdGlvbmVuZCcpKS5ldmVudDsKICAgIF90aGlzMy5vbklucHV0ID0gX3RoaXMzLl9yZWdpc3Rlcihkb20uY3JlYXRlRXZlbnRFbWl0dGVyKF90aGlzMy5fYWN0dWFsLCAnaW5wdXQnKSkuZXZlbnQ7CiAgICBfdGhpczMub25DdXQgPSBfdGhpczMuX3JlZ2lzdGVyKGRvbS5jcmVhdGVFdmVudEVtaXR0ZXIoX3RoaXMzLl9hY3R1YWwsICdjdXQnKSkuZXZlbnQ7CiAgICBfdGhpczMub25Db3B5ID0gX3RoaXMzLl9yZWdpc3Rlcihkb20uY3JlYXRlRXZlbnRFbWl0dGVyKF90aGlzMy5fYWN0dWFsLCAnY29weScpKS5ldmVudDsKICAgIF90aGlzMy5vblBhc3RlID0gX3RoaXMzLl9yZWdpc3Rlcihkb20uY3JlYXRlRXZlbnRFbWl0dGVyKF90aGlzMy5fYWN0dWFsLCAncGFzdGUnKSkuZXZlbnQ7CiAgICBfdGhpczMub25Gb2N1cyA9IF90aGlzMy5fcmVnaXN0ZXIoZG9tLmNyZWF0ZUV2ZW50RW1pdHRlcihfdGhpczMuX2FjdHVhbCwgJ2ZvY3VzJykpLmV2ZW50OwogICAgX3RoaXMzLm9uQmx1ciA9IF90aGlzMy5fcmVnaXN0ZXIoZG9tLmNyZWF0ZUV2ZW50RW1pdHRlcihfdGhpczMuX2FjdHVhbCwgJ2JsdXInKSkuZXZlbnQ7CiAgICBfdGhpczMuX29uU3ludGhldGljVGFwID0gX3RoaXMzLl9yZWdpc3RlcihuZXcgRW1pdHRlcigpKTsKICAgIF90aGlzMy5vblN5bnRoZXRpY1RhcCA9IF90aGlzMy5fb25TeW50aGV0aWNUYXAuZXZlbnQ7CiAgICBfdGhpczMuX2lnbm9yZVNlbGVjdGlvbkNoYW5nZVRpbWUgPSAwOwogICAgX3RoaXMzLl9yZWdpc3Rlcihkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKF90aGlzMy5fYWN0dWFsLCBUZXh0QXJlYVN5bnRldGhpY0V2ZW50cy5UYXAsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzMy5fb25TeW50aGV0aWNUYXAuZmlyZSgpOwogICAgfSkpOwogICAgcmV0dXJuIF90aGlzMzsKICB9CiAgX2NyZWF0ZUNsYXNzKFRleHRBcmVhV3JhcHBlciwgW3sKICAgIGtleTogImhhc0ZvY3VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNGb2N1cygpIHsKICAgICAgdmFyIHNoYWRvd1Jvb3QgPSBkb20uZ2V0U2hhZG93Um9vdCh0aGlzLl9hY3R1YWwpOwogICAgICBpZiAoc2hhZG93Um9vdCkgewogICAgICAgIHJldHVybiBzaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMuX2FjdHVhbDsKICAgICAgfSBlbHNlIGlmIChkb20uaXNJbkRPTSh0aGlzLl9hY3R1YWwpKSB7CiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMuX2FjdHVhbDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRJZ25vcmVTZWxlY3Rpb25DaGFuZ2VUaW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRJZ25vcmVTZWxlY3Rpb25DaGFuZ2VUaW1lKHJlYXNvbikgewogICAgICB0aGlzLl9pZ25vcmVTZWxlY3Rpb25DaGFuZ2VUaW1lID0gRGF0ZS5ub3coKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJZ25vcmVTZWxlY3Rpb25DaGFuZ2VUaW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJZ25vcmVTZWxlY3Rpb25DaGFuZ2VUaW1lKCkgewogICAgICByZXR1cm4gdGhpcy5faWdub3JlU2VsZWN0aW9uQ2hhbmdlVGltZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXNldFNlbGVjdGlvbkNoYW5nZVRpbWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0U2VsZWN0aW9uQ2hhbmdlVGltZSgpIHsKICAgICAgdGhpcy5faWdub3JlU2VsZWN0aW9uQ2hhbmdlVGltZSA9IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VmFsdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKCkgewogICAgICAvLyBjb25zb2xlLmxvZygnY3VycmVudCB2YWx1ZTogJyArIHRoaXMuX3RleHRBcmVhLnZhbHVlKTsKICAgICAgcmV0dXJuIHRoaXMuX2FjdHVhbC52YWx1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUocmVhc29uLCB2YWx1ZSkgewogICAgICB2YXIgdGV4dEFyZWEgPSB0aGlzLl9hY3R1YWw7CiAgICAgIGlmICh0ZXh0QXJlYS52YWx1ZSA9PT0gdmFsdWUpIHsKICAgICAgICAvLyBObyBjaGFuZ2UKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coJ3JlYXNvbjogJyArIHJlYXNvbiArICcsIGN1cnJlbnQgdmFsdWU6ICcgKyB0ZXh0QXJlYS52YWx1ZSArICcgPT4gbmV3IHZhbHVlOiAnICsgdmFsdWUpOwogICAgICB0aGlzLnNldElnbm9yZVNlbGVjdGlvbkNoYW5nZVRpbWUoJ3NldFZhbHVlJyk7CiAgICAgIHRleHRBcmVhLnZhbHVlID0gdmFsdWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U2VsZWN0aW9uU3RhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNlbGVjdGlvblN0YXJ0KCkgewogICAgICByZXR1cm4gdGhpcy5fYWN0dWFsLnNlbGVjdGlvbkRpcmVjdGlvbiA9PT0gJ2JhY2t3YXJkJyA/IHRoaXMuX2FjdHVhbC5zZWxlY3Rpb25FbmQgOiB0aGlzLl9hY3R1YWwuc2VsZWN0aW9uU3RhcnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U2VsZWN0aW9uRW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZWxlY3Rpb25FbmQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9hY3R1YWwuc2VsZWN0aW9uRGlyZWN0aW9uID09PSAnYmFja3dhcmQnID8gdGhpcy5fYWN0dWFsLnNlbGVjdGlvblN0YXJ0IDogdGhpcy5fYWN0dWFsLnNlbGVjdGlvbkVuZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRTZWxlY3Rpb25SYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0U2VsZWN0aW9uUmFuZ2UocmVhc29uLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKSB7CiAgICAgIHZhciB0ZXh0QXJlYSA9IHRoaXMuX2FjdHVhbDsKICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBudWxsOwogICAgICB2YXIgc2hhZG93Um9vdCA9IGRvbS5nZXRTaGFkb3dSb290KHRleHRBcmVhKTsKICAgICAgaWYgKHNoYWRvd1Jvb3QpIHsKICAgICAgICBhY3RpdmVFbGVtZW50ID0gc2hhZG93Um9vdC5hY3RpdmVFbGVtZW50OwogICAgICB9IGVsc2UgewogICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwogICAgICB9CiAgICAgIHZhciBjdXJyZW50SXNGb2N1c2VkID0gYWN0aXZlRWxlbWVudCA9PT0gdGV4dEFyZWE7CiAgICAgIHZhciBjdXJyZW50U2VsZWN0aW9uU3RhcnQgPSB0ZXh0QXJlYS5zZWxlY3Rpb25TdGFydDsKICAgICAgdmFyIGN1cnJlbnRTZWxlY3Rpb25FbmQgPSB0ZXh0QXJlYS5zZWxlY3Rpb25FbmQ7CiAgICAgIGlmIChjdXJyZW50SXNGb2N1c2VkICYmIGN1cnJlbnRTZWxlY3Rpb25TdGFydCA9PT0gc2VsZWN0aW9uU3RhcnQgJiYgY3VycmVudFNlbGVjdGlvbkVuZCA9PT0gc2VsZWN0aW9uRW5kKSB7CiAgICAgICAgLy8gTm8gY2hhbmdlCiAgICAgICAgLy8gRmlyZWZveCBpZnJhbWUgYnVnIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvbW9uYWNvLWVkaXRvci9pc3N1ZXMvNjQzI2lzc3VlY29tbWVudC0zNjc4NzEzNzcKICAgICAgICBpZiAoYnJvd3Nlci5pc0ZpcmVmb3ggJiYgd2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7CiAgICAgICAgICB0ZXh0QXJlYS5mb2N1cygpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coJ3JlYXNvbjogJyArIHJlYXNvbiArICcsIHNldFNlbGVjdGlvblJhbmdlOiAnICsgc2VsZWN0aW9uU3RhcnQgKyAnIC0+ICcgKyBzZWxlY3Rpb25FbmQpOwogICAgICBpZiAoY3VycmVudElzRm9jdXNlZCkgewogICAgICAgIC8vIE5vIG5lZWQgdG8gZm9jdXMsIG9ubHkgbmVlZCB0byBjaGFuZ2UgdGhlIHNlbGVjdGlvbiByYW5nZQogICAgICAgIHRoaXMuc2V0SWdub3JlU2VsZWN0aW9uQ2hhbmdlVGltZSgnc2V0U2VsZWN0aW9uUmFuZ2UnKTsKICAgICAgICB0ZXh0QXJlYS5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTsKICAgICAgICBpZiAoYnJvd3Nlci5pc0ZpcmVmb3ggJiYgd2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7CiAgICAgICAgICB0ZXh0QXJlYS5mb2N1cygpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8gSWYgdGhlIGZvY3VzIGlzIG91dHNpZGUgdGhlIHRleHRhcmVhLCBicm93c2VycyB3aWxsIHRyeSByZWFsbHkgaGFyZCB0byByZXZlYWwgdGhlIHRleHRhcmVhLgogICAgICAvLyBIZXJlLCB3ZSB0cnkgdG8gdW5kbyB0aGUgYnJvd3NlcidzIGRlc3BlcmF0ZSByZXZlYWwuCiAgICAgIHRyeSB7CiAgICAgICAgdmFyIHNjcm9sbFN0YXRlID0gZG9tLnNhdmVQYXJlbnRzU2Nyb2xsVG9wKHRleHRBcmVhKTsKICAgICAgICB0aGlzLnNldElnbm9yZVNlbGVjdGlvbkNoYW5nZVRpbWUoJ3NldFNlbGVjdGlvblJhbmdlJyk7CiAgICAgICAgdGV4dEFyZWEuZm9jdXMoKTsKICAgICAgICB0ZXh0QXJlYS5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKTsKICAgICAgICBkb20ucmVzdG9yZVBhcmVudHNTY3JvbGxUb3AodGV4dEFyZWEsIHNjcm9sbFN0YXRlKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIC8vIFNvbWV0aW1lcyBJRSB0aHJvd3Mgd2hlbiBzZXR0aW5nIHNlbGVjdGlvbiAoZS5nLiB0ZXh0YXJlYSBpcyBvZmYtRE9NKQogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBUZXh0QXJlYVdyYXBwZXI7Cn0oRGlzcG9zYWJsZSk7"},{"version":3,"names":["browser","dom","StandardKeyboardEvent","RunOnceScheduler","Emitter","Disposable","Mimes","strings","TextAreaState","_debugComposition","Selection","TextAreaSyntethicEvents","Tap","CopyOptions","forceCopyWithSyntaxHighlighting","InMemoryClipboardMetadataManager","_lastState","lastCopiedValue","data","pastedText","INSTANCE","CompositionContext","_lastTypeTextLength","text","typeInput","replacePrevCharCnt","replaceNextCharCnt","positionDelta","length","TextAreaInput","_host","_textArea","_OS","_browser","_onFocus","_register","onFocus","event","_onBlur","onBlur","_onKeyDown","onKeyDown","_onKeyUp","onKeyUp","_onCut","onCut","_onPaste","onPaste","_onType","onType","_onCompositionStart","onCompositionStart","_onCompositionUpdate","onCompositionUpdate","_onCompositionEnd","onCompositionEnd","_onSelectionChangeRequest","onSelectionChangeRequest","_asyncTriggerCut","fire","_asyncFocusGainWriteScreenReaderContent","writeScreenReaderContent","_textAreaState","EMPTY","_selectionChangeListener","_hasFocus","_currentComposition","lastKeyDown","_e","e","keyCode","stopPropagation","equals","preventDefault","console","log","currentComposition","selectionStart","selectionEnd","value","substr","code","handleCompositionUpdate","isAndroid","newState","readFromTextArea","deduceAndroidCompositionInput","onInput","setIgnoreSelectionChangeTime","deduceInput","isHighSurrogate","charCodeAt","_ensureClipboardGetsEditorSelection","schedule","onCopy","clipboardData","ClipboardEventUtils","getTextData","metadata","get","hadFocus","_setHasFocus","isSafari","onSyntheticTap","previousSelectionChangeEventTime","addDisposableListener","document","isChrome","now","Date","delta1","delta2","getIgnoreSelectionChangeTime","resetSelectionChangeTime","selectionStartPosition","selectionEndPosition","newValue","getValue","newSelectionStart","getSelectionStart","newSelectionEnd","getSelectionEnd","_newSelectionStartPosition","deduceEditorPosition","newSelectionStartPosition","deduceModelPosition","_newSelectionEndPosition","newSelectionEndPosition","newSelection","lineNumber","column","dispose","refreshFocusState","hasFocus","newHasFocus","_installSelectionChangeListener","reason","textAreaState","collapseSelection","writeToTextArea","_setAndWriteTextAreaState","getScreenReaderContent","dataToCopy","getDataToCopy","storedMetadata","version","isFromEmptySelection","multicursorText","mode","set","isFirefox","replace","setTextData","html","getData","rawmetadata","JSON","parse","err","files","Array","prototype","slice","call","map","file","name","join","setData","stringify","TextAreaWrapper","_actual","createEventEmitter","_onSyntheticTap","_ignoreSelectionChangeTime","shadowRoot","getShadowRoot","activeElement","isInDOM","textArea","selectionDirection","currentIsFocused","currentSelectionStart","currentSelectionEnd","window","parent","focus","setSelectionRange","scrollState","saveParentsScrollTop","restoreParentsScrollTop"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaInput.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from '../../../base/browser/browser.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../base/common/mime.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { TextAreaState, _debugComposition } from './textAreaState.js';\nimport { Selection } from '../../common/core/selection.js';\nexport var TextAreaSyntethicEvents;\n(function (TextAreaSyntethicEvents) {\n    TextAreaSyntethicEvents.Tap = '-monaco-textarea-synthetic-tap';\n})(TextAreaSyntethicEvents || (TextAreaSyntethicEvents = {}));\nexport const CopyOptions = {\n    forceCopyWithSyntaxHighlighting: false\n};\n/**\n * Every time we write to the clipboard, we record a bit of extra metadata here.\n * Every time we read from the cipboard, if the text matches our last written text,\n * we can fetch the previous metadata.\n */\nexport class InMemoryClipboardMetadataManager {\n    constructor() {\n        this._lastState = null;\n    }\n    set(lastCopiedValue, data) {\n        this._lastState = { lastCopiedValue, data };\n    }\n    get(pastedText) {\n        if (this._lastState && this._lastState.lastCopiedValue === pastedText) {\n            // match!\n            return this._lastState.data;\n        }\n        this._lastState = null;\n        return null;\n    }\n}\nInMemoryClipboardMetadataManager.INSTANCE = new InMemoryClipboardMetadataManager();\nclass CompositionContext {\n    constructor() {\n        this._lastTypeTextLength = 0;\n    }\n    handleCompositionUpdate(text) {\n        text = text || '';\n        const typeInput = {\n            text: text,\n            replacePrevCharCnt: this._lastTypeTextLength,\n            replaceNextCharCnt: 0,\n            positionDelta: 0\n        };\n        this._lastTypeTextLength = text.length;\n        return typeInput;\n    }\n}\n/**\n * Writes screen reader content to the textarea and is able to analyze its input events to generate:\n *  - onCut\n *  - onPaste\n *  - onType\n *\n * Composition events are generated for presentation purposes (composition input is reflected in onType).\n */\nexport class TextAreaInput extends Disposable {\n    constructor(_host, _textArea, _OS, _browser) {\n        super();\n        this._host = _host;\n        this._textArea = _textArea;\n        this._OS = _OS;\n        this._browser = _browser;\n        this._onFocus = this._register(new Emitter());\n        this.onFocus = this._onFocus.event;\n        this._onBlur = this._register(new Emitter());\n        this.onBlur = this._onBlur.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onKeyUp = this._register(new Emitter());\n        this.onKeyUp = this._onKeyUp.event;\n        this._onCut = this._register(new Emitter());\n        this.onCut = this._onCut.event;\n        this._onPaste = this._register(new Emitter());\n        this.onPaste = this._onPaste.event;\n        this._onType = this._register(new Emitter());\n        this.onType = this._onType.event;\n        this._onCompositionStart = this._register(new Emitter());\n        this.onCompositionStart = this._onCompositionStart.event;\n        this._onCompositionUpdate = this._register(new Emitter());\n        this.onCompositionUpdate = this._onCompositionUpdate.event;\n        this._onCompositionEnd = this._register(new Emitter());\n        this.onCompositionEnd = this._onCompositionEnd.event;\n        this._onSelectionChangeRequest = this._register(new Emitter());\n        this.onSelectionChangeRequest = this._onSelectionChangeRequest.event;\n        this._asyncTriggerCut = this._register(new RunOnceScheduler(() => this._onCut.fire(), 0));\n        this._asyncFocusGainWriteScreenReaderContent = this._register(new RunOnceScheduler(() => this.writeScreenReaderContent('asyncFocusGain'), 0));\n        this._textAreaState = TextAreaState.EMPTY;\n        this._selectionChangeListener = null;\n        this.writeScreenReaderContent('ctor');\n        this._hasFocus = false;\n        this._currentComposition = null;\n        let lastKeyDown = null;\n        this._register(this._textArea.onKeyDown((_e) => {\n            const e = new StandardKeyboardEvent(_e);\n            if (e.keyCode === 109 /* KeyCode.KEY_IN_COMPOSITION */\n                || (this._currentComposition && e.keyCode === 1 /* KeyCode.Backspace */)) {\n                // Stop propagation for keyDown events if the IME is processing key input\n                e.stopPropagation();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                // Prevent default always for `Esc`, otherwise it will generate a keypress\n                // See https://msdn.microsoft.com/en-us/library/ie/ms536939(v=vs.85).aspx\n                e.preventDefault();\n            }\n            lastKeyDown = e;\n            this._onKeyDown.fire(e);\n        }));\n        this._register(this._textArea.onKeyUp((_e) => {\n            const e = new StandardKeyboardEvent(_e);\n            this._onKeyUp.fire(e);\n        }));\n        this._register(this._textArea.onCompositionStart((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionstart]`, e);\n            }\n            const currentComposition = new CompositionContext();\n            if (this._currentComposition) {\n                // simply reset the composition context\n                this._currentComposition = currentComposition;\n                return;\n            }\n            this._currentComposition = currentComposition;\n            if (this._OS === 2 /* OperatingSystem.Macintosh */\n                && lastKeyDown\n                && lastKeyDown.equals(109 /* KeyCode.KEY_IN_COMPOSITION */)\n                && this._textAreaState.selectionStart === this._textAreaState.selectionEnd\n                && this._textAreaState.selectionStart > 0\n                && this._textAreaState.value.substr(this._textAreaState.selectionStart - 1, 1) === e.data\n                && (lastKeyDown.code === 'ArrowRight' || lastKeyDown.code === 'ArrowLeft')) {\n                // Handling long press case on Chromium/Safari macOS + arrow key => pretend the character was selected\n                if (_debugComposition) {\n                    console.log(`[compositionstart] Handling long press case on macOS + arrow key`, e);\n                }\n                // Pretend the previous character was composed (in order to get it removed by subsequent compositionupdate events)\n                currentComposition.handleCompositionUpdate('x');\n                this._onCompositionStart.fire({ data: e.data });\n                return;\n            }\n            if (this._browser.isAndroid) {\n                // when tapping on the editor, Android enters composition mode to edit the current word\n                // so we cannot clear the textarea on Android and we must pretend the current word was selected\n                this._onCompositionStart.fire({ data: e.data });\n                return;\n            }\n            this._onCompositionStart.fire({ data: e.data });\n        }));\n        this._register(this._textArea.onCompositionUpdate((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionupdate]`, e);\n            }\n            const currentComposition = this._currentComposition;\n            if (!currentComposition) {\n                // should not be possible to receive a 'compositionupdate' without a 'compositionstart'\n                return;\n            }\n            if (this._browser.isAndroid) {\n                // On Android, the data sent with the composition update event is unusable.\n                // For example, if the cursor is in the middle of a word like Mic|osoft\n                // and Microsoft is chosen from the keyboard's suggestions, the e.data will contain \"Microsoft\".\n                // This is not really usable because it doesn't tell us where the edit began and where it ended.\n                const newState = TextAreaState.readFromTextArea(this._textArea);\n                const typeInput = TextAreaState.deduceAndroidCompositionInput(this._textAreaState, newState);\n                this._textAreaState = newState;\n                this._onType.fire(typeInput);\n                this._onCompositionUpdate.fire(e);\n                return;\n            }\n            const typeInput = currentComposition.handleCompositionUpdate(e.data);\n            this._textAreaState = TextAreaState.readFromTextArea(this._textArea);\n            this._onType.fire(typeInput);\n            this._onCompositionUpdate.fire(e);\n        }));\n        this._register(this._textArea.onCompositionEnd((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionend]`, e);\n            }\n            const currentComposition = this._currentComposition;\n            if (!currentComposition) {\n                // https://github.com/microsoft/monaco-editor/issues/1663\n                // On iOS 13.2, Chinese system IME randomly trigger an additional compositionend event with empty data\n                return;\n            }\n            this._currentComposition = null;\n            if (this._browser.isAndroid) {\n                // On Android, the data sent with the composition update event is unusable.\n                // For example, if the cursor is in the middle of a word like Mic|osoft\n                // and Microsoft is chosen from the keyboard's suggestions, the e.data will contain \"Microsoft\".\n                // This is not really usable because it doesn't tell us where the edit began and where it ended.\n                const newState = TextAreaState.readFromTextArea(this._textArea);\n                const typeInput = TextAreaState.deduceAndroidCompositionInput(this._textAreaState, newState);\n                this._textAreaState = newState;\n                this._onType.fire(typeInput);\n                this._onCompositionEnd.fire();\n                return;\n            }\n            const typeInput = currentComposition.handleCompositionUpdate(e.data);\n            this._textAreaState = TextAreaState.readFromTextArea(this._textArea);\n            this._onType.fire(typeInput);\n            this._onCompositionEnd.fire();\n        }));\n        this._register(this._textArea.onInput((e) => {\n            if (_debugComposition) {\n                console.log(`[input]`, e);\n            }\n            // Pretend here we touched the text area, as the `input` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received input event');\n            if (this._currentComposition) {\n                return;\n            }\n            const newState = TextAreaState.readFromTextArea(this._textArea);\n            const typeInput = TextAreaState.deduceInput(this._textAreaState, newState, /*couldBeEmojiInput*/ this._OS === 2 /* OperatingSystem.Macintosh */);\n            if (typeInput.replacePrevCharCnt === 0 && typeInput.text.length === 1 && strings.isHighSurrogate(typeInput.text.charCodeAt(0))) {\n                // Ignore invalid input but keep it around for next time\n                return;\n            }\n            this._textAreaState = newState;\n            if (typeInput.text !== ''\n                || typeInput.replacePrevCharCnt !== 0\n                || typeInput.replaceNextCharCnt !== 0\n                || typeInput.positionDelta !== 0) {\n                this._onType.fire(typeInput);\n            }\n        }));\n        // --- Clipboard operations\n        this._register(this._textArea.onCut((e) => {\n            // Pretend here we touched the text area, as the `cut` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received cut event');\n            this._ensureClipboardGetsEditorSelection(e);\n            this._asyncTriggerCut.schedule();\n        }));\n        this._register(this._textArea.onCopy((e) => {\n            this._ensureClipboardGetsEditorSelection(e);\n        }));\n        this._register(this._textArea.onPaste((e) => {\n            // Pretend here we touched the text area, as the `paste` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received paste event');\n            e.preventDefault();\n            if (!e.clipboardData) {\n                return;\n            }\n            let [text, metadata] = ClipboardEventUtils.getTextData(e.clipboardData);\n            if (!text) {\n                return;\n            }\n            // try the in-memory store\n            metadata = metadata || InMemoryClipboardMetadataManager.INSTANCE.get(text);\n            this._onPaste.fire({\n                text: text,\n                metadata: metadata\n            });\n        }));\n        this._register(this._textArea.onFocus(() => {\n            const hadFocus = this._hasFocus;\n            this._setHasFocus(true);\n            if (this._browser.isSafari && !hadFocus && this._hasFocus) {\n                // When \"tabbing into\" the textarea, immediately after dispatching the 'focus' event,\n                // Safari will always move the selection at offset 0 in the textarea\n                this._asyncFocusGainWriteScreenReaderContent.schedule();\n            }\n        }));\n        this._register(this._textArea.onBlur(() => {\n            if (this._currentComposition) {\n                // See https://github.com/microsoft/vscode/issues/112621\n                // where compositionend is not triggered when the editor\n                // is taken off-dom during a composition\n                // Clear the flag to be able to write to the textarea\n                this._currentComposition = null;\n                // Clear the textarea to avoid an unwanted cursor type\n                this.writeScreenReaderContent('blurWithoutCompositionEnd');\n                // Fire artificial composition end\n                this._onCompositionEnd.fire();\n            }\n            this._setHasFocus(false);\n        }));\n        this._register(this._textArea.onSyntheticTap(() => {\n            if (this._browser.isAndroid && this._currentComposition) {\n                // on Android, tapping does not cancel the current composition, so the\n                // textarea is stuck showing the old composition\n                // Clear the flag to be able to write to the textarea\n                this._currentComposition = null;\n                // Clear the textarea to avoid an unwanted cursor type\n                this.writeScreenReaderContent('tapWithoutCompositionEnd');\n                // Fire artificial composition end\n                this._onCompositionEnd.fire();\n            }\n        }));\n    }\n    _installSelectionChangeListener() {\n        // See https://github.com/microsoft/vscode/issues/27216 and https://github.com/microsoft/vscode/issues/98256\n        // When using a Braille display, it is possible for users to reposition the\n        // system caret. This is reflected in Chrome as a `selectionchange` event.\n        //\n        // The `selectionchange` event appears to be emitted under numerous other circumstances,\n        // so it is quite a challenge to distinguish a `selectionchange` coming in from a user\n        // using a Braille display from all the other cases.\n        //\n        // The problems with the `selectionchange` event are:\n        //  * the event is emitted when the textarea is focused programmatically -- textarea.focus()\n        //  * the event is emitted when the selection is changed in the textarea programmatically -- textarea.setSelectionRange(...)\n        //  * the event is emitted when the value of the textarea is changed programmatically -- textarea.value = '...'\n        //  * the event is emitted when tabbing into the textarea\n        //  * the event is emitted asynchronously (sometimes with a delay as high as a few tens of ms)\n        //  * the event sometimes comes in bursts for a single logical textarea operation\n        // `selectionchange` events often come multiple times for a single logical change\n        // so throttle multiple `selectionchange` events that burst in a short period of time.\n        let previousSelectionChangeEventTime = 0;\n        return dom.addDisposableListener(document, 'selectionchange', (e) => {\n            if (!this._hasFocus) {\n                return;\n            }\n            if (this._currentComposition) {\n                return;\n            }\n            if (!this._browser.isChrome) {\n                // Support only for Chrome until testing happens on other browsers\n                return;\n            }\n            const now = Date.now();\n            const delta1 = now - previousSelectionChangeEventTime;\n            previousSelectionChangeEventTime = now;\n            if (delta1 < 5) {\n                // received another `selectionchange` event within 5ms of the previous `selectionchange` event\n                // => ignore it\n                return;\n            }\n            const delta2 = now - this._textArea.getIgnoreSelectionChangeTime();\n            this._textArea.resetSelectionChangeTime();\n            if (delta2 < 100) {\n                // received a `selectionchange` event within 100ms since we touched the textarea\n                // => ignore it, since we caused it\n                return;\n            }\n            if (!this._textAreaState.selectionStartPosition || !this._textAreaState.selectionEndPosition) {\n                // Cannot correlate a position in the textarea with a position in the editor...\n                return;\n            }\n            const newValue = this._textArea.getValue();\n            if (this._textAreaState.value !== newValue) {\n                // Cannot correlate a position in the textarea with a position in the editor...\n                return;\n            }\n            const newSelectionStart = this._textArea.getSelectionStart();\n            const newSelectionEnd = this._textArea.getSelectionEnd();\n            if (this._textAreaState.selectionStart === newSelectionStart && this._textAreaState.selectionEnd === newSelectionEnd) {\n                // Nothing to do...\n                return;\n            }\n            const _newSelectionStartPosition = this._textAreaState.deduceEditorPosition(newSelectionStart);\n            const newSelectionStartPosition = this._host.deduceModelPosition(_newSelectionStartPosition[0], _newSelectionStartPosition[1], _newSelectionStartPosition[2]);\n            const _newSelectionEndPosition = this._textAreaState.deduceEditorPosition(newSelectionEnd);\n            const newSelectionEndPosition = this._host.deduceModelPosition(_newSelectionEndPosition[0], _newSelectionEndPosition[1], _newSelectionEndPosition[2]);\n            const newSelection = new Selection(newSelectionStartPosition.lineNumber, newSelectionStartPosition.column, newSelectionEndPosition.lineNumber, newSelectionEndPosition.column);\n            this._onSelectionChangeRequest.fire(newSelection);\n        });\n    }\n    dispose() {\n        super.dispose();\n        if (this._selectionChangeListener) {\n            this._selectionChangeListener.dispose();\n            this._selectionChangeListener = null;\n        }\n    }\n    focusTextArea() {\n        // Setting this._hasFocus and writing the screen reader content\n        // will result in a focus() and setSelectionRange() in the textarea\n        this._setHasFocus(true);\n        // If the editor is off DOM, focus cannot be really set, so let's double check that we have managed to set the focus\n        this.refreshFocusState();\n    }\n    isFocused() {\n        return this._hasFocus;\n    }\n    refreshFocusState() {\n        this._setHasFocus(this._textArea.hasFocus());\n    }\n    _setHasFocus(newHasFocus) {\n        if (this._hasFocus === newHasFocus) {\n            // no change\n            return;\n        }\n        this._hasFocus = newHasFocus;\n        if (this._selectionChangeListener) {\n            this._selectionChangeListener.dispose();\n            this._selectionChangeListener = null;\n        }\n        if (this._hasFocus) {\n            this._selectionChangeListener = this._installSelectionChangeListener();\n        }\n        if (this._hasFocus) {\n            this.writeScreenReaderContent('focusgain');\n        }\n        if (this._hasFocus) {\n            this._onFocus.fire();\n        }\n        else {\n            this._onBlur.fire();\n        }\n    }\n    _setAndWriteTextAreaState(reason, textAreaState) {\n        if (!this._hasFocus) {\n            textAreaState = textAreaState.collapseSelection();\n        }\n        textAreaState.writeToTextArea(reason, this._textArea, this._hasFocus);\n        this._textAreaState = textAreaState;\n    }\n    writeScreenReaderContent(reason) {\n        if (this._currentComposition) {\n            // Do not write to the text area when doing composition\n            return;\n        }\n        this._setAndWriteTextAreaState(reason, this._host.getScreenReaderContent(this._textAreaState));\n    }\n    _ensureClipboardGetsEditorSelection(e) {\n        const dataToCopy = this._host.getDataToCopy();\n        const storedMetadata = {\n            version: 1,\n            isFromEmptySelection: dataToCopy.isFromEmptySelection,\n            multicursorText: dataToCopy.multicursorText,\n            mode: dataToCopy.mode\n        };\n        InMemoryClipboardMetadataManager.INSTANCE.set(\n        // When writing \"LINE\\r\\n\" to the clipboard and then pasting,\n        // Firefox pastes \"LINE\\n\", so let's work around this quirk\n        (this._browser.isFirefox ? dataToCopy.text.replace(/\\r\\n/g, '\\n') : dataToCopy.text), storedMetadata);\n        e.preventDefault();\n        if (e.clipboardData) {\n            ClipboardEventUtils.setTextData(e.clipboardData, dataToCopy.text, dataToCopy.html, storedMetadata);\n        }\n    }\n}\nclass ClipboardEventUtils {\n    static getTextData(clipboardData) {\n        const text = clipboardData.getData(Mimes.text);\n        let metadata = null;\n        const rawmetadata = clipboardData.getData('vscode-editor-data');\n        if (typeof rawmetadata === 'string') {\n            try {\n                metadata = JSON.parse(rawmetadata);\n                if (metadata.version !== 1) {\n                    metadata = null;\n                }\n            }\n            catch (err) {\n                // no problem!\n            }\n        }\n        if (text.length === 0 && metadata === null && clipboardData.files.length > 0) {\n            // no textual data pasted, generate text from file names\n            const files = Array.prototype.slice.call(clipboardData.files, 0);\n            return [files.map(file => file.name).join('\\n'), null];\n        }\n        return [text, metadata];\n    }\n    static setTextData(clipboardData, text, html, metadata) {\n        clipboardData.setData(Mimes.text, text);\n        if (typeof html === 'string') {\n            clipboardData.setData('text/html', html);\n        }\n        clipboardData.setData('vscode-editor-data', JSON.stringify(metadata));\n    }\n}\nexport class TextAreaWrapper extends Disposable {\n    constructor(_actual) {\n        super();\n        this._actual = _actual;\n        this.onKeyDown = this._register(dom.createEventEmitter(this._actual, 'keydown')).event;\n        this.onKeyUp = this._register(dom.createEventEmitter(this._actual, 'keyup')).event;\n        this.onCompositionStart = this._register(dom.createEventEmitter(this._actual, 'compositionstart')).event;\n        this.onCompositionUpdate = this._register(dom.createEventEmitter(this._actual, 'compositionupdate')).event;\n        this.onCompositionEnd = this._register(dom.createEventEmitter(this._actual, 'compositionend')).event;\n        this.onInput = this._register(dom.createEventEmitter(this._actual, 'input')).event;\n        this.onCut = this._register(dom.createEventEmitter(this._actual, 'cut')).event;\n        this.onCopy = this._register(dom.createEventEmitter(this._actual, 'copy')).event;\n        this.onPaste = this._register(dom.createEventEmitter(this._actual, 'paste')).event;\n        this.onFocus = this._register(dom.createEventEmitter(this._actual, 'focus')).event;\n        this.onBlur = this._register(dom.createEventEmitter(this._actual, 'blur')).event;\n        this._onSyntheticTap = this._register(new Emitter());\n        this.onSyntheticTap = this._onSyntheticTap.event;\n        this._ignoreSelectionChangeTime = 0;\n        this._register(dom.addDisposableListener(this._actual, TextAreaSyntethicEvents.Tap, () => this._onSyntheticTap.fire()));\n    }\n    hasFocus() {\n        const shadowRoot = dom.getShadowRoot(this._actual);\n        if (shadowRoot) {\n            return shadowRoot.activeElement === this._actual;\n        }\n        else if (dom.isInDOM(this._actual)) {\n            return document.activeElement === this._actual;\n        }\n        else {\n            return false;\n        }\n    }\n    setIgnoreSelectionChangeTime(reason) {\n        this._ignoreSelectionChangeTime = Date.now();\n    }\n    getIgnoreSelectionChangeTime() {\n        return this._ignoreSelectionChangeTime;\n    }\n    resetSelectionChangeTime() {\n        this._ignoreSelectionChangeTime = 0;\n    }\n    getValue() {\n        // console.log('current value: ' + this._textArea.value);\n        return this._actual.value;\n    }\n    setValue(reason, value) {\n        const textArea = this._actual;\n        if (textArea.value === value) {\n            // No change\n            return;\n        }\n        // console.log('reason: ' + reason + ', current value: ' + textArea.value + ' => new value: ' + value);\n        this.setIgnoreSelectionChangeTime('setValue');\n        textArea.value = value;\n    }\n    getSelectionStart() {\n        return this._actual.selectionDirection === 'backward' ? this._actual.selectionEnd : this._actual.selectionStart;\n    }\n    getSelectionEnd() {\n        return this._actual.selectionDirection === 'backward' ? this._actual.selectionStart : this._actual.selectionEnd;\n    }\n    setSelectionRange(reason, selectionStart, selectionEnd) {\n        const textArea = this._actual;\n        let activeElement = null;\n        const shadowRoot = dom.getShadowRoot(textArea);\n        if (shadowRoot) {\n            activeElement = shadowRoot.activeElement;\n        }\n        else {\n            activeElement = document.activeElement;\n        }\n        const currentIsFocused = (activeElement === textArea);\n        const currentSelectionStart = textArea.selectionStart;\n        const currentSelectionEnd = textArea.selectionEnd;\n        if (currentIsFocused && currentSelectionStart === selectionStart && currentSelectionEnd === selectionEnd) {\n            // No change\n            // Firefox iframe bug https://github.com/microsoft/monaco-editor/issues/643#issuecomment-367871377\n            if (browser.isFirefox && window.parent !== window) {\n                textArea.focus();\n            }\n            return;\n        }\n        // console.log('reason: ' + reason + ', setSelectionRange: ' + selectionStart + ' -> ' + selectionEnd);\n        if (currentIsFocused) {\n            // No need to focus, only need to change the selection range\n            this.setIgnoreSelectionChangeTime('setSelectionRange');\n            textArea.setSelectionRange(selectionStart, selectionEnd);\n            if (browser.isFirefox && window.parent !== window) {\n                textArea.focus();\n            }\n            return;\n        }\n        // If the focus is outside the textarea, browsers will try really hard to reveal the textarea.\n        // Here, we try to undo the browser's desperate reveal.\n        try {\n            const scrollState = dom.saveParentsScrollTop(textArea);\n            this.setIgnoreSelectionChangeTime('setSelectionRange');\n            textArea.focus();\n            textArea.setSelectionRange(selectionStart, selectionEnd);\n            dom.restoreParentsScrollTop(textArea, scrollState);\n        }\n        catch (e) {\n            // Sometimes IE throws when setting selection (e.g. textarea is off-DOM)\n        }\n    }\n}\n"],"mappings":"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"}]}