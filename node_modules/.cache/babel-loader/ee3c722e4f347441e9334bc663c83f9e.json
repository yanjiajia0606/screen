{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/subgroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/subgroup.vue","mtime":1668494281039},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy/ms6jlhozoh6rlrprkuYnnu4Tku7YKaW1wb3J0IGNvbXBvbmVudHMgZnJvbSAnQC9jb21wb25lbnRzLyc7CmltcG9ydCBjcnlwdG8gZnJvbSAnQC91dGlscy9jcnlwdG8nOwppbXBvcnQgeyBkeW5hbWljU3FsIH0gZnJvbSAnQC9hcGkvZGInOwppbXBvcnQgeyBnZXRPYmogYXMgZ2V0UmVjb3JkT2JqIH0gZnJvbSAnQC9hcGkvcmVjb3JkJzsKaW1wb3J0IHsgZ2V0RnVuY3Rpb24gfSBmcm9tICdAL3V0aWxzL3V0aWxzJzsKaW1wb3J0IGNvbW1vbiBmcm9tICdAL2NvbmZpZyc7CmltcG9ydCBlY2hhcnRDb21wb25lbnRzIGZyb20gJy4uLy4uL2VjaGFydC8nOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnc3ViZ3JvdXAnLAogIGluamVjdDogWydjb250YWluJywgJ2NvbnRhaW5lciddLAogIHByb3ZpZGU6IGZ1bmN0aW9uIHByb3ZpZGUoKSB7CiAgICByZXR1cm4gewogICAgICBjb250YWluOiB0aGlzLmNvbnRhaW4sCiAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiBjb21wb25lbnRzLAogIHByb3BzOiB7CiAgICBuYXY6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNxbEZvcm1hdHRlcjogZHluYW1pY1NxbCwKICAgICAgcmVjb3JkRm9ybWF0dGVyOiBnZXRSZWNvcmRPYmosCiAgICAgIGNvbW1vbjogY29tbW9uCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHdpbmRvdy50aHNzID0gdGhpczsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgT2JqZWN0LmtleXMoZWNoYXJ0Q29tcG9uZW50cykubWFwKGZ1bmN0aW9uIChlbGUpIHsKICAgICAgICB2YXIgY29tcG9uZW50ID0gZWNoYXJ0Q29tcG9uZW50c1tlbGVdOwogICAgICAgIFZ1ZS5jb21wb25lbnQoY29tcG9uZW50Lm5hbWUsIGNvbXBvbmVudCk7CiAgICAgIH0pOwogICAgICB0aGlzLmdldEZ1bmN0aW9uID0gZ2V0RnVuY3Rpb247CiAgICB9LAogICAgZ2V0SXRlbU9iajogZnVuY3Rpb24gZ2V0SXRlbU9iaigpIHsKICAgICAgdmFyIGxpc3QgPSB0aGlzLiRyZWZzW3RoaXMuY29tbW9uLk5BTUUgKyB0aGlzLmNvbnRhaW4uYWN0aXZlT2JqLmluZGV4XSB8fCBbXTsKICAgICAgcmV0dXJuIGxpc3RbMF07CiAgICB9LAogICAgLy/liLfmlrDmlbDmja4KICAgIGhhbmRsZVJlZnJlc2g6IGZ1bmN0aW9uIGhhbmRsZVJlZnJlc2goKSB7CiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmdldEl0ZW1PYmooKTsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiByZXN1bHQudXBkYXRlRGF0YSgpOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgIH0sCiAgICAvL+iOt+WPluWvueixoQogICAgZ2V0RHJhZ09iajogZnVuY3Rpb24gZ2V0RHJhZ09iaih2YWwpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJlZnNbIiIuY29uY2F0KHRoaXMuY29tbW9uLkRFQUZOQU1FKS5jb25jYXQodmFsKV07CiAgICB9LAogICAgaGFuZGxlTW92ZTogZnVuY3Rpb24gaGFuZGxlTW92ZShfcmVmKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBpbmRleCA9IF9yZWYuaW5kZXgsCiAgICAgICAgbGVmdCA9IF9yZWYubGVmdCwKICAgICAgICB0b3AgPSBfcmVmLnRvcDsKICAgICAgaWYgKHRoaXMuY29udGFpbi5hY3RpdmVJbmRleCAhPT0gaW5kZXgpIHJldHVybjsKICAgICAgdGhpcy5jb250YWluLmFjdGl2ZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChfdGhpcy5jb250YWluLmFjdGl2ZUluZGV4ID09PSBpdGVtLmluZGV4KSByZXR1cm47CiAgICAgICAgaXRlbS5sZWZ0ID0gaXRlbS5sZWZ0ICsgbGVmdDsKICAgICAgICBpdGVtLnRvcCA9IGl0ZW0udG9wICsgdG9wOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVPdmVyOiBmdW5jdGlvbiBoYW5kbGVPdmVyKF9yZWYyKSB7CiAgICAgIHZhciBpbmRleCA9IF9yZWYyLmluZGV4OwogICAgICB0aGlzLmNvbnRhaW4ub3ZlcmFjdGl2ZSA9IGluZGV4OwogICAgfSwKICAgIGhhbmRsZUZvY3VzOiBmdW5jdGlvbiBoYW5kbGVGb2N1cyhfcmVmMykgewogICAgICB2YXIgaW5kZXggPSBfcmVmMy5pbmRleDsKICAgICAgdGhpcy5jb250YWluLmFjdGl2ZUluZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMuY29udGFpbmVyLmdyYWRlRmxhZyA9IHRydWU7CiAgICAgIHRoaXMuY29udGFpbi5zZWxlY3ROYXYoaW5kZXgpOwogICAgfSwKICAgIGhhbmRsZUJsdXI6IGZ1bmN0aW9uIGhhbmRsZUJsdXIoX3JlZjQpIHsKICAgICAgdmFyIGluZGV4ID0gX3JlZjQuaW5kZXgsCiAgICAgICAgbGVmdCA9IF9yZWY0LmxlZnQsCiAgICAgICAgdG9wID0gX3JlZjQudG9wLAogICAgICAgIHdpZHRoID0gX3JlZjQud2lkdGgsCiAgICAgICAgaGVpZ2h0ID0gX3JlZjQuaGVpZ2h0OwogICAgICBpZiAoaW5kZXggIT09IHRoaXMuY29udGFpbi5hY3RpdmVJbmRleCkgcmV0dXJuOwogICAgICB0aGlzLmNvbnRhaW5lci5ncmFkZUZsYWcgPSBmYWxzZTsKICAgICAgdGhpcy4kc2V0KHRoaXMuY29udGFpbi5hY3RpdmVPYmouY29tcG9uZW50LCAnd2lkdGgnLCB3aWR0aCk7CiAgICAgIHRoaXMuJHNldCh0aGlzLmNvbnRhaW4uYWN0aXZlT2JqLmNvbXBvbmVudCwgJ2hlaWdodCcsIGhlaWdodCk7CiAgICAgIHRoaXMuJHNldCh0aGlzLmNvbnRhaW4uYWN0aXZlT2JqLCAnbGVmdCcsIGxlZnQpOwogICAgICB0aGlzLiRzZXQodGhpcy5jb250YWluLmFjdGl2ZU9iaiwgJ3RvcCcsIHRvcCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA;EACAC;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;IACA;EACA;EACAC;IACAC;MACAC;QACA;QACAC;MACA;MACA;IACA;IACAC;MACA,WACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAAC;QAAAC;MACA;MACA;QACA;QACAC;QACAA;MACA;IACA;IACAC;MAAA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;IACA;IACAC;MAAA;QAAAL;QAAAC;QAAAK;QAAAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA","names":["name","inject","provide","contain","container","components","props","nav","type","default","data","sqlFormatter","recordFormatter","common","created","window","methods","init","Object","Vue","getItemObj","handleRefresh","getDragObj","handleMove","left","top","item","handleOver","handleFocus","handleBlur","width","height"],"sourceRoot":"src/page/group","sources":["subgroup.vue"],"sourcesContent":["<template>\n  <div>\n    <template v-for=\"item in nav\">\n      <div\n        :key=\"item.index\"\n        v-if=\"!item.children\"\n        v-contextmenu=\"{\n          id: contain.menuId,\n          event: contain.handleContextMenu,\n          value: item,\n        }\"\n      >\n        <avue-draggable\n          v-bind=\"item\"\n          :scale=\"container.stepScale\"\n          :disabled=\"!contain.menuFlag\"\n          :step=\"container.stepScale\"\n          :width=\"item.component.width\"\n          :height=\"item.component.height\"\n          :ref=\"common.DEAFNAME + item.index\"\n          :id=\"common.DEAFNAME + item.index\"\n          :active-flag=\"contain.active.includes(item.index)\"\n          v-show=\"!item.display\"\n          @move=\"handleMove\"\n          @over=\"handleOver\"\n          @focus=\"handleFocus\"\n          @blur=\"handleBlur\"\n        >\n          <component\n            :ref=\"common.NAME + item.index\"\n            :id=\"common.NAME + item.index\"\n            :is=\"common.COMPNAME + item.component.name\"\n            v-bind=\"item\"\n            :component=\"item.component\"\n            :data-formatter=\"getFunction(item.dataFormatter)\"\n            :click-formatter=\"getFunction(item.clickFormatter, true)\"\n            :echart-formatter=\"getFunction(item.echartFormatter)\"\n            :label-formatter=\"getFunction(item.labelFormatter)\"\n            :styles-formatter=\"getFunction(item.stylesFormatter)\"\n            :formatter=\"getFunction(item.formatter)\"\n            :sql-formatter=\"sqlFormatter\"\n            :record-formatter=\"recordFormatter\"\n            :width=\"item.component.width\"\n            :height=\"item.component.height\"\n            :disabled=\"!contain.menuFlag\"\n            :scale=\"container.stepScale\"\n            title=\"\"\n          />\n        </avue-draggable>\n        <subgroup :nav=\"item.children\"></subgroup>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\n//注册自定义组件\nimport components from '@/components/'\nimport crypto from '@/utils/crypto'\nimport { dynamicSql } from '@/api/db'\nimport { getObj as getRecordObj } from '@/api/record'\nimport { getFunction } from '@/utils/utils'\nimport common from '@/config'\nimport echartComponents from '../../echart/'\nimport Vue from 'vue'\nexport default {\n  name: 'subgroup',\n  inject: ['contain', 'container'],\n  provide() {\n    return {\n      contain: this.contain,\n      container: this.container,\n    }\n  },\n  components: components,\n  props: {\n    nav: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n  },\n  data() {\n    return {\n      sqlFormatter: dynamicSql,\n      recordFormatter: getRecordObj,\n      common: common,\n    }\n  },\n  created() {\n    window.thss = this\n    this.init()\n  },\n  methods: {\n    init() {\n      Object.keys(echartComponents).map((ele) => {\n        let component = echartComponents[ele]\n        Vue.component(component.name, component)\n      })\n      this.getFunction = getFunction\n    },\n    getItemObj() {\n      let list =\n        this.$refs[this.common.NAME + this.contain.activeObj.index] || []\n      return list[0]\n    },\n    //刷新数据\n    handleRefresh() {\n      let result = this.getItemObj()\n      if (result) {\n        return result.updateData()\n      }\n      return Promise.resolve()\n    },\n    //获取对象\n    getDragObj(val) {\n      return this.$refs[`${this.common.DEAFNAME}${val}`]\n    },\n    handleMove({ index, left, top }) {\n      if (this.contain.activeIndex !== index) return\n      this.contain.activeList.forEach((item) => {\n        if (this.contain.activeIndex === item.index) return\n        item.left = item.left + left\n        item.top = item.top + top\n      })\n    },\n    handleOver({ index }) {\n      this.contain.overactive = index\n    },\n    handleFocus({ index }) {\n      this.contain.activeIndex = index\n      this.container.gradeFlag = true\n      this.contain.selectNav(index)\n    },\n    handleBlur({ index, left, top, width, height }) {\n      if (index !== this.contain.activeIndex) return\n      this.container.gradeFlag = false\n      this.$set(this.contain.activeObj.component, 'width', width)\n      this.$set(this.contain.activeObj.component, 'height', height)\n      this.$set(this.contain.activeObj, 'left', left)\n      this.$set(this.contain.activeObj, 'top', top)\n    },\n  },\n}\n</script>\n"]}]}