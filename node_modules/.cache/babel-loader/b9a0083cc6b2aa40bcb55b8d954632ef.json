{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50ZXN0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KaW1wb3J0IHsgdHJhbnNmb3JtRXJyb3JGb3JTZXJpYWxpemF0aW9uIH0gZnJvbSAnLi4vZXJyb3JzLmpzJzsKaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJy4uL2V2ZW50LmpzJzsKaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4uL2xpZmVjeWNsZS5qcyc7CmltcG9ydCB7IGdsb2JhbHMsIGlzV2ViIH0gZnJvbSAnLi4vcGxhdGZvcm0uanMnOwppbXBvcnQgKiBhcyB0eXBlcyBmcm9tICcuLi90eXBlcy5qcyc7CmltcG9ydCAqIGFzIHN0cmluZ3MgZnJvbSAnLi4vc3RyaW5ncy5qcyc7CnZhciBJTklUSUFMSVpFID0gJyRpbml0aWFsaXplJzsKdmFyIHdlYldvcmtlcldhcm5pbmdMb2dnZWQgPSBmYWxzZTsKZXhwb3J0IGZ1bmN0aW9uIGxvZ09uY2VXZWJXb3JrZXJXYXJuaW5nKGVycikgewogIGlmICghaXNXZWIpIHsKICAgIC8vIHJ1bm5pbmcgdGVzdHMKICAgIHJldHVybjsKICB9CiAgaWYgKCF3ZWJXb3JrZXJXYXJuaW5nTG9nZ2VkKSB7CiAgICB3ZWJXb3JrZXJXYXJuaW5nTG9nZ2VkID0gdHJ1ZTsKICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGNyZWF0ZSB3ZWIgd29ya2VyKHMpLiBGYWxsaW5nIGJhY2sgdG8gbG9hZGluZyB3ZWIgd29ya2VyIGNvZGUgaW4gbWFpbiB0aHJlYWQsIHdoaWNoIG1pZ2h0IGNhdXNlIFVJIGZyZWV6ZXMuIFBsZWFzZSBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9tb25hY28tZWRpdG9yI2ZhcScpOwogIH0KICBjb25zb2xlLndhcm4oZXJyLm1lc3NhZ2UpOwp9CnZhciBSZXF1ZXN0TWVzc2FnZSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlQ2xhc3MoZnVuY3Rpb24gUmVxdWVzdE1lc3NhZ2UodnNXb3JrZXIsIHJlcSwgbWV0aG9kLCBhcmdzKSB7CiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlcXVlc3RNZXNzYWdlKTsKICB0aGlzLnZzV29ya2VyID0gdnNXb3JrZXI7CiAgdGhpcy5yZXEgPSByZXE7CiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7CiAgdGhpcy5hcmdzID0gYXJnczsKICB0aGlzLnR5cGUgPSAwIC8qIE1lc3NhZ2VUeXBlLlJlcXVlc3QgKi87Cn0pOwp2YXIgUmVwbHlNZXNzYWdlID0gLyojX19QVVJFX18qL19jcmVhdGVDbGFzcyhmdW5jdGlvbiBSZXBseU1lc3NhZ2UodnNXb3JrZXIsIHNlcSwgcmVzLCBlcnIpIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVwbHlNZXNzYWdlKTsKICB0aGlzLnZzV29ya2VyID0gdnNXb3JrZXI7CiAgdGhpcy5zZXEgPSBzZXE7CiAgdGhpcy5yZXMgPSByZXM7CiAgdGhpcy5lcnIgPSBlcnI7CiAgdGhpcy50eXBlID0gMSAvKiBNZXNzYWdlVHlwZS5SZXBseSAqLzsKfSk7CnZhciBTdWJzY3JpYmVFdmVudE1lc3NhZ2UgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUNsYXNzKGZ1bmN0aW9uIFN1YnNjcmliZUV2ZW50TWVzc2FnZSh2c1dvcmtlciwgcmVxLCBldmVudE5hbWUsIGFyZykgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWJzY3JpYmVFdmVudE1lc3NhZ2UpOwogIHRoaXMudnNXb3JrZXIgPSB2c1dvcmtlcjsKICB0aGlzLnJlcSA9IHJlcTsKICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTsKICB0aGlzLmFyZyA9IGFyZzsKICB0aGlzLnR5cGUgPSAyIC8qIE1lc3NhZ2VUeXBlLlN1YnNjcmliZUV2ZW50ICovOwp9KTsKdmFyIEV2ZW50TWVzc2FnZSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlQ2xhc3MoZnVuY3Rpb24gRXZlbnRNZXNzYWdlKHZzV29ya2VyLCByZXEsIGV2ZW50KSB7CiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50TWVzc2FnZSk7CiAgdGhpcy52c1dvcmtlciA9IHZzV29ya2VyOwogIHRoaXMucmVxID0gcmVxOwogIHRoaXMuZXZlbnQgPSBldmVudDsKICB0aGlzLnR5cGUgPSAzIC8qIE1lc3NhZ2VUeXBlLkV2ZW50ICovOwp9KTsKdmFyIFVuc3Vic2NyaWJlRXZlbnRNZXNzYWdlID0gLyojX19QVVJFX18qL19jcmVhdGVDbGFzcyhmdW5jdGlvbiBVbnN1YnNjcmliZUV2ZW50TWVzc2FnZSh2c1dvcmtlciwgcmVxKSB7CiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVuc3Vic2NyaWJlRXZlbnRNZXNzYWdlKTsKICB0aGlzLnZzV29ya2VyID0gdnNXb3JrZXI7CiAgdGhpcy5yZXEgPSByZXE7CiAgdGhpcy50eXBlID0gNCAvKiBNZXNzYWdlVHlwZS5VbnN1YnNjcmliZUV2ZW50ICovOwp9KTsKdmFyIFNpbXBsZVdvcmtlclByb3RvY29sID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTaW1wbGVXb3JrZXJQcm90b2NvbChoYW5kbGVyKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2ltcGxlV29ya2VyUHJvdG9jb2wpOwogICAgdGhpcy5fd29ya2VySWQgPSAtMTsKICAgIHRoaXMuX2hhbmRsZXIgPSBoYW5kbGVyOwogICAgdGhpcy5fbGFzdFNlbnRSZXEgPSAwOwogICAgdGhpcy5fcGVuZGluZ1JlcGxpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgdGhpcy5fcGVuZGluZ0VtaXR0ZXJzID0gbmV3IE1hcCgpOwogICAgdGhpcy5fcGVuZGluZ0V2ZW50cyA9IG5ldyBNYXAoKTsKICB9CiAgX2NyZWF0ZUNsYXNzKFNpbXBsZVdvcmtlclByb3RvY29sLCBbewogICAga2V5OiAic2V0V29ya2VySWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFdvcmtlcklkKHdvcmtlcklkKSB7CiAgICAgIHRoaXMuX3dvcmtlcklkID0gd29ya2VySWQ7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VuZE1lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRNZXNzYWdlKG1ldGhvZCwgYXJncykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcmVxID0gU3RyaW5nKCsrdGhpcy5fbGFzdFNlbnRSZXEpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLl9wZW5kaW5nUmVwbGllc1tyZXFdID0gewogICAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZSwKICAgICAgICAgIHJlamVjdDogcmVqZWN0CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5fc2VuZChuZXcgUmVxdWVzdE1lc3NhZ2UoX3RoaXMuX3dvcmtlcklkLCByZXEsIG1ldGhvZCwgYXJncykpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsaXN0ZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxpc3RlbihldmVudE5hbWUsIGFyZykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHJlcSA9IG51bGw7CiAgICAgIHZhciBlbWl0dGVyID0gbmV3IEVtaXR0ZXIoewogICAgICAgIG9uRmlyc3RMaXN0ZW5lckFkZDogZnVuY3Rpb24gb25GaXJzdExpc3RlbmVyQWRkKCkgewogICAgICAgICAgcmVxID0gU3RyaW5nKCsrX3RoaXMyLl9sYXN0U2VudFJlcSk7CiAgICAgICAgICBfdGhpczIuX3BlbmRpbmdFbWl0dGVycy5zZXQocmVxLCBlbWl0dGVyKTsKICAgICAgICAgIF90aGlzMi5fc2VuZChuZXcgU3Vic2NyaWJlRXZlbnRNZXNzYWdlKF90aGlzMi5fd29ya2VySWQsIHJlcSwgZXZlbnROYW1lLCBhcmcpKTsKICAgICAgICB9LAogICAgICAgIG9uTGFzdExpc3RlbmVyUmVtb3ZlOiBmdW5jdGlvbiBvbkxhc3RMaXN0ZW5lclJlbW92ZSgpIHsKICAgICAgICAgIF90aGlzMi5fcGVuZGluZ0VtaXR0ZXJzLmRlbGV0ZShyZXEpOwogICAgICAgICAgX3RoaXMyLl9zZW5kKG5ldyBVbnN1YnNjcmliZUV2ZW50TWVzc2FnZShfdGhpczIuX3dvcmtlcklkLCByZXEpKTsKICAgICAgICAgIHJlcSA9IG51bGw7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGVtaXR0ZXIuZXZlbnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlTWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShtZXNzYWdlKSB7CiAgICAgIGlmICghbWVzc2FnZSB8fCAhbWVzc2FnZS52c1dvcmtlcikgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5fd29ya2VySWQgIT09IC0xICYmIG1lc3NhZ2UudnNXb3JrZXIgIT09IHRoaXMuX3dvcmtlcklkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX2hhbmRsZU1lc3NhZ2UobWVzc2FnZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhbmRsZU1lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVNZXNzYWdlKG1zZykgewogICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CiAgICAgICAgY2FzZSAxIC8qIE1lc3NhZ2VUeXBlLlJlcGx5ICovOgogICAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlcGx5TWVzc2FnZShtc2cpOwogICAgICAgIGNhc2UgMCAvKiBNZXNzYWdlVHlwZS5SZXF1ZXN0ICovOgogICAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlcXVlc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgY2FzZSAyIC8qIE1lc3NhZ2VUeXBlLlN1YnNjcmliZUV2ZW50ICovOgogICAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVN1YnNjcmliZUV2ZW50TWVzc2FnZShtc2cpOwogICAgICAgIGNhc2UgMyAvKiBNZXNzYWdlVHlwZS5FdmVudCAqLzoKICAgICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVFdmVudE1lc3NhZ2UobXNnKTsKICAgICAgICBjYXNlIDQgLyogTWVzc2FnZVR5cGUuVW5zdWJzY3JpYmVFdmVudCAqLzoKICAgICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVVbnN1YnNjcmliZUV2ZW50TWVzc2FnZShtc2cpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhbmRsZVJlcGx5TWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJlcGx5TWVzc2FnZShyZXBseU1lc3NhZ2UpIHsKICAgICAgaWYgKCF0aGlzLl9wZW5kaW5nUmVwbGllc1tyZXBseU1lc3NhZ2Uuc2VxXSkgewogICAgICAgIGNvbnNvbGUud2FybignR290IHJlcGx5IHRvIHVua25vd24gc2VxJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciByZXBseSA9IHRoaXMuX3BlbmRpbmdSZXBsaWVzW3JlcGx5TWVzc2FnZS5zZXFdOwogICAgICBkZWxldGUgdGhpcy5fcGVuZGluZ1JlcGxpZXNbcmVwbHlNZXNzYWdlLnNlcV07CiAgICAgIGlmIChyZXBseU1lc3NhZ2UuZXJyKSB7CiAgICAgICAgdmFyIGVyciA9IHJlcGx5TWVzc2FnZS5lcnI7CiAgICAgICAgaWYgKHJlcGx5TWVzc2FnZS5lcnIuJGlzRXJyb3IpIHsKICAgICAgICAgIGVyciA9IG5ldyBFcnJvcigpOwogICAgICAgICAgZXJyLm5hbWUgPSByZXBseU1lc3NhZ2UuZXJyLm5hbWU7CiAgICAgICAgICBlcnIubWVzc2FnZSA9IHJlcGx5TWVzc2FnZS5lcnIubWVzc2FnZTsKICAgICAgICAgIGVyci5zdGFjayA9IHJlcGx5TWVzc2FnZS5lcnIuc3RhY2s7CiAgICAgICAgfQogICAgICAgIHJlcGx5LnJlamVjdChlcnIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXBseS5yZXNvbHZlKHJlcGx5TWVzc2FnZS5yZXMpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9oYW5kbGVSZXF1ZXN0TWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJlcXVlc3RNZXNzYWdlKHJlcXVlc3RNZXNzYWdlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgcmVxID0gcmVxdWVzdE1lc3NhZ2UucmVxOwogICAgICB2YXIgcmVzdWx0ID0gdGhpcy5faGFuZGxlci5oYW5kbGVNZXNzYWdlKHJlcXVlc3RNZXNzYWdlLm1ldGhvZCwgcmVxdWVzdE1lc3NhZ2UuYXJncyk7CiAgICAgIHJlc3VsdC50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgX3RoaXMzLl9zZW5kKG5ldyBSZXBseU1lc3NhZ2UoX3RoaXMzLl93b3JrZXJJZCwgcmVxLCByLCB1bmRlZmluZWQpKTsKICAgICAgfSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoZS5kZXRhaWwgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgICAgLy8gTG9hZGluZyBlcnJvcnMgaGF2ZSBhIGRldGFpbCBwcm9wZXJ0eSB0aGF0IHBvaW50cyB0byB0aGUgYWN0dWFsIGVycm9yCiAgICAgICAgICBlLmRldGFpbCA9IHRyYW5zZm9ybUVycm9yRm9yU2VyaWFsaXphdGlvbihlLmRldGFpbCk7CiAgICAgICAgfQogICAgICAgIF90aGlzMy5fc2VuZChuZXcgUmVwbHlNZXNzYWdlKF90aGlzMy5fd29ya2VySWQsIHJlcSwgdW5kZWZpbmVkLCB0cmFuc2Zvcm1FcnJvckZvclNlcmlhbGl6YXRpb24oZSkpKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhbmRsZVN1YnNjcmliZUV2ZW50TWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVN1YnNjcmliZUV2ZW50TWVzc2FnZShtc2cpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciByZXEgPSBtc2cucmVxOwogICAgICB2YXIgZGlzcG9zYWJsZSA9IHRoaXMuX2hhbmRsZXIuaGFuZGxlRXZlbnQobXNnLmV2ZW50TmFtZSwgbXNnLmFyZykoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgX3RoaXM0Ll9zZW5kKG5ldyBFdmVudE1lc3NhZ2UoX3RoaXM0Ll93b3JrZXJJZCwgcmVxLCBldmVudCkpOwogICAgICB9KTsKICAgICAgdGhpcy5fcGVuZGluZ0V2ZW50cy5zZXQocmVxLCBkaXNwb3NhYmxlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlRXZlbnRNZXNzYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRXZlbnRNZXNzYWdlKG1zZykgewogICAgICBpZiAoIXRoaXMuX3BlbmRpbmdFbWl0dGVycy5oYXMobXNnLnJlcSkpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ0dvdCBldmVudCBmb3IgdW5rbm93biByZXEnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fcGVuZGluZ0VtaXR0ZXJzLmdldChtc2cucmVxKS5maXJlKG1zZy5ldmVudCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hhbmRsZVVuc3Vic2NyaWJlRXZlbnRNZXNzYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlVW5zdWJzY3JpYmVFdmVudE1lc3NhZ2UobXNnKSB7CiAgICAgIGlmICghdGhpcy5fcGVuZGluZ0V2ZW50cy5oYXMobXNnLnJlcSkpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ0dvdCB1bnN1YnNjcmliZSBmb3IgdW5rbm93biByZXEnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fcGVuZGluZ0V2ZW50cy5nZXQobXNnLnJlcSkuZGlzcG9zZSgpOwogICAgICB0aGlzLl9wZW5kaW5nRXZlbnRzLmRlbGV0ZShtc2cucmVxKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2VuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmQobXNnKSB7CiAgICAgIHZhciB0cmFuc2ZlciA9IFtdOwogICAgICBpZiAobXNnLnR5cGUgPT09IDAgLyogTWVzc2FnZVR5cGUuUmVxdWVzdCAqLykgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmFyZ3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChtc2cuYXJnc1tpXSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgICAgICAgIHRyYW5zZmVyLnB1c2gobXNnLmFyZ3NbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChtc2cudHlwZSA9PT0gMSAvKiBNZXNzYWdlVHlwZS5SZXBseSAqLykgewogICAgICAgIGlmIChtc2cucmVzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICAgIHRyYW5zZmVyLnB1c2gobXNnLnJlcyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuX2hhbmRsZXIuc2VuZE1lc3NhZ2UobXNnLCB0cmFuc2Zlcik7CiAgICB9CiAgfV0pOwogIHJldHVybiBTaW1wbGVXb3JrZXJQcm90b2NvbDsKfSgpOwovKioKICogTWFpbiB0aHJlYWQgc2lkZQogKi8KZXhwb3J0IHZhciBTaW1wbGVXb3JrZXJDbGllbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlKSB7CiAgX2luaGVyaXRzKFNpbXBsZVdvcmtlckNsaWVudCwgX0Rpc3Bvc2FibGUpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU2ltcGxlV29ya2VyQ2xpZW50KTsKICBmdW5jdGlvbiBTaW1wbGVXb3JrZXJDbGllbnQod29ya2VyRmFjdG9yeSwgbW9kdWxlSWQsIGhvc3QpIHsKICAgIHZhciBfdGhpczU7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2ltcGxlV29ya2VyQ2xpZW50KTsKICAgIF90aGlzNSA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgdmFyIGxhenlQcm94eVJlamVjdCA9IG51bGw7CiAgICBfdGhpczUuX3dvcmtlciA9IF90aGlzNS5fcmVnaXN0ZXIod29ya2VyRmFjdG9yeS5jcmVhdGUoJ3ZzL2Jhc2UvY29tbW9uL3dvcmtlci9zaW1wbGVXb3JrZXInLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIF90aGlzNS5fcHJvdG9jb2wuaGFuZGxlTWVzc2FnZShtc2cpOwogICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAvLyBpbiBGaXJlZm94LCB3ZWIgd29ya2VycyBmYWlsIGxhemlseSA6KAogICAgICAvLyB3ZSB3aWxsIHJlamVjdCB0aGUgcHJveHkKICAgICAgbGF6eVByb3h5UmVqZWN0ID09PSBudWxsIHx8IGxhenlQcm94eVJlamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGF6eVByb3h5UmVqZWN0KGVycik7CiAgICB9KSk7CiAgICBfdGhpczUuX3Byb3RvY29sID0gbmV3IFNpbXBsZVdvcmtlclByb3RvY29sKHsKICAgICAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIHNlbmRNZXNzYWdlKG1zZywgdHJhbnNmZXIpIHsKICAgICAgICBfdGhpczUuX3dvcmtlci5wb3N0TWVzc2FnZShtc2csIHRyYW5zZmVyKTsKICAgICAgfSwKICAgICAgaGFuZGxlTWVzc2FnZTogZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShtZXRob2QsIGFyZ3MpIHsKICAgICAgICBpZiAodHlwZW9mIGhvc3RbbWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTWlzc2luZyBtZXRob2QgJyArIG1ldGhvZCArICcgb24gbWFpbiB0aHJlYWQgaG9zdC4nKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGhvc3RbbWV0aG9kXS5hcHBseShob3N0LCBhcmdzKSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgaGFuZGxlRXZlbnQ6IGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGV2ZW50TmFtZSwgYXJnKSB7CiAgICAgICAgaWYgKHByb3BlcnR5SXNEeW5hbWljRXZlbnQoZXZlbnROYW1lKSkgewogICAgICAgICAgdmFyIGV2ZW50ID0gaG9zdFtldmVudE5hbWVdLmNhbGwoaG9zdCwgYXJnKTsKICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nIGR5bmFtaWMgZXZlbnQgIi5jb25jYXQoZXZlbnROYW1lLCAiIG9uIG1haW4gdGhyZWFkIGhvc3QuIikpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGV2ZW50OwogICAgICAgIH0KICAgICAgICBpZiAocHJvcGVydHlJc0V2ZW50KGV2ZW50TmFtZSkpIHsKICAgICAgICAgIHZhciBfZXZlbnQgPSBob3N0W2V2ZW50TmFtZV07CiAgICAgICAgICBpZiAodHlwZW9mIF9ldmVudCAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgZXZlbnQgIi5jb25jYXQoZXZlbnROYW1lLCAiIG9uIG1haW4gdGhyZWFkIGhvc3QuIikpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9ldmVudDsKICAgICAgICB9CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNYWxmb3JtZWQgZXZlbnQgbmFtZSAiLmNvbmNhdChldmVudE5hbWUpKTsKICAgICAgfQogICAgfSk7CiAgICBfdGhpczUuX3Byb3RvY29sLnNldFdvcmtlcklkKF90aGlzNS5fd29ya2VyLmdldElkKCkpOwogICAgLy8gR2F0aGVyIGxvYWRlciBjb25maWd1cmF0aW9uCiAgICB2YXIgbG9hZGVyQ29uZmlndXJhdGlvbiA9IG51bGw7CiAgICBpZiAodHlwZW9mIGdsb2JhbHMucmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGdsb2JhbHMucmVxdWlyZS5nZXRDb25maWcgPT09ICdmdW5jdGlvbicpIHsKICAgICAgLy8gR2V0IHRoZSBjb25maWd1cmF0aW9uIGZyb20gdGhlIE1vbmFjbyBBTUQgTG9hZGVyCiAgICAgIGxvYWRlckNvbmZpZ3VyYXRpb24gPSBnbG9iYWxzLnJlcXVpcmUuZ2V0Q29uZmlnKCk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWxzLnJlcXVpcmVqcyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgLy8gR2V0IHRoZSBjb25maWd1cmF0aW9uIGZyb20gcmVxdWlyZWpzCiAgICAgIGxvYWRlckNvbmZpZ3VyYXRpb24gPSBnbG9iYWxzLnJlcXVpcmVqcy5zLmNvbnRleHRzLl8uY29uZmlnOwogICAgfQogICAgdmFyIGhvc3RNZXRob2RzID0gdHlwZXMuZ2V0QWxsTWV0aG9kTmFtZXMoaG9zdCk7CiAgICAvLyBTZW5kIGluaXRpYWxpemUgbWVzc2FnZQogICAgX3RoaXM1Ll9vbk1vZHVsZUxvYWRlZCA9IF90aGlzNS5fcHJvdG9jb2wuc2VuZE1lc3NhZ2UoSU5JVElBTElaRSwgW190aGlzNS5fd29ya2VyLmdldElkKCksIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobG9hZGVyQ29uZmlndXJhdGlvbikpLCBtb2R1bGVJZCwgaG9zdE1ldGhvZHNdKTsKICAgIC8vIENyZWF0ZSBwcm94eSB0byBsb2FkZWQgY29kZQogICAgdmFyIHByb3h5TWV0aG9kUmVxdWVzdCA9IGZ1bmN0aW9uIHByb3h5TWV0aG9kUmVxdWVzdChtZXRob2QsIGFyZ3MpIHsKICAgICAgcmV0dXJuIF90aGlzNS5fcmVxdWVzdChtZXRob2QsIGFyZ3MpOwogICAgfTsKICAgIHZhciBwcm94eUxpc3RlbiA9IGZ1bmN0aW9uIHByb3h5TGlzdGVuKGV2ZW50TmFtZSwgYXJnKSB7CiAgICAgIHJldHVybiBfdGhpczUuX3Byb3RvY29sLmxpc3RlbihldmVudE5hbWUsIGFyZyk7CiAgICB9OwogICAgX3RoaXM1Ll9sYXp5UHJveHkgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGxhenlQcm94eVJlamVjdCA9IHJlamVjdDsKICAgICAgX3RoaXM1Ll9vbk1vZHVsZUxvYWRlZC50aGVuKGZ1bmN0aW9uIChhdmFpbGFibGVNZXRob2RzKSB7CiAgICAgICAgcmVzb2x2ZShjcmVhdGVQcm94eU9iamVjdChhdmFpbGFibGVNZXRob2RzLCBwcm94eU1ldGhvZFJlcXVlc3QsIHByb3h5TGlzdGVuKSk7CiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICAgIF90aGlzNS5fb25FcnJvcignV29ya2VyIGZhaWxlZCB0byBsb2FkICcgKyBtb2R1bGVJZCwgZSk7CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gX3RoaXM1OwogIH0KICBfY3JlYXRlQ2xhc3MoU2ltcGxlV29ya2VyQ2xpZW50LCBbewogICAga2V5OiAiZ2V0UHJveHlPYmplY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFByb3h5T2JqZWN0KCkgewogICAgICByZXR1cm4gdGhpcy5fbGF6eVByb3h5OwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVxdWVzdChtZXRob2QsIGFyZ3MpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXM2Ll9vbk1vZHVsZUxvYWRlZC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNi5fcHJvdG9jb2wuc2VuZE1lc3NhZ2UobWV0aG9kLCBhcmdzKS50aGVuKHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX29uRXJyb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkVycm9yKG1lc3NhZ2UsIGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7CiAgICAgIGNvbnNvbGUuaW5mbyhlcnJvcik7CiAgICB9CiAgfV0pOwogIHJldHVybiBTaW1wbGVXb3JrZXJDbGllbnQ7Cn0oRGlzcG9zYWJsZSk7CmZ1bmN0aW9uIHByb3BlcnR5SXNFdmVudChuYW1lKSB7CiAgLy8gQXNzdW1lIGEgcHJvcGVydHkgaXMgYW4gZXZlbnQgaWYgaXQgaGFzIGEgZm9ybSBvZiAib25Tb21ldGhpbmciCiAgcmV0dXJuIG5hbWVbMF0gPT09ICdvJyAmJiBuYW1lWzFdID09PSAnbicgJiYgc3RyaW5ncy5pc1VwcGVyQXNjaWlMZXR0ZXIobmFtZS5jaGFyQ29kZUF0KDIpKTsKfQpmdW5jdGlvbiBwcm9wZXJ0eUlzRHluYW1pY0V2ZW50KG5hbWUpIHsKICAvLyBBc3N1bWUgYSBwcm9wZXJ0eSBpcyBhIGR5bmFtaWMgZXZlbnQgKGEgbWV0aG9kIHRoYXQgcmV0dXJucyBhbiBldmVudCkgaWYgaXQgaGFzIGEgZm9ybSBvZiAib25EeW5hbWljU29tZXRoaW5nIgogIHJldHVybiAvXm9uRHluYW1pYy8udGVzdChuYW1lKSAmJiBzdHJpbmdzLmlzVXBwZXJBc2NpaUxldHRlcihuYW1lLmNoYXJDb2RlQXQoOSkpOwp9CmZ1bmN0aW9uIGNyZWF0ZVByb3h5T2JqZWN0KG1ldGhvZE5hbWVzLCBpbnZva2UsIHByb3h5TGlzdGVuKSB7CiAgdmFyIGNyZWF0ZVByb3h5TWV0aG9kID0gZnVuY3Rpb24gY3JlYXRlUHJveHlNZXRob2QobWV0aG9kKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7CiAgICAgIHJldHVybiBpbnZva2UobWV0aG9kLCBhcmdzKTsKICAgIH07CiAgfTsKICB2YXIgY3JlYXRlUHJveHlEeW5hbWljRXZlbnQgPSBmdW5jdGlvbiBjcmVhdGVQcm94eUR5bmFtaWNFdmVudChldmVudE5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7CiAgICAgIHJldHVybiBwcm94eUxpc3RlbihldmVudE5hbWUsIGFyZyk7CiAgICB9OwogIH07CiAgdmFyIHJlc3VsdCA9IHt9OwogIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtZXRob2ROYW1lcyksCiAgICBfc3RlcDsKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIG1ldGhvZE5hbWUgPSBfc3RlcC52YWx1ZTsKICAgICAgaWYgKHByb3BlcnR5SXNEeW5hbWljRXZlbnQobWV0aG9kTmFtZSkpIHsKICAgICAgICByZXN1bHRbbWV0aG9kTmFtZV0gPSBjcmVhdGVQcm94eUR5bmFtaWNFdmVudChtZXRob2ROYW1lKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAocHJvcGVydHlJc0V2ZW50KG1ldGhvZE5hbWUpKSB7CiAgICAgICAgcmVzdWx0W21ldGhvZE5hbWVdID0gcHJveHlMaXN0ZW4obWV0aG9kTmFtZSwgdW5kZWZpbmVkKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICByZXN1bHRbbWV0aG9kTmFtZV0gPSBjcmVhdGVQcm94eU1ldGhvZChtZXRob2ROYW1lKTsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvci5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvci5mKCk7CiAgfQogIHJldHVybiByZXN1bHQ7Cn0KLyoqCiAqIFdvcmtlciBzaWRlCiAqLwpleHBvcnQgdmFyIFNpbXBsZVdvcmtlclNlcnZlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU2ltcGxlV29ya2VyU2VydmVyKHBvc3RNZXNzYWdlLCByZXF1ZXN0SGFuZGxlckZhY3RvcnkpIHsKICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNpbXBsZVdvcmtlclNlcnZlcik7CiAgICB0aGlzLl9yZXF1ZXN0SGFuZGxlckZhY3RvcnkgPSByZXF1ZXN0SGFuZGxlckZhY3Rvcnk7CiAgICB0aGlzLl9yZXF1ZXN0SGFuZGxlciA9IG51bGw7CiAgICB0aGlzLl9wcm90b2NvbCA9IG5ldyBTaW1wbGVXb3JrZXJQcm90b2NvbCh7CiAgICAgIHNlbmRNZXNzYWdlOiBmdW5jdGlvbiBzZW5kTWVzc2FnZShtc2csIHRyYW5zZmVyKSB7CiAgICAgICAgcG9zdE1lc3NhZ2UobXNnLCB0cmFuc2Zlcik7CiAgICAgIH0sCiAgICAgIGhhbmRsZU1lc3NhZ2U6IGZ1bmN0aW9uIGhhbmRsZU1lc3NhZ2UobWV0aG9kLCBhcmdzKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNy5faGFuZGxlTWVzc2FnZShtZXRob2QsIGFyZ3MpOwogICAgICB9LAogICAgICBoYW5kbGVFdmVudDogZnVuY3Rpb24gaGFuZGxlRXZlbnQoZXZlbnROYW1lLCBhcmcpIHsKICAgICAgICByZXR1cm4gX3RoaXM3Ll9oYW5kbGVFdmVudChldmVudE5hbWUsIGFyZyk7CiAgICAgIH0KICAgIH0pOwogIH0KICBfY3JlYXRlQ2xhc3MoU2ltcGxlV29ya2VyU2VydmVyLCBbewogICAga2V5OiAib25tZXNzYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbm1lc3NhZ2UobXNnKSB7CiAgICAgIHRoaXMuX3Byb3RvY29sLmhhbmRsZU1lc3NhZ2UobXNnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlTWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU1lc3NhZ2UobWV0aG9kLCBhcmdzKSB7CiAgICAgIGlmIChtZXRob2QgPT09IElOSVRJQUxJWkUpIHsKICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsaXplKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pOwogICAgICB9CiAgICAgIGlmICghdGhpcy5fcmVxdWVzdEhhbmRsZXIgfHwgdHlwZW9mIHRoaXMuX3JlcXVlc3RIYW5kbGVyW21ldGhvZF0gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdNaXNzaW5nIHJlcXVlc3RIYW5kbGVyIG9yIG1ldGhvZDogJyArIG1ldGhvZCkpOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9yZXF1ZXN0SGFuZGxlclttZXRob2RdLmFwcGx5KHRoaXMuX3JlcXVlc3RIYW5kbGVyLCBhcmdzKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlRXZlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVFdmVudChldmVudE5hbWUsIGFyZykgewogICAgICBpZiAoIXRoaXMuX3JlcXVlc3RIYW5kbGVyKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nIHJlcXVlc3RIYW5kbGVyIik7CiAgICAgIH0KICAgICAgaWYgKHByb3BlcnR5SXNEeW5hbWljRXZlbnQoZXZlbnROYW1lKSkgewogICAgICAgIHZhciBldmVudCA9IHRoaXMuX3JlcXVlc3RIYW5kbGVyW2V2ZW50TmFtZV0uY2FsbCh0aGlzLl9yZXF1ZXN0SGFuZGxlciwgYXJnKTsKICAgICAgICBpZiAodHlwZW9mIGV2ZW50ICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgZHluYW1pYyBldmVudCAiLmNvbmNhdChldmVudE5hbWUsICIgb24gcmVxdWVzdCBoYW5kbGVyLiIpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGV2ZW50OwogICAgICB9CiAgICAgIGlmIChwcm9wZXJ0eUlzRXZlbnQoZXZlbnROYW1lKSkgewogICAgICAgIHZhciBfZXZlbnQyID0gdGhpcy5fcmVxdWVzdEhhbmRsZXJbZXZlbnROYW1lXTsKICAgICAgICBpZiAodHlwZW9mIF9ldmVudDIgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiTWlzc2luZyBldmVudCAiLmNvbmNhdChldmVudE5hbWUsICIgb24gcmVxdWVzdCBoYW5kbGVyLiIpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9ldmVudDI7CiAgICAgIH0KICAgICAgdGhyb3cgbmV3IEVycm9yKCJNYWxmb3JtZWQgZXZlbnQgbmFtZSAiLmNvbmNhdChldmVudE5hbWUpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbml0aWFsaXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplKHdvcmtlcklkLCBsb2FkZXJDb25maWcsIG1vZHVsZUlkLCBob3N0TWV0aG9kcykgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgdGhpcy5fcHJvdG9jb2wuc2V0V29ya2VySWQod29ya2VySWQpOwogICAgICB2YXIgcHJveHlNZXRob2RSZXF1ZXN0ID0gZnVuY3Rpb24gcHJveHlNZXRob2RSZXF1ZXN0KG1ldGhvZCwgYXJncykgewogICAgICAgIHJldHVybiBfdGhpczguX3Byb3RvY29sLnNlbmRNZXNzYWdlKG1ldGhvZCwgYXJncyk7CiAgICAgIH07CiAgICAgIHZhciBwcm94eUxpc3RlbiA9IGZ1bmN0aW9uIHByb3h5TGlzdGVuKGV2ZW50TmFtZSwgYXJnKSB7CiAgICAgICAgcmV0dXJuIF90aGlzOC5fcHJvdG9jb2wubGlzdGVuKGV2ZW50TmFtZSwgYXJnKTsKICAgICAgfTsKICAgICAgdmFyIGhvc3RQcm94eSA9IGNyZWF0ZVByb3h5T2JqZWN0KGhvc3RNZXRob2RzLCBwcm94eU1ldGhvZFJlcXVlc3QsIHByb3h5TGlzdGVuKTsKICAgICAgaWYgKHRoaXMuX3JlcXVlc3RIYW5kbGVyRmFjdG9yeSkgewogICAgICAgIC8vIHN0YXRpYyByZXF1ZXN0IGhhbmRsZXIKICAgICAgICB0aGlzLl9yZXF1ZXN0SGFuZGxlciA9IHRoaXMuX3JlcXVlc3RIYW5kbGVyRmFjdG9yeShob3N0UHJveHkpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHlwZXMuZ2V0QWxsTWV0aG9kTmFtZXModGhpcy5fcmVxdWVzdEhhbmRsZXIpKTsKICAgICAgfQogICAgICBpZiAobG9hZGVyQ29uZmlnKSB7CiAgICAgICAgLy8gUmVtb3ZlICdiYXNlVXJsJywgaGFuZGxpbmcgaXQgaXMgYmV5b25kIHNjb3BlIGZvciBub3cKICAgICAgICBpZiAodHlwZW9mIGxvYWRlckNvbmZpZy5iYXNlVXJsICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgZGVsZXRlIGxvYWRlckNvbmZpZ1snYmFzZVVybCddOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZW9mIGxvYWRlckNvbmZpZy5wYXRocyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIGlmICh0eXBlb2YgbG9hZGVyQ29uZmlnLnBhdGhzLnZzICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBkZWxldGUgbG9hZGVyQ29uZmlnLnBhdGhzWyd2cyddOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoX3R5cGVvZihsb2FkZXJDb25maWcudHJ1c3RlZFR5cGVzUG9saWN5KSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyBkb24ndCB1c2UsIGl0IGhhcyBiZWVuIGRlc3Ryb3llZCBkdXJpbmcgc2VyaWFsaXplCiAgICAgICAgICBkZWxldGUgbG9hZGVyQ29uZmlnWyd0cnVzdGVkVHlwZXNQb2xpY3knXTsKICAgICAgICB9CiAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBpbiBhIHdlYiB3b3JrZXIsIGVuYWJsZSBjYXRjaGluZyBlcnJvcnMKICAgICAgICBsb2FkZXJDb25maWcuY2F0Y2hFcnJvciA9IHRydWU7CiAgICAgICAgZ2xvYmFscy5yZXF1aXJlLmNvbmZpZyhsb2FkZXJDb25maWcpOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgLy8gVXNlIHRoZSBnbG9iYWwgcmVxdWlyZSB0byBiZSBzdXJlIHRvIGdldCB0aGUgZ2xvYmFsIGNvbmZpZwogICAgICAgIC8vIEVTTS1jb21tZW50LWJlZ2luCiAgICAgICAgLy8gCQkJY29uc3QgcmVxID0gKGdsb2JhbHMucmVxdWlyZSB8fCByZXF1aXJlKTsKICAgICAgICAvLyBFU00tY29tbWVudC1lbmQKICAgICAgICAvLyBFU00tdW5jb21tZW50LWJlZ2luCiAgICAgICAgdmFyIHJlcSA9IGdsb2JhbHMucmVxdWlyZTsKICAgICAgICAvLyBFU00tdW5jb21tZW50LWVuZAogICAgICAgIHJlcShbbW9kdWxlSWRdLCBmdW5jdGlvbiAobW9kdWxlKSB7CiAgICAgICAgICBfdGhpczguX3JlcXVlc3RIYW5kbGVyID0gbW9kdWxlLmNyZWF0ZShob3N0UHJveHkpOwogICAgICAgICAgaWYgKCFfdGhpczguX3JlcXVlc3RIYW5kbGVyKSB7CiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoIk5vIFJlcXVlc3RIYW5kbGVyISIpKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgcmVzb2x2ZSh0eXBlcy5nZXRBbGxNZXRob2ROYW1lcyhfdGhpczguX3JlcXVlc3RIYW5kbGVyKSk7CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBTaW1wbGVXb3JrZXJTZXJ2ZXI7Cn0oKTsKLyoqCiAqIENhbGxlZCBvbiB0aGUgd29ya2VyIHNpZGUKICovCmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUocG9zdE1lc3NhZ2UpIHsKICByZXR1cm4gbmV3IFNpbXBsZVdvcmtlclNlcnZlcihwb3N0TWVzc2FnZSwgbnVsbCk7Cn0="},{"version":3,"names":["transformErrorForSerialization","Emitter","Disposable","globals","isWeb","types","strings","INITIALIZE","webWorkerWarningLogged","logOnceWebWorkerWarning","err","console","warn","message","RequestMessage","vsWorker","req","method","args","type","ReplyMessage","seq","res","SubscribeEventMessage","eventName","arg","EventMessage","event","UnsubscribeEventMessage","SimpleWorkerProtocol","handler","_workerId","_handler","_lastSentReq","_pendingReplies","Object","create","_pendingEmitters","Map","_pendingEvents","workerId","String","Promise","resolve","reject","_send","emitter","onFirstListenerAdd","set","onLastListenerRemove","delete","_handleMessage","msg","_handleReplyMessage","_handleRequestMessage","_handleSubscribeEventMessage","_handleEventMessage","_handleUnsubscribeEventMessage","replyMessage","reply","$isError","Error","name","stack","requestMessage","result","handleMessage","then","r","undefined","e","detail","disposable","handleEvent","has","get","fire","dispose","transfer","i","length","ArrayBuffer","push","sendMessage","SimpleWorkerClient","workerFactory","moduleId","host","lazyProxyReject","_worker","_register","_protocol","postMessage","apply","propertyIsDynamicEvent","call","propertyIsEvent","setWorkerId","getId","loaderConfiguration","require","getConfig","requirejs","s","contexts","_","config","hostMethods","getAllMethodNames","_onModuleLoaded","JSON","parse","stringify","proxyMethodRequest","_request","proxyListen","listen","_lazyProxy","availableMethods","createProxyObject","_onError","error","info","isUpperAsciiLetter","charCodeAt","test","methodNames","invoke","createProxyMethod","Array","prototype","slice","arguments","createProxyDynamicEvent","methodName","SimpleWorkerServer","requestHandlerFactory","_requestHandlerFactory","_requestHandler","_handleEvent","initialize","loaderConfig","hostProxy","baseUrl","paths","vs","trustedTypesPolicy","catchError","module"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { transformErrorForSerialization } from '../errors.js';\nimport { Emitter } from '../event.js';\nimport { Disposable } from '../lifecycle.js';\nimport { globals, isWeb } from '../platform.js';\nimport * as types from '../types.js';\nimport * as strings from '../strings.js';\nconst INITIALIZE = '$initialize';\nlet webWorkerWarningLogged = false;\nexport function logOnceWebWorkerWarning(err) {\n    if (!isWeb) {\n        // running tests\n        return;\n    }\n    if (!webWorkerWarningLogged) {\n        webWorkerWarningLogged = true;\n        console.warn('Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq');\n    }\n    console.warn(err.message);\n}\nclass RequestMessage {\n    constructor(vsWorker, req, method, args) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.method = method;\n        this.args = args;\n        this.type = 0 /* MessageType.Request */;\n    }\n}\nclass ReplyMessage {\n    constructor(vsWorker, seq, res, err) {\n        this.vsWorker = vsWorker;\n        this.seq = seq;\n        this.res = res;\n        this.err = err;\n        this.type = 1 /* MessageType.Reply */;\n    }\n}\nclass SubscribeEventMessage {\n    constructor(vsWorker, req, eventName, arg) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.eventName = eventName;\n        this.arg = arg;\n        this.type = 2 /* MessageType.SubscribeEvent */;\n    }\n}\nclass EventMessage {\n    constructor(vsWorker, req, event) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.event = event;\n        this.type = 3 /* MessageType.Event */;\n    }\n}\nclass UnsubscribeEventMessage {\n    constructor(vsWorker, req) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.type = 4 /* MessageType.UnsubscribeEvent */;\n    }\n}\nclass SimpleWorkerProtocol {\n    constructor(handler) {\n        this._workerId = -1;\n        this._handler = handler;\n        this._lastSentReq = 0;\n        this._pendingReplies = Object.create(null);\n        this._pendingEmitters = new Map();\n        this._pendingEvents = new Map();\n    }\n    setWorkerId(workerId) {\n        this._workerId = workerId;\n    }\n    sendMessage(method, args) {\n        const req = String(++this._lastSentReq);\n        return new Promise((resolve, reject) => {\n            this._pendingReplies[req] = {\n                resolve: resolve,\n                reject: reject\n            };\n            this._send(new RequestMessage(this._workerId, req, method, args));\n        });\n    }\n    listen(eventName, arg) {\n        let req = null;\n        const emitter = new Emitter({\n            onFirstListenerAdd: () => {\n                req = String(++this._lastSentReq);\n                this._pendingEmitters.set(req, emitter);\n                this._send(new SubscribeEventMessage(this._workerId, req, eventName, arg));\n            },\n            onLastListenerRemove: () => {\n                this._pendingEmitters.delete(req);\n                this._send(new UnsubscribeEventMessage(this._workerId, req));\n                req = null;\n            }\n        });\n        return emitter.event;\n    }\n    handleMessage(message) {\n        if (!message || !message.vsWorker) {\n            return;\n        }\n        if (this._workerId !== -1 && message.vsWorker !== this._workerId) {\n            return;\n        }\n        this._handleMessage(message);\n    }\n    _handleMessage(msg) {\n        switch (msg.type) {\n            case 1 /* MessageType.Reply */:\n                return this._handleReplyMessage(msg);\n            case 0 /* MessageType.Request */:\n                return this._handleRequestMessage(msg);\n            case 2 /* MessageType.SubscribeEvent */:\n                return this._handleSubscribeEventMessage(msg);\n            case 3 /* MessageType.Event */:\n                return this._handleEventMessage(msg);\n            case 4 /* MessageType.UnsubscribeEvent */:\n                return this._handleUnsubscribeEventMessage(msg);\n        }\n    }\n    _handleReplyMessage(replyMessage) {\n        if (!this._pendingReplies[replyMessage.seq]) {\n            console.warn('Got reply to unknown seq');\n            return;\n        }\n        const reply = this._pendingReplies[replyMessage.seq];\n        delete this._pendingReplies[replyMessage.seq];\n        if (replyMessage.err) {\n            let err = replyMessage.err;\n            if (replyMessage.err.$isError) {\n                err = new Error();\n                err.name = replyMessage.err.name;\n                err.message = replyMessage.err.message;\n                err.stack = replyMessage.err.stack;\n            }\n            reply.reject(err);\n            return;\n        }\n        reply.resolve(replyMessage.res);\n    }\n    _handleRequestMessage(requestMessage) {\n        const req = requestMessage.req;\n        const result = this._handler.handleMessage(requestMessage.method, requestMessage.args);\n        result.then((r) => {\n            this._send(new ReplyMessage(this._workerId, req, r, undefined));\n        }, (e) => {\n            if (e.detail instanceof Error) {\n                // Loading errors have a detail property that points to the actual error\n                e.detail = transformErrorForSerialization(e.detail);\n            }\n            this._send(new ReplyMessage(this._workerId, req, undefined, transformErrorForSerialization(e)));\n        });\n    }\n    _handleSubscribeEventMessage(msg) {\n        const req = msg.req;\n        const disposable = this._handler.handleEvent(msg.eventName, msg.arg)((event) => {\n            this._send(new EventMessage(this._workerId, req, event));\n        });\n        this._pendingEvents.set(req, disposable);\n    }\n    _handleEventMessage(msg) {\n        if (!this._pendingEmitters.has(msg.req)) {\n            console.warn('Got event for unknown req');\n            return;\n        }\n        this._pendingEmitters.get(msg.req).fire(msg.event);\n    }\n    _handleUnsubscribeEventMessage(msg) {\n        if (!this._pendingEvents.has(msg.req)) {\n            console.warn('Got unsubscribe for unknown req');\n            return;\n        }\n        this._pendingEvents.get(msg.req).dispose();\n        this._pendingEvents.delete(msg.req);\n    }\n    _send(msg) {\n        const transfer = [];\n        if (msg.type === 0 /* MessageType.Request */) {\n            for (let i = 0; i < msg.args.length; i++) {\n                if (msg.args[i] instanceof ArrayBuffer) {\n                    transfer.push(msg.args[i]);\n                }\n            }\n        }\n        else if (msg.type === 1 /* MessageType.Reply */) {\n            if (msg.res instanceof ArrayBuffer) {\n                transfer.push(msg.res);\n            }\n        }\n        this._handler.sendMessage(msg, transfer);\n    }\n}\n/**\n * Main thread side\n */\nexport class SimpleWorkerClient extends Disposable {\n    constructor(workerFactory, moduleId, host) {\n        super();\n        let lazyProxyReject = null;\n        this._worker = this._register(workerFactory.create('vs/base/common/worker/simpleWorker', (msg) => {\n            this._protocol.handleMessage(msg);\n        }, (err) => {\n            // in Firefox, web workers fail lazily :(\n            // we will reject the proxy\n            lazyProxyReject === null || lazyProxyReject === void 0 ? void 0 : lazyProxyReject(err);\n        }));\n        this._protocol = new SimpleWorkerProtocol({\n            sendMessage: (msg, transfer) => {\n                this._worker.postMessage(msg, transfer);\n            },\n            handleMessage: (method, args) => {\n                if (typeof host[method] !== 'function') {\n                    return Promise.reject(new Error('Missing method ' + method + ' on main thread host.'));\n                }\n                try {\n                    return Promise.resolve(host[method].apply(host, args));\n                }\n                catch (e) {\n                    return Promise.reject(e);\n                }\n            },\n            handleEvent: (eventName, arg) => {\n                if (propertyIsDynamicEvent(eventName)) {\n                    const event = host[eventName].call(host, arg);\n                    if (typeof event !== 'function') {\n                        throw new Error(`Missing dynamic event ${eventName} on main thread host.`);\n                    }\n                    return event;\n                }\n                if (propertyIsEvent(eventName)) {\n                    const event = host[eventName];\n                    if (typeof event !== 'function') {\n                        throw new Error(`Missing event ${eventName} on main thread host.`);\n                    }\n                    return event;\n                }\n                throw new Error(`Malformed event name ${eventName}`);\n            }\n        });\n        this._protocol.setWorkerId(this._worker.getId());\n        // Gather loader configuration\n        let loaderConfiguration = null;\n        if (typeof globals.require !== 'undefined' && typeof globals.require.getConfig === 'function') {\n            // Get the configuration from the Monaco AMD Loader\n            loaderConfiguration = globals.require.getConfig();\n        }\n        else if (typeof globals.requirejs !== 'undefined') {\n            // Get the configuration from requirejs\n            loaderConfiguration = globals.requirejs.s.contexts._.config;\n        }\n        const hostMethods = types.getAllMethodNames(host);\n        // Send initialize message\n        this._onModuleLoaded = this._protocol.sendMessage(INITIALIZE, [\n            this._worker.getId(),\n            JSON.parse(JSON.stringify(loaderConfiguration)),\n            moduleId,\n            hostMethods,\n        ]);\n        // Create proxy to loaded code\n        const proxyMethodRequest = (method, args) => {\n            return this._request(method, args);\n        };\n        const proxyListen = (eventName, arg) => {\n            return this._protocol.listen(eventName, arg);\n        };\n        this._lazyProxy = new Promise((resolve, reject) => {\n            lazyProxyReject = reject;\n            this._onModuleLoaded.then((availableMethods) => {\n                resolve(createProxyObject(availableMethods, proxyMethodRequest, proxyListen));\n            }, (e) => {\n                reject(e);\n                this._onError('Worker failed to load ' + moduleId, e);\n            });\n        });\n    }\n    getProxyObject() {\n        return this._lazyProxy;\n    }\n    _request(method, args) {\n        return new Promise((resolve, reject) => {\n            this._onModuleLoaded.then(() => {\n                this._protocol.sendMessage(method, args).then(resolve, reject);\n            }, reject);\n        });\n    }\n    _onError(message, error) {\n        console.error(message);\n        console.info(error);\n    }\n}\nfunction propertyIsEvent(name) {\n    // Assume a property is an event if it has a form of \"onSomething\"\n    return name[0] === 'o' && name[1] === 'n' && strings.isUpperAsciiLetter(name.charCodeAt(2));\n}\nfunction propertyIsDynamicEvent(name) {\n    // Assume a property is a dynamic event (a method that returns an event) if it has a form of \"onDynamicSomething\"\n    return /^onDynamic/.test(name) && strings.isUpperAsciiLetter(name.charCodeAt(9));\n}\nfunction createProxyObject(methodNames, invoke, proxyListen) {\n    const createProxyMethod = (method) => {\n        return function () {\n            const args = Array.prototype.slice.call(arguments, 0);\n            return invoke(method, args);\n        };\n    };\n    const createProxyDynamicEvent = (eventName) => {\n        return function (arg) {\n            return proxyListen(eventName, arg);\n        };\n    };\n    const result = {};\n    for (const methodName of methodNames) {\n        if (propertyIsDynamicEvent(methodName)) {\n            result[methodName] = createProxyDynamicEvent(methodName);\n            continue;\n        }\n        if (propertyIsEvent(methodName)) {\n            result[methodName] = proxyListen(methodName, undefined);\n            continue;\n        }\n        result[methodName] = createProxyMethod(methodName);\n    }\n    return result;\n}\n/**\n * Worker side\n */\nexport class SimpleWorkerServer {\n    constructor(postMessage, requestHandlerFactory) {\n        this._requestHandlerFactory = requestHandlerFactory;\n        this._requestHandler = null;\n        this._protocol = new SimpleWorkerProtocol({\n            sendMessage: (msg, transfer) => {\n                postMessage(msg, transfer);\n            },\n            handleMessage: (method, args) => this._handleMessage(method, args),\n            handleEvent: (eventName, arg) => this._handleEvent(eventName, arg)\n        });\n    }\n    onmessage(msg) {\n        this._protocol.handleMessage(msg);\n    }\n    _handleMessage(method, args) {\n        if (method === INITIALIZE) {\n            return this.initialize(args[0], args[1], args[2], args[3]);\n        }\n        if (!this._requestHandler || typeof this._requestHandler[method] !== 'function') {\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\n        }\n        try {\n            return Promise.resolve(this._requestHandler[method].apply(this._requestHandler, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _handleEvent(eventName, arg) {\n        if (!this._requestHandler) {\n            throw new Error(`Missing requestHandler`);\n        }\n        if (propertyIsDynamicEvent(eventName)) {\n            const event = this._requestHandler[eventName].call(this._requestHandler, arg);\n            if (typeof event !== 'function') {\n                throw new Error(`Missing dynamic event ${eventName} on request handler.`);\n            }\n            return event;\n        }\n        if (propertyIsEvent(eventName)) {\n            const event = this._requestHandler[eventName];\n            if (typeof event !== 'function') {\n                throw new Error(`Missing event ${eventName} on request handler.`);\n            }\n            return event;\n        }\n        throw new Error(`Malformed event name ${eventName}`);\n    }\n    initialize(workerId, loaderConfig, moduleId, hostMethods) {\n        this._protocol.setWorkerId(workerId);\n        const proxyMethodRequest = (method, args) => {\n            return this._protocol.sendMessage(method, args);\n        };\n        const proxyListen = (eventName, arg) => {\n            return this._protocol.listen(eventName, arg);\n        };\n        const hostProxy = createProxyObject(hostMethods, proxyMethodRequest, proxyListen);\n        if (this._requestHandlerFactory) {\n            // static request handler\n            this._requestHandler = this._requestHandlerFactory(hostProxy);\n            return Promise.resolve(types.getAllMethodNames(this._requestHandler));\n        }\n        if (loaderConfig) {\n            // Remove 'baseUrl', handling it is beyond scope for now\n            if (typeof loaderConfig.baseUrl !== 'undefined') {\n                delete loaderConfig['baseUrl'];\n            }\n            if (typeof loaderConfig.paths !== 'undefined') {\n                if (typeof loaderConfig.paths.vs !== 'undefined') {\n                    delete loaderConfig.paths['vs'];\n                }\n            }\n            if (typeof loaderConfig.trustedTypesPolicy !== undefined) {\n                // don't use, it has been destroyed during serialize\n                delete loaderConfig['trustedTypesPolicy'];\n            }\n            // Since this is in a web worker, enable catching errors\n            loaderConfig.catchError = true;\n            globals.require.config(loaderConfig);\n        }\n        return new Promise((resolve, reject) => {\n            // Use the global require to be sure to get the global config\n            // ESM-comment-begin\n            // \t\t\tconst req = (globals.require || require);\n            // ESM-comment-end\n            // ESM-uncomment-begin\n            const req = globals.require;\n            // ESM-uncomment-end\n            req([moduleId], (module) => {\n                this._requestHandler = module.create(hostProxy);\n                if (!this._requestHandler) {\n                    reject(new Error(`No RequestHandler!`));\n                    return;\n                }\n                resolve(types.getAllMethodNames(this._requestHandler));\n            }, reject);\n        });\n    }\n}\n/**\n * Called on the worker side\n */\nexport function create(postMessage) {\n    return new SimpleWorkerServer(postMessage, null);\n}\n"],"mappings":"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"}]}