{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/map.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/map.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9nZXQgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5LmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wudG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24udG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hdGgudG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKdmFyIF9hLCBfYjsKaW1wb3J0IHsgY29tcGFyZSwgY29tcGFyZUlnbm9yZUNhc2UsIGNvbXBhcmVTdWJzdHJpbmcsIGNvbXBhcmVTdWJzdHJpbmdJZ25vcmVDYXNlIH0gZnJvbSAnLi9zdHJpbmdzLmpzJzsKZXhwb3J0IHZhciBTdHJpbmdJdGVyYXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3IoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RyaW5nSXRlcmF0b3IpOwogICAgdGhpcy5fdmFsdWUgPSAnJzsKICAgIHRoaXMuX3BvcyA9IDA7CiAgfQogIF9jcmVhdGVDbGFzcyhTdHJpbmdJdGVyYXRvciwgW3sKICAgIGtleTogInJlc2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldChrZXkpIHsKICAgICAgdGhpcy5fdmFsdWUgPSBrZXk7CiAgICAgIHRoaXMuX3BvcyA9IDA7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogIm5leHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHRoaXMuX3BvcyArPSAxOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNOZXh0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNOZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5fcG9zIDwgdGhpcy5fdmFsdWUubGVuZ3RoIC0gMTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNtcChhKSB7CiAgICAgIHZhciBhQ29kZSA9IGEuY2hhckNvZGVBdCgwKTsKICAgICAgdmFyIHRoaXNDb2RlID0gdGhpcy5fdmFsdWUuY2hhckNvZGVBdCh0aGlzLl9wb3MpOwogICAgICByZXR1cm4gYUNvZGUgLSB0aGlzQ29kZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgIHJldHVybiB0aGlzLl92YWx1ZVt0aGlzLl9wb3NdOwogICAgfQogIH1dKTsKICByZXR1cm4gU3RyaW5nSXRlcmF0b3I7Cn0oKTsKZXhwb3J0IHZhciBDb25maWdLZXlzSXRlcmF0b3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENvbmZpZ0tleXNJdGVyYXRvcigpIHsKICAgIHZhciBfY2FzZVNlbnNpdGl2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25maWdLZXlzSXRlcmF0b3IpOwogICAgdGhpcy5fY2FzZVNlbnNpdGl2ZSA9IF9jYXNlU2Vuc2l0aXZlOwogIH0KICBfY3JlYXRlQ2xhc3MoQ29uZmlnS2V5c0l0ZXJhdG9yLCBbewogICAga2V5OiAicmVzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KGtleSkgewogICAgICB0aGlzLl92YWx1ZSA9IGtleTsKICAgICAgdGhpcy5fZnJvbSA9IDA7CiAgICAgIHRoaXMuX3RvID0gMDsKICAgICAgcmV0dXJuIHRoaXMubmV4dCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhc05leHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc05leHQoKSB7CiAgICAgIHJldHVybiB0aGlzLl90byA8IHRoaXMuX3ZhbHVlLmxlbmd0aDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuZXh0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KCkgewogICAgICAvLyB0aGlzLl9kYXRhID0ga2V5LnNwbGl0KC9bXFwvXS8pLmZpbHRlcihzID0+ICEhcyk7CiAgICAgIHRoaXMuX2Zyb20gPSB0aGlzLl90bzsKICAgICAgdmFyIGp1c3RTZXBzID0gdHJ1ZTsKICAgICAgZm9yICg7IHRoaXMuX3RvIDwgdGhpcy5fdmFsdWUubGVuZ3RoOyB0aGlzLl90bysrKSB7CiAgICAgICAgdmFyIGNoID0gdGhpcy5fdmFsdWUuY2hhckNvZGVBdCh0aGlzLl90byk7CiAgICAgICAgaWYgKGNoID09PSA0NiAvKiBDaGFyQ29kZS5QZXJpb2QgKi8pIHsKICAgICAgICAgIGlmIChqdXN0U2VwcykgewogICAgICAgICAgICB0aGlzLl9mcm9tKys7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAganVzdFNlcHMgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAiY21wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbXAoYSkgewogICAgICByZXR1cm4gdGhpcy5fY2FzZVNlbnNpdGl2ZSA/IGNvbXBhcmVTdWJzdHJpbmcoYSwgdGhpcy5fdmFsdWUsIDAsIGEubGVuZ3RoLCB0aGlzLl9mcm9tLCB0aGlzLl90bykgOiBjb21wYXJlU3Vic3RyaW5nSWdub3JlQ2FzZShhLCB0aGlzLl92YWx1ZSwgMCwgYS5sZW5ndGgsIHRoaXMuX2Zyb20sIHRoaXMuX3RvKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgIHJldHVybiB0aGlzLl92YWx1ZS5zdWJzdHJpbmcodGhpcy5fZnJvbSwgdGhpcy5fdG8pOwogICAgfQogIH1dKTsKICByZXR1cm4gQ29uZmlnS2V5c0l0ZXJhdG9yOwp9KCk7CmV4cG9ydCB2YXIgUGF0aEl0ZXJhdG9yID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBQYXRoSXRlcmF0b3IoKSB7CiAgICB2YXIgX3NwbGl0T25CYWNrc2xhc2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7CiAgICB2YXIgX2Nhc2VTZW5zaXRpdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF0aEl0ZXJhdG9yKTsKICAgIHRoaXMuX3NwbGl0T25CYWNrc2xhc2ggPSBfc3BsaXRPbkJhY2tzbGFzaDsKICAgIHRoaXMuX2Nhc2VTZW5zaXRpdmUgPSBfY2FzZVNlbnNpdGl2ZTsKICB9CiAgX2NyZWF0ZUNsYXNzKFBhdGhJdGVyYXRvciwgW3sKICAgIGtleTogInJlc2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldChrZXkpIHsKICAgICAgdGhpcy5fZnJvbSA9IDA7CiAgICAgIHRoaXMuX3RvID0gMDsKICAgICAgdGhpcy5fdmFsdWUgPSBrZXk7CiAgICAgIHRoaXMuX3ZhbHVlTGVuID0ga2V5Lmxlbmd0aDsKICAgICAgZm9yICh2YXIgcG9zID0ga2V5Lmxlbmd0aCAtIDE7IHBvcyA+PSAwOyBwb3MtLSwgdGhpcy5fdmFsdWVMZW4tLSkgewogICAgICAgIHZhciBjaCA9IHRoaXMuX3ZhbHVlLmNoYXJDb2RlQXQocG9zKTsKICAgICAgICBpZiAoIShjaCA9PT0gNDcgLyogQ2hhckNvZGUuU2xhc2ggKi8gfHwgdGhpcy5fc3BsaXRPbkJhY2tzbGFzaCAmJiBjaCA9PT0gOTIgLyogQ2hhckNvZGUuQmFja3NsYXNoICovKSkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLm5leHQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNOZXh0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNOZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5fdG8gPCB0aGlzLl92YWx1ZUxlbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuZXh0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KCkgewogICAgICAvLyB0aGlzLl9kYXRhID0ga2V5LnNwbGl0KC9bXFwvXS8pLmZpbHRlcihzID0+ICEhcyk7CiAgICAgIHRoaXMuX2Zyb20gPSB0aGlzLl90bzsKICAgICAgdmFyIGp1c3RTZXBzID0gdHJ1ZTsKICAgICAgZm9yICg7IHRoaXMuX3RvIDwgdGhpcy5fdmFsdWVMZW47IHRoaXMuX3RvKyspIHsKICAgICAgICB2YXIgY2ggPSB0aGlzLl92YWx1ZS5jaGFyQ29kZUF0KHRoaXMuX3RvKTsKICAgICAgICBpZiAoY2ggPT09IDQ3IC8qIENoYXJDb2RlLlNsYXNoICovIHx8IHRoaXMuX3NwbGl0T25CYWNrc2xhc2ggJiYgY2ggPT09IDkyIC8qIENoYXJDb2RlLkJhY2tzbGFzaCAqLykgewogICAgICAgICAgaWYgKGp1c3RTZXBzKSB7CiAgICAgICAgICAgIHRoaXMuX2Zyb20rKzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBqdXN0U2VwcyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNtcChhKSB7CiAgICAgIHJldHVybiB0aGlzLl9jYXNlU2Vuc2l0aXZlID8gY29tcGFyZVN1YnN0cmluZyhhLCB0aGlzLl92YWx1ZSwgMCwgYS5sZW5ndGgsIHRoaXMuX2Zyb20sIHRoaXMuX3RvKSA6IGNvbXBhcmVTdWJzdHJpbmdJZ25vcmVDYXNlKGEsIHRoaXMuX3ZhbHVlLCAwLCBhLmxlbmd0aCwgdGhpcy5fZnJvbSwgdGhpcy5fdG8pOwogICAgfQogIH0sIHsKICAgIGtleTogInZhbHVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlLnN1YnN0cmluZyh0aGlzLl9mcm9tLCB0aGlzLl90byk7CiAgICB9CiAgfV0pOwogIHJldHVybiBQYXRoSXRlcmF0b3I7Cn0oKTsKZXhwb3J0IHZhciBVcmlJdGVyYXRvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gVXJpSXRlcmF0b3IoX2lnbm9yZVBhdGhDYXNpbmcsIF9pZ25vcmVRdWVyeUFuZEZyYWdtZW50KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXJpSXRlcmF0b3IpOwogICAgdGhpcy5faWdub3JlUGF0aENhc2luZyA9IF9pZ25vcmVQYXRoQ2FzaW5nOwogICAgdGhpcy5faWdub3JlUXVlcnlBbmRGcmFnbWVudCA9IF9pZ25vcmVRdWVyeUFuZEZyYWdtZW50OwogICAgdGhpcy5fc3RhdGVzID0gW107CiAgICB0aGlzLl9zdGF0ZUlkeCA9IDA7CiAgfQogIF9jcmVhdGVDbGFzcyhVcmlJdGVyYXRvciwgW3sKICAgIGtleTogInJlc2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldChrZXkpIHsKICAgICAgdGhpcy5fdmFsdWUgPSBrZXk7CiAgICAgIHRoaXMuX3N0YXRlcyA9IFtdOwogICAgICBpZiAodGhpcy5fdmFsdWUuc2NoZW1lKSB7CiAgICAgICAgdGhpcy5fc3RhdGVzLnB1c2goMSAvKiBVcmlJdGVyYXRvclN0YXRlLlNjaGVtZSAqLyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl92YWx1ZS5hdXRob3JpdHkpIHsKICAgICAgICB0aGlzLl9zdGF0ZXMucHVzaCgyIC8qIFVyaUl0ZXJhdG9yU3RhdGUuQXV0aG9yaXR5ICovKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3ZhbHVlLnBhdGgpIHsKICAgICAgICB0aGlzLl9wYXRoSXRlcmF0b3IgPSBuZXcgUGF0aEl0ZXJhdG9yKGZhbHNlLCAhdGhpcy5faWdub3JlUGF0aENhc2luZyhrZXkpKTsKICAgICAgICB0aGlzLl9wYXRoSXRlcmF0b3IucmVzZXQoa2V5LnBhdGgpOwogICAgICAgIGlmICh0aGlzLl9wYXRoSXRlcmF0b3IudmFsdWUoKSkgewogICAgICAgICAgdGhpcy5fc3RhdGVzLnB1c2goMyAvKiBVcmlJdGVyYXRvclN0YXRlLlBhdGggKi8pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCF0aGlzLl9pZ25vcmVRdWVyeUFuZEZyYWdtZW50KGtleSkpIHsKICAgICAgICBpZiAodGhpcy5fdmFsdWUucXVlcnkpIHsKICAgICAgICAgIHRoaXMuX3N0YXRlcy5wdXNoKDQgLyogVXJpSXRlcmF0b3JTdGF0ZS5RdWVyeSAqLyk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5fdmFsdWUuZnJhZ21lbnQpIHsKICAgICAgICAgIHRoaXMuX3N0YXRlcy5wdXNoKDUgLyogVXJpSXRlcmF0b3JTdGF0ZS5GcmFnbWVudCAqLyk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLl9zdGF0ZUlkeCA9IDA7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogIm5leHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIGlmICh0aGlzLl9zdGF0ZXNbdGhpcy5fc3RhdGVJZHhdID09PSAzIC8qIFVyaUl0ZXJhdG9yU3RhdGUuUGF0aCAqLyAmJiB0aGlzLl9wYXRoSXRlcmF0b3IuaGFzTmV4dCgpKSB7CiAgICAgICAgdGhpcy5fcGF0aEl0ZXJhdG9yLm5leHQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9zdGF0ZUlkeCArPSAxOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImhhc05leHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc05leHQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zdGF0ZXNbdGhpcy5fc3RhdGVJZHhdID09PSAzIC8qIFVyaUl0ZXJhdG9yU3RhdGUuUGF0aCAqLyAmJiB0aGlzLl9wYXRoSXRlcmF0b3IuaGFzTmV4dCgpIHx8IHRoaXMuX3N0YXRlSWR4IDwgdGhpcy5fc3RhdGVzLmxlbmd0aCAtIDE7CiAgICB9CiAgfSwgewogICAga2V5OiAiY21wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbXAoYSkgewogICAgICBpZiAodGhpcy5fc3RhdGVzW3RoaXMuX3N0YXRlSWR4XSA9PT0gMSAvKiBVcmlJdGVyYXRvclN0YXRlLlNjaGVtZSAqLykgewogICAgICAgIHJldHVybiBjb21wYXJlSWdub3JlQ2FzZShhLCB0aGlzLl92YWx1ZS5zY2hlbWUpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuX3N0YXRlc1t0aGlzLl9zdGF0ZUlkeF0gPT09IDIgLyogVXJpSXRlcmF0b3JTdGF0ZS5BdXRob3JpdHkgKi8pIHsKICAgICAgICByZXR1cm4gY29tcGFyZUlnbm9yZUNhc2UoYSwgdGhpcy5fdmFsdWUuYXV0aG9yaXR5KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLl9zdGF0ZXNbdGhpcy5fc3RhdGVJZHhdID09PSAzIC8qIFVyaUl0ZXJhdG9yU3RhdGUuUGF0aCAqLykgewogICAgICAgIHJldHVybiB0aGlzLl9wYXRoSXRlcmF0b3IuY21wKGEpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuX3N0YXRlc1t0aGlzLl9zdGF0ZUlkeF0gPT09IDQgLyogVXJpSXRlcmF0b3JTdGF0ZS5RdWVyeSAqLykgewogICAgICAgIHJldHVybiBjb21wYXJlKGEsIHRoaXMuX3ZhbHVlLnF1ZXJ5KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLl9zdGF0ZXNbdGhpcy5fc3RhdGVJZHhdID09PSA1IC8qIFVyaUl0ZXJhdG9yU3RhdGUuRnJhZ21lbnQgKi8pIHsKICAgICAgICByZXR1cm4gY29tcGFyZShhLCB0aGlzLl92YWx1ZS5mcmFnbWVudCk7CiAgICAgIH0KICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidmFsdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICBpZiAodGhpcy5fc3RhdGVzW3RoaXMuX3N0YXRlSWR4XSA9PT0gMSAvKiBVcmlJdGVyYXRvclN0YXRlLlNjaGVtZSAqLykgewogICAgICAgIHJldHVybiB0aGlzLl92YWx1ZS5zY2hlbWU7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5fc3RhdGVzW3RoaXMuX3N0YXRlSWR4XSA9PT0gMiAvKiBVcmlJdGVyYXRvclN0YXRlLkF1dGhvcml0eSAqLykgewogICAgICAgIHJldHVybiB0aGlzLl92YWx1ZS5hdXRob3JpdHk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5fc3RhdGVzW3RoaXMuX3N0YXRlSWR4XSA9PT0gMyAvKiBVcmlJdGVyYXRvclN0YXRlLlBhdGggKi8pIHsKICAgICAgICByZXR1cm4gdGhpcy5fcGF0aEl0ZXJhdG9yLnZhbHVlKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5fc3RhdGVzW3RoaXMuX3N0YXRlSWR4XSA9PT0gNCAvKiBVcmlJdGVyYXRvclN0YXRlLlF1ZXJ5ICovKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlLnF1ZXJ5OwogICAgICB9IGVsc2UgaWYgKHRoaXMuX3N0YXRlc1t0aGlzLl9zdGF0ZUlkeF0gPT09IDUgLyogVXJpSXRlcmF0b3JTdGF0ZS5GcmFnbWVudCAqLykgewogICAgICAgIHJldHVybiB0aGlzLl92YWx1ZS5mcmFnbWVudDsKICAgICAgfQogICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFVyaUl0ZXJhdG9yOwp9KCk7CnZhciBUZXJuYXJ5U2VhcmNoVHJlZU5vZGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFRlcm5hcnlTZWFyY2hUcmVlTm9kZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUZXJuYXJ5U2VhcmNoVHJlZU5vZGUpOwogICAgdGhpcy5oZWlnaHQgPSAxOwogIH0KICBfY3JlYXRlQ2xhc3MoVGVybmFyeVNlYXJjaFRyZWVOb2RlLCBbewogICAga2V5OiAicm90YXRlTGVmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcm90YXRlTGVmdCgpIHsKICAgICAgdmFyIHRtcCA9IHRoaXMucmlnaHQ7CiAgICAgIHRoaXMucmlnaHQgPSB0bXAubGVmdDsKICAgICAgdG1wLmxlZnQgPSB0aGlzOwogICAgICB0aGlzLnVwZGF0ZUhlaWdodCgpOwogICAgICB0bXAudXBkYXRlSGVpZ2h0KCk7CiAgICAgIHJldHVybiB0bXA7CiAgICB9CiAgfSwgewogICAga2V5OiAicm90YXRlUmlnaHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJvdGF0ZVJpZ2h0KCkgewogICAgICB2YXIgdG1wID0gdGhpcy5sZWZ0OwogICAgICB0aGlzLmxlZnQgPSB0bXAucmlnaHQ7CiAgICAgIHRtcC5yaWdodCA9IHRoaXM7CiAgICAgIHRoaXMudXBkYXRlSGVpZ2h0KCk7CiAgICAgIHRtcC51cGRhdGVIZWlnaHQoKTsKICAgICAgcmV0dXJuIHRtcDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVIZWlnaHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUhlaWdodCgpIHsKICAgICAgdGhpcy5oZWlnaHQgPSAxICsgTWF0aC5tYXgodGhpcy5oZWlnaHRMZWZ0LCB0aGlzLmhlaWdodFJpZ2h0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJiYWxhbmNlRmFjdG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBiYWxhbmNlRmFjdG9yKCkgewogICAgICByZXR1cm4gdGhpcy5oZWlnaHRSaWdodCAtIHRoaXMuaGVpZ2h0TGVmdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoZWlnaHRMZWZ0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX2MsIF9kOwogICAgICByZXR1cm4gKF9kID0gKF9jID0gdGhpcy5sZWZ0KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuaGVpZ2h0KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwOwogICAgfQogIH0sIHsKICAgIGtleTogImhlaWdodFJpZ2h0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX2MsIF9kOwogICAgICByZXR1cm4gKF9kID0gKF9jID0gdGhpcy5yaWdodCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmhlaWdodCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFRlcm5hcnlTZWFyY2hUcmVlTm9kZTsKfSgpOwpleHBvcnQgdmFyIFRlcm5hcnlTZWFyY2hUcmVlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfU3ltYm9sJGl0ZXJhdG9yKSB7CiAgZnVuY3Rpb24gVGVybmFyeVNlYXJjaFRyZWUoc2VnbWVudHMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUZXJuYXJ5U2VhcmNoVHJlZSk7CiAgICB0aGlzLl9pdGVyID0gc2VnbWVudHM7CiAgfQogIF9jcmVhdGVDbGFzcyhUZXJuYXJ5U2VhcmNoVHJlZSwgW3sKICAgIGtleTogImNsZWFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5fcm9vdCA9IHVuZGVmaW5lZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldChrZXksIGVsZW1lbnQpIHsKICAgICAgdmFyIGl0ZXIgPSB0aGlzLl9pdGVyLnJlc2V0KGtleSk7CiAgICAgIHZhciBub2RlOwogICAgICBpZiAoIXRoaXMuX3Jvb3QpIHsKICAgICAgICB0aGlzLl9yb290ID0gbmV3IFRlcm5hcnlTZWFyY2hUcmVlTm9kZSgpOwogICAgICAgIHRoaXMuX3Jvb3Quc2VnbWVudCA9IGl0ZXIudmFsdWUoKTsKICAgICAgfQogICAgICB2YXIgc3RhY2sgPSBbXTsKICAgICAgLy8gZmluZCBpbnNlcnRfbm9kZQogICAgICBub2RlID0gdGhpcy5fcm9vdDsKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICB2YXIgdmFsID0gaXRlci5jbXAobm9kZS5zZWdtZW50KTsKICAgICAgICBpZiAodmFsID4gMCkgewogICAgICAgICAgLy8gbGVmdAogICAgICAgICAgaWYgKCFub2RlLmxlZnQpIHsKICAgICAgICAgICAgbm9kZS5sZWZ0ID0gbmV3IFRlcm5hcnlTZWFyY2hUcmVlTm9kZSgpOwogICAgICAgICAgICBub2RlLmxlZnQuc2VnbWVudCA9IGl0ZXIudmFsdWUoKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YWNrLnB1c2goWy0xIC8qIERpci5MZWZ0ICovLCBub2RlXSk7CiAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0OwogICAgICAgIH0gZWxzZSBpZiAodmFsIDwgMCkgewogICAgICAgICAgLy8gcmlnaHQKICAgICAgICAgIGlmICghbm9kZS5yaWdodCkgewogICAgICAgICAgICBub2RlLnJpZ2h0ID0gbmV3IFRlcm5hcnlTZWFyY2hUcmVlTm9kZSgpOwogICAgICAgICAgICBub2RlLnJpZ2h0LnNlZ21lbnQgPSBpdGVyLnZhbHVlKCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGFjay5wdXNoKFsxIC8qIERpci5SaWdodCAqLywgbm9kZV0pOwogICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7CiAgICAgICAgfSBlbHNlIGlmIChpdGVyLmhhc05leHQoKSkgewogICAgICAgICAgLy8gbWlkCiAgICAgICAgICBpdGVyLm5leHQoKTsKICAgICAgICAgIGlmICghbm9kZS5taWQpIHsKICAgICAgICAgICAgbm9kZS5taWQgPSBuZXcgVGVybmFyeVNlYXJjaFRyZWVOb2RlKCk7CiAgICAgICAgICAgIG5vZGUubWlkLnNlZ21lbnQgPSBpdGVyLnZhbHVlKCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGFjay5wdXNoKFswIC8qIERpci5NaWQgKi8sIG5vZGVdKTsKICAgICAgICAgIG5vZGUgPSBub2RlLm1pZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIHNldCB2YWx1ZQogICAgICB2YXIgb2xkRWxlbWVudCA9IG5vZGUudmFsdWU7CiAgICAgIG5vZGUudmFsdWUgPSBlbGVtZW50OwogICAgICBub2RlLmtleSA9IGtleTsKICAgICAgLy8gYmFsYW5jZQogICAgICBmb3IgKHZhciBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB2YXIgX25vZGUgPSBzdGFja1tpXVsxXTsKICAgICAgICBfbm9kZS51cGRhdGVIZWlnaHQoKTsKICAgICAgICB2YXIgYmYgPSBfbm9kZS5iYWxhbmNlRmFjdG9yKCk7CiAgICAgICAgaWYgKGJmIDwgLTEgfHwgYmYgPiAxKSB7CiAgICAgICAgICAvLyBuZWVkcyByb3RhdGUKICAgICAgICAgIHZhciBkMSA9IHN0YWNrW2ldWzBdOwogICAgICAgICAgdmFyIGQyID0gc3RhY2tbaSArIDFdWzBdOwogICAgICAgICAgaWYgKGQxID09PSAxIC8qIERpci5SaWdodCAqLyAmJiBkMiA9PT0gMSAvKiBEaXIuUmlnaHQgKi8pIHsKICAgICAgICAgICAgLy9yaWdodCwgcmlnaHQgLT4gcm90YXRlIGxlZnQKICAgICAgICAgICAgc3RhY2tbaV1bMV0gPSBfbm9kZS5yb3RhdGVMZWZ0KCk7CiAgICAgICAgICB9IGVsc2UgaWYgKGQxID09PSAtMSAvKiBEaXIuTGVmdCAqLyAmJiBkMiA9PT0gLTEgLyogRGlyLkxlZnQgKi8pIHsKICAgICAgICAgICAgLy8gbGVmdCwgbGVmdCAtPiByb3RhdGUgcmlnaHQKICAgICAgICAgICAgc3RhY2tbaV1bMV0gPSBfbm9kZS5yb3RhdGVSaWdodCgpOwogICAgICAgICAgfSBlbHNlIGlmIChkMSA9PT0gMSAvKiBEaXIuUmlnaHQgKi8gJiYgZDIgPT09IC0xIC8qIERpci5MZWZ0ICovKSB7CiAgICAgICAgICAgIC8vIHJpZ2h0LCBsZWZ0IC0+IGRvdWJsZSByb3RhdGUgcmlnaHQsIGxlZnQKICAgICAgICAgICAgX25vZGUucmlnaHQgPSBzdGFja1tpICsgMV1bMV0gPSBzdGFja1tpICsgMV1bMV0ucm90YXRlUmlnaHQoKTsKICAgICAgICAgICAgc3RhY2tbaV1bMV0gPSBfbm9kZS5yb3RhdGVMZWZ0KCk7CiAgICAgICAgICB9IGVsc2UgaWYgKGQxID09PSAtMSAvKiBEaXIuTGVmdCAqLyAmJiBkMiA9PT0gMSAvKiBEaXIuUmlnaHQgKi8pIHsKICAgICAgICAgICAgLy8gbGVmdCwgcmlnaHQgLT4gZG91YmxlIHJvdGF0ZSBsZWZ0LCByaWdodAogICAgICAgICAgICBfbm9kZS5sZWZ0ID0gc3RhY2tbaSArIDFdWzFdID0gc3RhY2tbaSArIDFdWzFdLnJvdGF0ZUxlZnQoKTsKICAgICAgICAgICAgc3RhY2tbaV1bMV0gPSBfbm9kZS5yb3RhdGVSaWdodCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBwYXRjaCBwYXRoIHRvIHBhcmVudAogICAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICAgIHN3aXRjaCAoc3RhY2tbaSAtIDFdWzBdKSB7CiAgICAgICAgICAgICAgY2FzZSAtMSAvKiBEaXIuTGVmdCAqLzoKICAgICAgICAgICAgICAgIHN0YWNrW2kgLSAxXVsxXS5sZWZ0ID0gc3RhY2tbaV1bMV07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDEgLyogRGlyLlJpZ2h0ICovOgogICAgICAgICAgICAgICAgc3RhY2tbaSAtIDFdWzFdLnJpZ2h0ID0gc3RhY2tbaV1bMV07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDAgLyogRGlyLk1pZCAqLzoKICAgICAgICAgICAgICAgIHN0YWNrW2kgLSAxXVsxXS5taWQgPSBzdGFja1tpXVsxXTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLl9yb290ID0gc3RhY2tbMF1bMV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBvbGRFbGVtZW50OwogICAgfQogIH0sIHsKICAgIGtleTogImdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KGtleSkgewogICAgICB2YXIgX2M7CiAgICAgIHJldHVybiAoX2MgPSB0aGlzLl9nZXROb2RlKGtleSkpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy52YWx1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0Tm9kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldE5vZGUoa2V5KSB7CiAgICAgIHZhciBpdGVyID0gdGhpcy5faXRlci5yZXNldChrZXkpOwogICAgICB2YXIgbm9kZSA9IHRoaXMuX3Jvb3Q7CiAgICAgIHdoaWxlIChub2RlKSB7CiAgICAgICAgdmFyIHZhbCA9IGl0ZXIuY21wKG5vZGUuc2VnbWVudCk7CiAgICAgICAgaWYgKHZhbCA+IDApIHsKICAgICAgICAgIC8vIGxlZnQKICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAwKSB7CiAgICAgICAgICAvLyByaWdodAogICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7CiAgICAgICAgfSBlbHNlIGlmIChpdGVyLmhhc05leHQoKSkgewogICAgICAgICAgLy8gbWlkCiAgICAgICAgICBpdGVyLm5leHQoKTsKICAgICAgICAgIG5vZGUgPSBub2RlLm1pZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBub2RlOwogICAgfQogIH0sIHsKICAgIGtleTogImhhcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzKGtleSkgewogICAgICB2YXIgbm9kZSA9IHRoaXMuX2dldE5vZGUoa2V5KTsKICAgICAgcmV0dXJuICEoKG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbm9kZS52YWx1ZSkgPT09IHVuZGVmaW5lZCAmJiAobm9kZSA9PT0gbnVsbCB8fCBub2RlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBub2RlLm1pZCkgPT09IHVuZGVmaW5lZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVsZXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKGtleSkgewogICAgICByZXR1cm4gdGhpcy5fZGVsZXRlKGtleSwgZmFsc2UpOwogICAgfQogIH0sIHsKICAgIGtleTogImRlbGV0ZVN1cGVyc3RyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVTdXBlcnN0cihrZXkpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RlbGV0ZShrZXksIHRydWUpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9kZWxldGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoa2V5LCBzdXBlclN0cikgewogICAgICB2YXIgX2M7CiAgICAgIHZhciBpdGVyID0gdGhpcy5faXRlci5yZXNldChrZXkpOwogICAgICB2YXIgc3RhY2sgPSBbXTsKICAgICAgdmFyIG5vZGUgPSB0aGlzLl9yb290OwogICAgICAvLyBmaW5kIG5vZGUKICAgICAgd2hpbGUgKG5vZGUpIHsKICAgICAgICB2YXIgdmFsID0gaXRlci5jbXAobm9kZS5zZWdtZW50KTsKICAgICAgICBpZiAodmFsID4gMCkgewogICAgICAgICAgLy8gbGVmdAogICAgICAgICAgc3RhY2sucHVzaChbLTEgLyogRGlyLkxlZnQgKi8sIG5vZGVdKTsKICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAwKSB7CiAgICAgICAgICAvLyByaWdodAogICAgICAgICAgc3RhY2sucHVzaChbMSAvKiBEaXIuUmlnaHQgKi8sIG5vZGVdKTsKICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0OwogICAgICAgIH0gZWxzZSBpZiAoaXRlci5oYXNOZXh0KCkpIHsKICAgICAgICAgIC8vIG1pZAogICAgICAgICAgaXRlci5uZXh0KCk7CiAgICAgICAgICBzdGFjay5wdXNoKFswIC8qIERpci5NaWQgKi8sIG5vZGVdKTsKICAgICAgICAgIG5vZGUgPSBub2RlLm1pZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghbm9kZSkgewogICAgICAgIC8vIG5vZGUgbm90IGZvdW5kCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChzdXBlclN0cikgewogICAgICAgIC8vIHJlbW92aW5nIGNoaWxkcmVuLCByZXNldCBoZWlnaHQKICAgICAgICBub2RlLmxlZnQgPSB1bmRlZmluZWQ7CiAgICAgICAgbm9kZS5taWQgPSB1bmRlZmluZWQ7CiAgICAgICAgbm9kZS5yaWdodCA9IHVuZGVmaW5lZDsKICAgICAgICBub2RlLmhlaWdodCA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gcmVtb3ZpbmcgZWxlbWVudAogICAgICAgIG5vZGUua2V5ID0gdW5kZWZpbmVkOwogICAgICAgIG5vZGUudmFsdWUgPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgICAgLy8gQlNUIG5vZGUgcmVtb3ZhbAogICAgICBpZiAoIW5vZGUubWlkICYmICFub2RlLnZhbHVlKSB7CiAgICAgICAgaWYgKG5vZGUubGVmdCAmJiBub2RlLnJpZ2h0KSB7CiAgICAgICAgICAvLyBmdWxsIG5vZGUKICAgICAgICAgIHZhciBtaW4gPSB0aGlzLl9taW4obm9kZS5yaWdodCk7CiAgICAgICAgICB2YXIgX2tleSA9IG1pbi5rZXksCiAgICAgICAgICAgIHZhbHVlID0gbWluLnZhbHVlLAogICAgICAgICAgICBzZWdtZW50ID0gbWluLnNlZ21lbnQ7CiAgICAgICAgICB0aGlzLl9kZWxldGUobWluLmtleSwgZmFsc2UpOwogICAgICAgICAgbm9kZS5rZXkgPSBfa2V5OwogICAgICAgICAgbm9kZS52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgbm9kZS5zZWdtZW50ID0gc2VnbWVudDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gZW1wdHkgb3IgaGFsZiBlbXB0eQogICAgICAgICAgdmFyIG5ld0NoaWxkID0gKF9jID0gbm9kZS5sZWZ0KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBub2RlLnJpZ2h0OwogICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIF9zdGFjayA9IF9zbGljZWRUb0FycmF5KHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdLCAyKSwKICAgICAgICAgICAgICBkaXIgPSBfc3RhY2tbMF0sCiAgICAgICAgICAgICAgcGFyZW50ID0gX3N0YWNrWzFdOwogICAgICAgICAgICBzd2l0Y2ggKGRpcikgewogICAgICAgICAgICAgIGNhc2UgLTEgLyogRGlyLkxlZnQgKi86CiAgICAgICAgICAgICAgICBwYXJlbnQubGVmdCA9IG5ld0NoaWxkOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAwIC8qIERpci5NaWQgKi86CiAgICAgICAgICAgICAgICBwYXJlbnQubWlkID0gbmV3Q2hpbGQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDEgLyogRGlyLlJpZ2h0ICovOgogICAgICAgICAgICAgICAgcGFyZW50LnJpZ2h0ID0gbmV3Q2hpbGQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fcm9vdCA9IG5ld0NoaWxkOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICAvLyBBVkwgYmFsYW5jZQogICAgICBmb3IgKHZhciBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB2YXIgX25vZGUyID0gc3RhY2tbaV1bMV07CiAgICAgICAgX25vZGUyLnVwZGF0ZUhlaWdodCgpOwogICAgICAgIHZhciBiZiA9IF9ub2RlMi5iYWxhbmNlRmFjdG9yKCk7CiAgICAgICAgaWYgKGJmID4gMSkgewogICAgICAgICAgLy8gcmlnaHQgaGVhdnkKICAgICAgICAgIGlmIChfbm9kZTIucmlnaHQuYmFsYW5jZUZhY3RvcigpID49IDApIHsKICAgICAgICAgICAgLy8gcmlnaHQsIHJpZ2h0IC0+IHJvdGF0ZSBsZWZ0CiAgICAgICAgICAgIHN0YWNrW2ldWzFdID0gX25vZGUyLnJvdGF0ZUxlZnQoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHJpZ2h0LCBsZWZ0IC0+IGRvdWJsZSByb3RhdGUKICAgICAgICAgICAgX25vZGUyLnJpZ2h0ID0gX25vZGUyLnJpZ2h0LnJvdGF0ZVJpZ2h0KCk7CiAgICAgICAgICAgIHN0YWNrW2ldWzFdID0gX25vZGUyLnJvdGF0ZUxlZnQoKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGJmIDwgLTEpIHsKICAgICAgICAgIC8vIGxlZnQgaGVhdnkKICAgICAgICAgIGlmIChfbm9kZTIubGVmdC5iYWxhbmNlRmFjdG9yKCkgPD0gMCkgewogICAgICAgICAgICAvLyBsZWZ0LCBsZWZ0IC0+IHJvdGF0ZSByaWdodAogICAgICAgICAgICBzdGFja1tpXVsxXSA9IF9ub2RlMi5yb3RhdGVSaWdodCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gbGVmdCwgcmlnaHQgLT4gZG91YmxlIHJvdGF0ZQogICAgICAgICAgICBfbm9kZTIubGVmdCA9IF9ub2RlMi5sZWZ0LnJvdGF0ZUxlZnQoKTsKICAgICAgICAgICAgc3RhY2tbaV1bMV0gPSBfbm9kZTIucm90YXRlUmlnaHQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gcGF0Y2ggcGF0aCB0byBwYXJlbnQKICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgIHN3aXRjaCAoc3RhY2tbaSAtIDFdWzBdKSB7CiAgICAgICAgICAgIGNhc2UgLTEgLyogRGlyLkxlZnQgKi86CiAgICAgICAgICAgICAgc3RhY2tbaSAtIDFdWzFdLmxlZnQgPSBzdGFja1tpXVsxXTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxIC8qIERpci5SaWdodCAqLzoKICAgICAgICAgICAgICBzdGFja1tpIC0gMV1bMV0ucmlnaHQgPSBzdGFja1tpXVsxXTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAwIC8qIERpci5NaWQgKi86CiAgICAgICAgICAgICAgc3RhY2tbaSAtIDFdWzFdLm1pZCA9IHN0YWNrW2ldWzFdOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9yb290ID0gc3RhY2tbMF1bMV07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX21pbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21pbihub2RlKSB7CiAgICAgIHdoaWxlIChub2RlLmxlZnQpIHsKICAgICAgICBub2RlID0gbm9kZS5sZWZ0OwogICAgICB9CiAgICAgIHJldHVybiBub2RlOwogICAgfQogIH0sIHsKICAgIGtleTogImZpbmRTdWJzdHIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRTdWJzdHIoa2V5KSB7CiAgICAgIHZhciBpdGVyID0gdGhpcy5faXRlci5yZXNldChrZXkpOwogICAgICB2YXIgbm9kZSA9IHRoaXMuX3Jvb3Q7CiAgICAgIHZhciBjYW5kaWRhdGUgPSB1bmRlZmluZWQ7CiAgICAgIHdoaWxlIChub2RlKSB7CiAgICAgICAgdmFyIHZhbCA9IGl0ZXIuY21wKG5vZGUuc2VnbWVudCk7CiAgICAgICAgaWYgKHZhbCA+IDApIHsKICAgICAgICAgIC8vIGxlZnQKICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAwKSB7CiAgICAgICAgICAvLyByaWdodAogICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7CiAgICAgICAgfSBlbHNlIGlmIChpdGVyLmhhc05leHQoKSkgewogICAgICAgICAgLy8gbWlkCiAgICAgICAgICBpdGVyLm5leHQoKTsKICAgICAgICAgIGNhbmRpZGF0ZSA9IG5vZGUudmFsdWUgfHwgY2FuZGlkYXRlOwogICAgICAgICAgbm9kZSA9IG5vZGUubWlkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSB8fCBjYW5kaWRhdGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmluZFN1cGVyc3RyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kU3VwZXJzdHIoa2V5KSB7CiAgICAgIHZhciBpdGVyID0gdGhpcy5faXRlci5yZXNldChrZXkpOwogICAgICB2YXIgbm9kZSA9IHRoaXMuX3Jvb3Q7CiAgICAgIHdoaWxlIChub2RlKSB7CiAgICAgICAgdmFyIHZhbCA9IGl0ZXIuY21wKG5vZGUuc2VnbWVudCk7CiAgICAgICAgaWYgKHZhbCA+IDApIHsKICAgICAgICAgIC8vIGxlZnQKICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAwKSB7CiAgICAgICAgICAvLyByaWdodAogICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7CiAgICAgICAgfSBlbHNlIGlmIChpdGVyLmhhc05leHQoKSkgewogICAgICAgICAgLy8gbWlkCiAgICAgICAgICBpdGVyLm5leHQoKTsKICAgICAgICAgIG5vZGUgPSBub2RlLm1pZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gY29sbGVjdAogICAgICAgICAgaWYgKCFub2RlLm1pZCkgewogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VudHJpZXMobm9kZS5taWQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogIH0sIHsKICAgIGtleTogImZvckVhY2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2spIHsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMpLAogICAgICAgIF9zdGVwOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX3N0ZXAkdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfc3RlcC52YWx1ZSwgMiksCiAgICAgICAgICAgIGtleSA9IF9zdGVwJHZhbHVlWzBdLAogICAgICAgICAgICB2YWx1ZSA9IF9zdGVwJHZhbHVlWzFdOwogICAgICAgICAgY2FsbGJhY2sodmFsdWUsIGtleSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6IF9TeW1ib2wkaXRlcmF0b3IsCiAgICB2YWx1ZTogLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gdmFsdWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5kZWxlZ2F0ZVlpZWxkKHRoaXMuX2VudHJpZXModGhpcy5fcm9vdCksICJ0MCIsIDEpOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHZhbHVlLCB0aGlzKTsKICAgIH0pCiAgfSwgewogICAga2V5OiAiX2VudHJpZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9lbnRyaWVzKG5vZGUpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICB0aGlzLl9kZnNFbnRyaWVzKG5vZGUsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHRbU3ltYm9sLml0ZXJhdG9yXSgpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9kZnNFbnRyaWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGZzRW50cmllcyhub2RlLCBidWNrZXQpIHsKICAgICAgLy8gREZTCiAgICAgIGlmICghbm9kZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAobm9kZS5sZWZ0KSB7CiAgICAgICAgdGhpcy5fZGZzRW50cmllcyhub2RlLmxlZnQsIGJ1Y2tldCk7CiAgICAgIH0KICAgICAgaWYgKG5vZGUudmFsdWUpIHsKICAgICAgICBidWNrZXQucHVzaChbbm9kZS5rZXksIG5vZGUudmFsdWVdKTsKICAgICAgfQogICAgICBpZiAobm9kZS5taWQpIHsKICAgICAgICB0aGlzLl9kZnNFbnRyaWVzKG5vZGUubWlkLCBidWNrZXQpOwogICAgICB9CiAgICAgIGlmIChub2RlLnJpZ2h0KSB7CiAgICAgICAgdGhpcy5fZGZzRW50cmllcyhub2RlLnJpZ2h0LCBidWNrZXQpOwogICAgICB9CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJmb3JVcmlzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JVcmlzKCkgewogICAgICB2YXIgaWdub3JlUGF0aENhc2luZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfTsKICAgICAgdmFyIGlnbm9yZVF1ZXJ5QW5kRnJhZ21lbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH07CiAgICAgIHJldHVybiBuZXcgVGVybmFyeVNlYXJjaFRyZWUobmV3IFVyaUl0ZXJhdG9yKGlnbm9yZVBhdGhDYXNpbmcsIGlnbm9yZVF1ZXJ5QW5kRnJhZ21lbnQpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmb3JTdHJpbmdzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JTdHJpbmdzKCkgewogICAgICByZXR1cm4gbmV3IFRlcm5hcnlTZWFyY2hUcmVlKG5ldyBTdHJpbmdJdGVyYXRvcigpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmb3JDb25maWdLZXlzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JDb25maWdLZXlzKCkgewogICAgICByZXR1cm4gbmV3IFRlcm5hcnlTZWFyY2hUcmVlKG5ldyBDb25maWdLZXlzSXRlcmF0b3IoKSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBUZXJuYXJ5U2VhcmNoVHJlZTsKfShTeW1ib2wuaXRlcmF0b3IpOwp2YXIgUmVzb3VyY2VNYXBFbnRyeSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlQ2xhc3MoZnVuY3Rpb24gUmVzb3VyY2VNYXBFbnRyeSh1cmksIHZhbHVlKSB7CiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc291cmNlTWFwRW50cnkpOwogIHRoaXMudXJpID0gdXJpOwogIHRoaXMudmFsdWUgPSB2YWx1ZTsKfSk7CmV4cG9ydCB2YXIgUmVzb3VyY2VNYXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9yZWYpIHsKICBmdW5jdGlvbiBSZXNvdXJjZU1hcChtYXBPcktleUZuLCB0b0tleSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc291cmNlTWFwKTsKICAgIHRoaXNbX2FdID0gJ1Jlc291cmNlTWFwJzsKICAgIGlmIChtYXBPcktleUZuIGluc3RhbmNlb2YgUmVzb3VyY2VNYXApIHsKICAgICAgdGhpcy5tYXAgPSBuZXcgTWFwKG1hcE9yS2V5Rm4ubWFwKTsKICAgICAgdGhpcy50b0tleSA9IHRvS2V5ICE9PSBudWxsICYmIHRvS2V5ICE9PSB2b2lkIDAgPyB0b0tleSA6IFJlc291cmNlTWFwLmRlZmF1bHRUb0tleTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubWFwID0gbmV3IE1hcCgpOwogICAgICB0aGlzLnRvS2V5ID0gbWFwT3JLZXlGbiAhPT0gbnVsbCAmJiBtYXBPcktleUZuICE9PSB2b2lkIDAgPyBtYXBPcktleUZuIDogUmVzb3VyY2VNYXAuZGVmYXVsdFRvS2V5OwogICAgfQogIH0KICBfY3JlYXRlQ2xhc3MoUmVzb3VyY2VNYXAsIFt7CiAgICBrZXk6ICJzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldChyZXNvdXJjZSwgdmFsdWUpIHsKICAgICAgdGhpcy5tYXAuc2V0KHRoaXMudG9LZXkocmVzb3VyY2UpLCBuZXcgUmVzb3VyY2VNYXBFbnRyeShyZXNvdXJjZSwgdmFsdWUpKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQocmVzb3VyY2UpIHsKICAgICAgdmFyIF9jOwogICAgICByZXR1cm4gKF9jID0gdGhpcy5tYXAuZ2V0KHRoaXMudG9LZXkocmVzb3VyY2UpKSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogImhhcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzKHJlc291cmNlKSB7CiAgICAgIHJldHVybiB0aGlzLm1hcC5oYXModGhpcy50b0tleShyZXNvdXJjZSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInNpemUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLm1hcC5zaXplOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5tYXAuY2xlYXIoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZWxldGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUocmVzb3VyY2UpIHsKICAgICAgcmV0dXJuIHRoaXMubWFwLmRlbGV0ZSh0aGlzLnRvS2V5KHJlc291cmNlKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZm9yRWFjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yRWFjaChjbGIsIHRoaXNBcmcpIHsKICAgICAgaWYgKHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGNsYiA9IGNsYi5iaW5kKHRoaXNBcmcpOwogICAgICB9CiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5tYXApLAogICAgICAgIF9zdGVwMjsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIF9zdGVwMiR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwMi52YWx1ZSwgMiksCiAgICAgICAgICAgIF8gPSBfc3RlcDIkdmFsdWVbMF0sCiAgICAgICAgICAgIGVudHJ5ID0gX3N0ZXAyJHZhbHVlWzFdOwogICAgICAgICAgY2xiKGVudHJ5LnZhbHVlLCBlbnRyeS51cmksIHRoaXMpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWx1ZXMiLAogICAgdmFsdWU6IC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiB2YWx1ZXMoKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzLCBfc3RlcDMsIGVudHJ5OwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gdmFsdWVzJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5tYXAudmFsdWVzKCkpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgICBfaXRlcmF0b3IzLnMoKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGlmICgoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbnRyeSA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDExOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBfaXRlcmF0b3IzLmUoX2NvbnRleHQyLnQwKTsKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE0OwogICAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDE0KTsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHZhbHVlcywgdGhpcywgW1sxLCAxMSwgMTQsIDE3XV0pOwogICAgfSkKICB9LCB7CiAgICBrZXk6ICJrZXlzIiwKICAgIHZhbHVlOiAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24ga2V5cygpIHsKICAgICAgdmFyIF9pdGVyYXRvcjQsIF9zdGVwNCwgZW50cnk7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBrZXlzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5tYXAudmFsdWVzKCkpOwogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTsKICAgICAgICAgICAgICBfaXRlcmF0b3I0LnMoKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGlmICgoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbnRyeSA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5LnVyaTsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxMTsKICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yNC5lKF9jb250ZXh0My50MCk7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNDsKICAgICAgICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCgxNCk7CiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBrZXlzLCB0aGlzLCBbWzEsIDExLCAxNCwgMTddXSk7CiAgICB9KQogIH0sIHsKICAgIGtleTogImVudHJpZXMiLAogICAgdmFsdWU6IC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBlbnRyaWVzKCkgewogICAgICB2YXIgX2l0ZXJhdG9yNSwgX3N0ZXA1LCBlbnRyeTsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIGVudHJpZXMkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLm1hcC52YWx1ZXMoKSk7CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxOwogICAgICAgICAgICAgIF9pdGVyYXRvcjUucygpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgaWYgKChfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVudHJ5ID0gX3N0ZXA1LnZhbHVlOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gW2VudHJ5LnVyaSwgZW50cnkudmFsdWVdOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDExOwogICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBfaXRlcmF0b3I1LmUoX2NvbnRleHQ0LnQwKTsKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDE0OwogICAgICAgICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuZmluaXNoKDE0KTsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIGVudHJpZXMsIHRoaXMsIFtbMSwgMTEsIDE0LCAxN11dKTsKICAgIH0pCiAgfSwgewogICAga2V5OiBfcmVmLAogICAgdmFsdWU6IC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgdmFyIF9pdGVyYXRvcjYsIF9zdGVwNiwgX3N0ZXA2JHZhbHVlLCBlbnRyeTsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIHZhbHVlJChfY29udGV4dDUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5tYXApOwogICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMTsKICAgICAgICAgICAgICBfaXRlcmF0b3I2LnMoKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGlmICgoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfc3RlcDYkdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfc3RlcDYudmFsdWUsIDIpLCBlbnRyeSA9IF9zdGVwNiR2YWx1ZVsxXTsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIFtlbnRyeS51cmksIGVudHJ5LnZhbHVlXTsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxMTsKICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yNi5lKF9jb250ZXh0NS50MCk7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxNDsKICAgICAgICAgICAgICBfaXRlcmF0b3I2LmYoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmZpbmlzaCgxNCk7CiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCB2YWx1ZSwgdGhpcywgW1sxLCAxMSwgMTQsIDE3XV0pOwogICAgfSkKICB9XSk7CiAgcmV0dXJuIFJlc291cmNlTWFwOwp9KChfYSA9IFN5bWJvbC50b1N0cmluZ1RhZywgU3ltYm9sLml0ZXJhdG9yKSk7ClJlc291cmNlTWFwLmRlZmF1bHRUb0tleSA9IGZ1bmN0aW9uIChyZXNvdXJjZSkgewogIHJldHVybiByZXNvdXJjZS50b1N0cmluZygpOwp9OwpleHBvcnQgdmFyIExpbmtlZE1hcCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX3JlZjIpIHsKICBmdW5jdGlvbiBMaW5rZWRNYXAoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGlua2VkTWFwKTsKICAgIHRoaXNbX2JdID0gJ0xpbmtlZE1hcCc7CiAgICB0aGlzLl9tYXAgPSBuZXcgTWFwKCk7CiAgICB0aGlzLl9oZWFkID0gdW5kZWZpbmVkOwogICAgdGhpcy5fdGFpbCA9IHVuZGVmaW5lZDsKICAgIHRoaXMuX3NpemUgPSAwOwogICAgdGhpcy5fc3RhdGUgPSAwOwogIH0KICBfY3JlYXRlQ2xhc3MoTGlua2VkTWFwLCBbewogICAga2V5OiAiY2xlYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICB0aGlzLl9tYXAuY2xlYXIoKTsKICAgICAgdGhpcy5faGVhZCA9IHVuZGVmaW5lZDsKICAgICAgdGhpcy5fdGFpbCA9IHVuZGVmaW5lZDsKICAgICAgdGhpcy5fc2l6ZSA9IDA7CiAgICAgIHRoaXMuX3N0YXRlKys7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNFbXB0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNFbXB0eSgpIHsKICAgICAgcmV0dXJuICF0aGlzLl9oZWFkICYmICF0aGlzLl90YWlsOwogICAgfQogIH0sIHsKICAgIGtleTogInNpemUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zaXplOwogICAgfQogIH0sIHsKICAgIGtleTogImZpcnN0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX2M7CiAgICAgIHJldHVybiAoX2MgPSB0aGlzLl9oZWFkKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudmFsdWU7CiAgICB9CiAgfSwgewogICAga2V5OiAibGFzdCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF9jOwogICAgICByZXR1cm4gKF9jID0gdGhpcy5fdGFpbCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogImhhcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzKGtleSkgewogICAgICByZXR1cm4gdGhpcy5fbWFwLmhhcyhrZXkpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KGtleSkgewogICAgICB2YXIgdG91Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICAgIHZhciBpdGVtID0gdGhpcy5fbWFwLmdldChrZXkpOwogICAgICBpZiAoIWl0ZW0pIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIGlmICh0b3VjaCAhPT0gMCAvKiBUb3VjaC5Ob25lICovKSB7CiAgICAgICAgdGhpcy50b3VjaChpdGVtLCB0b3VjaCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkgewogICAgICB2YXIgdG91Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7CiAgICAgIHZhciBpdGVtID0gdGhpcy5fbWFwLmdldChrZXkpOwogICAgICBpZiAoaXRlbSkgewogICAgICAgIGl0ZW0udmFsdWUgPSB2YWx1ZTsKICAgICAgICBpZiAodG91Y2ggIT09IDAgLyogVG91Y2guTm9uZSAqLykgewogICAgICAgICAgdGhpcy50b3VjaChpdGVtLCB0b3VjaCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW0gPSB7CiAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgIG5leHQ6IHVuZGVmaW5lZCwKICAgICAgICAgIHByZXZpb3VzOiB1bmRlZmluZWQKICAgICAgICB9OwogICAgICAgIHN3aXRjaCAodG91Y2gpIHsKICAgICAgICAgIGNhc2UgMCAvKiBUb3VjaC5Ob25lICovOgogICAgICAgICAgICB0aGlzLmFkZEl0ZW1MYXN0KGl0ZW0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMSAvKiBUb3VjaC5Bc09sZCAqLzoKICAgICAgICAgICAgdGhpcy5hZGRJdGVtRmlyc3QoaXRlbSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyIC8qIFRvdWNoLkFzTmV3ICovOgogICAgICAgICAgICB0aGlzLmFkZEl0ZW1MYXN0KGl0ZW0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRoaXMuYWRkSXRlbUxhc3QoaXRlbSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICB0aGlzLl9tYXAuc2V0KGtleSwgaXRlbSk7CiAgICAgICAgdGhpcy5fc2l6ZSsrOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImRlbGV0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZShrZXkpIHsKICAgICAgcmV0dXJuICEhdGhpcy5yZW1vdmUoa2V5KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShrZXkpIHsKICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9tYXAuZ2V0KGtleSk7CiAgICAgIGlmICghaXRlbSkgewogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0KICAgICAgdGhpcy5fbWFwLmRlbGV0ZShrZXkpOwogICAgICB0aGlzLnJlbW92ZUl0ZW0oaXRlbSk7CiAgICAgIHRoaXMuX3NpemUtLTsKICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hpZnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNoaWZ0KCkgewogICAgICBpZiAoIXRoaXMuX2hlYWQgJiYgIXRoaXMuX3RhaWwpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIGlmICghdGhpcy5faGVhZCB8fCAhdGhpcy5fdGFpbCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBsaXN0Jyk7CiAgICAgIH0KICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9oZWFkOwogICAgICB0aGlzLl9tYXAuZGVsZXRlKGl0ZW0ua2V5KTsKICAgICAgdGhpcy5yZW1vdmVJdGVtKGl0ZW0pOwogICAgICB0aGlzLl9zaXplLS07CiAgICAgIHJldHVybiBpdGVtLnZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogImZvckVhY2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2tmbiwgdGhpc0FyZykgewogICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZTsKICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLl9oZWFkOwogICAgICB3aGlsZSAoY3VycmVudCkgewogICAgICAgIGlmICh0aGlzQXJnKSB7CiAgICAgICAgICBjYWxsYmFja2ZuLmJpbmQodGhpc0FyZykoY3VycmVudC52YWx1ZSwgY3VycmVudC5rZXksIHRoaXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYWxsYmFja2ZuKGN1cnJlbnQudmFsdWUsIGN1cnJlbnQua2V5LCB0aGlzKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSBzdGF0ZSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJMaW5rZWRNYXAgZ290IG1vZGlmaWVkIGR1cmluZyBpdGVyYXRpb24uIik7CiAgICAgICAgfQogICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJrZXlzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBrZXlzKCkgewogICAgICB2YXIgX2l0ZXJhdG9yNzsKICAgICAgdmFyIG1hcCA9IHRoaXM7CiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuX3N0YXRlOwogICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2hlYWQ7CiAgICAgIHZhciBpdGVyYXRvciA9IChfaXRlcmF0b3I3ID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfaXRlcmF0b3I3LCBTeW1ib2wuaXRlcmF0b3IsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gaXRlcmF0b3I7CiAgICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX2l0ZXJhdG9yNywgIm5leHQiLCBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgIGlmIChtYXAuX3N0YXRlICE9PSBzdGF0ZSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJMaW5rZWRNYXAgZ290IG1vZGlmaWVkIGR1cmluZyBpdGVyYXRpb24uIik7CiAgICAgICAgfQogICAgICAgIGlmIChjdXJyZW50KSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgICAgICB2YWx1ZTogY3VycmVudC5rZXksCiAgICAgICAgICAgIGRvbmU6IGZhbHNlCiAgICAgICAgICB9OwogICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsCiAgICAgICAgICAgIGRvbmU6IHRydWUKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KSwgX2l0ZXJhdG9yNyk7CiAgICAgIHJldHVybiBpdGVyYXRvcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWx1ZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlcygpIHsKICAgICAgdmFyIF9pdGVyYXRvcjg7CiAgICAgIHZhciBtYXAgPSB0aGlzOwogICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZTsKICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLl9oZWFkOwogICAgICB2YXIgaXRlcmF0b3IgPSAoX2l0ZXJhdG9yOCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2l0ZXJhdG9yOCwgU3ltYm9sLml0ZXJhdG9yLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yOwogICAgICB9KSwgX2RlZmluZVByb3BlcnR5KF9pdGVyYXRvcjgsICJuZXh0IiwgZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgICBpZiAobWFwLl9zdGF0ZSAhPT0gc3RhdGUpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiTGlua2VkTWFwIGdvdCBtb2RpZmllZCBkdXJpbmcgaXRlcmF0aW9uLiIpOwogICAgICAgIH0KICAgICAgICBpZiAoY3VycmVudCkgewogICAgICAgICAgdmFyIHJlc3VsdCA9IHsKICAgICAgICAgICAgdmFsdWU6IGN1cnJlbnQudmFsdWUsCiAgICAgICAgICAgIGRvbmU6IGZhbHNlCiAgICAgICAgICB9OwogICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsCiAgICAgICAgICAgIGRvbmU6IHRydWUKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KSwgX2l0ZXJhdG9yOCk7CiAgICAgIHJldHVybiBpdGVyYXRvcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlbnRyaWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBlbnRyaWVzKCkgewogICAgICB2YXIgX2l0ZXJhdG9yOTsKICAgICAgdmFyIG1hcCA9IHRoaXM7CiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuX3N0YXRlOwogICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2hlYWQ7CiAgICAgIHZhciBpdGVyYXRvciA9IChfaXRlcmF0b3I5ID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfaXRlcmF0b3I5LCBTeW1ib2wuaXRlcmF0b3IsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gaXRlcmF0b3I7CiAgICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX2l0ZXJhdG9yOSwgIm5leHQiLCBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgIGlmIChtYXAuX3N0YXRlICE9PSBzdGF0ZSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJMaW5rZWRNYXAgZ290IG1vZGlmaWVkIGR1cmluZyBpdGVyYXRpb24uIik7CiAgICAgICAgfQogICAgICAgIGlmIChjdXJyZW50KSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgICAgICB2YWx1ZTogW2N1cnJlbnQua2V5LCBjdXJyZW50LnZhbHVlXSwKICAgICAgICAgICAgZG9uZTogZmFsc2UKICAgICAgICAgIH07CiAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OwogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgZG9uZTogdHJ1ZQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pLCBfaXRlcmF0b3I5KTsKICAgICAgcmV0dXJuIGl0ZXJhdG9yOwogICAgfQogIH0sIHsKICAgIGtleTogX3JlZjIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmVudHJpZXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0cmltT2xkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0cmltT2xkKG5ld1NpemUpIHsKICAgICAgaWYgKG5ld1NpemUgPj0gdGhpcy5zaXplKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChuZXdTaXplID09PSAwKSB7CiAgICAgICAgdGhpcy5jbGVhcigpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2hlYWQ7CiAgICAgIHZhciBjdXJyZW50U2l6ZSA9IHRoaXMuc2l6ZTsKICAgICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudFNpemUgPiBuZXdTaXplKSB7CiAgICAgICAgdGhpcy5fbWFwLmRlbGV0ZShjdXJyZW50LmtleSk7CiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsKICAgICAgICBjdXJyZW50U2l6ZS0tOwogICAgICB9CiAgICAgIHRoaXMuX2hlYWQgPSBjdXJyZW50OwogICAgICB0aGlzLl9zaXplID0gY3VycmVudFNpemU7CiAgICAgIGlmIChjdXJyZW50KSB7CiAgICAgICAgY3VycmVudC5wcmV2aW91cyA9IHVuZGVmaW5lZDsKICAgICAgfQogICAgICB0aGlzLl9zdGF0ZSsrOwogICAgfQogIH0sIHsKICAgIGtleTogImFkZEl0ZW1GaXJzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkSXRlbUZpcnN0KGl0ZW0pIHsKICAgICAgLy8gRmlyc3QgdGltZSBJbnNlcnQKICAgICAgaWYgKCF0aGlzLl9oZWFkICYmICF0aGlzLl90YWlsKSB7CiAgICAgICAgdGhpcy5fdGFpbCA9IGl0ZW07CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2hlYWQpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbGlzdCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW0ubmV4dCA9IHRoaXMuX2hlYWQ7CiAgICAgICAgdGhpcy5faGVhZC5wcmV2aW91cyA9IGl0ZW07CiAgICAgIH0KICAgICAgdGhpcy5faGVhZCA9IGl0ZW07CiAgICAgIHRoaXMuX3N0YXRlKys7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkSXRlbUxhc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEl0ZW1MYXN0KGl0ZW0pIHsKICAgICAgLy8gRmlyc3QgdGltZSBJbnNlcnQKICAgICAgaWYgKCF0aGlzLl9oZWFkICYmICF0aGlzLl90YWlsKSB7CiAgICAgICAgdGhpcy5faGVhZCA9IGl0ZW07CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3RhaWwpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbGlzdCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW0ucHJldmlvdXMgPSB0aGlzLl90YWlsOwogICAgICAgIHRoaXMuX3RhaWwubmV4dCA9IGl0ZW07CiAgICAgIH0KICAgICAgdGhpcy5fdGFpbCA9IGl0ZW07CiAgICAgIHRoaXMuX3N0YXRlKys7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlSXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlSXRlbShpdGVtKSB7CiAgICAgIGlmIChpdGVtID09PSB0aGlzLl9oZWFkICYmIGl0ZW0gPT09IHRoaXMuX3RhaWwpIHsKICAgICAgICB0aGlzLl9oZWFkID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMuX3RhaWwgPSB1bmRlZmluZWQ7CiAgICAgIH0gZWxzZSBpZiAoaXRlbSA9PT0gdGhpcy5faGVhZCkgewogICAgICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHNpemUgPT09IDEgd2hpY2ggaXMgaGFuZGxlZAogICAgICAgIC8vIGJ5IHRoZSBjYXNlIGFib3ZlLgogICAgICAgIGlmICghaXRlbS5uZXh0KSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbGlzdCcpOwogICAgICAgIH0KICAgICAgICBpdGVtLm5leHQucHJldmlvdXMgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5faGVhZCA9IGl0ZW0ubmV4dDsKICAgICAgfSBlbHNlIGlmIChpdGVtID09PSB0aGlzLl90YWlsKSB7CiAgICAgICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgc2l6ZSA9PT0gMSB3aGljaCBpcyBoYW5kbGVkCiAgICAgICAgLy8gYnkgdGhlIGNhc2UgYWJvdmUuCiAgICAgICAgaWYgKCFpdGVtLnByZXZpb3VzKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbGlzdCcpOwogICAgICAgIH0KICAgICAgICBpdGVtLnByZXZpb3VzLm5leHQgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5fdGFpbCA9IGl0ZW0ucHJldmlvdXM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG5leHQgPSBpdGVtLm5leHQ7CiAgICAgICAgdmFyIHByZXZpb3VzID0gaXRlbS5wcmV2aW91czsKICAgICAgICBpZiAoIW5leHQgfHwgIXByZXZpb3VzKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbGlzdCcpOwogICAgICAgIH0KICAgICAgICBuZXh0LnByZXZpb3VzID0gcHJldmlvdXM7CiAgICAgICAgcHJldmlvdXMubmV4dCA9IG5leHQ7CiAgICAgIH0KICAgICAgaXRlbS5uZXh0ID0gdW5kZWZpbmVkOwogICAgICBpdGVtLnByZXZpb3VzID0gdW5kZWZpbmVkOwogICAgICB0aGlzLl9zdGF0ZSsrOwogICAgfQogIH0sIHsKICAgIGtleTogInRvdWNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b3VjaChpdGVtLCBfdG91Y2gpIHsKICAgICAgaWYgKCF0aGlzLl9oZWFkIHx8ICF0aGlzLl90YWlsKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGxpc3QnKTsKICAgICAgfQogICAgICBpZiAoX3RvdWNoICE9PSAxIC8qIFRvdWNoLkFzT2xkICovICYmIF90b3VjaCAhPT0gMiAvKiBUb3VjaC5Bc05ldyAqLykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoX3RvdWNoID09PSAxIC8qIFRvdWNoLkFzT2xkICovKSB7CiAgICAgICAgaWYgKGl0ZW0gPT09IHRoaXMuX2hlYWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIG5leHQgPSBpdGVtLm5leHQ7CiAgICAgICAgdmFyIHByZXZpb3VzID0gaXRlbS5wcmV2aW91czsKICAgICAgICAvLyBVbmxpbmsgdGhlIGl0ZW0KICAgICAgICBpZiAoaXRlbSA9PT0gdGhpcy5fdGFpbCkgewogICAgICAgICAgLy8gcHJldmlvdXMgbXVzdCBiZSBkZWZpbmVkIHNpbmNlIGl0ZW0gd2FzIG5vdCBoZWFkIGJ1dCBpcyB0YWlsCiAgICAgICAgICAvLyBTbyB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uIGl0ZW0gaW4gdGhlIG1hcAogICAgICAgICAgcHJldmlvdXMubmV4dCA9IHVuZGVmaW5lZDsKICAgICAgICAgIHRoaXMuX3RhaWwgPSBwcmV2aW91czsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gQm90aCBuZXh0IGFuZCBwcmV2aW91cyBhcmUgbm90IHVuZGVmaW5lZCBzaW5jZSBpdGVtIHdhcyBuZWl0aGVyIGhlYWQgbm9yIHRhaWwuCiAgICAgICAgICBuZXh0LnByZXZpb3VzID0gcHJldmlvdXM7CiAgICAgICAgICBwcmV2aW91cy5uZXh0ID0gbmV4dDsKICAgICAgICB9CiAgICAgICAgLy8gSW5zZXJ0IHRoZSBub2RlIGF0IGhlYWQKICAgICAgICBpdGVtLnByZXZpb3VzID0gdW5kZWZpbmVkOwogICAgICAgIGl0ZW0ubmV4dCA9IHRoaXMuX2hlYWQ7CiAgICAgICAgdGhpcy5faGVhZC5wcmV2aW91cyA9IGl0ZW07CiAgICAgICAgdGhpcy5faGVhZCA9IGl0ZW07CiAgICAgICAgdGhpcy5fc3RhdGUrKzsKICAgICAgfSBlbHNlIGlmIChfdG91Y2ggPT09IDIgLyogVG91Y2guQXNOZXcgKi8pIHsKICAgICAgICBpZiAoaXRlbSA9PT0gdGhpcy5fdGFpbCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgX25leHQgPSBpdGVtLm5leHQ7CiAgICAgICAgdmFyIF9wcmV2aW91cyA9IGl0ZW0ucHJldmlvdXM7CiAgICAgICAgLy8gVW5saW5rIHRoZSBpdGVtLgogICAgICAgIGlmIChpdGVtID09PSB0aGlzLl9oZWFkKSB7CiAgICAgICAgICAvLyBuZXh0IG11c3QgYmUgZGVmaW5lZCBzaW5jZSBpdGVtIHdhcyBub3QgdGFpbCBidXQgaXMgaGVhZAogICAgICAgICAgLy8gU28gdGhlcmUgYXJlIG1vcmUgdGhhbiBvbiBpdGVtIGluIHRoZSBtYXAKICAgICAgICAgIF9uZXh0LnByZXZpb3VzID0gdW5kZWZpbmVkOwogICAgICAgICAgdGhpcy5faGVhZCA9IF9uZXh0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBCb3RoIG5leHQgYW5kIHByZXZpb3VzIGFyZSBub3QgdW5kZWZpbmVkIHNpbmNlIGl0ZW0gd2FzIG5laXRoZXIgaGVhZCBub3IgdGFpbC4KICAgICAgICAgIF9uZXh0LnByZXZpb3VzID0gX3ByZXZpb3VzOwogICAgICAgICAgX3ByZXZpb3VzLm5leHQgPSBfbmV4dDsKICAgICAgICB9CiAgICAgICAgaXRlbS5uZXh0ID0gdW5kZWZpbmVkOwogICAgICAgIGl0ZW0ucHJldmlvdXMgPSB0aGlzLl90YWlsOwogICAgICAgIHRoaXMuX3RhaWwubmV4dCA9IGl0ZW07CiAgICAgICAgdGhpcy5fdGFpbCA9IGl0ZW07CiAgICAgICAgdGhpcy5fc3RhdGUrKzsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInRvSlNPTiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9KU09OKCkgewogICAgICB2YXIgZGF0YSA9IFtdOwogICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHsKICAgICAgICBkYXRhLnB1c2goW2tleSwgdmFsdWVdKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBkYXRhOwogICAgfQogIH0sIHsKICAgIGtleTogImZyb21KU09OIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmcm9tSlNPTihkYXRhKSB7CiAgICAgIHRoaXMuY2xlYXIoKTsKICAgICAgdmFyIF9pdGVyYXRvcjEwID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZGF0YSksCiAgICAgICAgX3N0ZXA3OwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMTAucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjEwLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBfc3RlcDckdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfc3RlcDcudmFsdWUsIDIpLAogICAgICAgICAgICBrZXkgPSBfc3RlcDckdmFsdWVbMF0sCiAgICAgICAgICAgIF92YWx1ZSA9IF9zdGVwNyR2YWx1ZVsxXTsKICAgICAgICAgIHRoaXMuc2V0KGtleSwgX3ZhbHVlKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjEwLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IxMC5mKCk7CiAgICAgIH0KICAgIH0KICB9XSk7CiAgcmV0dXJuIExpbmtlZE1hcDsKfSgoX2IgPSBTeW1ib2wudG9TdHJpbmdUYWcsIFN5bWJvbC5pdGVyYXRvcikpOwpleHBvcnQgdmFyIExSVUNhY2hlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTGlua2VkTWFwKSB7CiAgX2luaGVyaXRzKExSVUNhY2hlLCBfTGlua2VkTWFwKTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKExSVUNhY2hlKTsKICBmdW5jdGlvbiBMUlVDYWNoZShsaW1pdCkgewogICAgdmFyIF90aGlzOwogICAgdmFyIHJhdGlvID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExSVUNhY2hlKTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcyk7CiAgICBfdGhpcy5fbGltaXQgPSBsaW1pdDsKICAgIF90aGlzLl9yYXRpbyA9IE1hdGgubWluKE1hdGgubWF4KDAsIHJhdGlvKSwgMSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhMUlVDYWNoZSwgW3sKICAgIGtleTogImxpbWl0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fbGltaXQ7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQobGltaXQpIHsKICAgICAgdGhpcy5fbGltaXQgPSBsaW1pdDsKICAgICAgdGhpcy5jaGVja1RyaW0oKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldChrZXkpIHsKICAgICAgdmFyIHRvdWNoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAyOwogICAgICByZXR1cm4gX2dldChfZ2V0UHJvdG90eXBlT2YoTFJVQ2FjaGUucHJvdG90eXBlKSwgImdldCIsIHRoaXMpLmNhbGwodGhpcywga2V5LCB0b3VjaCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicGVlayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGVlayhrZXkpIHsKICAgICAgcmV0dXJuIF9nZXQoX2dldFByb3RvdHlwZU9mKExSVUNhY2hlLnByb3RvdHlwZSksICJnZXQiLCB0aGlzKS5jYWxsKHRoaXMsIGtleSwgMCAvKiBUb3VjaC5Ob25lICovKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKExSVUNhY2hlLnByb3RvdHlwZSksICJzZXQiLCB0aGlzKS5jYWxsKHRoaXMsIGtleSwgdmFsdWUsIDIgLyogVG91Y2guQXNOZXcgKi8pOwogICAgICB0aGlzLmNoZWNrVHJpbSgpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGVja1RyaW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrVHJpbSgpIHsKICAgICAgaWYgKHRoaXMuc2l6ZSA+IHRoaXMuX2xpbWl0KSB7CiAgICAgICAgdGhpcy50cmltT2xkKE1hdGgucm91bmQodGhpcy5fbGltaXQgKiB0aGlzLl9yYXRpbykpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBMUlVDYWNoZTsKfShMaW5rZWRNYXApOw=="},{"version":3,"names":["_a","_b","compare","compareIgnoreCase","compareSubstring","compareSubstringIgnoreCase","StringIterator","_value","_pos","key","length","a","aCode","charCodeAt","thisCode","ConfigKeysIterator","_caseSensitive","_from","_to","next","justSeps","ch","substring","PathIterator","_splitOnBackslash","_valueLen","pos","UriIterator","_ignorePathCasing","_ignoreQueryAndFragment","_states","_stateIdx","scheme","push","authority","path","_pathIterator","reset","value","query","fragment","hasNext","cmp","Error","TernarySearchTreeNode","height","tmp","right","left","updateHeight","Math","max","heightLeft","heightRight","_c","_d","TernarySearchTree","segments","_iter","_root","undefined","element","iter","node","segment","stack","val","mid","oldElement","i","bf","balanceFactor","d1","d2","rotateLeft","rotateRight","_getNode","_delete","superStr","min","_min","newChild","dir","parent","candidate","_entries","callback","result","_dfsEntries","Symbol","iterator","bucket","ignorePathCasing","ignoreQueryAndFragment","ResourceMapEntry","uri","ResourceMap","mapOrKeyFn","toKey","map","Map","defaultToKey","resource","set","get","has","size","clear","delete","clb","thisArg","bind","_","entry","values","toStringTag","toString","LinkedMap","_map","_head","_tail","_size","_state","touch","item","previous","addItemLast","addItemFirst","remove","removeItem","callbackfn","state","current","done","entries","newSize","currentSize","data","forEach","LRUCache","limit","ratio","_limit","_ratio","checkTrim","trimOld","round"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/map.js"],"sourcesContent":["var _a, _b;\nimport { compare, compareIgnoreCase, compareSubstring, compareSubstringIgnoreCase } from './strings.js';\nexport class StringIterator {\n    constructor() {\n        this._value = '';\n        this._pos = 0;\n    }\n    reset(key) {\n        this._value = key;\n        this._pos = 0;\n        return this;\n    }\n    next() {\n        this._pos += 1;\n        return this;\n    }\n    hasNext() {\n        return this._pos < this._value.length - 1;\n    }\n    cmp(a) {\n        const aCode = a.charCodeAt(0);\n        const thisCode = this._value.charCodeAt(this._pos);\n        return aCode - thisCode;\n    }\n    value() {\n        return this._value[this._pos];\n    }\n}\nexport class ConfigKeysIterator {\n    constructor(_caseSensitive = true) {\n        this._caseSensitive = _caseSensitive;\n    }\n    reset(key) {\n        this._value = key;\n        this._from = 0;\n        this._to = 0;\n        return this.next();\n    }\n    hasNext() {\n        return this._to < this._value.length;\n    }\n    next() {\n        // this._data = key.split(/[\\\\/]/).filter(s => !!s);\n        this._from = this._to;\n        let justSeps = true;\n        for (; this._to < this._value.length; this._to++) {\n            const ch = this._value.charCodeAt(this._to);\n            if (ch === 46 /* CharCode.Period */) {\n                if (justSeps) {\n                    this._from++;\n                }\n                else {\n                    break;\n                }\n            }\n            else {\n                justSeps = false;\n            }\n        }\n        return this;\n    }\n    cmp(a) {\n        return this._caseSensitive\n            ? compareSubstring(a, this._value, 0, a.length, this._from, this._to)\n            : compareSubstringIgnoreCase(a, this._value, 0, a.length, this._from, this._to);\n    }\n    value() {\n        return this._value.substring(this._from, this._to);\n    }\n}\nexport class PathIterator {\n    constructor(_splitOnBackslash = true, _caseSensitive = true) {\n        this._splitOnBackslash = _splitOnBackslash;\n        this._caseSensitive = _caseSensitive;\n    }\n    reset(key) {\n        this._from = 0;\n        this._to = 0;\n        this._value = key;\n        this._valueLen = key.length;\n        for (let pos = key.length - 1; pos >= 0; pos--, this._valueLen--) {\n            const ch = this._value.charCodeAt(pos);\n            if (!(ch === 47 /* CharCode.Slash */ || this._splitOnBackslash && ch === 92 /* CharCode.Backslash */)) {\n                break;\n            }\n        }\n        return this.next();\n    }\n    hasNext() {\n        return this._to < this._valueLen;\n    }\n    next() {\n        // this._data = key.split(/[\\\\/]/).filter(s => !!s);\n        this._from = this._to;\n        let justSeps = true;\n        for (; this._to < this._valueLen; this._to++) {\n            const ch = this._value.charCodeAt(this._to);\n            if (ch === 47 /* CharCode.Slash */ || this._splitOnBackslash && ch === 92 /* CharCode.Backslash */) {\n                if (justSeps) {\n                    this._from++;\n                }\n                else {\n                    break;\n                }\n            }\n            else {\n                justSeps = false;\n            }\n        }\n        return this;\n    }\n    cmp(a) {\n        return this._caseSensitive\n            ? compareSubstring(a, this._value, 0, a.length, this._from, this._to)\n            : compareSubstringIgnoreCase(a, this._value, 0, a.length, this._from, this._to);\n    }\n    value() {\n        return this._value.substring(this._from, this._to);\n    }\n}\nexport class UriIterator {\n    constructor(_ignorePathCasing, _ignoreQueryAndFragment) {\n        this._ignorePathCasing = _ignorePathCasing;\n        this._ignoreQueryAndFragment = _ignoreQueryAndFragment;\n        this._states = [];\n        this._stateIdx = 0;\n    }\n    reset(key) {\n        this._value = key;\n        this._states = [];\n        if (this._value.scheme) {\n            this._states.push(1 /* UriIteratorState.Scheme */);\n        }\n        if (this._value.authority) {\n            this._states.push(2 /* UriIteratorState.Authority */);\n        }\n        if (this._value.path) {\n            this._pathIterator = new PathIterator(false, !this._ignorePathCasing(key));\n            this._pathIterator.reset(key.path);\n            if (this._pathIterator.value()) {\n                this._states.push(3 /* UriIteratorState.Path */);\n            }\n        }\n        if (!this._ignoreQueryAndFragment(key)) {\n            if (this._value.query) {\n                this._states.push(4 /* UriIteratorState.Query */);\n            }\n            if (this._value.fragment) {\n                this._states.push(5 /* UriIteratorState.Fragment */);\n            }\n        }\n        this._stateIdx = 0;\n        return this;\n    }\n    next() {\n        if (this._states[this._stateIdx] === 3 /* UriIteratorState.Path */ && this._pathIterator.hasNext()) {\n            this._pathIterator.next();\n        }\n        else {\n            this._stateIdx += 1;\n        }\n        return this;\n    }\n    hasNext() {\n        return (this._states[this._stateIdx] === 3 /* UriIteratorState.Path */ && this._pathIterator.hasNext())\n            || this._stateIdx < this._states.length - 1;\n    }\n    cmp(a) {\n        if (this._states[this._stateIdx] === 1 /* UriIteratorState.Scheme */) {\n            return compareIgnoreCase(a, this._value.scheme);\n        }\n        else if (this._states[this._stateIdx] === 2 /* UriIteratorState.Authority */) {\n            return compareIgnoreCase(a, this._value.authority);\n        }\n        else if (this._states[this._stateIdx] === 3 /* UriIteratorState.Path */) {\n            return this._pathIterator.cmp(a);\n        }\n        else if (this._states[this._stateIdx] === 4 /* UriIteratorState.Query */) {\n            return compare(a, this._value.query);\n        }\n        else if (this._states[this._stateIdx] === 5 /* UriIteratorState.Fragment */) {\n            return compare(a, this._value.fragment);\n        }\n        throw new Error();\n    }\n    value() {\n        if (this._states[this._stateIdx] === 1 /* UriIteratorState.Scheme */) {\n            return this._value.scheme;\n        }\n        else if (this._states[this._stateIdx] === 2 /* UriIteratorState.Authority */) {\n            return this._value.authority;\n        }\n        else if (this._states[this._stateIdx] === 3 /* UriIteratorState.Path */) {\n            return this._pathIterator.value();\n        }\n        else if (this._states[this._stateIdx] === 4 /* UriIteratorState.Query */) {\n            return this._value.query;\n        }\n        else if (this._states[this._stateIdx] === 5 /* UriIteratorState.Fragment */) {\n            return this._value.fragment;\n        }\n        throw new Error();\n    }\n}\nclass TernarySearchTreeNode {\n    constructor() {\n        this.height = 1;\n    }\n    rotateLeft() {\n        const tmp = this.right;\n        this.right = tmp.left;\n        tmp.left = this;\n        this.updateHeight();\n        tmp.updateHeight();\n        return tmp;\n    }\n    rotateRight() {\n        const tmp = this.left;\n        this.left = tmp.right;\n        tmp.right = this;\n        this.updateHeight();\n        tmp.updateHeight();\n        return tmp;\n    }\n    updateHeight() {\n        this.height = 1 + Math.max(this.heightLeft, this.heightRight);\n    }\n    balanceFactor() {\n        return this.heightRight - this.heightLeft;\n    }\n    get heightLeft() {\n        var _c, _d;\n        return (_d = (_c = this.left) === null || _c === void 0 ? void 0 : _c.height) !== null && _d !== void 0 ? _d : 0;\n    }\n    get heightRight() {\n        var _c, _d;\n        return (_d = (_c = this.right) === null || _c === void 0 ? void 0 : _c.height) !== null && _d !== void 0 ? _d : 0;\n    }\n}\nexport class TernarySearchTree {\n    constructor(segments) {\n        this._iter = segments;\n    }\n    static forUris(ignorePathCasing = () => false, ignoreQueryAndFragment = () => false) {\n        return new TernarySearchTree(new UriIterator(ignorePathCasing, ignoreQueryAndFragment));\n    }\n    static forStrings() {\n        return new TernarySearchTree(new StringIterator());\n    }\n    static forConfigKeys() {\n        return new TernarySearchTree(new ConfigKeysIterator());\n    }\n    clear() {\n        this._root = undefined;\n    }\n    set(key, element) {\n        const iter = this._iter.reset(key);\n        let node;\n        if (!this._root) {\n            this._root = new TernarySearchTreeNode();\n            this._root.segment = iter.value();\n        }\n        const stack = [];\n        // find insert_node\n        node = this._root;\n        while (true) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                if (!node.left) {\n                    node.left = new TernarySearchTreeNode();\n                    node.left.segment = iter.value();\n                }\n                stack.push([-1 /* Dir.Left */, node]);\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                if (!node.right) {\n                    node.right = new TernarySearchTreeNode();\n                    node.right.segment = iter.value();\n                }\n                stack.push([1 /* Dir.Right */, node]);\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                if (!node.mid) {\n                    node.mid = new TernarySearchTreeNode();\n                    node.mid.segment = iter.value();\n                }\n                stack.push([0 /* Dir.Mid */, node]);\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        // set value\n        const oldElement = node.value;\n        node.value = element;\n        node.key = key;\n        // balance\n        for (let i = stack.length - 1; i >= 0; i--) {\n            const node = stack[i][1];\n            node.updateHeight();\n            const bf = node.balanceFactor();\n            if (bf < -1 || bf > 1) {\n                // needs rotate\n                const d1 = stack[i][0];\n                const d2 = stack[i + 1][0];\n                if (d1 === 1 /* Dir.Right */ && d2 === 1 /* Dir.Right */) {\n                    //right, right -> rotate left\n                    stack[i][1] = node.rotateLeft();\n                }\n                else if (d1 === -1 /* Dir.Left */ && d2 === -1 /* Dir.Left */) {\n                    // left, left -> rotate right\n                    stack[i][1] = node.rotateRight();\n                }\n                else if (d1 === 1 /* Dir.Right */ && d2 === -1 /* Dir.Left */) {\n                    // right, left -> double rotate right, left\n                    node.right = stack[i + 1][1] = stack[i + 1][1].rotateRight();\n                    stack[i][1] = node.rotateLeft();\n                }\n                else if (d1 === -1 /* Dir.Left */ && d2 === 1 /* Dir.Right */) {\n                    // left, right -> double rotate left, right\n                    node.left = stack[i + 1][1] = stack[i + 1][1].rotateLeft();\n                    stack[i][1] = node.rotateRight();\n                }\n                else {\n                    throw new Error();\n                }\n                // patch path to parent\n                if (i > 0) {\n                    switch (stack[i - 1][0]) {\n                        case -1 /* Dir.Left */:\n                            stack[i - 1][1].left = stack[i][1];\n                            break;\n                        case 1 /* Dir.Right */:\n                            stack[i - 1][1].right = stack[i][1];\n                            break;\n                        case 0 /* Dir.Mid */:\n                            stack[i - 1][1].mid = stack[i][1];\n                            break;\n                    }\n                }\n                else {\n                    this._root = stack[0][1];\n                }\n            }\n        }\n        return oldElement;\n    }\n    get(key) {\n        var _c;\n        return (_c = this._getNode(key)) === null || _c === void 0 ? void 0 : _c.value;\n    }\n    _getNode(key) {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        return node;\n    }\n    has(key) {\n        const node = this._getNode(key);\n        return !((node === null || node === void 0 ? void 0 : node.value) === undefined && (node === null || node === void 0 ? void 0 : node.mid) === undefined);\n    }\n    delete(key) {\n        return this._delete(key, false);\n    }\n    deleteSuperstr(key) {\n        return this._delete(key, true);\n    }\n    _delete(key, superStr) {\n        var _c;\n        const iter = this._iter.reset(key);\n        const stack = [];\n        let node = this._root;\n        // find node\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                stack.push([-1 /* Dir.Left */, node]);\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                stack.push([1 /* Dir.Right */, node]);\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                stack.push([0 /* Dir.Mid */, node]);\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        if (!node) {\n            // node not found\n            return;\n        }\n        if (superStr) {\n            // removing children, reset height\n            node.left = undefined;\n            node.mid = undefined;\n            node.right = undefined;\n            node.height = 1;\n        }\n        else {\n            // removing element\n            node.key = undefined;\n            node.value = undefined;\n        }\n        // BST node removal\n        if (!node.mid && !node.value) {\n            if (node.left && node.right) {\n                // full node\n                const min = this._min(node.right);\n                const { key, value, segment } = min;\n                this._delete(min.key, false);\n                node.key = key;\n                node.value = value;\n                node.segment = segment;\n            }\n            else {\n                // empty or half empty\n                const newChild = (_c = node.left) !== null && _c !== void 0 ? _c : node.right;\n                if (stack.length > 0) {\n                    const [dir, parent] = stack[stack.length - 1];\n                    switch (dir) {\n                        case -1 /* Dir.Left */:\n                            parent.left = newChild;\n                            break;\n                        case 0 /* Dir.Mid */:\n                            parent.mid = newChild;\n                            break;\n                        case 1 /* Dir.Right */:\n                            parent.right = newChild;\n                            break;\n                    }\n                }\n                else {\n                    this._root = newChild;\n                }\n            }\n        }\n        // AVL balance\n        for (let i = stack.length - 1; i >= 0; i--) {\n            const node = stack[i][1];\n            node.updateHeight();\n            const bf = node.balanceFactor();\n            if (bf > 1) {\n                // right heavy\n                if (node.right.balanceFactor() >= 0) {\n                    // right, right -> rotate left\n                    stack[i][1] = node.rotateLeft();\n                }\n                else {\n                    // right, left -> double rotate\n                    node.right = node.right.rotateRight();\n                    stack[i][1] = node.rotateLeft();\n                }\n            }\n            else if (bf < -1) {\n                // left heavy\n                if (node.left.balanceFactor() <= 0) {\n                    // left, left -> rotate right\n                    stack[i][1] = node.rotateRight();\n                }\n                else {\n                    // left, right -> double rotate\n                    node.left = node.left.rotateLeft();\n                    stack[i][1] = node.rotateRight();\n                }\n            }\n            // patch path to parent\n            if (i > 0) {\n                switch (stack[i - 1][0]) {\n                    case -1 /* Dir.Left */:\n                        stack[i - 1][1].left = stack[i][1];\n                        break;\n                    case 1 /* Dir.Right */:\n                        stack[i - 1][1].right = stack[i][1];\n                        break;\n                    case 0 /* Dir.Mid */:\n                        stack[i - 1][1].mid = stack[i][1];\n                        break;\n                }\n            }\n            else {\n                this._root = stack[0][1];\n            }\n        }\n    }\n    _min(node) {\n        while (node.left) {\n            node = node.left;\n        }\n        return node;\n    }\n    findSubstr(key) {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        let candidate = undefined;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                candidate = node.value || candidate;\n                node = node.mid;\n            }\n            else {\n                break;\n            }\n        }\n        return node && node.value || candidate;\n    }\n    findSuperstr(key) {\n        const iter = this._iter.reset(key);\n        let node = this._root;\n        while (node) {\n            const val = iter.cmp(node.segment);\n            if (val > 0) {\n                // left\n                node = node.left;\n            }\n            else if (val < 0) {\n                // right\n                node = node.right;\n            }\n            else if (iter.hasNext()) {\n                // mid\n                iter.next();\n                node = node.mid;\n            }\n            else {\n                // collect\n                if (!node.mid) {\n                    return undefined;\n                }\n                else {\n                    return this._entries(node.mid);\n                }\n            }\n        }\n        return undefined;\n    }\n    forEach(callback) {\n        for (const [key, value] of this) {\n            callback(value, key);\n        }\n    }\n    *[Symbol.iterator]() {\n        yield* this._entries(this._root);\n    }\n    _entries(node) {\n        const result = [];\n        this._dfsEntries(node, result);\n        return result[Symbol.iterator]();\n    }\n    _dfsEntries(node, bucket) {\n        // DFS\n        if (!node) {\n            return;\n        }\n        if (node.left) {\n            this._dfsEntries(node.left, bucket);\n        }\n        if (node.value) {\n            bucket.push([node.key, node.value]);\n        }\n        if (node.mid) {\n            this._dfsEntries(node.mid, bucket);\n        }\n        if (node.right) {\n            this._dfsEntries(node.right, bucket);\n        }\n    }\n}\nclass ResourceMapEntry {\n    constructor(uri, value) {\n        this.uri = uri;\n        this.value = value;\n    }\n}\nexport class ResourceMap {\n    constructor(mapOrKeyFn, toKey) {\n        this[_a] = 'ResourceMap';\n        if (mapOrKeyFn instanceof ResourceMap) {\n            this.map = new Map(mapOrKeyFn.map);\n            this.toKey = toKey !== null && toKey !== void 0 ? toKey : ResourceMap.defaultToKey;\n        }\n        else {\n            this.map = new Map();\n            this.toKey = mapOrKeyFn !== null && mapOrKeyFn !== void 0 ? mapOrKeyFn : ResourceMap.defaultToKey;\n        }\n    }\n    set(resource, value) {\n        this.map.set(this.toKey(resource), new ResourceMapEntry(resource, value));\n        return this;\n    }\n    get(resource) {\n        var _c;\n        return (_c = this.map.get(this.toKey(resource))) === null || _c === void 0 ? void 0 : _c.value;\n    }\n    has(resource) {\n        return this.map.has(this.toKey(resource));\n    }\n    get size() {\n        return this.map.size;\n    }\n    clear() {\n        this.map.clear();\n    }\n    delete(resource) {\n        return this.map.delete(this.toKey(resource));\n    }\n    forEach(clb, thisArg) {\n        if (typeof thisArg !== 'undefined') {\n            clb = clb.bind(thisArg);\n        }\n        for (const [_, entry] of this.map) {\n            clb(entry.value, entry.uri, this);\n        }\n    }\n    *values() {\n        for (const entry of this.map.values()) {\n            yield entry.value;\n        }\n    }\n    *keys() {\n        for (const entry of this.map.values()) {\n            yield entry.uri;\n        }\n    }\n    *entries() {\n        for (const entry of this.map.values()) {\n            yield [entry.uri, entry.value];\n        }\n    }\n    *[(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        for (const [, entry] of this.map) {\n            yield [entry.uri, entry.value];\n        }\n    }\n}\nResourceMap.defaultToKey = (resource) => resource.toString();\nexport class LinkedMap {\n    constructor() {\n        this[_b] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        var _c;\n        return (_c = this._head) === null || _c === void 0 ? void 0 : _c.value;\n    }\n    get last() {\n        var _c;\n        return (_c = this._tail) === null || _c === void 0 ? void 0 : _c.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = 0 /* Touch.None */) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== 0 /* Touch.None */) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = 0 /* Touch.None */) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== 0 /* Touch.None */) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case 0 /* Touch.None */:\n                    this.addItemLast(item);\n                    break;\n                case 1 /* Touch.AsOld */:\n                    this.addItemFirst(item);\n                    break;\n                case 2 /* Touch.AsNew */:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const map = this;\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]() {\n                return iterator;\n            },\n            next() {\n                if (map._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_b = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happen if size === 1 which is handled\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happen if size === 1 which is handled\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== 1 /* Touch.AsOld */ && touch !== 2 /* Touch.AsNew */)) {\n            return;\n        }\n        if (touch === 1 /* Touch.AsOld */) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === 2 /* Touch.AsNew */) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexport class LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get(key, touch = 2 /* Touch.AsNew */) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, 0 /* Touch.None */);\n    }\n    set(key, value) {\n        super.set(key, value, 2 /* Touch.AsNew */);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,EAAE,EAAEC,EAAE;AACV,SAASC,OAAO,EAAEC,iBAAiB,EAAEC,gBAAgB,EAAEC,0BAA0B,QAAQ,cAAc;AACvG,WAAaC,cAAc;EACvB,0BAAc;IAAA;IACV,IAAI,CAACC,MAAM,GAAG,EAAE;IAChB,IAAI,CAACC,IAAI,GAAG,CAAC;EACjB;EAAC;IAAA;IAAA,OACD,eAAMC,GAAG,EAAE;MACP,IAAI,CAACF,MAAM,GAAGE,GAAG;MACjB,IAAI,CAACD,IAAI,GAAG,CAAC;MACb,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,gBAAO;MACH,IAAI,CAACA,IAAI,IAAI,CAAC;MACd,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,OAAO,IAAI,CAACA,IAAI,GAAG,IAAI,CAACD,MAAM,CAACG,MAAM,GAAG,CAAC;IAC7C;EAAC;IAAA;IAAA,OACD,aAAIC,CAAC,EAAE;MACH,IAAMC,KAAK,GAAGD,CAAC,CAACE,UAAU,CAAC,CAAC,CAAC;MAC7B,IAAMC,QAAQ,GAAG,IAAI,CAACP,MAAM,CAACM,UAAU,CAAC,IAAI,CAACL,IAAI,CAAC;MAClD,OAAOI,KAAK,GAAGE,QAAQ;IAC3B;EAAC;IAAA;IAAA,OACD,iBAAQ;MACJ,OAAO,IAAI,CAACP,MAAM,CAAC,IAAI,CAACC,IAAI,CAAC;IACjC;EAAC;EAAA;AAAA;AAEL,WAAaO,kBAAkB;EAC3B,8BAAmC;IAAA,IAAvBC,cAAc,uEAAG,IAAI;IAAA;IAC7B,IAAI,CAACA,cAAc,GAAGA,cAAc;EACxC;EAAC;IAAA;IAAA,OACD,eAAMP,GAAG,EAAE;MACP,IAAI,CAACF,MAAM,GAAGE,GAAG;MACjB,IAAI,CAACQ,KAAK,GAAG,CAAC;MACd,IAAI,CAACC,GAAG,GAAG,CAAC;MACZ,OAAO,IAAI,CAACC,IAAI,EAAE;IACtB;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,OAAO,IAAI,CAACD,GAAG,GAAG,IAAI,CAACX,MAAM,CAACG,MAAM;IACxC;EAAC;IAAA;IAAA,OACD,gBAAO;MACH;MACA,IAAI,CAACO,KAAK,GAAG,IAAI,CAACC,GAAG;MACrB,IAAIE,QAAQ,GAAG,IAAI;MACnB,OAAO,IAAI,CAACF,GAAG,GAAG,IAAI,CAACX,MAAM,CAACG,MAAM,EAAE,IAAI,CAACQ,GAAG,EAAE,EAAE;QAC9C,IAAMG,EAAE,GAAG,IAAI,CAACd,MAAM,CAACM,UAAU,CAAC,IAAI,CAACK,GAAG,CAAC;QAC3C,IAAIG,EAAE,KAAK,EAAE,CAAC,uBAAuB;UACjC,IAAID,QAAQ,EAAE;YACV,IAAI,CAACH,KAAK,EAAE;UAChB,CAAC,MACI;YACD;UACJ;QACJ,CAAC,MACI;UACDG,QAAQ,GAAG,KAAK;QACpB;MACJ;MACA,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,aAAIT,CAAC,EAAE;MACH,OAAO,IAAI,CAACK,cAAc,GACpBZ,gBAAgB,CAACO,CAAC,EAAE,IAAI,CAACJ,MAAM,EAAE,CAAC,EAAEI,CAAC,CAACD,MAAM,EAAE,IAAI,CAACO,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC,GACnEb,0BAA0B,CAACM,CAAC,EAAE,IAAI,CAACJ,MAAM,EAAE,CAAC,EAAEI,CAAC,CAACD,MAAM,EAAE,IAAI,CAACO,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC;IACvF;EAAC;IAAA;IAAA,OACD,iBAAQ;MACJ,OAAO,IAAI,CAACX,MAAM,CAACe,SAAS,CAAC,IAAI,CAACL,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC;IACtD;EAAC;EAAA;AAAA;AAEL,WAAaK,YAAY;EACrB,wBAA6D;IAAA,IAAjDC,iBAAiB,uEAAG,IAAI;IAAA,IAAER,cAAc,uEAAG,IAAI;IAAA;IACvD,IAAI,CAACQ,iBAAiB,GAAGA,iBAAiB;IAC1C,IAAI,CAACR,cAAc,GAAGA,cAAc;EACxC;EAAC;IAAA;IAAA,OACD,eAAMP,GAAG,EAAE;MACP,IAAI,CAACQ,KAAK,GAAG,CAAC;MACd,IAAI,CAACC,GAAG,GAAG,CAAC;MACZ,IAAI,CAACX,MAAM,GAAGE,GAAG;MACjB,IAAI,CAACgB,SAAS,GAAGhB,GAAG,CAACC,MAAM;MAC3B,KAAK,IAAIgB,GAAG,GAAGjB,GAAG,CAACC,MAAM,GAAG,CAAC,EAAEgB,GAAG,IAAI,CAAC,EAAEA,GAAG,EAAE,EAAE,IAAI,CAACD,SAAS,EAAE,EAAE;QAC9D,IAAMJ,EAAE,GAAG,IAAI,CAACd,MAAM,CAACM,UAAU,CAACa,GAAG,CAAC;QACtC,IAAI,EAAEL,EAAE,KAAK,EAAE,CAAC,wBAAwB,IAAI,CAACG,iBAAiB,IAAIH,EAAE,KAAK,EAAE,CAAC,yBAAyB,EAAE;UACnG;QACJ;MACJ;MACA,OAAO,IAAI,CAACF,IAAI,EAAE;IACtB;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,OAAO,IAAI,CAACD,GAAG,GAAG,IAAI,CAACO,SAAS;IACpC;EAAC;IAAA;IAAA,OACD,gBAAO;MACH;MACA,IAAI,CAACR,KAAK,GAAG,IAAI,CAACC,GAAG;MACrB,IAAIE,QAAQ,GAAG,IAAI;MACnB,OAAO,IAAI,CAACF,GAAG,GAAG,IAAI,CAACO,SAAS,EAAE,IAAI,CAACP,GAAG,EAAE,EAAE;QAC1C,IAAMG,EAAE,GAAG,IAAI,CAACd,MAAM,CAACM,UAAU,CAAC,IAAI,CAACK,GAAG,CAAC;QAC3C,IAAIG,EAAE,KAAK,EAAE,CAAC,wBAAwB,IAAI,CAACG,iBAAiB,IAAIH,EAAE,KAAK,EAAE,CAAC,0BAA0B;UAChG,IAAID,QAAQ,EAAE;YACV,IAAI,CAACH,KAAK,EAAE;UAChB,CAAC,MACI;YACD;UACJ;QACJ,CAAC,MACI;UACDG,QAAQ,GAAG,KAAK;QACpB;MACJ;MACA,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,aAAIT,CAAC,EAAE;MACH,OAAO,IAAI,CAACK,cAAc,GACpBZ,gBAAgB,CAACO,CAAC,EAAE,IAAI,CAACJ,MAAM,EAAE,CAAC,EAAEI,CAAC,CAACD,MAAM,EAAE,IAAI,CAACO,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC,GACnEb,0BAA0B,CAACM,CAAC,EAAE,IAAI,CAACJ,MAAM,EAAE,CAAC,EAAEI,CAAC,CAACD,MAAM,EAAE,IAAI,CAACO,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC;IACvF;EAAC;IAAA;IAAA,OACD,iBAAQ;MACJ,OAAO,IAAI,CAACX,MAAM,CAACe,SAAS,CAAC,IAAI,CAACL,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC;IACtD;EAAC;EAAA;AAAA;AAEL,WAAaS,WAAW;EACpB,qBAAYC,iBAAiB,EAAEC,uBAAuB,EAAE;IAAA;IACpD,IAAI,CAACD,iBAAiB,GAAGA,iBAAiB;IAC1C,IAAI,CAACC,uBAAuB,GAAGA,uBAAuB;IACtD,IAAI,CAACC,OAAO,GAAG,EAAE;IACjB,IAAI,CAACC,SAAS,GAAG,CAAC;EACtB;EAAC;IAAA;IAAA,OACD,eAAMtB,GAAG,EAAE;MACP,IAAI,CAACF,MAAM,GAAGE,GAAG;MACjB,IAAI,CAACqB,OAAO,GAAG,EAAE;MACjB,IAAI,IAAI,CAACvB,MAAM,CAACyB,MAAM,EAAE;QACpB,IAAI,CAACF,OAAO,CAACG,IAAI,CAAC,CAAC,CAAC,8BAA8B;MACtD;;MACA,IAAI,IAAI,CAAC1B,MAAM,CAAC2B,SAAS,EAAE;QACvB,IAAI,CAACJ,OAAO,CAACG,IAAI,CAAC,CAAC,CAAC,iCAAiC;MACzD;;MACA,IAAI,IAAI,CAAC1B,MAAM,CAAC4B,IAAI,EAAE;QAClB,IAAI,CAACC,aAAa,GAAG,IAAIb,YAAY,CAAC,KAAK,EAAE,CAAC,IAAI,CAACK,iBAAiB,CAACnB,GAAG,CAAC,CAAC;QAC1E,IAAI,CAAC2B,aAAa,CAACC,KAAK,CAAC5B,GAAG,CAAC0B,IAAI,CAAC;QAClC,IAAI,IAAI,CAACC,aAAa,CAACE,KAAK,EAAE,EAAE;UAC5B,IAAI,CAACR,OAAO,CAACG,IAAI,CAAC,CAAC,CAAC,4BAA4B;QACpD;MACJ;;MACA,IAAI,CAAC,IAAI,CAACJ,uBAAuB,CAACpB,GAAG,CAAC,EAAE;QACpC,IAAI,IAAI,CAACF,MAAM,CAACgC,KAAK,EAAE;UACnB,IAAI,CAACT,OAAO,CAACG,IAAI,CAAC,CAAC,CAAC,6BAA6B;QACrD;;QACA,IAAI,IAAI,CAAC1B,MAAM,CAACiC,QAAQ,EAAE;UACtB,IAAI,CAACV,OAAO,CAACG,IAAI,CAAC,CAAC,CAAC,gCAAgC;QACxD;MACJ;;MACA,IAAI,CAACF,SAAS,GAAG,CAAC;MAClB,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,gBAAO;MACH,IAAI,IAAI,CAACD,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,+BAA+B,IAAI,CAACK,aAAa,CAACK,OAAO,EAAE,EAAE;QAChG,IAAI,CAACL,aAAa,CAACjB,IAAI,EAAE;MAC7B,CAAC,MACI;QACD,IAAI,CAACY,SAAS,IAAI,CAAC;MACvB;MACA,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,OAAQ,IAAI,CAACD,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,+BAA+B,IAAI,CAACK,aAAa,CAACK,OAAO,EAAE,IAC/F,IAAI,CAACV,SAAS,GAAG,IAAI,CAACD,OAAO,CAACpB,MAAM,GAAG,CAAC;IACnD;EAAC;IAAA;IAAA,OACD,aAAIC,CAAC,EAAE;MACH,IAAI,IAAI,CAACmB,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,+BAA+B;QAClE,OAAO5B,iBAAiB,CAACQ,CAAC,EAAE,IAAI,CAACJ,MAAM,CAACyB,MAAM,CAAC;MACnD,CAAC,MACI,IAAI,IAAI,CAACF,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,kCAAkC;QAC1E,OAAO5B,iBAAiB,CAACQ,CAAC,EAAE,IAAI,CAACJ,MAAM,CAAC2B,SAAS,CAAC;MACtD,CAAC,MACI,IAAI,IAAI,CAACJ,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,6BAA6B;QACrE,OAAO,IAAI,CAACK,aAAa,CAACM,GAAG,CAAC/B,CAAC,CAAC;MACpC,CAAC,MACI,IAAI,IAAI,CAACmB,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,8BAA8B;QACtE,OAAO7B,OAAO,CAACS,CAAC,EAAE,IAAI,CAACJ,MAAM,CAACgC,KAAK,CAAC;MACxC,CAAC,MACI,IAAI,IAAI,CAACT,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,iCAAiC;QACzE,OAAO7B,OAAO,CAACS,CAAC,EAAE,IAAI,CAACJ,MAAM,CAACiC,QAAQ,CAAC;MAC3C;MACA,MAAM,IAAIG,KAAK,EAAE;IACrB;EAAC;IAAA;IAAA,OACD,iBAAQ;MACJ,IAAI,IAAI,CAACb,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,+BAA+B;QAClE,OAAO,IAAI,CAACxB,MAAM,CAACyB,MAAM;MAC7B,CAAC,MACI,IAAI,IAAI,CAACF,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,kCAAkC;QAC1E,OAAO,IAAI,CAACxB,MAAM,CAAC2B,SAAS;MAChC,CAAC,MACI,IAAI,IAAI,CAACJ,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,6BAA6B;QACrE,OAAO,IAAI,CAACK,aAAa,CAACE,KAAK,EAAE;MACrC,CAAC,MACI,IAAI,IAAI,CAACR,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,8BAA8B;QACtE,OAAO,IAAI,CAACxB,MAAM,CAACgC,KAAK;MAC5B,CAAC,MACI,IAAI,IAAI,CAACT,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,iCAAiC;QACzE,OAAO,IAAI,CAACxB,MAAM,CAACiC,QAAQ;MAC/B;MACA,MAAM,IAAIG,KAAK,EAAE;IACrB;EAAC;EAAA;AAAA;AACJ,IACKC,qBAAqB;EACvB,iCAAc;IAAA;IACV,IAAI,CAACC,MAAM,GAAG,CAAC;EACnB;EAAC;IAAA;IAAA,OACD,sBAAa;MACT,IAAMC,GAAG,GAAG,IAAI,CAACC,KAAK;MACtB,IAAI,CAACA,KAAK,GAAGD,GAAG,CAACE,IAAI;MACrBF,GAAG,CAACE,IAAI,GAAG,IAAI;MACf,IAAI,CAACC,YAAY,EAAE;MACnBH,GAAG,CAACG,YAAY,EAAE;MAClB,OAAOH,GAAG;IACd;EAAC;IAAA;IAAA,OACD,uBAAc;MACV,IAAMA,GAAG,GAAG,IAAI,CAACE,IAAI;MACrB,IAAI,CAACA,IAAI,GAAGF,GAAG,CAACC,KAAK;MACrBD,GAAG,CAACC,KAAK,GAAG,IAAI;MAChB,IAAI,CAACE,YAAY,EAAE;MACnBH,GAAG,CAACG,YAAY,EAAE;MAClB,OAAOH,GAAG;IACd;EAAC;IAAA;IAAA,OACD,wBAAe;MACX,IAAI,CAACD,MAAM,GAAG,CAAC,GAAGK,IAAI,CAACC,GAAG,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAACC,WAAW,CAAC;IACjE;EAAC;IAAA;IAAA,OACD,yBAAgB;MACZ,OAAO,IAAI,CAACA,WAAW,GAAG,IAAI,CAACD,UAAU;IAC7C;EAAC;IAAA;IAAA,KACD,eAAiB;MACb,IAAIE,EAAE,EAAEC,EAAE;MACV,OAAO,CAACA,EAAE,GAAG,CAACD,EAAE,GAAG,IAAI,CAACN,IAAI,MAAM,IAAI,IAAIM,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACT,MAAM,MAAM,IAAI,IAAIU,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC;IACpH;EAAC;IAAA;IAAA,KACD,eAAkB;MACd,IAAID,EAAE,EAAEC,EAAE;MACV,OAAO,CAACA,EAAE,GAAG,CAACD,EAAE,GAAG,IAAI,CAACP,KAAK,MAAM,IAAI,IAAIO,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACT,MAAM,MAAM,IAAI,IAAIU,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC;IACrH;EAAC;EAAA;AAAA;AAEL,WAAaC,iBAAiB;EAC1B,2BAAYC,QAAQ,EAAE;IAAA;IAClB,IAAI,CAACC,KAAK,GAAGD,QAAQ;EACzB;EAAC;IAAA;IAAA,OAUD,iBAAQ;MACJ,IAAI,CAACE,KAAK,GAAGC,SAAS;IAC1B;EAAC;IAAA;IAAA,OACD,aAAInD,GAAG,EAAEoD,OAAO,EAAE;MACd,IAAMC,IAAI,GAAG,IAAI,CAACJ,KAAK,CAACrB,KAAK,CAAC5B,GAAG,CAAC;MAClC,IAAIsD,IAAI;MACR,IAAI,CAAC,IAAI,CAACJ,KAAK,EAAE;QACb,IAAI,CAACA,KAAK,GAAG,IAAIf,qBAAqB,EAAE;QACxC,IAAI,CAACe,KAAK,CAACK,OAAO,GAAGF,IAAI,CAACxB,KAAK,EAAE;MACrC;MACA,IAAM2B,KAAK,GAAG,EAAE;MAChB;MACAF,IAAI,GAAG,IAAI,CAACJ,KAAK;MACjB,OAAO,IAAI,EAAE;QACT,IAAMO,GAAG,GAAGJ,IAAI,CAACpB,GAAG,CAACqB,IAAI,CAACC,OAAO,CAAC;QAClC,IAAIE,GAAG,GAAG,CAAC,EAAE;UACT;UACA,IAAI,CAACH,IAAI,CAACf,IAAI,EAAE;YACZe,IAAI,CAACf,IAAI,GAAG,IAAIJ,qBAAqB,EAAE;YACvCmB,IAAI,CAACf,IAAI,CAACgB,OAAO,GAAGF,IAAI,CAACxB,KAAK,EAAE;UACpC;UACA2B,KAAK,CAAChC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,gBAAgB8B,IAAI,CAAC,CAAC;UACrCA,IAAI,GAAGA,IAAI,CAACf,IAAI;QACpB,CAAC,MACI,IAAIkB,GAAG,GAAG,CAAC,EAAE;UACd;UACA,IAAI,CAACH,IAAI,CAAChB,KAAK,EAAE;YACbgB,IAAI,CAAChB,KAAK,GAAG,IAAIH,qBAAqB,EAAE;YACxCmB,IAAI,CAAChB,KAAK,CAACiB,OAAO,GAAGF,IAAI,CAACxB,KAAK,EAAE;UACrC;UACA2B,KAAK,CAAChC,IAAI,CAAC,CAAC,CAAC,CAAC,iBAAiB8B,IAAI,CAAC,CAAC;UACrCA,IAAI,GAAGA,IAAI,CAAChB,KAAK;QACrB,CAAC,MACI,IAAIe,IAAI,CAACrB,OAAO,EAAE,EAAE;UACrB;UACAqB,IAAI,CAAC3C,IAAI,EAAE;UACX,IAAI,CAAC4C,IAAI,CAACI,GAAG,EAAE;YACXJ,IAAI,CAACI,GAAG,GAAG,IAAIvB,qBAAqB,EAAE;YACtCmB,IAAI,CAACI,GAAG,CAACH,OAAO,GAAGF,IAAI,CAACxB,KAAK,EAAE;UACnC;UACA2B,KAAK,CAAChC,IAAI,CAAC,CAAC,CAAC,CAAC,eAAe8B,IAAI,CAAC,CAAC;UACnCA,IAAI,GAAGA,IAAI,CAACI,GAAG;QACnB,CAAC,MACI;UACD;QACJ;MACJ;MACA;MACA,IAAMC,UAAU,GAAGL,IAAI,CAACzB,KAAK;MAC7ByB,IAAI,CAACzB,KAAK,GAAGuB,OAAO;MACpBE,IAAI,CAACtD,GAAG,GAAGA,GAAG;MACd;MACA,KAAK,IAAI4D,CAAC,GAAGJ,KAAK,CAACvD,MAAM,GAAG,CAAC,EAAE2D,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QACxC,IAAMN,KAAI,GAAGE,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;QACxBN,KAAI,CAACd,YAAY,EAAE;QACnB,IAAMqB,EAAE,GAAGP,KAAI,CAACQ,aAAa,EAAE;QAC/B,IAAID,EAAE,GAAG,CAAC,CAAC,IAAIA,EAAE,GAAG,CAAC,EAAE;UACnB;UACA,IAAME,EAAE,GAAGP,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;UACtB,IAAMI,EAAE,GAAGR,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;UAC1B,IAAIG,EAAE,KAAK,CAAC,CAAC,mBAAmBC,EAAE,KAAK,CAAC,CAAC,iBAAiB;YACtD;YACAR,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGN,KAAI,CAACW,UAAU,EAAE;UACnC,CAAC,MACI,IAAIF,EAAE,KAAK,CAAC,CAAC,CAAC,kBAAkBC,EAAE,KAAK,CAAC,CAAC,CAAC,gBAAgB;YAC3D;YACAR,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGN,KAAI,CAACY,WAAW,EAAE;UACpC,CAAC,MACI,IAAIH,EAAE,KAAK,CAAC,CAAC,mBAAmBC,EAAE,KAAK,CAAC,CAAC,CAAC,gBAAgB;YAC3D;YACAV,KAAI,CAAChB,KAAK,GAAGkB,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACM,WAAW,EAAE;YAC5DV,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGN,KAAI,CAACW,UAAU,EAAE;UACnC,CAAC,MACI,IAAIF,EAAE,KAAK,CAAC,CAAC,CAAC,kBAAkBC,EAAE,KAAK,CAAC,CAAC,iBAAiB;YAC3D;YACAV,KAAI,CAACf,IAAI,GAAGiB,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACK,UAAU,EAAE;YAC1DT,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGN,KAAI,CAACY,WAAW,EAAE;UACpC,CAAC,MACI;YACD,MAAM,IAAIhC,KAAK,EAAE;UACrB;UACA;UACA,IAAI0B,CAAC,GAAG,CAAC,EAAE;YACP,QAAQJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;cACnB,KAAK,CAAC,CAAC,CAAC;gBACJJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACrB,IAAI,GAAGiB,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;gBAClC;cACJ,KAAK,CAAC,CAAC;gBACHJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACtB,KAAK,GAAGkB,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnC;cACJ,KAAK,CAAC,CAAC;gBACHJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACF,GAAG,GAAGF,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjC;YAAM;UAElB,CAAC,MACI;YACD,IAAI,CAACV,KAAK,GAAGM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UAC5B;QACJ;MACJ;MACA,OAAOG,UAAU;IACrB;EAAC;IAAA;IAAA,OACD,aAAI3D,GAAG,EAAE;MACL,IAAI6C,EAAE;MACN,OAAO,CAACA,EAAE,GAAG,IAAI,CAACsB,QAAQ,CAACnE,GAAG,CAAC,MAAM,IAAI,IAAI6C,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAChB,KAAK;IAClF;EAAC;IAAA;IAAA,OACD,kBAAS7B,GAAG,EAAE;MACV,IAAMqD,IAAI,GAAG,IAAI,CAACJ,KAAK,CAACrB,KAAK,CAAC5B,GAAG,CAAC;MAClC,IAAIsD,IAAI,GAAG,IAAI,CAACJ,KAAK;MACrB,OAAOI,IAAI,EAAE;QACT,IAAMG,GAAG,GAAGJ,IAAI,CAACpB,GAAG,CAACqB,IAAI,CAACC,OAAO,CAAC;QAClC,IAAIE,GAAG,GAAG,CAAC,EAAE;UACT;UACAH,IAAI,GAAGA,IAAI,CAACf,IAAI;QACpB,CAAC,MACI,IAAIkB,GAAG,GAAG,CAAC,EAAE;UACd;UACAH,IAAI,GAAGA,IAAI,CAAChB,KAAK;QACrB,CAAC,MACI,IAAIe,IAAI,CAACrB,OAAO,EAAE,EAAE;UACrB;UACAqB,IAAI,CAAC3C,IAAI,EAAE;UACX4C,IAAI,GAAGA,IAAI,CAACI,GAAG;QACnB,CAAC,MACI;UACD;QACJ;MACJ;MACA,OAAOJ,IAAI;IACf;EAAC;IAAA;IAAA,OACD,aAAItD,GAAG,EAAE;MACL,IAAMsD,IAAI,GAAG,IAAI,CAACa,QAAQ,CAACnE,GAAG,CAAC;MAC/B,OAAO,EAAE,CAACsD,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,IAAI,CAACzB,KAAK,MAAMsB,SAAS,IAAI,CAACG,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,IAAI,CAACI,GAAG,MAAMP,SAAS,CAAC;IAC5J;EAAC;IAAA;IAAA,OACD,iBAAOnD,GAAG,EAAE;MACR,OAAO,IAAI,CAACoE,OAAO,CAACpE,GAAG,EAAE,KAAK,CAAC;IACnC;EAAC;IAAA;IAAA,OACD,wBAAeA,GAAG,EAAE;MAChB,OAAO,IAAI,CAACoE,OAAO,CAACpE,GAAG,EAAE,IAAI,CAAC;IAClC;EAAC;IAAA;IAAA,OACD,iBAAQA,GAAG,EAAEqE,QAAQ,EAAE;MACnB,IAAIxB,EAAE;MACN,IAAMQ,IAAI,GAAG,IAAI,CAACJ,KAAK,CAACrB,KAAK,CAAC5B,GAAG,CAAC;MAClC,IAAMwD,KAAK,GAAG,EAAE;MAChB,IAAIF,IAAI,GAAG,IAAI,CAACJ,KAAK;MACrB;MACA,OAAOI,IAAI,EAAE;QACT,IAAMG,GAAG,GAAGJ,IAAI,CAACpB,GAAG,CAACqB,IAAI,CAACC,OAAO,CAAC;QAClC,IAAIE,GAAG,GAAG,CAAC,EAAE;UACT;UACAD,KAAK,CAAChC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,gBAAgB8B,IAAI,CAAC,CAAC;UACrCA,IAAI,GAAGA,IAAI,CAACf,IAAI;QACpB,CAAC,MACI,IAAIkB,GAAG,GAAG,CAAC,EAAE;UACd;UACAD,KAAK,CAAChC,IAAI,CAAC,CAAC,CAAC,CAAC,iBAAiB8B,IAAI,CAAC,CAAC;UACrCA,IAAI,GAAGA,IAAI,CAAChB,KAAK;QACrB,CAAC,MACI,IAAIe,IAAI,CAACrB,OAAO,EAAE,EAAE;UACrB;UACAqB,IAAI,CAAC3C,IAAI,EAAE;UACX8C,KAAK,CAAChC,IAAI,CAAC,CAAC,CAAC,CAAC,eAAe8B,IAAI,CAAC,CAAC;UACnCA,IAAI,GAAGA,IAAI,CAACI,GAAG;QACnB,CAAC,MACI;UACD;QACJ;MACJ;MACA,IAAI,CAACJ,IAAI,EAAE;QACP;QACA;MACJ;MACA,IAAIe,QAAQ,EAAE;QACV;QACAf,IAAI,CAACf,IAAI,GAAGY,SAAS;QACrBG,IAAI,CAACI,GAAG,GAAGP,SAAS;QACpBG,IAAI,CAAChB,KAAK,GAAGa,SAAS;QACtBG,IAAI,CAAClB,MAAM,GAAG,CAAC;MACnB,CAAC,MACI;QACD;QACAkB,IAAI,CAACtD,GAAG,GAAGmD,SAAS;QACpBG,IAAI,CAACzB,KAAK,GAAGsB,SAAS;MAC1B;MACA;MACA,IAAI,CAACG,IAAI,CAACI,GAAG,IAAI,CAACJ,IAAI,CAACzB,KAAK,EAAE;QAC1B,IAAIyB,IAAI,CAACf,IAAI,IAAIe,IAAI,CAAChB,KAAK,EAAE;UACzB;UACA,IAAMgC,GAAG,GAAG,IAAI,CAACC,IAAI,CAACjB,IAAI,CAAChB,KAAK,CAAC;UACjC,IAAQtC,IAAG,GAAqBsE,GAAG,CAA3BtE,GAAG;YAAE6B,KAAK,GAAcyC,GAAG,CAAtBzC,KAAK;YAAE0B,OAAO,GAAKe,GAAG,CAAff,OAAO;UAC3B,IAAI,CAACa,OAAO,CAACE,GAAG,CAACtE,GAAG,EAAE,KAAK,CAAC;UAC5BsD,IAAI,CAACtD,GAAG,GAAGA,IAAG;UACdsD,IAAI,CAACzB,KAAK,GAAGA,KAAK;UAClByB,IAAI,CAACC,OAAO,GAAGA,OAAO;QAC1B,CAAC,MACI;UACD;UACA,IAAMiB,QAAQ,GAAG,CAAC3B,EAAE,GAAGS,IAAI,CAACf,IAAI,MAAM,IAAI,IAAIM,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAGS,IAAI,CAAChB,KAAK;UAC7E,IAAIkB,KAAK,CAACvD,MAAM,GAAG,CAAC,EAAE;YAClB,4BAAsBuD,KAAK,CAACA,KAAK,CAACvD,MAAM,GAAG,CAAC,CAAC;cAAtCwE,GAAG;cAAEC,MAAM;YAClB,QAAQD,GAAG;cACP,KAAK,CAAC,CAAC,CAAC;gBACJC,MAAM,CAACnC,IAAI,GAAGiC,QAAQ;gBACtB;cACJ,KAAK,CAAC,CAAC;gBACHE,MAAM,CAAChB,GAAG,GAAGc,QAAQ;gBACrB;cACJ,KAAK,CAAC,CAAC;gBACHE,MAAM,CAACpC,KAAK,GAAGkC,QAAQ;gBACvB;YAAM;UAElB,CAAC,MACI;YACD,IAAI,CAACtB,KAAK,GAAGsB,QAAQ;UACzB;QACJ;MACJ;MACA;MACA,KAAK,IAAIZ,CAAC,GAAGJ,KAAK,CAACvD,MAAM,GAAG,CAAC,EAAE2D,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QACxC,IAAMN,MAAI,GAAGE,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;QACxBN,MAAI,CAACd,YAAY,EAAE;QACnB,IAAMqB,EAAE,GAAGP,MAAI,CAACQ,aAAa,EAAE;QAC/B,IAAID,EAAE,GAAG,CAAC,EAAE;UACR;UACA,IAAIP,MAAI,CAAChB,KAAK,CAACwB,aAAa,EAAE,IAAI,CAAC,EAAE;YACjC;YACAN,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGN,MAAI,CAACW,UAAU,EAAE;UACnC,CAAC,MACI;YACD;YACAX,MAAI,CAAChB,KAAK,GAAGgB,MAAI,CAAChB,KAAK,CAAC4B,WAAW,EAAE;YACrCV,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGN,MAAI,CAACW,UAAU,EAAE;UACnC;QACJ,CAAC,MACI,IAAIJ,EAAE,GAAG,CAAC,CAAC,EAAE;UACd;UACA,IAAIP,MAAI,CAACf,IAAI,CAACuB,aAAa,EAAE,IAAI,CAAC,EAAE;YAChC;YACAN,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGN,MAAI,CAACY,WAAW,EAAE;UACpC,CAAC,MACI;YACD;YACAZ,MAAI,CAACf,IAAI,GAAGe,MAAI,CAACf,IAAI,CAAC0B,UAAU,EAAE;YAClCT,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGN,MAAI,CAACY,WAAW,EAAE;UACpC;QACJ;QACA;QACA,IAAIN,CAAC,GAAG,CAAC,EAAE;UACP,QAAQJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACnB,KAAK,CAAC,CAAC,CAAC;cACJJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACrB,IAAI,GAAGiB,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;cAClC;YACJ,KAAK,CAAC,CAAC;cACHJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACtB,KAAK,GAAGkB,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;cACnC;YACJ,KAAK,CAAC,CAAC;cACHJ,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACF,GAAG,GAAGF,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC;cACjC;UAAM;QAElB,CAAC,MACI;UACD,IAAI,CAACV,KAAK,GAAGM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B;MACJ;IACJ;EAAC;IAAA;IAAA,OACD,cAAKF,IAAI,EAAE;MACP,OAAOA,IAAI,CAACf,IAAI,EAAE;QACde,IAAI,GAAGA,IAAI,CAACf,IAAI;MACpB;MACA,OAAOe,IAAI;IACf;EAAC;IAAA;IAAA,OACD,oBAAWtD,GAAG,EAAE;MACZ,IAAMqD,IAAI,GAAG,IAAI,CAACJ,KAAK,CAACrB,KAAK,CAAC5B,GAAG,CAAC;MAClC,IAAIsD,IAAI,GAAG,IAAI,CAACJ,KAAK;MACrB,IAAIyB,SAAS,GAAGxB,SAAS;MACzB,OAAOG,IAAI,EAAE;QACT,IAAMG,GAAG,GAAGJ,IAAI,CAACpB,GAAG,CAACqB,IAAI,CAACC,OAAO,CAAC;QAClC,IAAIE,GAAG,GAAG,CAAC,EAAE;UACT;UACAH,IAAI,GAAGA,IAAI,CAACf,IAAI;QACpB,CAAC,MACI,IAAIkB,GAAG,GAAG,CAAC,EAAE;UACd;UACAH,IAAI,GAAGA,IAAI,CAAChB,KAAK;QACrB,CAAC,MACI,IAAIe,IAAI,CAACrB,OAAO,EAAE,EAAE;UACrB;UACAqB,IAAI,CAAC3C,IAAI,EAAE;UACXiE,SAAS,GAAGrB,IAAI,CAACzB,KAAK,IAAI8C,SAAS;UACnCrB,IAAI,GAAGA,IAAI,CAACI,GAAG;QACnB,CAAC,MACI;UACD;QACJ;MACJ;MACA,OAAOJ,IAAI,IAAIA,IAAI,CAACzB,KAAK,IAAI8C,SAAS;IAC1C;EAAC;IAAA;IAAA,OACD,sBAAa3E,GAAG,EAAE;MACd,IAAMqD,IAAI,GAAG,IAAI,CAACJ,KAAK,CAACrB,KAAK,CAAC5B,GAAG,CAAC;MAClC,IAAIsD,IAAI,GAAG,IAAI,CAACJ,KAAK;MACrB,OAAOI,IAAI,EAAE;QACT,IAAMG,GAAG,GAAGJ,IAAI,CAACpB,GAAG,CAACqB,IAAI,CAACC,OAAO,CAAC;QAClC,IAAIE,GAAG,GAAG,CAAC,EAAE;UACT;UACAH,IAAI,GAAGA,IAAI,CAACf,IAAI;QACpB,CAAC,MACI,IAAIkB,GAAG,GAAG,CAAC,EAAE;UACd;UACAH,IAAI,GAAGA,IAAI,CAAChB,KAAK;QACrB,CAAC,MACI,IAAIe,IAAI,CAACrB,OAAO,EAAE,EAAE;UACrB;UACAqB,IAAI,CAAC3C,IAAI,EAAE;UACX4C,IAAI,GAAGA,IAAI,CAACI,GAAG;QACnB,CAAC,MACI;UACD;UACA,IAAI,CAACJ,IAAI,CAACI,GAAG,EAAE;YACX,OAAOP,SAAS;UACpB,CAAC,MACI;YACD,OAAO,IAAI,CAACyB,QAAQ,CAACtB,IAAI,CAACI,GAAG,CAAC;UAClC;QACJ;MACJ;MACA,OAAOP,SAAS;IACpB;EAAC;IAAA;IAAA,OACD,iBAAQ0B,QAAQ,EAAE;MAAA,2CACa,IAAI;QAAA;MAAA;QAA/B,oDAAiC;UAAA;YAArB7E,GAAG;YAAE6B,KAAK;UAClBgD,QAAQ,CAAChD,KAAK,EAAE7B,GAAG,CAAC;QACxB;MAAC;QAAA;MAAA;QAAA;MAAA;IACL;EAAC;IAAA;IAAA,+CACD;MAAA;QAAA;UAAA;YAAA;cACI,8BAAO,IAAI,CAAC4E,QAAQ,CAAC,IAAI,CAAC1B,KAAK,CAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CACnC;EAAA;IAAA;IAAA,OACD,kBAASI,IAAI,EAAE;MACX,IAAMwB,MAAM,GAAG,EAAE;MACjB,IAAI,CAACC,WAAW,CAACzB,IAAI,EAAEwB,MAAM,CAAC;MAC9B,OAAOA,MAAM,CAACE,MAAM,CAACC,QAAQ,CAAC,EAAE;IACpC;EAAC;IAAA;IAAA,OACD,qBAAY3B,IAAI,EAAE4B,MAAM,EAAE;MACtB;MACA,IAAI,CAAC5B,IAAI,EAAE;QACP;MACJ;MACA,IAAIA,IAAI,CAACf,IAAI,EAAE;QACX,IAAI,CAACwC,WAAW,CAACzB,IAAI,CAACf,IAAI,EAAE2C,MAAM,CAAC;MACvC;MACA,IAAI5B,IAAI,CAACzB,KAAK,EAAE;QACZqD,MAAM,CAAC1D,IAAI,CAAC,CAAC8B,IAAI,CAACtD,GAAG,EAAEsD,IAAI,CAACzB,KAAK,CAAC,CAAC;MACvC;MACA,IAAIyB,IAAI,CAACI,GAAG,EAAE;QACV,IAAI,CAACqB,WAAW,CAACzB,IAAI,CAACI,GAAG,EAAEwB,MAAM,CAAC;MACtC;MACA,IAAI5B,IAAI,CAAChB,KAAK,EAAE;QACZ,IAAI,CAACyC,WAAW,CAACzB,IAAI,CAAChB,KAAK,EAAE4C,MAAM,CAAC;MACxC;IACJ;EAAC;IAAA;IAAA,OA9WD,mBAAqF;MAAA,IAAtEC,gBAAgB,uEAAG;QAAA,OAAM,KAAK;MAAA;MAAA,IAAEC,sBAAsB,uEAAG;QAAA,OAAM,KAAK;MAAA;MAC/E,OAAO,IAAIrC,iBAAiB,CAAC,IAAI7B,WAAW,CAACiE,gBAAgB,EAAEC,sBAAsB,CAAC,CAAC;IAC3F;EAAC;IAAA;IAAA,OACD,sBAAoB;MAChB,OAAO,IAAIrC,iBAAiB,CAAC,IAAIlD,cAAc,EAAE,CAAC;IACtD;EAAC;IAAA;IAAA,OACD,yBAAuB;MACnB,OAAO,IAAIkD,iBAAiB,CAAC,IAAIzC,kBAAkB,EAAE,CAAC;IAC1D;EAAC;EAAA;AAAA,EA6UC0E,MAAM,CAACC,QAAQ;AA0BpB,IACKI,gBAAgB,6BAClB,0BAAYC,GAAG,EAAEzD,KAAK,EAAE;EAAA;EACpB,IAAI,CAACyD,GAAG,GAAGA,GAAG;EACd,IAAI,CAACzD,KAAK,GAAGA,KAAK;AACtB,CAAC;AAEL,WAAa0D,WAAW;EACpB,qBAAYC,UAAU,EAAEC,KAAK,EAAE;IAAA;IAC3B,IAAI,CAAClG,EAAE,CAAC,GAAG,aAAa;IACxB,IAAIiG,UAAU,YAAYD,WAAW,EAAE;MACnC,IAAI,CAACG,GAAG,GAAG,IAAIC,GAAG,CAACH,UAAU,CAACE,GAAG,CAAC;MAClC,IAAI,CAACD,KAAK,GAAGA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAGF,WAAW,CAACK,YAAY;IACtF,CAAC,MACI;MACD,IAAI,CAACF,GAAG,GAAG,IAAIC,GAAG,EAAE;MACpB,IAAI,CAACF,KAAK,GAAGD,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAGA,UAAU,GAAGD,WAAW,CAACK,YAAY;IACrG;EACJ;EAAC;IAAA;IAAA,OACD,aAAIC,QAAQ,EAAEhE,KAAK,EAAE;MACjB,IAAI,CAAC6D,GAAG,CAACI,GAAG,CAAC,IAAI,CAACL,KAAK,CAACI,QAAQ,CAAC,EAAE,IAAIR,gBAAgB,CAACQ,QAAQ,EAAEhE,KAAK,CAAC,CAAC;MACzE,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,aAAIgE,QAAQ,EAAE;MACV,IAAIhD,EAAE;MACN,OAAO,CAACA,EAAE,GAAG,IAAI,CAAC6C,GAAG,CAACK,GAAG,CAAC,IAAI,CAACN,KAAK,CAACI,QAAQ,CAAC,CAAC,MAAM,IAAI,IAAIhD,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAChB,KAAK;IAClG;EAAC;IAAA;IAAA,OACD,aAAIgE,QAAQ,EAAE;MACV,OAAO,IAAI,CAACH,GAAG,CAACM,GAAG,CAAC,IAAI,CAACP,KAAK,CAACI,QAAQ,CAAC,CAAC;IAC7C;EAAC;IAAA;IAAA,KACD,eAAW;MACP,OAAO,IAAI,CAACH,GAAG,CAACO,IAAI;IACxB;EAAC;IAAA;IAAA,OACD,iBAAQ;MACJ,IAAI,CAACP,GAAG,CAACQ,KAAK,EAAE;IACpB;EAAC;IAAA;IAAA,OACD,iBAAOL,QAAQ,EAAE;MACb,OAAO,IAAI,CAACH,GAAG,CAACS,MAAM,CAAC,IAAI,CAACV,KAAK,CAACI,QAAQ,CAAC,CAAC;IAChD;EAAC;IAAA;IAAA,OACD,iBAAQO,GAAG,EAAEC,OAAO,EAAE;MAClB,IAAI,OAAOA,OAAO,KAAK,WAAW,EAAE;QAChCD,GAAG,GAAGA,GAAG,CAACE,IAAI,CAACD,OAAO,CAAC;MAC3B;MAAC,4CACwB,IAAI,CAACX,GAAG;QAAA;MAAA;QAAjC,uDAAmC;UAAA;YAAvBa,CAAC;YAAEC,KAAK;UAChBJ,GAAG,CAACI,KAAK,CAAC3E,KAAK,EAAE2E,KAAK,CAAClB,GAAG,EAAE,IAAI,CAAC;QACrC;MAAC;QAAA;MAAA;QAAA;MAAA;IACL;EAAC;IAAA;IAAA,+CACD;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,wCACwB,IAAI,CAACI,GAAG,CAACe,MAAM,EAAE;cAAA;cAAA;YAAA;cAAA;gBAAA;gBAAA;cAAA;cAA1BD,KAAK;cAAA;cACZ,OAAMA,KAAK,CAAC3E,KAAK;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAExB;EAAA;IAAA;IAAA,+CACD;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,wCACwB,IAAI,CAAC6D,GAAG,CAACe,MAAM,EAAE;cAAA;cAAA;YAAA;cAAA;gBAAA;gBAAA;cAAA;cAA1BD,KAAK;cAAA;cACZ,OAAMA,KAAK,CAAClB,GAAG;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAEtB;EAAA;IAAA;IAAA,+CACD;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,wCACwB,IAAI,CAACI,GAAG,CAACe,MAAM,EAAE;cAAA;cAAA;YAAA;cAAA;gBAAA;gBAAA;cAAA;cAA1BD,KAAK;cAAA;cACZ,OAAM,CAACA,KAAK,CAAClB,GAAG,EAAEkB,KAAK,CAAC3E,KAAK,CAAC;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAErC;EAAA;IAAA;IAAA,+CACD;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,wCAC4B,IAAI,CAAC6D,GAAG;cAAA;cAAA;YAAA;cAAA;gBAAA;gBAAA;cAAA;cAAA,gDAAlBc,KAAK;cAAA;cACf,OAAM,CAACA,KAAK,CAAClB,GAAG,EAAEkB,KAAK,CAAC3E,KAAK,CAAC;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAErC;EAAA;EAAA;AAAA,GAJEtC,EAAE,GAAGyF,MAAM,CAAC0B,WAAW,EAAE1B,MAAM,CAACC,QAAQ;AAM/CM,WAAW,CAACK,YAAY,GAAG,UAACC,QAAQ;EAAA,OAAKA,QAAQ,CAACc,QAAQ,EAAE;AAAA;AAC5D,WAAaC,SAAS;EAClB,qBAAc;IAAA;IACV,IAAI,CAACpH,EAAE,CAAC,GAAG,WAAW;IACtB,IAAI,CAACqH,IAAI,GAAG,IAAIlB,GAAG,EAAE;IACrB,IAAI,CAACmB,KAAK,GAAG3D,SAAS;IACtB,IAAI,CAAC4D,KAAK,GAAG5D,SAAS;IACtB,IAAI,CAAC6D,KAAK,GAAG,CAAC;IACd,IAAI,CAACC,MAAM,GAAG,CAAC;EACnB;EAAC;IAAA;IAAA,OACD,iBAAQ;MACJ,IAAI,CAACJ,IAAI,CAACX,KAAK,EAAE;MACjB,IAAI,CAACY,KAAK,GAAG3D,SAAS;MACtB,IAAI,CAAC4D,KAAK,GAAG5D,SAAS;MACtB,IAAI,CAAC6D,KAAK,GAAG,CAAC;MACd,IAAI,CAACC,MAAM,EAAE;IACjB;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,OAAO,CAAC,IAAI,CAACH,KAAK,IAAI,CAAC,IAAI,CAACC,KAAK;IACrC;EAAC;IAAA;IAAA,KACD,eAAW;MACP,OAAO,IAAI,CAACC,KAAK;IACrB;EAAC;IAAA;IAAA,KACD,eAAY;MACR,IAAInE,EAAE;MACN,OAAO,CAACA,EAAE,GAAG,IAAI,CAACiE,KAAK,MAAM,IAAI,IAAIjE,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAChB,KAAK;IAC1E;EAAC;IAAA;IAAA,KACD,eAAW;MACP,IAAIgB,EAAE;MACN,OAAO,CAACA,EAAE,GAAG,IAAI,CAACkE,KAAK,MAAM,IAAI,IAAIlE,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAChB,KAAK;IAC1E;EAAC;IAAA;IAAA,OACD,aAAI7B,GAAG,EAAE;MACL,OAAO,IAAI,CAAC6G,IAAI,CAACb,GAAG,CAAChG,GAAG,CAAC;IAC7B;EAAC;IAAA;IAAA,OACD,aAAIA,GAAG,EAA8B;MAAA,IAA5BkH,KAAK,uEAAG,CAAC;MACd,IAAMC,IAAI,GAAG,IAAI,CAACN,IAAI,CAACd,GAAG,CAAC/F,GAAG,CAAC;MAC/B,IAAI,CAACmH,IAAI,EAAE;QACP,OAAOhE,SAAS;MACpB;MACA,IAAI+D,KAAK,KAAK,CAAC,CAAC,kBAAkB;QAC9B,IAAI,CAACA,KAAK,CAACC,IAAI,EAAED,KAAK,CAAC;MAC3B;MACA,OAAOC,IAAI,CAACtF,KAAK;IACrB;EAAC;IAAA;IAAA,OACD,aAAI7B,GAAG,EAAE6B,KAAK,EAA8B;MAAA,IAA5BqF,KAAK,uEAAG,CAAC;MACrB,IAAIC,IAAI,GAAG,IAAI,CAACN,IAAI,CAACd,GAAG,CAAC/F,GAAG,CAAC;MAC7B,IAAImH,IAAI,EAAE;QACNA,IAAI,CAACtF,KAAK,GAAGA,KAAK;QAClB,IAAIqF,KAAK,KAAK,CAAC,CAAC,kBAAkB;UAC9B,IAAI,CAACA,KAAK,CAACC,IAAI,EAAED,KAAK,CAAC;QAC3B;MACJ,CAAC,MACI;QACDC,IAAI,GAAG;UAAEnH,GAAG,EAAHA,GAAG;UAAE6B,KAAK,EAALA,KAAK;UAAEnB,IAAI,EAAEyC,SAAS;UAAEiE,QAAQ,EAAEjE;QAAU,CAAC;QAC3D,QAAQ+D,KAAK;UACT,KAAK,CAAC,CAAC;YACH,IAAI,CAACG,WAAW,CAACF,IAAI,CAAC;YACtB;UACJ,KAAK,CAAC,CAAC;YACH,IAAI,CAACG,YAAY,CAACH,IAAI,CAAC;YACvB;UACJ,KAAK,CAAC,CAAC;YACH,IAAI,CAACE,WAAW,CAACF,IAAI,CAAC;YACtB;UACJ;YACI,IAAI,CAACE,WAAW,CAACF,IAAI,CAAC;YACtB;QAAM;QAEd,IAAI,CAACN,IAAI,CAACf,GAAG,CAAC9F,GAAG,EAAEmH,IAAI,CAAC;QACxB,IAAI,CAACH,KAAK,EAAE;MAChB;MACA,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,iBAAOhH,GAAG,EAAE;MACR,OAAO,CAAC,CAAC,IAAI,CAACuH,MAAM,CAACvH,GAAG,CAAC;IAC7B;EAAC;IAAA;IAAA,OACD,gBAAOA,GAAG,EAAE;MACR,IAAMmH,IAAI,GAAG,IAAI,CAACN,IAAI,CAACd,GAAG,CAAC/F,GAAG,CAAC;MAC/B,IAAI,CAACmH,IAAI,EAAE;QACP,OAAOhE,SAAS;MACpB;MACA,IAAI,CAAC0D,IAAI,CAACV,MAAM,CAACnG,GAAG,CAAC;MACrB,IAAI,CAACwH,UAAU,CAACL,IAAI,CAAC;MACrB,IAAI,CAACH,KAAK,EAAE;MACZ,OAAOG,IAAI,CAACtF,KAAK;IACrB;EAAC;IAAA;IAAA,OACD,iBAAQ;MACJ,IAAI,CAAC,IAAI,CAACiF,KAAK,IAAI,CAAC,IAAI,CAACC,KAAK,EAAE;QAC5B,OAAO5D,SAAS;MACpB;MACA,IAAI,CAAC,IAAI,CAAC2D,KAAK,IAAI,CAAC,IAAI,CAACC,KAAK,EAAE;QAC5B,MAAM,IAAI7E,KAAK,CAAC,cAAc,CAAC;MACnC;MACA,IAAMiF,IAAI,GAAG,IAAI,CAACL,KAAK;MACvB,IAAI,CAACD,IAAI,CAACV,MAAM,CAACgB,IAAI,CAACnH,GAAG,CAAC;MAC1B,IAAI,CAACwH,UAAU,CAACL,IAAI,CAAC;MACrB,IAAI,CAACH,KAAK,EAAE;MACZ,OAAOG,IAAI,CAACtF,KAAK;IACrB;EAAC;IAAA;IAAA,OACD,iBAAQ4F,UAAU,EAAEpB,OAAO,EAAE;MACzB,IAAMqB,KAAK,GAAG,IAAI,CAACT,MAAM;MACzB,IAAIU,OAAO,GAAG,IAAI,CAACb,KAAK;MACxB,OAAOa,OAAO,EAAE;QACZ,IAAItB,OAAO,EAAE;UACToB,UAAU,CAACnB,IAAI,CAACD,OAAO,CAAC,CAACsB,OAAO,CAAC9F,KAAK,EAAE8F,OAAO,CAAC3H,GAAG,EAAE,IAAI,CAAC;QAC9D,CAAC,MACI;UACDyH,UAAU,CAACE,OAAO,CAAC9F,KAAK,EAAE8F,OAAO,CAAC3H,GAAG,EAAE,IAAI,CAAC;QAChD;QACA,IAAI,IAAI,CAACiH,MAAM,KAAKS,KAAK,EAAE;UACvB,MAAM,IAAIxF,KAAK,4CAA4C;QAC/D;QACAyF,OAAO,GAAGA,OAAO,CAACjH,IAAI;MAC1B;IACJ;EAAC;IAAA;IAAA,OACD,gBAAO;MAAA;MACH,IAAMgF,GAAG,GAAG,IAAI;MAChB,IAAMgC,KAAK,GAAG,IAAI,CAACT,MAAM;MACzB,IAAIU,OAAO,GAAG,IAAI,CAACb,KAAK;MACxB,IAAM7B,QAAQ,iDACTD,MAAM,CAACC,QAAQ,cAAI;QAChB,OAAOA,QAAQ;MACnB,CAAC,uDACM;QACH,IAAIS,GAAG,CAACuB,MAAM,KAAKS,KAAK,EAAE;UACtB,MAAM,IAAIxF,KAAK,4CAA4C;QAC/D;QACA,IAAIyF,OAAO,EAAE;UACT,IAAM7C,MAAM,GAAG;YAAEjD,KAAK,EAAE8F,OAAO,CAAC3H,GAAG;YAAE4H,IAAI,EAAE;UAAM,CAAC;UAClDD,OAAO,GAAGA,OAAO,CAACjH,IAAI;UACtB,OAAOoE,MAAM;QACjB,CAAC,MACI;UACD,OAAO;YAAEjD,KAAK,EAAEsB,SAAS;YAAEyE,IAAI,EAAE;UAAK,CAAC;QAC3C;MACJ,CAAC,cACJ;MACD,OAAO3C,QAAQ;IACnB;EAAC;IAAA;IAAA,OACD,kBAAS;MAAA;MACL,IAAMS,GAAG,GAAG,IAAI;MAChB,IAAMgC,KAAK,GAAG,IAAI,CAACT,MAAM;MACzB,IAAIU,OAAO,GAAG,IAAI,CAACb,KAAK;MACxB,IAAM7B,QAAQ,iDACTD,MAAM,CAACC,QAAQ,cAAI;QAChB,OAAOA,QAAQ;MACnB,CAAC,uDACM;QACH,IAAIS,GAAG,CAACuB,MAAM,KAAKS,KAAK,EAAE;UACtB,MAAM,IAAIxF,KAAK,4CAA4C;QAC/D;QACA,IAAIyF,OAAO,EAAE;UACT,IAAM7C,MAAM,GAAG;YAAEjD,KAAK,EAAE8F,OAAO,CAAC9F,KAAK;YAAE+F,IAAI,EAAE;UAAM,CAAC;UACpDD,OAAO,GAAGA,OAAO,CAACjH,IAAI;UACtB,OAAOoE,MAAM;QACjB,CAAC,MACI;UACD,OAAO;YAAEjD,KAAK,EAAEsB,SAAS;YAAEyE,IAAI,EAAE;UAAK,CAAC;QAC3C;MACJ,CAAC,cACJ;MACD,OAAO3C,QAAQ;IACnB;EAAC;IAAA;IAAA,OACD,mBAAU;MAAA;MACN,IAAMS,GAAG,GAAG,IAAI;MAChB,IAAMgC,KAAK,GAAG,IAAI,CAACT,MAAM;MACzB,IAAIU,OAAO,GAAG,IAAI,CAACb,KAAK;MACxB,IAAM7B,QAAQ,iDACTD,MAAM,CAACC,QAAQ,cAAI;QAChB,OAAOA,QAAQ;MACnB,CAAC,uDACM;QACH,IAAIS,GAAG,CAACuB,MAAM,KAAKS,KAAK,EAAE;UACtB,MAAM,IAAIxF,KAAK,4CAA4C;QAC/D;QACA,IAAIyF,OAAO,EAAE;UACT,IAAM7C,MAAM,GAAG;YAAEjD,KAAK,EAAE,CAAC8F,OAAO,CAAC3H,GAAG,EAAE2H,OAAO,CAAC9F,KAAK,CAAC;YAAE+F,IAAI,EAAE;UAAM,CAAC;UACnED,OAAO,GAAGA,OAAO,CAACjH,IAAI;UACtB,OAAOoE,MAAM;QACjB,CAAC,MACI;UACD,OAAO;YAAEjD,KAAK,EAAEsB,SAAS;YAAEyE,IAAI,EAAE;UAAK,CAAC;QAC3C;MACJ,CAAC,cACJ;MACD,OAAO3C,QAAQ;IACnB;EAAC;IAAA;IAAA,OACD,iBAA+C;MAC3C,OAAO,IAAI,CAAC4C,OAAO,EAAE;IACzB;EAAC;IAAA;IAAA,OACD,iBAAQC,OAAO,EAAE;MACb,IAAIA,OAAO,IAAI,IAAI,CAAC7B,IAAI,EAAE;QACtB;MACJ;MACA,IAAI6B,OAAO,KAAK,CAAC,EAAE;QACf,IAAI,CAAC5B,KAAK,EAAE;QACZ;MACJ;MACA,IAAIyB,OAAO,GAAG,IAAI,CAACb,KAAK;MACxB,IAAIiB,WAAW,GAAG,IAAI,CAAC9B,IAAI;MAC3B,OAAO0B,OAAO,IAAII,WAAW,GAAGD,OAAO,EAAE;QACrC,IAAI,CAACjB,IAAI,CAACV,MAAM,CAACwB,OAAO,CAAC3H,GAAG,CAAC;QAC7B2H,OAAO,GAAGA,OAAO,CAACjH,IAAI;QACtBqH,WAAW,EAAE;MACjB;MACA,IAAI,CAACjB,KAAK,GAAGa,OAAO;MACpB,IAAI,CAACX,KAAK,GAAGe,WAAW;MACxB,IAAIJ,OAAO,EAAE;QACTA,OAAO,CAACP,QAAQ,GAAGjE,SAAS;MAChC;MACA,IAAI,CAAC8D,MAAM,EAAE;IACjB;EAAC;IAAA;IAAA,OACD,sBAAaE,IAAI,EAAE;MACf;MACA,IAAI,CAAC,IAAI,CAACL,KAAK,IAAI,CAAC,IAAI,CAACC,KAAK,EAAE;QAC5B,IAAI,CAACA,KAAK,GAAGI,IAAI;MACrB,CAAC,MACI,IAAI,CAAC,IAAI,CAACL,KAAK,EAAE;QAClB,MAAM,IAAI5E,KAAK,CAAC,cAAc,CAAC;MACnC,CAAC,MACI;QACDiF,IAAI,CAACzG,IAAI,GAAG,IAAI,CAACoG,KAAK;QACtB,IAAI,CAACA,KAAK,CAACM,QAAQ,GAAGD,IAAI;MAC9B;MACA,IAAI,CAACL,KAAK,GAAGK,IAAI;MACjB,IAAI,CAACF,MAAM,EAAE;IACjB;EAAC;IAAA;IAAA,OACD,qBAAYE,IAAI,EAAE;MACd;MACA,IAAI,CAAC,IAAI,CAACL,KAAK,IAAI,CAAC,IAAI,CAACC,KAAK,EAAE;QAC5B,IAAI,CAACD,KAAK,GAAGK,IAAI;MACrB,CAAC,MACI,IAAI,CAAC,IAAI,CAACJ,KAAK,EAAE;QAClB,MAAM,IAAI7E,KAAK,CAAC,cAAc,CAAC;MACnC,CAAC,MACI;QACDiF,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACL,KAAK;QAC1B,IAAI,CAACA,KAAK,CAACrG,IAAI,GAAGyG,IAAI;MAC1B;MACA,IAAI,CAACJ,KAAK,GAAGI,IAAI;MACjB,IAAI,CAACF,MAAM,EAAE;IACjB;EAAC;IAAA;IAAA,OACD,oBAAWE,IAAI,EAAE;MACb,IAAIA,IAAI,KAAK,IAAI,CAACL,KAAK,IAAIK,IAAI,KAAK,IAAI,CAACJ,KAAK,EAAE;QAC5C,IAAI,CAACD,KAAK,GAAG3D,SAAS;QACtB,IAAI,CAAC4D,KAAK,GAAG5D,SAAS;MAC1B,CAAC,MACI,IAAIgE,IAAI,KAAK,IAAI,CAACL,KAAK,EAAE;QAC1B;QACA;QACA,IAAI,CAACK,IAAI,CAACzG,IAAI,EAAE;UACZ,MAAM,IAAIwB,KAAK,CAAC,cAAc,CAAC;QACnC;QACAiF,IAAI,CAACzG,IAAI,CAAC0G,QAAQ,GAAGjE,SAAS;QAC9B,IAAI,CAAC2D,KAAK,GAAGK,IAAI,CAACzG,IAAI;MAC1B,CAAC,MACI,IAAIyG,IAAI,KAAK,IAAI,CAACJ,KAAK,EAAE;QAC1B;QACA;QACA,IAAI,CAACI,IAAI,CAACC,QAAQ,EAAE;UAChB,MAAM,IAAIlF,KAAK,CAAC,cAAc,CAAC;QACnC;QACAiF,IAAI,CAACC,QAAQ,CAAC1G,IAAI,GAAGyC,SAAS;QAC9B,IAAI,CAAC4D,KAAK,GAAGI,IAAI,CAACC,QAAQ;MAC9B,CAAC,MACI;QACD,IAAM1G,IAAI,GAAGyG,IAAI,CAACzG,IAAI;QACtB,IAAM0G,QAAQ,GAAGD,IAAI,CAACC,QAAQ;QAC9B,IAAI,CAAC1G,IAAI,IAAI,CAAC0G,QAAQ,EAAE;UACpB,MAAM,IAAIlF,KAAK,CAAC,cAAc,CAAC;QACnC;QACAxB,IAAI,CAAC0G,QAAQ,GAAGA,QAAQ;QACxBA,QAAQ,CAAC1G,IAAI,GAAGA,IAAI;MACxB;MACAyG,IAAI,CAACzG,IAAI,GAAGyC,SAAS;MACrBgE,IAAI,CAACC,QAAQ,GAAGjE,SAAS;MACzB,IAAI,CAAC8D,MAAM,EAAE;IACjB;EAAC;IAAA;IAAA,OACD,eAAME,IAAI,EAAED,MAAK,EAAE;MACf,IAAI,CAAC,IAAI,CAACJ,KAAK,IAAI,CAAC,IAAI,CAACC,KAAK,EAAE;QAC5B,MAAM,IAAI7E,KAAK,CAAC,cAAc,CAAC;MACnC;MACA,IAAKgF,MAAK,KAAK,CAAC,CAAC,qBAAqBA,MAAK,KAAK,CAAC,CAAC,mBAAoB;QAClE;MACJ;MACA,IAAIA,MAAK,KAAK,CAAC,CAAC,mBAAmB;QAC/B,IAAIC,IAAI,KAAK,IAAI,CAACL,KAAK,EAAE;UACrB;QACJ;QACA,IAAMpG,IAAI,GAAGyG,IAAI,CAACzG,IAAI;QACtB,IAAM0G,QAAQ,GAAGD,IAAI,CAACC,QAAQ;QAC9B;QACA,IAAID,IAAI,KAAK,IAAI,CAACJ,KAAK,EAAE;UACrB;UACA;UACAK,QAAQ,CAAC1G,IAAI,GAAGyC,SAAS;UACzB,IAAI,CAAC4D,KAAK,GAAGK,QAAQ;QACzB,CAAC,MACI;UACD;UACA1G,IAAI,CAAC0G,QAAQ,GAAGA,QAAQ;UACxBA,QAAQ,CAAC1G,IAAI,GAAGA,IAAI;QACxB;QACA;QACAyG,IAAI,CAACC,QAAQ,GAAGjE,SAAS;QACzBgE,IAAI,CAACzG,IAAI,GAAG,IAAI,CAACoG,KAAK;QACtB,IAAI,CAACA,KAAK,CAACM,QAAQ,GAAGD,IAAI;QAC1B,IAAI,CAACL,KAAK,GAAGK,IAAI;QACjB,IAAI,CAACF,MAAM,EAAE;MACjB,CAAC,MACI,IAAIC,MAAK,KAAK,CAAC,CAAC,mBAAmB;QACpC,IAAIC,IAAI,KAAK,IAAI,CAACJ,KAAK,EAAE;UACrB;QACJ;QACA,IAAMrG,KAAI,GAAGyG,IAAI,CAACzG,IAAI;QACtB,IAAM0G,SAAQ,GAAGD,IAAI,CAACC,QAAQ;QAC9B;QACA,IAAID,IAAI,KAAK,IAAI,CAACL,KAAK,EAAE;UACrB;UACA;UACApG,KAAI,CAAC0G,QAAQ,GAAGjE,SAAS;UACzB,IAAI,CAAC2D,KAAK,GAAGpG,KAAI;QACrB,CAAC,MACI;UACD;UACAA,KAAI,CAAC0G,QAAQ,GAAGA,SAAQ;UACxBA,SAAQ,CAAC1G,IAAI,GAAGA,KAAI;QACxB;QACAyG,IAAI,CAACzG,IAAI,GAAGyC,SAAS;QACrBgE,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACL,KAAK;QAC1B,IAAI,CAACA,KAAK,CAACrG,IAAI,GAAGyG,IAAI;QACtB,IAAI,CAACJ,KAAK,GAAGI,IAAI;QACjB,IAAI,CAACF,MAAM,EAAE;MACjB;IACJ;EAAC;IAAA;IAAA,OACD,kBAAS;MACL,IAAMe,IAAI,GAAG,EAAE;MACf,IAAI,CAACC,OAAO,CAAC,UAACpG,KAAK,EAAE7B,GAAG,EAAK;QACzBgI,IAAI,CAACxG,IAAI,CAAC,CAACxB,GAAG,EAAE6B,KAAK,CAAC,CAAC;MAC3B,CAAC,CAAC;MACF,OAAOmG,IAAI;IACf;EAAC;IAAA;IAAA,OACD,kBAASA,IAAI,EAAE;MACX,IAAI,CAAC9B,KAAK,EAAE;MAAC,6CACc8B,IAAI;QAAA;MAAA;QAA/B,yDAAiC;UAAA;YAArBhI,GAAG;YAAE6B,MAAK;UAClB,IAAI,CAACiE,GAAG,CAAC9F,GAAG,EAAE6B,MAAK,CAAC;QACxB;MAAC;QAAA;MAAA;QAAA;MAAA;IACL;EAAC;EAAA;AAAA,GAhKCrC,EAAE,GAAGwF,MAAM,CAAC0B,WAAW,EAAE1B,MAAM,CAACC,QAAQ;AAkK9C,WAAaiD,QAAQ;EAAA;EAAA;EACjB,kBAAYC,KAAK,EAAa;IAAA;IAAA,IAAXC,KAAK,uEAAG,CAAC;IAAA;IACxB;IACA,MAAKC,MAAM,GAAGF,KAAK;IACnB,MAAKG,MAAM,GAAG7F,IAAI,CAAC6B,GAAG,CAAC7B,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE0F,KAAK,CAAC,EAAE,CAAC,CAAC;IAAC;EAClD;EAAC;IAAA;IAAA,KACD,eAAY;MACR,OAAO,IAAI,CAACC,MAAM;IACtB,CAAC;IAAA,KACD,aAAUF,KAAK,EAAE;MACb,IAAI,CAACE,MAAM,GAAGF,KAAK;MACnB,IAAI,CAACI,SAAS,EAAE;IACpB;EAAC;IAAA;IAAA,OACD,aAAIvI,GAAG,EAA+B;MAAA,IAA7BkH,KAAK,uEAAG,CAAC;MACd,yEAAiBlH,GAAG,EAAEkH,KAAK;IAC/B;EAAC;IAAA;IAAA,OACD,cAAKlH,GAAG,EAAE;MACN,yEAAiBA,GAAG,EAAE,CAAC,CAAC;IAC5B;EAAC;IAAA;IAAA,OACD,aAAIA,GAAG,EAAE6B,KAAK,EAAE;MACZ,kEAAU7B,GAAG,EAAE6B,KAAK,EAAE,CAAC,CAAC;MACxB,IAAI,CAAC0G,SAAS,EAAE;MAChB,OAAO,IAAI;IACf;EAAC;IAAA;IAAA,OACD,qBAAY;MACR,IAAI,IAAI,CAACtC,IAAI,GAAG,IAAI,CAACoC,MAAM,EAAE;QACzB,IAAI,CAACG,OAAO,CAAC/F,IAAI,CAACgG,KAAK,CAAC,IAAI,CAACJ,MAAM,GAAG,IAAI,CAACC,MAAM,CAAC,CAAC;MACvD;IACJ;EAAC;EAAA;AAAA,EA5ByB1B,SAAS"}]}