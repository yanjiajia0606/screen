{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLine.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLine.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9nZXQgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mbG9hdDMyLWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1sYXN0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1sYXN0LWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIjsKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi4KICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCmltcG9ydCAqIGFzIGJyb3dzZXIgZnJvbSAnLi4vLi4vLi4vLi4vYmFzZS9icm93c2VyL2Jyb3dzZXIuanMnOwppbXBvcnQgeyBjcmVhdGVGYXN0RG9tTm9kZSB9IGZyb20gJy4uLy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci9mYXN0RG9tTm9kZS5qcyc7CmltcG9ydCAqIGFzIHBsYXRmb3JtIGZyb20gJy4uLy4uLy4uLy4uL2Jhc2UvY29tbW9uL3BsYXRmb3JtLmpzJzsKaW1wb3J0IHsgUmFuZ2VVdGlsIH0gZnJvbSAnLi9yYW5nZVV0aWwuanMnOwppbXBvcnQgeyBGbG9hdEhvcml6b250YWxSYW5nZSwgVmlzaWJsZVJhbmdlcyB9IGZyb20gJy4uLy4uL3ZpZXcvcmVuZGVyaW5nQ29udGV4dC5qcyc7CmltcG9ydCB7IExpbmVEZWNvcmF0aW9uIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL3ZpZXdMYXlvdXQvbGluZURlY29yYXRpb25zLmpzJzsKaW1wb3J0IHsgUmVuZGVyTGluZUlucHV0LCByZW5kZXJWaWV3TGluZSwgTGluZVJhbmdlLCBEb21Qb3NpdGlvbiB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi92aWV3TGF5b3V0L3ZpZXdMaW5lUmVuZGVyZXIuanMnOwppbXBvcnQgeyBpc0hpZ2hDb250cmFzdCB9IGZyb20gJy4uLy4uLy4uLy4uL3BsYXRmb3JtL3RoZW1lL2NvbW1vbi90aGVtZS5qcyc7CmltcG9ydCB7IEVkaXRvckZvbnRMaWdhdHVyZXMgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vY29uZmlnL2VkaXRvck9wdGlvbnMuanMnOwp2YXIgY2FuVXNlRmFzdFJlbmRlcmVkVmlld0xpbmUgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHBsYXRmb3JtLmlzTmF0aXZlKSB7CiAgICAvLyBJbiBWU0NvZGUgd2Uga25vdyB2ZXJ5IHdlbGwgd2hlbiB0aGUgem9vbSBsZXZlbCBjaGFuZ2VzCiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgaWYgKHBsYXRmb3JtLmlzTGludXggfHwgYnJvd3Nlci5pc0ZpcmVmb3ggfHwgYnJvd3Nlci5pc1NhZmFyaSkgewogICAgLy8gT24gTGludXgsIGl0IGFwcGVhcnMgdGhhdCB6b29taW5nIGFmZmVjdHMgY2hhciB3aWR0aHMgKGluIHBpeGVscyksIHdoaWNoIGlzIHVuZXhwZWN0ZWQuCiAgICAvLyAtLQogICAgLy8gRXZlbiB0aG91Z2ggd2UgcmVhZCBjaGFyYWN0ZXIgd2lkdGhzIGNvcnJlY3RseSwgaGF2aW5nIHJlYWQgdGhlbSBhdCBhIHNwZWNpZmljIHpvb20gbGV2ZWwKICAgIC8vIGRvZXMgbm90IG1lYW4gdGhleSBhcmUgdGhlIHNhbWUgYXQgdGhlIGN1cnJlbnQgem9vbSBsZXZlbC4KICAgIC8vIC0tCiAgICAvLyBUaGlzIGNvdWxkIGJlIGltcHJvdmVkIGlmIHdlIGV2ZXIgZmlndXJlIG91dCBob3cgdG8gZ2V0IGFuIGV2ZW50IHdoZW4gYnJvd3NlcnMgem9vbSwKICAgIC8vIGJ1dCB1bnRpbCB0aGVuIHdlIGhhdmUgdG8gc3RpY2sgd2l0aCByZWFkaW5nIGNsaWVudCByZWN0cy4KICAgIC8vIC0tCiAgICAvLyBUaGUgc2FtZSBoYXMgYmVlbiBvYnNlcnZlZCB3aXRoIEZpcmVmb3ggb24gV2luZG93czcKICAgIC8vIC0tCiAgICAvLyBUaGUgc2FtZSBoYXMgYmVlbiBvdmVyc3ZlZCB3aXRoIFNhZmFyaQogICAgcmV0dXJuIGZhbHNlOwogIH0KICByZXR1cm4gdHJ1ZTsKfSgpOwp2YXIgX21vbm9zcGFjZUFzc3VtcHRpb25zQXJlVmFsaWQgPSB0cnVlOwpleHBvcnQgdmFyIERvbVJlYWRpbmdDb250ZXh0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBEb21SZWFkaW5nQ29udGV4dChkb21Ob2RlLCBlbmROb2RlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRG9tUmVhZGluZ0NvbnRleHQpOwogICAgdGhpcy5fZG9tTm9kZSA9IGRvbU5vZGU7CiAgICB0aGlzLl9jbGllbnRSZWN0RGVsdGFMZWZ0ID0gMDsKICAgIHRoaXMuX2NsaWVudFJlY3RTY2FsZSA9IDE7CiAgICB0aGlzLl9jbGllbnRSZWN0UmVhZCA9IGZhbHNlOwogICAgdGhpcy5lbmROb2RlID0gZW5kTm9kZTsKICB9CiAgX2NyZWF0ZUNsYXNzKERvbVJlYWRpbmdDb250ZXh0LCBbewogICAga2V5OiAicmVhZENsaWVudFJlY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWRDbGllbnRSZWN0KCkgewogICAgICBpZiAoIXRoaXMuX2NsaWVudFJlY3RSZWFkKSB7CiAgICAgICAgdGhpcy5fY2xpZW50UmVjdFJlYWQgPSB0cnVlOwogICAgICAgIHZhciByZWN0ID0gdGhpcy5fZG9tTm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICB0aGlzLl9jbGllbnRSZWN0RGVsdGFMZWZ0ID0gcmVjdC5sZWZ0OwogICAgICAgIHRoaXMuX2NsaWVudFJlY3RTY2FsZSA9IHJlY3Qud2lkdGggLyB0aGlzLl9kb21Ob2RlLm9mZnNldFdpZHRoOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xpZW50UmVjdERlbHRhTGVmdCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKCF0aGlzLl9jbGllbnRSZWN0UmVhZCkgewogICAgICAgIHRoaXMucmVhZENsaWVudFJlY3QoKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fY2xpZW50UmVjdERlbHRhTGVmdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGllbnRSZWN0U2NhbGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICghdGhpcy5fY2xpZW50UmVjdFJlYWQpIHsKICAgICAgICB0aGlzLnJlYWRDbGllbnRSZWN0KCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX2NsaWVudFJlY3RTY2FsZTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIERvbVJlYWRpbmdDb250ZXh0Owp9KCk7CmV4cG9ydCB2YXIgVmlld0xpbmVPcHRpb25zID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBWaWV3TGluZU9wdGlvbnMoY29uZmlnLCB0aGVtZVR5cGUpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWaWV3TGluZU9wdGlvbnMpOwogICAgdGhpcy50aGVtZVR5cGUgPSB0aGVtZVR5cGU7CiAgICB2YXIgb3B0aW9ucyA9IGNvbmZpZy5vcHRpb25zOwogICAgdmFyIGZvbnRJbmZvID0gb3B0aW9ucy5nZXQoNDYgLyogRWRpdG9yT3B0aW9uLmZvbnRJbmZvICovKTsKICAgIHRoaXMucmVuZGVyV2hpdGVzcGFjZSA9IG9wdGlvbnMuZ2V0KDkwIC8qIEVkaXRvck9wdGlvbi5yZW5kZXJXaGl0ZXNwYWNlICovKTsKICAgIHRoaXMucmVuZGVyQ29udHJvbENoYXJhY3RlcnMgPSBvcHRpb25zLmdldCg4NSAvKiBFZGl0b3JPcHRpb24ucmVuZGVyQ29udHJvbENoYXJhY3RlcnMgKi8pOwogICAgdGhpcy5zcGFjZVdpZHRoID0gZm9udEluZm8uc3BhY2VXaWR0aDsKICAgIHRoaXMubWlkZG90V2lkdGggPSBmb250SW5mby5taWRkb3RXaWR0aDsKICAgIHRoaXMud3NtaWRkb3RXaWR0aCA9IGZvbnRJbmZvLndzbWlkZG90V2lkdGg7CiAgICB0aGlzLnVzZU1vbm9zcGFjZU9wdGltaXphdGlvbnMgPSBmb250SW5mby5pc01vbm9zcGFjZSAmJiAhb3B0aW9ucy5nZXQoMjkgLyogRWRpdG9yT3B0aW9uLmRpc2FibGVNb25vc3BhY2VPcHRpbWl6YXRpb25zICovKTsKICAgIHRoaXMuY2FuVXNlSGFsZndpZHRoUmlnaHR3YXJkc0Fycm93ID0gZm9udEluZm8uY2FuVXNlSGFsZndpZHRoUmlnaHR3YXJkc0Fycm93OwogICAgdGhpcy5saW5lSGVpZ2h0ID0gb3B0aW9ucy5nZXQoNjEgLyogRWRpdG9yT3B0aW9uLmxpbmVIZWlnaHQgKi8pOwogICAgdGhpcy5zdG9wUmVuZGVyaW5nTGluZUFmdGVyID0gb3B0aW9ucy5nZXQoMTA3IC8qIEVkaXRvck9wdGlvbi5zdG9wUmVuZGVyaW5nTGluZUFmdGVyICovKTsKICAgIHRoaXMuZm9udExpZ2F0dXJlcyA9IG9wdGlvbnMuZ2V0KDQ3IC8qIEVkaXRvck9wdGlvbi5mb250TGlnYXR1cmVzICovKTsKICB9CiAgX2NyZWF0ZUNsYXNzKFZpZXdMaW5lT3B0aW9ucywgW3sKICAgIGtleTogImVxdWFscyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXF1YWxzKG90aGVyKSB7CiAgICAgIHJldHVybiB0aGlzLnRoZW1lVHlwZSA9PT0gb3RoZXIudGhlbWVUeXBlICYmIHRoaXMucmVuZGVyV2hpdGVzcGFjZSA9PT0gb3RoZXIucmVuZGVyV2hpdGVzcGFjZSAmJiB0aGlzLnJlbmRlckNvbnRyb2xDaGFyYWN0ZXJzID09PSBvdGhlci5yZW5kZXJDb250cm9sQ2hhcmFjdGVycyAmJiB0aGlzLnNwYWNlV2lkdGggPT09IG90aGVyLnNwYWNlV2lkdGggJiYgdGhpcy5taWRkb3RXaWR0aCA9PT0gb3RoZXIubWlkZG90V2lkdGggJiYgdGhpcy53c21pZGRvdFdpZHRoID09PSBvdGhlci53c21pZGRvdFdpZHRoICYmIHRoaXMudXNlTW9ub3NwYWNlT3B0aW1pemF0aW9ucyA9PT0gb3RoZXIudXNlTW9ub3NwYWNlT3B0aW1pemF0aW9ucyAmJiB0aGlzLmNhblVzZUhhbGZ3aWR0aFJpZ2h0d2FyZHNBcnJvdyA9PT0gb3RoZXIuY2FuVXNlSGFsZndpZHRoUmlnaHR3YXJkc0Fycm93ICYmIHRoaXMubGluZUhlaWdodCA9PT0gb3RoZXIubGluZUhlaWdodCAmJiB0aGlzLnN0b3BSZW5kZXJpbmdMaW5lQWZ0ZXIgPT09IG90aGVyLnN0b3BSZW5kZXJpbmdMaW5lQWZ0ZXIgJiYgdGhpcy5mb250TGlnYXR1cmVzID09PSBvdGhlci5mb250TGlnYXR1cmVzOwogICAgfQogIH1dKTsKICByZXR1cm4gVmlld0xpbmVPcHRpb25zOwp9KCk7CmV4cG9ydCB2YXIgVmlld0xpbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFZpZXdMaW5lKG9wdGlvbnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWaWV3TGluZSk7CiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9uczsKICAgIHRoaXMuX2lzTWF5YmVJbnZhbGlkID0gdHJ1ZTsKICAgIHRoaXMuX3JlbmRlcmVkVmlld0xpbmUgPSBudWxsOwogIH0KICAvLyAtLS0gYmVnaW4gSVZpc2libGVMaW5lRGF0YQogIF9jcmVhdGVDbGFzcyhWaWV3TGluZSwgW3sKICAgIGtleTogImdldERvbU5vZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERvbU5vZGUoKSB7CiAgICAgIGlmICh0aGlzLl9yZW5kZXJlZFZpZXdMaW5lICYmIHRoaXMuX3JlbmRlcmVkVmlld0xpbmUuZG9tTm9kZSkgewogICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZFZpZXdMaW5lLmRvbU5vZGUuZG9tTm9kZTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXREb21Ob2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREb21Ob2RlKGRvbU5vZGUpIHsKICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkVmlld0xpbmUpIHsKICAgICAgICB0aGlzLl9yZW5kZXJlZFZpZXdMaW5lLmRvbU5vZGUgPSBjcmVhdGVGYXN0RG9tTm9kZShkb21Ob2RlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0kgaGF2ZSBubyByZW5kZXJlZCB2aWV3IGxpbmUgdG8gc2V0IHRoZSBkb20gbm9kZSB0by4uLicpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib25Db250ZW50Q2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db250ZW50Q2hhbmdlZCgpIHsKICAgICAgdGhpcy5faXNNYXliZUludmFsaWQgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uVG9rZW5zQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Ub2tlbnNDaGFuZ2VkKCkgewogICAgICB0aGlzLl9pc01heWJlSW52YWxpZCA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAib25EZWNvcmF0aW9uc0NoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uRGVjb3JhdGlvbnNDaGFuZ2VkKCkgewogICAgICB0aGlzLl9pc01heWJlSW52YWxpZCA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAib25PcHRpb25zQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25PcHRpb25zQ2hhbmdlZChuZXdPcHRpb25zKSB7CiAgICAgIHRoaXMuX2lzTWF5YmVJbnZhbGlkID0gdHJ1ZTsKICAgICAgdGhpcy5fb3B0aW9ucyA9IG5ld09wdGlvbnM7CiAgICB9CiAgfSwgewogICAga2V5OiAib25TZWxlY3Rpb25DaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNlbGVjdGlvbkNoYW5nZWQoKSB7CiAgICAgIGlmIChpc0hpZ2hDb250cmFzdCh0aGlzLl9vcHRpb25zLnRoZW1lVHlwZSkgfHwgdGhpcy5fb3B0aW9ucy5yZW5kZXJXaGl0ZXNwYWNlID09PSAnc2VsZWN0aW9uJykgewogICAgICAgIHRoaXMuX2lzTWF5YmVJbnZhbGlkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyTGluZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyTGluZShsaW5lTnVtYmVyLCBkZWx0YVRvcCwgdmlld3BvcnREYXRhLCBzYikgewogICAgICBpZiAodGhpcy5faXNNYXliZUludmFsaWQgPT09IGZhbHNlKSB7CiAgICAgICAgLy8gaXQgYXBwZWFycyB0aGF0IG5vdGhpbmcgcmVsZXZhbnQgaGFzIGNoYW5nZWQKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5faXNNYXliZUludmFsaWQgPSBmYWxzZTsKICAgICAgdmFyIGxpbmVEYXRhID0gdmlld3BvcnREYXRhLmdldFZpZXdMaW5lUmVuZGVyaW5nRGF0YShsaW5lTnVtYmVyKTsKICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLl9vcHRpb25zOwogICAgICB2YXIgYWN0dWFsSW5saW5lRGVjb3JhdGlvbnMgPSBMaW5lRGVjb3JhdGlvbi5maWx0ZXIobGluZURhdGEuaW5saW5lRGVjb3JhdGlvbnMsIGxpbmVOdW1iZXIsIGxpbmVEYXRhLm1pbkNvbHVtbiwgbGluZURhdGEubWF4Q29sdW1uKTsKICAgICAgLy8gT25seSBzZW5kIHNlbGVjdGlvbiBpbmZvcm1hdGlvbiB3aGVuIG5lZWRlZCBmb3IgcmVuZGVyaW5nIHdoaXRlc3BhY2UKICAgICAgdmFyIHNlbGVjdGlvbnNPbkxpbmUgPSBudWxsOwogICAgICBpZiAoaXNIaWdoQ29udHJhc3Qob3B0aW9ucy50aGVtZVR5cGUpIHx8IHRoaXMuX29wdGlvbnMucmVuZGVyV2hpdGVzcGFjZSA9PT0gJ3NlbGVjdGlvbicpIHsKICAgICAgICB2YXIgc2VsZWN0aW9ucyA9IHZpZXdwb3J0RGF0YS5zZWxlY3Rpb25zOwogICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihzZWxlY3Rpb25zKSwKICAgICAgICAgIF9zdGVwOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uZW5kTGluZU51bWJlciA8IGxpbmVOdW1iZXIgfHwgc2VsZWN0aW9uLnN0YXJ0TGluZU51bWJlciA+IGxpbmVOdW1iZXIpIHsKICAgICAgICAgICAgICAvLyBTZWxlY3Rpb24gZG9lcyBub3QgaW50ZXJzZWN0IGxpbmUKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgc3RhcnRDb2x1bW4gPSBzZWxlY3Rpb24uc3RhcnRMaW5lTnVtYmVyID09PSBsaW5lTnVtYmVyID8gc2VsZWN0aW9uLnN0YXJ0Q29sdW1uIDogbGluZURhdGEubWluQ29sdW1uOwogICAgICAgICAgICB2YXIgZW5kQ29sdW1uID0gc2VsZWN0aW9uLmVuZExpbmVOdW1iZXIgPT09IGxpbmVOdW1iZXIgPyBzZWxlY3Rpb24uZW5kQ29sdW1uIDogbGluZURhdGEubWF4Q29sdW1uOwogICAgICAgICAgICBpZiAoc3RhcnRDb2x1bW4gPCBlbmRDb2x1bW4pIHsKICAgICAgICAgICAgICBpZiAoaXNIaWdoQ29udHJhc3Qob3B0aW9ucy50aGVtZVR5cGUpIHx8IHRoaXMuX29wdGlvbnMucmVuZGVyV2hpdGVzcGFjZSAhPT0gJ3NlbGVjdGlvbicpIHsKICAgICAgICAgICAgICAgIGFjdHVhbElubGluZURlY29yYXRpb25zLnB1c2gobmV3IExpbmVEZWNvcmF0aW9uKHN0YXJ0Q29sdW1uLCBlbmRDb2x1bW4sICdpbmxpbmUtc2VsZWN0ZWQtdGV4dCcsIDAgLyogSW5saW5lRGVjb3JhdGlvblR5cGUuUmVndWxhciAqLykpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGlvbnNPbkxpbmUpIHsKICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uc09uTGluZSA9IFtdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2VsZWN0aW9uc09uTGluZS5wdXNoKG5ldyBMaW5lUmFuZ2Uoc3RhcnRDb2x1bW4gLSAxLCBlbmRDb2x1bW4gLSAxKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgcmVuZGVyTGluZUlucHV0ID0gbmV3IFJlbmRlckxpbmVJbnB1dChvcHRpb25zLnVzZU1vbm9zcGFjZU9wdGltaXphdGlvbnMsIG9wdGlvbnMuY2FuVXNlSGFsZndpZHRoUmlnaHR3YXJkc0Fycm93LCBsaW5lRGF0YS5jb250ZW50LCBsaW5lRGF0YS5jb250aW51ZXNXaXRoV3JhcHBlZExpbmUsIGxpbmVEYXRhLmlzQmFzaWNBU0NJSSwgbGluZURhdGEuY29udGFpbnNSVEwsIGxpbmVEYXRhLm1pbkNvbHVtbiAtIDEsIGxpbmVEYXRhLnRva2VucywgYWN0dWFsSW5saW5lRGVjb3JhdGlvbnMsIGxpbmVEYXRhLnRhYlNpemUsIGxpbmVEYXRhLnN0YXJ0VmlzaWJsZUNvbHVtbiwgb3B0aW9ucy5zcGFjZVdpZHRoLCBvcHRpb25zLm1pZGRvdFdpZHRoLCBvcHRpb25zLndzbWlkZG90V2lkdGgsIG9wdGlvbnMuc3RvcFJlbmRlcmluZ0xpbmVBZnRlciwgb3B0aW9ucy5yZW5kZXJXaGl0ZXNwYWNlLCBvcHRpb25zLnJlbmRlckNvbnRyb2xDaGFyYWN0ZXJzLCBvcHRpb25zLmZvbnRMaWdhdHVyZXMgIT09IEVkaXRvckZvbnRMaWdhdHVyZXMuT0ZGLCBzZWxlY3Rpb25zT25MaW5lKTsKICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkVmlld0xpbmUgJiYgdGhpcy5fcmVuZGVyZWRWaWV3TGluZS5pbnB1dC5lcXVhbHMocmVuZGVyTGluZUlucHV0KSkgewogICAgICAgIC8vIG5vIG5lZWQgdG8gZG8gYW55dGhpbmcsIHdlIGhhdmUgdGhlIHNhbWUgcmVuZGVyIGlucHV0CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHNiLmFwcGVuZEFTQ0lJU3RyaW5nKCc8ZGl2IHN0eWxlPSJ0b3A6Jyk7CiAgICAgIHNiLmFwcGVuZEFTQ0lJU3RyaW5nKFN0cmluZyhkZWx0YVRvcCkpOwogICAgICBzYi5hcHBlbmRBU0NJSVN0cmluZygncHg7aGVpZ2h0OicpOwogICAgICBzYi5hcHBlbmRBU0NJSVN0cmluZyhTdHJpbmcodGhpcy5fb3B0aW9ucy5saW5lSGVpZ2h0KSk7CiAgICAgIHNiLmFwcGVuZEFTQ0lJU3RyaW5nKCdweDsiIGNsYXNzPSInKTsKICAgICAgc2IuYXBwZW5kQVNDSUlTdHJpbmcoVmlld0xpbmUuQ0xBU1NfTkFNRSk7CiAgICAgIHNiLmFwcGVuZEFTQ0lJU3RyaW5nKCciPicpOwogICAgICB2YXIgb3V0cHV0ID0gcmVuZGVyVmlld0xpbmUocmVuZGVyTGluZUlucHV0LCBzYik7CiAgICAgIHNiLmFwcGVuZEFTQ0lJU3RyaW5nKCc8L2Rpdj4nKTsKICAgICAgdmFyIHJlbmRlcmVkVmlld0xpbmUgPSBudWxsOwogICAgICBpZiAoX21vbm9zcGFjZUFzc3VtcHRpb25zQXJlVmFsaWQgJiYgY2FuVXNlRmFzdFJlbmRlcmVkVmlld0xpbmUgJiYgbGluZURhdGEuaXNCYXNpY0FTQ0lJICYmIG9wdGlvbnMudXNlTW9ub3NwYWNlT3B0aW1pemF0aW9ucyAmJiBvdXRwdXQuY29udGFpbnNGb3JlaWduRWxlbWVudHMgPT09IDAgLyogRm9yZWlnbkVsZW1lbnRUeXBlLk5vbmUgKi8pIHsKICAgICAgICBpZiAobGluZURhdGEuY29udGVudC5sZW5ndGggPCAzMDAgJiYgcmVuZGVyTGluZUlucHV0LmxpbmVUb2tlbnMuZ2V0Q291bnQoKSA8IDEwMCkgewogICAgICAgICAgLy8gQnJvd3NlciByb3VuZGluZyBlcnJvcnMgaGF2ZSBiZWVuIG9ic2VydmVkIGluIENocm9tZSBhbmQgSUUsIHNvIHVzaW5nIHRoZSBmYXN0CiAgICAgICAgICAvLyB2aWV3IGxpbmUgb25seSBmb3Igc2hvcnQgbGluZXMuIFBsZWFzZSB0ZXN0IGJlZm9yZSByZW1vdmluZyB0aGUgbGVuZ3RoIGNoZWNrLi4uCiAgICAgICAgICAvLyAtLS0KICAgICAgICAgIC8vIEFub3RoZXIgcm91bmRpbmcgZXJyb3IgaGFzIGJlZW4gb2JzZXJ2ZWQgb24gTGludXggaW4gVlNDb2RlLCB3aGVyZSA8c3Bhbj4gd2lkdGgKICAgICAgICAgIC8vIHJvdW5kaW5nIGVycm9ycyBhZGQgdXAgdG8gYW4gb2JzZXJ2YWJsZSBsYXJnZSBudW1iZXIuLi4KICAgICAgICAgIC8vIC0tLQogICAgICAgICAgLy8gQWxzbyBzZWUgYW5vdGhlciBleGFtcGxlIG9mIHJvdW5kaW5nIGVycm9ycyBvbiBXaW5kb3dzIGluCiAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L3ZzY29kZS9pc3N1ZXMvMzMxNzgKICAgICAgICAgIHJlbmRlcmVkVmlld0xpbmUgPSBuZXcgRmFzdFJlbmRlcmVkVmlld0xpbmUodGhpcy5fcmVuZGVyZWRWaWV3TGluZSA/IHRoaXMuX3JlbmRlcmVkVmlld0xpbmUuZG9tTm9kZSA6IG51bGwsIHJlbmRlckxpbmVJbnB1dCwgb3V0cHV0LmNoYXJhY3Rlck1hcHBpbmcpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXJlbmRlcmVkVmlld0xpbmUpIHsKICAgICAgICByZW5kZXJlZFZpZXdMaW5lID0gY3JlYXRlUmVuZGVyZWRMaW5lKHRoaXMuX3JlbmRlcmVkVmlld0xpbmUgPyB0aGlzLl9yZW5kZXJlZFZpZXdMaW5lLmRvbU5vZGUgOiBudWxsLCByZW5kZXJMaW5lSW5wdXQsIG91dHB1dC5jaGFyYWN0ZXJNYXBwaW5nLCBvdXRwdXQuY29udGFpbnNSVEwsIG91dHB1dC5jb250YWluc0ZvcmVpZ25FbGVtZW50cyk7CiAgICAgIH0KICAgICAgdGhpcy5fcmVuZGVyZWRWaWV3TGluZSA9IHJlbmRlcmVkVmlld0xpbmU7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImxheW91dExpbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxheW91dExpbmUobGluZU51bWJlciwgZGVsdGFUb3ApIHsKICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkVmlld0xpbmUgJiYgdGhpcy5fcmVuZGVyZWRWaWV3TGluZS5kb21Ob2RlKSB7CiAgICAgICAgdGhpcy5fcmVuZGVyZWRWaWV3TGluZS5kb21Ob2RlLnNldFRvcChkZWx0YVRvcCk7CiAgICAgICAgdGhpcy5fcmVuZGVyZWRWaWV3TGluZS5kb21Ob2RlLnNldEhlaWdodCh0aGlzLl9vcHRpb25zLmxpbmVIZWlnaHQpOwogICAgICB9CiAgICB9CiAgICAvLyAtLS0gZW5kIElWaXNpYmxlTGluZURhdGEKICB9LCB7CiAgICBrZXk6ICJnZXRXaWR0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2lkdGgoKSB7CiAgICAgIGlmICghdGhpcy5fcmVuZGVyZWRWaWV3TGluZSkgewogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZFZpZXdMaW5lLmdldFdpZHRoKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0V2lkdGhJc0Zhc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFdpZHRoSXNGYXN0KCkgewogICAgICBpZiAoIXRoaXMuX3JlbmRlcmVkVmlld0xpbmUpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRWaWV3TGluZS5nZXRXaWR0aElzRmFzdCgpOwogICAgfQogIH0sIHsKICAgIGtleTogIm5lZWRzTW9ub3NwYWNlRm9udENoZWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuZWVkc01vbm9zcGFjZUZvbnRDaGVjaygpIHsKICAgICAgaWYgKCF0aGlzLl9yZW5kZXJlZFZpZXdMaW5lKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZFZpZXdMaW5lIGluc3RhbmNlb2YgRmFzdFJlbmRlcmVkVmlld0xpbmU7CiAgICB9CiAgfSwgewogICAga2V5OiAibW9ub3NwYWNlQXNzdW1wdGlvbnNBcmVWYWxpZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW9ub3NwYWNlQXNzdW1wdGlvbnNBcmVWYWxpZCgpIHsKICAgICAgaWYgKCF0aGlzLl9yZW5kZXJlZFZpZXdMaW5lKSB7CiAgICAgICAgcmV0dXJuIF9tb25vc3BhY2VBc3N1bXB0aW9uc0FyZVZhbGlkOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9yZW5kZXJlZFZpZXdMaW5lIGluc3RhbmNlb2YgRmFzdFJlbmRlcmVkVmlld0xpbmUpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRWaWV3TGluZS5tb25vc3BhY2VBc3N1bXB0aW9uc0FyZVZhbGlkKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIF9tb25vc3BhY2VBc3N1bXB0aW9uc0FyZVZhbGlkOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uTW9ub3NwYWNlQXNzdW1wdGlvbnNJbnZhbGlkYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Nb25vc3BhY2VBc3N1bXB0aW9uc0ludmFsaWRhdGVkKCkgewogICAgICBpZiAodGhpcy5fcmVuZGVyZWRWaWV3TGluZSAmJiB0aGlzLl9yZW5kZXJlZFZpZXdMaW5lIGluc3RhbmNlb2YgRmFzdFJlbmRlcmVkVmlld0xpbmUpIHsKICAgICAgICB0aGlzLl9yZW5kZXJlZFZpZXdMaW5lID0gdGhpcy5fcmVuZGVyZWRWaWV3TGluZS50b1Nsb3dSZW5kZXJlZExpbmUoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldFZpc2libGVSYW5nZXNGb3JSYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmlzaWJsZVJhbmdlc0ZvclJhbmdlKGxpbmVOdW1iZXIsIHN0YXJ0Q29sdW1uLCBlbmRDb2x1bW4sIGNvbnRleHQpIHsKICAgICAgaWYgKCF0aGlzLl9yZW5kZXJlZFZpZXdMaW5lKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgc3RhcnRDb2x1bW4gPSBNYXRoLm1pbih0aGlzLl9yZW5kZXJlZFZpZXdMaW5lLmlucHV0LmxpbmVDb250ZW50Lmxlbmd0aCArIDEsIE1hdGgubWF4KDEsIHN0YXJ0Q29sdW1uKSk7CiAgICAgIGVuZENvbHVtbiA9IE1hdGgubWluKHRoaXMuX3JlbmRlcmVkVmlld0xpbmUuaW5wdXQubGluZUNvbnRlbnQubGVuZ3RoICsgMSwgTWF0aC5tYXgoMSwgZW5kQ29sdW1uKSk7CiAgICAgIHZhciBzdG9wUmVuZGVyaW5nTGluZUFmdGVyID0gdGhpcy5fcmVuZGVyZWRWaWV3TGluZS5pbnB1dC5zdG9wUmVuZGVyaW5nTGluZUFmdGVyOwogICAgICB2YXIgb3V0c2lkZVJlbmRlcmVkTGluZSA9IGZhbHNlOwogICAgICBpZiAoc3RvcFJlbmRlcmluZ0xpbmVBZnRlciAhPT0gLTEgJiYgc3RhcnRDb2x1bW4gPiBzdG9wUmVuZGVyaW5nTGluZUFmdGVyICsgMSAmJiBlbmRDb2x1bW4gPiBzdG9wUmVuZGVyaW5nTGluZUFmdGVyICsgMSkgewogICAgICAgIC8vIFRoaXMgcmFuZ2UgaXMgb2J2aW91c2x5IG5vdCB2aXNpYmxlCiAgICAgICAgb3V0c2lkZVJlbmRlcmVkTGluZSA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHN0b3BSZW5kZXJpbmdMaW5lQWZ0ZXIgIT09IC0xICYmIHN0YXJ0Q29sdW1uID4gc3RvcFJlbmRlcmluZ0xpbmVBZnRlciArIDEpIHsKICAgICAgICBzdGFydENvbHVtbiA9IHN0b3BSZW5kZXJpbmdMaW5lQWZ0ZXIgKyAxOwogICAgICB9CiAgICAgIGlmIChzdG9wUmVuZGVyaW5nTGluZUFmdGVyICE9PSAtMSAmJiBlbmRDb2x1bW4gPiBzdG9wUmVuZGVyaW5nTGluZUFmdGVyICsgMSkgewogICAgICAgIGVuZENvbHVtbiA9IHN0b3BSZW5kZXJpbmdMaW5lQWZ0ZXIgKyAxOwogICAgICB9CiAgICAgIHZhciBob3Jpem9udGFsUmFuZ2VzID0gdGhpcy5fcmVuZGVyZWRWaWV3TGluZS5nZXRWaXNpYmxlUmFuZ2VzRm9yUmFuZ2UobGluZU51bWJlciwgc3RhcnRDb2x1bW4sIGVuZENvbHVtbiwgY29udGV4dCk7CiAgICAgIGlmIChob3Jpem9udGFsUmFuZ2VzICYmIGhvcml6b250YWxSYW5nZXMubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBuZXcgVmlzaWJsZVJhbmdlcyhvdXRzaWRlUmVuZGVyZWRMaW5lLCBob3Jpem9udGFsUmFuZ2VzKTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb2x1bW5PZk5vZGVPZmZzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbHVtbk9mTm9kZU9mZnNldChsaW5lTnVtYmVyLCBzcGFuTm9kZSwgb2Zmc2V0KSB7CiAgICAgIGlmICghdGhpcy5fcmVuZGVyZWRWaWV3TGluZSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZFZpZXdMaW5lLmdldENvbHVtbk9mTm9kZU9mZnNldChsaW5lTnVtYmVyLCBzcGFuTm9kZSwgb2Zmc2V0KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFZpZXdMaW5lOwp9KCk7ClZpZXdMaW5lLkNMQVNTX05BTUUgPSAndmlldy1saW5lJzsKLyoqCiAqIEEgcmVuZGVyZWQgbGluZSB3aGljaCBpcyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gb25seSByZWd1bGFyIEFTQ0lJIGFuZCBpcyByZW5kZXJlZCB3aXRoIGEgbW9ub3NwYWNlIGZvbnQuCiAqLwp2YXIgRmFzdFJlbmRlcmVkVmlld0xpbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEZhc3RSZW5kZXJlZFZpZXdMaW5lKGRvbU5vZGUsIHJlbmRlckxpbmVJbnB1dCwgY2hhcmFjdGVyTWFwcGluZykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZhc3RSZW5kZXJlZFZpZXdMaW5lKTsKICAgIHRoaXMuZG9tTm9kZSA9IGRvbU5vZGU7CiAgICB0aGlzLmlucHV0ID0gcmVuZGVyTGluZUlucHV0OwogICAgdGhpcy5fY2hhcmFjdGVyTWFwcGluZyA9IGNoYXJhY3Rlck1hcHBpbmc7CiAgICB0aGlzLl9jaGFyV2lkdGggPSByZW5kZXJMaW5lSW5wdXQuc3BhY2VXaWR0aDsKICB9CiAgX2NyZWF0ZUNsYXNzKEZhc3RSZW5kZXJlZFZpZXdMaW5lLCBbewogICAga2V5OiAiZ2V0V2lkdGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFdpZHRoKCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLl9nZXRDaGFyUG9zaXRpb24odGhpcy5fY2hhcmFjdGVyTWFwcGluZy5sZW5ndGgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRXaWR0aElzRmFzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2lkdGhJc0Zhc3QoKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vbm9zcGFjZUFzc3VtcHRpb25zQXJlVmFsaWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vbm9zcGFjZUFzc3VtcHRpb25zQXJlVmFsaWQoKSB7CiAgICAgIGlmICghdGhpcy5kb21Ob2RlKSB7CiAgICAgICAgcmV0dXJuIF9tb25vc3BhY2VBc3N1bXB0aW9uc0FyZVZhbGlkOwogICAgICB9CiAgICAgIHZhciBleHBlY3RlZFdpZHRoID0gdGhpcy5nZXRXaWR0aCgpOwogICAgICB2YXIgYWN0dWFsV2lkdGggPSB0aGlzLmRvbU5vZGUuZG9tTm9kZS5maXJzdENoaWxkLm9mZnNldFdpZHRoOwogICAgICBpZiAoTWF0aC5hYnMoZXhwZWN0ZWRXaWR0aCAtIGFjdHVhbFdpZHRoKSA+PSAyKSB7CiAgICAgICAgLy8gbW9yZSB0aGFuIDJweCBvZmYKICAgICAgICBjb25zb2xlLndhcm4oIm1vbm9zcGFjZSBhc3N1bXB0aW9ucyBoYXZlIGJlZW4gdmlvbGF0ZWQsIHRoZXJlZm9yZSBkaXNhYmxpbmcgbW9ub3NwYWNlIG9wdGltaXphdGlvbnMhIik7CiAgICAgICAgX21vbm9zcGFjZUFzc3VtcHRpb25zQXJlVmFsaWQgPSBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gX21vbm9zcGFjZUFzc3VtcHRpb25zQXJlVmFsaWQ7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9TbG93UmVuZGVyZWRMaW5lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b1Nsb3dSZW5kZXJlZExpbmUoKSB7CiAgICAgIHJldHVybiBjcmVhdGVSZW5kZXJlZExpbmUodGhpcy5kb21Ob2RlLCB0aGlzLmlucHV0LCB0aGlzLl9jaGFyYWN0ZXJNYXBwaW5nLCBmYWxzZSwgMCAvKiBGb3JlaWduRWxlbWVudFR5cGUuTm9uZSAqLyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VmlzaWJsZVJhbmdlc0ZvclJhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWaXNpYmxlUmFuZ2VzRm9yUmFuZ2UobGluZU51bWJlciwgc3RhcnRDb2x1bW4sIGVuZENvbHVtbiwgY29udGV4dCkgewogICAgICB2YXIgc3RhcnRQb3NpdGlvbiA9IHRoaXMuX2dldENoYXJQb3NpdGlvbihzdGFydENvbHVtbik7CiAgICAgIHZhciBlbmRQb3NpdGlvbiA9IHRoaXMuX2dldENoYXJQb3NpdGlvbihlbmRDb2x1bW4pOwogICAgICByZXR1cm4gW25ldyBGbG9hdEhvcml6b250YWxSYW5nZShzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbiAtIHN0YXJ0UG9zaXRpb24pXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0Q2hhclBvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0Q2hhclBvc2l0aW9uKGNvbHVtbikgewogICAgICB2YXIgaG9yaXpvbnRhbE9mZnNldCA9IHRoaXMuX2NoYXJhY3Rlck1hcHBpbmcuZ2V0SG9yaXpvbnRhbE9mZnNldChjb2x1bW4pOwogICAgICByZXR1cm4gdGhpcy5fY2hhcldpZHRoICogaG9yaXpvbnRhbE9mZnNldDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb2x1bW5PZk5vZGVPZmZzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbHVtbk9mTm9kZU9mZnNldChsaW5lTnVtYmVyLCBzcGFuTm9kZSwgb2Zmc2V0KSB7CiAgICAgIHZhciBzcGFuTm9kZVRleHRDb250ZW50TGVuZ3RoID0gc3Bhbk5vZGUudGV4dENvbnRlbnQubGVuZ3RoOwogICAgICB2YXIgc3BhbkluZGV4ID0gLTE7CiAgICAgIHdoaWxlIChzcGFuTm9kZSkgewogICAgICAgIHNwYW5Ob2RlID0gc3Bhbk5vZGUucHJldmlvdXNTaWJsaW5nOwogICAgICAgIHNwYW5JbmRleCsrOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9jaGFyYWN0ZXJNYXBwaW5nLmdldENvbHVtbihuZXcgRG9tUG9zaXRpb24oc3BhbkluZGV4LCBvZmZzZXQpLCBzcGFuTm9kZVRleHRDb250ZW50TGVuZ3RoKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEZhc3RSZW5kZXJlZFZpZXdMaW5lOwp9KCk7Ci8qKgogKiBFdmVyeSB0aW1lIHdlIHJlbmRlciBhIGxpbmUsIHdlIHNhdmUgd2hhdCB3ZSBoYXZlIHJlbmRlcmVkIGluIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuCiAqLwp2YXIgUmVuZGVyZWRWaWV3TGluZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUmVuZGVyZWRWaWV3TGluZShkb21Ob2RlLCByZW5kZXJMaW5lSW5wdXQsIGNoYXJhY3Rlck1hcHBpbmcsIGNvbnRhaW5zUlRMLCBjb250YWluc0ZvcmVpZ25FbGVtZW50cykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlbmRlcmVkVmlld0xpbmUpOwogICAgdGhpcy5kb21Ob2RlID0gZG9tTm9kZTsKICAgIHRoaXMuaW5wdXQgPSByZW5kZXJMaW5lSW5wdXQ7CiAgICB0aGlzLl9jaGFyYWN0ZXJNYXBwaW5nID0gY2hhcmFjdGVyTWFwcGluZzsKICAgIHRoaXMuX2lzV2hpdGVzcGFjZU9ubHkgPSAvXlxzKiQvLnRlc3QocmVuZGVyTGluZUlucHV0LmxpbmVDb250ZW50KTsKICAgIHRoaXMuX2NvbnRhaW5zRm9yZWlnbkVsZW1lbnRzID0gY29udGFpbnNGb3JlaWduRWxlbWVudHM7CiAgICB0aGlzLl9jYWNoZWRXaWR0aCA9IC0xOwogICAgdGhpcy5fcGl4ZWxPZmZzZXRDYWNoZSA9IG51bGw7CiAgICBpZiAoIWNvbnRhaW5zUlRMIHx8IHRoaXMuX2NoYXJhY3Rlck1hcHBpbmcubGVuZ3RoID09PSAwIC8qIHRoZSBsaW5lIGlzIGVtcHR5ICovKSB7CiAgICAgIHRoaXMuX3BpeGVsT2Zmc2V0Q2FjaGUgPSBuZXcgRmxvYXQzMkFycmF5KE1hdGgubWF4KDIsIHRoaXMuX2NoYXJhY3Rlck1hcHBpbmcubGVuZ3RoICsgMSkpOwogICAgICBmb3IgKHZhciBjb2x1bW4gPSAwLCBsZW4gPSB0aGlzLl9jaGFyYWN0ZXJNYXBwaW5nLmxlbmd0aDsgY29sdW1uIDw9IGxlbjsgY29sdW1uKyspIHsKICAgICAgICB0aGlzLl9waXhlbE9mZnNldENhY2hlW2NvbHVtbl0gPSAtMTsKICAgICAgfQogICAgfQogIH0KICAvLyAtLS0gUmVhZGluZyBmcm9tIHRoZSBET00gbWV0aG9kcwogIF9jcmVhdGVDbGFzcyhSZW5kZXJlZFZpZXdMaW5lLCBbewogICAga2V5OiAiX2dldFJlYWRpbmdUYXJnZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRSZWFkaW5nVGFyZ2V0KG15RG9tTm9kZSkgewogICAgICByZXR1cm4gbXlEb21Ob2RlLmRvbU5vZGUuZmlyc3RDaGlsZDsKICAgIH0KICAgIC8qKgogICAgICogV2lkdGggb2YgdGhlIGxpbmUgaW4gcGl4ZWxzCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJnZXRXaWR0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2lkdGgoKSB7CiAgICAgIGlmICghdGhpcy5kb21Ob2RlKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX2NhY2hlZFdpZHRoID09PSAtMSkgewogICAgICAgIHRoaXMuX2NhY2hlZFdpZHRoID0gdGhpcy5fZ2V0UmVhZGluZ1RhcmdldCh0aGlzLmRvbU5vZGUpLm9mZnNldFdpZHRoOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRXaWR0aDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRXaWR0aElzRmFzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2lkdGhJc0Zhc3QoKSB7CiAgICAgIGlmICh0aGlzLl9jYWNoZWRXaWR0aCA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFZpc2libGUgcmFuZ2VzIGZvciBhIG1vZGVsIHJhbmdlCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJnZXRWaXNpYmxlUmFuZ2VzRm9yUmFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZpc2libGVSYW5nZXNGb3JSYW5nZShsaW5lTnVtYmVyLCBzdGFydENvbHVtbiwgZW5kQ29sdW1uLCBjb250ZXh0KSB7CiAgICAgIGlmICghdGhpcy5kb21Ob2RlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX3BpeGVsT2Zmc2V0Q2FjaGUgIT09IG51bGwpIHsKICAgICAgICAvLyB0aGUgdGV4dCBpcyBMVFIKICAgICAgICB2YXIgc3RhcnRPZmZzZXQgPSB0aGlzLl9yZWFkUGl4ZWxPZmZzZXQodGhpcy5kb21Ob2RlLCBsaW5lTnVtYmVyLCBzdGFydENvbHVtbiwgY29udGV4dCk7CiAgICAgICAgaWYgKHN0YXJ0T2Zmc2V0ID09PSAtMSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHZhciBlbmRPZmZzZXQgPSB0aGlzLl9yZWFkUGl4ZWxPZmZzZXQodGhpcy5kb21Ob2RlLCBsaW5lTnVtYmVyLCBlbmRDb2x1bW4sIGNvbnRleHQpOwogICAgICAgIGlmIChlbmRPZmZzZXQgPT09IC0xKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFtuZXcgRmxvYXRIb3Jpem9udGFsUmFuZ2Uoc3RhcnRPZmZzZXQsIGVuZE9mZnNldCAtIHN0YXJ0T2Zmc2V0KV07CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3JlYWRWaXNpYmxlUmFuZ2VzRm9yUmFuZ2UodGhpcy5kb21Ob2RlLCBsaW5lTnVtYmVyLCBzdGFydENvbHVtbiwgZW5kQ29sdW1uLCBjb250ZXh0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcmVhZFZpc2libGVSYW5nZXNGb3JSYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlYWRWaXNpYmxlUmFuZ2VzRm9yUmFuZ2UoZG9tTm9kZSwgbGluZU51bWJlciwgc3RhcnRDb2x1bW4sIGVuZENvbHVtbiwgY29udGV4dCkgewogICAgICBpZiAoc3RhcnRDb2x1bW4gPT09IGVuZENvbHVtbikgewogICAgICAgIHZhciBwaXhlbE9mZnNldCA9IHRoaXMuX3JlYWRQaXhlbE9mZnNldChkb21Ob2RlLCBsaW5lTnVtYmVyLCBzdGFydENvbHVtbiwgY29udGV4dCk7CiAgICAgICAgaWYgKHBpeGVsT2Zmc2V0ID09PSAtMSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBbbmV3IEZsb2F0SG9yaXpvbnRhbFJhbmdlKHBpeGVsT2Zmc2V0LCAwKV07CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLl9yZWFkUmF3VmlzaWJsZVJhbmdlc0ZvclJhbmdlKGRvbU5vZGUsIHN0YXJ0Q29sdW1uLCBlbmRDb2x1bW4sIGNvbnRleHQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JlYWRQaXhlbE9mZnNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlYWRQaXhlbE9mZnNldChkb21Ob2RlLCBsaW5lTnVtYmVyLCBjb2x1bW4sIGNvbnRleHQpIHsKICAgICAgaWYgKHRoaXMuX2NoYXJhY3Rlck1hcHBpbmcubGVuZ3RoID09PSAwKSB7CiAgICAgICAgLy8gVGhpcyBsaW5lIGhhcyBubyBjb250ZW50CiAgICAgICAgaWYgKHRoaXMuX2NvbnRhaW5zRm9yZWlnbkVsZW1lbnRzID09PSAwIC8qIEZvcmVpZ25FbGVtZW50VHlwZS5Ob25lICovKSB7CiAgICAgICAgICAvLyBXZSBjYW4gYXNzdW1lIHRoZSBsaW5lIGlzIHJlYWxseSBlbXB0eQogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLl9jb250YWluc0ZvcmVpZ25FbGVtZW50cyA9PT0gMiAvKiBGb3JlaWduRWxlbWVudFR5cGUuQWZ0ZXIgKi8pIHsKICAgICAgICAgIC8vIFdlIGhhdmUgZm9yZWlnbiBlbGVtZW50cyBhZnRlciB0aGUgKGVtcHR5KSBsaW5lCiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuX2NvbnRhaW5zRm9yZWlnbkVsZW1lbnRzID09PSAxIC8qIEZvcmVpZ25FbGVtZW50VHlwZS5CZWZvcmUgKi8pIHsKICAgICAgICAgIC8vIFdlIGhhdmUgZm9yZWlnbiBlbGVtZW50cyBiZWZvcmUgdGhlIChlbXB0eSkgbGluZQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0V2lkdGgoKTsKICAgICAgICB9CiAgICAgICAgLy8gV2UgaGF2ZSBmb3JlaWduIGVsZW1lbnRzIGJlZm9yZSAmIGFmdGVyIHRoZSAoZW1wdHkpIGxpbmUKICAgICAgICB2YXIgcmVhZGluZ1RhcmdldCA9IHRoaXMuX2dldFJlYWRpbmdUYXJnZXQoZG9tTm9kZSk7CiAgICAgICAgaWYgKHJlYWRpbmdUYXJnZXQuZmlyc3RDaGlsZCkgewogICAgICAgICAgcmV0dXJuIHJlYWRpbmdUYXJnZXQuZmlyc3RDaGlsZC5vZmZzZXRXaWR0aDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLl9waXhlbE9mZnNldENhY2hlICE9PSBudWxsKSB7CiAgICAgICAgLy8gdGhlIHRleHQgaXMgTFRSCiAgICAgICAgdmFyIGNhY2hlZFBpeGVsT2Zmc2V0ID0gdGhpcy5fcGl4ZWxPZmZzZXRDYWNoZVtjb2x1bW5dOwogICAgICAgIGlmIChjYWNoZWRQaXhlbE9mZnNldCAhPT0gLTEpIHsKICAgICAgICAgIHJldHVybiBjYWNoZWRQaXhlbE9mZnNldDsKICAgICAgICB9CiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2FjdHVhbFJlYWRQaXhlbE9mZnNldChkb21Ob2RlLCBsaW5lTnVtYmVyLCBjb2x1bW4sIGNvbnRleHQpOwogICAgICAgIHRoaXMuX3BpeGVsT2Zmc2V0Q2FjaGVbY29sdW1uXSA9IHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9hY3R1YWxSZWFkUGl4ZWxPZmZzZXQoZG9tTm9kZSwgbGluZU51bWJlciwgY29sdW1uLCBjb250ZXh0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfYWN0dWFsUmVhZFBpeGVsT2Zmc2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWN0dWFsUmVhZFBpeGVsT2Zmc2V0KGRvbU5vZGUsIGxpbmVOdW1iZXIsIGNvbHVtbiwgY29udGV4dCkgewogICAgICBpZiAodGhpcy5fY2hhcmFjdGVyTWFwcGluZy5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBUaGlzIGxpbmUgaGFzIG5vIGNvbnRlbnQKICAgICAgICB2YXIgX3IgPSBSYW5nZVV0aWwucmVhZEhvcml6b250YWxSYW5nZXModGhpcy5fZ2V0UmVhZGluZ1RhcmdldChkb21Ob2RlKSwgMCwgMCwgMCwgMCwgY29udGV4dC5jbGllbnRSZWN0RGVsdGFMZWZ0LCBjb250ZXh0LmNsaWVudFJlY3RTY2FsZSwgY29udGV4dC5lbmROb2RlKTsKICAgICAgICBpZiAoIV9yIHx8IF9yLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3JbMF0ubGVmdDsKICAgICAgfQogICAgICBpZiAoY29sdW1uID09PSB0aGlzLl9jaGFyYWN0ZXJNYXBwaW5nLmxlbmd0aCAmJiB0aGlzLl9pc1doaXRlc3BhY2VPbmx5ICYmIHRoaXMuX2NvbnRhaW5zRm9yZWlnbkVsZW1lbnRzID09PSAwIC8qIEZvcmVpZ25FbGVtZW50VHlwZS5Ob25lICovKSB7CiAgICAgICAgLy8gVGhpcyBicmFuY2ggaGVscHMgaW4gdGhlIGNhc2Ugb2Ygd2hpdGVzcGFjZSBvbmx5IGxpbmVzIHdoaWNoIGhhdmUgYSB3aWR0aCBzZXQKICAgICAgICByZXR1cm4gdGhpcy5nZXRXaWR0aCgpOwogICAgICB9CiAgICAgIHZhciBkb21Qb3NpdGlvbiA9IHRoaXMuX2NoYXJhY3Rlck1hcHBpbmcuZ2V0RG9tUG9zaXRpb24oY29sdW1uKTsKICAgICAgdmFyIHIgPSBSYW5nZVV0aWwucmVhZEhvcml6b250YWxSYW5nZXModGhpcy5fZ2V0UmVhZGluZ1RhcmdldChkb21Ob2RlKSwgZG9tUG9zaXRpb24ucGFydEluZGV4LCBkb21Qb3NpdGlvbi5jaGFySW5kZXgsIGRvbVBvc2l0aW9uLnBhcnRJbmRleCwgZG9tUG9zaXRpb24uY2hhckluZGV4LCBjb250ZXh0LmNsaWVudFJlY3REZWx0YUxlZnQsIGNvbnRleHQuY2xpZW50UmVjdFNjYWxlLCBjb250ZXh0LmVuZE5vZGUpOwogICAgICBpZiAoIXIgfHwgci5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgdmFyIHJlc3VsdCA9IHJbMF0ubGVmdDsKICAgICAgaWYgKHRoaXMuaW5wdXQuaXNCYXNpY0FTQ0lJKSB7CiAgICAgICAgdmFyIGhvcml6b250YWxPZmZzZXQgPSB0aGlzLl9jaGFyYWN0ZXJNYXBwaW5nLmdldEhvcml6b250YWxPZmZzZXQoY29sdW1uKTsKICAgICAgICB2YXIgZXhwZWN0ZWRSZXN1bHQgPSBNYXRoLnJvdW5kKHRoaXMuaW5wdXQuc3BhY2VXaWR0aCAqIGhvcml6b250YWxPZmZzZXQpOwogICAgICAgIGlmIChNYXRoLmFicyhleHBlY3RlZFJlc3VsdCAtIHJlc3VsdCkgPD0gMSkgewogICAgICAgICAgcmV0dXJuIGV4cGVjdGVkUmVzdWx0OwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZWFkUmF3VmlzaWJsZVJhbmdlc0ZvclJhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVhZFJhd1Zpc2libGVSYW5nZXNGb3JSYW5nZShkb21Ob2RlLCBzdGFydENvbHVtbiwgZW5kQ29sdW1uLCBjb250ZXh0KSB7CiAgICAgIGlmIChzdGFydENvbHVtbiA9PT0gMSAmJiBlbmRDb2x1bW4gPT09IHRoaXMuX2NoYXJhY3Rlck1hcHBpbmcubGVuZ3RoKSB7CiAgICAgICAgLy8gVGhpcyBicmFuY2ggaGVscHMgSUUgd2l0aCBiaWRpIHRleHQgJiBnaXZlcyBhIHBlcmZvcm1hbmNlIGJvb3N0IHRvIG90aGVyIGJyb3dzZXJzIHdoZW4gcmVhZGluZyB2aXNpYmxlIHJhbmdlcyBmb3IgYW4gZW50aXJlIGxpbmUKICAgICAgICByZXR1cm4gW25ldyBGbG9hdEhvcml6b250YWxSYW5nZSgwLCB0aGlzLmdldFdpZHRoKCkpXTsKICAgICAgfQogICAgICB2YXIgc3RhcnREb21Qb3NpdGlvbiA9IHRoaXMuX2NoYXJhY3Rlck1hcHBpbmcuZ2V0RG9tUG9zaXRpb24oc3RhcnRDb2x1bW4pOwogICAgICB2YXIgZW5kRG9tUG9zaXRpb24gPSB0aGlzLl9jaGFyYWN0ZXJNYXBwaW5nLmdldERvbVBvc2l0aW9uKGVuZENvbHVtbik7CiAgICAgIHJldHVybiBSYW5nZVV0aWwucmVhZEhvcml6b250YWxSYW5nZXModGhpcy5fZ2V0UmVhZGluZ1RhcmdldChkb21Ob2RlKSwgc3RhcnREb21Qb3NpdGlvbi5wYXJ0SW5kZXgsIHN0YXJ0RG9tUG9zaXRpb24uY2hhckluZGV4LCBlbmREb21Qb3NpdGlvbi5wYXJ0SW5kZXgsIGVuZERvbVBvc2l0aW9uLmNoYXJJbmRleCwgY29udGV4dC5jbGllbnRSZWN0RGVsdGFMZWZ0LCBjb250ZXh0LmNsaWVudFJlY3RTY2FsZSwgY29udGV4dC5lbmROb2RlKTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgY29sdW1uIGZvciB0aGUgdGV4dCBmb3VuZCBhdCBhIHNwZWNpZmljIG9mZnNldCBpbnNpZGUgYSByZW5kZXJlZCBkb20gbm9kZQogICAgICovCiAgfSwgewogICAga2V5OiAiZ2V0Q29sdW1uT2ZOb2RlT2Zmc2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb2x1bW5PZk5vZGVPZmZzZXQobGluZU51bWJlciwgc3Bhbk5vZGUsIG9mZnNldCkgewogICAgICB2YXIgc3Bhbk5vZGVUZXh0Q29udGVudExlbmd0aCA9IHNwYW5Ob2RlLnRleHRDb250ZW50Lmxlbmd0aDsKICAgICAgdmFyIHNwYW5JbmRleCA9IC0xOwogICAgICB3aGlsZSAoc3Bhbk5vZGUpIHsKICAgICAgICBzcGFuTm9kZSA9IHNwYW5Ob2RlLnByZXZpb3VzU2libGluZzsKICAgICAgICBzcGFuSW5kZXgrKzsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fY2hhcmFjdGVyTWFwcGluZy5nZXRDb2x1bW4obmV3IERvbVBvc2l0aW9uKHNwYW5JbmRleCwgb2Zmc2V0KSwgc3Bhbk5vZGVUZXh0Q29udGVudExlbmd0aCk7CiAgICB9CiAgfV0pOwogIHJldHVybiBSZW5kZXJlZFZpZXdMaW5lOwp9KCk7CnZhciBXZWJLaXRSZW5kZXJlZFZpZXdMaW5lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVuZGVyZWRWaWV3TGluZSkgewogIF9pbmhlcml0cyhXZWJLaXRSZW5kZXJlZFZpZXdMaW5lLCBfUmVuZGVyZWRWaWV3TGluZSk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihXZWJLaXRSZW5kZXJlZFZpZXdMaW5lKTsKICBmdW5jdGlvbiBXZWJLaXRSZW5kZXJlZFZpZXdMaW5lKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdlYktpdFJlbmRlcmVkVmlld0xpbmUpOwogICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBfY3JlYXRlQ2xhc3MoV2ViS2l0UmVuZGVyZWRWaWV3TGluZSwgW3sKICAgIGtleTogIl9yZWFkVmlzaWJsZVJhbmdlc0ZvclJhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVhZFZpc2libGVSYW5nZXNGb3JSYW5nZShkb21Ob2RlLCBsaW5lTnVtYmVyLCBzdGFydENvbHVtbiwgZW5kQ29sdW1uLCBjb250ZXh0KSB7CiAgICAgIHZhciBvdXRwdXQgPSBfZ2V0KF9nZXRQcm90b3R5cGVPZihXZWJLaXRSZW5kZXJlZFZpZXdMaW5lLnByb3RvdHlwZSksICJfcmVhZFZpc2libGVSYW5nZXNGb3JSYW5nZSIsIHRoaXMpLmNhbGwodGhpcywgZG9tTm9kZSwgbGluZU51bWJlciwgc3RhcnRDb2x1bW4sIGVuZENvbHVtbiwgY29udGV4dCk7CiAgICAgIGlmICghb3V0cHV0IHx8IG91dHB1dC5sZW5ndGggPT09IDAgfHwgc3RhcnRDb2x1bW4gPT09IGVuZENvbHVtbiB8fCBzdGFydENvbHVtbiA9PT0gMSAmJiBlbmRDb2x1bW4gPT09IHRoaXMuX2NoYXJhY3Rlck1hcHBpbmcubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIG91dHB1dDsKICAgICAgfQogICAgICAvLyBXZWJLaXQgaXMgYnVnZ3kgYW5kIHJldHVybnMgYW4gZXhwYW5kZWQgcmFuZ2UgKHRvIGNvbnRhaW4gd29yZHMgaW4gc29tZSBjYXNlcykKICAgICAgLy8gVGhlIGxhc3QgY2xpZW50IHJlY3QgaXMgZW5sYXJnZWQgKEkgdGhpbmspCiAgICAgIGlmICghdGhpcy5pbnB1dC5jb250YWluc1JUTCkgewogICAgICAgIC8vIFRoaXMgaXMgYW4gYXR0ZW1wdCB0byBwYXRjaCB0aGluZ3MgdXAKICAgICAgICAvLyBGaW5kIHBvc2l0aW9uIG9mIGxhc3QgY29sdW1uCiAgICAgICAgdmFyIGVuZFBpeGVsT2Zmc2V0ID0gdGhpcy5fcmVhZFBpeGVsT2Zmc2V0KGRvbU5vZGUsIGxpbmVOdW1iZXIsIGVuZENvbHVtbiwgY29udGV4dCk7CiAgICAgICAgaWYgKGVuZFBpeGVsT2Zmc2V0ICE9PSAtMSkgewogICAgICAgICAgdmFyIGxhc3RSYW5nZSA9IG91dHB1dFtvdXRwdXQubGVuZ3RoIC0gMV07CiAgICAgICAgICBpZiAobGFzdFJhbmdlLmxlZnQgPCBlbmRQaXhlbE9mZnNldCkgewogICAgICAgICAgICAvLyBUcmltIGRvd24gdGhlIHdpZHRoIG9mIHRoZSBsYXN0IHZpc2libGUgcmFuZ2UgdG8gbm90IGdvIGFmdGVyIHRoZSBsYXN0IGNvbHVtbidzIHBvc2l0aW9uCiAgICAgICAgICAgIGxhc3RSYW5nZS53aWR0aCA9IGVuZFBpeGVsT2Zmc2V0IC0gbGFzdFJhbmdlLmxlZnQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBvdXRwdXQ7CiAgICB9CiAgfV0pOwogIHJldHVybiBXZWJLaXRSZW5kZXJlZFZpZXdMaW5lOwp9KFJlbmRlcmVkVmlld0xpbmUpOwp2YXIgY3JlYXRlUmVuZGVyZWRMaW5lID0gZnVuY3Rpb24gKCkgewogIGlmIChicm93c2VyLmlzV2ViS2l0KSB7CiAgICByZXR1cm4gY3JlYXRlV2ViS2l0UmVuZGVyZWRMaW5lOwogIH0KICByZXR1cm4gY3JlYXRlTm9ybWFsUmVuZGVyZWRMaW5lOwp9KCk7CmZ1bmN0aW9uIGNyZWF0ZVdlYktpdFJlbmRlcmVkTGluZShkb21Ob2RlLCByZW5kZXJMaW5lSW5wdXQsIGNoYXJhY3Rlck1hcHBpbmcsIGNvbnRhaW5zUlRMLCBjb250YWluc0ZvcmVpZ25FbGVtZW50cykgewogIHJldHVybiBuZXcgV2ViS2l0UmVuZGVyZWRWaWV3TGluZShkb21Ob2RlLCByZW5kZXJMaW5lSW5wdXQsIGNoYXJhY3Rlck1hcHBpbmcsIGNvbnRhaW5zUlRMLCBjb250YWluc0ZvcmVpZ25FbGVtZW50cyk7Cn0KZnVuY3Rpb24gY3JlYXRlTm9ybWFsUmVuZGVyZWRMaW5lKGRvbU5vZGUsIHJlbmRlckxpbmVJbnB1dCwgY2hhcmFjdGVyTWFwcGluZywgY29udGFpbnNSVEwsIGNvbnRhaW5zRm9yZWlnbkVsZW1lbnRzKSB7CiAgcmV0dXJuIG5ldyBSZW5kZXJlZFZpZXdMaW5lKGRvbU5vZGUsIHJlbmRlckxpbmVJbnB1dCwgY2hhcmFjdGVyTWFwcGluZywgY29udGFpbnNSVEwsIGNvbnRhaW5zRm9yZWlnbkVsZW1lbnRzKTsKfQ=="},{"version":3,"names":["browser","createFastDomNode","platform","RangeUtil","FloatHorizontalRange","VisibleRanges","LineDecoration","RenderLineInput","renderViewLine","LineRange","DomPosition","isHighContrast","EditorFontLigatures","canUseFastRenderedViewLine","isNative","isLinux","isFirefox","isSafari","monospaceAssumptionsAreValid","DomReadingContext","domNode","endNode","_domNode","_clientRectDeltaLeft","_clientRectScale","_clientRectRead","rect","getBoundingClientRect","left","width","offsetWidth","readClientRect","ViewLineOptions","config","themeType","options","fontInfo","get","renderWhitespace","renderControlCharacters","spaceWidth","middotWidth","wsmiddotWidth","useMonospaceOptimizations","isMonospace","canUseHalfwidthRightwardsArrow","lineHeight","stopRenderingLineAfter","fontLigatures","other","ViewLine","_options","_isMaybeInvalid","_renderedViewLine","Error","newOptions","lineNumber","deltaTop","viewportData","sb","lineData","getViewLineRenderingData","actualInlineDecorations","filter","inlineDecorations","minColumn","maxColumn","selectionsOnLine","selections","selection","endLineNumber","startLineNumber","startColumn","endColumn","push","renderLineInput","content","continuesWithWrappedLine","isBasicASCII","containsRTL","tokens","tabSize","startVisibleColumn","OFF","input","equals","appendASCIIString","String","CLASS_NAME","output","renderedViewLine","containsForeignElements","length","lineTokens","getCount","FastRenderedViewLine","characterMapping","createRenderedLine","setTop","setHeight","getWidth","getWidthIsFast","toSlowRenderedLine","context","Math","min","lineContent","max","outsideRenderedLine","horizontalRanges","getVisibleRangesForRange","spanNode","offset","getColumnOfNodeOffset","_characterMapping","_charWidth","round","_getCharPosition","expectedWidth","actualWidth","firstChild","abs","console","warn","startPosition","endPosition","column","horizontalOffset","getHorizontalOffset","spanNodeTextContentLength","textContent","spanIndex","previousSibling","getColumn","RenderedViewLine","_isWhitespaceOnly","test","_containsForeignElements","_cachedWidth","_pixelOffsetCache","Float32Array","len","myDomNode","_getReadingTarget","startOffset","_readPixelOffset","endOffset","_readVisibleRangesForRange","pixelOffset","_readRawVisibleRangesForRange","readingTarget","cachedPixelOffset","result","_actualReadPixelOffset","r","readHorizontalRanges","clientRectDeltaLeft","clientRectScale","domPosition","getDomPosition","partIndex","charIndex","expectedResult","startDomPosition","endDomPosition","WebKitRenderedViewLine","endPixelOffset","lastRange","isWebKit","createWebKitRenderedLine","createNormalRenderedLine"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLine.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from '../../../../base/browser/browser.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { RangeUtil } from './rangeUtil.js';\nimport { FloatHorizontalRange, VisibleRanges } from '../../view/renderingContext.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine, LineRange, DomPosition } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nconst canUseFastRenderedViewLine = (function () {\n    if (platform.isNative) {\n        // In VSCode we know very well when the zoom level changes\n        return true;\n    }\n    if (platform.isLinux || browser.isFirefox || browser.isSafari) {\n        // On Linux, it appears that zooming affects char widths (in pixels), which is unexpected.\n        // --\n        // Even though we read character widths correctly, having read them at a specific zoom level\n        // does not mean they are the same at the current zoom level.\n        // --\n        // This could be improved if we ever figure out how to get an event when browsers zoom,\n        // but until then we have to stick with reading client rects.\n        // --\n        // The same has been observed with Firefox on Windows7\n        // --\n        // The same has been oversved with Safari\n        return false;\n    }\n    return true;\n})();\nlet monospaceAssumptionsAreValid = true;\nexport class DomReadingContext {\n    constructor(domNode, endNode) {\n        this._domNode = domNode;\n        this._clientRectDeltaLeft = 0;\n        this._clientRectScale = 1;\n        this._clientRectRead = false;\n        this.endNode = endNode;\n    }\n    readClientRect() {\n        if (!this._clientRectRead) {\n            this._clientRectRead = true;\n            const rect = this._domNode.getBoundingClientRect();\n            this._clientRectDeltaLeft = rect.left;\n            this._clientRectScale = rect.width / this._domNode.offsetWidth;\n        }\n    }\n    get clientRectDeltaLeft() {\n        if (!this._clientRectRead) {\n            this.readClientRect();\n        }\n        return this._clientRectDeltaLeft;\n    }\n    get clientRectScale() {\n        if (!this._clientRectRead) {\n            this.readClientRect();\n        }\n        return this._clientRectScale;\n    }\n}\nexport class ViewLineOptions {\n    constructor(config, themeType) {\n        this.themeType = themeType;\n        const options = config.options;\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        this.renderWhitespace = options.get(90 /* EditorOption.renderWhitespace */);\n        this.renderControlCharacters = options.get(85 /* EditorOption.renderControlCharacters */);\n        this.spaceWidth = fontInfo.spaceWidth;\n        this.middotWidth = fontInfo.middotWidth;\n        this.wsmiddotWidth = fontInfo.wsmiddotWidth;\n        this.useMonospaceOptimizations = (fontInfo.isMonospace\n            && !options.get(29 /* EditorOption.disableMonospaceOptimizations */));\n        this.canUseHalfwidthRightwardsArrow = fontInfo.canUseHalfwidthRightwardsArrow;\n        this.lineHeight = options.get(61 /* EditorOption.lineHeight */);\n        this.stopRenderingLineAfter = options.get(107 /* EditorOption.stopRenderingLineAfter */);\n        this.fontLigatures = options.get(47 /* EditorOption.fontLigatures */);\n    }\n    equals(other) {\n        return (this.themeType === other.themeType\n            && this.renderWhitespace === other.renderWhitespace\n            && this.renderControlCharacters === other.renderControlCharacters\n            && this.spaceWidth === other.spaceWidth\n            && this.middotWidth === other.middotWidth\n            && this.wsmiddotWidth === other.wsmiddotWidth\n            && this.useMonospaceOptimizations === other.useMonospaceOptimizations\n            && this.canUseHalfwidthRightwardsArrow === other.canUseHalfwidthRightwardsArrow\n            && this.lineHeight === other.lineHeight\n            && this.stopRenderingLineAfter === other.stopRenderingLineAfter\n            && this.fontLigatures === other.fontLigatures);\n    }\n}\nexport class ViewLine {\n    constructor(options) {\n        this._options = options;\n        this._isMaybeInvalid = true;\n        this._renderedViewLine = null;\n    }\n    // --- begin IVisibleLineData\n    getDomNode() {\n        if (this._renderedViewLine && this._renderedViewLine.domNode) {\n            return this._renderedViewLine.domNode.domNode;\n        }\n        return null;\n    }\n    setDomNode(domNode) {\n        if (this._renderedViewLine) {\n            this._renderedViewLine.domNode = createFastDomNode(domNode);\n        }\n        else {\n            throw new Error('I have no rendered view line to set the dom node to...');\n        }\n    }\n    onContentChanged() {\n        this._isMaybeInvalid = true;\n    }\n    onTokensChanged() {\n        this._isMaybeInvalid = true;\n    }\n    onDecorationsChanged() {\n        this._isMaybeInvalid = true;\n    }\n    onOptionsChanged(newOptions) {\n        this._isMaybeInvalid = true;\n        this._options = newOptions;\n    }\n    onSelectionChanged() {\n        if (isHighContrast(this._options.themeType) || this._options.renderWhitespace === 'selection') {\n            this._isMaybeInvalid = true;\n            return true;\n        }\n        return false;\n    }\n    renderLine(lineNumber, deltaTop, viewportData, sb) {\n        if (this._isMaybeInvalid === false) {\n            // it appears that nothing relevant has changed\n            return false;\n        }\n        this._isMaybeInvalid = false;\n        const lineData = viewportData.getViewLineRenderingData(lineNumber);\n        const options = this._options;\n        const actualInlineDecorations = LineDecoration.filter(lineData.inlineDecorations, lineNumber, lineData.minColumn, lineData.maxColumn);\n        // Only send selection information when needed for rendering whitespace\n        let selectionsOnLine = null;\n        if (isHighContrast(options.themeType) || this._options.renderWhitespace === 'selection') {\n            const selections = viewportData.selections;\n            for (const selection of selections) {\n                if (selection.endLineNumber < lineNumber || selection.startLineNumber > lineNumber) {\n                    // Selection does not intersect line\n                    continue;\n                }\n                const startColumn = (selection.startLineNumber === lineNumber ? selection.startColumn : lineData.minColumn);\n                const endColumn = (selection.endLineNumber === lineNumber ? selection.endColumn : lineData.maxColumn);\n                if (startColumn < endColumn) {\n                    if (isHighContrast(options.themeType) || this._options.renderWhitespace !== 'selection') {\n                        actualInlineDecorations.push(new LineDecoration(startColumn, endColumn, 'inline-selected-text', 0 /* InlineDecorationType.Regular */));\n                    }\n                    else {\n                        if (!selectionsOnLine) {\n                            selectionsOnLine = [];\n                        }\n                        selectionsOnLine.push(new LineRange(startColumn - 1, endColumn - 1));\n                    }\n                }\n            }\n        }\n        const renderLineInput = new RenderLineInput(options.useMonospaceOptimizations, options.canUseHalfwidthRightwardsArrow, lineData.content, lineData.continuesWithWrappedLine, lineData.isBasicASCII, lineData.containsRTL, lineData.minColumn - 1, lineData.tokens, actualInlineDecorations, lineData.tabSize, lineData.startVisibleColumn, options.spaceWidth, options.middotWidth, options.wsmiddotWidth, options.stopRenderingLineAfter, options.renderWhitespace, options.renderControlCharacters, options.fontLigatures !== EditorFontLigatures.OFF, selectionsOnLine);\n        if (this._renderedViewLine && this._renderedViewLine.input.equals(renderLineInput)) {\n            // no need to do anything, we have the same render input\n            return false;\n        }\n        sb.appendASCIIString('<div style=\"top:');\n        sb.appendASCIIString(String(deltaTop));\n        sb.appendASCIIString('px;height:');\n        sb.appendASCIIString(String(this._options.lineHeight));\n        sb.appendASCIIString('px;\" class=\"');\n        sb.appendASCIIString(ViewLine.CLASS_NAME);\n        sb.appendASCIIString('\">');\n        const output = renderViewLine(renderLineInput, sb);\n        sb.appendASCIIString('</div>');\n        let renderedViewLine = null;\n        if (monospaceAssumptionsAreValid && canUseFastRenderedViewLine && lineData.isBasicASCII && options.useMonospaceOptimizations && output.containsForeignElements === 0 /* ForeignElementType.None */) {\n            if (lineData.content.length < 300 && renderLineInput.lineTokens.getCount() < 100) {\n                // Browser rounding errors have been observed in Chrome and IE, so using the fast\n                // view line only for short lines. Please test before removing the length check...\n                // ---\n                // Another rounding error has been observed on Linux in VSCode, where <span> width\n                // rounding errors add up to an observable large number...\n                // ---\n                // Also see another example of rounding errors on Windows in\n                // https://github.com/microsoft/vscode/issues/33178\n                renderedViewLine = new FastRenderedViewLine(this._renderedViewLine ? this._renderedViewLine.domNode : null, renderLineInput, output.characterMapping);\n            }\n        }\n        if (!renderedViewLine) {\n            renderedViewLine = createRenderedLine(this._renderedViewLine ? this._renderedViewLine.domNode : null, renderLineInput, output.characterMapping, output.containsRTL, output.containsForeignElements);\n        }\n        this._renderedViewLine = renderedViewLine;\n        return true;\n    }\n    layoutLine(lineNumber, deltaTop) {\n        if (this._renderedViewLine && this._renderedViewLine.domNode) {\n            this._renderedViewLine.domNode.setTop(deltaTop);\n            this._renderedViewLine.domNode.setHeight(this._options.lineHeight);\n        }\n    }\n    // --- end IVisibleLineData\n    getWidth() {\n        if (!this._renderedViewLine) {\n            return 0;\n        }\n        return this._renderedViewLine.getWidth();\n    }\n    getWidthIsFast() {\n        if (!this._renderedViewLine) {\n            return true;\n        }\n        return this._renderedViewLine.getWidthIsFast();\n    }\n    needsMonospaceFontCheck() {\n        if (!this._renderedViewLine) {\n            return false;\n        }\n        return (this._renderedViewLine instanceof FastRenderedViewLine);\n    }\n    monospaceAssumptionsAreValid() {\n        if (!this._renderedViewLine) {\n            return monospaceAssumptionsAreValid;\n        }\n        if (this._renderedViewLine instanceof FastRenderedViewLine) {\n            return this._renderedViewLine.monospaceAssumptionsAreValid();\n        }\n        return monospaceAssumptionsAreValid;\n    }\n    onMonospaceAssumptionsInvalidated() {\n        if (this._renderedViewLine && this._renderedViewLine instanceof FastRenderedViewLine) {\n            this._renderedViewLine = this._renderedViewLine.toSlowRenderedLine();\n        }\n    }\n    getVisibleRangesForRange(lineNumber, startColumn, endColumn, context) {\n        if (!this._renderedViewLine) {\n            return null;\n        }\n        startColumn = Math.min(this._renderedViewLine.input.lineContent.length + 1, Math.max(1, startColumn));\n        endColumn = Math.min(this._renderedViewLine.input.lineContent.length + 1, Math.max(1, endColumn));\n        const stopRenderingLineAfter = this._renderedViewLine.input.stopRenderingLineAfter;\n        let outsideRenderedLine = false;\n        if (stopRenderingLineAfter !== -1 && startColumn > stopRenderingLineAfter + 1 && endColumn > stopRenderingLineAfter + 1) {\n            // This range is obviously not visible\n            outsideRenderedLine = true;\n        }\n        if (stopRenderingLineAfter !== -1 && startColumn > stopRenderingLineAfter + 1) {\n            startColumn = stopRenderingLineAfter + 1;\n        }\n        if (stopRenderingLineAfter !== -1 && endColumn > stopRenderingLineAfter + 1) {\n            endColumn = stopRenderingLineAfter + 1;\n        }\n        const horizontalRanges = this._renderedViewLine.getVisibleRangesForRange(lineNumber, startColumn, endColumn, context);\n        if (horizontalRanges && horizontalRanges.length > 0) {\n            return new VisibleRanges(outsideRenderedLine, horizontalRanges);\n        }\n        return null;\n    }\n    getColumnOfNodeOffset(lineNumber, spanNode, offset) {\n        if (!this._renderedViewLine) {\n            return 1;\n        }\n        return this._renderedViewLine.getColumnOfNodeOffset(lineNumber, spanNode, offset);\n    }\n}\nViewLine.CLASS_NAME = 'view-line';\n/**\n * A rendered line which is guaranteed to contain only regular ASCII and is rendered with a monospace font.\n */\nclass FastRenderedViewLine {\n    constructor(domNode, renderLineInput, characterMapping) {\n        this.domNode = domNode;\n        this.input = renderLineInput;\n        this._characterMapping = characterMapping;\n        this._charWidth = renderLineInput.spaceWidth;\n    }\n    getWidth() {\n        return Math.round(this._getCharPosition(this._characterMapping.length));\n    }\n    getWidthIsFast() {\n        return true;\n    }\n    monospaceAssumptionsAreValid() {\n        if (!this.domNode) {\n            return monospaceAssumptionsAreValid;\n        }\n        const expectedWidth = this.getWidth();\n        const actualWidth = this.domNode.domNode.firstChild.offsetWidth;\n        if (Math.abs(expectedWidth - actualWidth) >= 2) {\n            // more than 2px off\n            console.warn(`monospace assumptions have been violated, therefore disabling monospace optimizations!`);\n            monospaceAssumptionsAreValid = false;\n        }\n        return monospaceAssumptionsAreValid;\n    }\n    toSlowRenderedLine() {\n        return createRenderedLine(this.domNode, this.input, this._characterMapping, false, 0 /* ForeignElementType.None */);\n    }\n    getVisibleRangesForRange(lineNumber, startColumn, endColumn, context) {\n        const startPosition = this._getCharPosition(startColumn);\n        const endPosition = this._getCharPosition(endColumn);\n        return [new FloatHorizontalRange(startPosition, endPosition - startPosition)];\n    }\n    _getCharPosition(column) {\n        const horizontalOffset = this._characterMapping.getHorizontalOffset(column);\n        return this._charWidth * horizontalOffset;\n    }\n    getColumnOfNodeOffset(lineNumber, spanNode, offset) {\n        const spanNodeTextContentLength = spanNode.textContent.length;\n        let spanIndex = -1;\n        while (spanNode) {\n            spanNode = spanNode.previousSibling;\n            spanIndex++;\n        }\n        return this._characterMapping.getColumn(new DomPosition(spanIndex, offset), spanNodeTextContentLength);\n    }\n}\n/**\n * Every time we render a line, we save what we have rendered in an instance of this class.\n */\nclass RenderedViewLine {\n    constructor(domNode, renderLineInput, characterMapping, containsRTL, containsForeignElements) {\n        this.domNode = domNode;\n        this.input = renderLineInput;\n        this._characterMapping = characterMapping;\n        this._isWhitespaceOnly = /^\\s*$/.test(renderLineInput.lineContent);\n        this._containsForeignElements = containsForeignElements;\n        this._cachedWidth = -1;\n        this._pixelOffsetCache = null;\n        if (!containsRTL || this._characterMapping.length === 0 /* the line is empty */) {\n            this._pixelOffsetCache = new Float32Array(Math.max(2, this._characterMapping.length + 1));\n            for (let column = 0, len = this._characterMapping.length; column <= len; column++) {\n                this._pixelOffsetCache[column] = -1;\n            }\n        }\n    }\n    // --- Reading from the DOM methods\n    _getReadingTarget(myDomNode) {\n        return myDomNode.domNode.firstChild;\n    }\n    /**\n     * Width of the line in pixels\n     */\n    getWidth() {\n        if (!this.domNode) {\n            return 0;\n        }\n        if (this._cachedWidth === -1) {\n            this._cachedWidth = this._getReadingTarget(this.domNode).offsetWidth;\n        }\n        return this._cachedWidth;\n    }\n    getWidthIsFast() {\n        if (this._cachedWidth === -1) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Visible ranges for a model range\n     */\n    getVisibleRangesForRange(lineNumber, startColumn, endColumn, context) {\n        if (!this.domNode) {\n            return null;\n        }\n        if (this._pixelOffsetCache !== null) {\n            // the text is LTR\n            const startOffset = this._readPixelOffset(this.domNode, lineNumber, startColumn, context);\n            if (startOffset === -1) {\n                return null;\n            }\n            const endOffset = this._readPixelOffset(this.domNode, lineNumber, endColumn, context);\n            if (endOffset === -1) {\n                return null;\n            }\n            return [new FloatHorizontalRange(startOffset, endOffset - startOffset)];\n        }\n        return this._readVisibleRangesForRange(this.domNode, lineNumber, startColumn, endColumn, context);\n    }\n    _readVisibleRangesForRange(domNode, lineNumber, startColumn, endColumn, context) {\n        if (startColumn === endColumn) {\n            const pixelOffset = this._readPixelOffset(domNode, lineNumber, startColumn, context);\n            if (pixelOffset === -1) {\n                return null;\n            }\n            else {\n                return [new FloatHorizontalRange(pixelOffset, 0)];\n            }\n        }\n        else {\n            return this._readRawVisibleRangesForRange(domNode, startColumn, endColumn, context);\n        }\n    }\n    _readPixelOffset(domNode, lineNumber, column, context) {\n        if (this._characterMapping.length === 0) {\n            // This line has no content\n            if (this._containsForeignElements === 0 /* ForeignElementType.None */) {\n                // We can assume the line is really empty\n                return 0;\n            }\n            if (this._containsForeignElements === 2 /* ForeignElementType.After */) {\n                // We have foreign elements after the (empty) line\n                return 0;\n            }\n            if (this._containsForeignElements === 1 /* ForeignElementType.Before */) {\n                // We have foreign elements before the (empty) line\n                return this.getWidth();\n            }\n            // We have foreign elements before & after the (empty) line\n            const readingTarget = this._getReadingTarget(domNode);\n            if (readingTarget.firstChild) {\n                return readingTarget.firstChild.offsetWidth;\n            }\n            else {\n                return 0;\n            }\n        }\n        if (this._pixelOffsetCache !== null) {\n            // the text is LTR\n            const cachedPixelOffset = this._pixelOffsetCache[column];\n            if (cachedPixelOffset !== -1) {\n                return cachedPixelOffset;\n            }\n            const result = this._actualReadPixelOffset(domNode, lineNumber, column, context);\n            this._pixelOffsetCache[column] = result;\n            return result;\n        }\n        return this._actualReadPixelOffset(domNode, lineNumber, column, context);\n    }\n    _actualReadPixelOffset(domNode, lineNumber, column, context) {\n        if (this._characterMapping.length === 0) {\n            // This line has no content\n            const r = RangeUtil.readHorizontalRanges(this._getReadingTarget(domNode), 0, 0, 0, 0, context.clientRectDeltaLeft, context.clientRectScale, context.endNode);\n            if (!r || r.length === 0) {\n                return -1;\n            }\n            return r[0].left;\n        }\n        if (column === this._characterMapping.length && this._isWhitespaceOnly && this._containsForeignElements === 0 /* ForeignElementType.None */) {\n            // This branch helps in the case of whitespace only lines which have a width set\n            return this.getWidth();\n        }\n        const domPosition = this._characterMapping.getDomPosition(column);\n        const r = RangeUtil.readHorizontalRanges(this._getReadingTarget(domNode), domPosition.partIndex, domPosition.charIndex, domPosition.partIndex, domPosition.charIndex, context.clientRectDeltaLeft, context.clientRectScale, context.endNode);\n        if (!r || r.length === 0) {\n            return -1;\n        }\n        const result = r[0].left;\n        if (this.input.isBasicASCII) {\n            const horizontalOffset = this._characterMapping.getHorizontalOffset(column);\n            const expectedResult = Math.round(this.input.spaceWidth * horizontalOffset);\n            if (Math.abs(expectedResult - result) <= 1) {\n                return expectedResult;\n            }\n        }\n        return result;\n    }\n    _readRawVisibleRangesForRange(domNode, startColumn, endColumn, context) {\n        if (startColumn === 1 && endColumn === this._characterMapping.length) {\n            // This branch helps IE with bidi text & gives a performance boost to other browsers when reading visible ranges for an entire line\n            return [new FloatHorizontalRange(0, this.getWidth())];\n        }\n        const startDomPosition = this._characterMapping.getDomPosition(startColumn);\n        const endDomPosition = this._characterMapping.getDomPosition(endColumn);\n        return RangeUtil.readHorizontalRanges(this._getReadingTarget(domNode), startDomPosition.partIndex, startDomPosition.charIndex, endDomPosition.partIndex, endDomPosition.charIndex, context.clientRectDeltaLeft, context.clientRectScale, context.endNode);\n    }\n    /**\n     * Returns the column for the text found at a specific offset inside a rendered dom node\n     */\n    getColumnOfNodeOffset(lineNumber, spanNode, offset) {\n        const spanNodeTextContentLength = spanNode.textContent.length;\n        let spanIndex = -1;\n        while (spanNode) {\n            spanNode = spanNode.previousSibling;\n            spanIndex++;\n        }\n        return this._characterMapping.getColumn(new DomPosition(spanIndex, offset), spanNodeTextContentLength);\n    }\n}\nclass WebKitRenderedViewLine extends RenderedViewLine {\n    _readVisibleRangesForRange(domNode, lineNumber, startColumn, endColumn, context) {\n        const output = super._readVisibleRangesForRange(domNode, lineNumber, startColumn, endColumn, context);\n        if (!output || output.length === 0 || startColumn === endColumn || (startColumn === 1 && endColumn === this._characterMapping.length)) {\n            return output;\n        }\n        // WebKit is buggy and returns an expanded range (to contain words in some cases)\n        // The last client rect is enlarged (I think)\n        if (!this.input.containsRTL) {\n            // This is an attempt to patch things up\n            // Find position of last column\n            const endPixelOffset = this._readPixelOffset(domNode, lineNumber, endColumn, context);\n            if (endPixelOffset !== -1) {\n                const lastRange = output[output.length - 1];\n                if (lastRange.left < endPixelOffset) {\n                    // Trim down the width of the last visible range to not go after the last column's position\n                    lastRange.width = endPixelOffset - lastRange.left;\n                }\n            }\n        }\n        return output;\n    }\n}\nconst createRenderedLine = (function () {\n    if (browser.isWebKit) {\n        return createWebKitRenderedLine;\n    }\n    return createNormalRenderedLine;\n})();\nfunction createWebKitRenderedLine(domNode, renderLineInput, characterMapping, containsRTL, containsForeignElements) {\n    return new WebKitRenderedViewLine(domNode, renderLineInput, characterMapping, containsRTL, containsForeignElements);\n}\nfunction createNormalRenderedLine(domNode, renderLineInput, characterMapping, containsRTL, containsForeignElements) {\n    return new RenderedViewLine(domNode, renderLineInput, characterMapping, containsRTL, containsForeignElements);\n}\n"],"mappings":"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"}]}