{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/create.vue","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zaGlmdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgeyBnZXRMaXN0IGFzIF9nZXRMaXN0IH0gZnJvbSAnQC9hcGkvdmlzdWFsJzsKaW1wb3J0IHsgdXJsIH0gZnJvbSAnQC9jb25maWcnOwppbXBvcnQgeyBhZGRPYmosIGNvcHlPYmosIHVwZGF0ZU9iaiB9IGZyb20gJ0AvYXBpL3Zpc3VhbCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ3JlYXRlU2NyZWVuIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIGNvdW50OiAwLAogICAgICBmb3JtOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICBjYXRlZ29yeTogJycsCiAgICAgICAgd2lkdGg6ICcxOTIwJywKICAgICAgICBoZWlnaHQ6ICcxMDgwJwogICAgICB9LAogICAgICBvcHRpb246IHsKICAgICAgICBzdWJtaXRUZXh0OiAn5Yib5bu65aSn5bGPJywKICAgICAgICBzaXplOiAnbWVkaXVtJywKICAgICAgICBjb2x1bW46IFt7CiAgICAgICAgICBsYWJlbDogJ+WIhue7hCcsCiAgICAgICAgICBwcm9wOiAnY2F0ZWdvcnknLAogICAgICAgICAgc3BhbjogMjQsCiAgICAgICAgICBsYWJlbFdpZHRoOiAxMDAsCiAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgIGRpY1VybDogdXJsICsgJy9jYXRlZ29yeS9saXN0JywKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIGxhYmVsOiAnY2F0ZWdvcnlLZXknLAogICAgICAgICAgICB2YWx1ZTogJ2NhdGVnb3J5VmFsdWUnCiAgICAgICAgICB9LAogICAgICAgICAgcnVsZXM6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oup5YiG57uEIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICB9XQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5aSn5bGP5ZCN56ewJywKICAgICAgICAgIHNwYW46IDI0LAogICAgICAgICAgbGFiZWxXaWR0aDogMTAwLAogICAgICAgICAgcHJvcDogJ3RpdGxlJywKICAgICAgICAgIHJ1bGVzOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWkp+Wxj+WQjeensCIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfV0KICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+Wkp+Wxj+WwuuWvuCcsCiAgICAgICAgICBzcGFuOiAxNCwKICAgICAgICAgIGxhYmVsV2lkdGg6IDEwMCwKICAgICAgICAgIHByb3A6ICd3aWR0aCcsCiAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpeWuveW6picsCiAgICAgICAgICBydWxlczogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXlpKflsY/lsLrlr7giLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH1dCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICcnLAogICAgICAgICAgc3BhbjogMTAsCiAgICAgICAgICBsYWJlbFdpZHRoOiAxLAogICAgICAgICAgcHJvcDogJ2hlaWdodCcsCiAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpemrmOW6picsCiAgICAgICAgICBydWxlczogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXlpKflsY/lsLrlr7giLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH1dCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICflr4bnoIEnLAogICAgICAgICAgc3BhbjogMjQsCiAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnLAogICAgICAgICAgbGFiZWxXaWR0aDogMTAwLAogICAgICAgICAgcHJvcDogJ3Bhc3N3b3JkJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgYWN0aXZlOiBmdW5jdGlvbiBhY3RpdmUoKSB7CiAgICAgIHJldHVybiB0aGlzLmxpc3RbdGhpcy5jb3VudF0gfHwge307CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mb3JtLmNhdGVnb3J5ID0gdGhpcy4kcm91dGUucXVlcnkuY2F0ZWdvcnk7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF9nZXRMaXN0KHsKICAgICAgICBjYXRlZ29yeTogMSwKICAgICAgICBjdXJyZW50OiAxLAogICAgICAgIHNpemU6IDY3CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxpc3QgPSByZXMuZGF0YS5kYXRhLnJlY29yZHM7CiAgICAgICAgX3RoaXMubGlzdC51bnNoaWZ0KHsKICAgICAgICAgIGlkOiAwLAogICAgICAgICAgdGl0bGU6ICfnqbrnmb3mqKHmnb8nLAogICAgICAgICAgYmFja2dyb3VuZFVybDogJy9pbWcvYmcuanBnJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTYXZlOiBmdW5jdGlvbiBoYW5kbGVTYXZlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKHRoaXMuY291bnQgPT0gMCkgewogICAgICAgIGFkZE9iaih0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIGlkID0gcmVzLmRhdGEuZGF0YS5pZDsKICAgICAgICAgIF90aGlzMi5oYW5kbGVFZGl0KHsKICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgaWQ7CiAgICAgICAgY29weU9iaih0aGlzLmFjdGl2ZS5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICByZXR1cm4gdXBkYXRlT2JqKHsKICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICBjYXRlZ29yeTogX3RoaXMyLmZvcm0uY2F0ZWdvcnksCiAgICAgICAgICAgIHBhc3N3b3JkOiBfdGhpczIuZm9ybS5wYXNzd29yZCwKICAgICAgICAgICAgc3RhdHVzOiBfdGhpczIuZm9ybS5zdGF0dXMsCiAgICAgICAgICAgIHRpdGxlOiBfdGhpczIuZm9ybS50aXRsZQogICAgICAgICAgfSk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuaGFuZGxlRWRpdCh7CiAgICAgICAgICAgIGlkOiBpZAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVFZGl0OiBmdW5jdGlvbiBoYW5kbGVFZGl0KGl0ZW0pIHsKICAgICAgdmFyIHJvdXRlVXJsID0gdGhpcy4kcm91dGVyLnJlc29sdmUoewogICAgICAgIHBhdGg6ICcvYnVpbGQvJyArIGl0ZW0uaWQKICAgICAgfSk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHJvdXRlVXJsLmhyZWYpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;AA8CA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;YACAN;YACAO;UACA;UACAC;YACAC;YACAC;YACAC;UACA;QACA;UACAX;UACAE;UACAC;UACAF;UACAO;YACAC;YACAC;YACAC;UACA;QACA;UACAX;UACAE;UACAC;UACAF;UACAW;UACAJ;YACAC;YACAC;YACAC;UACA;QACA;UACAX;UACAE;UACAC;UACAF;UACAW;UACAJ;YACAC;YACAC;YACAC;UACA;QACA;UACAX;UACAE;UACAE;UACAD;UACAF;QACA;MACA;IACA;EACA;EACAY;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MAAA;MACAA;QACAxB;QACAyB;QACApB;MACA;QACA;QACA;UACAqB;UACA5B;UACA6B;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;UACA;UACA;YAAAH;UAAA;QACA;MACA;QACA;QACAI;UACAJ;UACA;YACAA;YACA1B;YACAD;YACAgC;YACAjC;UACA;QACA;UACA;YAAA4B;UAAA;QACA;MACA;IACA;IACAM;MACA;QACAC;MACA;MACAC;IACA;EACA;AACA","names":["name","data","list","count","form","title","password","category","width","height","option","submitText","size","column","label","prop","span","labelWidth","type","dicUrl","props","value","rules","required","message","trigger","placeholder","computed","active","created","methods","getList","current","id","backgroundUrl","handleSave","addObj","copyObj","status","handleEdit","path","window"],"sourceRoot":"src/page","sources":["create.vue"],"sourcesContent":["<template>\n  <div class=\"list create-screen\">\n    <div class=\"top-bar\">\n      <div class=\"right-bar\"></div>\n      <div class=\"left-bar\"></div>\n      <router-link to=\"/\"\n                   class=\"return-btn\">\n        <span class=\"return-text\">\n          取消创建\n        </span>\n      </router-link>\n    </div>\n    <div class=\"create-box\">\n      <p class=\"avue-tip-title\">选择下面的模版进行创建</p>\n      <div class=\"create-scroll\">\n        <div class=\"content__box\">\n          <div class=\"content__item\"\n               :class=\"{'content--active':count==index}\"\n               v-for=\"(item,index) in list\"\n               @click=\"count=index\"\n               :key=\"index\">\n            <div class=\"content__info\">\n              <img v-if=\"item.backgroundUrl\"\n                   :src=\"item.backgroundUrl\"\n                   alt=\"\" />\n            </div>\n            <div class=\"content__main\">\n              <span class=\"content__name\">{{item.title}}</span>\n              <div class=\"content__menulist\"> </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"create-content\">\n      <img :src=\"active.backgroundUrl\"\n           alt=\"\">\n      <avue-form :option=\"option\"\n                 v-model=\"form\"\n                 @submit=\"handleSave\"></avue-form>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport { getList } from '@/api/visual'\nimport { url } from '@/config';\nimport { addObj, copyObj, updateObj } from '@/api/visual';\nexport default {\n  name: \"CreateScreen\",\n  data () {\n    return {\n      list: [],\n      count: 0,\n      form: {\n        title: '',\n        password: '',\n        category: '',\n        width: '1920',\n        height: '1080'\n      },\n      option: {\n        submitText: '创建大屏',\n        size: 'medium',\n        column: [{\n          label: '分组',\n          prop: 'category',\n          span: 24,\n          labelWidth: 100,\n          type: 'select',\n          dicUrl: url + '/category/list',\n          props: {\n            label: 'categoryKey',\n            value: 'categoryValue',\n          },\n          rules: [{\n            required: true,\n            message: \"请选择分组\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '大屏名称',\n          span: 24,\n          labelWidth: 100,\n          prop: 'title',\n          rules: [{\n            required: true,\n            message: \"请输入大屏名称\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '大屏尺寸',\n          span: 14,\n          labelWidth: 100,\n          prop: 'width',\n          placeholder: '请输入宽度',\n          rules: [{\n            required: true,\n            message: \"请输入大屏尺寸\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '',\n          span: 10,\n          labelWidth: 1,\n          prop: 'height',\n          placeholder: '请输入高度',\n          rules: [{\n            required: true,\n            message: \"请输入大屏尺寸\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '密码',\n          span: 24,\n          type: 'password',\n          labelWidth: 100,\n          prop: 'password',\n        }]\n      },\n    }\n  },\n  computed: {\n    active () {\n      return this.list[this.count] || {}\n    }\n  },\n  created () {\n    this.form.category = this.$route.query.category;\n    this.getList()\n  },\n  methods: {\n    getList () {\n      getList({\n        category: 1,\n        current: 1,\n        size: 67\n      }).then(res => {\n        this.list = res.data.data.records\n        this.list.unshift({\n          id: 0,\n          title: '空白模板',\n          backgroundUrl: '/img/bg.jpg'\n        })\n      })\n    },\n    handleSave () {\n      if (this.count == 0) {\n        addObj(this.form).then(res => {\n          const id = res.data.data.id;\n          this.handleEdit({ id })\n        })\n      } else {\n        let id;\n        copyObj(this.active.id).then(res => {\n          id = res.data.data\n          return updateObj({\n            id: id,\n            category: this.form.category,\n            password: this.form.password,\n            status: this.form.status,\n            title: this.form.title\n          })\n        }).then(() => {\n          this.handleEdit({ id })\n        })\n      }\n    },\n    handleEdit (item) {\n      let routeUrl = this.$router.resolve({\n        path: '/build/' + item.id\n      })\n      window.location.replace(routeUrl.href);\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/styles/list.scss\";\n.create-screen {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: rgba(0, 51, 125, 0.07);\n  margin: 0;\n  padding: 0;\n  user-select: none;\n\n  .top-bar {\n    height: 50px;\n    width: 100%;\n    position: relative;\n\n    &::before {\n      content: \" \";\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 20px;\n      width: 100%;\n      background: #151b22;\n    }\n\n    .right-bar {\n      position: absolute;\n      left: 150px;\n      top: 20px;\n      height: 5px;\n      width: 100%;\n      border-top: 2px solid rgb(38, 129, 255);\n      border-left: 2px solid rgb(38, 129, 255);\n      background: rgba(55, 126, 255, 0.04);\n      border-top-left-radius: 5px;\n      transform: skewX(-45deg);\n      box-shadow: 0 5px 28px 0 rgba(55, 126, 255, 0.28);\n    }\n\n    .left-bar {\n      position: absolute;\n      left: 0;\n      top: 24px;\n      height: 25px;\n      width: 138px;\n      border-right: 2px solid rgb(38, 129, 255);\n      border-bottom: 2px solid rgb(38, 129, 255);\n      transform: skewX(-45deg);\n      border-bottom-right-radius: 5px;\n      box-shadow: 0 5px 28px 0 rgba(55, 126, 255, 0.28);\n    }\n\n    .return-btn {\n      position: absolute;\n      left: -31px;\n      top: 0;\n      width: 180px;\n      height: 48px;\n      line-height: 48px;\n      text-align: center;\n      background: #151b22;\n      cursor: pointer;\n      transform: skewX(-45deg);\n      border-bottom-right-radius: 5px;\n\n      .return-text {\n        display: inline-block;\n        color: #fff;\n        font-size: 14px;\n        margin-left: 10px;\n        transform: skewX(45deg);\n        transition: 0.2s;\n\n        &:hover {\n          color: var(--datav-main-color);\n        }\n      }\n\n      .return-icon {\n        margin-right: 5px;\n      }\n    }\n  }\n}\n.create-box {\n  margin-top: 10px;\n  margin-bottom: 40px;\n  width: 100%;\n  overflow-x: auto;\n  .avue-tip-title {\n    padding-left: 20px;\n  }\n}\n.create-scroll {\n  padding-bottom: 20px;\n  width: 3000px;\n}\n.create-content {\n  padding: 40px 20px;\n  display: flex;\n  align-items: flex-start;\n  background-color: #000;\n  box-sizing: border-box;\n  img {\n    width: 500px;\n    display: block;\n    position: relative;\n    border: 1px solid #2681ff;\n    box-shadow: 0 0 10px -6px #000;\n  }\n}\n.create-dialog {\n  .required {\n    display: inline-block;\n    margin-right: 6px;\n    color: var(--datav-red-color);\n  }\n\n  .template-desc {\n    margin-bottom: 20px;\n    opacity: 0.8;\n    overflow: hidden;\n    -webkit-line-clamp: 3;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n\n  .name-title {\n    margin-bottom: 10px;\n  }\n\n  .name-input {\n    margin-bottom: 15px;\n    height: 28px;\n    line-height: 26px;\n  }\n}\n</style>\n"]}]}