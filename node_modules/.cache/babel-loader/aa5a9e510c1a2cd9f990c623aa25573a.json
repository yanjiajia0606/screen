{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/async.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/async.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmFzeW5jLWl0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnF1ZXVlLW1pY3JvdGFzay5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5mcmVlemUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi4KICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCnZhciBfX2F3YWl0ZXIgPSB0aGlzICYmIHRoaXMuX19hd2FpdGVyIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHsKICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICB9KTsKICB9CiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJlamVjdChlKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsKICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7CiAgICB9CiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgfSk7Cn07CnZhciBfX2FzeW5jVmFsdWVzID0gdGhpcyAmJiB0aGlzLl9fYXN5bmNWYWx1ZXMgfHwgZnVuY3Rpb24gKG8pIHsKICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLAogICAgaTsKICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSAiZnVuY3Rpb24iID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKCJuZXh0IiksIHZlcmIoInRocm93IiksIHZlcmIoInJldHVybiIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzOwogIH0sIGkpOwogIGZ1bmN0aW9uIHZlcmIobikgewogICAgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsKICAgICAgfSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7CiAgICBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbiAodikgewogICAgICByZXNvbHZlKHsKICAgICAgICB2YWx1ZTogdiwKICAgICAgICBkb25lOiBkCiAgICAgIH0pOwogICAgfSwgcmVqZWN0KTsKICB9Cn07CmltcG9ydCB7IENhbmNlbGxhdGlvblRva2VuU291cmNlIH0gZnJvbSAnLi9jYW5jZWxsYXRpb24uanMnOwppbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvciB9IGZyb20gJy4vZXJyb3JzLmpzJzsKaW1wb3J0IHsgRW1pdHRlciwgRXZlbnQgfSBmcm9tICcuL2V2ZW50LmpzJzsKaW1wb3J0IHsgdG9EaXNwb3NhYmxlIH0gZnJvbSAnLi9saWZlY3ljbGUuanMnOwppbXBvcnQgeyBzZXRUaW1lb3V0MCB9IGZyb20gJy4vcGxhdGZvcm0uanMnOwpleHBvcnQgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHsKICByZXR1cm4gISFvYmogJiYgdHlwZW9mIG9iai50aGVuID09PSAnZnVuY3Rpb24nOwp9CmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW5jZWxhYmxlUHJvbWlzZShjYWxsYmFjaykgewogIHZhciBzb3VyY2UgPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKTsKICB2YXIgdGhlbmFibGUgPSBjYWxsYmFjayhzb3VyY2UudG9rZW4pOwogIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS50b2tlbi5vbkNhbmNlbGxhdGlvblJlcXVlc3RlZChmdW5jdGlvbiAoKSB7CiAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7CiAgICAgIHNvdXJjZS5kaXNwb3NlKCk7CiAgICAgIHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7CiAgICB9KTsKICAgIFByb21pc2UucmVzb2x2ZSh0aGVuYWJsZSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTsKICAgICAgc291cmNlLmRpc3Bvc2UoKTsKICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7CiAgICAgIHNvdXJjZS5kaXNwb3NlKCk7CiAgICAgIHJlamVjdChlcnIpOwogICAgfSk7CiAgfSk7CiAgcmV0dXJuIG5ldyAoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBfY2xhc3MoKSB7CiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfY2xhc3MpOwogICAgfQogICAgX2NyZWF0ZUNsYXNzKF9jbGFzcywgW3sKICAgICAga2V5OiAiY2FuY2VsIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgICBzb3VyY2UuY2FuY2VsKCk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAidGhlbiIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0aGVuKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJjYXRjaCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2F0Y2gocmVqZWN0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIHJlamVjdCk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiZmluYWxseSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZmluYWxseShvbmZpbmFsbHkpIHsKICAgICAgICByZXR1cm4gcHJvbWlzZS5maW5hbGx5KG9uZmluYWxseSk7CiAgICAgIH0KICAgIH1dKTsKICAgIHJldHVybiBfY2xhc3M7CiAgfSgpKSgpOwp9CmV4cG9ydCBmdW5jdGlvbiByYWNlQ2FuY2VsbGF0aW9uKHByb21pc2UsIHRva2VuLCBkZWZhdWx0VmFsdWUpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHJlZiA9IHRva2VuLm9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmVmLmRpc3Bvc2UoKTsKICAgICAgcmVzb2x2ZShkZWZhdWx0VmFsdWUpOwogICAgfSk7CiAgICBwcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJlZi5kaXNwb3NlKCk7CiAgICB9KTsKICB9KTsKfQovKioKICogQSBoZWxwZXIgdG8gcHJldmVudCBhY2N1bXVsYXRpb24gb2Ygc2VxdWVudGlhbCBhc3luYyB0YXNrcy4KICoKICogSW1hZ2luZSBhIG1haWwgbWFuIHdpdGggdGhlIHNvbGUgdGFzayBvZiBkZWxpdmVyaW5nIGxldHRlcnMuIEFzIHNvb24gYXMKICogYSBsZXR0ZXIgc3VibWl0dGVkIGZvciBkZWxpdmVyeSwgaGUgZHJpdmVzIHRvIHRoZSBkZXN0aW5hdGlvbiwgZGVsaXZlcnMgaXQKICogYW5kIHJldHVybnMgdG8gaGlzIGJhc2UuIEltYWdpbmUgdGhhdCBkdXJpbmcgdGhlIHRyaXAsIE4gbW9yZSBsZXR0ZXJzIHdlcmUgc3VibWl0dGVkLgogKiBXaGVuIHRoZSBtYWlsIG1hbiByZXR1cm5zLCBoZSBwaWNrcyB0aG9zZSBOIGxldHRlcnMgYW5kIGRlbGl2ZXJzIHRoZW0gYWxsIGluIGEKICogc2luZ2xlIHRyaXAuIEV2ZW4gdGhvdWdoIE4rMSBzdWJtaXNzaW9ucyBvY2N1cnJlZCwgb25seSAyIGRlbGl2ZXJpZXMgd2VyZSBtYWRlLgogKgogKiBUaGUgdGhyb3R0bGVyIGltcGxlbWVudHMgdGhpcyB2aWEgdGhlIHF1ZXVlKCkgbWV0aG9kLCBieSBwcm92aWRpbmcgaXQgYSB0YXNrCiAqIGZhY3RvcnkuIEZvbGxvd2luZyB0aGUgZXhhbXBsZToKICoKICogCQljb25zdCB0aHJvdHRsZXIgPSBuZXcgVGhyb3R0bGVyKCk7CiAqIAkJY29uc3QgbGV0dGVycyA9IFtdOwogKgogKiAJCWZ1bmN0aW9uIGRlbGl2ZXIoKSB7CiAqIAkJCWNvbnN0IGxldHRlcnNUb0RlbGl2ZXIgPSBsZXR0ZXJzOwogKiAJCQlsZXR0ZXJzID0gW107CiAqIAkJCXJldHVybiBtYWtlVGhlVHJpcChsZXR0ZXJzVG9EZWxpdmVyKTsKICogCQl9CiAqCiAqIAkJZnVuY3Rpb24gb25MZXR0ZXJSZWNlaXZlZChsKSB7CiAqIAkJCWxldHRlcnMucHVzaChsKTsKICogCQkJdGhyb3R0bGVyLnF1ZXVlKGRlbGl2ZXIpOwogKiAJCX0KICovCmV4cG9ydCB2YXIgVGhyb3R0bGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBUaHJvdHRsZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGhyb3R0bGVyKTsKICAgIHRoaXMuYWN0aXZlUHJvbWlzZSA9IG51bGw7CiAgICB0aGlzLnF1ZXVlZFByb21pc2UgPSBudWxsOwogICAgdGhpcy5xdWV1ZWRQcm9taXNlRmFjdG9yeSA9IG51bGw7CiAgfQogIF9jcmVhdGVDbGFzcyhUaHJvdHRsZXIsIFt7CiAgICBrZXk6ICJxdWV1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcXVldWUocHJvbWlzZUZhY3RvcnkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHRoaXMuYWN0aXZlUHJvbWlzZSkgewogICAgICAgIHRoaXMucXVldWVkUHJvbWlzZUZhY3RvcnkgPSBwcm9taXNlRmFjdG9yeTsKICAgICAgICBpZiAoIXRoaXMucXVldWVkUHJvbWlzZSkgewogICAgICAgICAgdmFyIG9uQ29tcGxldGUgPSBmdW5jdGlvbiBvbkNvbXBsZXRlKCkgewogICAgICAgICAgICBfdGhpcy5xdWV1ZWRQcm9taXNlID0gbnVsbDsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF90aGlzLnF1ZXVlKF90aGlzLnF1ZXVlZFByb21pc2VGYWN0b3J5KTsKICAgICAgICAgICAgX3RoaXMucXVldWVkUHJvbWlzZUZhY3RvcnkgPSBudWxsOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMucXVldWVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgIF90aGlzLmFjdGl2ZVByb21pc2UudGhlbihvbkNvbXBsZXRlLCBvbkNvbXBsZXRlKS50aGVuKHJlc29sdmUpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICBfdGhpcy5xdWV1ZWRQcm9taXNlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmFjdGl2ZVByb21pc2UgPSBwcm9taXNlRmFjdG9yeSgpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLmFjdGl2ZVByb21pc2UudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBfdGhpcy5hY3RpdmVQcm9taXNlID0gbnVsbDsKICAgICAgICAgIHJlc29sdmUocmVzdWx0KTsKICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBfdGhpcy5hY3RpdmVQcm9taXNlID0gbnVsbDsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFRocm90dGxlcjsKfSgpOwp2YXIgdGltZW91dERlZmVycmVkID0gZnVuY3Rpb24gdGltZW91dERlZmVycmVkKHRpbWVvdXQsIGZuKSB7CiAgdmFyIHNjaGVkdWxlZCA9IHRydWU7CiAgdmFyIGhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgc2NoZWR1bGVkID0gZmFsc2U7CiAgICBmbigpOwogIH0sIHRpbWVvdXQpOwogIHJldHVybiB7CiAgICBpc1RyaWdnZXJlZDogZnVuY3Rpb24gaXNUcmlnZ2VyZWQoKSB7CiAgICAgIHJldHVybiBzY2hlZHVsZWQ7CiAgICB9LAogICAgZGlzcG9zZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7CiAgICAgIHNjaGVkdWxlZCA9IGZhbHNlOwogICAgfQogIH07Cn07CnZhciBtaWNyb3Rhc2tEZWZlcnJlZCA9IGZ1bmN0aW9uIG1pY3JvdGFza0RlZmVycmVkKGZuKSB7CiAgdmFyIHNjaGVkdWxlZCA9IHRydWU7CiAgcXVldWVNaWNyb3Rhc2soZnVuY3Rpb24gKCkgewogICAgaWYgKHNjaGVkdWxlZCkgewogICAgICBzY2hlZHVsZWQgPSBmYWxzZTsKICAgICAgZm4oKTsKICAgIH0KICB9KTsKICByZXR1cm4gewogICAgaXNUcmlnZ2VyZWQ6IGZ1bmN0aW9uIGlzVHJpZ2dlcmVkKCkgewogICAgICByZXR1cm4gc2NoZWR1bGVkOwogICAgfSwKICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHNjaGVkdWxlZCA9IGZhbHNlOwogICAgfQogIH07Cn07Ci8qKiBDYW4gYmUgcGFzc2VkIGludG8gdGhlIERlbGF5ZWQgdG8gZGVmZXIgdXNpbmcgYSBtaWNyb3Rhc2sgKi8KZXhwb3J0IHZhciBNaWNyb3Rhc2tEZWxheSA9IFN5bWJvbCgnTWljcm90YXNrRGVsYXknKTsKLyoqCiAqIEEgaGVscGVyIHRvIGRlbGF5IChkZWJvdW5jZSkgZXhlY3V0aW9uIG9mIGEgdGFzayB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZCBvZnRlbi4KICoKICogRm9sbG93aW5nIHRoZSB0aHJvdHRsZXIsIG5vdyBpbWFnaW5lIHRoZSBtYWlsIG1hbiB3YW50cyB0byBvcHRpbWl6ZSB0aGUgbnVtYmVyIG9mCiAqIHRyaXBzIHByb2FjdGl2ZWx5LiBUaGUgdHJpcCBpdHNlbGYgY2FuIGJlIGxvbmcsIHNvIGhlIGRlY2lkZXMgbm90IHRvIG1ha2UgdGhlIHRyaXAKICogYXMgc29vbiBhcyBhIGxldHRlciBpcyBzdWJtaXR0ZWQuIEluc3RlYWQgaGUgd2FpdHMgYSB3aGlsZSwgaW4gY2FzZSBtb3JlCiAqIGxldHRlcnMgYXJlIHN1Ym1pdHRlZC4gQWZ0ZXIgc2FpZCB3YWl0aW5nIHBlcmlvZCwgaWYgbm8gbGV0dGVycyB3ZXJlIHN1Ym1pdHRlZCwgaGUKICogZGVjaWRlcyB0byBtYWtlIHRoZSB0cmlwLiBJbWFnaW5lIHRoYXQgTiBtb3JlIGxldHRlcnMgd2VyZSBzdWJtaXR0ZWQgYWZ0ZXIgdGhlIGZpcnN0CiAqIG9uZSwgYWxsIHdpdGhpbiBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gZWFjaCBvdGhlci4gRXZlbiB0aG91Z2ggTisxCiAqIHN1Ym1pc3Npb25zIG9jY3VycmVkLCBvbmx5IDEgZGVsaXZlcnkgd2FzIG1hZGUuCiAqCiAqIFRoZSBkZWxheWVyIG9mZmVycyB0aGlzIGJlaGF2aW9yIHZpYSB0aGUgdHJpZ2dlcigpIG1ldGhvZCwgaW50byB3aGljaCBib3RoIHRoZSB0YXNrCiAqIHRvIGJlIGV4ZWN1dGVkIGFuZCB0aGUgd2FpdGluZyBwZXJpb2QgKGRlbGF5KSBtdXN0IGJlIHBhc3NlZCBpbiBhcyBhcmd1bWVudHMuIEZvbGxvd2luZwogKiB0aGUgZXhhbXBsZToKICoKICogCQljb25zdCBkZWxheWVyID0gbmV3IERlbGF5ZXIoV0FJVElOR19QRVJJT0QpOwogKiAJCWNvbnN0IGxldHRlcnMgPSBbXTsKICoKICogCQlmdW5jdGlvbiBsZXR0ZXJSZWNlaXZlZChsKSB7CiAqIAkJCWxldHRlcnMucHVzaChsKTsKICogCQkJZGVsYXllci50cmlnZ2VyKCgpID0+IHsgcmV0dXJuIG1ha2VUaGVUcmlwKCk7IH0pOwogKiAJCX0KICovCmV4cG9ydCB2YXIgRGVsYXllciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRGVsYXllcihkZWZhdWx0RGVsYXkpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZWxheWVyKTsKICAgIHRoaXMuZGVmYXVsdERlbGF5ID0gZGVmYXVsdERlbGF5OwogICAgdGhpcy5kZWZlcnJlZCA9IG51bGw7CiAgICB0aGlzLmNvbXBsZXRpb25Qcm9taXNlID0gbnVsbDsKICAgIHRoaXMuZG9SZXNvbHZlID0gbnVsbDsKICAgIHRoaXMuZG9SZWplY3QgPSBudWxsOwogICAgdGhpcy50YXNrID0gbnVsbDsKICB9CiAgX2NyZWF0ZUNsYXNzKERlbGF5ZXIsIFt7CiAgICBrZXk6ICJ0cmlnZ2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlnZ2VyKHRhc2spIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBkZWxheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdGhpcy5kZWZhdWx0RGVsYXk7CiAgICAgIHRoaXMudGFzayA9IHRhc2s7CiAgICAgIHRoaXMuY2FuY2VsVGltZW91dCgpOwogICAgICBpZiAoIXRoaXMuY29tcGxldGlvblByb21pc2UpIHsKICAgICAgICB0aGlzLmNvbXBsZXRpb25Qcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgX3RoaXMyLmRvUmVzb2x2ZSA9IHJlc29sdmU7CiAgICAgICAgICBfdGhpczIuZG9SZWplY3QgPSByZWplY3Q7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuY29tcGxldGlvblByb21pc2UgPSBudWxsOwogICAgICAgICAgX3RoaXMyLmRvUmVzb2x2ZSA9IG51bGw7CiAgICAgICAgICBpZiAoX3RoaXMyLnRhc2spIHsKICAgICAgICAgICAgdmFyIF90YXNrID0gX3RoaXMyLnRhc2s7CiAgICAgICAgICAgIF90aGlzMi50YXNrID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIF90YXNrKCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIGZuKCkgewogICAgICAgIHZhciBfYTsKICAgICAgICBfdGhpczIuZGVmZXJyZWQgPSBudWxsOwogICAgICAgIChfYSA9IF90aGlzMi5kb1Jlc29sdmUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKF90aGlzMiwgbnVsbCk7CiAgICAgIH07CiAgICAgIHRoaXMuZGVmZXJyZWQgPSBkZWxheSA9PT0gTWljcm90YXNrRGVsYXkgPyBtaWNyb3Rhc2tEZWZlcnJlZChmbikgOiB0aW1lb3V0RGVmZXJyZWQoZGVsYXksIGZuKTsKICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGlvblByb21pc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNUcmlnZ2VyZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzVHJpZ2dlcmVkKCkgewogICAgICB2YXIgX2E7CiAgICAgIHJldHVybiAhISgoX2EgPSB0aGlzLmRlZmVycmVkKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNUcmlnZ2VyZWQoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHZhciBfYTsKICAgICAgdGhpcy5jYW5jZWxUaW1lb3V0KCk7CiAgICAgIGlmICh0aGlzLmNvbXBsZXRpb25Qcm9taXNlKSB7CiAgICAgICAgKF9hID0gdGhpcy5kb1JlamVjdCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodGhpcywgbmV3IENhbmNlbGxhdGlvbkVycm9yKCkpOwogICAgICAgIHRoaXMuY29tcGxldGlvblByb21pc2UgPSBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsVGltZW91dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsVGltZW91dCgpIHsKICAgICAgdmFyIF9hOwogICAgICAoX2EgPSB0aGlzLmRlZmVycmVkKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlzcG9zZSgpOwogICAgICB0aGlzLmRlZmVycmVkID0gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICB0aGlzLmNhbmNlbCgpOwogICAgfQogIH1dKTsKICByZXR1cm4gRGVsYXllcjsKfSgpOwovKioKICogQSBoZWxwZXIgdG8gZGVsYXkgZXhlY3V0aW9uIG9mIGEgdGFzayB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZCBvZnRlbiwgd2hpbGUKICogcHJldmVudGluZyBhY2N1bXVsYXRpb24gb2YgY29uc2VjdXRpdmUgZXhlY3V0aW9ucywgd2hpbGUgdGhlIHRhc2sgcnVucy4KICoKICogVGhlIG1haWwgbWFuIGlzIGNsZXZlciBhbmQgd2FpdHMgZm9yIGEgY2VydGFpbiBhbW91bnQgb2YgdGltZSwgYmVmb3JlIGdvaW5nCiAqIG91dCB0byBkZWxpdmVyIGxldHRlcnMuIFdoaWxlIHRoZSBtYWlsIG1hbiBpcyBnb2luZyBvdXQsIG1vcmUgbGV0dGVycyBhcnJpdmUKICogYW5kIGNhbiBvbmx5IGJlIGRlbGl2ZXJlZCBvbmNlIGhlIGlzIGJhY2suIE9uY2UgaGUgaXMgYmFjayB0aGUgbWFpbCBtYW4gd2lsbAogKiBkbyBvbmUgbW9yZSB0cmlwIHRvIGRlbGl2ZXIgdGhlIGxldHRlcnMgdGhhdCBoYXZlIGFjY3VtdWxhdGVkIHdoaWxlIGhlIHdhcyBvdXQuCiAqLwpleHBvcnQgdmFyIFRocm90dGxlZERlbGF5ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFRocm90dGxlZERlbGF5ZXIoZGVmYXVsdERlbGF5KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGhyb3R0bGVkRGVsYXllcik7CiAgICB0aGlzLmRlbGF5ZXIgPSBuZXcgRGVsYXllcihkZWZhdWx0RGVsYXkpOwogICAgdGhpcy50aHJvdHRsZXIgPSBuZXcgVGhyb3R0bGVyKCk7CiAgfQogIF9jcmVhdGVDbGFzcyhUaHJvdHRsZWREZWxheWVyLCBbewogICAga2V5OiAidHJpZ2dlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlcihwcm9taXNlRmFjdG9yeSwgZGVsYXkpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzLmRlbGF5ZXIudHJpZ2dlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy50aHJvdHRsZXIucXVldWUocHJvbWlzZUZhY3RvcnkpOwogICAgICB9LCBkZWxheSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdGhpcy5kZWxheWVyLmRpc3Bvc2UoKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFRocm90dGxlZERlbGF5ZXI7Cn0oKTsKZXhwb3J0IGZ1bmN0aW9uIHRpbWVvdXQobWlsbGlzLCB0b2tlbikgewogIGlmICghdG9rZW4pIHsKICAgIHJldHVybiBjcmVhdGVDYW5jZWxhYmxlUHJvbWlzZShmdW5jdGlvbiAodG9rZW4pIHsKICAgICAgcmV0dXJuIHRpbWVvdXQobWlsbGlzLCB0b2tlbik7CiAgICB9KTsKICB9CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciBoYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgZGlzcG9zYWJsZS5kaXNwb3NlKCk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0sIG1pbGxpcyk7CiAgICB2YXIgZGlzcG9zYWJsZSA9IHRva2VuLm9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGZ1bmN0aW9uICgpIHsKICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7CiAgICAgIGRpc3Bvc2FibGUuZGlzcG9zZSgpOwogICAgICByZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpOwogICAgfSk7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2FibGVUaW1lb3V0KGhhbmRsZXIpIHsKICB2YXIgdGltZW91dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICB2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGhhbmRsZXIsIHRpbWVvdXQpOwogIHJldHVybiB0b0Rpc3Bvc2FibGUoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGNsZWFyVGltZW91dCh0aW1lcik7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGZpcnN0KHByb21pc2VGYWN0b3JpZXMpIHsKICB2YXIgc2hvdWxkU3RvcCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiAhIXQ7CiAgfTsKICB2YXIgZGVmYXVsdFZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsOwogIHZhciBpbmRleCA9IDA7CiAgdmFyIGxlbiA9IHByb21pc2VGYWN0b3JpZXMubGVuZ3RoOwogIHZhciBsb29wID0gZnVuY3Rpb24gbG9vcCgpIHsKICAgIGlmIChpbmRleCA+PSBsZW4pIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZWZhdWx0VmFsdWUpOwogICAgfQogICAgdmFyIGZhY3RvcnkgPSBwcm9taXNlRmFjdG9yaWVzW2luZGV4KytdOwogICAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoZmFjdG9yeSgpKTsKICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICBpZiAoc2hvdWxkU3RvcChyZXN1bHQpKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpOwogICAgICB9CiAgICAgIHJldHVybiBsb29wKCk7CiAgICB9KTsKICB9OwogIHJldHVybiBsb29wKCk7Cn0KZXhwb3J0IHZhciBUaW1lb3V0VGltZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFRpbWVvdXRUaW1lcihydW5uZXIsIHRpbWVvdXQpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUaW1lb3V0VGltZXIpOwogICAgdGhpcy5fdG9rZW4gPSAtMTsKICAgIGlmICh0eXBlb2YgcnVubmVyID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB0aW1lb3V0ID09PSAnbnVtYmVyJykgewogICAgICB0aGlzLnNldElmTm90U2V0KHJ1bm5lciwgdGltZW91dCk7CiAgICB9CiAgfQogIF9jcmVhdGVDbGFzcyhUaW1lb3V0VGltZXIsIFt7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICB0aGlzLmNhbmNlbCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImNhbmNlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICBpZiAodGhpcy5fdG9rZW4gIT09IC0xKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Rva2VuKTsKICAgICAgICB0aGlzLl90b2tlbiA9IC0xOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsQW5kU2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxBbmRTZXQocnVubmVyLCB0aW1lb3V0KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLmNhbmNlbCgpOwogICAgICB0aGlzLl90b2tlbiA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5fdG9rZW4gPSAtMTsKICAgICAgICBydW5uZXIoKTsKICAgICAgfSwgdGltZW91dCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0SWZOb3RTZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldElmTm90U2V0KHJ1bm5lciwgdGltZW91dCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgaWYgKHRoaXMuX3Rva2VuICE9PSAtMSkgewogICAgICAgIC8vIHRpbWVyIGlzIGFscmVhZHkgc2V0CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX3Rva2VuID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1Ll90b2tlbiA9IC0xOwogICAgICAgIHJ1bm5lcigpOwogICAgICB9LCB0aW1lb3V0KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFRpbWVvdXRUaW1lcjsKfSgpOwpleHBvcnQgdmFyIEludGVydmFsVGltZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEludGVydmFsVGltZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW50ZXJ2YWxUaW1lcik7CiAgICB0aGlzLl90b2tlbiA9IC0xOwogIH0KICBfY3JlYXRlQ2xhc3MoSW50ZXJ2YWxUaW1lciwgW3sKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuY2FuY2VsKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIGlmICh0aGlzLl90b2tlbiAhPT0gLTEpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX3Rva2VuKTsKICAgICAgICB0aGlzLl90b2tlbiA9IC0xOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsQW5kU2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxBbmRTZXQocnVubmVyLCBpbnRlcnZhbCkgewogICAgICB0aGlzLmNhbmNlbCgpOwogICAgICB0aGlzLl90b2tlbiA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICBydW5uZXIoKTsKICAgICAgfSwgaW50ZXJ2YWwpOwogICAgfQogIH1dKTsKICByZXR1cm4gSW50ZXJ2YWxUaW1lcjsKfSgpOwpleHBvcnQgdmFyIFJ1bk9uY2VTY2hlZHVsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFJ1bk9uY2VTY2hlZHVsZXIocnVubmVyLCBkZWxheSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJ1bk9uY2VTY2hlZHVsZXIpOwogICAgdGhpcy50aW1lb3V0VG9rZW4gPSAtMTsKICAgIHRoaXMucnVubmVyID0gcnVubmVyOwogICAgdGhpcy50aW1lb3V0ID0gZGVsYXk7CiAgICB0aGlzLnRpbWVvdXRIYW5kbGVyID0gdGhpcy5vblRpbWVvdXQuYmluZCh0aGlzKTsKICB9CiAgLyoqCiAgICogRGlzcG9zZSBSdW5PbmNlU2NoZWR1bGVyCiAgICovCiAgX2NyZWF0ZUNsYXNzKFJ1bk9uY2VTY2hlZHVsZXIsIFt7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICB0aGlzLmNhbmNlbCgpOwogICAgICB0aGlzLnJ1bm5lciA9IG51bGw7CiAgICB9CiAgICAvKioKICAgICAqIENhbmNlbCBjdXJyZW50IHNjaGVkdWxlZCBydW5uZXIgKGlmIGFueSkuCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJjYW5jZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgaWYgKHRoaXMuaXNTY2hlZHVsZWQoKSkgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRUb2tlbik7CiAgICAgICAgdGhpcy50aW1lb3V0VG9rZW4gPSAtMTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDYW5jZWwgcHJldmlvdXMgcnVubmVyIChpZiBhbnkpICYgc2NoZWR1bGUgYSBuZXcgcnVubmVyLgogICAgICovCiAgfSwgewogICAga2V5OiAic2NoZWR1bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNjaGVkdWxlKCkgewogICAgICB2YXIgZGVsYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMudGltZW91dDsKICAgICAgdGhpcy5jYW5jZWwoKTsKICAgICAgdGhpcy50aW1lb3V0VG9rZW4gPSBzZXRUaW1lb3V0KHRoaXMudGltZW91dEhhbmRsZXIsIGRlbGF5KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZWxheSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMudGltZW91dDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICB0aGlzLnRpbWVvdXQgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIHNjaGVkdWxlZC4KICAgICAqLwogIH0sIHsKICAgIGtleTogImlzU2NoZWR1bGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NjaGVkdWxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMudGltZW91dFRva2VuICE9PSAtMTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvblRpbWVvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uVGltZW91dCgpIHsKICAgICAgdGhpcy50aW1lb3V0VG9rZW4gPSAtMTsKICAgICAgaWYgKHRoaXMucnVubmVyKSB7CiAgICAgICAgdGhpcy5kb1J1bigpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZG9SdW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvUnVuKCkgewogICAgICB2YXIgX2E7CiAgICAgIChfYSA9IHRoaXMucnVubmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh0aGlzKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFJ1bk9uY2VTY2hlZHVsZXI7Cn0oKTsKLyoqCiAqIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIHRoZSBuZXh0IHRpbWUgdGhlIGJyb3dzZXIgaXMgaWRsZQogKi8KZXhwb3J0IHZhciBydW5XaGVuSWRsZTsKKGZ1bmN0aW9uICgpIHsKICBpZiAodHlwZW9mIHJlcXVlc3RJZGxlQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGNhbmNlbElkbGVDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgewogICAgcnVuV2hlbklkbGUgPSBmdW5jdGlvbiBydW5XaGVuSWRsZShydW5uZXIpIHsKICAgICAgc2V0VGltZW91dDAoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChkaXNwb3NlZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgZW5kID0gRGF0ZS5ub3coKSArIDE1OyAvLyBvbmUgZnJhbWUgYXQgNjRmcHMKICAgICAgICBydW5uZXIoT2JqZWN0LmZyZWV6ZSh7CiAgICAgICAgICBkaWRUaW1lb3V0OiB0cnVlLAogICAgICAgICAgdGltZVJlbWFpbmluZzogZnVuY3Rpb24gdGltZVJlbWFpbmluZygpIHsKICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIGVuZCAtIERhdGUubm93KCkpOwogICAgICAgICAgfQogICAgICAgIH0pKTsKICAgICAgfSk7CiAgICAgIHZhciBkaXNwb3NlZCA9IGZhbHNlOwogICAgICByZXR1cm4gewogICAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgICAgICBpZiAoZGlzcG9zZWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgZGlzcG9zZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfTsKICAgIH07CiAgfSBlbHNlIHsKICAgIHJ1bldoZW5JZGxlID0gZnVuY3Rpb24gcnVuV2hlbklkbGUocnVubmVyLCB0aW1lb3V0KSB7CiAgICAgIHZhciBoYW5kbGUgPSByZXF1ZXN0SWRsZUNhbGxiYWNrKHJ1bm5lciwgdHlwZW9mIHRpbWVvdXQgPT09ICdudW1iZXInID8gewogICAgICAgIHRpbWVvdXQ6IHRpbWVvdXQKICAgICAgfSA6IHVuZGVmaW5lZCk7CiAgICAgIHZhciBkaXNwb3NlZCA9IGZhbHNlOwogICAgICByZXR1cm4gewogICAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgICAgICBpZiAoZGlzcG9zZWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgZGlzcG9zZWQgPSB0cnVlOwogICAgICAgICAgY2FuY2VsSWRsZUNhbGxiYWNrKGhhbmRsZSk7CiAgICAgICAgfQogICAgICB9OwogICAgfTsKICB9Cn0pKCk7Ci8qKgogKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgImlkbGUtdW50aWwtdXJnZW50Ii1zdHJhdGVneSBhcyBpbnRyb2R1Y2VkCiAqIGhlcmU6IGh0dHBzOi8vcGhpbGlwd2FsdG9uLmNvbS9hcnRpY2xlcy9pZGxlLXVudGlsLXVyZ2VudC8KICovCmV4cG9ydCB2YXIgSWRsZVZhbHVlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBJZGxlVmFsdWUoZXhlY3V0b3IpIHsKICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIElkbGVWYWx1ZSk7CiAgICB0aGlzLl9kaWRSdW4gPSBmYWxzZTsKICAgIHRoaXMuX2V4ZWN1dG9yID0gZnVuY3Rpb24gKCkgewogICAgICB0cnkgewogICAgICAgIF90aGlzNi5fdmFsdWUgPSBleGVjdXRvcigpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfdGhpczYuX2Vycm9yID0gZXJyOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF90aGlzNi5fZGlkUnVuID0gdHJ1ZTsKICAgICAgfQogICAgfTsKICAgIHRoaXMuX2hhbmRsZSA9IHJ1bldoZW5JZGxlKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzNi5fZXhlY3V0b3IoKTsKICAgIH0pOwogIH0KICBfY3JlYXRlQ2xhc3MoSWRsZVZhbHVlLCBbewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdGhpcy5faGFuZGxlLmRpc3Bvc2UoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWx1ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKCF0aGlzLl9kaWRSdW4pIHsKICAgICAgICB0aGlzLl9oYW5kbGUuZGlzcG9zZSgpOwogICAgICAgIHRoaXMuX2V4ZWN1dG9yKCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX2Vycm9yKSB7CiAgICAgICAgdGhyb3cgdGhpcy5fZXJyb3I7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogImlzSW5pdGlhbGl6ZWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kaWRSdW47CiAgICB9CiAgfV0pOwogIHJldHVybiBJZGxlVmFsdWU7Cn0oKTsKLyoqCiAqIENyZWF0ZXMgYSBwcm9taXNlIHdob3NlIHJlc29sdXRpb24gb3IgcmVqZWN0aW9uIGNhbiBiZSBjb250cm9sbGVkIGltcGVyYXRpdmVseS4KICovCmV4cG9ydCB2YXIgRGVmZXJyZWRQcm9taXNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBEZWZlcnJlZFByb21pc2UoKSB7CiAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZWZlcnJlZFByb21pc2UpOwogICAgdGhpcy5yZWplY3RlZCA9IGZhbHNlOwogICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlOwogICAgdGhpcy5wID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKGMsIGUpIHsKICAgICAgX3RoaXM3LmNvbXBsZXRlQ2FsbGJhY2sgPSBjOwogICAgICBfdGhpczcuZXJyb3JDYWxsYmFjayA9IGU7CiAgICB9KTsKICB9CiAgX2NyZWF0ZUNsYXNzKERlZmVycmVkUHJvbWlzZSwgW3sKICAgIGtleTogImlzUmVqZWN0ZWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnJlamVjdGVkOwogICAgfQogIH0sIHsKICAgIGtleTogImlzU2V0dGxlZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMucmVqZWN0ZWQgfHwgdGhpcy5yZXNvbHZlZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wbGV0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcGxldGUodmFsdWUpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIF90aGlzOC5jb21wbGV0ZUNhbGxiYWNrKHZhbHVlKTsKICAgICAgICBfdGhpczgucmVzb2x2ZWQgPSB0cnVlOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIF90aGlzOS5lcnJvckNhbGxiYWNrKG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTsKICAgICAgICBfdGhpczkucmVqZWN0ZWQgPSB0cnVlOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBEZWZlcnJlZFByb21pc2U7Cn0oKTsKLy8jZW5kcmVnaW9uCi8vI3JlZ2lvbiBQcm9taXNlcwpleHBvcnQgdmFyIFByb21pc2VzOwooZnVuY3Rpb24gKFByb21pc2VzKSB7CiAgLyoqCiAgICogQSBkcm9wLWluIHJlcGxhY2VtZW50IGZvciBgUHJvbWlzZS5hbGxgIHdpdGggdGhlIG9ubHkgZGlmZmVyZW5jZQogICAqIHRoYXQgdGhlIG1ldGhvZCBhd2FpdHMgZXZlcnkgcHJvbWlzZSB0byBlaXRoZXIgZnVsZmlsbCBvciByZWplY3QuCiAgICoKICAgKiBTaW1pbGFyIHRvIGBQcm9taXNlLmFsbGAsIG9ubHkgdGhlIGZpcnN0IGVycm9yIHdpbGwgYmUgcmV0dXJuZWQKICAgKiBpZiBhbnkuCiAgICovCiAgZnVuY3Rpb24gc2V0dGxlZChwcm9taXNlcykgewogICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBmaXJzdEVycm9yLCByZXN1bHQ7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBmaXJzdEVycm9yID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAoZnVuY3Rpb24gKHByb21pc2UpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0RXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZXJyb3I7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy8gZG8gbm90IHJldGhyb3cgc28gdGhhdCBvdGhlciBwcm9taXNlcyBjYW4gc2V0dGxlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGlmICghKHR5cGVvZiBmaXJzdEVycm9yICE9PSAndW5kZWZpbmVkJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IGZpcnN0RXJyb3I7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwogIH0KICBQcm9taXNlcy5zZXR0bGVkID0gc2V0dGxlZDsKICAvKioKICAgKiBBIGhlbHBlciB0byBjcmVhdGUgYSBuZXcgYFByb21pc2U8VD5gIHdpdGggYSBib2R5IHRoYXQgaXMgYSBwcm9taXNlCiAgICogaXRzZWxmLiBCeSBkZWZhdWx0LCBhbiBlcnJvciB0aGF0IHJhaXNlcyBmcm9tIHRoZSBhc3luYyBib2R5IHdpbGwKICAgKiBlbmQgdXAgYXMgYSB1bmhhbmRsZWQgcmVqZWN0aW9uLCBzbyB0aGlzIHV0aWxpdHkgcHJvcGVybHkgYXdhaXRzIHRoZQogICAqIGJvZHkgYW5kIHJlamVjdHMgdGhlIHByb21pc2UgYXMgYSBub3JtYWwgcHJvbWlzZSBkb2VzIHdpdGhvdXQgYXN5bmMKICAgKiBib2R5LgogICAqCiAgICogVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiByYXJlIGNhc2VzIHdoZXJlIG90aGVyd2lzZSBgYXN5bmNgCiAgICogY2Fubm90IGJlIHVzZWQgKGUuZy4gd2hlbiBjYWxsYmFja3MgYXJlIGludm9sdmVkIHRoYXQgcmVxdWlyZSB0aGlzKS4KICAgKi8KICBmdW5jdGlvbiB3aXRoQXN5bmNCb2R5KGJvZHlGbikgewogICAgdmFyIF90aGlzMTAgPSB0aGlzOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWFzeW5jLXByb21pc2UtZXhlY3V0b3IKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMxMCwgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGJvZHlGbihyZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHJlamVjdChfY29udGV4dDIudDApOwogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1swLCA1XV0pOwogICAgICB9KSk7CiAgICB9KTsKICB9CiAgUHJvbWlzZXMud2l0aEFzeW5jQm9keSA9IHdpdGhBc3luY0JvZHk7Cn0pKFByb21pc2VzIHx8IChQcm9taXNlcyA9IHt9KSk7Ci8qKgogKiBBIHJpY2ggaW1wbGVtZW50YXRpb24gZm9yIGFuIGBBc3luY0l0ZXJhYmxlPFQ+YC4KICovCmV4cG9ydCB2YXIgQXN5bmNJdGVyYWJsZU9iamVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1N5bWJvbCRhc3luY0l0ZXJhdG9yKSB7CiAgZnVuY3Rpb24gQXN5bmNJdGVyYWJsZU9iamVjdChleGVjdXRvcikgewogICAgdmFyIF90aGlzMTEgPSB0aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFzeW5jSXRlcmFibGVPYmplY3QpOwogICAgdGhpcy5fc3RhdGUgPSAwIC8qIEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZS5Jbml0aWFsICovOwogICAgdGhpcy5fcmVzdWx0cyA9IFtdOwogICAgdGhpcy5fZXJyb3IgPSBudWxsOwogICAgdGhpcy5fb25TdGF0ZUNoYW5nZWQgPSBuZXcgRW1pdHRlcigpOwogICAgcXVldWVNaWNyb3Rhc2soZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzMTEsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwogICAgICAgIHZhciB3cml0ZXI7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHdyaXRlciA9IHsKICAgICAgICAgICAgICAgICAgZW1pdE9uZTogZnVuY3Rpb24gZW1pdE9uZShpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTIuZW1pdE9uZShpdGVtKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZW1pdE1hbnk6IGZ1bmN0aW9uIGVtaXRNYW55KGl0ZW1zKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTIuZW1pdE1hbnkoaXRlbXMpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEyLnJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGV4ZWN1dG9yKHdyaXRlcikpOwogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KF9jb250ZXh0My50MCk7CiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICB3cml0ZXIuZW1pdE9uZSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHdyaXRlci5lbWl0TWFueSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHdyaXRlci5yZWplY3QgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCgxMCk7CiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcywgW1sxLCA3LCAxMCwgMTVdXSk7CiAgICAgIH0pKTsKICAgIH0pOwogIH0KICBfY3JlYXRlQ2xhc3MoQXN5bmNJdGVyYWJsZU9iamVjdCwgW3sKICAgIGtleTogX1N5bWJvbCRhc3luY0l0ZXJhdG9yLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CiAgICAgIHZhciBpID0gMDsKICAgICAgcmV0dXJuIHsKICAgICAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczEzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuX3N0YXRlID09PSAyIC8qIEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZS5Eb25lRXJyb3IgKi8pKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5fZXJyb3I7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICBpZiAoIShpIDwgdGhpcy5fcmVzdWx0cy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuX3Jlc3VsdHNbaSsrXQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5fc3RhdGUgPT09IDEgLyogQXN5bmNJdGVyYWJsZVNvdXJjZVN0YXRlLkRvbmVPSyAqLykpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICAgICAgZG9uZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXZlbnQudG9Qcm9taXNlKHRoaXMuX29uU3RhdGVDaGFuZ2VkLmV2ZW50KTsKICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgIGlmICh0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTsKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAibWFwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtYXAobWFwRm4pIHsKICAgICAgcmV0dXJuIEFzeW5jSXRlcmFibGVPYmplY3QubWFwKHRoaXMsIG1hcEZuKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWx0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlcihmaWx0ZXJGbikgewogICAgICByZXR1cm4gQXN5bmNJdGVyYWJsZU9iamVjdC5maWx0ZXIodGhpcywgZmlsdGVyRm4pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvYWxlc2NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb2FsZXNjZSgpIHsKICAgICAgcmV0dXJuIEFzeW5jSXRlcmFibGVPYmplY3QuY29hbGVzY2UodGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9Qcm9taXNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b1Byb21pc2UoKSB7CiAgICAgIHJldHVybiBBc3luY0l0ZXJhYmxlT2JqZWN0LnRvUHJvbWlzZSh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogVGhlIHZhbHVlIHdpbGwgYmUgYXBwZW5kZWQgYXQgdGhlIGVuZC4KICAgICAqCiAgICAgKiAqKk5PVEUqKiBJZiBgcmVzb2x2ZSgpYCBvciBgcmVqZWN0KClgIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCwgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVjdC4KICAgICAqLwogIH0sIHsKICAgIGtleTogImVtaXRPbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXRPbmUodmFsdWUpIHsKICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSAwIC8qIEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZS5Jbml0aWFsICovKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIGl0IGlzIGltcG9ydGFudCB0byBhZGQgbmV3IHZhbHVlcyBhdCB0aGUgZW5kLAogICAgICAvLyBhcyB3ZSBtYXkgaGF2ZSBpdGVyYXRvcnMgYWxyZWFkeSBydW5uaW5nIG9uIHRoZSBhcnJheQogICAgICB0aGlzLl9yZXN1bHRzLnB1c2godmFsdWUpOwogICAgICB0aGlzLl9vblN0YXRlQ2hhbmdlZC5maXJlKCk7CiAgICB9CiAgICAvKioKICAgICAqIFRoZSB2YWx1ZXMgd2lsbCBiZSBhcHBlbmRlZCBhdCB0aGUgZW5kLgogICAgICoKICAgICAqICoqTk9URSoqIElmIGByZXNvbHZlKClgIG9yIGByZWplY3QoKWAgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkLCB0aGlzIG1ldGhvZCBoYXMgbm8gZWZmZWN0LgogICAgICovCiAgfSwgewogICAga2V5OiAiZW1pdE1hbnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXRNYW55KHZhbHVlcykgewogICAgICBpZiAodGhpcy5fc3RhdGUgIT09IDAgLyogQXN5bmNJdGVyYWJsZVNvdXJjZVN0YXRlLkluaXRpYWwgKi8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8gaXQgaXMgaW1wb3J0YW50IHRvIGFkZCBuZXcgdmFsdWVzIGF0IHRoZSBlbmQsCiAgICAgIC8vIGFzIHdlIG1heSBoYXZlIGl0ZXJhdG9ycyBhbHJlYWR5IHJ1bm5pbmcgb24gdGhlIGFycmF5CiAgICAgIHRoaXMuX3Jlc3VsdHMgPSB0aGlzLl9yZXN1bHRzLmNvbmNhdCh2YWx1ZXMpOwogICAgICB0aGlzLl9vblN0YXRlQ2hhbmdlZC5maXJlKCk7CiAgICB9CiAgICAvKioKICAgICAqIENhbGxpbmcgYHJlc29sdmUoKWAgd2lsbCBtYXJrIHRoZSByZXN1bHQgYXJyYXkgYXMgY29tcGxldGUuCiAgICAgKgogICAgICogKipOT1RFKiogYHJlc29sdmUoKWAgbXVzdCBiZSBjYWxsZWQsIG90aGVyd2lzZSBhbGwgY29uc3VtZXJzIG9mIHRoaXMgaXRlcmFibGUgd2lsbCBoYW5nIGluZGVmaW5pdGVseSwgc2ltaWxhciB0byBhIG5vbi1yZXNvbHZlZCBwcm9taXNlLgogICAgICogKipOT1RFKiogSWYgYHJlc29sdmUoKWAgb3IgYHJlamVjdCgpYCBoYXZlIGFscmVhZHkgYmVlbiBjYWxsZWQsIHRoaXMgbWV0aG9kIGhhcyBubyBlZmZlY3QuCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJyZXNvbHZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlKCkgewogICAgICBpZiAodGhpcy5fc3RhdGUgIT09IDAgLyogQXN5bmNJdGVyYWJsZVNvdXJjZVN0YXRlLkluaXRpYWwgKi8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fc3RhdGUgPSAxIC8qIEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZS5Eb25lT0sgKi87CiAgICAgIHRoaXMuX29uU3RhdGVDaGFuZ2VkLmZpcmUoKTsKICAgIH0KICAgIC8qKgogICAgICogV3JpdGluZyBhbiBlcnJvciB3aWxsIHBlcm1hbmVudGx5IGludmFsaWRhdGUgdGhpcyBpdGVyYWJsZS4KICAgICAqIFRoZSBjdXJyZW50IHVzZXJzIHdpbGwgcmVjZWl2ZSBhbiBlcnJvciB0aHJvd24sIGFzIHdpbGwgYWxsIGZ1dHVyZSB1c2Vycy4KICAgICAqCiAgICAgKiAqKk5PVEUqKiBJZiBgcmVzb2x2ZSgpYCBvciBgcmVqZWN0KClgIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCwgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVjdC4KICAgICAqLwogIH0sIHsKICAgIGtleTogInJlamVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVqZWN0KGVycm9yKSB7CiAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gMCAvKiBBc3luY0l0ZXJhYmxlU291cmNlU3RhdGUuSW5pdGlhbCAqLykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9zdGF0ZSA9IDIgLyogQXN5bmNJdGVyYWJsZVNvdXJjZVN0YXRlLkRvbmVFcnJvciAqLzsKICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjsKICAgICAgdGhpcy5fb25TdGF0ZUNoYW5nZWQuZmlyZSgpOwogICAgfQogIH1dLCBbewogICAga2V5OiAiZnJvbUFycmF5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmcm9tQXJyYXkoaXRlbXMpIHsKICAgICAgcmV0dXJuIG5ldyBBc3luY0l0ZXJhYmxlT2JqZWN0KGZ1bmN0aW9uICh3cml0ZXIpIHsKICAgICAgICB3cml0ZXIuZW1pdE1hbnkoaXRlbXMpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmcm9tUHJvbWlzZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZnJvbVByb21pc2UocHJvbWlzZSkgewogICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgQXN5bmNJdGVyYWJsZU9iamVjdChmdW5jdGlvbiAoZW1pdHRlcikgewogICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMxNCwgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IGVtaXR0ZXI7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgICBfY29udGV4dDUudDAuZW1pdE1hbnkuY2FsbChfY29udGV4dDUudDAsIF9jb250ZXh0NS50MSk7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICB9KSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZyb21Qcm9taXNlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZnJvbVByb21pc2VzKHByb21pc2VzKSB7CiAgICAgIHZhciBfdGhpczE1ID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBBc3luY0l0ZXJhYmxlT2JqZWN0KGZ1bmN0aW9uIChlbWl0dGVyKSB7CiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczE1LCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpczE2LCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwID0gZW1pdHRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQxID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDYudDAuZW1pdE9uZS5jYWxsKF9jb250ZXh0Ni50MCwgX2NvbnRleHQ2LnQxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICAgIH0pKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibWVyZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1lcmdlKGl0ZXJhYmxlcykgewogICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgQXN5bmNJdGVyYWJsZU9iamVjdChmdW5jdGlvbiAoZW1pdHRlcikgewogICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMxNywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGl0ZXJhYmxlcy5tYXAoZnVuY3Rpb24gKGl0ZXJhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZXJhYmxlXzEsIGl0ZXJhYmxlXzFfMTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzMTgsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZV8xLCBfYSwgaXRlbTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmFibGVfMSA9IF9fYXN5bmNWYWx1ZXMoaXRlcmFibGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVyYWJsZV8xLm5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmFibGVfMV8xID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVyYWJsZV8xXzEuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IGl0ZXJhYmxlXzFfMS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0T25lKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDEyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgudDAgPSBfY29udGV4dDhbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQ4LnQwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDE1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDE2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpdGVyYWJsZV8xXzEgJiYgIWl0ZXJhYmxlXzFfMS5kb25lICYmIChfYSA9IGl0ZXJhYmxlXzEucmV0dXJuKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYS5jYWxsKGl0ZXJhYmxlXzEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlXzEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVfMS5lcnJvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguZmluaXNoKDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguZmluaXNoKDE1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4LCBudWxsLCBbWzAsIDEyLCAxNSwgMjVdLCBbMTYsLCAyMCwgMjRdXSk7CiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgICB9KSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm1hcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwKGl0ZXJhYmxlLCBtYXBGbikgewogICAgICB2YXIgX3RoaXMxOSA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgQXN5bmNJdGVyYWJsZU9iamVjdChmdW5jdGlvbiAoZW1pdHRlcikgewogICAgICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMxOSwgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgICB2YXIgZV8yLCBfYSwgaXRlcmFibGVfMiwgaXRlcmFibGVfMl8xLCBpdGVtOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDA7CiAgICAgICAgICAgICAgICAgIGl0ZXJhYmxlXzIgPSBfX2FzeW5jVmFsdWVzKGl0ZXJhYmxlKTsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhYmxlXzIubmV4dCgpOwogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICBpdGVyYWJsZV8yXzEgPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICAgICAgICAgIGlmIChpdGVyYWJsZV8yXzEuZG9uZSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVyYWJsZV8yXzEudmFsdWU7CiAgICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdE9uZShtYXBGbihpdGVtKSk7CiAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSBfY29udGV4dDEwWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICBlXzIgPSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MTAudDAKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDE1OwogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAxNjsKICAgICAgICAgICAgICAgICAgaWYgKCEoaXRlcmFibGVfMl8xICYmICFpdGVyYWJsZV8yXzEuZG9uZSAmJiAoX2EgPSBpdGVyYWJsZV8yLnJldHVybikpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYS5jYWxsKGl0ZXJhYmxlXzIpOwogICAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gMjA7CiAgICAgICAgICAgICAgICAgIGlmICghZV8yKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhyb3cgZV8yLmVycm9yOwogICAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuZmluaXNoKDIwKTsKICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmZpbmlzaCgxNSk7CiAgICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTEwLCBudWxsLCBbWzAsIDEyLCAxNSwgMjVdLCBbMTYsLCAyMCwgMjRdXSk7CiAgICAgICAgfSkpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWx0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlcihpdGVyYWJsZSwgZmlsdGVyRm4pIHsKICAgICAgdmFyIF90aGlzMjAgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IEFzeW5jSXRlcmFibGVPYmplY3QoZnVuY3Rpb24gKGVtaXR0ZXIpIHsKICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzMjAsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgICAgdmFyIGVfMywgX2EsIGl0ZXJhYmxlXzMsIGl0ZXJhYmxlXzNfMSwgaXRlbTsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDExLnByZXYgPSAwOwogICAgICAgICAgICAgICAgICBpdGVyYWJsZV8zID0gX19hc3luY1ZhbHVlcyhpdGVyYWJsZSk7CiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVyYWJsZV8zLm5leHQoKTsKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgaXRlcmFibGVfM18xID0gX2NvbnRleHQxMS5zZW50OwogICAgICAgICAgICAgICAgICBpZiAoaXRlcmFibGVfM18xLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpdGVtID0gaXRlcmFibGVfM18xLnZhbHVlOwogICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyRm4oaXRlbSkpIHsKICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmVtaXRPbmUoaXRlbSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICBfY29udGV4dDExLnByZXYgPSAxMjsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS50MCA9IF9jb250ZXh0MTFbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICAgIGVfMyA9IHsKICAgICAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQxMS50MAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5wcmV2ID0gMTU7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEucHJldiA9IDE2OwogICAgICAgICAgICAgICAgICBpZiAoIShpdGVyYWJsZV8zXzEgJiYgIWl0ZXJhYmxlXzNfMS5kb25lICYmIChfYSA9IGl0ZXJhYmxlXzMucmV0dXJuKSkpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hLmNhbGwoaXRlcmFibGVfMyk7CiAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDExLnByZXYgPSAyMDsKICAgICAgICAgICAgICAgICAgaWYgKCFlXzMpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aHJvdyBlXzMuZXJyb3I7CiAgICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5maW5pc2goMjApOwogICAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuZmluaXNoKDE1KTsKICAgICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMTEsIG51bGwsIFtbMCwgMTIsIDE1LCAyNV0sIFsxNiwsIDIwLCAyNF1dKTsKICAgICAgICB9KSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvYWxlc2NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb2FsZXNjZShpdGVyYWJsZSkgewogICAgICByZXR1cm4gQXN5bmNJdGVyYWJsZU9iamVjdC5maWx0ZXIoaXRlcmFibGUsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuICEhaXRlbTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9Qcm9taXNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b1Byb21pc2UoaXRlcmFibGUpIHsKICAgICAgdmFyIGl0ZXJhYmxlXzQsIGl0ZXJhYmxlXzRfMTsKICAgICAgdmFyIGVfNCwgX2E7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgdmFyIHJlc3VsdCwgaXRlbTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIGl0ZXJhYmxlXzQgPSBfX2FzeW5jVmFsdWVzKGl0ZXJhYmxlKTsKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhYmxlXzQubmV4dCgpOwogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGl0ZXJhYmxlXzRfMSA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgIGlmIChpdGVyYWJsZV80XzEuZG9uZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpdGVtID0gaXRlcmFibGVfNF8xLnZhbHVlOwogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAxMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIudDAgPSBfY29udGV4dDEyWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgZV80ID0gewogICAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQxMi50MAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMTY7CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAxNzsKICAgICAgICAgICAgICAgIGlmICghKGl0ZXJhYmxlXzRfMSAmJiAhaXRlcmFibGVfNF8xLmRvbmUgJiYgKF9hID0gaXRlcmFibGVfNC5yZXR1cm4pKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiBfYS5jYWxsKGl0ZXJhYmxlXzQpOwogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAyMTsKICAgICAgICAgICAgICAgIGlmICghZV80KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRocm93IGVfNC5lcnJvcjsKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuZmluaXNoKDIxKTsKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuZmluaXNoKDE2KTsKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMiwgbnVsbCwgW1sxLCAxMywgMTYsIDI2XSwgWzE3LCwgMjEsIDI1XV0pOwogICAgICB9KSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBBc3luY0l0ZXJhYmxlT2JqZWN0Owp9KFN5bWJvbC5hc3luY0l0ZXJhdG9yKTsKQXN5bmNJdGVyYWJsZU9iamVjdC5FTVBUWSA9IEFzeW5jSXRlcmFibGVPYmplY3QuZnJvbUFycmF5KFtdKTsKZXhwb3J0IHZhciBDYW5jZWxhYmxlQXN5bmNJdGVyYWJsZU9iamVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0FzeW5jSXRlcmFibGVPYmplY3QpIHsKICBfaW5oZXJpdHMoQ2FuY2VsYWJsZUFzeW5jSXRlcmFibGVPYmplY3QsIF9Bc3luY0l0ZXJhYmxlT2JqZWN0KTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKENhbmNlbGFibGVBc3luY0l0ZXJhYmxlT2JqZWN0KTsKICBmdW5jdGlvbiBDYW5jZWxhYmxlQXN5bmNJdGVyYWJsZU9iamVjdChfc291cmNlLCBleGVjdXRvcikgewogICAgdmFyIF90aGlzMjE7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FuY2VsYWJsZUFzeW5jSXRlcmFibGVPYmplY3QpOwogICAgX3RoaXMyMSA9IF9zdXBlci5jYWxsKHRoaXMsIGV4ZWN1dG9yKTsKICAgIF90aGlzMjEuX3NvdXJjZSA9IF9zb3VyY2U7CiAgICByZXR1cm4gX3RoaXMyMTsKICB9CiAgX2NyZWF0ZUNsYXNzKENhbmNlbGFibGVBc3luY0l0ZXJhYmxlT2JqZWN0LCBbewogICAga2V5OiAiY2FuY2VsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMuX3NvdXJjZS5jYW5jZWwoKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIENhbmNlbGFibGVBc3luY0l0ZXJhYmxlT2JqZWN0Owp9KEFzeW5jSXRlcmFibGVPYmplY3QpOwpleHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FuY2VsYWJsZUFzeW5jSXRlcmFibGUoY2FsbGJhY2spIHsKICB2YXIgX3RoaXMyMiA9IHRoaXM7CiAgdmFyIHNvdXJjZSA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpOwogIHZhciBpbm5lckl0ZXJhYmxlID0gY2FsbGJhY2soc291cmNlLnRva2VuKTsKICByZXR1cm4gbmV3IENhbmNlbGFibGVBc3luY0l0ZXJhYmxlT2JqZWN0KHNvdXJjZSwgZnVuY3Rpb24gKGVtaXR0ZXIpIHsKICAgIHJldHVybiBfX2F3YWl0ZXIoX3RoaXMyMiwgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoKSB7CiAgICAgIHZhciBlXzUsIF9hLCBzdWJzY3JpcHRpb24sIGlubmVySXRlcmFibGVfMSwgaW5uZXJJdGVyYWJsZV8xXzEsIGl0ZW07CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS50b2tlbi5vbkNhbmNlbGxhdGlvblJlcXVlc3RlZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24uZGlzcG9zZSgpOwogICAgICAgICAgICAgICAgc291cmNlLmRpc3Bvc2UoKTsKICAgICAgICAgICAgICAgIGVtaXR0ZXIucmVqZWN0KG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSAxOwogICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDI7CiAgICAgICAgICAgICAgaW5uZXJJdGVyYWJsZV8xID0gX19hc3luY1ZhbHVlcyhpbm5lckl0ZXJhYmxlKTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGlubmVySXRlcmFibGVfMS5uZXh0KCk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBpbm5lckl0ZXJhYmxlXzFfMSA9IF9jb250ZXh0MTMuc2VudDsKICAgICAgICAgICAgICBpZiAoaW5uZXJJdGVyYWJsZV8xXzEuZG9uZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaXRlbSA9IGlubmVySXRlcmFibGVfMV8xLnZhbHVlOwogICAgICAgICAgICAgIGlmICghc291cmNlLnRva2VuLmlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdE9uZShpdGVtKTsKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDE5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDE2OwogICAgICAgICAgICAgIF9jb250ZXh0MTMudDAgPSBfY29udGV4dDEzWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIGVfNSA9IHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDEzLnQwCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSAxOTsKICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSAyMDsKICAgICAgICAgICAgICBpZiAoIShpbm5lckl0ZXJhYmxlXzFfMSAmJiAhaW5uZXJJdGVyYWJsZV8xXzEuZG9uZSAmJiAoX2EgPSBpbm5lckl0ZXJhYmxlXzEucmV0dXJuKSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDI0OwogICAgICAgICAgICAgIHJldHVybiBfYS5jYWxsKGlubmVySXRlcmFibGVfMSk7CiAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMjQ7CiAgICAgICAgICAgICAgaWYgKCFlXzUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IGVfNS5lcnJvcjsKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5maW5pc2goMjQpOwogICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmZpbmlzaCgxOSk7CiAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTsKICAgICAgICAgICAgICBzb3VyY2UuZGlzcG9zZSgpOwogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDM4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDMzOwogICAgICAgICAgICAgIF9jb250ZXh0MTMudDEgPSBfY29udGV4dDEzWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7CiAgICAgICAgICAgICAgc291cmNlLmRpc3Bvc2UoKTsKICAgICAgICAgICAgICBlbWl0dGVyLnJlamVjdChfY29udGV4dDEzLnQxKTsKICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTMsIG51bGwsIFtbMSwgMzNdLCBbMiwgMTYsIDE5LCAyOV0sIFsyMCwsIDI0LCAyOF1dKTsKICAgIH0pKTsKICB9KTsKfQovLyNlbmRyZWdpb24="},{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__asyncValues","o","Symbol","asyncIterator","TypeError","m","i","call","__values","iterator","verb","n","v","settle","d","CancellationTokenSource","CancellationError","Emitter","Event","toDisposable","setTimeout0","isThenable","obj","createCancelablePromise","callback","source","thenable","token","promise","subscription","onCancellationRequested","dispose","err","cancel","undefined","onfinally","finally","raceCancellation","defaultValue","ref","Throttler","activePromise","queuedPromise","queuedPromiseFactory","promiseFactory","onComplete","queue","timeoutDeferred","timeout","fn","scheduled","handle","setTimeout","isTriggered","clearTimeout","microtaskDeferred","queueMicrotask","MicrotaskDelay","Delayer","defaultDelay","deferred","completionPromise","doResolve","doReject","task","delay","cancelTimeout","_a","ThrottledDelayer","delayer","throttler","trigger","millis","disposable","disposableTimeout","handler","timer","first","promiseFactories","shouldStop","t","index","len","length","loop","factory","TimeoutTimer","runner","_token","setIfNotSet","IntervalTimer","clearInterval","interval","setInterval","RunOnceScheduler","timeoutToken","timeoutHandler","onTimeout","bind","isScheduled","doRun","runWhenIdle","requestIdleCallback","cancelIdleCallback","disposed","end","Date","now","Object","freeze","didTimeout","timeRemaining","Math","max","IdleValue","executor","_didRun","_executor","_value","_error","_handle","DeferredPromise","resolved","p","c","completeCallback","errorCallback","Promises","settled","promises","firstError","all","map","error","withAsyncBody","bodyFn","AsyncIterableObject","_state","_results","_onStateChanged","writer","emitOne","item","emitMany","items","toPromise","event","mapFn","filterFn","filter","coalesce","push","fire","values","concat","emitter","iterables","iterable","iterable_1","iterable_1_1","e_1","return","iterable_2","iterable_2_1","e_2","iterable_3","iterable_3_1","e_3","iterable_4","iterable_4_1","e_4","EMPTY","fromArray","CancelableAsyncIterableObject","_source","createCancelableAsyncIterable","innerIterable","innerIterable_1","innerIterable_1_1","isCancellationRequested","e_5"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/common/async.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { CancellationTokenSource } from './cancellation.js';\nimport { CancellationError } from './errors.js';\nimport { Emitter, Event } from './event.js';\nimport { toDisposable } from './lifecycle.js';\nimport { setTimeout0 } from './platform.js';\nexport function isThenable(obj) {\n    return !!obj && typeof obj.then === 'function';\n}\nexport function createCancelablePromise(callback) {\n    const source = new CancellationTokenSource();\n    const thenable = callback(source.token);\n    const promise = new Promise((resolve, reject) => {\n        const subscription = source.token.onCancellationRequested(() => {\n            subscription.dispose();\n            source.dispose();\n            reject(new CancellationError());\n        });\n        Promise.resolve(thenable).then(value => {\n            subscription.dispose();\n            source.dispose();\n            resolve(value);\n        }, err => {\n            subscription.dispose();\n            source.dispose();\n            reject(err);\n        });\n    });\n    return new class {\n        cancel() {\n            source.cancel();\n        }\n        then(resolve, reject) {\n            return promise.then(resolve, reject);\n        }\n        catch(reject) {\n            return this.then(undefined, reject);\n        }\n        finally(onfinally) {\n            return promise.finally(onfinally);\n        }\n    };\n}\nexport function raceCancellation(promise, token, defaultValue) {\n    return new Promise((resolve, reject) => {\n        const ref = token.onCancellationRequested(() => {\n            ref.dispose();\n            resolve(defaultValue);\n        });\n        promise.then(resolve, reject).finally(() => ref.dispose());\n    });\n}\n/**\n * A helper to prevent accumulation of sequential async tasks.\n *\n * Imagine a mail man with the sole task of delivering letters. As soon as\n * a letter submitted for delivery, he drives to the destination, delivers it\n * and returns to his base. Imagine that during the trip, N more letters were submitted.\n * When the mail man returns, he picks those N letters and delivers them all in a\n * single trip. Even though N+1 submissions occurred, only 2 deliveries were made.\n *\n * The throttler implements this via the queue() method, by providing it a task\n * factory. Following the example:\n *\n * \t\tconst throttler = new Throttler();\n * \t\tconst letters = [];\n *\n * \t\tfunction deliver() {\n * \t\t\tconst lettersToDeliver = letters;\n * \t\t\tletters = [];\n * \t\t\treturn makeTheTrip(lettersToDeliver);\n * \t\t}\n *\n * \t\tfunction onLetterReceived(l) {\n * \t\t\tletters.push(l);\n * \t\t\tthrottler.queue(deliver);\n * \t\t}\n */\nexport class Throttler {\n    constructor() {\n        this.activePromise = null;\n        this.queuedPromise = null;\n        this.queuedPromiseFactory = null;\n    }\n    queue(promiseFactory) {\n        if (this.activePromise) {\n            this.queuedPromiseFactory = promiseFactory;\n            if (!this.queuedPromise) {\n                const onComplete = () => {\n                    this.queuedPromise = null;\n                    const result = this.queue(this.queuedPromiseFactory);\n                    this.queuedPromiseFactory = null;\n                    return result;\n                };\n                this.queuedPromise = new Promise(resolve => {\n                    this.activePromise.then(onComplete, onComplete).then(resolve);\n                });\n            }\n            return new Promise((resolve, reject) => {\n                this.queuedPromise.then(resolve, reject);\n            });\n        }\n        this.activePromise = promiseFactory();\n        return new Promise((resolve, reject) => {\n            this.activePromise.then((result) => {\n                this.activePromise = null;\n                resolve(result);\n            }, (err) => {\n                this.activePromise = null;\n                reject(err);\n            });\n        });\n    }\n}\nconst timeoutDeferred = (timeout, fn) => {\n    let scheduled = true;\n    const handle = setTimeout(() => {\n        scheduled = false;\n        fn();\n    }, timeout);\n    return {\n        isTriggered: () => scheduled,\n        dispose: () => {\n            clearTimeout(handle);\n            scheduled = false;\n        },\n    };\n};\nconst microtaskDeferred = (fn) => {\n    let scheduled = true;\n    queueMicrotask(() => {\n        if (scheduled) {\n            scheduled = false;\n            fn();\n        }\n    });\n    return {\n        isTriggered: () => scheduled,\n        dispose: () => { scheduled = false; },\n    };\n};\n/** Can be passed into the Delayed to defer using a microtask */\nexport const MicrotaskDelay = Symbol('MicrotaskDelay');\n/**\n * A helper to delay (debounce) execution of a task that is being requested often.\n *\n * Following the throttler, now imagine the mail man wants to optimize the number of\n * trips proactively. The trip itself can be long, so he decides not to make the trip\n * as soon as a letter is submitted. Instead he waits a while, in case more\n * letters are submitted. After said waiting period, if no letters were submitted, he\n * decides to make the trip. Imagine that N more letters were submitted after the first\n * one, all within a short period of time between each other. Even though N+1\n * submissions occurred, only 1 delivery was made.\n *\n * The delayer offers this behavior via the trigger() method, into which both the task\n * to be executed and the waiting period (delay) must be passed in as arguments. Following\n * the example:\n *\n * \t\tconst delayer = new Delayer(WAITING_PERIOD);\n * \t\tconst letters = [];\n *\n * \t\tfunction letterReceived(l) {\n * \t\t\tletters.push(l);\n * \t\t\tdelayer.trigger(() => { return makeTheTrip(); });\n * \t\t}\n */\nexport class Delayer {\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.deferred = null;\n        this.completionPromise = null;\n        this.doResolve = null;\n        this.doReject = null;\n        this.task = null;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        this.cancelTimeout();\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve, reject) => {\n                this.doResolve = resolve;\n                this.doReject = reject;\n            }).then(() => {\n                this.completionPromise = null;\n                this.doResolve = null;\n                if (this.task) {\n                    const task = this.task;\n                    this.task = null;\n                    return task();\n                }\n                return undefined;\n            });\n        }\n        const fn = () => {\n            var _a;\n            this.deferred = null;\n            (_a = this.doResolve) === null || _a === void 0 ? void 0 : _a.call(this, null);\n        };\n        this.deferred = delay === MicrotaskDelay ? microtaskDeferred(fn) : timeoutDeferred(delay, fn);\n        return this.completionPromise;\n    }\n    isTriggered() {\n        var _a;\n        return !!((_a = this.deferred) === null || _a === void 0 ? void 0 : _a.isTriggered());\n    }\n    cancel() {\n        var _a;\n        this.cancelTimeout();\n        if (this.completionPromise) {\n            (_a = this.doReject) === null || _a === void 0 ? void 0 : _a.call(this, new CancellationError());\n            this.completionPromise = null;\n        }\n    }\n    cancelTimeout() {\n        var _a;\n        (_a = this.deferred) === null || _a === void 0 ? void 0 : _a.dispose();\n        this.deferred = null;\n    }\n    dispose() {\n        this.cancel();\n    }\n}\n/**\n * A helper to delay execution of a task that is being requested often, while\n * preventing accumulation of consecutive executions, while the task runs.\n *\n * The mail man is clever and waits for a certain amount of time, before going\n * out to deliver letters. While the mail man is going out, more letters arrive\n * and can only be delivered once he is back. Once he is back the mail man will\n * do one more trip to deliver the letters that have accumulated while he was out.\n */\nexport class ThrottledDelayer {\n    constructor(defaultDelay) {\n        this.delayer = new Delayer(defaultDelay);\n        this.throttler = new Throttler();\n    }\n    trigger(promiseFactory, delay) {\n        return this.delayer.trigger(() => this.throttler.queue(promiseFactory), delay);\n    }\n    dispose() {\n        this.delayer.dispose();\n    }\n}\nexport function timeout(millis, token) {\n    if (!token) {\n        return createCancelablePromise(token => timeout(millis, token));\n    }\n    return new Promise((resolve, reject) => {\n        const handle = setTimeout(() => {\n            disposable.dispose();\n            resolve();\n        }, millis);\n        const disposable = token.onCancellationRequested(() => {\n            clearTimeout(handle);\n            disposable.dispose();\n            reject(new CancellationError());\n        });\n    });\n}\nexport function disposableTimeout(handler, timeout = 0) {\n    const timer = setTimeout(handler, timeout);\n    return toDisposable(() => clearTimeout(timer));\n}\nexport function first(promiseFactories, shouldStop = t => !!t, defaultValue = null) {\n    let index = 0;\n    const len = promiseFactories.length;\n    const loop = () => {\n        if (index >= len) {\n            return Promise.resolve(defaultValue);\n        }\n        const factory = promiseFactories[index++];\n        const promise = Promise.resolve(factory());\n        return promise.then(result => {\n            if (shouldStop(result)) {\n                return Promise.resolve(result);\n            }\n            return loop();\n        });\n    };\n    return loop();\n}\nexport class TimeoutTimer {\n    constructor(runner, timeout) {\n        this._token = -1;\n        if (typeof runner === 'function' && typeof timeout === 'number') {\n            this.setIfNotSet(runner, timeout);\n        }\n    }\n    dispose() {\n        this.cancel();\n    }\n    cancel() {\n        if (this._token !== -1) {\n            clearTimeout(this._token);\n            this._token = -1;\n        }\n    }\n    cancelAndSet(runner, timeout) {\n        this.cancel();\n        this._token = setTimeout(() => {\n            this._token = -1;\n            runner();\n        }, timeout);\n    }\n    setIfNotSet(runner, timeout) {\n        if (this._token !== -1) {\n            // timer is already set\n            return;\n        }\n        this._token = setTimeout(() => {\n            this._token = -1;\n            runner();\n        }, timeout);\n    }\n}\nexport class IntervalTimer {\n    constructor() {\n        this._token = -1;\n    }\n    dispose() {\n        this.cancel();\n    }\n    cancel() {\n        if (this._token !== -1) {\n            clearInterval(this._token);\n            this._token = -1;\n        }\n    }\n    cancelAndSet(runner, interval) {\n        this.cancel();\n        this._token = setInterval(() => {\n            runner();\n        }, interval);\n    }\n}\nexport class RunOnceScheduler {\n    constructor(runner, delay) {\n        this.timeoutToken = -1;\n        this.runner = runner;\n        this.timeout = delay;\n        this.timeoutHandler = this.onTimeout.bind(this);\n    }\n    /**\n     * Dispose RunOnceScheduler\n     */\n    dispose() {\n        this.cancel();\n        this.runner = null;\n    }\n    /**\n     * Cancel current scheduled runner (if any).\n     */\n    cancel() {\n        if (this.isScheduled()) {\n            clearTimeout(this.timeoutToken);\n            this.timeoutToken = -1;\n        }\n    }\n    /**\n     * Cancel previous runner (if any) & schedule a new runner.\n     */\n    schedule(delay = this.timeout) {\n        this.cancel();\n        this.timeoutToken = setTimeout(this.timeoutHandler, delay);\n    }\n    get delay() {\n        return this.timeout;\n    }\n    set delay(value) {\n        this.timeout = value;\n    }\n    /**\n     * Returns true if scheduled.\n     */\n    isScheduled() {\n        return this.timeoutToken !== -1;\n    }\n    onTimeout() {\n        this.timeoutToken = -1;\n        if (this.runner) {\n            this.doRun();\n        }\n    }\n    doRun() {\n        var _a;\n        (_a = this.runner) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n}\n/**\n * Execute the callback the next time the browser is idle\n */\nexport let runWhenIdle;\n(function () {\n    if (typeof requestIdleCallback !== 'function' || typeof cancelIdleCallback !== 'function') {\n        runWhenIdle = (runner) => {\n            setTimeout0(() => {\n                if (disposed) {\n                    return;\n                }\n                const end = Date.now() + 15; // one frame at 64fps\n                runner(Object.freeze({\n                    didTimeout: true,\n                    timeRemaining() {\n                        return Math.max(0, end - Date.now());\n                    }\n                }));\n            });\n            let disposed = false;\n            return {\n                dispose() {\n                    if (disposed) {\n                        return;\n                    }\n                    disposed = true;\n                }\n            };\n        };\n    }\n    else {\n        runWhenIdle = (runner, timeout) => {\n            const handle = requestIdleCallback(runner, typeof timeout === 'number' ? { timeout } : undefined);\n            let disposed = false;\n            return {\n                dispose() {\n                    if (disposed) {\n                        return;\n                    }\n                    disposed = true;\n                    cancelIdleCallback(handle);\n                }\n            };\n        };\n    }\n})();\n/**\n * An implementation of the \"idle-until-urgent\"-strategy as introduced\n * here: https://philipwalton.com/articles/idle-until-urgent/\n */\nexport class IdleValue {\n    constructor(executor) {\n        this._didRun = false;\n        this._executor = () => {\n            try {\n                this._value = executor();\n            }\n            catch (err) {\n                this._error = err;\n            }\n            finally {\n                this._didRun = true;\n            }\n        };\n        this._handle = runWhenIdle(() => this._executor());\n    }\n    dispose() {\n        this._handle.dispose();\n    }\n    get value() {\n        if (!this._didRun) {\n            this._handle.dispose();\n            this._executor();\n        }\n        if (this._error) {\n            throw this._error;\n        }\n        return this._value;\n    }\n    get isInitialized() {\n        return this._didRun;\n    }\n}\n/**\n * Creates a promise whose resolution or rejection can be controlled imperatively.\n */\nexport class DeferredPromise {\n    constructor() {\n        this.rejected = false;\n        this.resolved = false;\n        this.p = new Promise((c, e) => {\n            this.completeCallback = c;\n            this.errorCallback = e;\n        });\n    }\n    get isRejected() {\n        return this.rejected;\n    }\n    get isSettled() {\n        return this.rejected || this.resolved;\n    }\n    complete(value) {\n        return new Promise(resolve => {\n            this.completeCallback(value);\n            this.resolved = true;\n            resolve();\n        });\n    }\n    cancel() {\n        new Promise(resolve => {\n            this.errorCallback(new CancellationError());\n            this.rejected = true;\n            resolve();\n        });\n    }\n}\n//#endregion\n//#region Promises\nexport var Promises;\n(function (Promises) {\n    /**\n     * A drop-in replacement for `Promise.all` with the only difference\n     * that the method awaits every promise to either fulfill or reject.\n     *\n     * Similar to `Promise.all`, only the first error will be returned\n     * if any.\n     */\n    function settled(promises) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let firstError = undefined;\n            const result = yield Promise.all(promises.map(promise => promise.then(value => value, error => {\n                if (!firstError) {\n                    firstError = error;\n                }\n                return undefined; // do not rethrow so that other promises can settle\n            })));\n            if (typeof firstError !== 'undefined') {\n                throw firstError;\n            }\n            return result; // cast is needed and protected by the `throw` above\n        });\n    }\n    Promises.settled = settled;\n    /**\n     * A helper to create a new `Promise<T>` with a body that is a promise\n     * itself. By default, an error that raises from the async body will\n     * end up as a unhandled rejection, so this utility properly awaits the\n     * body and rejects the promise as a normal promise does without async\n     * body.\n     *\n     * This method should only be used in rare cases where otherwise `async`\n     * cannot be used (e.g. when callbacks are involved that require this).\n     */\n    function withAsyncBody(bodyFn) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield bodyFn(resolve, reject);\n            }\n            catch (error) {\n                reject(error);\n            }\n        }));\n    }\n    Promises.withAsyncBody = withAsyncBody;\n})(Promises || (Promises = {}));\n/**\n * A rich implementation for an `AsyncIterable<T>`.\n */\nexport class AsyncIterableObject {\n    constructor(executor) {\n        this._state = 0 /* AsyncIterableSourceState.Initial */;\n        this._results = [];\n        this._error = null;\n        this._onStateChanged = new Emitter();\n        queueMicrotask(() => __awaiter(this, void 0, void 0, function* () {\n            const writer = {\n                emitOne: (item) => this.emitOne(item),\n                emitMany: (items) => this.emitMany(items),\n                reject: (error) => this.reject(error)\n            };\n            try {\n                yield Promise.resolve(executor(writer));\n                this.resolve();\n            }\n            catch (err) {\n                this.reject(err);\n            }\n            finally {\n                writer.emitOne = undefined;\n                writer.emitMany = undefined;\n                writer.reject = undefined;\n            }\n        }));\n    }\n    static fromArray(items) {\n        return new AsyncIterableObject((writer) => {\n            writer.emitMany(items);\n        });\n    }\n    static fromPromise(promise) {\n        return new AsyncIterableObject((emitter) => __awaiter(this, void 0, void 0, function* () {\n            emitter.emitMany(yield promise);\n        }));\n    }\n    static fromPromises(promises) {\n        return new AsyncIterableObject((emitter) => __awaiter(this, void 0, void 0, function* () {\n            yield Promise.all(promises.map((p) => __awaiter(this, void 0, void 0, function* () { return emitter.emitOne(yield p); })));\n        }));\n    }\n    static merge(iterables) {\n        return new AsyncIterableObject((emitter) => __awaiter(this, void 0, void 0, function* () {\n            yield Promise.all(iterables.map((iterable) => { var iterable_1, iterable_1_1; return __awaiter(this, void 0, void 0, function* () {\n                var e_1, _a;\n                try {\n                    for (iterable_1 = __asyncValues(iterable); iterable_1_1 = yield iterable_1.next(), !iterable_1_1.done;) {\n                        const item = iterable_1_1.value;\n                        emitter.emitOne(item);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) yield _a.call(iterable_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }); }));\n        }));\n    }\n    [Symbol.asyncIterator]() {\n        let i = 0;\n        return {\n            next: () => __awaiter(this, void 0, void 0, function* () {\n                do {\n                    if (this._state === 2 /* AsyncIterableSourceState.DoneError */) {\n                        throw this._error;\n                    }\n                    if (i < this._results.length) {\n                        return { done: false, value: this._results[i++] };\n                    }\n                    if (this._state === 1 /* AsyncIterableSourceState.DoneOK */) {\n                        return { done: true, value: undefined };\n                    }\n                    yield Event.toPromise(this._onStateChanged.event);\n                } while (true);\n            })\n        };\n    }\n    static map(iterable, mapFn) {\n        return new AsyncIterableObject((emitter) => __awaiter(this, void 0, void 0, function* () {\n            var e_2, _a;\n            try {\n                for (var iterable_2 = __asyncValues(iterable), iterable_2_1; iterable_2_1 = yield iterable_2.next(), !iterable_2_1.done;) {\n                    const item = iterable_2_1.value;\n                    emitter.emitOne(mapFn(item));\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (iterable_2_1 && !iterable_2_1.done && (_a = iterable_2.return)) yield _a.call(iterable_2);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }));\n    }\n    map(mapFn) {\n        return AsyncIterableObject.map(this, mapFn);\n    }\n    static filter(iterable, filterFn) {\n        return new AsyncIterableObject((emitter) => __awaiter(this, void 0, void 0, function* () {\n            var e_3, _a;\n            try {\n                for (var iterable_3 = __asyncValues(iterable), iterable_3_1; iterable_3_1 = yield iterable_3.next(), !iterable_3_1.done;) {\n                    const item = iterable_3_1.value;\n                    if (filterFn(item)) {\n                        emitter.emitOne(item);\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (iterable_3_1 && !iterable_3_1.done && (_a = iterable_3.return)) yield _a.call(iterable_3);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        }));\n    }\n    filter(filterFn) {\n        return AsyncIterableObject.filter(this, filterFn);\n    }\n    static coalesce(iterable) {\n        return AsyncIterableObject.filter(iterable, item => !!item);\n    }\n    coalesce() {\n        return AsyncIterableObject.coalesce(this);\n    }\n    static toPromise(iterable) {\n        var iterable_4, iterable_4_1;\n        var e_4, _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            try {\n                for (iterable_4 = __asyncValues(iterable); iterable_4_1 = yield iterable_4.next(), !iterable_4_1.done;) {\n                    const item = iterable_4_1.value;\n                    result.push(item);\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (iterable_4_1 && !iterable_4_1.done && (_a = iterable_4.return)) yield _a.call(iterable_4);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            return result;\n        });\n    }\n    toPromise() {\n        return AsyncIterableObject.toPromise(this);\n    }\n    /**\n     * The value will be appended at the end.\n     *\n     * **NOTE** If `resolve()` or `reject()` have already been called, this method has no effect.\n     */\n    emitOne(value) {\n        if (this._state !== 0 /* AsyncIterableSourceState.Initial */) {\n            return;\n        }\n        // it is important to add new values at the end,\n        // as we may have iterators already running on the array\n        this._results.push(value);\n        this._onStateChanged.fire();\n    }\n    /**\n     * The values will be appended at the end.\n     *\n     * **NOTE** If `resolve()` or `reject()` have already been called, this method has no effect.\n     */\n    emitMany(values) {\n        if (this._state !== 0 /* AsyncIterableSourceState.Initial */) {\n            return;\n        }\n        // it is important to add new values at the end,\n        // as we may have iterators already running on the array\n        this._results = this._results.concat(values);\n        this._onStateChanged.fire();\n    }\n    /**\n     * Calling `resolve()` will mark the result array as complete.\n     *\n     * **NOTE** `resolve()` must be called, otherwise all consumers of this iterable will hang indefinitely, similar to a non-resolved promise.\n     * **NOTE** If `resolve()` or `reject()` have already been called, this method has no effect.\n     */\n    resolve() {\n        if (this._state !== 0 /* AsyncIterableSourceState.Initial */) {\n            return;\n        }\n        this._state = 1 /* AsyncIterableSourceState.DoneOK */;\n        this._onStateChanged.fire();\n    }\n    /**\n     * Writing an error will permanently invalidate this iterable.\n     * The current users will receive an error thrown, as will all future users.\n     *\n     * **NOTE** If `resolve()` or `reject()` have already been called, this method has no effect.\n     */\n    reject(error) {\n        if (this._state !== 0 /* AsyncIterableSourceState.Initial */) {\n            return;\n        }\n        this._state = 2 /* AsyncIterableSourceState.DoneError */;\n        this._error = error;\n        this._onStateChanged.fire();\n    }\n}\nAsyncIterableObject.EMPTY = AsyncIterableObject.fromArray([]);\nexport class CancelableAsyncIterableObject extends AsyncIterableObject {\n    constructor(_source, executor) {\n        super(executor);\n        this._source = _source;\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nexport function createCancelableAsyncIterable(callback) {\n    const source = new CancellationTokenSource();\n    const innerIterable = callback(source.token);\n    return new CancelableAsyncIterableObject(source, (emitter) => __awaiter(this, void 0, void 0, function* () {\n        var e_5, _a;\n        const subscription = source.token.onCancellationRequested(() => {\n            subscription.dispose();\n            source.dispose();\n            emitter.reject(new CancellationError());\n        });\n        try {\n            try {\n                for (var innerIterable_1 = __asyncValues(innerIterable), innerIterable_1_1; innerIterable_1_1 = yield innerIterable_1.next(), !innerIterable_1_1.done;) {\n                    const item = innerIterable_1_1.value;\n                    if (source.token.isCancellationRequested) {\n                        // canceled in the meantime\n                        return;\n                    }\n                    emitter.emitOne(item);\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (innerIterable_1_1 && !innerIterable_1_1.done && (_a = innerIterable_1.return)) yield _a.call(innerIterable_1);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n            subscription.dispose();\n            source.dispose();\n        }\n        catch (err) {\n            subscription.dispose();\n            source.dispose();\n            emitter.reject(err);\n        }\n    }));\n}\n//#endregion\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAK,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,SAASC,KAAK,CAACC,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYH,CAAC,GAAGG,KAAK,GAAG,IAAIH,CAAC,CAAC,UAAUI,OAAO,EAAE;MAAEA,OAAO,CAACD,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAO,CAAC,EAAE,UAAUD,OAAO,EAAEE,MAAM,EAAE;IACvD,SAASC,SAAS,CAACJ,KAAK,EAAE;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAACQ,IAAI,CAACN,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOO,CAAC,EAAE;QAAEJ,MAAM,CAACI,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASC,QAAQ,CAACR,KAAK,EAAE;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAAC,OAAO,CAAC,CAACE,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOO,CAAC,EAAE;QAAEJ,MAAM,CAACI,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASF,IAAI,CAACI,MAAM,EAAE;MAAEA,MAAM,CAACC,IAAI,GAAGT,OAAO,CAACQ,MAAM,CAACT,KAAK,CAAC,GAAGD,KAAK,CAACU,MAAM,CAACT,KAAK,CAAC,CAACW,IAAI,CAACP,SAAS,EAAEI,QAAQ,CAAC;IAAE;IAC7GH,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACc,KAAK,CAACjB,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAEU,IAAI,EAAE,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACD,IAAIO,aAAa,GAAI,IAAI,IAAI,IAAI,CAACA,aAAa,IAAK,UAAUC,CAAC,EAAE;EAC7D,IAAI,CAACC,MAAM,CAACC,aAAa,EAAE,MAAM,IAAIC,SAAS,CAAC,sCAAsC,CAAC;EACtF,IAAIC,CAAC,GAAGJ,CAAC,CAACC,MAAM,CAACC,aAAa,CAAC;IAAEG,CAAC;EAClC,OAAOD,CAAC,GAAGA,CAAC,CAACE,IAAI,CAACN,CAAC,CAAC,IAAIA,CAAC,GAAG,OAAOO,QAAQ,KAAK,UAAU,GAAGA,QAAQ,CAACP,CAAC,CAAC,GAAGA,CAAC,CAACC,MAAM,CAACO,QAAQ,CAAC,EAAE,EAAEH,CAAC,GAAG,CAAC,CAAC,EAAEI,IAAI,CAAC,MAAM,CAAC,EAAEA,IAAI,CAAC,OAAO,CAAC,EAAEA,IAAI,CAAC,QAAQ,CAAC,EAAEJ,CAAC,CAACJ,MAAM,CAACC,aAAa,CAAC,GAAG,YAAY;IAAE,OAAO,IAAI;EAAE,CAAC,EAAEG,CAAC,CAAC;EAChN,SAASI,IAAI,CAACC,CAAC,EAAE;IAAEL,CAAC,CAACK,CAAC,CAAC,GAAGV,CAAC,CAACU,CAAC,CAAC,IAAI,UAAUC,CAAC,EAAE;MAAE,OAAO,IAAIvB,OAAO,CAAC,UAAUD,OAAO,EAAEE,MAAM,EAAE;QAAEsB,CAAC,GAAGX,CAAC,CAACU,CAAC,CAAC,CAACC,CAAC,CAAC,EAAEC,MAAM,CAACzB,OAAO,EAAEE,MAAM,EAAEsB,CAAC,CAACf,IAAI,EAAEe,CAAC,CAACzB,KAAK,CAAC;MAAE,CAAC,CAAC;IAAE,CAAC;EAAE;EAC/J,SAAS0B,MAAM,CAACzB,OAAO,EAAEE,MAAM,EAAEwB,CAAC,EAAEF,CAAC,EAAE;IAAEvB,OAAO,CAACD,OAAO,CAACwB,CAAC,CAAC,CAACd,IAAI,CAAC,UAASc,CAAC,EAAE;MAAExB,OAAO,CAAC;QAAED,KAAK,EAAEyB,CAAC;QAAEf,IAAI,EAAEiB;MAAE,CAAC,CAAC;IAAE,CAAC,EAAExB,MAAM,CAAC;EAAE;AAC/H,CAAC;AACD,SAASyB,uBAAuB,QAAQ,mBAAmB;AAC3D,SAASC,iBAAiB,QAAQ,aAAa;AAC/C,SAASC,OAAO,EAAEC,KAAK,QAAQ,YAAY;AAC3C,SAASC,YAAY,QAAQ,gBAAgB;AAC7C,SAASC,WAAW,QAAQ,eAAe;AAC3C,OAAO,SAASC,UAAU,CAACC,GAAG,EAAE;EAC5B,OAAO,CAAC,CAACA,GAAG,IAAI,OAAOA,GAAG,CAACxB,IAAI,KAAK,UAAU;AAClD;AACA,OAAO,SAASyB,uBAAuB,CAACC,QAAQ,EAAE;EAC9C,IAAMC,MAAM,GAAG,IAAIV,uBAAuB,EAAE;EAC5C,IAAMW,QAAQ,GAAGF,QAAQ,CAACC,MAAM,CAACE,KAAK,CAAC;EACvC,IAAMC,OAAO,GAAG,IAAIvC,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM,EAAK;IAC7C,IAAMuC,YAAY,GAAGJ,MAAM,CAACE,KAAK,CAACG,uBAAuB,CAAC,YAAM;MAC5DD,YAAY,CAACE,OAAO,EAAE;MACtBN,MAAM,CAACM,OAAO,EAAE;MAChBzC,MAAM,CAAC,IAAI0B,iBAAiB,EAAE,CAAC;IACnC,CAAC,CAAC;IACF3B,OAAO,CAACD,OAAO,CAACsC,QAAQ,CAAC,CAAC5B,IAAI,CAAC,UAAAX,KAAK,EAAI;MACpC0C,YAAY,CAACE,OAAO,EAAE;MACtBN,MAAM,CAACM,OAAO,EAAE;MAChB3C,OAAO,CAACD,KAAK,CAAC;IAClB,CAAC,EAAE,UAAA6C,GAAG,EAAI;MACNH,YAAY,CAACE,OAAO,EAAE;MACtBN,MAAM,CAACM,OAAO,EAAE;MAChBzC,MAAM,CAAC0C,GAAG,CAAC;IACf,CAAC,CAAC;EACN,CAAC,CAAC;EACF,OAAO;IAAA;MAAA;IAAA;IAAA;MAAA;MAAA,OACH,kBAAS;QACLP,MAAM,CAACQ,MAAM,EAAE;MACnB;IAAC;MAAA;MAAA,OACD,cAAK7C,OAAO,EAAEE,MAAM,EAAE;QAClB,OAAOsC,OAAO,CAAC9B,IAAI,CAACV,OAAO,EAAEE,MAAM,CAAC;MACxC;IAAC;MAAA;MAAA,OACD,gBAAMA,MAAM,EAAE;QACV,OAAO,IAAI,CAACQ,IAAI,CAACoC,SAAS,EAAE5C,MAAM,CAAC;MACvC;IAAC;MAAA;MAAA,OACD,kBAAQ6C,SAAS,EAAE;QACf,OAAOP,OAAO,CAACQ,OAAO,CAACD,SAAS,CAAC;MACrC;IAAC;IAAA;EAAA,MACJ;AACL;AACA,OAAO,SAASE,gBAAgB,CAACT,OAAO,EAAED,KAAK,EAAEW,YAAY,EAAE;EAC3D,OAAO,IAAIjD,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM,EAAK;IACpC,IAAMiD,GAAG,GAAGZ,KAAK,CAACG,uBAAuB,CAAC,YAAM;MAC5CS,GAAG,CAACR,OAAO,EAAE;MACb3C,OAAO,CAACkD,YAAY,CAAC;IACzB,CAAC,CAAC;IACFV,OAAO,CAAC9B,IAAI,CAACV,OAAO,EAAEE,MAAM,CAAC,CAAC8C,OAAO,CAAC;MAAA,OAAMG,GAAG,CAACR,OAAO,EAAE;IAAA,EAAC;EAC9D,CAAC,CAAC;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAaS,SAAS;EAClB,qBAAc;IAAA;IACV,IAAI,CAACC,aAAa,GAAG,IAAI;IACzB,IAAI,CAACC,aAAa,GAAG,IAAI;IACzB,IAAI,CAACC,oBAAoB,GAAG,IAAI;EACpC;EAAC;IAAA;IAAA,OACD,eAAMC,cAAc,EAAE;MAAA;MAClB,IAAI,IAAI,CAACH,aAAa,EAAE;QACpB,IAAI,CAACE,oBAAoB,GAAGC,cAAc;QAC1C,IAAI,CAAC,IAAI,CAACF,aAAa,EAAE;UACrB,IAAMG,UAAU,GAAG,SAAbA,UAAU,GAAS;YACrB,KAAI,CAACH,aAAa,GAAG,IAAI;YACzB,IAAM9C,MAAM,GAAG,KAAI,CAACkD,KAAK,CAAC,KAAI,CAACH,oBAAoB,CAAC;YACpD,KAAI,CAACA,oBAAoB,GAAG,IAAI;YAChC,OAAO/C,MAAM;UACjB,CAAC;UACD,IAAI,CAAC8C,aAAa,GAAG,IAAIrD,OAAO,CAAC,UAAAD,OAAO,EAAI;YACxC,KAAI,CAACqD,aAAa,CAAC3C,IAAI,CAAC+C,UAAU,EAAEA,UAAU,CAAC,CAAC/C,IAAI,CAACV,OAAO,CAAC;UACjE,CAAC,CAAC;QACN;QACA,OAAO,IAAIC,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM,EAAK;UACpC,KAAI,CAACoD,aAAa,CAAC5C,IAAI,CAACV,OAAO,EAAEE,MAAM,CAAC;QAC5C,CAAC,CAAC;MACN;MACA,IAAI,CAACmD,aAAa,GAAGG,cAAc,EAAE;MACrC,OAAO,IAAIvD,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM,EAAK;QACpC,KAAI,CAACmD,aAAa,CAAC3C,IAAI,CAAC,UAACF,MAAM,EAAK;UAChC,KAAI,CAAC6C,aAAa,GAAG,IAAI;UACzBrD,OAAO,CAACQ,MAAM,CAAC;QACnB,CAAC,EAAE,UAACoC,GAAG,EAAK;UACR,KAAI,CAACS,aAAa,GAAG,IAAI;UACzBnD,MAAM,CAAC0C,GAAG,CAAC;QACf,CAAC,CAAC;MACN,CAAC,CAAC;IACN;EAAC;EAAA;AAAA;AAEL,IAAMe,eAAe,GAAG,SAAlBA,eAAe,CAAIC,OAAO,EAAEC,EAAE,EAAK;EACrC,IAAIC,SAAS,GAAG,IAAI;EACpB,IAAMC,MAAM,GAAGC,UAAU,CAAC,YAAM;IAC5BF,SAAS,GAAG,KAAK;IACjBD,EAAE,EAAE;EACR,CAAC,EAAED,OAAO,CAAC;EACX,OAAO;IACHK,WAAW,EAAE;MAAA,OAAMH,SAAS;IAAA;IAC5BnB,OAAO,EAAE,mBAAM;MACXuB,YAAY,CAACH,MAAM,CAAC;MACpBD,SAAS,GAAG,KAAK;IACrB;EACJ,CAAC;AACL,CAAC;AACD,IAAMK,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIN,EAAE,EAAK;EAC9B,IAAIC,SAAS,GAAG,IAAI;EACpBM,cAAc,CAAC,YAAM;IACjB,IAAIN,SAAS,EAAE;MACXA,SAAS,GAAG,KAAK;MACjBD,EAAE,EAAE;IACR;EACJ,CAAC,CAAC;EACF,OAAO;IACHI,WAAW,EAAE;MAAA,OAAMH,SAAS;IAAA;IAC5BnB,OAAO,EAAE,mBAAM;MAAEmB,SAAS,GAAG,KAAK;IAAE;EACxC,CAAC;AACL,CAAC;AACD;AACA,OAAO,IAAMO,cAAc,GAAGvD,MAAM,CAAC,gBAAgB,CAAC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAawD,OAAO;EAChB,iBAAYC,YAAY,EAAE;IAAA;IACtB,IAAI,CAACA,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,iBAAiB,GAAG,IAAI;IAC7B,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,IAAI,GAAG,IAAI;EACpB;EAAC;IAAA;IAAA,OACD,iBAAQA,IAAI,EAA6B;MAAA;MAAA,IAA3BC,KAAK,uEAAG,IAAI,CAACN,YAAY;MACnC,IAAI,CAACK,IAAI,GAAGA,IAAI;MAChB,IAAI,CAACE,aAAa,EAAE;MACpB,IAAI,CAAC,IAAI,CAACL,iBAAiB,EAAE;QACzB,IAAI,CAACA,iBAAiB,GAAG,IAAIxE,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM,EAAK;UACtD,MAAI,CAACwE,SAAS,GAAG1E,OAAO;UACxB,MAAI,CAAC2E,QAAQ,GAAGzE,MAAM;QAC1B,CAAC,CAAC,CAACQ,IAAI,CAAC,YAAM;UACV,MAAI,CAAC+D,iBAAiB,GAAG,IAAI;UAC7B,MAAI,CAACC,SAAS,GAAG,IAAI;UACrB,IAAI,MAAI,CAACE,IAAI,EAAE;YACX,IAAMA,KAAI,GAAG,MAAI,CAACA,IAAI;YACtB,MAAI,CAACA,IAAI,GAAG,IAAI;YAChB,OAAOA,KAAI,EAAE;UACjB;UACA,OAAO9B,SAAS;QACpB,CAAC,CAAC;MACN;MACA,IAAMe,EAAE,GAAG,SAALA,EAAE,GAAS;QACb,IAAIkB,EAAE;QACN,MAAI,CAACP,QAAQ,GAAG,IAAI;QACpB,CAACO,EAAE,GAAG,MAAI,CAACL,SAAS,MAAM,IAAI,IAAIK,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC5D,IAAI,CAAC,MAAI,EAAE,IAAI,CAAC;MAClF,CAAC;MACD,IAAI,CAACqD,QAAQ,GAAGK,KAAK,KAAKR,cAAc,GAAGF,iBAAiB,CAACN,EAAE,CAAC,GAAGF,eAAe,CAACkB,KAAK,EAAEhB,EAAE,CAAC;MAC7F,OAAO,IAAI,CAACY,iBAAiB;IACjC;EAAC;IAAA;IAAA,OACD,uBAAc;MACV,IAAIM,EAAE;MACN,OAAO,CAAC,EAAE,CAACA,EAAE,GAAG,IAAI,CAACP,QAAQ,MAAM,IAAI,IAAIO,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACd,WAAW,EAAE,CAAC;IACzF;EAAC;IAAA;IAAA,OACD,kBAAS;MACL,IAAIc,EAAE;MACN,IAAI,CAACD,aAAa,EAAE;MACpB,IAAI,IAAI,CAACL,iBAAiB,EAAE;QACxB,CAACM,EAAE,GAAG,IAAI,CAACJ,QAAQ,MAAM,IAAI,IAAII,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC5D,IAAI,CAAC,IAAI,EAAE,IAAIS,iBAAiB,EAAE,CAAC;QAChG,IAAI,CAAC6C,iBAAiB,GAAG,IAAI;MACjC;IACJ;EAAC;IAAA;IAAA,OACD,yBAAgB;MACZ,IAAIM,EAAE;MACN,CAACA,EAAE,GAAG,IAAI,CAACP,QAAQ,MAAM,IAAI,IAAIO,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACpC,OAAO,EAAE;MACtE,IAAI,CAAC6B,QAAQ,GAAG,IAAI;IACxB;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,IAAI,CAAC3B,MAAM,EAAE;IACjB;EAAC;EAAA;AAAA;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAamC,gBAAgB;EACzB,0BAAYT,YAAY,EAAE;IAAA;IACtB,IAAI,CAACU,OAAO,GAAG,IAAIX,OAAO,CAACC,YAAY,CAAC;IACxC,IAAI,CAACW,SAAS,GAAG,IAAI9B,SAAS,EAAE;EACpC;EAAC;IAAA;IAAA,OACD,iBAAQI,cAAc,EAAEqB,KAAK,EAAE;MAAA;MAC3B,OAAO,IAAI,CAACI,OAAO,CAACE,OAAO,CAAC;QAAA,OAAM,MAAI,CAACD,SAAS,CAACxB,KAAK,CAACF,cAAc,CAAC;MAAA,GAAEqB,KAAK,CAAC;IAClF;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,IAAI,CAACI,OAAO,CAACtC,OAAO,EAAE;IAC1B;EAAC;EAAA;AAAA;AAEL,OAAO,SAASiB,OAAO,CAACwB,MAAM,EAAE7C,KAAK,EAAE;EACnC,IAAI,CAACA,KAAK,EAAE;IACR,OAAOJ,uBAAuB,CAAC,UAAAI,KAAK;MAAA,OAAIqB,OAAO,CAACwB,MAAM,EAAE7C,KAAK,CAAC;IAAA,EAAC;EACnE;EACA,OAAO,IAAItC,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM,EAAK;IACpC,IAAM6D,MAAM,GAAGC,UAAU,CAAC,YAAM;MAC5BqB,UAAU,CAAC1C,OAAO,EAAE;MACpB3C,OAAO,EAAE;IACb,CAAC,EAAEoF,MAAM,CAAC;IACV,IAAMC,UAAU,GAAG9C,KAAK,CAACG,uBAAuB,CAAC,YAAM;MACnDwB,YAAY,CAACH,MAAM,CAAC;MACpBsB,UAAU,CAAC1C,OAAO,EAAE;MACpBzC,MAAM,CAAC,IAAI0B,iBAAiB,EAAE,CAAC;IACnC,CAAC,CAAC;EACN,CAAC,CAAC;AACN;AACA,OAAO,SAAS0D,iBAAiB,CAACC,OAAO,EAAe;EAAA,IAAb3B,OAAO,uEAAG,CAAC;EAClD,IAAM4B,KAAK,GAAGxB,UAAU,CAACuB,OAAO,EAAE3B,OAAO,CAAC;EAC1C,OAAO7B,YAAY,CAAC;IAAA,OAAMmC,YAAY,CAACsB,KAAK,CAAC;EAAA,EAAC;AAClD;AACA,OAAO,SAASC,KAAK,CAACC,gBAAgB,EAA8C;EAAA,IAA5CC,UAAU,uEAAG,UAAAC,CAAC;IAAA,OAAI,CAAC,CAACA,CAAC;EAAA;EAAA,IAAE1C,YAAY,uEAAG,IAAI;EAC9E,IAAI2C,KAAK,GAAG,CAAC;EACb,IAAMC,GAAG,GAAGJ,gBAAgB,CAACK,MAAM;EACnC,IAAMC,IAAI,GAAG,SAAPA,IAAI,GAAS;IACf,IAAIH,KAAK,IAAIC,GAAG,EAAE;MACd,OAAO7F,OAAO,CAACD,OAAO,CAACkD,YAAY,CAAC;IACxC;IACA,IAAM+C,OAAO,GAAGP,gBAAgB,CAACG,KAAK,EAAE,CAAC;IACzC,IAAMrD,OAAO,GAAGvC,OAAO,CAACD,OAAO,CAACiG,OAAO,EAAE,CAAC;IAC1C,OAAOzD,OAAO,CAAC9B,IAAI,CAAC,UAAAF,MAAM,EAAI;MAC1B,IAAImF,UAAU,CAACnF,MAAM,CAAC,EAAE;QACpB,OAAOP,OAAO,CAACD,OAAO,CAACQ,MAAM,CAAC;MAClC;MACA,OAAOwF,IAAI,EAAE;IACjB,CAAC,CAAC;EACN,CAAC;EACD,OAAOA,IAAI,EAAE;AACjB;AACA,WAAaE,YAAY;EACrB,sBAAYC,MAAM,EAAEvC,OAAO,EAAE;IAAA;IACzB,IAAI,CAACwC,MAAM,GAAG,CAAC,CAAC;IAChB,IAAI,OAAOD,MAAM,KAAK,UAAU,IAAI,OAAOvC,OAAO,KAAK,QAAQ,EAAE;MAC7D,IAAI,CAACyC,WAAW,CAACF,MAAM,EAAEvC,OAAO,CAAC;IACrC;EACJ;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,IAAI,CAACf,MAAM,EAAE;IACjB;EAAC;IAAA;IAAA,OACD,kBAAS;MACL,IAAI,IAAI,CAACuD,MAAM,KAAK,CAAC,CAAC,EAAE;QACpBlC,YAAY,CAAC,IAAI,CAACkC,MAAM,CAAC;QACzB,IAAI,CAACA,MAAM,GAAG,CAAC,CAAC;MACpB;IACJ;EAAC;IAAA;IAAA,OACD,sBAAaD,MAAM,EAAEvC,OAAO,EAAE;MAAA;MAC1B,IAAI,CAACf,MAAM,EAAE;MACb,IAAI,CAACuD,MAAM,GAAGpC,UAAU,CAAC,YAAM;QAC3B,MAAI,CAACoC,MAAM,GAAG,CAAC,CAAC;QAChBD,MAAM,EAAE;MACZ,CAAC,EAAEvC,OAAO,CAAC;IACf;EAAC;IAAA;IAAA,OACD,qBAAYuC,MAAM,EAAEvC,OAAO,EAAE;MAAA;MACzB,IAAI,IAAI,CAACwC,MAAM,KAAK,CAAC,CAAC,EAAE;QACpB;QACA;MACJ;MACA,IAAI,CAACA,MAAM,GAAGpC,UAAU,CAAC,YAAM;QAC3B,MAAI,CAACoC,MAAM,GAAG,CAAC,CAAC;QAChBD,MAAM,EAAE;MACZ,CAAC,EAAEvC,OAAO,CAAC;IACf;EAAC;EAAA;AAAA;AAEL,WAAa0C,aAAa;EACtB,yBAAc;IAAA;IACV,IAAI,CAACF,MAAM,GAAG,CAAC,CAAC;EACpB;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,IAAI,CAACvD,MAAM,EAAE;IACjB;EAAC;IAAA;IAAA,OACD,kBAAS;MACL,IAAI,IAAI,CAACuD,MAAM,KAAK,CAAC,CAAC,EAAE;QACpBG,aAAa,CAAC,IAAI,CAACH,MAAM,CAAC;QAC1B,IAAI,CAACA,MAAM,GAAG,CAAC,CAAC;MACpB;IACJ;EAAC;IAAA;IAAA,OACD,sBAAaD,MAAM,EAAEK,QAAQ,EAAE;MAC3B,IAAI,CAAC3D,MAAM,EAAE;MACb,IAAI,CAACuD,MAAM,GAAGK,WAAW,CAAC,YAAM;QAC5BN,MAAM,EAAE;MACZ,CAAC,EAAEK,QAAQ,CAAC;IAChB;EAAC;EAAA;AAAA;AAEL,WAAaE,gBAAgB;EACzB,0BAAYP,MAAM,EAAEtB,KAAK,EAAE;IAAA;IACvB,IAAI,CAAC8B,YAAY,GAAG,CAAC,CAAC;IACtB,IAAI,CAACR,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACvC,OAAO,GAAGiB,KAAK;IACpB,IAAI,CAAC+B,cAAc,GAAG,IAAI,CAACC,SAAS,CAACC,IAAI,CAAC,IAAI,CAAC;EACnD;EACA;AACJ;AACA;EAFI;IAAA;IAAA,OAGA,mBAAU;MACN,IAAI,CAACjE,MAAM,EAAE;MACb,IAAI,CAACsD,MAAM,GAAG,IAAI;IACtB;IACA;AACJ;AACA;EAFI;IAAA;IAAA,OAGA,kBAAS;MACL,IAAI,IAAI,CAACY,WAAW,EAAE,EAAE;QACpB7C,YAAY,CAAC,IAAI,CAACyC,YAAY,CAAC;QAC/B,IAAI,CAACA,YAAY,GAAG,CAAC,CAAC;MAC1B;IACJ;IACA;AACJ;AACA;EAFI;IAAA;IAAA,OAGA,oBAA+B;MAAA,IAAtB9B,KAAK,uEAAG,IAAI,CAACjB,OAAO;MACzB,IAAI,CAACf,MAAM,EAAE;MACb,IAAI,CAAC8D,YAAY,GAAG3C,UAAU,CAAC,IAAI,CAAC4C,cAAc,EAAE/B,KAAK,CAAC;IAC9D;EAAC;IAAA;IAAA,KACD,eAAY;MACR,OAAO,IAAI,CAACjB,OAAO;IACvB,CAAC;IAAA,KACD,aAAU7D,KAAK,EAAE;MACb,IAAI,CAAC6D,OAAO,GAAG7D,KAAK;IACxB;IACA;AACJ;AACA;EAFI;IAAA;IAAA,OAGA,uBAAc;MACV,OAAO,IAAI,CAAC4G,YAAY,KAAK,CAAC,CAAC;IACnC;EAAC;IAAA;IAAA,OACD,qBAAY;MACR,IAAI,CAACA,YAAY,GAAG,CAAC,CAAC;MACtB,IAAI,IAAI,CAACR,MAAM,EAAE;QACb,IAAI,CAACa,KAAK,EAAE;MAChB;IACJ;EAAC;IAAA;IAAA,OACD,iBAAQ;MACJ,IAAIjC,EAAE;MACN,CAACA,EAAE,GAAG,IAAI,CAACoB,MAAM,MAAM,IAAI,IAAIpB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC5D,IAAI,CAAC,IAAI,CAAC;IACzE;EAAC;EAAA;AAAA;AAEL;AACA;AACA;AACA,OAAO,IAAI8F,WAAW;AACtB,CAAC,YAAY;EACT,IAAI,OAAOC,mBAAmB,KAAK,UAAU,IAAI,OAAOC,kBAAkB,KAAK,UAAU,EAAE;IACvFF,WAAW,GAAG,qBAACd,MAAM,EAAK;MACtBnE,WAAW,CAAC,YAAM;QACd,IAAIoF,QAAQ,EAAE;UACV;QACJ;QACA,IAAMC,GAAG,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;QAC7BpB,MAAM,CAACqB,MAAM,CAACC,MAAM,CAAC;UACjBC,UAAU,EAAE,IAAI;UAChBC,aAAa,2BAAG;YACZ,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAER,GAAG,GAAGC,IAAI,CAACC,GAAG,EAAE,CAAC;UACxC;QACJ,CAAC,CAAC,CAAC;MACP,CAAC,CAAC;MACF,IAAIH,QAAQ,GAAG,KAAK;MACpB,OAAO;QACHzE,OAAO,qBAAG;UACN,IAAIyE,QAAQ,EAAE;YACV;UACJ;UACAA,QAAQ,GAAG,IAAI;QACnB;MACJ,CAAC;IACL,CAAC;EACL,CAAC,MACI;IACDH,WAAW,GAAG,qBAACd,MAAM,EAAEvC,OAAO,EAAK;MAC/B,IAAMG,MAAM,GAAGmD,mBAAmB,CAACf,MAAM,EAAE,OAAOvC,OAAO,KAAK,QAAQ,GAAG;QAAEA,OAAO,EAAPA;MAAQ,CAAC,GAAGd,SAAS,CAAC;MACjG,IAAIsE,QAAQ,GAAG,KAAK;MACpB,OAAO;QACHzE,OAAO,qBAAG;UACN,IAAIyE,QAAQ,EAAE;YACV;UACJ;UACAA,QAAQ,GAAG,IAAI;UACfD,kBAAkB,CAACpD,MAAM,CAAC;QAC9B;MACJ,CAAC;IACL,CAAC;EACL;AACJ,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA,WAAa+D,SAAS;EAClB,mBAAYC,QAAQ,EAAE;IAAA;IAAA;IAClB,IAAI,CAACC,OAAO,GAAG,KAAK;IACpB,IAAI,CAACC,SAAS,GAAG,YAAM;MACnB,IAAI;QACA,MAAI,CAACC,MAAM,GAAGH,QAAQ,EAAE;MAC5B,CAAC,CACD,OAAOnF,GAAG,EAAE;QACR,MAAI,CAACuF,MAAM,GAAGvF,GAAG;MACrB,CAAC,SACO;QACJ,MAAI,CAACoF,OAAO,GAAG,IAAI;MACvB;IACJ,CAAC;IACD,IAAI,CAACI,OAAO,GAAGnB,WAAW,CAAC;MAAA,OAAM,MAAI,CAACgB,SAAS,EAAE;IAAA,EAAC;EACtD;EAAC;IAAA;IAAA,OACD,mBAAU;MACN,IAAI,CAACG,OAAO,CAACzF,OAAO,EAAE;IAC1B;EAAC;IAAA;IAAA,KACD,eAAY;MACR,IAAI,CAAC,IAAI,CAACqF,OAAO,EAAE;QACf,IAAI,CAACI,OAAO,CAACzF,OAAO,EAAE;QACtB,IAAI,CAACsF,SAAS,EAAE;MACpB;MACA,IAAI,IAAI,CAACE,MAAM,EAAE;QACb,MAAM,IAAI,CAACA,MAAM;MACrB;MACA,OAAO,IAAI,CAACD,MAAM;IACtB;EAAC;IAAA;IAAA,KACD,eAAoB;MAChB,OAAO,IAAI,CAACF,OAAO;IACvB;EAAC;EAAA;AAAA;AAEL;AACA;AACA;AACA,WAAaK,eAAe;EACxB,2BAAc;IAAA;IAAA;IACV,IAAI,CAAC9H,QAAQ,GAAG,KAAK;IACrB,IAAI,CAAC+H,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACC,CAAC,GAAG,IAAItI,OAAO,CAAC,UAACuI,CAAC,EAAElI,CAAC,EAAK;MAC3B,MAAI,CAACmI,gBAAgB,GAAGD,CAAC;MACzB,MAAI,CAACE,aAAa,GAAGpI,CAAC;IAC1B,CAAC,CAAC;EACN;EAAC;IAAA;IAAA,KACD,eAAiB;MACb,OAAO,IAAI,CAACC,QAAQ;IACxB;EAAC;IAAA;IAAA,KACD,eAAgB;MACZ,OAAO,IAAI,CAACA,QAAQ,IAAI,IAAI,CAAC+H,QAAQ;IACzC;EAAC;IAAA;IAAA,OACD,kBAASvI,KAAK,EAAE;MAAA;MACZ,OAAO,IAAIE,OAAO,CAAC,UAAAD,OAAO,EAAI;QAC1B,MAAI,CAACyI,gBAAgB,CAAC1I,KAAK,CAAC;QAC5B,MAAI,CAACuI,QAAQ,GAAG,IAAI;QACpBtI,OAAO,EAAE;MACb,CAAC,CAAC;IACN;EAAC;IAAA;IAAA,OACD,kBAAS;MAAA;MACL,IAAIC,OAAO,CAAC,UAAAD,OAAO,EAAI;QACnB,MAAI,CAAC0I,aAAa,CAAC,IAAI9G,iBAAiB,EAAE,CAAC;QAC3C,MAAI,CAACrB,QAAQ,GAAG,IAAI;QACpBP,OAAO,EAAE;MACb,CAAC,CAAC;IACN;EAAC;EAAA;AAAA;AAEL;AACA;AACA,OAAO,IAAI2I,QAAQ;AACnB,CAAC,UAAUA,QAAQ,EAAE;EACjB;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAASC,OAAO,CAACC,QAAQ,EAAE;IACvB,OAAOpJ,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;MAAA;MAAA;QAAA;UAAA;YAAA;cAC/BqJ,UAAU,GAAGhG,SAAS;cAAA;cACX,OAAM7C,OAAO,CAAC8I,GAAG,CAACF,QAAQ,CAACG,GAAG,CAAC,UAAAxG,OAAO;gBAAA,OAAIA,OAAO,CAAC9B,IAAI,CAAC,UAAAX,KAAK;kBAAA,OAAIA,KAAK;gBAAA,GAAE,UAAAkJ,KAAK,EAAI;kBAC3F,IAAI,CAACH,UAAU,EAAE;oBACbA,UAAU,GAAGG,KAAK;kBACtB;kBACA,OAAOnG,SAAS,CAAC,CAAC;gBACtB,CAAC,CAAC;cAAA,EAAC,CAAC;YAAA;cALEtC,MAAM;cAAA,MAMR,OAAOsI,UAAU,KAAK,WAAW;gBAAA;gBAAA;cAAA;cAAA,MAC3BA,UAAU;YAAA;cAAA,iCAEbtI,MAAM;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAChB,EAAC;EACN;EACAmI,QAAQ,CAACC,OAAO,GAAGA,OAAO;EAC1B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,SAASM,aAAa,CAACC,MAAM,EAAE;IAAA;IAC3B;IACA,OAAO,IAAIlJ,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM;MAAA,OAAKT,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAEhE,OAAM0J,MAAM,CAACnJ,OAAO,EAAEE,MAAM,CAAC;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAG7BA,MAAM,cAAO;cAAC;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAErB,EAAC;IAAA,EAAC;EACP;EACAyI,QAAQ,CAACO,aAAa,GAAGA,aAAa;AAC1C,CAAC,EAAEP,QAAQ,KAAKA,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/B;AACA;AACA;AACA,WAAaS,mBAAmB;EAC5B,6BAAYrB,QAAQ,EAAE;IAAA;IAAA;IAClB,IAAI,CAACsB,MAAM,GAAG,CAAC,CAAC;IAChB,IAAI,CAACC,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACnB,MAAM,GAAG,IAAI;IAClB,IAAI,CAACoB,eAAe,GAAG,IAAI1H,OAAO,EAAE;IACpCuC,cAAc,CAAC;MAAA,OAAM3E,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAC3C+J,MAAM,GAAG;kBACXC,OAAO,EAAE,iBAACC,IAAI;oBAAA,OAAK,OAAI,CAACD,OAAO,CAACC,IAAI,CAAC;kBAAA;kBACrCC,QAAQ,EAAE,kBAACC,KAAK;oBAAA,OAAK,OAAI,CAACD,QAAQ,CAACC,KAAK,CAAC;kBAAA;kBACzC1J,MAAM,EAAE,gBAAC+I,KAAK;oBAAA,OAAK,OAAI,CAAC/I,MAAM,CAAC+I,KAAK,CAAC;kBAAA;gBACzC,CAAC;gBAAA;gBAAA;gBAEG,OAAMhJ,OAAO,CAACD,OAAO,CAAC+H,QAAQ,CAACyB,MAAM,CAAC,CAAC;cAAA;gBACvC,IAAI,CAACxJ,OAAO,EAAE;gBAAC;gBAAA;cAAA;gBAAA;gBAAA;gBAGf,IAAI,CAACE,MAAM,cAAK;cAAC;gBAAA;gBAGjBsJ,MAAM,CAACC,OAAO,GAAG3G,SAAS;gBAC1B0G,MAAM,CAACG,QAAQ,GAAG7G,SAAS;gBAC3B0G,MAAM,CAACtJ,MAAM,GAAG4C,SAAS;gBAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAEjC,EAAC;IAAA,EAAC;EACP;EAAC;IAAA;IAAA,OAoCD,iBAAyB;MAAA;MACrB,IAAI5B,CAAC,GAAG,CAAC;MACT,OAAO;QACHb,IAAI,EAAE;UAAA,OAAMZ,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;YAAA;cAAA;gBAAA;kBAAA;oBAAA,MAEhC,IAAI,CAAC4J,MAAM,KAAK,CAAC,CAAC;sBAAA;sBAAA;oBAAA;oBAAA,MACZ,IAAI,CAAClB,MAAM;kBAAA;oBAAA,MAEjBjH,CAAC,GAAG,IAAI,CAACoI,QAAQ,CAACvD,MAAM;sBAAA;sBAAA;oBAAA;oBAAA,kCACjB;sBAAEtF,IAAI,EAAE,KAAK;sBAAEV,KAAK,EAAE,IAAI,CAACuJ,QAAQ,CAACpI,CAAC,EAAE;oBAAE,CAAC;kBAAA;oBAAA,MAEjD,IAAI,CAACmI,MAAM,KAAK,CAAC,CAAC;sBAAA;sBAAA;oBAAA;oBAAA,kCACX;sBAAE5I,IAAI,EAAE,IAAI;sBAAEV,KAAK,EAAE+C;oBAAU,CAAC;kBAAA;oBAAA;oBAE3C,OAAMhB,KAAK,CAAC+H,SAAS,CAAC,IAAI,CAACN,eAAe,CAACO,KAAK,CAAC;kBAAA;oBAAA,IAC5C,IAAI;sBAAA;sBAAA;oBAAA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAChB,EAAC;QAAA;MACN,CAAC;IACL;EAAC;IAAA;IAAA,OAmBD,aAAIC,KAAK,EAAE;MACP,OAAOX,mBAAmB,CAACJ,GAAG,CAAC,IAAI,EAAEe,KAAK,CAAC;IAC/C;EAAC;IAAA;IAAA,OAqBD,gBAAOC,QAAQ,EAAE;MACb,OAAOZ,mBAAmB,CAACa,MAAM,CAAC,IAAI,EAAED,QAAQ,CAAC;IACrD;EAAC;IAAA;IAAA,OAID,oBAAW;MACP,OAAOZ,mBAAmB,CAACc,QAAQ,CAAC,IAAI,CAAC;IAC7C;EAAC;IAAA;IAAA,OAsBD,qBAAY;MACR,OAAOd,mBAAmB,CAACS,SAAS,CAAC,IAAI,CAAC;IAC9C;IACA;AACJ;AACA;AACA;AACA;EAJI;IAAA;IAAA,OAKA,iBAAQ9J,KAAK,EAAE;MACX,IAAI,IAAI,CAACsJ,MAAM,KAAK,CAAC,CAAC,wCAAwC;QAC1D;MACJ;MACA;MACA;MACA,IAAI,CAACC,QAAQ,CAACa,IAAI,CAACpK,KAAK,CAAC;MACzB,IAAI,CAACwJ,eAAe,CAACa,IAAI,EAAE;IAC/B;IACA;AACJ;AACA;AACA;AACA;EAJI;IAAA;IAAA,OAKA,kBAASC,MAAM,EAAE;MACb,IAAI,IAAI,CAAChB,MAAM,KAAK,CAAC,CAAC,wCAAwC;QAC1D;MACJ;MACA;MACA;MACA,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACgB,MAAM,CAACD,MAAM,CAAC;MAC5C,IAAI,CAACd,eAAe,CAACa,IAAI,EAAE;IAC/B;IACA;AACJ;AACA;AACA;AACA;AACA;EALI;IAAA;IAAA,OAMA,mBAAU;MACN,IAAI,IAAI,CAACf,MAAM,KAAK,CAAC,CAAC,wCAAwC;QAC1D;MACJ;MACA,IAAI,CAACA,MAAM,GAAG,CAAC,CAAC;MAChB,IAAI,CAACE,eAAe,CAACa,IAAI,EAAE;IAC/B;IACA;AACJ;AACA;AACA;AACA;AACA;EALI;IAAA;IAAA,OAMA,gBAAOnB,KAAK,EAAE;MACV,IAAI,IAAI,CAACI,MAAM,KAAK,CAAC,CAAC,wCAAwC;QAC1D;MACJ;MACA,IAAI,CAACA,MAAM,GAAG,CAAC,CAAC;MAChB,IAAI,CAAClB,MAAM,GAAGc,KAAK;MACnB,IAAI,CAACM,eAAe,CAACa,IAAI,EAAE;IAC/B;EAAC;IAAA;IAAA,OAtLD,mBAAiBR,KAAK,EAAE;MACpB,OAAO,IAAIR,mBAAmB,CAAC,UAACI,MAAM,EAAK;QACvCA,MAAM,CAACG,QAAQ,CAACC,KAAK,CAAC;MAC1B,CAAC,CAAC;IACN;EAAC;IAAA;IAAA,OACD,qBAAmBpH,OAAO,EAAE;MAAA;MACxB,OAAO,IAAI4G,mBAAmB,CAAC,UAACmB,OAAO;QAAA,OAAK9K,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;UAAA;YAAA;cAAA;gBAAA;kBAAA,eACxE8K,OAAO;kBAAA;kBAAU,OAAM/H,OAAO;gBAAA;kBAAA;kBAAA,aAAtBmH,QAAQ;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACnB,EAAC;MAAA,EAAC;IACP;EAAC;IAAA;IAAA,OACD,sBAAoBd,QAAQ,EAAE;MAAA;MAC1B,OAAO,IAAIO,mBAAmB,CAAC,UAACmB,OAAO;QAAA,OAAK9K,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBACxE,OAAMQ,OAAO,CAAC8I,GAAG,CAACF,QAAQ,CAACG,GAAG,CAAC,UAACT,CAAC;oBAAA,OAAK9I,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;sBAAA;wBAAA;0BAAA;4BAAA;8BAAA,eAAsB8K,OAAO;8BAAA;8BAAS,OAAMhC,CAAC;4BAAA;8BAAA;8BAAA,+CAAfkB,OAAO;4BAAA;4BAAA;8BAAA;0BAAA;wBAAA;sBAAA;oBAAA,CAAY,EAAC;kBAAA,EAAC,CAAC;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAC7H,EAAC;MAAA,EAAC;IACP;EAAC;IAAA;IAAA,OACD,eAAae,SAAS,EAAE;MAAA;MACpB,OAAO,IAAIpB,mBAAmB,CAAC,UAACmB,OAAO;QAAA,OAAK9K,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBACxE,OAAMQ,OAAO,CAAC8I,GAAG,CAACyB,SAAS,CAACxB,GAAG,CAAC,UAACyB,QAAQ,EAAK;oBAAE,IAAIC,UAAU,EAAEC,YAAY;oBAAE,OAAOlL,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;sBAAA;sBAAA;wBAAA;0BAAA;4BAAA;8BAAA;8BAGxGiL,UAAU,GAAG9J,aAAa,CAAC6J,QAAQ,CAAC;4BAAA;8BAAA;8BAAiB,OAAMC,UAAU,CAACrK,IAAI,EAAE;4BAAA;8BAAtCsK,YAAY;8BAAA,IAA6BA,YAAY,CAAClK,IAAI;gCAAA;gCAAA;8BAAA;8BAC3FiJ,IAAI,GAAGiB,YAAY,CAAC5K,KAAK;8BAC/BwK,OAAO,CAACd,OAAO,CAACC,IAAI,CAAC;4BAAC;8BAAA;8BAAA;4BAAA;8BAAA;8BAAA;4BAAA;8BAAA;8BAAA;8BAGdkB,GAAG,GAAG;gCAAE3B,KAAK;8BAAQ,CAAC;4BAAC;8BAAA;8BAAA;8BAAA,MAG3B0B,YAAY,IAAI,CAACA,YAAY,CAAClK,IAAI,KAAKsE,EAAE,GAAG2F,UAAU,CAACG,MAAM,CAAC;gCAAA;gCAAA;8BAAA;8BAAA;8BAAE,OAAM9F,EAAE,CAAC5D,IAAI,CAACuJ,UAAU,CAAC;4BAAA;8BAAA;8BAAA,KAEnFE,GAAG;gCAAA;gCAAA;8BAAA;8BAAA,MAAQA,GAAG,CAAC3B,KAAK;4BAAA;8BAAA;4BAAA;8BAAA;4BAAA;4BAAA;8BAAA;0BAAA;wBAAA;sBAAA;oBAAA,CAEzC,EAAC;kBAAE,CAAC,CAAC,CAAC;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACV,EAAC;MAAA,EAAC;IACP;EAAC;IAAA;IAAA,OAoBD,aAAWwB,QAAQ,EAAEV,KAAK,EAAE;MAAA;MACxB,OAAO,IAAIX,mBAAmB,CAAC,UAACmB,OAAO;QAAA,OAAK9K,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAG3DqL,UAAU,GAAGlK,aAAa,CAAC6J,QAAQ,CAAC;gBAAA;kBAAA;kBAA+B,OAAMK,UAAU,CAACzK,IAAI,EAAE;gBAAA;kBAAtC0K,YAAY;kBAAA,IAA6BA,YAAY,CAACtK,IAAI;oBAAA;oBAAA;kBAAA;kBAC7GiJ,IAAI,GAAGqB,YAAY,CAAChL,KAAK;kBAC/BwK,OAAO,CAACd,OAAO,CAACM,KAAK,CAACL,IAAI,CAAC,CAAC;gBAAC;kBAAA;kBAAA;gBAAA;kBAAA;kBAAA;gBAAA;kBAAA;kBAAA;kBAGrBsB,GAAG,GAAG;oBAAE/B,KAAK;kBAAQ,CAAC;gBAAC;kBAAA;kBAAA;kBAAA,MAG3B8B,YAAY,IAAI,CAACA,YAAY,CAACtK,IAAI,KAAKsE,EAAE,GAAG+F,UAAU,CAACD,MAAM,CAAC;oBAAA;oBAAA;kBAAA;kBAAA;kBAAE,OAAM9F,EAAE,CAAC5D,IAAI,CAAC2J,UAAU,CAAC;gBAAA;kBAAA;kBAAA,KAEnFE,GAAG;oBAAA;oBAAA;kBAAA;kBAAA,MAAQA,GAAG,CAAC/B,KAAK;gBAAA;kBAAA;gBAAA;kBAAA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAEzC,EAAC;MAAA,EAAC;IACP;EAAC;IAAA;IAAA,OAID,gBAAcwB,QAAQ,EAAET,QAAQ,EAAE;MAAA;MAC9B,OAAO,IAAIZ,mBAAmB,CAAC,UAACmB,OAAO;QAAA,OAAK9K,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAG3DwL,UAAU,GAAGrK,aAAa,CAAC6J,QAAQ,CAAC;gBAAA;kBAAA;kBAA+B,OAAMQ,UAAU,CAAC5K,IAAI,EAAE;gBAAA;kBAAtC6K,YAAY;kBAAA,IAA6BA,YAAY,CAACzK,IAAI;oBAAA;oBAAA;kBAAA;kBAC7GiJ,IAAI,GAAGwB,YAAY,CAACnL,KAAK;kBAC/B,IAAIiK,QAAQ,CAACN,IAAI,CAAC,EAAE;oBAChBa,OAAO,CAACd,OAAO,CAACC,IAAI,CAAC;kBACzB;gBAAC;kBAAA;kBAAA;gBAAA;kBAAA;kBAAA;gBAAA;kBAAA;kBAAA;kBAGOyB,GAAG,GAAG;oBAAElC,KAAK;kBAAQ,CAAC;gBAAC;kBAAA;kBAAA;kBAAA,MAG3BiC,YAAY,IAAI,CAACA,YAAY,CAACzK,IAAI,KAAKsE,EAAE,GAAGkG,UAAU,CAACJ,MAAM,CAAC;oBAAA;oBAAA;kBAAA;kBAAA;kBAAE,OAAM9F,EAAE,CAAC5D,IAAI,CAAC8J,UAAU,CAAC;gBAAA;kBAAA;kBAAA,KAEnFE,GAAG;oBAAA;oBAAA;kBAAA;kBAAA,MAAQA,GAAG,CAAClC,KAAK;gBAAA;kBAAA;gBAAA;kBAAA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAEzC,EAAC;MAAA,EAAC;IACP;EAAC;IAAA;IAAA,OAID,kBAAgBwB,QAAQ,EAAE;MACtB,OAAOrB,mBAAmB,CAACa,MAAM,CAACQ,QAAQ,EAAE,UAAAf,IAAI;QAAA,OAAI,CAAC,CAACA,IAAI;MAAA,EAAC;IAC/D;EAAC;IAAA;IAAA,OAID,mBAAiBe,QAAQ,EAAE;MACvB,IAAIW,UAAU,EAAEC,YAAY;MAC5B,IAAIC,GAAG,EAAEvG,EAAE;MACX,OAAOtF,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBAC7Be,MAAM,GAAG,EAAE;gBAAA;gBAER4K,UAAU,GAAGxK,aAAa,CAAC6J,QAAQ,CAAC;cAAA;gBAAA;gBAAiB,OAAMW,UAAU,CAAC/K,IAAI,EAAE;cAAA;gBAAtCgL,YAAY;gBAAA,IAA6BA,YAAY,CAAC5K,IAAI;kBAAA;kBAAA;gBAAA;gBAC3FiJ,IAAI,GAAG2B,YAAY,CAACtL,KAAK;gBAC/BS,MAAM,CAAC2J,IAAI,CAACT,IAAI,CAAC;cAAC;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGV4B,GAAG,GAAG;kBAAErC,KAAK;gBAAQ,CAAC;cAAC;gBAAA;gBAAA;gBAAA,MAG3BoC,YAAY,IAAI,CAACA,YAAY,CAAC5K,IAAI,KAAKsE,EAAE,GAAGqG,UAAU,CAACP,MAAM,CAAC;kBAAA;kBAAA;gBAAA;gBAAA;gBAAE,OAAM9F,EAAE,CAAC5D,IAAI,CAACiK,UAAU,CAAC;cAAA;gBAAA;gBAAA,KAEnFE,GAAG;kBAAA;kBAAA;gBAAA;gBAAA,MAAQA,GAAG,CAACrC,KAAK;cAAA;gBAAA;cAAA;gBAAA;cAAA;gBAAA,mCAE/BzI,MAAM;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAChB,EAAC;IACN;EAAC;EAAA;AAAA,EAzFAM,MAAM,CAACC,aAAa;AAqJzBqI,mBAAmB,CAACmC,KAAK,GAAGnC,mBAAmB,CAACoC,SAAS,CAAC,EAAE,CAAC;AAC7D,WAAaC,6BAA6B;EAAA;EAAA;EACtC,uCAAYC,OAAO,EAAE3D,QAAQ,EAAE;IAAA;IAAA;IAC3B,4BAAMA,QAAQ;IACd,QAAK2D,OAAO,GAAGA,OAAO;IAAC;EAC3B;EAAC;IAAA;IAAA,OACD,kBAAS;MACL,IAAI,CAACA,OAAO,CAAC7I,MAAM,EAAE;IACzB;EAAC;EAAA;AAAA,EAP8CuG,mBAAmB;AAStE,OAAO,SAASuC,6BAA6B,CAACvJ,QAAQ,EAAE;EAAA;EACpD,IAAMC,MAAM,GAAG,IAAIV,uBAAuB,EAAE;EAC5C,IAAMiK,aAAa,GAAGxJ,QAAQ,CAACC,MAAM,CAACE,KAAK,CAAC;EAC5C,OAAO,IAAIkJ,6BAA6B,CAACpJ,MAAM,EAAE,UAACkI,OAAO;IAAA,OAAK9K,SAAS,CAAC,OAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;MAAA;MAAA;QAAA;UAAA;YAAA;cAEpFgD,YAAY,GAAGJ,MAAM,CAACE,KAAK,CAACG,uBAAuB,CAAC,YAAM;gBAC5DD,YAAY,CAACE,OAAO,EAAE;gBACtBN,MAAM,CAACM,OAAO,EAAE;gBAChB4H,OAAO,CAACrK,MAAM,CAAC,IAAI0B,iBAAiB,EAAE,CAAC;cAC3C,CAAC,CAAC;cAAA;cAAA;cAGeiK,eAAe,GAAGjL,aAAa,CAACgL,aAAa,CAAC;YAAA;cAAA;cAAyC,OAAMC,eAAe,CAACxL,IAAI,EAAE;YAAA;cAAhDyL,iBAAiB;cAAA,IAAkCA,iBAAiB,CAACrL,IAAI;gBAAA;gBAAA;cAAA;cAC3IiJ,IAAI,GAAGoC,iBAAiB,CAAC/L,KAAK;cAAA,KAChCsC,MAAM,CAACE,KAAK,CAACwJ,uBAAuB;gBAAA;gBAAA;cAAA;cAAA;YAAA;cAIxCxB,OAAO,CAACd,OAAO,CAACC,IAAI,CAAC;YAAC;cAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAGdsC,GAAG,GAAG;gBAAE/C,KAAK;cAAQ,CAAC;YAAC;cAAA;cAAA;cAAA,MAG3B6C,iBAAiB,IAAI,CAACA,iBAAiB,CAACrL,IAAI,KAAKsE,EAAE,GAAG8G,eAAe,CAAChB,MAAM,CAAC;gBAAA;gBAAA;cAAA;cAAA;cAAE,OAAM9F,EAAE,CAAC5D,IAAI,CAAC0K,eAAe,CAAC;YAAA;cAAA;cAAA,KAEvGG,GAAG;gBAAA;gBAAA;cAAA;cAAA,MAAQA,GAAG,CAAC/C,KAAK;YAAA;cAAA;YAAA;cAAA;YAAA;cAEtCxG,YAAY,CAACE,OAAO,EAAE;cACtBN,MAAM,CAACM,OAAO,EAAE;cAAC;cAAA;YAAA;cAAA;cAAA;cAGjBF,YAAY,CAACE,OAAO,EAAE;cACtBN,MAAM,CAACM,OAAO,EAAE;cAChB4H,OAAO,CAACrK,MAAM,eAAK;YAAC;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAE3B,EAAC;EAAA,EAAC;AACP;AACA"}]}