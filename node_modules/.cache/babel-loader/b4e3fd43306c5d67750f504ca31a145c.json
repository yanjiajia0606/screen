{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9nZXQgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiOwppbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5LmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3QudG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KdmFyIF9fZGVjb3JhdGUgPSB0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHsKICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsCiAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywKICAgIGQ7CiAgaWYgKCh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoUmVmbGVjdCkpID09PSAib2JqZWN0IiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gImZ1bmN0aW9uIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO2Vsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7CiAgfQogIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7Cn07CnZhciBfX3BhcmFtID0gdGhpcyAmJiB0aGlzLl9fcGFyYW0gfHwgZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikgewogIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsKICAgIGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7CiAgfTsKfTsKdmFyIF9fYXdhaXRlciA9IHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgewogIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZXNvbHZlKHZhbHVlKTsKICAgIH0pOwogIH0KICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgewogICAgICB0cnkgewogICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJlamVjdChlKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgewogICAgICByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsKICAgIH0KICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTsKICB9KTsKfTsKaW1wb3J0ICcuLi8uLi9jb21tb24vbGFuZ3VhZ2VzL2xhbmd1YWdlQ29uZmlndXJhdGlvblJlZ2lzdHJ5LmpzJzsKaW1wb3J0ICcuL3N0YW5kYWxvbmVDb2RlRWRpdG9yU2VydmljZS5qcyc7CmltcG9ydCAnLi9zdGFuZGFsb25lTGF5b3V0U2VydmljZS5qcyc7CmltcG9ydCAnLi4vLi4vLi4vcGxhdGZvcm0vdW5kb1JlZG8vY29tbW9uL3VuZG9SZWRvU2VydmljZS5qcyc7CmltcG9ydCAnLi4vLi4vY29tbW9uL3NlcnZpY2VzL2xhbmd1YWdlRmVhdHVyZURlYm91bmNlLmpzJzsKaW1wb3J0ICogYXMgc3RyaW5ncyBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9zdHJpbmdzLmpzJzsKaW1wb3J0ICogYXMgZG9tIGZyb20gJy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci9kb20uanMnOwppbXBvcnQgeyBTdGFuZGFyZEtleWJvYXJkRXZlbnQgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2Jyb3dzZXIva2V5Ym9hcmRFdmVudC5qcyc7CmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9ldmVudC5qcyc7CmltcG9ydCB7IFNpbXBsZUtleWJpbmRpbmcsIGNyZWF0ZUtleWJpbmRpbmcgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9rZXliaW5kaW5ncy5qcyc7CmltcG9ydCB7IEltbW9ydGFsUmVmZXJlbmNlLCB0b0Rpc3Bvc2FibGUsIERpc3Bvc2FibGVTdG9yZSwgRGlzcG9zYWJsZSwgY29tYmluZWREaXNwb3NhYmxlIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vbGlmZWN5Y2xlLmpzJzsKaW1wb3J0IHsgT1MsIGlzTGludXgsIGlzTWFjaW50b3NoIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vcGxhdGZvcm0uanMnOwppbXBvcnQgU2V2ZXJpdHkgZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vc2V2ZXJpdHkuanMnOwppbXBvcnQgeyBVUkkgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi91cmkuanMnOwppbXBvcnQgeyBJQnVsa0VkaXRTZXJ2aWNlLCBSZXNvdXJjZVRleHRFZGl0IH0gZnJvbSAnLi4vLi4vYnJvd3Nlci9zZXJ2aWNlcy9idWxrRWRpdFNlcnZpY2UuanMnOwppbXBvcnQgeyBpc0RpZmZFZGl0b3JDb25maWd1cmF0aW9uS2V5LCBpc0VkaXRvckNvbmZpZ3VyYXRpb25LZXkgfSBmcm9tICcuLi8uLi9jb21tb24vY29uZmlnL2VkaXRvckNvbmZpZ3VyYXRpb25TY2hlbWEuanMnOwppbXBvcnQgeyBFZGl0T3BlcmF0aW9uIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvcmUvZWRpdE9wZXJhdGlvbi5qcyc7CmltcG9ydCB7IFBvc2l0aW9uIGFzIFBvcyB9IGZyb20gJy4uLy4uL2NvbW1vbi9jb3JlL3Bvc2l0aW9uLmpzJzsKaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi8uLi9jb21tb24vY29yZS9yYW5nZS5qcyc7CmltcG9ydCB7IElNb2RlbFNlcnZpY2UgfSBmcm9tICcuLi8uLi9jb21tb24vc2VydmljZXMvbW9kZWwuanMnOwppbXBvcnQgeyBJVGV4dE1vZGVsU2VydmljZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy9yZXNvbHZlclNlcnZpY2UuanMnOwppbXBvcnQgeyBJVGV4dFJlc291cmNlQ29uZmlndXJhdGlvblNlcnZpY2UsIElUZXh0UmVzb3VyY2VQcm9wZXJ0aWVzU2VydmljZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy90ZXh0UmVzb3VyY2VDb25maWd1cmF0aW9uLmpzJzsKaW1wb3J0IHsgQ29tbWFuZHNSZWdpc3RyeSwgSUNvbW1hbmRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vY29tbWFuZHMvY29tbW9uL2NvbW1hbmRzLmpzJzsKaW1wb3J0IHsgSUNvbmZpZ3VyYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vY29uZmlndXJhdGlvbi9jb21tb24vY29uZmlndXJhdGlvbi5qcyc7CmltcG9ydCB7IENvbmZpZ3VyYXRpb24sIENvbmZpZ3VyYXRpb25Nb2RlbCwgQ29uZmlndXJhdGlvbkNoYW5nZUV2ZW50IH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vY29uZmlndXJhdGlvbi9jb21tb24vY29uZmlndXJhdGlvbk1vZGVscy5qcyc7CmltcG9ydCB7IElDb250ZXh0S2V5U2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2NvbnRleHRrZXkvY29tbW9uL2NvbnRleHRrZXkuanMnOwppbXBvcnQgeyBJRGlhbG9nU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2RpYWxvZ3MvY29tbW9uL2RpYWxvZ3MuanMnOwppbXBvcnQgeyBjcmVhdGVEZWNvcmF0b3IsIElJbnN0YW50aWF0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2luc3RhbnRpYXRpb24vY29tbW9uL2luc3RhbnRpYXRpb24uanMnOwppbXBvcnQgeyBBYnN0cmFjdEtleWJpbmRpbmdTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0va2V5YmluZGluZy9jb21tb24vYWJzdHJhY3RLZXliaW5kaW5nU2VydmljZS5qcyc7CmltcG9ydCB7IElLZXliaW5kaW5nU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2tleWJpbmRpbmcvY29tbW9uL2tleWJpbmRpbmcuanMnOwppbXBvcnQgeyBLZXliaW5kaW5nUmVzb2x2ZXIgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9rZXliaW5kaW5nL2NvbW1vbi9rZXliaW5kaW5nUmVzb2x2ZXIuanMnOwppbXBvcnQgeyBLZXliaW5kaW5nc1JlZ2lzdHJ5IH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0va2V5YmluZGluZy9jb21tb24va2V5YmluZGluZ3NSZWdpc3RyeS5qcyc7CmltcG9ydCB7IFJlc29sdmVkS2V5YmluZGluZ0l0ZW0gfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9rZXliaW5kaW5nL2NvbW1vbi9yZXNvbHZlZEtleWJpbmRpbmdJdGVtLmpzJzsKaW1wb3J0IHsgVVNMYXlvdXRSZXNvbHZlZEtleWJpbmRpbmcgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9rZXliaW5kaW5nL2NvbW1vbi91c0xheW91dFJlc29sdmVkS2V5YmluZGluZy5qcyc7CmltcG9ydCB7IElMYWJlbFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9sYWJlbC9jb21tb24vbGFiZWwuanMnOwppbXBvcnQgeyBJTm90aWZpY2F0aW9uU2VydmljZSwgTm9PcE5vdGlmaWNhdGlvbiB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL25vdGlmaWNhdGlvbi9jb21tb24vbm90aWZpY2F0aW9uLmpzJzsKaW1wb3J0IHsgSUVkaXRvclByb2dyZXNzU2VydmljZSwgSVByb2dyZXNzU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL3Byb2dyZXNzL2NvbW1vbi9wcm9ncmVzcy5qcyc7CmltcG9ydCB7IElUZWxlbWV0cnlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vdGVsZW1ldHJ5L2NvbW1vbi90ZWxlbWV0cnkuanMnOwppbXBvcnQgeyBJV29ya3NwYWNlQ29udGV4dFNlcnZpY2UsIFdvcmtzcGFjZUZvbGRlciB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL3dvcmtzcGFjZS9jb21tb24vd29ya3NwYWNlLmpzJzsKaW1wb3J0IHsgSUxheW91dFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9sYXlvdXQvYnJvd3Nlci9sYXlvdXRTZXJ2aWNlLmpzJzsKaW1wb3J0IHsgU3RhbmRhbG9uZVNlcnZpY2VzTkxTIH0gZnJvbSAnLi4vLi4vY29tbW9uL3N0YW5kYWxvbmVTdHJpbmdzLmpzJzsKaW1wb3J0IHsgYmFzZW5hbWUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9yZXNvdXJjZXMuanMnOwppbXBvcnQgeyBJQ29kZUVkaXRvclNlcnZpY2UgfSBmcm9tICcuLi8uLi9icm93c2VyL3NlcnZpY2VzL2NvZGVFZGl0b3JTZXJ2aWNlLmpzJzsKaW1wb3J0IHsgQ29uc29sZUxvZ2dlciwgSUxvZ1NlcnZpY2UsIExvZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9sb2cvY29tbW9uL2xvZy5qcyc7CmltcG9ydCB7IElXb3Jrc3BhY2VUcnVzdE1hbmFnZW1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vd29ya3NwYWNlL2NvbW1vbi93b3Jrc3BhY2VUcnVzdC5qcyc7CmltcG9ydCB7IElDb250ZXh0TWVudVNlcnZpY2UsIElDb250ZXh0Vmlld1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9jb250ZXh0dmlldy9icm93c2VyL2NvbnRleHRWaWV3LmpzJzsKaW1wb3J0IHsgQ29udGV4dFZpZXdTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vY29udGV4dHZpZXcvYnJvd3Nlci9jb250ZXh0Vmlld1NlcnZpY2UuanMnOwppbXBvcnQgeyBMYW5ndWFnZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9jb21tb24vc2VydmljZXMvbGFuZ3VhZ2VTZXJ2aWNlLmpzJzsKaW1wb3J0IHsgQ29udGV4dE1lbnVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vY29udGV4dHZpZXcvYnJvd3Nlci9jb250ZXh0TWVudVNlcnZpY2UuanMnOwppbXBvcnQgeyBJVGhlbWVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vdGhlbWUvY29tbW9uL3RoZW1lU2VydmljZS5qcyc7CmltcG9ydCB7IGdldFNpbmdsZXRvblNlcnZpY2VEZXNjcmlwdG9ycywgcmVnaXN0ZXJTaW5nbGV0b24gfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9pbnN0YW50aWF0aW9uL2NvbW1vbi9leHRlbnNpb25zLmpzJzsKaW1wb3J0IHsgT3BlbmVyU2VydmljZSB9IGZyb20gJy4uLy4uL2Jyb3dzZXIvc2VydmljZXMvb3BlbmVyU2VydmljZS5qcyc7CmltcG9ydCB7IElFZGl0b3JXb3JrZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NlcnZpY2VzL2VkaXRvcldvcmtlci5qcyc7CmltcG9ydCB7IEVkaXRvcldvcmtlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9icm93c2VyL3NlcnZpY2VzL2VkaXRvcldvcmtlclNlcnZpY2UuanMnOwppbXBvcnQgeyBJTGFuZ3VhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL2xhbmd1YWdlcy9sYW5ndWFnZS5qcyc7CmltcG9ydCB7IE1hcmtlckRlY29yYXRpb25zU2VydmljZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy9tYXJrZXJEZWNvcmF0aW9uc1NlcnZpY2UuanMnOwppbXBvcnQgeyBJTWFya2VyRGVjb3JhdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NlcnZpY2VzL21hcmtlckRlY29yYXRpb25zLmpzJzsKaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NlcnZpY2VzL21vZGVsU2VydmljZS5qcyc7CmltcG9ydCB7IFN0YW5kYWxvbmVRdWlja0lucHV0U2VydmljZSB9IGZyb20gJy4vcXVpY2tJbnB1dC9zdGFuZGFsb25lUXVpY2tJbnB1dFNlcnZpY2UuanMnOwppbXBvcnQgeyBTdGFuZGFsb25lVGhlbWVTZXJ2aWNlIH0gZnJvbSAnLi9zdGFuZGFsb25lVGhlbWVTZXJ2aWNlLmpzJzsKaW1wb3J0IHsgSVN0YW5kYWxvbmVUaGVtZVNlcnZpY2UgfSBmcm9tICcuLi9jb21tb24vc3RhbmRhbG9uZVRoZW1lLmpzJzsKaW1wb3J0IHsgQWNjZXNzaWJpbGl0eVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9hY2Nlc3NpYmlsaXR5L2Jyb3dzZXIvYWNjZXNzaWJpbGl0eVNlcnZpY2UuanMnOwppbXBvcnQgeyBJQWNjZXNzaWJpbGl0eVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9hY2Nlc3NpYmlsaXR5L2NvbW1vbi9hY2Nlc3NpYmlsaXR5LmpzJzsKaW1wb3J0IHsgSU1lbnVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vYWN0aW9ucy9jb21tb24vYWN0aW9ucy5qcyc7CmltcG9ydCB7IE1lbnVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vYWN0aW9ucy9jb21tb24vbWVudVNlcnZpY2UuanMnOwppbXBvcnQgeyBCcm93c2VyQ2xpcGJvYXJkU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2NsaXBib2FyZC9icm93c2VyL2NsaXBib2FyZFNlcnZpY2UuanMnOwppbXBvcnQgeyBJQ2xpcGJvYXJkU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2NsaXBib2FyZC9jb21tb24vY2xpcGJvYXJkU2VydmljZS5qcyc7CmltcG9ydCB7IENvbnRleHRLZXlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vY29udGV4dGtleS9icm93c2VyL2NvbnRleHRLZXlTZXJ2aWNlLmpzJzsKaW1wb3J0IHsgU3luY0Rlc2NyaXB0b3IgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9pbnN0YW50aWF0aW9uL2NvbW1vbi9kZXNjcmlwdG9ycy5qcyc7CmltcG9ydCB7IEluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vaW5zdGFudGlhdGlvbi9jb21tb24vaW5zdGFudGlhdGlvblNlcnZpY2UuanMnOwppbXBvcnQgeyBTZXJ2aWNlQ29sbGVjdGlvbiB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2luc3RhbnRpYXRpb24vY29tbW9uL3NlcnZpY2VDb2xsZWN0aW9uLmpzJzsKaW1wb3J0IHsgSUxpc3RTZXJ2aWNlLCBMaXN0U2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2xpc3QvYnJvd3Nlci9saXN0U2VydmljZS5qcyc7CmltcG9ydCB7IElNYXJrZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vbWFya2Vycy9jb21tb24vbWFya2Vycy5qcyc7CmltcG9ydCB7IE1hcmtlclNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9tYXJrZXJzL2NvbW1vbi9tYXJrZXJTZXJ2aWNlLmpzJzsKaW1wb3J0IHsgSU9wZW5lclNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9vcGVuZXIvY29tbW9uL29wZW5lci5qcyc7CmltcG9ydCB7IElRdWlja0lucHV0U2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL3F1aWNraW5wdXQvY29tbW9uL3F1aWNrSW5wdXQuanMnOwppbXBvcnQgeyBJU3RvcmFnZVNlcnZpY2UsIEluTWVtb3J5U3RvcmFnZVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9zdG9yYWdlL2NvbW1vbi9zdG9yYWdlLmpzJzsKaW1wb3J0ICcuLi8uLi9jb21tb24vc2VydmljZXMvbGFuZ3VhZ2VGZWF0dXJlc1NlcnZpY2UuanMnOwppbXBvcnQgeyBEZWZhdWx0Q29uZmlndXJhdGlvbk1vZGVsIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vY29uZmlndXJhdGlvbi9jb21tb24vY29uZmlndXJhdGlvbnMuanMnOwp2YXIgU2ltcGxlTW9kZWwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFNpbXBsZU1vZGVsKG1vZGVsKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2ltcGxlTW9kZWwpOwogICAgdGhpcy5kaXNwb3NlZCA9IGZhbHNlOwogICAgdGhpcy5tb2RlbCA9IG1vZGVsOwogICAgdGhpcy5fb25XaWxsRGlzcG9zZSA9IG5ldyBFbWl0dGVyKCk7CiAgfQogIF9jcmVhdGVDbGFzcyhTaW1wbGVNb2RlbCwgW3sKICAgIGtleTogInRleHRFZGl0b3JNb2RlbCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZWw7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7CiAgICAgIHRoaXMuX29uV2lsbERpc3Bvc2UuZmlyZSgpOwogICAgfQogIH1dKTsKICByZXR1cm4gU2ltcGxlTW9kZWw7Cn0oKTsKdmFyIFN0YW5kYWxvbmVUZXh0TW9kZWxTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdGFuZGFsb25lVGV4dE1vZGVsU2VydmljZShtb2RlbFNlcnZpY2UpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFsb25lVGV4dE1vZGVsU2VydmljZSk7CiAgICB0aGlzLm1vZGVsU2VydmljZSA9IG1vZGVsU2VydmljZTsKICB9CiAgX2NyZWF0ZUNsYXNzKFN0YW5kYWxvbmVUZXh0TW9kZWxTZXJ2aWNlLCBbewogICAga2V5OiAiY3JlYXRlTW9kZWxSZWZlcmVuY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZU1vZGVsUmVmZXJlbmNlKHJlc291cmNlKSB7CiAgICAgIHZhciBtb2RlbCA9IHRoaXMubW9kZWxTZXJ2aWNlLmdldE1vZGVsKHJlc291cmNlKTsKICAgICAgaWYgKCFtb2RlbCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk1vZGVsIG5vdCBmb3VuZCIpKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBJbW1vcnRhbFJlZmVyZW5jZShuZXcgU2ltcGxlTW9kZWwobW9kZWwpKSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBTdGFuZGFsb25lVGV4dE1vZGVsU2VydmljZTsKfSgpOwpTdGFuZGFsb25lVGV4dE1vZGVsU2VydmljZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oMCwgSU1vZGVsU2VydmljZSldLCBTdGFuZGFsb25lVGV4dE1vZGVsU2VydmljZSk7CnZhciBTdGFuZGFsb25lRWRpdG9yUHJvZ3Jlc3NTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdGFuZGFsb25lRWRpdG9yUHJvZ3Jlc3NTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVFZGl0b3JQcm9ncmVzc1NlcnZpY2UpOwogIH0KICBfY3JlYXRlQ2xhc3MoU3RhbmRhbG9uZUVkaXRvclByb2dyZXNzU2VydmljZSwgW3sKICAgIGtleTogInNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHJldHVybiBTdGFuZGFsb25lRWRpdG9yUHJvZ3Jlc3NTZXJ2aWNlLk5VTExfUFJPR1JFU1NfUlVOTkVSOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dXaGlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd1doaWxlKHByb21pc2UsIGRlbGF5KSB7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN0YW5kYWxvbmVFZGl0b3JQcm9ncmVzc1NlcnZpY2U7Cn0oKTsKU3RhbmRhbG9uZUVkaXRvclByb2dyZXNzU2VydmljZS5OVUxMX1BST0dSRVNTX1JVTk5FUiA9IHsKICBkb25lOiBmdW5jdGlvbiBkb25lKCkge30sCiAgdG90YWw6IGZ1bmN0aW9uIHRvdGFsKCkge30sCiAgd29ya2VkOiBmdW5jdGlvbiB3b3JrZWQoKSB7fQp9Owp2YXIgU3RhbmRhbG9uZVByb2dyZXNzU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RhbmRhbG9uZVByb2dyZXNzU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFsb25lUHJvZ3Jlc3NTZXJ2aWNlKTsKICB9CiAgX2NyZWF0ZUNsYXNzKFN0YW5kYWxvbmVQcm9ncmVzc1NlcnZpY2UsIFt7CiAgICBrZXk6ICJ3aXRoUHJvZ3Jlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHdpdGhQcm9ncmVzcyhfb3B0aW9ucywgdGFzaywgb25EaWRDYW5jZWwpIHsKICAgICAgcmV0dXJuIHRhc2soewogICAgICAgIHJlcG9ydDogZnVuY3Rpb24gcmVwb3J0KCkge30KICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBTdGFuZGFsb25lUHJvZ3Jlc3NTZXJ2aWNlOwp9KCk7CnZhciBTdGFuZGFsb25lRGlhbG9nU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RhbmRhbG9uZURpYWxvZ1NlcnZpY2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RhbmRhbG9uZURpYWxvZ1NlcnZpY2UpOwogIH0KICBfY3JlYXRlQ2xhc3MoU3RhbmRhbG9uZURpYWxvZ1NlcnZpY2UsIFt7CiAgICBrZXk6ICJjb25maXJtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb25maXJtKGNvbmZpcm1hdGlvbikgewogICAgICByZXR1cm4gdGhpcy5kb0NvbmZpcm0oY29uZmlybWF0aW9uKS50aGVuKGZ1bmN0aW9uIChjb25maXJtZWQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgY29uZmlybWVkOiBjb25maXJtZWQsCiAgICAgICAgICBjaGVja2JveENoZWNrZWQ6IGZhbHNlIC8vIHVuc3VwcG9ydGVkCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZG9Db25maXJtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkb0NvbmZpcm0oY29uZmlybWF0aW9uKSB7CiAgICAgIHZhciBtZXNzYWdlVGV4dCA9IGNvbmZpcm1hdGlvbi5tZXNzYWdlOwogICAgICBpZiAoY29uZmlybWF0aW9uLmRldGFpbCkgewogICAgICAgIG1lc3NhZ2VUZXh0ID0gbWVzc2FnZVRleHQgKyAnXG5cbicgKyBjb25maXJtYXRpb24uZGV0YWlsOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUod2luZG93LmNvbmZpcm0obWVzc2FnZVRleHQpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KHNldmVyaXR5LCBtZXNzYWdlLCBidXR0b25zLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoewogICAgICAgIGNob2ljZTogMAogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN0YW5kYWxvbmVEaWFsb2dTZXJ2aWNlOwp9KCk7CmV4cG9ydCB2YXIgU3RhbmRhbG9uZU5vdGlmaWNhdGlvblNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN0YW5kYWxvbmVOb3RpZmljYXRpb25TZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVOb3RpZmljYXRpb25TZXJ2aWNlKTsKICB9CiAgX2NyZWF0ZUNsYXNzKFN0YW5kYWxvbmVOb3RpZmljYXRpb25TZXJ2aWNlLCBbewogICAga2V5OiAiaW5mbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5mbyhtZXNzYWdlKSB7CiAgICAgIHJldHVybiB0aGlzLm5vdGlmeSh7CiAgICAgICAgc2V2ZXJpdHk6IFNldmVyaXR5LkluZm8sCiAgICAgICAgbWVzc2FnZTogbWVzc2FnZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ3YXJuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3YXJuKG1lc3NhZ2UpIHsKICAgICAgcmV0dXJuIHRoaXMubm90aWZ5KHsKICAgICAgICBzZXZlcml0eTogU2V2ZXJpdHkuV2FybmluZywKICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImVycm9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IpIHsKICAgICAgcmV0dXJuIHRoaXMubm90aWZ5KHsKICAgICAgICBzZXZlcml0eTogU2V2ZXJpdHkuRXJyb3IsCiAgICAgICAgbWVzc2FnZTogX2Vycm9yCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm5vdGlmeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbm90aWZ5KG5vdGlmaWNhdGlvbikgewogICAgICBzd2l0Y2ggKG5vdGlmaWNhdGlvbi5zZXZlcml0eSkgewogICAgICAgIGNhc2UgU2V2ZXJpdHkuRXJyb3I6CiAgICAgICAgICBjb25zb2xlLmVycm9yKG5vdGlmaWNhdGlvbi5tZXNzYWdlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgU2V2ZXJpdHkuV2FybmluZzoKICAgICAgICAgIGNvbnNvbGUud2Fybihub3RpZmljYXRpb24ubWVzc2FnZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgY29uc29sZS5sb2cobm90aWZpY2F0aW9uLm1lc3NhZ2UpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgcmV0dXJuIFN0YW5kYWxvbmVOb3RpZmljYXRpb25TZXJ2aWNlLk5PX09QOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXR1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhdHVzKG1lc3NhZ2UsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIERpc3Bvc2FibGUuTm9uZTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN0YW5kYWxvbmVOb3RpZmljYXRpb25TZXJ2aWNlOwp9KCk7ClN0YW5kYWxvbmVOb3RpZmljYXRpb25TZXJ2aWNlLk5PX09QID0gbmV3IE5vT3BOb3RpZmljYXRpb24oKTsKdmFyIFN0YW5kYWxvbmVDb21tYW5kU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RhbmRhbG9uZUNvbW1hbmRTZXJ2aWNlKGluc3RhbnRpYXRpb25TZXJ2aWNlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RhbmRhbG9uZUNvbW1hbmRTZXJ2aWNlKTsKICAgIHRoaXMuX29uV2lsbEV4ZWN1dGVDb21tYW5kID0gbmV3IEVtaXR0ZXIoKTsKICAgIHRoaXMuX29uRGlkRXhlY3V0ZUNvbW1hbmQgPSBuZXcgRW1pdHRlcigpOwogICAgdGhpcy5vbldpbGxFeGVjdXRlQ29tbWFuZCA9IHRoaXMuX29uV2lsbEV4ZWN1dGVDb21tYW5kLmV2ZW50OwogICAgdGhpcy5vbkRpZEV4ZWN1dGVDb21tYW5kID0gdGhpcy5fb25EaWRFeGVjdXRlQ29tbWFuZC5ldmVudDsKICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlID0gaW5zdGFudGlhdGlvblNlcnZpY2U7CiAgfQogIF9jcmVhdGVDbGFzcyhTdGFuZGFsb25lQ29tbWFuZFNlcnZpY2UsIFt7CiAgICBrZXk6ICJleGVjdXRlQ29tbWFuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXhlY3V0ZUNvbW1hbmQoaWQpIHsKICAgICAgdmFyIGNvbW1hbmQgPSBDb21tYW5kc1JlZ2lzdHJ5LmdldENvbW1hbmQoaWQpOwogICAgICBpZiAoIWNvbW1hbmQpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJjb21tYW5kICciLmNvbmNhdChpZCwgIicgbm90IGZvdW5kIikpKTsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldOwogICAgICAgIH0KICAgICAgICB0aGlzLl9vbldpbGxFeGVjdXRlQ29tbWFuZC5maXJlKHsKICAgICAgICAgIGNvbW1hbmRJZDogaWQsCiAgICAgICAgICBhcmdzOiBhcmdzCiAgICAgICAgfSk7CiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uLmFwcGx5KHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLCBbY29tbWFuZC5oYW5kbGVyXS5jb25jYXQoYXJncykpOwogICAgICAgIHRoaXMuX29uRGlkRXhlY3V0ZUNvbW1hbmQuZmlyZSh7CiAgICAgICAgICBjb21tYW5kSWQ6IGlkLAogICAgICAgICAgYXJnczogYXJncwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7CiAgICAgIH0KICAgIH0KICB9XSk7CiAgcmV0dXJuIFN0YW5kYWxvbmVDb21tYW5kU2VydmljZTsKfSgpOwpTdGFuZGFsb25lQ29tbWFuZFNlcnZpY2UgPSBfX2RlY29yYXRlKFtfX3BhcmFtKDAsIElJbnN0YW50aWF0aW9uU2VydmljZSldLCBTdGFuZGFsb25lQ29tbWFuZFNlcnZpY2UpOwpleHBvcnQgeyBTdGFuZGFsb25lQ29tbWFuZFNlcnZpY2UgfTsKdmFyIFN0YW5kYWxvbmVLZXliaW5kaW5nU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Fic3RyYWN0S2V5YmluZGluZ1NlKSB7CiAgX2luaGVyaXRzKFN0YW5kYWxvbmVLZXliaW5kaW5nU2VydmljZSwgX0Fic3RyYWN0S2V5YmluZGluZ1NlKTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFN0YW5kYWxvbmVLZXliaW5kaW5nU2VydmljZSk7CiAgZnVuY3Rpb24gU3RhbmRhbG9uZUtleWJpbmRpbmdTZXJ2aWNlKGNvbnRleHRLZXlTZXJ2aWNlLCBjb21tYW5kU2VydmljZSwgdGVsZW1ldHJ5U2VydmljZSwgbm90aWZpY2F0aW9uU2VydmljZSwgbG9nU2VydmljZSwgY29kZUVkaXRvclNlcnZpY2UpIHsKICAgIHZhciBfdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFsb25lS2V5YmluZGluZ1NlcnZpY2UpOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb250ZXh0S2V5U2VydmljZSwgY29tbWFuZFNlcnZpY2UsIHRlbGVtZXRyeVNlcnZpY2UsIG5vdGlmaWNhdGlvblNlcnZpY2UsIGxvZ1NlcnZpY2UpOwogICAgX3RoaXMuX2NhY2hlZFJlc29sdmVyID0gbnVsbDsKICAgIF90aGlzLl9keW5hbWljS2V5YmluZGluZ3MgPSBbXTsKICAgIF90aGlzLl9kb21Ob2RlTGlzdGVuZXJzID0gW107CiAgICB2YXIgYWRkQ29udGFpbmVyID0gZnVuY3Rpb24gYWRkQ29udGFpbmVyKGRvbU5vZGUpIHsKICAgICAgdmFyIGRpc3Bvc2FibGVzID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpOwogICAgICAvLyBmb3Igc3RhbmRhcmQga2V5YmluZGluZ3MKICAgICAgZGlzcG9zYWJsZXMuYWRkKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5LRVlfRE9XTiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIga2V5RXZlbnQgPSBuZXcgU3RhbmRhcmRLZXlib2FyZEV2ZW50KGUpOwogICAgICAgIHZhciBzaG91bGRQcmV2ZW50RGVmYXVsdCA9IF90aGlzLl9kaXNwYXRjaChrZXlFdmVudCwga2V5RXZlbnQudGFyZ2V0KTsKICAgICAgICBpZiAoc2hvdWxkUHJldmVudERlZmF1bHQpIHsKICAgICAgICAgIGtleUV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBrZXlFdmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgICAgLy8gZm9yIHNpbmdsZSBtb2RpZmllciBjaG9yZCBrZXliaW5kaW5ncyAoZS5nLiBzaGlmdCBzaGlmdCkKICAgICAgZGlzcG9zYWJsZXMuYWRkKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5LRVlfVVAsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGtleUV2ZW50ID0gbmV3IFN0YW5kYXJkS2V5Ym9hcmRFdmVudChlKTsKICAgICAgICB2YXIgc2hvdWxkUHJldmVudERlZmF1bHQgPSBfdGhpcy5fc2luZ2xlTW9kaWZpZXJEaXNwYXRjaChrZXlFdmVudCwga2V5RXZlbnQudGFyZ2V0KTsKICAgICAgICBpZiAoc2hvdWxkUHJldmVudERlZmF1bHQpIHsKICAgICAgICAgIGtleUV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgfQogICAgICB9KSk7CiAgICAgIF90aGlzLl9kb21Ob2RlTGlzdGVuZXJzLnB1c2gobmV3IERvbU5vZGVMaXN0ZW5lcnMoZG9tTm9kZSwgZGlzcG9zYWJsZXMpKTsKICAgIH07CiAgICB2YXIgcmVtb3ZlQ29udGFpbmVyID0gZnVuY3Rpb24gcmVtb3ZlQ29udGFpbmVyKGRvbU5vZGUpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5fZG9tTm9kZUxpc3RlbmVycy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBkb21Ob2RlTGlzdGVuZXJzID0gX3RoaXMuX2RvbU5vZGVMaXN0ZW5lcnNbaV07CiAgICAgICAgaWYgKGRvbU5vZGVMaXN0ZW5lcnMuZG9tTm9kZSA9PT0gZG9tTm9kZSkgewogICAgICAgICAgX3RoaXMuX2RvbU5vZGVMaXN0ZW5lcnMuc3BsaWNlKGksIDEpOwogICAgICAgICAgZG9tTm9kZUxpc3RlbmVycy5kaXNwb3NlKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgdmFyIGFkZENvZGVFZGl0b3IgPSBmdW5jdGlvbiBhZGRDb2RlRWRpdG9yKGNvZGVFZGl0b3IpIHsKICAgICAgaWYgKGNvZGVFZGl0b3IuZ2V0T3B0aW9uKDU2IC8qIEVkaXRvck9wdGlvbi5pbkRpZmZFZGl0b3IgKi8pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGFkZENvbnRhaW5lcihjb2RlRWRpdG9yLmdldENvbnRhaW5lckRvbU5vZGUoKSk7CiAgICB9OwogICAgdmFyIHJlbW92ZUNvZGVFZGl0b3IgPSBmdW5jdGlvbiByZW1vdmVDb2RlRWRpdG9yKGNvZGVFZGl0b3IpIHsKICAgICAgaWYgKGNvZGVFZGl0b3IuZ2V0T3B0aW9uKDU2IC8qIEVkaXRvck9wdGlvbi5pbkRpZmZFZGl0b3IgKi8pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJlbW92ZUNvbnRhaW5lcihjb2RlRWRpdG9yLmdldENvbnRhaW5lckRvbU5vZGUoKSk7CiAgICB9OwogICAgX3RoaXMuX3JlZ2lzdGVyKGNvZGVFZGl0b3JTZXJ2aWNlLm9uQ29kZUVkaXRvckFkZChhZGRDb2RlRWRpdG9yKSk7CiAgICBfdGhpcy5fcmVnaXN0ZXIoY29kZUVkaXRvclNlcnZpY2Uub25Db2RlRWRpdG9yUmVtb3ZlKHJlbW92ZUNvZGVFZGl0b3IpKTsKICAgIGNvZGVFZGl0b3JTZXJ2aWNlLmxpc3RDb2RlRWRpdG9ycygpLmZvckVhY2goYWRkQ29kZUVkaXRvcik7CiAgICB2YXIgYWRkRGlmZkVkaXRvciA9IGZ1bmN0aW9uIGFkZERpZmZFZGl0b3IoZGlmZkVkaXRvcikgewogICAgICBhZGRDb250YWluZXIoZGlmZkVkaXRvci5nZXRDb250YWluZXJEb21Ob2RlKCkpOwogICAgfTsKICAgIHZhciByZW1vdmVEaWZmRWRpdG9yID0gZnVuY3Rpb24gcmVtb3ZlRGlmZkVkaXRvcihkaWZmRWRpdG9yKSB7CiAgICAgIHJlbW92ZUNvbnRhaW5lcihkaWZmRWRpdG9yLmdldENvbnRhaW5lckRvbU5vZGUoKSk7CiAgICB9OwogICAgX3RoaXMuX3JlZ2lzdGVyKGNvZGVFZGl0b3JTZXJ2aWNlLm9uRGlmZkVkaXRvckFkZChhZGREaWZmRWRpdG9yKSk7CiAgICBfdGhpcy5fcmVnaXN0ZXIoY29kZUVkaXRvclNlcnZpY2Uub25EaWZmRWRpdG9yUmVtb3ZlKHJlbW92ZURpZmZFZGl0b3IpKTsKICAgIGNvZGVFZGl0b3JTZXJ2aWNlLmxpc3REaWZmRWRpdG9ycygpLmZvckVhY2goYWRkRGlmZkVkaXRvcik7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhTdGFuZGFsb25lS2V5YmluZGluZ1NlcnZpY2UsIFt7CiAgICBrZXk6ICJhZGREeW5hbWljS2V5YmluZGluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRHluYW1pY0tleWJpbmRpbmcoY29tbWFuZCwga2V5YmluZGluZywgaGFuZGxlciwgd2hlbikgewogICAgICByZXR1cm4gY29tYmluZWREaXNwb3NhYmxlKENvbW1hbmRzUmVnaXN0cnkucmVnaXN0ZXJDb21tYW5kKGNvbW1hbmQsIGhhbmRsZXIpLCB0aGlzLmFkZER5bmFtaWNLZXliaW5kaW5ncyhbewogICAgICAgIGtleWJpbmRpbmc6IGtleWJpbmRpbmcsCiAgICAgICAgY29tbWFuZDogY29tbWFuZCwKICAgICAgICB3aGVuOiB3aGVuCiAgICAgIH1dKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkRHluYW1pY0tleWJpbmRpbmdzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGREeW5hbWljS2V5YmluZGluZ3MocnVsZXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBlbnRyaWVzID0gcnVsZXMubWFwKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgICAgdmFyIF9hLCBfYjsKICAgICAgICB2YXIga2V5YmluZGluZyA9IGNyZWF0ZUtleWJpbmRpbmcocnVsZS5rZXliaW5kaW5nLCBPUyk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGtleWJpbmRpbmc6IChfYSA9IGtleWJpbmRpbmcgPT09IG51bGwgfHwga2V5YmluZGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDoga2V5YmluZGluZy5wYXJ0cykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbCwKICAgICAgICAgIGNvbW1hbmQ6IChfYiA9IHJ1bGUuY29tbWFuZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbCwKICAgICAgICAgIGNvbW1hbmRBcmdzOiBydWxlLmNvbW1hbmRBcmdzLAogICAgICAgICAgd2hlbjogcnVsZS53aGVuLAogICAgICAgICAgd2VpZ2h0MTogMTAwMCwKICAgICAgICAgIHdlaWdodDI6IDAsCiAgICAgICAgICBleHRlbnNpb25JZDogbnVsbCwKICAgICAgICAgIGlzQnVpbHRpbkV4dGVuc2lvbjogZmFsc2UKICAgICAgICB9OwogICAgICB9KTsKICAgICAgdGhpcy5fZHluYW1pY0tleWJpbmRpbmdzID0gdGhpcy5fZHluYW1pY0tleWJpbmRpbmdzLmNvbmNhdChlbnRyaWVzKTsKICAgICAgdGhpcy51cGRhdGVSZXNvbHZlcigpOwogICAgICByZXR1cm4gdG9EaXNwb3NhYmxlKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBTZWFyY2ggdGhlIGZpcnN0IGVudHJ5IGFuZCByZW1vdmUgdGhlbSBhbGwgc2luY2UgdGhleSB3aWxsIGJlIGNvbnRpZ3VvdXMKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzMi5fZHluYW1pY0tleWJpbmRpbmdzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoX3RoaXMyLl9keW5hbWljS2V5YmluZGluZ3NbaV0gPT09IGVudHJpZXNbMF0pIHsKICAgICAgICAgICAgX3RoaXMyLl9keW5hbWljS2V5YmluZGluZ3Muc3BsaWNlKGksIGVudHJpZXMubGVuZ3RoKTsKICAgICAgICAgICAgX3RoaXMyLnVwZGF0ZVJlc29sdmVyKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVJlc29sdmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVSZXNvbHZlcigpIHsKICAgICAgdGhpcy5fY2FjaGVkUmVzb2x2ZXIgPSBudWxsOwogICAgICB0aGlzLl9vbkRpZFVwZGF0ZUtleWJpbmRpbmdzLmZpcmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0UmVzb2x2ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRSZXNvbHZlcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGlmICghdGhpcy5fY2FjaGVkUmVzb2x2ZXIpIHsKICAgICAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLl90b05vcm1hbGl6ZWRLZXliaW5kaW5nSXRlbXMoS2V5YmluZGluZ3NSZWdpc3RyeS5nZXREZWZhdWx0S2V5YmluZGluZ3MoKSwgdHJ1ZSk7CiAgICAgICAgdmFyIG92ZXJyaWRlcyA9IHRoaXMuX3RvTm9ybWFsaXplZEtleWJpbmRpbmdJdGVtcyh0aGlzLl9keW5hbWljS2V5YmluZGluZ3MsIGZhbHNlKTsKICAgICAgICB0aGlzLl9jYWNoZWRSZXNvbHZlciA9IG5ldyBLZXliaW5kaW5nUmVzb2x2ZXIoZGVmYXVsdHMsIG92ZXJyaWRlcywgZnVuY3Rpb24gKHN0cikgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5fbG9nKHN0cik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFJlc29sdmVyOwogICAgfQogIH0sIHsKICAgIGtleTogIl9kb2N1bWVudEhhc0ZvY3VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZG9jdW1lbnRIYXNGb2N1cygpIHsKICAgICAgcmV0dXJuIGRvY3VtZW50Lmhhc0ZvY3VzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3RvTm9ybWFsaXplZEtleWJpbmRpbmdJdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3RvTm9ybWFsaXplZEtleWJpbmRpbmdJdGVtcyhpdGVtcywgaXNEZWZhdWx0KSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgdmFyIHJlc3VsdExlbiA9IDA7CiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihpdGVtcyksCiAgICAgICAgX3N0ZXA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICB2YXIgd2hlbiA9IGl0ZW0ud2hlbiB8fCB1bmRlZmluZWQ7CiAgICAgICAgICB2YXIga2V5YmluZGluZyA9IGl0ZW0ua2V5YmluZGluZzsKICAgICAgICAgIGlmICgha2V5YmluZGluZykgewogICAgICAgICAgICAvLyBUaGlzIG1pZ2h0IGJlIGEgcmVtb3ZhbCBrZXliaW5kaW5nIGl0ZW0gaW4gdXNlciBzZXR0aW5ncyA9PiBhY2NlcHQgaXQKICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdExlbisrXSA9IG5ldyBSZXNvbHZlZEtleWJpbmRpbmdJdGVtKHVuZGVmaW5lZCwgaXRlbS5jb21tYW5kLCBpdGVtLmNvbW1hbmRBcmdzLCB3aGVuLCBpc0RlZmF1bHQsIG51bGwsIGZhbHNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciByZXNvbHZlZEtleWJpbmRpbmdzID0gVVNMYXlvdXRSZXNvbHZlZEtleWJpbmRpbmcucmVzb2x2ZVVzZXJCaW5kaW5nKGtleWJpbmRpbmcsIE9TKTsKICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXNvbHZlZEtleWJpbmRpbmdzKSwKICAgICAgICAgICAgICBfc3RlcDI7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgIHZhciByZXNvbHZlZEtleWJpbmRpbmcgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0TGVuKytdID0gbmV3IFJlc29sdmVkS2V5YmluZGluZ0l0ZW0ocmVzb2x2ZWRLZXliaW5kaW5nLCBpdGVtLmNvbW1hbmQsIGl0ZW0uY29tbWFuZEFyZ3MsIHdoZW4sIGlzRGVmYXVsdCwgbnVsbCwgZmFsc2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogInJlc29sdmVLZXlib2FyZEV2ZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlS2V5Ym9hcmRFdmVudChrZXlib2FyZEV2ZW50KSB7CiAgICAgIHZhciBrZXliaW5kaW5nID0gbmV3IFNpbXBsZUtleWJpbmRpbmcoa2V5Ym9hcmRFdmVudC5jdHJsS2V5LCBrZXlib2FyZEV2ZW50LnNoaWZ0S2V5LCBrZXlib2FyZEV2ZW50LmFsdEtleSwga2V5Ym9hcmRFdmVudC5tZXRhS2V5LCBrZXlib2FyZEV2ZW50LmtleUNvZGUpLnRvQ2hvcmQoKTsKICAgICAgcmV0dXJuIG5ldyBVU0xheW91dFJlc29sdmVkS2V5YmluZGluZyhrZXliaW5kaW5nLCBPUyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBTdGFuZGFsb25lS2V5YmluZGluZ1NlcnZpY2U7Cn0oQWJzdHJhY3RLZXliaW5kaW5nU2VydmljZSk7ClN0YW5kYWxvbmVLZXliaW5kaW5nU2VydmljZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oMCwgSUNvbnRleHRLZXlTZXJ2aWNlKSwgX19wYXJhbSgxLCBJQ29tbWFuZFNlcnZpY2UpLCBfX3BhcmFtKDIsIElUZWxlbWV0cnlTZXJ2aWNlKSwgX19wYXJhbSgzLCBJTm90aWZpY2F0aW9uU2VydmljZSksIF9fcGFyYW0oNCwgSUxvZ1NlcnZpY2UpLCBfX3BhcmFtKDUsIElDb2RlRWRpdG9yU2VydmljZSldLCBTdGFuZGFsb25lS2V5YmluZGluZ1NlcnZpY2UpOwpleHBvcnQgeyBTdGFuZGFsb25lS2V5YmluZGluZ1NlcnZpY2UgfTsKdmFyIERvbU5vZGVMaXN0ZW5lcnMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlKSB7CiAgX2luaGVyaXRzKERvbU5vZGVMaXN0ZW5lcnMsIF9EaXNwb3NhYmxlKTsKICB2YXIgX3N1cGVyMiA9IF9jcmVhdGVTdXBlcihEb21Ob2RlTGlzdGVuZXJzKTsKICBmdW5jdGlvbiBEb21Ob2RlTGlzdGVuZXJzKGRvbU5vZGUsIGRpc3Bvc2FibGVzKSB7CiAgICB2YXIgX3RoaXM0OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERvbU5vZGVMaXN0ZW5lcnMpOwogICAgX3RoaXM0ID0gX3N1cGVyMi5jYWxsKHRoaXMpOwogICAgX3RoaXM0LmRvbU5vZGUgPSBkb21Ob2RlOwogICAgX3RoaXM0Ll9yZWdpc3RlcihkaXNwb3NhYmxlcyk7CiAgICByZXR1cm4gX3RoaXM0OwogIH0KICByZXR1cm4gX2NyZWF0ZUNsYXNzKERvbU5vZGVMaXN0ZW5lcnMpOwp9KERpc3Bvc2FibGUpOwpmdW5jdGlvbiBpc0NvbmZpZ3VyYXRpb25PdmVycmlkZXModGhpbmcpIHsKICByZXR1cm4gdGhpbmcgJiYgX3R5cGVvZih0aGluZykgPT09ICdvYmplY3QnICYmICghdGhpbmcub3ZlcnJpZGVJZGVudGlmaWVyIHx8IHR5cGVvZiB0aGluZy5vdmVycmlkZUlkZW50aWZpZXIgPT09ICdzdHJpbmcnKSAmJiAoIXRoaW5nLnJlc291cmNlIHx8IHRoaW5nLnJlc291cmNlIGluc3RhbmNlb2YgVVJJKTsKfQpleHBvcnQgdmFyIFN0YW5kYWxvbmVDb25maWd1cmF0aW9uU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RhbmRhbG9uZUNvbmZpZ3VyYXRpb25TZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVDb25maWd1cmF0aW9uU2VydmljZSk7CiAgICB0aGlzLl9vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24gPSBuZXcgRW1pdHRlcigpOwogICAgdGhpcy5vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24gPSB0aGlzLl9vbkRpZENoYW5nZUNvbmZpZ3VyYXRpb24uZXZlbnQ7CiAgICB0aGlzLl9jb25maWd1cmF0aW9uID0gbmV3IENvbmZpZ3VyYXRpb24obmV3IERlZmF1bHRDb25maWd1cmF0aW9uTW9kZWwoKSwgbmV3IENvbmZpZ3VyYXRpb25Nb2RlbCgpLCBuZXcgQ29uZmlndXJhdGlvbk1vZGVsKCksIG5ldyBDb25maWd1cmF0aW9uTW9kZWwoKSk7CiAgfQogIF9jcmVhdGVDbGFzcyhTdGFuZGFsb25lQ29uZmlndXJhdGlvblNlcnZpY2UsIFt7CiAgICBrZXk6ICJnZXRWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoYXJnMSwgYXJnMikgewogICAgICB2YXIgc2VjdGlvbiA9IHR5cGVvZiBhcmcxID09PSAnc3RyaW5nJyA/IGFyZzEgOiB1bmRlZmluZWQ7CiAgICAgIHZhciBvdmVycmlkZXMgPSBpc0NvbmZpZ3VyYXRpb25PdmVycmlkZXMoYXJnMSkgPyBhcmcxIDogaXNDb25maWd1cmF0aW9uT3ZlcnJpZGVzKGFyZzIpID8gYXJnMiA6IHt9OwogICAgICByZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbi5nZXRWYWx1ZShzZWN0aW9uLCBvdmVycmlkZXMsIHVuZGVmaW5lZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlVmFsdWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVWYWx1ZXModmFsdWVzKSB7CiAgICAgIHZhciBwcmV2aW91cyA9IHsKICAgICAgICBkYXRhOiB0aGlzLl9jb25maWd1cmF0aW9uLnRvRGF0YSgpCiAgICAgIH07CiAgICAgIHZhciBjaGFuZ2VkS2V5cyA9IFtdOwogICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHZhbHVlcyksCiAgICAgICAgX3N0ZXAzOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZW50cnkgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICB2YXIgX2VudHJ5ID0gX3NsaWNlZFRvQXJyYXkoZW50cnksIDIpLAogICAgICAgICAgICBrZXkgPSBfZW50cnlbMF0sCiAgICAgICAgICAgIHZhbHVlID0gX2VudHJ5WzFdOwogICAgICAgICAgaWYgKHRoaXMuZ2V0VmFsdWUoa2V5KSA9PT0gdmFsdWUpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLl9jb25maWd1cmF0aW9uLnVwZGF0ZVZhbHVlKGtleSwgdmFsdWUpOwogICAgICAgICAgY2hhbmdlZEtleXMucHVzaChrZXkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgIH0KICAgICAgaWYgKGNoYW5nZWRLZXlzLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgY29uZmlndXJhdGlvbkNoYW5nZUV2ZW50ID0gbmV3IENvbmZpZ3VyYXRpb25DaGFuZ2VFdmVudCh7CiAgICAgICAgICBrZXlzOiBjaGFuZ2VkS2V5cywKICAgICAgICAgIG92ZXJyaWRlczogW10KICAgICAgICB9LCBwcmV2aW91cywgdGhpcy5fY29uZmlndXJhdGlvbik7CiAgICAgICAgY29uZmlndXJhdGlvbkNoYW5nZUV2ZW50LnNvdXJjZSA9IDggLyogQ29uZmlndXJhdGlvblRhcmdldC5NRU1PUlkgKi87CiAgICAgICAgY29uZmlndXJhdGlvbkNoYW5nZUV2ZW50LnNvdXJjZUNvbmZpZyA9IG51bGw7CiAgICAgICAgdGhpcy5fb25EaWRDaGFuZ2VDb25maWd1cmF0aW9uLmZpcmUoY29uZmlndXJhdGlvbkNoYW5nZUV2ZW50KTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlVmFsdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKGtleSwgdmFsdWUsIGFyZzMsIGFyZzQpIHsKICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVmFsdWVzKFtba2V5LCB2YWx1ZV1dKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbnNwZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbnNwZWN0KGtleSkgewogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHJldHVybiB0aGlzLl9jb25maWd1cmF0aW9uLmluc3BlY3Qoa2V5LCBvcHRpb25zLCB1bmRlZmluZWQpOwogICAgfQogIH1dKTsKICByZXR1cm4gU3RhbmRhbG9uZUNvbmZpZ3VyYXRpb25TZXJ2aWNlOwp9KCk7CnZhciBTdGFuZGFsb25lUmVzb3VyY2VDb25maWd1cmF0aW9uU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RhbmRhbG9uZVJlc291cmNlQ29uZmlndXJhdGlvblNlcnZpY2UoY29uZmlndXJhdGlvblNlcnZpY2UpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVSZXNvdXJjZUNvbmZpZ3VyYXRpb25TZXJ2aWNlKTsKICAgIHRoaXMuY29uZmlndXJhdGlvblNlcnZpY2UgPSBjb25maWd1cmF0aW9uU2VydmljZTsKICAgIHRoaXMuX29uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbiA9IG5ldyBFbWl0dGVyKCk7CiAgICB0aGlzLmNvbmZpZ3VyYXRpb25TZXJ2aWNlLm9uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbihmdW5jdGlvbiAoZSkgewogICAgICBfdGhpczUuX29uRGlkQ2hhbmdlQ29uZmlndXJhdGlvbi5maXJlKHsKICAgICAgICBhZmZlY3RlZEtleXM6IGUuYWZmZWN0ZWRLZXlzLAogICAgICAgIGFmZmVjdHNDb25maWd1cmF0aW9uOiBmdW5jdGlvbiBhZmZlY3RzQ29uZmlndXJhdGlvbihyZXNvdXJjZSwgY29uZmlndXJhdGlvbikgewogICAgICAgICAgcmV0dXJuIGUuYWZmZWN0c0NvbmZpZ3VyYXRpb24oY29uZmlndXJhdGlvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0KICBfY3JlYXRlQ2xhc3MoU3RhbmRhbG9uZVJlc291cmNlQ29uZmlndXJhdGlvblNlcnZpY2UsIFt7CiAgICBrZXk6ICJnZXRWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUocmVzb3VyY2UsIGFyZzIsIGFyZzMpIHsKICAgICAgdmFyIHBvc2l0aW9uID0gUG9zLmlzSVBvc2l0aW9uKGFyZzIpID8gYXJnMiA6IG51bGw7CiAgICAgIHZhciBzZWN0aW9uID0gcG9zaXRpb24gPyB0eXBlb2YgYXJnMyA9PT0gJ3N0cmluZycgPyBhcmczIDogdW5kZWZpbmVkIDogdHlwZW9mIGFyZzIgPT09ICdzdHJpbmcnID8gYXJnMiA6IHVuZGVmaW5lZDsKICAgICAgaWYgKHR5cGVvZiBzZWN0aW9uID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvblNlcnZpY2UuZ2V0VmFsdWUoc2VjdGlvbik7CiAgICB9CiAgfV0pOwogIHJldHVybiBTdGFuZGFsb25lUmVzb3VyY2VDb25maWd1cmF0aW9uU2VydmljZTsKfSgpOwpTdGFuZGFsb25lUmVzb3VyY2VDb25maWd1cmF0aW9uU2VydmljZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oMCwgSUNvbmZpZ3VyYXRpb25TZXJ2aWNlKV0sIFN0YW5kYWxvbmVSZXNvdXJjZUNvbmZpZ3VyYXRpb25TZXJ2aWNlKTsKdmFyIFN0YW5kYWxvbmVSZXNvdXJjZVByb3BlcnRpZXNTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdGFuZGFsb25lUmVzb3VyY2VQcm9wZXJ0aWVzU2VydmljZShjb25maWd1cmF0aW9uU2VydmljZSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVSZXNvdXJjZVByb3BlcnRpZXNTZXJ2aWNlKTsKICAgIHRoaXMuY29uZmlndXJhdGlvblNlcnZpY2UgPSBjb25maWd1cmF0aW9uU2VydmljZTsKICB9CiAgX2NyZWF0ZUNsYXNzKFN0YW5kYWxvbmVSZXNvdXJjZVByb3BlcnRpZXNTZXJ2aWNlLCBbewogICAga2V5OiAiZ2V0RU9MIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFT0wocmVzb3VyY2UsIGxhbmd1YWdlKSB7CiAgICAgIHZhciBlb2wgPSB0aGlzLmNvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKCdmaWxlcy5lb2wnLCB7CiAgICAgICAgb3ZlcnJpZGVJZGVudGlmaWVyOiBsYW5ndWFnZSwKICAgICAgICByZXNvdXJjZTogcmVzb3VyY2UKICAgICAgfSk7CiAgICAgIGlmIChlb2wgJiYgdHlwZW9mIGVvbCA9PT0gJ3N0cmluZycgJiYgZW9sICE9PSAnYXV0bycpIHsKICAgICAgICByZXR1cm4gZW9sOwogICAgICB9CiAgICAgIHJldHVybiBpc0xpbnV4IHx8IGlzTWFjaW50b3NoID8gJ1xuJyA6ICdcclxuJzsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN0YW5kYWxvbmVSZXNvdXJjZVByb3BlcnRpZXNTZXJ2aWNlOwp9KCk7ClN0YW5kYWxvbmVSZXNvdXJjZVByb3BlcnRpZXNTZXJ2aWNlID0gX19kZWNvcmF0ZShbX19wYXJhbSgwLCBJQ29uZmlndXJhdGlvblNlcnZpY2UpXSwgU3RhbmRhbG9uZVJlc291cmNlUHJvcGVydGllc1NlcnZpY2UpOwp2YXIgU3RhbmRhbG9uZVRlbGVtZXRyeVNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN0YW5kYWxvbmVUZWxlbWV0cnlTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVUZWxlbWV0cnlTZXJ2aWNlKTsKICB9CiAgX2NyZWF0ZUNsYXNzKFN0YW5kYWxvbmVUZWxlbWV0cnlTZXJ2aWNlLCBbewogICAga2V5OiAicHVibGljTG9nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwdWJsaWNMb2coZXZlbnROYW1lLCBkYXRhKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwdWJsaWNMb2cyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwdWJsaWNMb2cyKGV2ZW50TmFtZSwgZGF0YSkgewogICAgICByZXR1cm4gdGhpcy5wdWJsaWNMb2coZXZlbnROYW1lLCBkYXRhKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN0YW5kYWxvbmVUZWxlbWV0cnlTZXJ2aWNlOwp9KCk7CnZhciBTdGFuZGFsb25lV29ya3NwYWNlQ29udGV4dFNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN0YW5kYWxvbmVXb3Jrc3BhY2VDb250ZXh0U2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFsb25lV29ya3NwYWNlQ29udGV4dFNlcnZpY2UpOwogICAgdmFyIHJlc291cmNlID0gVVJJLmZyb20oewogICAgICBzY2hlbWU6IFN0YW5kYWxvbmVXb3Jrc3BhY2VDb250ZXh0U2VydmljZS5TQ0hFTUUsCiAgICAgIGF1dGhvcml0eTogJ21vZGVsJywKICAgICAgcGF0aDogJy8nCiAgICB9KTsKICAgIHRoaXMud29ya3NwYWNlID0gewogICAgICBpZDogJzQwNjRmNmVjLWNiMzgtNGFkMC1hZjY0LWVlNjQ2N2U2M2M4MicsCiAgICAgIGZvbGRlcnM6IFtuZXcgV29ya3NwYWNlRm9sZGVyKHsKICAgICAgICB1cmk6IHJlc291cmNlLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGluZGV4OiAwCiAgICAgIH0pXQogICAgfTsKICB9CiAgX2NyZWF0ZUNsYXNzKFN0YW5kYWxvbmVXb3Jrc3BhY2VDb250ZXh0U2VydmljZSwgW3sKICAgIGtleTogImdldFdvcmtzcGFjZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V29ya3NwYWNlKCkgewogICAgICByZXR1cm4gdGhpcy53b3Jrc3BhY2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0V29ya3NwYWNlRm9sZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRXb3Jrc3BhY2VGb2xkZXIocmVzb3VyY2UpIHsKICAgICAgcmV0dXJuIHJlc291cmNlICYmIHJlc291cmNlLnNjaGVtZSA9PT0gU3RhbmRhbG9uZVdvcmtzcGFjZUNvbnRleHRTZXJ2aWNlLlNDSEVNRSA/IHRoaXMud29ya3NwYWNlLmZvbGRlcnNbMF0gOiBudWxsOwogICAgfQogIH1dKTsKICByZXR1cm4gU3RhbmRhbG9uZVdvcmtzcGFjZUNvbnRleHRTZXJ2aWNlOwp9KCk7ClN0YW5kYWxvbmVXb3Jrc3BhY2VDb250ZXh0U2VydmljZS5TQ0hFTUUgPSAnaW5tZW1vcnknOwpleHBvcnQgZnVuY3Rpb24gdXBkYXRlQ29uZmlndXJhdGlvblNlcnZpY2UoY29uZmlndXJhdGlvblNlcnZpY2UsIHNvdXJjZSwgaXNEaWZmRWRpdG9yKSB7CiAgaWYgKCFzb3VyY2UpIHsKICAgIHJldHVybjsKICB9CiAgaWYgKCEoY29uZmlndXJhdGlvblNlcnZpY2UgaW5zdGFuY2VvZiBTdGFuZGFsb25lQ29uZmlndXJhdGlvblNlcnZpY2UpKSB7CiAgICByZXR1cm47CiAgfQogIHZhciB0b1VwZGF0ZSA9IFtdOwogIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICBpZiAoaXNFZGl0b3JDb25maWd1cmF0aW9uS2V5KGtleSkpIHsKICAgICAgdG9VcGRhdGUucHVzaChbImVkaXRvci4iLmNvbmNhdChrZXkpLCBzb3VyY2Vba2V5XV0pOwogICAgfQogICAgaWYgKGlzRGlmZkVkaXRvciAmJiBpc0RpZmZFZGl0b3JDb25maWd1cmF0aW9uS2V5KGtleSkpIHsKICAgICAgdG9VcGRhdGUucHVzaChbImRpZmZFZGl0b3IuIi5jb25jYXQoa2V5KSwgc291cmNlW2tleV1dKTsKICAgIH0KICB9KTsKICBpZiAodG9VcGRhdGUubGVuZ3RoID4gMCkgewogICAgY29uZmlndXJhdGlvblNlcnZpY2UudXBkYXRlVmFsdWVzKHRvVXBkYXRlKTsKICB9Cn0KdmFyIFN0YW5kYWxvbmVCdWxrRWRpdFNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN0YW5kYWxvbmVCdWxrRWRpdFNlcnZpY2UoX21vZGVsU2VydmljZSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVCdWxrRWRpdFNlcnZpY2UpOwogICAgdGhpcy5fbW9kZWxTZXJ2aWNlID0gX21vZGVsU2VydmljZTsKICAgIC8vCiAgfQogIF9jcmVhdGVDbGFzcyhTdGFuZGFsb25lQnVsa0VkaXRTZXJ2aWNlLCBbewogICAga2V5OiAiaGFzUHJldmlld0hhbmRsZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc1ByZXZpZXdIYW5kbGVyKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiYXBwbHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5KGVkaXRzLCBfb3B0aW9ucykgewogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHRleHRFZGl0cywgX2l0ZXJhdG9yNCwgX3N0ZXA0LCBlZGl0LCBtb2RlbCwgYXJyYXksIHRvdGFsRWRpdHMsIHRvdGFsRmlsZXMsIF9pdGVyYXRvcjUsIF9zdGVwNSwgX3N0ZXA1JHZhbHVlLCBfbW9kZWwsIF9lZGl0czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGV4dEVkaXRzID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGVkaXRzKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjQucygpOwogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGlmICgoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlZGl0ID0gX3N0ZXA0LnZhbHVlOwogICAgICAgICAgICAgICAgaWYgKGVkaXQgaW5zdGFuY2VvZiBSZXNvdXJjZVRleHRFZGl0KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBlZGl0IC0gb25seSB0ZXh0IGVkaXRzIGFyZSBzdXBwb3J0ZWQnKTsKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBtb2RlbCA9IHRoaXMuX21vZGVsU2VydmljZS5nZXRNb2RlbChlZGl0LnJlc291cmNlKTsKICAgICAgICAgICAgICAgIGlmIChtb2RlbCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYmFkIGVkaXQgLSBtb2RlbCBub3QgZm91bmQnKTsKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIGVkaXQudmVyc2lvbklkID09PSAnbnVtYmVyJyAmJiBtb2RlbC5nZXRWZXJzaW9uSWQoKSAhPT0gZWRpdC52ZXJzaW9uSWQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQgc3RhdGUgLSBtb2RlbCBjaGFuZ2VkIGluIHRoZSBtZWFudGltZScpOwogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBhcnJheSA9IHRleHRFZGl0cy5nZXQobW9kZWwpOwogICAgICAgICAgICAgICAgaWYgKCFhcnJheSkgewogICAgICAgICAgICAgICAgICBhcnJheSA9IFtdOwogICAgICAgICAgICAgICAgICB0ZXh0RWRpdHMuc2V0KG1vZGVsLCBhcnJheSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhcnJheS5wdXNoKEVkaXRPcGVyYXRpb24ucmVwbGFjZU1vdmUoUmFuZ2UubGlmdChlZGl0LnRleHRFZGl0LnJhbmdlKSwgZWRpdC50ZXh0RWRpdC50ZXh0KSk7CiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3I0LmUoX2NvbnRleHQyLnQwKTsKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyMzsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5maW5pc2goMjMpOwogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICB0b3RhbEVkaXRzID0gMDsKICAgICAgICAgICAgICAgIHRvdGFsRmlsZXMgPSAwOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRleHRFZGl0cyk7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgIF9zdGVwNSR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwNS52YWx1ZSwgMiksIF9tb2RlbCA9IF9zdGVwNSR2YWx1ZVswXSwgX2VkaXRzID0gX3N0ZXA1JHZhbHVlWzFdOwogICAgICAgICAgICAgICAgICAgIF9tb2RlbC5wdXNoU3RhY2tFbGVtZW50KCk7CiAgICAgICAgICAgICAgICAgICAgX21vZGVsLnB1c2hFZGl0T3BlcmF0aW9ucyhbXSwgX2VkaXRzLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgX21vZGVsLnB1c2hTdGFja0VsZW1lbnQoKTsKICAgICAgICAgICAgICAgICAgICB0b3RhbEZpbGVzICs9IDE7CiAgICAgICAgICAgICAgICAgICAgdG90YWxFZGl0cyArPSBfZWRpdHMubGVuZ3RoOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNS5lKGVycik7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3I1LmYoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIGFyaWFTdW1tYXJ5OiBzdHJpbmdzLmZvcm1hdChTdGFuZGFsb25lU2VydmljZXNOTFMuYnVsa0VkaXRTZXJ2aWNlU3VtbWFyeSwgdG90YWxFZGl0cywgdG90YWxGaWxlcykKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbMiwgMjAsIDIzLCAyNl1dKTsKICAgICAgfSkpOwogICAgfQogIH1dKTsKICByZXR1cm4gU3RhbmRhbG9uZUJ1bGtFZGl0U2VydmljZTsKfSgpOwpTdGFuZGFsb25lQnVsa0VkaXRTZXJ2aWNlID0gX19kZWNvcmF0ZShbX19wYXJhbSgwLCBJTW9kZWxTZXJ2aWNlKV0sIFN0YW5kYWxvbmVCdWxrRWRpdFNlcnZpY2UpOwp2YXIgU3RhbmRhbG9uZVVyaUxhYmVsU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RhbmRhbG9uZVVyaUxhYmVsU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFsb25lVXJpTGFiZWxTZXJ2aWNlKTsKICB9CiAgX2NyZWF0ZUNsYXNzKFN0YW5kYWxvbmVVcmlMYWJlbFNlcnZpY2UsIFt7CiAgICBrZXk6ICJnZXRVcmlMYWJlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXJpTGFiZWwocmVzb3VyY2UsIG9wdGlvbnMpIHsKICAgICAgaWYgKHJlc291cmNlLnNjaGVtZSA9PT0gJ2ZpbGUnKSB7CiAgICAgICAgcmV0dXJuIHJlc291cmNlLmZzUGF0aDsKICAgICAgfQogICAgICByZXR1cm4gcmVzb3VyY2UucGF0aDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVcmlCYXNlbmFtZUxhYmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVcmlCYXNlbmFtZUxhYmVsKHJlc291cmNlKSB7CiAgICAgIHJldHVybiBiYXNlbmFtZShyZXNvdXJjZSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBTdGFuZGFsb25lVXJpTGFiZWxTZXJ2aWNlOwp9KCk7CnZhciBTdGFuZGFsb25lQ29udGV4dFZpZXdTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29udGV4dFZpZXdTZXJ2aWNlKSB7CiAgX2luaGVyaXRzKFN0YW5kYWxvbmVDb250ZXh0Vmlld1NlcnZpY2UsIF9Db250ZXh0Vmlld1NlcnZpY2UpOwogIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyKFN0YW5kYWxvbmVDb250ZXh0Vmlld1NlcnZpY2UpOwogIGZ1bmN0aW9uIFN0YW5kYWxvbmVDb250ZXh0Vmlld1NlcnZpY2UobGF5b3V0U2VydmljZSwgX2NvZGVFZGl0b3JTZXJ2aWNlKSB7CiAgICB2YXIgX3RoaXM2OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVDb250ZXh0Vmlld1NlcnZpY2UpOwogICAgX3RoaXM2ID0gX3N1cGVyMy5jYWxsKHRoaXMsIGxheW91dFNlcnZpY2UpOwogICAgX3RoaXM2Ll9jb2RlRWRpdG9yU2VydmljZSA9IF9jb2RlRWRpdG9yU2VydmljZTsKICAgIHJldHVybiBfdGhpczY7CiAgfQogIF9jcmVhdGVDbGFzcyhTdGFuZGFsb25lQ29udGV4dFZpZXdTZXJ2aWNlLCBbewogICAga2V5OiAic2hvd0NvbnRleHRWaWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93Q29udGV4dFZpZXcoZGVsZWdhdGUsIGNvbnRhaW5lciwgc2hhZG93Um9vdCkgewogICAgICBpZiAoIWNvbnRhaW5lcikgewogICAgICAgIHZhciBjb2RlRWRpdG9yID0gdGhpcy5fY29kZUVkaXRvclNlcnZpY2UuZ2V0Rm9jdXNlZENvZGVFZGl0b3IoKSB8fCB0aGlzLl9jb2RlRWRpdG9yU2VydmljZS5nZXRBY3RpdmVDb2RlRWRpdG9yKCk7CiAgICAgICAgaWYgKGNvZGVFZGl0b3IpIHsKICAgICAgICAgIGNvbnRhaW5lciA9IGNvZGVFZGl0b3IuZ2V0Q29udGFpbmVyRG9tTm9kZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gX2dldChfZ2V0UHJvdG90eXBlT2YoU3RhbmRhbG9uZUNvbnRleHRWaWV3U2VydmljZS5wcm90b3R5cGUpLCAic2hvd0NvbnRleHRWaWV3IiwgdGhpcykuY2FsbCh0aGlzLCBkZWxlZ2F0ZSwgY29udGFpbmVyLCBzaGFkb3dSb290KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN0YW5kYWxvbmVDb250ZXh0Vmlld1NlcnZpY2U7Cn0oQ29udGV4dFZpZXdTZXJ2aWNlKTsKU3RhbmRhbG9uZUNvbnRleHRWaWV3U2VydmljZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oMCwgSUxheW91dFNlcnZpY2UpLCBfX3BhcmFtKDEsIElDb2RlRWRpdG9yU2VydmljZSldLCBTdGFuZGFsb25lQ29udGV4dFZpZXdTZXJ2aWNlKTsKdmFyIFN0YW5kYWxvbmVXb3Jrc3BhY2VUcnVzdE1hbmFnZW1lbnRTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdGFuZGFsb25lV29ya3NwYWNlVHJ1c3RNYW5hZ2VtZW50U2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFsb25lV29ya3NwYWNlVHJ1c3RNYW5hZ2VtZW50U2VydmljZSk7CiAgICB0aGlzLl9uZXZlckVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpOwogICAgdGhpcy5vbkRpZENoYW5nZVRydXN0ID0gdGhpcy5fbmV2ZXJFbWl0dGVyLmV2ZW50OwogIH0KICBfY3JlYXRlQ2xhc3MoU3RhbmRhbG9uZVdvcmtzcGFjZVRydXN0TWFuYWdlbWVudFNlcnZpY2UsIFt7CiAgICBrZXk6ICJpc1dvcmtzcGFjZVRydXN0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzV29ya3NwYWNlVHJ1c3RlZCgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfV0pOwogIHJldHVybiBTdGFuZGFsb25lV29ya3NwYWNlVHJ1c3RNYW5hZ2VtZW50U2VydmljZTsKfSgpOwp2YXIgU3RhbmRhbG9uZUxhbmd1YWdlU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0xhbmd1YWdlU2VydmljZSkgewogIF9pbmhlcml0cyhTdGFuZGFsb25lTGFuZ3VhZ2VTZXJ2aWNlLCBfTGFuZ3VhZ2VTZXJ2aWNlKTsKICB2YXIgX3N1cGVyNCA9IF9jcmVhdGVTdXBlcihTdGFuZGFsb25lTGFuZ3VhZ2VTZXJ2aWNlKTsKICBmdW5jdGlvbiBTdGFuZGFsb25lTGFuZ3VhZ2VTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVMYW5ndWFnZVNlcnZpY2UpOwogICAgcmV0dXJuIF9zdXBlcjQuY2FsbCh0aGlzKTsKICB9CiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhTdGFuZGFsb25lTGFuZ3VhZ2VTZXJ2aWNlKTsKfShMYW5ndWFnZVNlcnZpY2UpOwp2YXIgU3RhbmRhbG9uZUxvZ1NlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Mb2dTZXJ2aWNlKSB7CiAgX2luaGVyaXRzKFN0YW5kYWxvbmVMb2dTZXJ2aWNlLCBfTG9nU2VydmljZSk7CiAgdmFyIF9zdXBlcjUgPSBfY3JlYXRlU3VwZXIoU3RhbmRhbG9uZUxvZ1NlcnZpY2UpOwogIGZ1bmN0aW9uIFN0YW5kYWxvbmVMb2dTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YW5kYWxvbmVMb2dTZXJ2aWNlKTsKICAgIHJldHVybiBfc3VwZXI1LmNhbGwodGhpcywgbmV3IENvbnNvbGVMb2dnZXIoKSk7CiAgfQogIHJldHVybiBfY3JlYXRlQ2xhc3MoU3RhbmRhbG9uZUxvZ1NlcnZpY2UpOwp9KExvZ1NlcnZpY2UpOwp2YXIgU3RhbmRhbG9uZUNvbnRleHRNZW51U2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbnRleHRNZW51U2VydmljZSkgewogIF9pbmhlcml0cyhTdGFuZGFsb25lQ29udGV4dE1lbnVTZXJ2aWNlLCBfQ29udGV4dE1lbnVTZXJ2aWNlKTsKICB2YXIgX3N1cGVyNiA9IF9jcmVhdGVTdXBlcihTdGFuZGFsb25lQ29udGV4dE1lbnVTZXJ2aWNlKTsKICBmdW5jdGlvbiBTdGFuZGFsb25lQ29udGV4dE1lbnVTZXJ2aWNlKHRlbGVtZXRyeVNlcnZpY2UsIG5vdGlmaWNhdGlvblNlcnZpY2UsIGNvbnRleHRWaWV3U2VydmljZSwga2V5YmluZGluZ1NlcnZpY2UsIHRoZW1lU2VydmljZSkgewogICAgdmFyIF90aGlzNzsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFuZGFsb25lQ29udGV4dE1lbnVTZXJ2aWNlKTsKICAgIF90aGlzNyA9IF9zdXBlcjYuY2FsbCh0aGlzLCB0ZWxlbWV0cnlTZXJ2aWNlLCBub3RpZmljYXRpb25TZXJ2aWNlLCBjb250ZXh0Vmlld1NlcnZpY2UsIGtleWJpbmRpbmdTZXJ2aWNlLCB0aGVtZVNlcnZpY2UpOwogICAgX3RoaXM3LmNvbmZpZ3VyZSh7CiAgICAgIGJsb2NrTW91c2U6IGZhbHNlCiAgICB9KTsgLy8gd2UgZG8gbm90IHdhbnQgdGhhdCBpbiB0aGUgc3RhbmRhbG9uZSBlZGl0b3IKICAgIHJldHVybiBfdGhpczc7CiAgfQogIHJldHVybiBfY3JlYXRlQ2xhc3MoU3RhbmRhbG9uZUNvbnRleHRNZW51U2VydmljZSk7Cn0oQ29udGV4dE1lbnVTZXJ2aWNlKTsKU3RhbmRhbG9uZUNvbnRleHRNZW51U2VydmljZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oMCwgSVRlbGVtZXRyeVNlcnZpY2UpLCBfX3BhcmFtKDEsIElOb3RpZmljYXRpb25TZXJ2aWNlKSwgX19wYXJhbSgyLCBJQ29udGV4dFZpZXdTZXJ2aWNlKSwgX19wYXJhbSgzLCBJS2V5YmluZGluZ1NlcnZpY2UpLCBfX3BhcmFtKDQsIElUaGVtZVNlcnZpY2UpXSwgU3RhbmRhbG9uZUNvbnRleHRNZW51U2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElDb25maWd1cmF0aW9uU2VydmljZSwgU3RhbmRhbG9uZUNvbmZpZ3VyYXRpb25TZXJ2aWNlKTsKcmVnaXN0ZXJTaW5nbGV0b24oSVRleHRSZXNvdXJjZUNvbmZpZ3VyYXRpb25TZXJ2aWNlLCBTdGFuZGFsb25lUmVzb3VyY2VDb25maWd1cmF0aW9uU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElUZXh0UmVzb3VyY2VQcm9wZXJ0aWVzU2VydmljZSwgU3RhbmRhbG9uZVJlc291cmNlUHJvcGVydGllc1NlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJV29ya3NwYWNlQ29udGV4dFNlcnZpY2UsIFN0YW5kYWxvbmVXb3Jrc3BhY2VDb250ZXh0U2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElMYWJlbFNlcnZpY2UsIFN0YW5kYWxvbmVVcmlMYWJlbFNlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJVGVsZW1ldHJ5U2VydmljZSwgU3RhbmRhbG9uZVRlbGVtZXRyeVNlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJRGlhbG9nU2VydmljZSwgU3RhbmRhbG9uZURpYWxvZ1NlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJTm90aWZpY2F0aW9uU2VydmljZSwgU3RhbmRhbG9uZU5vdGlmaWNhdGlvblNlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJTWFya2VyU2VydmljZSwgTWFya2VyU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElMYW5ndWFnZVNlcnZpY2UsIFN0YW5kYWxvbmVMYW5ndWFnZVNlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJU3RhbmRhbG9uZVRoZW1lU2VydmljZSwgU3RhbmRhbG9uZVRoZW1lU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElMb2dTZXJ2aWNlLCBTdGFuZGFsb25lTG9nU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElNb2RlbFNlcnZpY2UsIE1vZGVsU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElNYXJrZXJEZWNvcmF0aW9uc1NlcnZpY2UsIE1hcmtlckRlY29yYXRpb25zU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElDb250ZXh0S2V5U2VydmljZSwgQ29udGV4dEtleVNlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJUHJvZ3Jlc3NTZXJ2aWNlLCBTdGFuZGFsb25lUHJvZ3Jlc3NTZXJ2aWNlKTsKcmVnaXN0ZXJTaW5nbGV0b24oSUVkaXRvclByb2dyZXNzU2VydmljZSwgU3RhbmRhbG9uZUVkaXRvclByb2dyZXNzU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElTdG9yYWdlU2VydmljZSwgSW5NZW1vcnlTdG9yYWdlU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElFZGl0b3JXb3JrZXJTZXJ2aWNlLCBFZGl0b3JXb3JrZXJTZXJ2aWNlKTsKcmVnaXN0ZXJTaW5nbGV0b24oSUJ1bGtFZGl0U2VydmljZSwgU3RhbmRhbG9uZUJ1bGtFZGl0U2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElXb3Jrc3BhY2VUcnVzdE1hbmFnZW1lbnRTZXJ2aWNlLCBTdGFuZGFsb25lV29ya3NwYWNlVHJ1c3RNYW5hZ2VtZW50U2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElUZXh0TW9kZWxTZXJ2aWNlLCBTdGFuZGFsb25lVGV4dE1vZGVsU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElBY2Nlc3NpYmlsaXR5U2VydmljZSwgQWNjZXNzaWJpbGl0eVNlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJTGlzdFNlcnZpY2UsIExpc3RTZXJ2aWNlKTsKcmVnaXN0ZXJTaW5nbGV0b24oSUNvbW1hbmRTZXJ2aWNlLCBTdGFuZGFsb25lQ29tbWFuZFNlcnZpY2UpOwpyZWdpc3RlclNpbmdsZXRvbihJS2V5YmluZGluZ1NlcnZpY2UsIFN0YW5kYWxvbmVLZXliaW5kaW5nU2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElRdWlja0lucHV0U2VydmljZSwgU3RhbmRhbG9uZVF1aWNrSW5wdXRTZXJ2aWNlKTsKcmVnaXN0ZXJTaW5nbGV0b24oSUNvbnRleHRWaWV3U2VydmljZSwgU3RhbmRhbG9uZUNvbnRleHRWaWV3U2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElPcGVuZXJTZXJ2aWNlLCBPcGVuZXJTZXJ2aWNlKTsKcmVnaXN0ZXJTaW5nbGV0b24oSUNsaXBib2FyZFNlcnZpY2UsIEJyb3dzZXJDbGlwYm9hcmRTZXJ2aWNlKTsKcmVnaXN0ZXJTaW5nbGV0b24oSUNvbnRleHRNZW51U2VydmljZSwgU3RhbmRhbG9uZUNvbnRleHRNZW51U2VydmljZSk7CnJlZ2lzdGVyU2luZ2xldG9uKElNZW51U2VydmljZSwgTWVudVNlcnZpY2UpOwovKioKICogV2UgZG9uJ3Qgd2FudCB0byBlYWdlcmx5IGluc3RhbnRpYXRlIHNlcnZpY2VzIGJlY2F1c2UgZW1iZWRkZXJzIGdldCBhIG9uZSB0aW1lIGNoYW5jZQogKiB0byBvdmVycmlkZSBzZXJ2aWNlcyB3aGVuIHRoZXkgY3JlYXRlIHRoZSBmaXJzdCBlZGl0b3IuCiAqLwpleHBvcnQgdmFyIFN0YW5kYWxvbmVTZXJ2aWNlczsKKGZ1bmN0aW9uIChTdGFuZGFsb25lU2VydmljZXMpIHsKICB2YXIgc2VydmljZUNvbGxlY3Rpb24gPSBuZXcgU2VydmljZUNvbGxlY3Rpb24oKTsKICB2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGdldFNpbmdsZXRvblNlcnZpY2VEZXNjcmlwdG9ycygpKSwKICAgIF9zdGVwNjsKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgdmFyIF9zdGVwNiR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwNi52YWx1ZSwgMiksCiAgICAgICAgaWQgPSBfc3RlcDYkdmFsdWVbMF0sCiAgICAgICAgZGVzY3JpcHRvciA9IF9zdGVwNiR2YWx1ZVsxXTsKICAgICAgc2VydmljZUNvbGxlY3Rpb24uc2V0KGlkLCBkZXNjcmlwdG9yKTsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjYuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3I2LmYoKTsKICB9CiAgdmFyIGluc3RhbnRpYXRpb25TZXJ2aWNlID0gbmV3IEluc3RhbnRpYXRpb25TZXJ2aWNlKHNlcnZpY2VDb2xsZWN0aW9uLCB0cnVlKTsKICBzZXJ2aWNlQ29sbGVjdGlvbi5zZXQoSUluc3RhbnRpYXRpb25TZXJ2aWNlLCBpbnN0YW50aWF0aW9uU2VydmljZSk7CiAgZnVuY3Rpb24gZ2V0KHNlcnZpY2VJZCkgewogICAgdmFyIHIgPSBzZXJ2aWNlQ29sbGVjdGlvbi5nZXQoc2VydmljZUlkKTsKICAgIGlmICghcikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgc2VydmljZSAnICsgc2VydmljZUlkKTsKICAgIH0KICAgIGlmIChyIGluc3RhbmNlb2YgU3luY0Rlc2NyaXB0b3IpIHsKICAgICAgcmV0dXJuIGluc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uKGZ1bmN0aW9uIChhY2Nlc3NvcikgewogICAgICAgIHJldHVybiBhY2Nlc3Nvci5nZXQoc2VydmljZUlkKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gcjsKICAgIH0KICB9CiAgU3RhbmRhbG9uZVNlcnZpY2VzLmdldCA9IGdldDsKICB2YXIgaW5pdGlhbGl6ZWQgPSBmYWxzZTsKICBmdW5jdGlvbiBpbml0aWFsaXplKG92ZXJyaWRlcykgewogICAgaWYgKGluaXRpYWxpemVkKSB7CiAgICAgIHJldHVybiBpbnN0YW50aWF0aW9uU2VydmljZTsKICAgIH0KICAgIGluaXRpYWxpemVkID0gdHJ1ZTsKICAgIC8vIEFkZCBzaW5nbGV0b25zIHRoYXQgd2VyZSByZWdpc3RlcmVkIGFmdGVyIHRoaXMgbW9kdWxlIGxvYWRlZAogICAgdmFyIF9pdGVyYXRvcjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihnZXRTaW5nbGV0b25TZXJ2aWNlRGVzY3JpcHRvcnMoKSksCiAgICAgIF9zdGVwNzsKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yNy5zKCk7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIF9zdGVwNyR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwNy52YWx1ZSwgMiksCiAgICAgICAgICBpZCA9IF9zdGVwNyR2YWx1ZVswXSwKICAgICAgICAgIGRlc2NyaXB0b3IgPSBfc3RlcDckdmFsdWVbMV07CiAgICAgICAgaWYgKCFzZXJ2aWNlQ29sbGVjdGlvbi5nZXQoaWQpKSB7CiAgICAgICAgICBzZXJ2aWNlQ29sbGVjdGlvbi5zZXQoaWQsIGRlc2NyaXB0b3IpOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBJbml0aWFsaXplIHRoZSBzZXJ2aWNlIGNvbGxlY3Rpb24gd2l0aCB0aGUgb3ZlcnJpZGVzLCBidXQgb25seSBpZiB0aGUKICAgICAgLy8gc2VydmljZSB3YXMgbm90IGluc3RhbnRpYXRlZCBpbiB0aGUgbWVhbnRpbWUuCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yNy5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3I3LmYoKTsKICAgIH0KICAgIGZvciAodmFyIHNlcnZpY2VJZCBpbiBvdmVycmlkZXMpIHsKICAgICAgaWYgKG92ZXJyaWRlcy5oYXNPd25Qcm9wZXJ0eShzZXJ2aWNlSWQpKSB7CiAgICAgICAgdmFyIHNlcnZpY2VJZGVudGlmaWVyID0gY3JlYXRlRGVjb3JhdG9yKHNlcnZpY2VJZCk7CiAgICAgICAgdmFyIHIgPSBzZXJ2aWNlQ29sbGVjdGlvbi5nZXQoc2VydmljZUlkZW50aWZpZXIpOwogICAgICAgIGlmIChyIGluc3RhbmNlb2YgU3luY0Rlc2NyaXB0b3IpIHsKICAgICAgICAgIHNlcnZpY2VDb2xsZWN0aW9uLnNldChzZXJ2aWNlSWRlbnRpZmllciwgb3ZlcnJpZGVzW3NlcnZpY2VJZF0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIGluc3RhbnRpYXRpb25TZXJ2aWNlOwogIH0KICBTdGFuZGFsb25lU2VydmljZXMuaW5pdGlhbGl6ZSA9IGluaXRpYWxpemU7Cn0pKFN0YW5kYWxvbmVTZXJ2aWNlcyB8fCAoU3RhbmRhbG9uZVNlcnZpY2VzID0ge30pKTs="},{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","strings","dom","StandardKeyboardEvent","Emitter","SimpleKeybinding","createKeybinding","ImmortalReference","toDisposable","DisposableStore","Disposable","combinedDisposable","OS","isLinux","isMacintosh","Severity","URI","IBulkEditService","ResourceTextEdit","isDiffEditorConfigurationKey","isEditorConfigurationKey","EditOperation","Position","Pos","Range","IModelService","ITextModelService","ITextResourceConfigurationService","ITextResourcePropertiesService","CommandsRegistry","ICommandService","IConfigurationService","Configuration","ConfigurationModel","ConfigurationChangeEvent","IContextKeyService","IDialogService","createDecorator","IInstantiationService","AbstractKeybindingService","IKeybindingService","KeybindingResolver","KeybindingsRegistry","ResolvedKeybindingItem","USLayoutResolvedKeybinding","ILabelService","INotificationService","NoOpNotification","IEditorProgressService","IProgressService","ITelemetryService","IWorkspaceContextService","WorkspaceFolder","ILayoutService","StandaloneServicesNLS","basename","ICodeEditorService","ConsoleLogger","ILogService","LogService","IWorkspaceTrustManagementService","IContextMenuService","IContextViewService","ContextViewService","LanguageService","ContextMenuService","IThemeService","getSingletonServiceDescriptors","registerSingleton","OpenerService","IEditorWorkerService","EditorWorkerService","ILanguageService","MarkerDecorationsService","IMarkerDecorationsService","ModelService","StandaloneQuickInputService","StandaloneThemeService","IStandaloneThemeService","AccessibilityService","IAccessibilityService","IMenuService","MenuService","BrowserClipboardService","IClipboardService","ContextKeyService","SyncDescriptor","InstantiationService","ServiceCollection","IListService","ListService","IMarkerService","MarkerService","IOpenerService","IQuickInputService","IStorageService","InMemoryStorageService","DefaultConfigurationModel","SimpleModel","model","disposed","_onWillDispose","fire","StandaloneTextModelService","modelService","resource","getModel","Error","StandaloneEditorProgressService","NULL_PROGRESS_RUNNER","promise","delay","total","worked","StandaloneProgressService","_options","task","onDidCancel","report","StandaloneDialogService","confirmation","doConfirm","confirmed","checkboxChecked","messageText","message","detail","window","confirm","severity","buttons","options","choice","StandaloneNotificationService","notify","Info","Warning","error","notification","console","warn","log","NO_OP","None","StandaloneCommandService","instantiationService","_onWillExecuteCommand","_onDidExecuteCommand","onWillExecuteCommand","event","onDidExecuteCommand","_instantiationService","id","command","getCommand","args","commandId","invokeFunction","handler","err","StandaloneKeybindingService","contextKeyService","commandService","telemetryService","notificationService","logService","codeEditorService","_cachedResolver","_dynamicKeybindings","_domNodeListeners","addContainer","domNode","disposables","add","addDisposableListener","EventType","KEY_DOWN","keyEvent","shouldPreventDefault","_dispatch","preventDefault","stopPropagation","KEY_UP","_singleModifierDispatch","push","DomNodeListeners","removeContainer","domNodeListeners","splice","dispose","addCodeEditor","codeEditor","getOption","getContainerDomNode","removeCodeEditor","_register","onCodeEditorAdd","onCodeEditorRemove","listCodeEditors","forEach","addDiffEditor","diffEditor","removeDiffEditor","onDiffEditorAdd","onDiffEditorRemove","listDiffEditors","keybinding","when","registerCommand","addDynamicKeybindings","rules","entries","map","rule","_a","_b","parts","commandArgs","weight1","weight2","extensionId","isBuiltinExtension","concat","updateResolver","_onDidUpdateKeybindings","defaults","_toNormalizedKeybindingItems","getDefaultKeybindings","overrides","str","_log","document","hasFocus","items","isDefault","resultLen","item","undefined","resolvedKeybindings","resolveUserBinding","resolvedKeybinding","keyboardEvent","ctrlKey","shiftKey","altKey","metaKey","keyCode","toChord","isConfigurationOverrides","thing","overrideIdentifier","StandaloneConfigurationService","_onDidChangeConfiguration","onDidChangeConfiguration","_configuration","arg1","arg2","section","getValue","values","previous","data","toData","changedKeys","entry","updateValue","configurationChangeEvent","keys","source","sourceConfig","arg3","arg4","updateValues","inspect","StandaloneResourceConfigurationService","configurationService","affectedKeys","affectsConfiguration","configuration","position","isIPosition","StandaloneResourcePropertiesService","language","eol","StandaloneTelemetryService","eventName","publicLog","StandaloneWorkspaceContextService","from","scheme","SCHEME","authority","path","workspace","folders","uri","name","index","updateConfigurationService","isDiffEditor","toUpdate","StandaloneBulkEditService","_modelService","edits","textEdits","Map","edit","versionId","getVersionId","array","get","set","replaceMove","lift","textEdit","range","text","totalEdits","totalFiles","pushStackElement","pushEditOperations","ariaSummary","format","bulkEditServiceSummary","StandaloneUriLabelService","fsPath","StandaloneContextViewService","layoutService","_codeEditorService","delegate","container","shadowRoot","getFocusedCodeEditor","getActiveCodeEditor","StandaloneWorkspaceTrustManagementService","_neverEmitter","onDidChangeTrust","StandaloneLanguageService","StandaloneLogService","StandaloneContextMenuService","contextViewService","keybindingService","themeService","configure","blockMouse","StandaloneServices","serviceCollection","descriptor","serviceId","accessor","initialized","initialize","hasOwnProperty","serviceIdentifier"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport '../../common/languages/languageConfigurationRegistry.js';\nimport './standaloneCodeEditorService.js';\nimport './standaloneLayoutService.js';\nimport '../../../platform/undoRedo/common/undoRedoService.js';\nimport '../../common/services/languageFeatureDebounce.js';\nimport * as strings from '../../../base/common/strings.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { SimpleKeybinding, createKeybinding } from '../../../base/common/keybindings.js';\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable, combinedDisposable } from '../../../base/common/lifecycle.js';\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\nimport Severity from '../../../base/common/severity.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IBulkEditService, ResourceTextEdit } from '../../browser/services/bulkEditService.js';\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/editorConfigurationSchema.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position as Pos } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfiguration.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { Configuration, ConfigurationModel, ConfigurationChangeEvent } from '../../../platform/configuration/common/configurationModels.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nimport { createDecorator, IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { INotificationService, NoOpNotification } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService, IProgressService } from '../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService, WorkspaceFolder } from '../../../platform/workspace/common/workspace.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { StandaloneServicesNLS } from '../../common/standaloneStrings.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { ConsoleLogger, ILogService, LogService } from '../../../platform/log/common/log.js';\nimport { IWorkspaceTrustManagementService } from '../../../platform/workspace/common/workspaceTrust.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\nimport { LanguageService } from '../../common/services/languageService.js';\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { getSingletonServiceDescriptors, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { OpenerService } from '../../browser/services/openerService.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { EditorWorkerService } from '../../browser/services/editorWorkerService.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { ModelService } from '../../common/services/modelService.js';\nimport { StandaloneQuickInputService } from './quickInput/standaloneQuickInputService.js';\nimport { StandaloneThemeService } from './standaloneThemeService.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { AccessibilityService } from '../../../platform/accessibility/browser/accessibilityService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\nimport '../../common/services/languageFeaturesService.js';\nimport { DefaultConfigurationModel } from '../../../platform/configuration/common/configurations.js';\nclass SimpleModel {\n    constructor(model) {\n        this.disposed = false;\n        this.model = model;\n        this._onWillDispose = new Emitter();\n    }\n    get textEditorModel() {\n        return this.model;\n    }\n    dispose() {\n        this.disposed = true;\n        this._onWillDispose.fire();\n    }\n}\nlet StandaloneTextModelService = class StandaloneTextModelService {\n    constructor(modelService) {\n        this.modelService = modelService;\n    }\n    createModelReference(resource) {\n        const model = this.modelService.getModel(resource);\n        if (!model) {\n            return Promise.reject(new Error(`Model not found`));\n        }\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\n    }\n};\nStandaloneTextModelService = __decorate([\n    __param(0, IModelService)\n], StandaloneTextModelService);\nclass StandaloneEditorProgressService {\n    show() {\n        return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER;\n    }\n    showWhile(promise, delay) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield promise;\n        });\n    }\n}\nStandaloneEditorProgressService.NULL_PROGRESS_RUNNER = {\n    done: () => { },\n    total: () => { },\n    worked: () => { }\n};\nclass StandaloneProgressService {\n    withProgress(_options, task, onDidCancel) {\n        return task({\n            report: () => { },\n        });\n    }\n}\nclass StandaloneDialogService {\n    confirm(confirmation) {\n        return this.doConfirm(confirmation).then(confirmed => {\n            return {\n                confirmed,\n                checkboxChecked: false // unsupported\n            };\n        });\n    }\n    doConfirm(confirmation) {\n        let messageText = confirmation.message;\n        if (confirmation.detail) {\n            messageText = messageText + '\\n\\n' + confirmation.detail;\n        }\n        return Promise.resolve(window.confirm(messageText));\n    }\n    show(severity, message, buttons, options) {\n        return Promise.resolve({ choice: 0 });\n    }\n}\nexport class StandaloneNotificationService {\n    info(message) {\n        return this.notify({ severity: Severity.Info, message });\n    }\n    warn(message) {\n        return this.notify({ severity: Severity.Warning, message });\n    }\n    error(error) {\n        return this.notify({ severity: Severity.Error, message: error });\n    }\n    notify(notification) {\n        switch (notification.severity) {\n            case Severity.Error:\n                console.error(notification.message);\n                break;\n            case Severity.Warning:\n                console.warn(notification.message);\n                break;\n            default:\n                console.log(notification.message);\n                break;\n        }\n        return StandaloneNotificationService.NO_OP;\n    }\n    status(message, options) {\n        return Disposable.None;\n    }\n}\nStandaloneNotificationService.NO_OP = new NoOpNotification();\nlet StandaloneCommandService = class StandaloneCommandService {\n    constructor(instantiationService) {\n        this._onWillExecuteCommand = new Emitter();\n        this._onDidExecuteCommand = new Emitter();\n        this.onWillExecuteCommand = this._onWillExecuteCommand.event;\n        this.onDidExecuteCommand = this._onDidExecuteCommand.event;\n        this._instantiationService = instantiationService;\n    }\n    executeCommand(id, ...args) {\n        const command = CommandsRegistry.getCommand(id);\n        if (!command) {\n            return Promise.reject(new Error(`command '${id}' not found`));\n        }\n        try {\n            this._onWillExecuteCommand.fire({ commandId: id, args });\n            const result = this._instantiationService.invokeFunction.apply(this._instantiationService, [command.handler, ...args]);\n            this._onDidExecuteCommand.fire({ commandId: id, args });\n            return Promise.resolve(result);\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    }\n};\nStandaloneCommandService = __decorate([\n    __param(0, IInstantiationService)\n], StandaloneCommandService);\nexport { StandaloneCommandService };\nlet StandaloneKeybindingService = class StandaloneKeybindingService extends AbstractKeybindingService {\n    constructor(contextKeyService, commandService, telemetryService, notificationService, logService, codeEditorService) {\n        super(contextKeyService, commandService, telemetryService, notificationService, logService);\n        this._cachedResolver = null;\n        this._dynamicKeybindings = [];\n        this._domNodeListeners = [];\n        const addContainer = (domNode) => {\n            const disposables = new DisposableStore();\n            // for standard keybindings\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._dispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                    keyEvent.stopPropagation();\n                }\n            }));\n            // for single modifier chord keybindings (e.g. shift shift)\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._singleModifierDispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                }\n            }));\n            this._domNodeListeners.push(new DomNodeListeners(domNode, disposables));\n        };\n        const removeContainer = (domNode) => {\n            for (let i = 0; i < this._domNodeListeners.length; i++) {\n                const domNodeListeners = this._domNodeListeners[i];\n                if (domNodeListeners.domNode === domNode) {\n                    this._domNodeListeners.splice(i, 1);\n                    domNodeListeners.dispose();\n                }\n            }\n        };\n        const addCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(56 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            addContainer(codeEditor.getContainerDomNode());\n        };\n        const removeCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(56 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            removeContainer(codeEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onCodeEditorAdd(addCodeEditor));\n        this._register(codeEditorService.onCodeEditorRemove(removeCodeEditor));\n        codeEditorService.listCodeEditors().forEach(addCodeEditor);\n        const addDiffEditor = (diffEditor) => {\n            addContainer(diffEditor.getContainerDomNode());\n        };\n        const removeDiffEditor = (diffEditor) => {\n            removeContainer(diffEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onDiffEditorAdd(addDiffEditor));\n        this._register(codeEditorService.onDiffEditorRemove(removeDiffEditor));\n        codeEditorService.listDiffEditors().forEach(addDiffEditor);\n    }\n    addDynamicKeybinding(command, keybinding, handler, when) {\n        return combinedDisposable(CommandsRegistry.registerCommand(command, handler), this.addDynamicKeybindings([{\n                keybinding,\n                command,\n                when\n            }]));\n    }\n    addDynamicKeybindings(rules) {\n        const entries = rules.map((rule) => {\n            var _a, _b;\n            const keybinding = createKeybinding(rule.keybinding, OS);\n            return {\n                keybinding: (_a = keybinding === null || keybinding === void 0 ? void 0 : keybinding.parts) !== null && _a !== void 0 ? _a : null,\n                command: (_b = rule.command) !== null && _b !== void 0 ? _b : null,\n                commandArgs: rule.commandArgs,\n                when: rule.when,\n                weight1: 1000,\n                weight2: 0,\n                extensionId: null,\n                isBuiltinExtension: false\n            };\n        });\n        this._dynamicKeybindings = this._dynamicKeybindings.concat(entries);\n        this.updateResolver();\n        return toDisposable(() => {\n            // Search the first entry and remove them all since they will be contiguous\n            for (let i = 0; i < this._dynamicKeybindings.length; i++) {\n                if (this._dynamicKeybindings[i] === entries[0]) {\n                    this._dynamicKeybindings.splice(i, entries.length);\n                    this.updateResolver();\n                    return;\n                }\n            }\n        });\n    }\n    updateResolver() {\n        this._cachedResolver = null;\n        this._onDidUpdateKeybindings.fire();\n    }\n    _getResolver() {\n        if (!this._cachedResolver) {\n            const defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\n            const overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\n            this._cachedResolver = new KeybindingResolver(defaults, overrides, (str) => this._log(str));\n        }\n        return this._cachedResolver;\n    }\n    _documentHasFocus() {\n        return document.hasFocus();\n    }\n    _toNormalizedKeybindingItems(items, isDefault) {\n        const result = [];\n        let resultLen = 0;\n        for (const item of items) {\n            const when = item.when || undefined;\n            const keybinding = item.keybinding;\n            if (!keybinding) {\n                // This might be a removal keybinding item in user settings => accept it\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault, null, false);\n            }\n            else {\n                const resolvedKeybindings = USLayoutResolvedKeybinding.resolveUserBinding(keybinding, OS);\n                for (const resolvedKeybinding of resolvedKeybindings) {\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault, null, false);\n                }\n            }\n        }\n        return result;\n    }\n    resolveKeyboardEvent(keyboardEvent) {\n        const keybinding = new SimpleKeybinding(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode).toChord();\n        return new USLayoutResolvedKeybinding(keybinding, OS);\n    }\n};\nStandaloneKeybindingService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICommandService),\n    __param(2, ITelemetryService),\n    __param(3, INotificationService),\n    __param(4, ILogService),\n    __param(5, ICodeEditorService)\n], StandaloneKeybindingService);\nexport { StandaloneKeybindingService };\nclass DomNodeListeners extends Disposable {\n    constructor(domNode, disposables) {\n        super();\n        this.domNode = domNode;\n        this._register(disposables);\n    }\n}\nfunction isConfigurationOverrides(thing) {\n    return thing\n        && typeof thing === 'object'\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\n        && (!thing.resource || thing.resource instanceof URI);\n}\nexport class StandaloneConfigurationService {\n    constructor() {\n        this._onDidChangeConfiguration = new Emitter();\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        this._configuration = new Configuration(new DefaultConfigurationModel(), new ConfigurationModel(), new ConfigurationModel(), new ConfigurationModel());\n    }\n    getValue(arg1, arg2) {\n        const section = typeof arg1 === 'string' ? arg1 : undefined;\n        const overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\n        return this._configuration.getValue(section, overrides, undefined);\n    }\n    updateValues(values) {\n        const previous = { data: this._configuration.toData() };\n        const changedKeys = [];\n        for (const entry of values) {\n            const [key, value] = entry;\n            if (this.getValue(key) === value) {\n                continue;\n            }\n            this._configuration.updateValue(key, value);\n            changedKeys.push(key);\n        }\n        if (changedKeys.length > 0) {\n            const configurationChangeEvent = new ConfigurationChangeEvent({ keys: changedKeys, overrides: [] }, previous, this._configuration);\n            configurationChangeEvent.source = 8 /* ConfigurationTarget.MEMORY */;\n            configurationChangeEvent.sourceConfig = null;\n            this._onDidChangeConfiguration.fire(configurationChangeEvent);\n        }\n        return Promise.resolve();\n    }\n    updateValue(key, value, arg3, arg4) {\n        return this.updateValues([[key, value]]);\n    }\n    inspect(key, options = {}) {\n        return this._configuration.inspect(key, options, undefined);\n    }\n}\nlet StandaloneResourceConfigurationService = class StandaloneResourceConfigurationService {\n    constructor(configurationService) {\n        this.configurationService = configurationService;\n        this._onDidChangeConfiguration = new Emitter();\n        this.configurationService.onDidChangeConfiguration((e) => {\n            this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: (resource, configuration) => e.affectsConfiguration(configuration) });\n        });\n    }\n    getValue(resource, arg2, arg3) {\n        const position = Pos.isIPosition(arg2) ? arg2 : null;\n        const section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\n        if (typeof section === 'undefined') {\n            return this.configurationService.getValue();\n        }\n        return this.configurationService.getValue(section);\n    }\n};\nStandaloneResourceConfigurationService = __decorate([\n    __param(0, IConfigurationService)\n], StandaloneResourceConfigurationService);\nlet StandaloneResourcePropertiesService = class StandaloneResourcePropertiesService {\n    constructor(configurationService) {\n        this.configurationService = configurationService;\n    }\n    getEOL(resource, language) {\n        const eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource });\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\n            return eol;\n        }\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\n    }\n};\nStandaloneResourcePropertiesService = __decorate([\n    __param(0, IConfigurationService)\n], StandaloneResourcePropertiesService);\nclass StandaloneTelemetryService {\n    publicLog(eventName, data) {\n        return Promise.resolve(undefined);\n    }\n    publicLog2(eventName, data) {\n        return this.publicLog(eventName, data);\n    }\n}\nclass StandaloneWorkspaceContextService {\n    constructor() {\n        const resource = URI.from({ scheme: StandaloneWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\n        this.workspace = { id: '4064f6ec-cb38-4ad0-af64-ee6467e63c82', folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\n    }\n    getWorkspace() {\n        return this.workspace;\n    }\n    getWorkspaceFolder(resource) {\n        return resource && resource.scheme === StandaloneWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\n    }\n}\nStandaloneWorkspaceContextService.SCHEME = 'inmemory';\nexport function updateConfigurationService(configurationService, source, isDiffEditor) {\n    if (!source) {\n        return;\n    }\n    if (!(configurationService instanceof StandaloneConfigurationService)) {\n        return;\n    }\n    const toUpdate = [];\n    Object.keys(source).forEach((key) => {\n        if (isEditorConfigurationKey(key)) {\n            toUpdate.push([`editor.${key}`, source[key]]);\n        }\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\n            toUpdate.push([`diffEditor.${key}`, source[key]]);\n        }\n    });\n    if (toUpdate.length > 0) {\n        configurationService.updateValues(toUpdate);\n    }\n}\nlet StandaloneBulkEditService = class StandaloneBulkEditService {\n    constructor(_modelService) {\n        this._modelService = _modelService;\n        //\n    }\n    hasPreviewHandler() {\n        return false;\n    }\n    apply(edits, _options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const textEdits = new Map();\n            for (const edit of edits) {\n                if (!(edit instanceof ResourceTextEdit)) {\n                    throw new Error('bad edit - only text edits are supported');\n                }\n                const model = this._modelService.getModel(edit.resource);\n                if (!model) {\n                    throw new Error('bad edit - model not found');\n                }\n                if (typeof edit.versionId === 'number' && model.getVersionId() !== edit.versionId) {\n                    throw new Error('bad state - model changed in the meantime');\n                }\n                let array = textEdits.get(model);\n                if (!array) {\n                    array = [];\n                    textEdits.set(model, array);\n                }\n                array.push(EditOperation.replaceMove(Range.lift(edit.textEdit.range), edit.textEdit.text));\n            }\n            let totalEdits = 0;\n            let totalFiles = 0;\n            for (const [model, edits] of textEdits) {\n                model.pushStackElement();\n                model.pushEditOperations([], edits, () => []);\n                model.pushStackElement();\n                totalFiles += 1;\n                totalEdits += edits.length;\n            }\n            return {\n                ariaSummary: strings.format(StandaloneServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles)\n            };\n        });\n    }\n};\nStandaloneBulkEditService = __decorate([\n    __param(0, IModelService)\n], StandaloneBulkEditService);\nclass StandaloneUriLabelService {\n    getUriLabel(resource, options) {\n        if (resource.scheme === 'file') {\n            return resource.fsPath;\n        }\n        return resource.path;\n    }\n    getUriBasenameLabel(resource) {\n        return basename(resource);\n    }\n}\nlet StandaloneContextViewService = class StandaloneContextViewService extends ContextViewService {\n    constructor(layoutService, _codeEditorService) {\n        super(layoutService);\n        this._codeEditorService = _codeEditorService;\n    }\n    showContextView(delegate, container, shadowRoot) {\n        if (!container) {\n            const codeEditor = this._codeEditorService.getFocusedCodeEditor() || this._codeEditorService.getActiveCodeEditor();\n            if (codeEditor) {\n                container = codeEditor.getContainerDomNode();\n            }\n        }\n        return super.showContextView(delegate, container, shadowRoot);\n    }\n};\nStandaloneContextViewService = __decorate([\n    __param(0, ILayoutService),\n    __param(1, ICodeEditorService)\n], StandaloneContextViewService);\nclass StandaloneWorkspaceTrustManagementService {\n    constructor() {\n        this._neverEmitter = new Emitter();\n        this.onDidChangeTrust = this._neverEmitter.event;\n    }\n    isWorkspaceTrusted() {\n        return true;\n    }\n}\nclass StandaloneLanguageService extends LanguageService {\n    constructor() {\n        super();\n    }\n}\nclass StandaloneLogService extends LogService {\n    constructor() {\n        super(new ConsoleLogger());\n    }\n}\nlet StandaloneContextMenuService = class StandaloneContextMenuService extends ContextMenuService {\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, themeService) {\n        super(telemetryService, notificationService, contextViewService, keybindingService, themeService);\n        this.configure({ blockMouse: false }); // we do not want that in the standalone editor\n    }\n};\nStandaloneContextMenuService = __decorate([\n    __param(0, ITelemetryService),\n    __param(1, INotificationService),\n    __param(2, IContextViewService),\n    __param(3, IKeybindingService),\n    __param(4, IThemeService)\n], StandaloneContextMenuService);\nregisterSingleton(IConfigurationService, StandaloneConfigurationService);\nregisterSingleton(ITextResourceConfigurationService, StandaloneResourceConfigurationService);\nregisterSingleton(ITextResourcePropertiesService, StandaloneResourcePropertiesService);\nregisterSingleton(IWorkspaceContextService, StandaloneWorkspaceContextService);\nregisterSingleton(ILabelService, StandaloneUriLabelService);\nregisterSingleton(ITelemetryService, StandaloneTelemetryService);\nregisterSingleton(IDialogService, StandaloneDialogService);\nregisterSingleton(INotificationService, StandaloneNotificationService);\nregisterSingleton(IMarkerService, MarkerService);\nregisterSingleton(ILanguageService, StandaloneLanguageService);\nregisterSingleton(IStandaloneThemeService, StandaloneThemeService);\nregisterSingleton(ILogService, StandaloneLogService);\nregisterSingleton(IModelService, ModelService);\nregisterSingleton(IMarkerDecorationsService, MarkerDecorationsService);\nregisterSingleton(IContextKeyService, ContextKeyService);\nregisterSingleton(IProgressService, StandaloneProgressService);\nregisterSingleton(IEditorProgressService, StandaloneEditorProgressService);\nregisterSingleton(IStorageService, InMemoryStorageService);\nregisterSingleton(IEditorWorkerService, EditorWorkerService);\nregisterSingleton(IBulkEditService, StandaloneBulkEditService);\nregisterSingleton(IWorkspaceTrustManagementService, StandaloneWorkspaceTrustManagementService);\nregisterSingleton(ITextModelService, StandaloneTextModelService);\nregisterSingleton(IAccessibilityService, AccessibilityService);\nregisterSingleton(IListService, ListService);\nregisterSingleton(ICommandService, StandaloneCommandService);\nregisterSingleton(IKeybindingService, StandaloneKeybindingService);\nregisterSingleton(IQuickInputService, StandaloneQuickInputService);\nregisterSingleton(IContextViewService, StandaloneContextViewService);\nregisterSingleton(IOpenerService, OpenerService);\nregisterSingleton(IClipboardService, BrowserClipboardService);\nregisterSingleton(IContextMenuService, StandaloneContextMenuService);\nregisterSingleton(IMenuService, MenuService);\n/**\n * We don't want to eagerly instantiate services because embedders get a one time chance\n * to override services when they create the first editor.\n */\nexport var StandaloneServices;\n(function (StandaloneServices) {\n    const serviceCollection = new ServiceCollection();\n    for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n        serviceCollection.set(id, descriptor);\n    }\n    const instantiationService = new InstantiationService(serviceCollection, true);\n    serviceCollection.set(IInstantiationService, instantiationService);\n    function get(serviceId) {\n        const r = serviceCollection.get(serviceId);\n        if (!r) {\n            throw new Error('Missing service ' + serviceId);\n        }\n        if (r instanceof SyncDescriptor) {\n            return instantiationService.invokeFunction((accessor) => accessor.get(serviceId));\n        }\n        else {\n            return r;\n        }\n    }\n    StandaloneServices.get = get;\n    let initialized = false;\n    function initialize(overrides) {\n        if (initialized) {\n            return instantiationService;\n        }\n        initialized = true;\n        // Add singletons that were registered after this module loaded\n        for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n            if (!serviceCollection.get(id)) {\n                serviceCollection.set(id, descriptor);\n            }\n        }\n        // Initialize the service collection with the overrides, but only if the\n        // service was not instantiated in the meantime.\n        for (const serviceId in overrides) {\n            if (overrides.hasOwnProperty(serviceId)) {\n                const serviceIdentifier = createDecorator(serviceId);\n                const r = serviceCollection.get(serviceIdentifier);\n                if (r instanceof SyncDescriptor) {\n                    serviceCollection.set(serviceIdentifier, overrides[serviceId]);\n                }\n            }\n        }\n        return instantiationService;\n    }\n    StandaloneServices.initialize = initialize;\n})(StandaloneServices || (StandaloneServices = {}));\n"],"mappings":"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"}]}