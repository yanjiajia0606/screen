{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/list/map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/list/map.vue","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCB7IGdldExpc3QgYXMgX2dldExpc3QsIGdldE9iaiwgYWRkT2JqLCBkZWxPYmosIHVwZGF0ZU9iaiB9IGZyb20gJ0AvYXBpL21hcCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybToge30sCiAgICAgIGRhdGE6IFtdLAogICAgICBvcHRpb246IHsKICAgICAgICBsYWJlbFdpZHRoOiAxMDAsCiAgICAgICAgaW5kZXg6IHRydWUsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIGhlYWRlckFsaWduOiAnY2VudGVyJywKICAgICAgICBjb2x1bW46IFt7CiAgICAgICAgICBsYWJlbDogJ+WcsOWbvuWQjeensCcsCiAgICAgICAgICBwcm9wOiAnbmFtZScsCiAgICAgICAgICByb3c6IHRydWUsCiAgICAgICAgICBydWxlczogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXlnLDlm77lkI3np7AiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH1dCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICflnLDlm77mlbDmja4nLAogICAgICAgICAgcHJvcDogJ2RhdGEnLAogICAgICAgICAgc3BhbjogMjQsCiAgICAgICAgICBoaWRlOiB0cnVlLAogICAgICAgICAgdHlwZTogJ3RleHRhcmVhJywKICAgICAgICAgIG1pblJvd3M6IDIwCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHZhaWxkRGF0YTogZnVuY3Rpb24gdmFpbGREYXRhKGlkKSB7CiAgICAgIHJldHVybiBbMCwgMSwgMl0uaW5jbHVkZXMoaWQpOwogICAgfSwKICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uIGJlZm9yZU9wZW4oZG9uZSwgdHlwZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAodHlwZSA9PSAnZWRpdCcpIHsKICAgICAgICBnZXRPYmoodGhpcy5mb3JtLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgIF90aGlzLmZvcm0gPSBkYXRhOwogICAgICAgICAgX3RoaXMuZm9ybS5kYXRhID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShfdGhpcy5mb3JtLmRhdGEpLCBudWxsLCA0KTsKICAgICAgICAgIGRvbmUoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb25lKCk7CiAgICAgIH0KICAgIH0sCiAgICByb3dEZWw6IGZ1bmN0aW9uIHJvd0RlbChyb3csIGluZGV4KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBpZiAodGhpcy52YWlsZERhdGEoaW5kZXgpICYmIHRoaXMuJHdlYnNpdGUuaXNEZW1vKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLiR3ZWJzaXRlLmlzRGVtb1RpcCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBkZWxPYmoocm93LmlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgIF90aGlzMi5nZXRMaXN0KCk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCiAgICByb3dVcGRhdGU6IGZ1bmN0aW9uIHJvd1VwZGF0ZShyb3csIGluZGV4LCBkb25lKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBpZiAodGhpcy52YWlsZERhdGEoaW5kZXgpICYmIHRoaXMuJHdlYnNpdGUuaXNEZW1vKSB7CiAgICAgICAgZG9uZSgpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy4kd2Vic2l0ZS5pc0RlbW9UaXApOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB1cGRhdGVPYmoocm93KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBkb25lKCk7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpOwogICAgICAgIF90aGlzMy5nZXRMaXN0KCk7CiAgICAgIH0pOwogICAgfSwKICAgIHJvd1NhdmU6IGZ1bmN0aW9uIHJvd1NhdmUocm93LCBkb25lKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICBhZGRPYmoocm93KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2Vzcygn5paw5aKe5oiQ5YqfJyk7CiAgICAgICAgX3RoaXM0LmdldExpc3QoKTsKICAgICAgICBkb25lKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICBfZ2V0TGlzdCh7CiAgICAgICAgY3VycmVudDogMSwKICAgICAgICBzaXplOiAxMDAKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIF90aGlzNS5kYXRhID0gZGF0YS5yZWNvcmRzOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;AA0BA;AACA;EACAA;IACA;MACAC;MACAD;MACAE;QACAC;QACAC;QACAC;QACAC;QACAC,SACA;UACAC;UACAC;UACAC;UACAC;YACAC;YACAC;YACAC;UACA;QACA,GACA;UACAN;UACAC;UACAM;UACAC;UACAC;UACAC;QACA;MAEA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACAC;UACA;UACA;UACA;UACAC;QACA;MACA;QACAA;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA;MACA;MACA;QACAC;QACAC;QACAV;MACA;QACAW;UACA;UACA;QACA;MACA,sBAEA;IAEA;IACAC;MAAA;MACA;QACAL;QACA;QACA;MACA;MACAM;QACAN;QACA;QACA;MAEA;IACA;IACAO;MAAA;MACAC;QACA;QACA;QACAR;MACA;IACA;IACAS;MAAA;MACAA;QACAC;QACAC;MACA;QACA;QACA;MACA;IACA;EACA;AACA","names":["data","form","option","labelWidth","index","align","headerAlign","column","label","prop","row","rules","required","message","trigger","span","hide","type","minRows","created","methods","vaildData","beforeOpen","getObj","done","rowDel","confirmButtonText","cancelButtonText","delObj","rowUpdate","updateObj","rowSave","addObj","getList","current","size"],"sourceRoot":"src/page/list","sources":["map.vue"],"sourcesContent":["<template>\n  <avue-crud :option=\"option\"\n             v-model=\"form\"\n             @row-save=\"rowSave\"\n             @row-update=\"rowUpdate\"\n             @row-del=\"rowDel\"\n             :before-open=\"beforeOpen\"\n             :data=\"data\">\n    <template slot-scope=\"{}\"\n              slot=\"menuLeft\">\n      <div style=\"display: inline-block;\">\n        <a class=\"title\"\n           target=\"_blank\"\n           href=\"https://datav.aliyun.com/tools/atlas/#&lat=33.521903996156105&lng=104.29849999999999&zoom=4\">\n          <el-button type=\"primary\"\n                     icon=\"el-icon-add-location\"\n                     size=\"small\">\n            添加更多地图\n          </el-button>\n        </a>\n      </div>\n    </template>\n  </avue-crud>\n</template>\n\n<script>\nimport { getList, getObj, addObj, delObj, updateObj } from '@/api/map'\nexport default {\n  data () {\n    return {\n      form: {},\n      data: [],\n      option: {\n        labelWidth: 100,\n        index: true,\n        align: 'center',\n        headerAlign: 'center',\n        column: [\n          {\n            label: '地图名称',\n            prop: 'name',\n            row: true,\n            rules: [{\n              required: true,\n              message: \"请输入地图名称\",\n              trigger: \"blur\"\n            }]\n          },\n          {\n            label: '地图数据',\n            prop: 'data',\n            span: 24,\n            hide: true,\n            type: 'textarea',\n            minRows: 20\n          }\n        ]\n      }\n    }\n  },\n  created () {\n    this.getList()\n  },\n  methods: {\n    vaildData (id) {\n      return [0, 1, 2].includes(id)\n    },\n    beforeOpen (done, type) {\n      if (type == 'edit') {\n        getObj(this.form.id).then(res => {\n          const data = res.data.data;\n          this.form = data\n          this.form.data = JSON.stringify(JSON.parse(this.form.data), null, 4)\n          done()\n        })\n      } else {\n        done()\n      }\n    },\n    rowDel (row, index) {\n      if (this.vaildData(index) && this.$website.isDemo) {\n        this.$message.error(this.$website.isDemoTip)\n        return false;\n      }\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        delObj(row.id).then(() => {\n          this.$message.success('删除成功');\n          this.getList()\n        })\n      }).catch(() => {\n\n      });\n\n    },\n    rowUpdate (row, index, done) {\n      if (this.vaildData(index) && this.$website.isDemo) {\n        done();\n        this.$message.error(this.$website.isDemoTip)\n        return false;\n      }\n      updateObj(row).then(() => {\n        done();\n        this.$message.success('修改成功');\n        this.getList()\n\n      })\n    },\n    rowSave (row, done) {\n      addObj(row).then(() => {\n        this.$message.success('新增成功');\n        this.getList()\n        done();\n      })\n    },\n    getList () {\n      getList({\n        current: 1,\n        size: 100,\n      }).then(res => {\n        const data = res.data.data;\n        this.data = data.records;\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>"]}]}