{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/subgroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/subgroup.vue","mtime":1668483948375},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovL+azqOWGjOiHquWumuS5iee7hOS7tgppbXBvcnQgY29tcG9uZW50cyBmcm9tICdAL2NvbXBvbmVudHMvJzsKaW1wb3J0IGNyeXB0byBmcm9tICdAL3V0aWxzL2NyeXB0byc7CmltcG9ydCB7IGR5bmFtaWNTcWwgfSBmcm9tICdAL2FwaS9kYic7CmltcG9ydCB7IGdldE9iaiBhcyBnZXRSZWNvcmRPYmogfSBmcm9tICdAL2FwaS9yZWNvcmQnOwppbXBvcnQgeyBnZXRGdW5jdGlvbiB9IGZyb20gJ0AvdXRpbHMvdXRpbHMnOwppbXBvcnQgY29tbW9uIGZyb20gJ0AvY29uZmlnJzsKaW1wb3J0IGVjaGFydENvbXBvbmVudHMgZnJvbSAnLi4vLi4vZWNoYXJ0Lyc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzdWJncm91cCcsCiAgaW5qZWN0OiBbJ2NvbnRhaW4nLCAnY29udGFpbmVyJ10sCiAgcHJvdmlkZTogZnVuY3Rpb24gcHJvdmlkZSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRhaW46IHRoaXMuY29udGFpbiwKICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lcgogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsCiAgcHJvcHM6IHsKICAgIG5hdjogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3FsRm9ybWF0dGVyOiBkeW5hbWljU3FsLAogICAgICByZWNvcmRGb3JtYXR0ZXI6IGdldFJlY29yZE9iaiwKICAgICAgY29tbW9uOiBjb21tb24KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICBPYmplY3Qua2V5cyhlY2hhcnRDb21wb25lbnRzKS5tYXAoZnVuY3Rpb24gKGVsZSkgewogICAgICAgIHZhciBjb21wb25lbnQgPSBlY2hhcnRDb21wb25lbnRzW2VsZV07CiAgICAgICAgVnVlLmNvbXBvbmVudChjb21wb25lbnQubmFtZSwgY29tcG9uZW50KTsKICAgICAgfSk7CiAgICAgIHRoaXMuZ2V0RnVuY3Rpb24gPSBnZXRGdW5jdGlvbjsKICAgIH0sCiAgICBnZXRJdGVtT2JqOiBmdW5jdGlvbiBnZXRJdGVtT2JqKCkgewogICAgICB2YXIgbGlzdCA9IHRoaXMuJHJlZnNbdGhpcy5jb21tb24uTkFNRSArIHRoaXMuY29udGFpbi5hY3RpdmVPYmouaW5kZXhdIHx8IFtdOwogICAgICByZXR1cm4gbGlzdFswXTsKICAgIH0sCiAgICAvL+WIt+aWsOaVsOaNrgogICAgaGFuZGxlUmVmcmVzaDogZnVuY3Rpb24gaGFuZGxlUmVmcmVzaCgpIHsKICAgICAgZGVidWdnZXI7CiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmdldEl0ZW1PYmooKTsKICAgICAgY29uc29sZS5sb2cocmVzdWx0LCAncmVzdWx0Jyk7CiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gcmVzdWx0LnVwZGF0ZURhdGEoKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9LAogICAgLy/ojrflj5blr7nosaEKICAgIGdldERyYWdPYmo6IGZ1bmN0aW9uIGdldERyYWdPYmoodmFsKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzWyIiLmNvbmNhdCh0aGlzLmNvbW1vbi5ERUFGTkFNRSkuY29uY2F0KHZhbCldOwogICAgfSwKICAgIGhhbmRsZU1vdmU6IGZ1bmN0aW9uIGhhbmRsZU1vdmUoX3JlZikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaW5kZXggPSBfcmVmLmluZGV4LAogICAgICAgIGxlZnQgPSBfcmVmLmxlZnQsCiAgICAgICAgdG9wID0gX3JlZi50b3A7CiAgICAgIGlmICh0aGlzLmNvbnRhaW4uYWN0aXZlSW5kZXggIT09IGluZGV4KSByZXR1cm47CiAgICAgIHRoaXMuY29udGFpbi5hY3RpdmVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoX3RoaXMuY29udGFpbi5hY3RpdmVJbmRleCA9PT0gaXRlbS5pbmRleCkgcmV0dXJuOwogICAgICAgIGl0ZW0ubGVmdCA9IGl0ZW0ubGVmdCArIGxlZnQ7CiAgICAgICAgaXRlbS50b3AgPSBpdGVtLnRvcCArIHRvcDsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlT3ZlcjogZnVuY3Rpb24gaGFuZGxlT3ZlcihfcmVmMikgewogICAgICB2YXIgaW5kZXggPSBfcmVmMi5pbmRleDsKICAgICAgdGhpcy5jb250YWluLm92ZXJhY3RpdmUgPSBpbmRleDsKICAgIH0sCiAgICBoYW5kbGVGb2N1czogZnVuY3Rpb24gaGFuZGxlRm9jdXMoX3JlZjMpIHsKICAgICAgdmFyIGluZGV4ID0gX3JlZjMuaW5kZXg7CiAgICAgIHRoaXMuY29udGFpbi5hY3RpdmVJbmRleCA9IGluZGV4OwogICAgICB0aGlzLmNvbnRhaW5lci5ncmFkZUZsYWcgPSB0cnVlOwogICAgICB0aGlzLmNvbnRhaW4uc2VsZWN0TmF2KGluZGV4KTsKICAgIH0sCiAgICBoYW5kbGVCbHVyOiBmdW5jdGlvbiBoYW5kbGVCbHVyKF9yZWY0KSB7CiAgICAgIHZhciBpbmRleCA9IF9yZWY0LmluZGV4LAogICAgICAgIGxlZnQgPSBfcmVmNC5sZWZ0LAogICAgICAgIHRvcCA9IF9yZWY0LnRvcCwKICAgICAgICB3aWR0aCA9IF9yZWY0LndpZHRoLAogICAgICAgIGhlaWdodCA9IF9yZWY0LmhlaWdodDsKICAgICAgaWYgKGluZGV4ICE9PSB0aGlzLmNvbnRhaW4uYWN0aXZlSW5kZXgpIHJldHVybjsKICAgICAgdGhpcy5jb250YWluZXIuZ3JhZGVGbGFnID0gZmFsc2U7CiAgICAgIHRoaXMuJHNldCh0aGlzLmNvbnRhaW4uYWN0aXZlT2JqLmNvbXBvbmVudCwgJ3dpZHRoJywgd2lkdGgpOwogICAgICB0aGlzLiRzZXQodGhpcy5jb250YWluLmFjdGl2ZU9iai5jb21wb25lbnQsICdoZWlnaHQnLCBoZWlnaHQpOwogICAgICB0aGlzLiRzZXQodGhpcy5jb250YWluLmFjdGl2ZU9iaiwgJ2xlZnQnLCBsZWZ0KTsKICAgICAgdGhpcy4kc2V0KHRoaXMuY29udGFpbi5hY3RpdmVPYmosICd0b3AnLCB0b3ApOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA;EACAC;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACAC;QACA;QACAC;MACA;MACA;IACA;IACAC;MACA,WACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACAC;MACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAAC;QAAAC;MACA;MACA;QACA;QACAC;QACAA;MACA;IACA;IACAC;MAAA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;IACA;IACAC;MAAA;QAAAL;QAAAC;QAAAK;QAAAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA","names":["name","inject","provide","contain","container","components","props","nav","type","default","data","sqlFormatter","recordFormatter","common","created","methods","init","Object","Vue","getItemObj","handleRefresh","console","getDragObj","handleMove","left","top","item","handleOver","handleFocus","handleBlur","width","height"],"sourceRoot":"src/page/group","sources":["subgroup.vue"],"sourcesContent":["<template>\n  <div>\n    <template v-for=\"item in nav\">\n      <div\n        :key=\"item.index\"\n        v-if=\"!item.children\"\n        v-contextmenu=\"{\n          id: contain.menuId,\n          event: contain.handleContextMenu,\n          value: item,\n        }\"\n      >\n        <avue-draggable\n          v-bind=\"item\"\n          :scale=\"container.stepScale\"\n          :disabled=\"!contain.menuFlag\"\n          :step=\"container.stepScale\"\n          :width=\"item.component.width\"\n          :height=\"item.component.height\"\n          :ref=\"common.DEAFNAME + item.index\"\n          :id=\"common.DEAFNAME + item.index\"\n          :active-flag=\"contain.active.includes(item.index)\"\n          v-show=\"!item.display\"\n          @move=\"handleMove\"\n          @over=\"handleOver\"\n          @focus=\"handleFocus\"\n          @blur=\"handleBlur\"\n        >\n          <component\n            :ref=\"common.NAME + item.index\"\n            :id=\"common.NAME + item.index\"\n            :is=\"common.COMPNAME + item.component.name\"\n            v-bind=\"item\"\n            :component=\"item.component\"\n            :data-formatter=\"getFunction(item.dataFormatter)\"\n            :click-formatter=\"getFunction(item.clickFormatter, true)\"\n            :echart-formatter=\"getFunction(item.echartFormatter)\"\n            :label-formatter=\"getFunction(item.labelFormatter)\"\n            :styles-formatter=\"getFunction(item.stylesFormatter)\"\n            :formatter=\"getFunction(item.formatter)\"\n            :sql-formatter=\"sqlFormatter\"\n            :record-formatter=\"recordFormatter\"\n            :width=\"item.component.width\"\n            :height=\"item.component.height\"\n            :disabled=\"!contain.menuFlag\"\n            :scale=\"container.stepScale\"\n            title=\"\"\n          />\n        </avue-draggable>\n        <subgroup :nav=\"item.children\"></subgroup>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\n//注册自定义组件\nimport components from '@/components/'\nimport crypto from '@/utils/crypto'\nimport { dynamicSql } from '@/api/db'\nimport { getObj as getRecordObj } from '@/api/record'\nimport { getFunction } from '@/utils/utils'\nimport common from '@/config'\nimport echartComponents from '../../echart/'\nimport Vue from 'vue'\nexport default {\n  name: 'subgroup',\n  inject: ['contain', 'container'],\n  provide() {\n    return {\n      contain: this.contain,\n      container: this.container,\n    }\n  },\n  components: components,\n  props: {\n    nav: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n  },\n  data() {\n    return {\n      sqlFormatter: dynamicSql,\n      recordFormatter: getRecordObj,\n      common: common,\n    }\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    init() {\n      Object.keys(echartComponents).map((ele) => {\n        let component = echartComponents[ele]\n        Vue.component(component.name, component)\n      })\n      this.getFunction = getFunction\n    },\n    getItemObj() {\n      let list =\n        this.$refs[this.common.NAME + this.contain.activeObj.index] || []\n      return list[0]\n    },\n    //刷新数据\n    handleRefresh() {\n      debugger\n      let result = this.getItemObj()\n      console.log(result, 'result')\n      if (result) {\n        return result.updateData()\n      }\n      return Promise.resolve()\n    },\n    //获取对象\n    getDragObj(val) {\n      return this.$refs[`${this.common.DEAFNAME}${val}`]\n    },\n    handleMove({ index, left, top }) {\n      if (this.contain.activeIndex !== index) return\n      this.contain.activeList.forEach((item) => {\n        if (this.contain.activeIndex === item.index) return\n        item.left = item.left + left\n        item.top = item.top + top\n      })\n    },\n    handleOver({ index }) {\n      this.contain.overactive = index\n    },\n    handleFocus({ index }) {\n      this.contain.activeIndex = index\n      this.container.gradeFlag = true\n      this.contain.selectNav(index)\n    },\n    handleBlur({ index, left, top, width, height }) {\n      if (index !== this.contain.activeIndex) return\n      this.container.gradeFlag = false\n      this.$set(this.contain.activeObj.component, 'width', width)\n      this.$set(this.contain.activeObj.component, 'height', height)\n      this.$set(this.contain.activeObj, 'left', left)\n      this.$set(this.contain.activeObj, 'top', top)\n    },\n  },\n}\n</script>\n"]}]}