{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/header.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/header.vue","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuYXRvYi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tZXhjZXB0aW9uLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1leGNlcHRpb24uc3RhY2suanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWV4Y2VwdGlvbi50by1zdHJpbmctdGFnLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1sYXN0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1sYXN0LWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCB7IHVybCB9IGZyb20gJ0AvY29uZmlnJzsKaW1wb3J0IHJlc3VsdCBmcm9tICcuL3Jlc3VsdCc7CmltcG9ydCB7IHVwZGF0ZUNvbXBvbmVudCB9IGZyb20gJ0AvYXBpL3Zpc3VhbCc7CmltcG9ydCBzaGFyZSBmcm9tICcuL3NoYXJlJzsKZXhwb3J0IGRlZmF1bHQgewogIGluamVjdDogWyJjb250YWluIl0sCiAgcHJvdmlkZTogZnVuY3Rpb24gcHJvdmlkZSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRhaW46IHRoaXMuY29udGFpbgogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHJlc3VsdDogcmVzdWx0LAogICAgc2hhcmU6IHNoYXJlCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGlmICh0aGlzLiR3ZWJzaXRlLmF1dG9TYXZlKSB7CiAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5oYW5kbGVCdWlsZCh1bmRlZmluZWQsIGZhbHNlLCBmYWxzZSk7CiAgICAgIH0sIHRoaXMuJHdlYnNpdGUuYXV0b1NhdmVUaW1lKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVJlc2V0OiBmdW5jdGlvbiBoYW5kbGVSZXNldCgpIHsKICAgICAgdGhpcy5jb250YWluLm1lbnVGbGFnID0gdHJ1ZTsKICAgICAgdGhpcy5jb250YWluLnNldFNjYWxlKCk7CiAgICB9LAogICAgaGFuZGxlRmxhZzogZnVuY3Rpb24gaGFuZGxlRmxhZyhuYW1lKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLmNvbnRhaW5bbmFtZV0gPSAhdGhpcy5jb250YWluW25hbWVdOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHNjcmVlbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVucycpOwogICAgICAgIF90aGlzMi5jb250YWluLnNldFNjYWxlKHNjcmVlbnMuY2xpZW50V2lkdGgpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVWaWV3OiBmdW5jdGlvbiBoYW5kbGVWaWV3KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy5jb250YWluLm1lbnVGbGFnID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuY29udGFpbi5oYW5kbGVJbml0QWN0aXZlKCk7CiAgICAgICAgX3RoaXMzLmNvbnRhaW4uc2V0U2NhbGUoc2NyZWVucy5jbGllbnRXaWR0aCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUJ1aWxkOiBmdW5jdGlvbiBoYW5kbGVCdWlsZChmbiwgdGlwKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB2YXIgZmlyc3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogICAgICB2YXIgaXNGdW4gPSB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbic7CiAgICAgIGlmICghaXNGdW4gJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkIDw9IDEwMCAmJiB0aGlzLiR3ZWJzaXRlLmlzRGVtbykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy4kd2Vic2l0ZS5pc0RlbW9UaXApOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoZmlyc3QpIHRoaXMuY29udGFpbi5oYW5kbGVJbml0QWN0aXZlKCk7CiAgICAgIHZhciBsb2FkaW5nOwogICAgICBpZiAodGlwICE9PSBmYWxzZSkgewogICAgICAgIGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICAgIGxvY2s6IHRydWUsCiAgICAgICAgICB0ZXh0OiAn5q2j5Zyo5L+d5a2Y6YWN572u77yM6K+356iN5ZCOJywKICAgICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgaHRtbDJjYW52YXMoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSwgewogICAgICAgICAgdXNlQ09SUzogdHJ1ZSwKICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogbnVsbCwKICAgICAgICAgIGxvZ2dpbmc6IGZhbHNlLAogICAgICAgICAgYWxsb3dUYWludDogdHJ1ZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykgewogICAgICAgICAgZnVuY3Rpb24gZGF0YVVSTHRvRmlsZShkYXRhdXJsLCBmaWxlbmFtZSkgewogICAgICAgICAgICB2YXIgYXJyID0gZGF0YXVybC5zcGxpdCgnLCcpLAogICAgICAgICAgICAgIG1pbWUgPSBhcnJbMF0ubWF0Y2goLzooLio/KTsvKVsxXSwKICAgICAgICAgICAgICBic3RyID0gYXRvYihhcnJbMV0pLAogICAgICAgICAgICAgIG4gPSBic3RyLmxlbmd0aCwKICAgICAgICAgICAgICB1OGFyciA9IG5ldyBVaW50OEFycmF5KG4pOwogICAgICAgICAgICB3aGlsZSAobi0tKSB7CiAgICAgICAgICAgICAgdThhcnJbbl0gPSBic3RyLmNoYXJDb2RlQXQobik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWxlKFt1OGFycl0sIGZpbGVuYW1lLCB7CiAgICAgICAgICAgICAgdHlwZTogbWltZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBmaWxlID0gZGF0YVVSTHRvRmlsZShjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywgMC4xKSwgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAnLmpwZycpOwogICAgICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTsKICAgICAgICAgIGF4aW9zLnBvc3QodXJsICsgJy92aXN1YWwvcHV0LWZpbGUnLCBmb3JtZGF0YSwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICAgICAgICB9CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICB2YXIgdXJsID0gZGF0YS5saW5rOwogICAgICAgICAgICB2YXIgZm9ybWRhdGEgPSB7CiAgICAgICAgICAgICAgdmlzdWFsOiB7CiAgICAgICAgICAgICAgICBpZDogX3RoaXM0LmNvbnRhaW4udmlzdWFsLmlkLAogICAgICAgICAgICAgICAgYmFja2dyb3VuZFVybDogdXJsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjb25maWc6IHsKICAgICAgICAgICAgICAgIGlkOiBfdGhpczQuY29udGFpbi5vYmouY29uZmlnLmlkLAogICAgICAgICAgICAgICAgdmlzdWFsSWQ6IF90aGlzNC5jb250YWluLnZpc3VhbC5pZCwKICAgICAgICAgICAgICAgIGRldGFpbDogSlNPTi5zdHJpbmdpZnkoX3RoaXM0LmNvbnRhaW4uY29uZmlnKSwKICAgICAgICAgICAgICAgIGNvbXBvbmVudDogSlNPTi5zdHJpbmdpZnkoX3RoaXM0LmNvbnRhaW4ubmF2KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUNvbXBvbmVudChmb3JtZGF0YSk7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbG9hZGluZyAmJiBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgIGlmIChpc0Z1bikgewogICAgICAgICAgICAgIGZuKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHRpcCAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzNC4kbWVzc2FnZS5zdWNjZXNzKCflpKflsY/phY3nva7kv53lrZjmiJDlip8nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlLmVycm9yKCflpKflsY/phY3nva7kv53lrZjlpLHotKXvvIzor7fmo4Dmn6XmnI3liqHnq6/phY3nva4nKTsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUltZzogZnVuY3Rpb24gaGFuZGxlSW1nKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm5a+85Ye65aSn5bGP5Zu+54mH77yfJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS4kU2NyZWVuc2hvdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpLCB7CiAgICAgICAgICB1c2VDT1JTOiB0cnVlLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBudWxsLAogICAgICAgICAgbG9nZ2luZzogZmFsc2UKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHsKICAgICAgICAgIF90aGlzNS5kb3duRmlsZShjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9qcGVnIiwgMC44KSwgbmV3IERhdGUoKS5nZXRUaW1lKCkpOwogICAgICAgICAgX3RoaXM1LiRtZXNzYWdlLnN1Y2Nlc3MoJ+WbvueJh+WvvOWHuuaIkOWKnycpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgaGFuZGxlU2hhcmU6IGZ1bmN0aW9uIGhhbmRsZVNoYXJlKCkgewogICAgICB0aGlzLiRyZWZzLnNoYXJlLmhhbmRsZVNob3coKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACAC;IACAC;EACA;EACAC;IAAA;IACA;MACAC;QACA;MACA;IACA;EAEA;EACAC;IACAC;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;MACA;MACA;QACA;QACA;MACA;MACA;MACA;MACA;QACAC;UACAC;UACAC;UACAC;UACAC;QACA;MACA;MACA;QACAC;UACAC;UACAC;UACAC;UACAC;QACA;UACA;YACA;cACAC;cACAC;cACAC;cACAC;YACA;cACAA;YACA;YACA;cAAAC;YAAA;UACA;UAEA;UACA;UACAC;UACAC;YACAC;cACA;YACA;UACA;YACA;YACA;YACA;cACAC;gBACAC;gBACAC;cACA;cACAC;gBACAF;gBACAG;gBACAC;gBACAC;cACA;YACA;YACA;UACA;YACAxB;YACA;cACAyB;YACA;cACA;gBACA;cACA;YACA;UACA;YACAC;YACA;YACA1B;UACA;QACA;MACA;IACA;IACA2B;MAAA;MACA;QACAC;QACAC;QACAf;MACA;QACA;UACAR;UACAC;UACAC;QACA;UACA;UACA;QACA;MACA,sBAEA;IAEA;IACAsB;MACA;IACA;EACA;AACA","names":["inject","provide","contain","components","result","share","created","setInterval","methods","handleReset","handleFlag","handleView","handleBuild","loading","lock","text","spinner","background","html2canvas","useCORS","backgroundColor","logging","allowTaint","mime","bstr","n","u8arr","type","formdata","axios","headers","visual","id","backgroundUrl","config","visualId","detail","component","fn","console","handleImg","confirmButtonText","cancelButtonText","handleShare"],"sourceRoot":"src/page/group","sources":["header.vue"],"sourcesContent":["<template>\n  <div class=\"head\">\n    <div class=\"head_actions head_left\">\n      <div class=\"head_btn\"\n           :class=\"{'head_btn--active':contain.menuShow}\"\n           @click=\"handleFlag('menuShow')\">\n        <el-tooltip effect=\"dark\"\n                    content=\"图层\"\n                    placement=\"top\">\n          <i class=\"el-icon-s-operation\"></i>\n        </el-tooltip>\n      </div>\n      <div class=\"head_btn\"\n           :class=\"{'head_btn--active':contain.paramsShow}\"\n           @click=\"handleFlag('paramsShow')\">\n        <el-tooltip effect=\"dark\"\n                    content=\"操作\"\n                    placement=\"top\">\n          <i class=\"el-icon-setting\"></i>\n        </el-tooltip>\n      </div>\n    </div>\n    <div class=\"head_info\">\n      <i class=\"el-icon-data-analysis\"></i>\n      <span>AvueData-{{contain.visual.title}}</span>\n    </div>\n    <div class=\"head_actions\">\n      <div class=\"head_btn\"\n           @click=\"handleBuild\">\n        <el-tooltip effect=\"dark\"\n                    content=\"保存\"\n                    placement=\"top\">\n          <i class=\"iconfont icon-build\"></i>\n        </el-tooltip>\n      </div>\n      <div class=\"head_btn\"\n           @click=\"handleImg\">\n        <el-tooltip effect=\"dark\"\n                    content=\"导出图片\"\n                    placement=\"top\">\n          <i class=\"el-icon-camera\"></i>\n        </el-tooltip>\n      </div>\n      <div class=\"head_btn\"\n           @click=\"handleView\"\n           v-show=\"contain.menuFlag\">\n        <el-tooltip effect=\"dark\"\n                    content=\"预览\"\n                    placement=\"top\">\n          <i class=\"iconfont icon-view\"></i>\n        </el-tooltip>\n      </div>\n      <div class=\"head_btn\"\n           @click=\"handleReset\"\n           v-show=\"!contain.menuFlag\">\n        <el-tooltip effect=\"dark\"\n                    content=\"还原\"\n                    placement=\"top\">\n          <i class=\"iconfont icon-reset\"></i>\n        </el-tooltip>\n      </div>\n      <div class=\"head_btn\"\n           @click=\"$refs.result.show=true\">\n        <el-tooltip effect=\"dark\"\n                    content=\"导入导出\"\n                    placement=\"top\">\n          <i class=\"el-icon-download\"></i>\n        </el-tooltip>\n      </div>\n      <div class=\"head_btn\"\n           @click=\"handleShare\">\n        <el-tooltip effect=\"dark\"\n                    content=\"分享\"\n                    placement=\"top\">\n          <i class=\"el-icon-share\"></i>\n        </el-tooltip>\n      </div>\n      <div class=\"head_btn\"\n           :disabled='!contain.canUndo'\n           @click=\"contain.editorUndo\">\n        <el-tooltip effect=\"dark\"\n                    content=\"撤销\"\n                    placement=\"top\">\n          <i class=\"nav__icon el-icon-arrow-left\"></i>\n        </el-tooltip>\n      </div>\n      <div class=\"head_btn\"\n           :disabled='!contain.canRedo'\n           @click=\"contain.editorRedo\">\n        <el-tooltip effect=\"dark\"\n                    content=\"重做\"\n                    placement=\"top\">\n          <i class=\"nav__icon el-icon-arrow-right\"></i>\n        </el-tooltip>\n      </div>\n    </div>\n    <result ref=\"result\"></result>\n    <share ref=\"share\"></share>\n  </div>\n</template>\n\n<script>\nimport { url } from '@/config';\nimport result from './result';\nimport { updateComponent } from '@/api/visual'\nimport share from './share'\nexport default {\n  inject: [\"contain\"],\n  provide () {\n    return {\n      contain: this.contain\n    };\n  },\n  components: {\n    result,\n    share\n  },\n  created () {\n    if (this.$website.autoSave) {\n      setInterval(() => {\n        this.handleBuild(undefined, false, false);\n      }, this.$website.autoSaveTime)\n    }\n\n  },\n  methods: {\n    handleReset () {\n      this.contain.menuFlag = true;\n      this.contain.setScale();\n    },\n    handleFlag (name) {\n      this.contain[name] = !this.contain[name]\n      this.$nextTick(() => {\n        let screens = document.getElementById('screens')\n        this.contain.setScale(screens.clientWidth);\n      })\n    },\n    handleView () {\n      this.contain.menuFlag = false;\n      this.$nextTick(() => {\n        this.contain.handleInitActive();\n        this.contain.setScale(screens.clientWidth);\n      })\n    },\n    handleBuild (fn, tip, first = false) {\n      let isFun = typeof (fn) === 'function'\n      if (!isFun && this.$route.params.id <= 100 && this.$website.isDemo) {\n        this.$message.error(this.$website.isDemoTip)\n        return\n      }\n      if (first) this.contain.handleInitActive();\n      let loading\n      if (tip !== false) {\n        loading = this.$loading({\n          lock: true,\n          text: '正在保存配置，请稍后',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)'\n        });\n      }\n      this.$nextTick(() => {\n        html2canvas(document.getElementById('content'), {\n          useCORS: true,\n          backgroundColor: null,\n          logging: false,\n          allowTaint: true\n        }).then(canvas => {\n          function dataURLtoFile (dataurl, filename) {\n            var arr = dataurl.split(','),\n              mime = arr[0].match(/:(.*?);/)[1],\n              bstr = atob(arr[1]),\n              n = bstr.length,\n              u8arr = new Uint8Array(n);\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n            return new File([u8arr], filename, { type: mime });\n          }\n\n          var file = dataURLtoFile(canvas.toDataURL('image/jpeg', 0.1), new Date().getTime() + '.jpg');\n          var formdata = new FormData();\n          formdata.append('file', file)\n          axios.post(url + '/visual/put-file', formdata, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\"\n            }\n          }).then(res => {\n            const data = res.data.data;\n            const url = data.link;\n            const formdata = {\n              visual: {\n                id: this.contain.visual.id,\n                backgroundUrl: url\n              },\n              config: {\n                id: this.contain.obj.config.id,\n                visualId: this.contain.visual.id,\n                detail: JSON.stringify(this.contain.config),\n                component: JSON.stringify(this.contain.nav),\n              },\n            }\n            return updateComponent(formdata)\n          }).then(() => {\n            loading && loading.close();\n            if (isFun) {\n              fn()\n            } else {\n              if (tip !== false) {\n                this.$message.success('大屏配置保存成功');\n              }\n            }\n          }).catch(err => {\n            console.log(err);\n            this.$message.error('大屏配置保存失败，请检查服务端配置')\n            loading.close();\n          })\n        })\n      })\n    },\n    handleImg () {\n      this.$confirm('是否导出大屏图片？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$Screenshot(document.getElementById('content'), {\n          useCORS: true,\n          backgroundColor: null,\n          logging: false,\n        }).then(canvas => {\n          this.downFile(canvas.toDataURL(\"image/jpeg\", 0.8), new Date().getTime());\n          this.$message.success('图片导出成功')\n        });\n      }).catch(() => {\n\n      });\n\n    },\n    handleShare () {\n      this.$refs.share.handleShow()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.head {\n  position: relative;\n  height: 41px;\n  padding-right: 8px;\n  display: flex;\n  z-index: 100;\n  align-items: center;\n  user-select: none;\n  color: var(--datav-gui-font-color-base);\n  border-bottom: var(--datav-border-dark);\n  background: #1d1e1f;\n  &_actions {\n    position: absolute;\n    top: 0;\n    right: 8px;\n    width: 300px;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    height: 40px;\n  }\n  &_left {\n    left: 8px;\n    justify-content: flex-start;\n  }\n  &_btn {\n    margin-left: 4px;\n    width: 40px;\n    height: 24px;\n    line-height: 26px;\n    text-align: center;\n    cursor: pointer;\n    background: #303640;\n    transition: 0.2s;\n    i {\n      color: #fff;\n    }\n    &--active {\n      background-color: #2681ff;\n    }\n  }\n  &_info {\n    position: absolute;\n    left: 50%;\n    top: 0;\n    transform: translateX(-50%);\n    text-align: center;\n    cursor: default;\n    font-size: 14px;\n    max-width: 500px;\n    font-weight: bold;\n    color: #fff;\n    line-height: 40px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    display: flex;\n    align-items: center;\n    i {\n      margin-right: 8px;\n      font-size: 20px;\n    }\n  }\n}\n</style>\n<style>\n.head_btn {\n  box-shadow: inset 0 0 0 1px rgb(255 235 235 / 10%), 0 0 0 1px #181818;\n}\n</style>\n"]}]}