{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/cursor/cursorMoveCommands.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/cursor/cursorMoveCommands.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi4KICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCmltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL3R5cGVzLmpzJzsKaW1wb3J0IHsgQ3Vyc29yU3RhdGUsIFNpbmdsZUN1cnNvclN0YXRlIH0gZnJvbSAnLi4vY3Vyc29yQ29tbW9uLmpzJzsKaW1wb3J0IHsgTW92ZU9wZXJhdGlvbnMgfSBmcm9tICcuL2N1cnNvck1vdmVPcGVyYXRpb25zLmpzJzsKaW1wb3J0IHsgV29yZE9wZXJhdGlvbnMgfSBmcm9tICcuL2N1cnNvcldvcmRPcGVyYXRpb25zLmpzJzsKaW1wb3J0IHsgUG9zaXRpb24gfSBmcm9tICcuLi9jb3JlL3Bvc2l0aW9uLmpzJzsKaW1wb3J0IHsgUmFuZ2UgfSBmcm9tICcuLi9jb3JlL3JhbmdlLmpzJzsKZXhwb3J0IHZhciBDdXJzb3JNb3ZlQ29tbWFuZHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEN1cnNvck1vdmVDb21tYW5kcygpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDdXJzb3JNb3ZlQ29tbWFuZHMpOwogIH0KICBfY3JlYXRlQ2xhc3MoQ3Vyc29yTW92ZUNvbW1hbmRzLCBudWxsLCBbewogICAga2V5OiAiYWRkQ3Vyc29yRG93biIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ3Vyc29yRG93bih2aWV3TW9kZWwsIGN1cnNvcnMsIHVzZUxvZ2ljYWxMaW5lKSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgdmFyIHJlc3VsdExlbiA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjdXJzb3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvcnNbaV07CiAgICAgICAgcmVzdWx0W3Jlc3VsdExlbisrXSA9IG5ldyBDdXJzb3JTdGF0ZShjdXJzb3IubW9kZWxTdGF0ZSwgY3Vyc29yLnZpZXdTdGF0ZSk7CiAgICAgICAgaWYgKHVzZUxvZ2ljYWxMaW5lKSB7CiAgICAgICAgICByZXN1bHRbcmVzdWx0TGVuKytdID0gQ3Vyc29yU3RhdGUuZnJvbU1vZGVsU3RhdGUoTW92ZU9wZXJhdGlvbnMudHJhbnNsYXRlRG93bih2aWV3TW9kZWwuY3Vyc29yQ29uZmlnLCB2aWV3TW9kZWwubW9kZWwsIGN1cnNvci5tb2RlbFN0YXRlKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdFtyZXN1bHRMZW4rK10gPSBDdXJzb3JTdGF0ZS5mcm9tVmlld1N0YXRlKE1vdmVPcGVyYXRpb25zLnRyYW5zbGF0ZURvd24odmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLCBjdXJzb3Iudmlld1N0YXRlKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkQ3Vyc29yVXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEN1cnNvclVwKHZpZXdNb2RlbCwgY3Vyc29ycywgdXNlTG9naWNhbExpbmUpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICB2YXIgcmVzdWx0TGVuID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGN1cnNvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgY3Vyc29yID0gY3Vyc29yc1tpXTsKICAgICAgICByZXN1bHRbcmVzdWx0TGVuKytdID0gbmV3IEN1cnNvclN0YXRlKGN1cnNvci5tb2RlbFN0YXRlLCBjdXJzb3Iudmlld1N0YXRlKTsKICAgICAgICBpZiAodXNlTG9naWNhbExpbmUpIHsKICAgICAgICAgIHJlc3VsdFtyZXN1bHRMZW4rK10gPSBDdXJzb3JTdGF0ZS5mcm9tTW9kZWxTdGF0ZShNb3ZlT3BlcmF0aW9ucy50cmFuc2xhdGVVcCh2aWV3TW9kZWwuY3Vyc29yQ29uZmlnLCB2aWV3TW9kZWwubW9kZWwsIGN1cnNvci5tb2RlbFN0YXRlKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdFtyZXN1bHRMZW4rK10gPSBDdXJzb3JTdGF0ZS5mcm9tVmlld1N0YXRlKE1vdmVPcGVyYXRpb25zLnRyYW5zbGF0ZVVwKHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbCwgY3Vyc29yLnZpZXdTdGF0ZSkpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVUb0JlZ2lubmluZ09mTGluZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZVRvQmVnaW5uaW5nT2ZMaW5lKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlKSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGN1cnNvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgY3Vyc29yID0gY3Vyc29yc1tpXTsKICAgICAgICByZXN1bHRbaV0gPSB0aGlzLl9tb3ZlVG9MaW5lU3RhcnQodmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZVRvTGluZVN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZVRvTGluZVN0YXJ0KHZpZXdNb2RlbCwgY3Vyc29yLCBpblNlbGVjdGlvbk1vZGUpIHsKICAgICAgdmFyIGN1cnJlbnRWaWV3U3RhdGVDb2x1bW4gPSBjdXJzb3Iudmlld1N0YXRlLnBvc2l0aW9uLmNvbHVtbjsKICAgICAgdmFyIGN1cnJlbnRNb2RlbFN0YXRlQ29sdW1uID0gY3Vyc29yLm1vZGVsU3RhdGUucG9zaXRpb24uY29sdW1uOwogICAgICB2YXIgaXNGaXJzdExpbmVPZldyYXBwZWRMaW5lID0gY3VycmVudFZpZXdTdGF0ZUNvbHVtbiA9PT0gY3VycmVudE1vZGVsU3RhdGVDb2x1bW47CiAgICAgIHZhciBjdXJyZW50Vmlld1N0YXRlbGluZU51bWJlciA9IGN1cnNvci52aWV3U3RhdGUucG9zaXRpb24ubGluZU51bWJlcjsKICAgICAgdmFyIGZpcnN0Tm9uQmxhbmtDb2x1bW4gPSB2aWV3TW9kZWwuZ2V0TGluZUZpcnN0Tm9uV2hpdGVzcGFjZUNvbHVtbihjdXJyZW50Vmlld1N0YXRlbGluZU51bWJlcik7CiAgICAgIHZhciBpc0JlZ2lubmluZ09mVmlld0xpbmUgPSBjdXJyZW50Vmlld1N0YXRlQ29sdW1uID09PSBmaXJzdE5vbkJsYW5rQ29sdW1uOwogICAgICBpZiAoIWlzRmlyc3RMaW5lT2ZXcmFwcGVkTGluZSAmJiAhaXNCZWdpbm5pbmdPZlZpZXdMaW5lKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX21vdmVUb0xpbmVTdGFydEJ5Vmlldyh2aWV3TW9kZWwsIGN1cnNvciwgaW5TZWxlY3Rpb25Nb2RlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5fbW92ZVRvTGluZVN0YXJ0QnlNb2RlbCh2aWV3TW9kZWwsIGN1cnNvciwgaW5TZWxlY3Rpb25Nb2RlKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9tb3ZlVG9MaW5lU3RhcnRCeVZpZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tb3ZlVG9MaW5lU3RhcnRCeVZpZXcodmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSkgewogICAgICByZXR1cm4gQ3Vyc29yU3RhdGUuZnJvbVZpZXdTdGF0ZShNb3ZlT3BlcmF0aW9ucy5tb3ZlVG9CZWdpbm5pbmdPZkxpbmUodmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLCBjdXJzb3Iudmlld1N0YXRlLCBpblNlbGVjdGlvbk1vZGUpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZVRvTGluZVN0YXJ0QnlNb2RlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21vdmVUb0xpbmVTdGFydEJ5TW9kZWwodmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSkgewogICAgICByZXR1cm4gQ3Vyc29yU3RhdGUuZnJvbU1vZGVsU3RhdGUoTW92ZU9wZXJhdGlvbnMubW92ZVRvQmVnaW5uaW5nT2ZMaW5lKHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbC5tb2RlbCwgY3Vyc29yLm1vZGVsU3RhdGUsIGluU2VsZWN0aW9uTW9kZSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVUb0VuZE9mTGluZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZVRvRW5kT2ZMaW5lKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlLCBzdGlja3kpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY3Vyc29ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JzW2ldOwogICAgICAgIHJlc3VsdFtpXSA9IHRoaXMuX21vdmVUb0xpbmVFbmQodmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSwgc3RpY2t5KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIl9tb3ZlVG9MaW5lRW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZVRvTGluZUVuZCh2aWV3TW9kZWwsIGN1cnNvciwgaW5TZWxlY3Rpb25Nb2RlLCBzdGlja3kpIHsKICAgICAgdmFyIHZpZXdTdGF0ZVBvc2l0aW9uID0gY3Vyc29yLnZpZXdTdGF0ZS5wb3NpdGlvbjsKICAgICAgdmFyIHZpZXdNb2RlbE1heENvbHVtbiA9IHZpZXdNb2RlbC5nZXRMaW5lTWF4Q29sdW1uKHZpZXdTdGF0ZVBvc2l0aW9uLmxpbmVOdW1iZXIpOwogICAgICB2YXIgaXNFbmRPZlZpZXdMaW5lID0gdmlld1N0YXRlUG9zaXRpb24uY29sdW1uID09PSB2aWV3TW9kZWxNYXhDb2x1bW47CiAgICAgIHZhciBtb2RlbFN0YXRlUG9zaXRpb24gPSBjdXJzb3IubW9kZWxTdGF0ZS5wb3NpdGlvbjsKICAgICAgdmFyIG1vZGVsTWF4Q29sdW1uID0gdmlld01vZGVsLm1vZGVsLmdldExpbmVNYXhDb2x1bW4obW9kZWxTdGF0ZVBvc2l0aW9uLmxpbmVOdW1iZXIpOwogICAgICB2YXIgaXNFbmRMaW5lT2ZXcmFwcGVkTGluZSA9IHZpZXdNb2RlbE1heENvbHVtbiAtIHZpZXdTdGF0ZVBvc2l0aW9uLmNvbHVtbiA9PT0gbW9kZWxNYXhDb2x1bW4gLSBtb2RlbFN0YXRlUG9zaXRpb24uY29sdW1uOwogICAgICBpZiAoaXNFbmRPZlZpZXdMaW5lIHx8IGlzRW5kTGluZU9mV3JhcHBlZExpbmUpIHsKICAgICAgICByZXR1cm4gdGhpcy5fbW92ZVRvTGluZUVuZEJ5TW9kZWwodmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSwgc3RpY2t5KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5fbW92ZVRvTGluZUVuZEJ5Vmlldyh2aWV3TW9kZWwsIGN1cnNvciwgaW5TZWxlY3Rpb25Nb2RlLCBzdGlja3kpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX21vdmVUb0xpbmVFbmRCeVZpZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tb3ZlVG9MaW5lRW5kQnlWaWV3KHZpZXdNb2RlbCwgY3Vyc29yLCBpblNlbGVjdGlvbk1vZGUsIHN0aWNreSkgewogICAgICByZXR1cm4gQ3Vyc29yU3RhdGUuZnJvbVZpZXdTdGF0ZShNb3ZlT3BlcmF0aW9ucy5tb3ZlVG9FbmRPZkxpbmUodmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLCBjdXJzb3Iudmlld1N0YXRlLCBpblNlbGVjdGlvbk1vZGUsIHN0aWNreSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9tb3ZlVG9MaW5lRW5kQnlNb2RlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21vdmVUb0xpbmVFbmRCeU1vZGVsKHZpZXdNb2RlbCwgY3Vyc29yLCBpblNlbGVjdGlvbk1vZGUsIHN0aWNreSkgewogICAgICByZXR1cm4gQ3Vyc29yU3RhdGUuZnJvbU1vZGVsU3RhdGUoTW92ZU9wZXJhdGlvbnMubW92ZVRvRW5kT2ZMaW5lKHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbC5tb2RlbCwgY3Vyc29yLm1vZGVsU3RhdGUsIGluU2VsZWN0aW9uTW9kZSwgc3RpY2t5KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZXhwYW5kTGluZVNlbGVjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXhwYW5kTGluZVNlbGVjdGlvbih2aWV3TW9kZWwsIGN1cnNvcnMpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY3Vyc29ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JzW2ldOwogICAgICAgIHZhciBzdGFydExpbmVOdW1iZXIgPSBjdXJzb3IubW9kZWxTdGF0ZS5zZWxlY3Rpb24uc3RhcnRMaW5lTnVtYmVyOwogICAgICAgIHZhciBsaW5lQ291bnQgPSB2aWV3TW9kZWwubW9kZWwuZ2V0TGluZUNvdW50KCk7CiAgICAgICAgdmFyIGVuZExpbmVOdW1iZXIgPSBjdXJzb3IubW9kZWxTdGF0ZS5zZWxlY3Rpb24uZW5kTGluZU51bWJlcjsKICAgICAgICB2YXIgZW5kQ29sdW1uID0gdm9pZCAwOwogICAgICAgIGlmIChlbmRMaW5lTnVtYmVyID09PSBsaW5lQ291bnQpIHsKICAgICAgICAgIGVuZENvbHVtbiA9IHZpZXdNb2RlbC5tb2RlbC5nZXRMaW5lTWF4Q29sdW1uKGxpbmVDb3VudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVuZExpbmVOdW1iZXIrKzsKICAgICAgICAgIGVuZENvbHVtbiA9IDE7CiAgICAgICAgfQogICAgICAgIHJlc3VsdFtpXSA9IEN1cnNvclN0YXRlLmZyb21Nb2RlbFN0YXRlKG5ldyBTaW5nbGVDdXJzb3JTdGF0ZShuZXcgUmFuZ2Uoc3RhcnRMaW5lTnVtYmVyLCAxLCBzdGFydExpbmVOdW1iZXIsIDEpLCAwLCBuZXcgUG9zaXRpb24oZW5kTGluZU51bWJlciwgZW5kQ29sdW1uKSwgMCkpOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwgewogICAga2V5OiAibW92ZVRvQmVnaW5uaW5nT2ZCdWZmZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVUb0JlZ2lubmluZ09mQnVmZmVyKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlKSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGN1cnNvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgY3Vyc29yID0gY3Vyc29yc1tpXTsKICAgICAgICByZXN1bHRbaV0gPSBDdXJzb3JTdGF0ZS5mcm9tTW9kZWxTdGF0ZShNb3ZlT3BlcmF0aW9ucy5tb3ZlVG9CZWdpbm5pbmdPZkJ1ZmZlcih2aWV3TW9kZWwuY3Vyc29yQ29uZmlnLCB2aWV3TW9kZWwubW9kZWwsIGN1cnNvci5tb2RlbFN0YXRlLCBpblNlbGVjdGlvbk1vZGUpKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVUb0VuZE9mQnVmZmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlVG9FbmRPZkJ1ZmZlcih2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSkgewogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjdXJzb3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvcnNbaV07CiAgICAgICAgcmVzdWx0W2ldID0gQ3Vyc29yU3RhdGUuZnJvbU1vZGVsU3RhdGUoTW92ZU9wZXJhdGlvbnMubW92ZVRvRW5kT2ZCdWZmZXIodmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLm1vZGVsLCBjdXJzb3IubW9kZWxTdGF0ZSwgaW5TZWxlY3Rpb25Nb2RlKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZWxlY3RBbGwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdEFsbCh2aWV3TW9kZWwsIGN1cnNvcikgewogICAgICB2YXIgbGluZUNvdW50ID0gdmlld01vZGVsLm1vZGVsLmdldExpbmVDb3VudCgpOwogICAgICB2YXIgbWF4Q29sdW1uID0gdmlld01vZGVsLm1vZGVsLmdldExpbmVNYXhDb2x1bW4obGluZUNvdW50KTsKICAgICAgcmV0dXJuIEN1cnNvclN0YXRlLmZyb21Nb2RlbFN0YXRlKG5ldyBTaW5nbGVDdXJzb3JTdGF0ZShuZXcgUmFuZ2UoMSwgMSwgMSwgMSksIDAsIG5ldyBQb3NpdGlvbihsaW5lQ291bnQsIG1heENvbHVtbiksIDApKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsaW5lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsaW5lKHZpZXdNb2RlbCwgY3Vyc29yLCBpblNlbGVjdGlvbk1vZGUsIF9wb3NpdGlvbiwgX3ZpZXdQb3NpdGlvbikgewogICAgICB2YXIgcG9zaXRpb24gPSB2aWV3TW9kZWwubW9kZWwudmFsaWRhdGVQb3NpdGlvbihfcG9zaXRpb24pOwogICAgICB2YXIgdmlld1Bvc2l0aW9uID0gX3ZpZXdQb3NpdGlvbiA/IHZpZXdNb2RlbC5jb29yZGluYXRlc0NvbnZlcnRlci52YWxpZGF0ZVZpZXdQb3NpdGlvbihuZXcgUG9zaXRpb24oX3ZpZXdQb3NpdGlvbi5saW5lTnVtYmVyLCBfdmlld1Bvc2l0aW9uLmNvbHVtbiksIHBvc2l0aW9uKSA6IHZpZXdNb2RlbC5jb29yZGluYXRlc0NvbnZlcnRlci5jb252ZXJ0TW9kZWxQb3NpdGlvblRvVmlld1Bvc2l0aW9uKHBvc2l0aW9uKTsKICAgICAgaWYgKCFpblNlbGVjdGlvbk1vZGUgfHwgIWN1cnNvci5tb2RlbFN0YXRlLmhhc1NlbGVjdGlvbigpKSB7CiAgICAgICAgLy8gRW50ZXJpbmcgbGluZSBzZWxlY3Rpb24gZm9yIHRoZSBmaXJzdCB0aW1lCiAgICAgICAgdmFyIGxpbmVDb3VudCA9IHZpZXdNb2RlbC5tb2RlbC5nZXRMaW5lQ291bnQoKTsKICAgICAgICB2YXIgc2VsZWN0VG9MaW5lTnVtYmVyID0gcG9zaXRpb24ubGluZU51bWJlciArIDE7CiAgICAgICAgdmFyIHNlbGVjdFRvQ29sdW1uID0gMTsKICAgICAgICBpZiAoc2VsZWN0VG9MaW5lTnVtYmVyID4gbGluZUNvdW50KSB7CiAgICAgICAgICBzZWxlY3RUb0xpbmVOdW1iZXIgPSBsaW5lQ291bnQ7CiAgICAgICAgICBzZWxlY3RUb0NvbHVtbiA9IHZpZXdNb2RlbC5tb2RlbC5nZXRMaW5lTWF4Q29sdW1uKHNlbGVjdFRvTGluZU51bWJlcik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBDdXJzb3JTdGF0ZS5mcm9tTW9kZWxTdGF0ZShuZXcgU2luZ2xlQ3Vyc29yU3RhdGUobmV3IFJhbmdlKHBvc2l0aW9uLmxpbmVOdW1iZXIsIDEsIHNlbGVjdFRvTGluZU51bWJlciwgc2VsZWN0VG9Db2x1bW4pLCAwLCBuZXcgUG9zaXRpb24oc2VsZWN0VG9MaW5lTnVtYmVyLCBzZWxlY3RUb0NvbHVtbiksIDApKTsKICAgICAgfQogICAgICAvLyBDb250aW51aW5nIGxpbmUgc2VsZWN0aW9uCiAgICAgIHZhciBlbnRlcmluZ0xpbmVOdW1iZXIgPSBjdXJzb3IubW9kZWxTdGF0ZS5zZWxlY3Rpb25TdGFydC5nZXRTdGFydFBvc2l0aW9uKCkubGluZU51bWJlcjsKICAgICAgaWYgKHBvc2l0aW9uLmxpbmVOdW1iZXIgPCBlbnRlcmluZ0xpbmVOdW1iZXIpIHsKICAgICAgICByZXR1cm4gQ3Vyc29yU3RhdGUuZnJvbVZpZXdTdGF0ZShjdXJzb3Iudmlld1N0YXRlLm1vdmUoY3Vyc29yLm1vZGVsU3RhdGUuaGFzU2VsZWN0aW9uKCksIHZpZXdQb3NpdGlvbi5saW5lTnVtYmVyLCAxLCAwKSk7CiAgICAgIH0gZWxzZSBpZiAocG9zaXRpb24ubGluZU51bWJlciA+IGVudGVyaW5nTGluZU51bWJlcikgewogICAgICAgIHZhciBfbGluZUNvdW50ID0gdmlld01vZGVsLmdldExpbmVDb3VudCgpOwogICAgICAgIHZhciBzZWxlY3RUb1ZpZXdMaW5lTnVtYmVyID0gdmlld1Bvc2l0aW9uLmxpbmVOdW1iZXIgKyAxOwogICAgICAgIHZhciBzZWxlY3RUb1ZpZXdDb2x1bW4gPSAxOwogICAgICAgIGlmIChzZWxlY3RUb1ZpZXdMaW5lTnVtYmVyID4gX2xpbmVDb3VudCkgewogICAgICAgICAgc2VsZWN0VG9WaWV3TGluZU51bWJlciA9IF9saW5lQ291bnQ7CiAgICAgICAgICBzZWxlY3RUb1ZpZXdDb2x1bW4gPSB2aWV3TW9kZWwuZ2V0TGluZU1heENvbHVtbihzZWxlY3RUb1ZpZXdMaW5lTnVtYmVyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIEN1cnNvclN0YXRlLmZyb21WaWV3U3RhdGUoY3Vyc29yLnZpZXdTdGF0ZS5tb3ZlKGN1cnNvci5tb2RlbFN0YXRlLmhhc1NlbGVjdGlvbigpLCBzZWxlY3RUb1ZpZXdMaW5lTnVtYmVyLCBzZWxlY3RUb1ZpZXdDb2x1bW4sIDApKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZW5kUG9zaXRpb25PZlNlbGVjdGlvblN0YXJ0ID0gY3Vyc29yLm1vZGVsU3RhdGUuc2VsZWN0aW9uU3RhcnQuZ2V0RW5kUG9zaXRpb24oKTsKICAgICAgICByZXR1cm4gQ3Vyc29yU3RhdGUuZnJvbU1vZGVsU3RhdGUoY3Vyc29yLm1vZGVsU3RhdGUubW92ZShjdXJzb3IubW9kZWxTdGF0ZS5oYXNTZWxlY3Rpb24oKSwgZW5kUG9zaXRpb25PZlNlbGVjdGlvblN0YXJ0LmxpbmVOdW1iZXIsIGVuZFBvc2l0aW9uT2ZTZWxlY3Rpb25TdGFydC5jb2x1bW4sIDApKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIndvcmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHdvcmQodmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSwgX3Bvc2l0aW9uKSB7CiAgICAgIHZhciBwb3NpdGlvbiA9IHZpZXdNb2RlbC5tb2RlbC52YWxpZGF0ZVBvc2l0aW9uKF9wb3NpdGlvbik7CiAgICAgIHJldHVybiBDdXJzb3JTdGF0ZS5mcm9tTW9kZWxTdGF0ZShXb3JkT3BlcmF0aW9ucy53b3JkKHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbC5tb2RlbCwgY3Vyc29yLm1vZGVsU3RhdGUsIGluU2VsZWN0aW9uTW9kZSwgcG9zaXRpb24pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5jZWxTZWxlY3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbFNlbGVjdGlvbih2aWV3TW9kZWwsIGN1cnNvcikgewogICAgICBpZiAoIWN1cnNvci5tb2RlbFN0YXRlLmhhc1NlbGVjdGlvbigpKSB7CiAgICAgICAgcmV0dXJuIG5ldyBDdXJzb3JTdGF0ZShjdXJzb3IubW9kZWxTdGF0ZSwgY3Vyc29yLnZpZXdTdGF0ZSk7CiAgICAgIH0KICAgICAgdmFyIGxpbmVOdW1iZXIgPSBjdXJzb3Iudmlld1N0YXRlLnBvc2l0aW9uLmxpbmVOdW1iZXI7CiAgICAgIHZhciBjb2x1bW4gPSBjdXJzb3Iudmlld1N0YXRlLnBvc2l0aW9uLmNvbHVtbjsKICAgICAgcmV0dXJuIEN1cnNvclN0YXRlLmZyb21WaWV3U3RhdGUobmV3IFNpbmdsZUN1cnNvclN0YXRlKG5ldyBSYW5nZShsaW5lTnVtYmVyLCBjb2x1bW4sIGxpbmVOdW1iZXIsIGNvbHVtbiksIDAsIG5ldyBQb3NpdGlvbihsaW5lTnVtYmVyLCBjb2x1bW4pLCAwKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibW92ZVRvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlVG8odmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSwgX3Bvc2l0aW9uLCBfdmlld1Bvc2l0aW9uKSB7CiAgICAgIHZhciBwb3NpdGlvbiA9IHZpZXdNb2RlbC5tb2RlbC52YWxpZGF0ZVBvc2l0aW9uKF9wb3NpdGlvbik7CiAgICAgIHZhciB2aWV3UG9zaXRpb24gPSBfdmlld1Bvc2l0aW9uID8gdmlld01vZGVsLmNvb3JkaW5hdGVzQ29udmVydGVyLnZhbGlkYXRlVmlld1Bvc2l0aW9uKG5ldyBQb3NpdGlvbihfdmlld1Bvc2l0aW9uLmxpbmVOdW1iZXIsIF92aWV3UG9zaXRpb24uY29sdW1uKSwgcG9zaXRpb24pIDogdmlld01vZGVsLmNvb3JkaW5hdGVzQ29udmVydGVyLmNvbnZlcnRNb2RlbFBvc2l0aW9uVG9WaWV3UG9zaXRpb24ocG9zaXRpb24pOwogICAgICByZXR1cm4gQ3Vyc29yU3RhdGUuZnJvbVZpZXdTdGF0ZShjdXJzb3Iudmlld1N0YXRlLm1vdmUoaW5TZWxlY3Rpb25Nb2RlLCB2aWV3UG9zaXRpb24ubGluZU51bWJlciwgdmlld1Bvc2l0aW9uLmNvbHVtbiwgMCkpOwogICAgfQogIH0sIHsKICAgIGtleTogInNpbXBsZU1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNpbXBsZU1vdmUodmlld01vZGVsLCBjdXJzb3JzLCBkaXJlY3Rpb24sIGluU2VsZWN0aW9uTW9kZSwgdmFsdWUsIHVuaXQpIHsKICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHsKICAgICAgICBjYXNlIDAgLyogQ3Vyc29yTW92ZS5EaXJlY3Rpb24uTGVmdCAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKHVuaXQgPT09IDQgLyogQ3Vyc29yTW92ZS5Vbml0LkhhbGZMaW5lICovKSB7CiAgICAgICAgICAgICAgLy8gTW92ZSBsZWZ0IGJ5IGhhbGYgdGhlIGN1cnJlbnQgbGluZSBsZW5ndGgKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbW92ZUhhbGZMaW5lTGVmdCh2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gTW92ZSBsZWZ0IGJ5IGBtb3ZlUGFyYW1zLnZhbHVlYCBjb2x1bW5zCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vdmVMZWZ0KHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlLCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBjYXNlIDEgLyogQ3Vyc29yTW92ZS5EaXJlY3Rpb24uUmlnaHQgKi86CiAgICAgICAgICB7CiAgICAgICAgICAgIGlmICh1bml0ID09PSA0IC8qIEN1cnNvck1vdmUuVW5pdC5IYWxmTGluZSAqLykgewogICAgICAgICAgICAgIC8vIE1vdmUgcmlnaHQgYnkgaGFsZiB0aGUgY3VycmVudCBsaW5lIGxlbmd0aAogICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb3ZlSGFsZkxpbmVSaWdodCh2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gTW92ZSByaWdodCBieSBgbW92ZVBhcmFtcy52YWx1ZWAgY29sdW1ucwogICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb3ZlUmlnaHQodmlld01vZGVsLCBjdXJzb3JzLCBpblNlbGVjdGlvbk1vZGUsIHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIGNhc2UgMiAvKiBDdXJzb3JNb3ZlLkRpcmVjdGlvbi5VcCAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKHVuaXQgPT09IDIgLyogQ3Vyc29yTW92ZS5Vbml0LldyYXBwZWRMaW5lICovKSB7CiAgICAgICAgICAgICAgLy8gTW92ZSB1cCBieSB2aWV3IGxpbmVzCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vdmVVcEJ5Vmlld0xpbmVzKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlLCB2YWx1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gTW92ZSB1cCBieSBtb2RlbCBsaW5lcwogICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb3ZlVXBCeU1vZGVsTGluZXModmlld01vZGVsLCBjdXJzb3JzLCBpblNlbGVjdGlvbk1vZGUsIHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIGNhc2UgMyAvKiBDdXJzb3JNb3ZlLkRpcmVjdGlvbi5Eb3duICovOgogICAgICAgICAgewogICAgICAgICAgICBpZiAodW5pdCA9PT0gMiAvKiBDdXJzb3JNb3ZlLlVuaXQuV3JhcHBlZExpbmUgKi8pIHsKICAgICAgICAgICAgICAvLyBNb3ZlIGRvd24gYnkgdmlldyBsaW5lcwogICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb3ZlRG93bkJ5Vmlld0xpbmVzKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlLCB2YWx1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gTW92ZSBkb3duIGJ5IG1vZGVsIGxpbmVzCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vdmVEb3duQnlNb2RlbExpbmVzKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlLCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBjYXNlIDQgLyogQ3Vyc29yTW92ZS5EaXJlY3Rpb24uUHJldkJsYW5rTGluZSAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKHVuaXQgPT09IDIgLyogQ3Vyc29yTW92ZS5Vbml0LldyYXBwZWRMaW5lICovKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcnMubWFwKGZ1bmN0aW9uIChjdXJzb3IpIHsKICAgICAgICAgICAgICAgIHJldHVybiBDdXJzb3JTdGF0ZS5mcm9tVmlld1N0YXRlKE1vdmVPcGVyYXRpb25zLm1vdmVUb1ByZXZCbGFua0xpbmUodmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLCBjdXJzb3Iudmlld1N0YXRlLCBpblNlbGVjdGlvbk1vZGUpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gY3Vyc29ycy5tYXAoZnVuY3Rpb24gKGN1cnNvcikgewogICAgICAgICAgICAgICAgcmV0dXJuIEN1cnNvclN0YXRlLmZyb21Nb2RlbFN0YXRlKE1vdmVPcGVyYXRpb25zLm1vdmVUb1ByZXZCbGFua0xpbmUodmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLm1vZGVsLCBjdXJzb3IubW9kZWxTdGF0ZSwgaW5TZWxlY3Rpb25Nb2RlKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBjYXNlIDUgLyogQ3Vyc29yTW92ZS5EaXJlY3Rpb24uTmV4dEJsYW5rTGluZSAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgaWYgKHVuaXQgPT09IDIgLyogQ3Vyc29yTW92ZS5Vbml0LldyYXBwZWRMaW5lICovKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcnMubWFwKGZ1bmN0aW9uIChjdXJzb3IpIHsKICAgICAgICAgICAgICAgIHJldHVybiBDdXJzb3JTdGF0ZS5mcm9tVmlld1N0YXRlKE1vdmVPcGVyYXRpb25zLm1vdmVUb05leHRCbGFua0xpbmUodmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLCBjdXJzb3Iudmlld1N0YXRlLCBpblNlbGVjdGlvbk1vZGUpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gY3Vyc29ycy5tYXAoZnVuY3Rpb24gKGN1cnNvcikgewogICAgICAgICAgICAgICAgcmV0dXJuIEN1cnNvclN0YXRlLmZyb21Nb2RlbFN0YXRlKE1vdmVPcGVyYXRpb25zLm1vdmVUb05leHRCbGFua0xpbmUodmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLm1vZGVsLCBjdXJzb3IubW9kZWxTdGF0ZSwgaW5TZWxlY3Rpb25Nb2RlKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBjYXNlIDYgLyogQ3Vyc29yTW92ZS5EaXJlY3Rpb24uV3JhcHBlZExpbmVTdGFydCAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgLy8gTW92ZSB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjdXJyZW50IHZpZXcgbGluZQogICAgICAgICAgICByZXR1cm4gdGhpcy5fbW92ZVRvVmlld01pbkNvbHVtbih2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSk7CiAgICAgICAgICB9CiAgICAgICAgY2FzZSA3IC8qIEN1cnNvck1vdmUuRGlyZWN0aW9uLldyYXBwZWRMaW5lRmlyc3ROb25XaGl0ZXNwYWNlQ2hhcmFjdGVyICovOgogICAgICAgICAgewogICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBmaXJzdCBub24td2hpdGVzcGFjZSBjb2x1bW4gb2YgdGhlIGN1cnJlbnQgdmlldyBsaW5lCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb3ZlVG9WaWV3Rmlyc3ROb25XaGl0ZXNwYWNlQ29sdW1uKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlKTsKICAgICAgICAgIH0KICAgICAgICBjYXNlIDggLyogQ3Vyc29yTW92ZS5EaXJlY3Rpb24uV3JhcHBlZExpbmVDb2x1bW5DZW50ZXIgKi86CiAgICAgICAgICB7CiAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlICJjZW50ZXIiIG9mIHRoZSBjdXJyZW50IHZpZXcgbGluZQogICAgICAgICAgICByZXR1cm4gdGhpcy5fbW92ZVRvVmlld0NlbnRlckNvbHVtbih2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSk7CiAgICAgICAgICB9CiAgICAgICAgY2FzZSA5IC8qIEN1cnNvck1vdmUuRGlyZWN0aW9uLldyYXBwZWRMaW5lRW5kICovOgogICAgICAgICAgewogICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgdmlldyBsaW5lCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb3ZlVG9WaWV3TWF4Q29sdW1uKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlKTsKICAgICAgICAgIH0KICAgICAgICBjYXNlIDEwIC8qIEN1cnNvck1vdmUuRGlyZWN0aW9uLldyYXBwZWRMaW5lTGFzdE5vbldoaXRlc3BhY2VDaGFyYWN0ZXIgKi86CiAgICAgICAgICB7CiAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlIGxhc3Qgbm9uLXdoaXRlc3BhY2UgY29sdW1uIG9mIHRoZSBjdXJyZW50IHZpZXcgbGluZQogICAgICAgICAgICByZXR1cm4gdGhpcy5fbW92ZVRvVmlld0xhc3ROb25XaGl0ZXNwYWNlQ29sdW1uKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlKTsKICAgICAgICAgIH0KICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2aWV3cG9ydE1vdmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZpZXdwb3J0TW92ZSh2aWV3TW9kZWwsIGN1cnNvcnMsIGRpcmVjdGlvbiwgaW5TZWxlY3Rpb25Nb2RlLCB2YWx1ZSkgewogICAgICB2YXIgdmlzaWJsZVZpZXdSYW5nZSA9IHZpZXdNb2RlbC5nZXRDb21wbGV0ZWx5VmlzaWJsZVZpZXdSYW5nZSgpOwogICAgICB2YXIgdmlzaWJsZU1vZGVsUmFuZ2UgPSB2aWV3TW9kZWwuY29vcmRpbmF0ZXNDb252ZXJ0ZXIuY29udmVydFZpZXdSYW5nZVRvTW9kZWxSYW5nZSh2aXNpYmxlVmlld1JhbmdlKTsKICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHsKICAgICAgICBjYXNlIDExIC8qIEN1cnNvck1vdmUuRGlyZWN0aW9uLlZpZXdQb3J0VG9wICovOgogICAgICAgICAgewogICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBudGggbGluZSBzdGFydCBpbiB0aGUgdmlld3BvcnQgKGZyb20gdGhlIHRvcCkKICAgICAgICAgICAgdmFyIG1vZGVsTGluZU51bWJlciA9IHRoaXMuX2ZpcnN0TGluZU51bWJlckluUmFuZ2Uodmlld01vZGVsLm1vZGVsLCB2aXNpYmxlTW9kZWxSYW5nZSwgdmFsdWUpOwogICAgICAgICAgICB2YXIgbW9kZWxDb2x1bW4gPSB2aWV3TW9kZWwubW9kZWwuZ2V0TGluZUZpcnN0Tm9uV2hpdGVzcGFjZUNvbHVtbihtb2RlbExpbmVOdW1iZXIpOwogICAgICAgICAgICByZXR1cm4gW3RoaXMuX21vdmVUb01vZGVsUG9zaXRpb24odmlld01vZGVsLCBjdXJzb3JzWzBdLCBpblNlbGVjdGlvbk1vZGUsIG1vZGVsTGluZU51bWJlciwgbW9kZWxDb2x1bW4pXTsKICAgICAgICAgIH0KICAgICAgICBjYXNlIDEzIC8qIEN1cnNvck1vdmUuRGlyZWN0aW9uLlZpZXdQb3J0Qm90dG9tICovOgogICAgICAgICAgewogICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBudGggbGluZSBzdGFydCBpbiB0aGUgdmlld3BvcnQgKGZyb20gdGhlIGJvdHRvbSkKICAgICAgICAgICAgdmFyIF9tb2RlbExpbmVOdW1iZXIgPSB0aGlzLl9sYXN0TGluZU51bWJlckluUmFuZ2Uodmlld01vZGVsLm1vZGVsLCB2aXNpYmxlTW9kZWxSYW5nZSwgdmFsdWUpOwogICAgICAgICAgICB2YXIgX21vZGVsQ29sdW1uID0gdmlld01vZGVsLm1vZGVsLmdldExpbmVGaXJzdE5vbldoaXRlc3BhY2VDb2x1bW4oX21vZGVsTGluZU51bWJlcik7CiAgICAgICAgICAgIHJldHVybiBbdGhpcy5fbW92ZVRvTW9kZWxQb3NpdGlvbih2aWV3TW9kZWwsIGN1cnNvcnNbMF0sIGluU2VsZWN0aW9uTW9kZSwgX21vZGVsTGluZU51bWJlciwgX21vZGVsQ29sdW1uKV07CiAgICAgICAgICB9CiAgICAgICAgY2FzZSAxMiAvKiBDdXJzb3JNb3ZlLkRpcmVjdGlvbi5WaWV3UG9ydENlbnRlciAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgLy8gTW92ZSB0byB0aGUgbGluZSBzdGFydCBpbiB0aGUgdmlld3BvcnQgY2VudGVyCiAgICAgICAgICAgIHZhciBfbW9kZWxMaW5lTnVtYmVyMiA9IE1hdGgucm91bmQoKHZpc2libGVNb2RlbFJhbmdlLnN0YXJ0TGluZU51bWJlciArIHZpc2libGVNb2RlbFJhbmdlLmVuZExpbmVOdW1iZXIpIC8gMik7CiAgICAgICAgICAgIHZhciBfbW9kZWxDb2x1bW4yID0gdmlld01vZGVsLm1vZGVsLmdldExpbmVGaXJzdE5vbldoaXRlc3BhY2VDb2x1bW4oX21vZGVsTGluZU51bWJlcjIpOwogICAgICAgICAgICByZXR1cm4gW3RoaXMuX21vdmVUb01vZGVsUG9zaXRpb24odmlld01vZGVsLCBjdXJzb3JzWzBdLCBpblNlbGVjdGlvbk1vZGUsIF9tb2RlbExpbmVOdW1iZXIyLCBfbW9kZWxDb2x1bW4yKV07CiAgICAgICAgICB9CiAgICAgICAgY2FzZSAxNCAvKiBDdXJzb3JNb3ZlLkRpcmVjdGlvbi5WaWV3UG9ydElmT3V0c2lkZSAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgLy8gTW92ZSB0byBhIHBvc2l0aW9uIGluc2lkZSB0aGUgdmlld3BvcnQKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY3Vyc29ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JzW2ldOwogICAgICAgICAgICAgIHJlc3VsdFtpXSA9IHRoaXMuZmluZFBvc2l0aW9uSW5WaWV3cG9ydElmT3V0c2lkZSh2aWV3TW9kZWwsIGN1cnNvciwgdmlzaWJsZVZpZXdSYW5nZSwgaW5TZWxlY3Rpb25Nb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgfQogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZpbmRQb3NpdGlvbkluVmlld3BvcnRJZk91dHNpZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRQb3NpdGlvbkluVmlld3BvcnRJZk91dHNpZGUodmlld01vZGVsLCBjdXJzb3IsIHZpc2libGVWaWV3UmFuZ2UsIGluU2VsZWN0aW9uTW9kZSkgewogICAgICB2YXIgdmlld0xpbmVOdW1iZXIgPSBjdXJzb3Iudmlld1N0YXRlLnBvc2l0aW9uLmxpbmVOdW1iZXI7CiAgICAgIGlmICh2aXNpYmxlVmlld1JhbmdlLnN0YXJ0TGluZU51bWJlciA8PSB2aWV3TGluZU51bWJlciAmJiB2aWV3TGluZU51bWJlciA8PSB2aXNpYmxlVmlld1JhbmdlLmVuZExpbmVOdW1iZXIgLSAxKSB7CiAgICAgICAgLy8gTm90aGluZyB0byBkbywgY3Vyc29yIGlzIGluIHZpZXdwb3J0CiAgICAgICAgcmV0dXJuIG5ldyBDdXJzb3JTdGF0ZShjdXJzb3IubW9kZWxTdGF0ZSwgY3Vyc29yLnZpZXdTdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG5ld1ZpZXdMaW5lTnVtYmVyOwogICAgICAgIGlmICh2aWV3TGluZU51bWJlciA+IHZpc2libGVWaWV3UmFuZ2UuZW5kTGluZU51bWJlciAtIDEpIHsKICAgICAgICAgIG5ld1ZpZXdMaW5lTnVtYmVyID0gdmlzaWJsZVZpZXdSYW5nZS5lbmRMaW5lTnVtYmVyIC0gMTsKICAgICAgICB9IGVsc2UgaWYgKHZpZXdMaW5lTnVtYmVyIDwgdmlzaWJsZVZpZXdSYW5nZS5zdGFydExpbmVOdW1iZXIpIHsKICAgICAgICAgIG5ld1ZpZXdMaW5lTnVtYmVyID0gdmlzaWJsZVZpZXdSYW5nZS5zdGFydExpbmVOdW1iZXI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5ld1ZpZXdMaW5lTnVtYmVyID0gdmlld0xpbmVOdW1iZXI7CiAgICAgICAgfQogICAgICAgIHZhciBwb3NpdGlvbiA9IE1vdmVPcGVyYXRpb25zLnZlcnRpY2FsKHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbCwgdmlld0xpbmVOdW1iZXIsIGN1cnNvci52aWV3U3RhdGUucG9zaXRpb24uY29sdW1uLCBjdXJzb3Iudmlld1N0YXRlLmxlZnRvdmVyVmlzaWJsZUNvbHVtbnMsIG5ld1ZpZXdMaW5lTnVtYmVyLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIEN1cnNvclN0YXRlLmZyb21WaWV3U3RhdGUoY3Vyc29yLnZpZXdTdGF0ZS5tb3ZlKGluU2VsZWN0aW9uTW9kZSwgcG9zaXRpb24ubGluZU51bWJlciwgcG9zaXRpb24uY29sdW1uLCBwb3NpdGlvbi5sZWZ0b3ZlclZpc2libGVDb2x1bW5zKSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgbnRoIGxpbmUgc3RhcnQgaW5jbHVkZWQgaW4gdGhlIHJhbmdlIChmcm9tIHRoZSBzdGFydCkuCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJfZmlyc3RMaW5lTnVtYmVySW5SYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpcnN0TGluZU51bWJlckluUmFuZ2UobW9kZWwsIHJhbmdlLCBjb3VudCkgewogICAgICB2YXIgc3RhcnRMaW5lTnVtYmVyID0gcmFuZ2Uuc3RhcnRMaW5lTnVtYmVyOwogICAgICBpZiAocmFuZ2Uuc3RhcnRDb2x1bW4gIT09IG1vZGVsLmdldExpbmVNaW5Db2x1bW4oc3RhcnRMaW5lTnVtYmVyKSkgewogICAgICAgIC8vIE1vdmUgb24gdG8gdGhlIHNlY29uZCBsaW5lIGlmIHRoZSBmaXJzdCBsaW5lIHN0YXJ0IGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgcmFuZ2UKICAgICAgICBzdGFydExpbmVOdW1iZXIrKzsKICAgICAgfQogICAgICByZXR1cm4gTWF0aC5taW4ocmFuZ2UuZW5kTGluZU51bWJlciwgc3RhcnRMaW5lTnVtYmVyICsgY291bnQgLSAxKTsKICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgbnRoIGxpbmUgc3RhcnQgaW5jbHVkZWQgaW4gdGhlIHJhbmdlIChmcm9tIHRoZSBlbmQpLgogICAgICovCiAgfSwgewogICAga2V5OiAiX2xhc3RMaW5lTnVtYmVySW5SYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2xhc3RMaW5lTnVtYmVySW5SYW5nZShtb2RlbCwgcmFuZ2UsIGNvdW50KSB7CiAgICAgIHZhciBzdGFydExpbmVOdW1iZXIgPSByYW5nZS5zdGFydExpbmVOdW1iZXI7CiAgICAgIGlmIChyYW5nZS5zdGFydENvbHVtbiAhPT0gbW9kZWwuZ2V0TGluZU1pbkNvbHVtbihzdGFydExpbmVOdW1iZXIpKSB7CiAgICAgICAgLy8gTW92ZSBvbiB0byB0aGUgc2Vjb25kIGxpbmUgaWYgdGhlIGZpcnN0IGxpbmUgc3RhcnQgaXMgbm90IGluY2x1ZGVkIGluIHRoZSByYW5nZQogICAgICAgIHN0YXJ0TGluZU51bWJlcisrOwogICAgICB9CiAgICAgIHJldHVybiBNYXRoLm1heChzdGFydExpbmVOdW1iZXIsIHJhbmdlLmVuZExpbmVOdW1iZXIgLSBjb3VudCArIDEpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9tb3ZlTGVmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21vdmVMZWZ0KHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlLCBub09mQ29sdW1ucykgewogICAgICByZXR1cm4gY3Vyc29ycy5tYXAoZnVuY3Rpb24gKGN1cnNvcikgewogICAgICAgIHJldHVybiBDdXJzb3JTdGF0ZS5mcm9tVmlld1N0YXRlKE1vdmVPcGVyYXRpb25zLm1vdmVMZWZ0KHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbCwgY3Vyc29yLnZpZXdTdGF0ZSwgaW5TZWxlY3Rpb25Nb2RlLCBub09mQ29sdW1ucykpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZUhhbGZMaW5lTGVmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21vdmVIYWxmTGluZUxlZnQodmlld01vZGVsLCBjdXJzb3JzLCBpblNlbGVjdGlvbk1vZGUpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY3Vyc29ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JzW2ldOwogICAgICAgIHZhciB2aWV3TGluZU51bWJlciA9IGN1cnNvci52aWV3U3RhdGUucG9zaXRpb24ubGluZU51bWJlcjsKICAgICAgICB2YXIgaGFsZkxpbmUgPSBNYXRoLnJvdW5kKHZpZXdNb2RlbC5nZXRMaW5lQ29udGVudCh2aWV3TGluZU51bWJlcikubGVuZ3RoIC8gMik7CiAgICAgICAgcmVzdWx0W2ldID0gQ3Vyc29yU3RhdGUuZnJvbVZpZXdTdGF0ZShNb3ZlT3BlcmF0aW9ucy5tb3ZlTGVmdCh2aWV3TW9kZWwuY3Vyc29yQ29uZmlnLCB2aWV3TW9kZWwsIGN1cnNvci52aWV3U3RhdGUsIGluU2VsZWN0aW9uTW9kZSwgaGFsZkxpbmUpKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIl9tb3ZlUmlnaHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tb3ZlUmlnaHQodmlld01vZGVsLCBjdXJzb3JzLCBpblNlbGVjdGlvbk1vZGUsIG5vT2ZDb2x1bW5zKSB7CiAgICAgIHJldHVybiBjdXJzb3JzLm1hcChmdW5jdGlvbiAoY3Vyc29yKSB7CiAgICAgICAgcmV0dXJuIEN1cnNvclN0YXRlLmZyb21WaWV3U3RhdGUoTW92ZU9wZXJhdGlvbnMubW92ZVJpZ2h0KHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbCwgY3Vyc29yLnZpZXdTdGF0ZSwgaW5TZWxlY3Rpb25Nb2RlLCBub09mQ29sdW1ucykpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZUhhbGZMaW5lUmlnaHQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tb3ZlSGFsZkxpbmVSaWdodCh2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSkgewogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjdXJzb3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvcnNbaV07CiAgICAgICAgdmFyIHZpZXdMaW5lTnVtYmVyID0gY3Vyc29yLnZpZXdTdGF0ZS5wb3NpdGlvbi5saW5lTnVtYmVyOwogICAgICAgIHZhciBoYWxmTGluZSA9IE1hdGgucm91bmQodmlld01vZGVsLmdldExpbmVDb250ZW50KHZpZXdMaW5lTnVtYmVyKS5sZW5ndGggLyAyKTsKICAgICAgICByZXN1bHRbaV0gPSBDdXJzb3JTdGF0ZS5mcm9tVmlld1N0YXRlKE1vdmVPcGVyYXRpb25zLm1vdmVSaWdodCh2aWV3TW9kZWwuY3Vyc29yQ29uZmlnLCB2aWV3TW9kZWwsIGN1cnNvci52aWV3U3RhdGUsIGluU2VsZWN0aW9uTW9kZSwgaGFsZkxpbmUpKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIl9tb3ZlRG93bkJ5Vmlld0xpbmVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZURvd25CeVZpZXdMaW5lcyh2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSwgbGluZXNDb3VudCkgewogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjdXJzb3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvcnNbaV07CiAgICAgICAgcmVzdWx0W2ldID0gQ3Vyc29yU3RhdGUuZnJvbVZpZXdTdGF0ZShNb3ZlT3BlcmF0aW9ucy5tb3ZlRG93bih2aWV3TW9kZWwuY3Vyc29yQ29uZmlnLCB2aWV3TW9kZWwsIGN1cnNvci52aWV3U3RhdGUsIGluU2VsZWN0aW9uTW9kZSwgbGluZXNDb3VudCkpOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiX21vdmVEb3duQnlNb2RlbExpbmVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZURvd25CeU1vZGVsTGluZXModmlld01vZGVsLCBjdXJzb3JzLCBpblNlbGVjdGlvbk1vZGUsIGxpbmVzQ291bnQpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY3Vyc29ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JzW2ldOwogICAgICAgIHJlc3VsdFtpXSA9IEN1cnNvclN0YXRlLmZyb21Nb2RlbFN0YXRlKE1vdmVPcGVyYXRpb25zLm1vdmVEb3duKHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbC5tb2RlbCwgY3Vyc29yLm1vZGVsU3RhdGUsIGluU2VsZWN0aW9uTW9kZSwgbGluZXNDb3VudCkpOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiX21vdmVVcEJ5Vmlld0xpbmVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZVVwQnlWaWV3TGluZXModmlld01vZGVsLCBjdXJzb3JzLCBpblNlbGVjdGlvbk1vZGUsIGxpbmVzQ291bnQpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY3Vyc29ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JzW2ldOwogICAgICAgIHJlc3VsdFtpXSA9IEN1cnNvclN0YXRlLmZyb21WaWV3U3RhdGUoTW92ZU9wZXJhdGlvbnMubW92ZVVwKHZpZXdNb2RlbC5jdXJzb3JDb25maWcsIHZpZXdNb2RlbCwgY3Vyc29yLnZpZXdTdGF0ZSwgaW5TZWxlY3Rpb25Nb2RlLCBsaW5lc0NvdW50KSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZVVwQnlNb2RlbExpbmVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZVVwQnlNb2RlbExpbmVzKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlLCBsaW5lc0NvdW50KSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGN1cnNvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgY3Vyc29yID0gY3Vyc29yc1tpXTsKICAgICAgICByZXN1bHRbaV0gPSBDdXJzb3JTdGF0ZS5mcm9tTW9kZWxTdGF0ZShNb3ZlT3BlcmF0aW9ucy5tb3ZlVXAodmlld01vZGVsLmN1cnNvckNvbmZpZywgdmlld01vZGVsLm1vZGVsLCBjdXJzb3IubW9kZWxTdGF0ZSwgaW5TZWxlY3Rpb25Nb2RlLCBsaW5lc0NvdW50KSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZVRvVmlld1Bvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZVRvVmlld1Bvc2l0aW9uKHZpZXdNb2RlbCwgY3Vyc29yLCBpblNlbGVjdGlvbk1vZGUsIHRvVmlld0xpbmVOdW1iZXIsIHRvVmlld0NvbHVtbikgewogICAgICByZXR1cm4gQ3Vyc29yU3RhdGUuZnJvbVZpZXdTdGF0ZShjdXJzb3Iudmlld1N0YXRlLm1vdmUoaW5TZWxlY3Rpb25Nb2RlLCB0b1ZpZXdMaW5lTnVtYmVyLCB0b1ZpZXdDb2x1bW4sIDApKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZVRvTW9kZWxQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21vdmVUb01vZGVsUG9zaXRpb24odmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSwgdG9Nb2RlbExpbmVOdW1iZXIsIHRvTW9kZWxDb2x1bW4pIHsKICAgICAgcmV0dXJuIEN1cnNvclN0YXRlLmZyb21Nb2RlbFN0YXRlKGN1cnNvci5tb2RlbFN0YXRlLm1vdmUoaW5TZWxlY3Rpb25Nb2RlLCB0b01vZGVsTGluZU51bWJlciwgdG9Nb2RlbENvbHVtbiwgMCkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9tb3ZlVG9WaWV3TWluQ29sdW1uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZVRvVmlld01pbkNvbHVtbih2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSkgewogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjdXJzb3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvcnNbaV07CiAgICAgICAgdmFyIHZpZXdMaW5lTnVtYmVyID0gY3Vyc29yLnZpZXdTdGF0ZS5wb3NpdGlvbi5saW5lTnVtYmVyOwogICAgICAgIHZhciB2aWV3Q29sdW1uID0gdmlld01vZGVsLmdldExpbmVNaW5Db2x1bW4odmlld0xpbmVOdW1iZXIpOwogICAgICAgIHJlc3VsdFtpXSA9IHRoaXMuX21vdmVUb1ZpZXdQb3NpdGlvbih2aWV3TW9kZWwsIGN1cnNvciwgaW5TZWxlY3Rpb25Nb2RlLCB2aWV3TGluZU51bWJlciwgdmlld0NvbHVtbik7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZVRvVmlld0ZpcnN0Tm9uV2hpdGVzcGFjZUNvbHVtbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX21vdmVUb1ZpZXdGaXJzdE5vbldoaXRlc3BhY2VDb2x1bW4odmlld01vZGVsLCBjdXJzb3JzLCBpblNlbGVjdGlvbk1vZGUpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY3Vyc29ycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JzW2ldOwogICAgICAgIHZhciB2aWV3TGluZU51bWJlciA9IGN1cnNvci52aWV3U3RhdGUucG9zaXRpb24ubGluZU51bWJlcjsKICAgICAgICB2YXIgdmlld0NvbHVtbiA9IHZpZXdNb2RlbC5nZXRMaW5lRmlyc3ROb25XaGl0ZXNwYWNlQ29sdW1uKHZpZXdMaW5lTnVtYmVyKTsKICAgICAgICByZXN1bHRbaV0gPSB0aGlzLl9tb3ZlVG9WaWV3UG9zaXRpb24odmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSwgdmlld0xpbmVOdW1iZXIsIHZpZXdDb2x1bW4pOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiX21vdmVUb1ZpZXdDZW50ZXJDb2x1bW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9tb3ZlVG9WaWV3Q2VudGVyQ29sdW1uKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlKSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGN1cnNvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgY3Vyc29yID0gY3Vyc29yc1tpXTsKICAgICAgICB2YXIgdmlld0xpbmVOdW1iZXIgPSBjdXJzb3Iudmlld1N0YXRlLnBvc2l0aW9uLmxpbmVOdW1iZXI7CiAgICAgICAgdmFyIHZpZXdDb2x1bW4gPSBNYXRoLnJvdW5kKCh2aWV3TW9kZWwuZ2V0TGluZU1heENvbHVtbih2aWV3TGluZU51bWJlcikgKyB2aWV3TW9kZWwuZ2V0TGluZU1pbkNvbHVtbih2aWV3TGluZU51bWJlcikpIC8gMik7CiAgICAgICAgcmVzdWx0W2ldID0gdGhpcy5fbW92ZVRvVmlld1Bvc2l0aW9uKHZpZXdNb2RlbCwgY3Vyc29yLCBpblNlbGVjdGlvbk1vZGUsIHZpZXdMaW5lTnVtYmVyLCB2aWV3Q29sdW1uKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogIl9tb3ZlVG9WaWV3TWF4Q29sdW1uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZVRvVmlld01heENvbHVtbih2aWV3TW9kZWwsIGN1cnNvcnMsIGluU2VsZWN0aW9uTW9kZSkgewogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjdXJzb3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvcnNbaV07CiAgICAgICAgdmFyIHZpZXdMaW5lTnVtYmVyID0gY3Vyc29yLnZpZXdTdGF0ZS5wb3NpdGlvbi5saW5lTnVtYmVyOwogICAgICAgIHZhciB2aWV3Q29sdW1uID0gdmlld01vZGVsLmdldExpbmVNYXhDb2x1bW4odmlld0xpbmVOdW1iZXIpOwogICAgICAgIHJlc3VsdFtpXSA9IHRoaXMuX21vdmVUb1ZpZXdQb3NpdGlvbih2aWV3TW9kZWwsIGN1cnNvciwgaW5TZWxlY3Rpb25Nb2RlLCB2aWV3TGluZU51bWJlciwgdmlld0NvbHVtbik7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbW92ZVRvVmlld0xhc3ROb25XaGl0ZXNwYWNlQ29sdW1uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbW92ZVRvVmlld0xhc3ROb25XaGl0ZXNwYWNlQ29sdW1uKHZpZXdNb2RlbCwgY3Vyc29ycywgaW5TZWxlY3Rpb25Nb2RlKSB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGN1cnNvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgY3Vyc29yID0gY3Vyc29yc1tpXTsKICAgICAgICB2YXIgdmlld0xpbmVOdW1iZXIgPSBjdXJzb3Iudmlld1N0YXRlLnBvc2l0aW9uLmxpbmVOdW1iZXI7CiAgICAgICAgdmFyIHZpZXdDb2x1bW4gPSB2aWV3TW9kZWwuZ2V0TGluZUxhc3ROb25XaGl0ZXNwYWNlQ29sdW1uKHZpZXdMaW5lTnVtYmVyKTsKICAgICAgICByZXN1bHRbaV0gPSB0aGlzLl9tb3ZlVG9WaWV3UG9zaXRpb24odmlld01vZGVsLCBjdXJzb3IsIGluU2VsZWN0aW9uTW9kZSwgdmlld0xpbmVOdW1iZXIsIHZpZXdDb2x1bW4pOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfV0pOwogIHJldHVybiBDdXJzb3JNb3ZlQ29tbWFuZHM7Cn0oKTsKZXhwb3J0IHZhciBDdXJzb3JNb3ZlOwooZnVuY3Rpb24gKEN1cnNvck1vdmUpIHsKICB2YXIgaXNDdXJzb3JNb3ZlQXJncyA9IGZ1bmN0aW9uIGlzQ3Vyc29yTW92ZUFyZ3MoYXJnKSB7CiAgICBpZiAoIXR5cGVzLmlzT2JqZWN0KGFyZykpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyIGN1cnNvck1vdmVBcmcgPSBhcmc7CiAgICBpZiAoIXR5cGVzLmlzU3RyaW5nKGN1cnNvck1vdmVBcmcudG8pKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICghdHlwZXMuaXNVbmRlZmluZWQoY3Vyc29yTW92ZUFyZy5zZWxlY3QpICYmICF0eXBlcy5pc0Jvb2xlYW4oY3Vyc29yTW92ZUFyZy5zZWxlY3QpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICghdHlwZXMuaXNVbmRlZmluZWQoY3Vyc29yTW92ZUFyZy5ieSkgJiYgIXR5cGVzLmlzU3RyaW5nKGN1cnNvck1vdmVBcmcuYnkpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICghdHlwZXMuaXNVbmRlZmluZWQoY3Vyc29yTW92ZUFyZy52YWx1ZSkgJiYgIXR5cGVzLmlzTnVtYmVyKGN1cnNvck1vdmVBcmcudmFsdWUpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH07CiAgQ3Vyc29yTW92ZS5kZXNjcmlwdGlvbiA9IHsKICAgIGRlc2NyaXB0aW9uOiAnTW92ZSBjdXJzb3IgdG8gYSBsb2dpY2FsIHBvc2l0aW9uIGluIHRoZSB2aWV3JywKICAgIGFyZ3M6IFt7CiAgICAgIG5hbWU6ICdDdXJzb3IgbW92ZSBhcmd1bWVudCBvYmplY3QnLAogICAgICBkZXNjcmlwdGlvbjogIlByb3BlcnR5LXZhbHVlIHBhaXJzIHRoYXQgY2FuIGJlIHBhc3NlZCB0aHJvdWdoIHRoaXMgYXJndW1lbnQ6XG5cdFx0XHRcdFx0KiAndG8nOiBBIG1hbmRhdG9yeSBsb2dpY2FsIHBvc2l0aW9uIHZhbHVlIHByb3ZpZGluZyB3aGVyZSB0byBtb3ZlIHRoZSBjdXJzb3IuXG5cdFx0XHRcdFx0XHRgYGBcblx0XHRcdFx0XHRcdCdsZWZ0JywgJ3JpZ2h0JywgJ3VwJywgJ2Rvd24nLCAncHJldkJsYW5rTGluZScsICduZXh0QmxhbmtMaW5lJyxcblx0XHRcdFx0XHRcdCd3cmFwcGVkTGluZVN0YXJ0JywgJ3dyYXBwZWRMaW5lRW5kJywgJ3dyYXBwZWRMaW5lQ29sdW1uQ2VudGVyJ1xuXHRcdFx0XHRcdFx0J3dyYXBwZWRMaW5lRmlyc3ROb25XaGl0ZXNwYWNlQ2hhcmFjdGVyJywgJ3dyYXBwZWRMaW5lTGFzdE5vbldoaXRlc3BhY2VDaGFyYWN0ZXInXG5cdFx0XHRcdFx0XHQndmlld1BvcnRUb3AnLCAndmlld1BvcnRDZW50ZXInLCAndmlld1BvcnRCb3R0b20nLCAndmlld1BvcnRJZk91dHNpZGUnXG5cdFx0XHRcdFx0XHRgYGBcblx0XHRcdFx0XHQqICdieSc6IFVuaXQgdG8gbW92ZS4gRGVmYXVsdCBpcyBjb21wdXRlZCBiYXNlZCBvbiAndG8nIHZhbHVlLlxuXHRcdFx0XHRcdFx0YGBgXG5cdFx0XHRcdFx0XHQnbGluZScsICd3cmFwcGVkTGluZScsICdjaGFyYWN0ZXInLCAnaGFsZkxpbmUnXG5cdFx0XHRcdFx0XHRgYGBcblx0XHRcdFx0XHQqICd2YWx1ZSc6IE51bWJlciBvZiB1bml0cyB0byBtb3ZlLiBEZWZhdWx0IGlzICcxJy5cblx0XHRcdFx0XHQqICdzZWxlY3QnOiBJZiAndHJ1ZScgbWFrZXMgdGhlIHNlbGVjdGlvbi4gRGVmYXVsdCBpcyAnZmFsc2UnLlxuXHRcdFx0XHQiLAogICAgICBjb25zdHJhaW50OiBpc0N1cnNvck1vdmVBcmdzLAogICAgICBzY2hlbWE6IHsKICAgICAgICAndHlwZSc6ICdvYmplY3QnLAogICAgICAgICdyZXF1aXJlZCc6IFsndG8nXSwKICAgICAgICAncHJvcGVydGllcyc6IHsKICAgICAgICAgICd0byc6IHsKICAgICAgICAgICAgJ3R5cGUnOiAnc3RyaW5nJywKICAgICAgICAgICAgJ2VudW0nOiBbJ2xlZnQnLCAncmlnaHQnLCAndXAnLCAnZG93bicsICdwcmV2QmxhbmtMaW5lJywgJ25leHRCbGFua0xpbmUnLCAnd3JhcHBlZExpbmVTdGFydCcsICd3cmFwcGVkTGluZUVuZCcsICd3cmFwcGVkTGluZUNvbHVtbkNlbnRlcicsICd3cmFwcGVkTGluZUZpcnN0Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcicsICd3cmFwcGVkTGluZUxhc3ROb25XaGl0ZXNwYWNlQ2hhcmFjdGVyJywgJ3ZpZXdQb3J0VG9wJywgJ3ZpZXdQb3J0Q2VudGVyJywgJ3ZpZXdQb3J0Qm90dG9tJywgJ3ZpZXdQb3J0SWZPdXRzaWRlJ10KICAgICAgICAgIH0sCiAgICAgICAgICAnYnknOiB7CiAgICAgICAgICAgICd0eXBlJzogJ3N0cmluZycsCiAgICAgICAgICAgICdlbnVtJzogWydsaW5lJywgJ3dyYXBwZWRMaW5lJywgJ2NoYXJhY3RlcicsICdoYWxmTGluZSddCiAgICAgICAgICB9LAogICAgICAgICAgJ3ZhbHVlJzogewogICAgICAgICAgICAndHlwZSc6ICdudW1iZXInLAogICAgICAgICAgICAnZGVmYXVsdCc6IDEKICAgICAgICAgIH0sCiAgICAgICAgICAnc2VsZWN0JzogewogICAgICAgICAgICAndHlwZSc6ICdib29sZWFuJywKICAgICAgICAgICAgJ2RlZmF1bHQnOiBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfV0KICB9OwogIC8qKgogICAqIFBvc2l0aW9ucyBpbiB0aGUgdmlldyBmb3IgY3Vyc29yIG1vdmUgY29tbWFuZC4KICAgKi8KICBDdXJzb3JNb3ZlLlJhd0RpcmVjdGlvbiA9IHsKICAgIExlZnQ6ICdsZWZ0JywKICAgIFJpZ2h0OiAncmlnaHQnLAogICAgVXA6ICd1cCcsCiAgICBEb3duOiAnZG93bicsCiAgICBQcmV2QmxhbmtMaW5lOiAncHJldkJsYW5rTGluZScsCiAgICBOZXh0QmxhbmtMaW5lOiAnbmV4dEJsYW5rTGluZScsCiAgICBXcmFwcGVkTGluZVN0YXJ0OiAnd3JhcHBlZExpbmVTdGFydCcsCiAgICBXcmFwcGVkTGluZUZpcnN0Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcjogJ3dyYXBwZWRMaW5lRmlyc3ROb25XaGl0ZXNwYWNlQ2hhcmFjdGVyJywKICAgIFdyYXBwZWRMaW5lQ29sdW1uQ2VudGVyOiAnd3JhcHBlZExpbmVDb2x1bW5DZW50ZXInLAogICAgV3JhcHBlZExpbmVFbmQ6ICd3cmFwcGVkTGluZUVuZCcsCiAgICBXcmFwcGVkTGluZUxhc3ROb25XaGl0ZXNwYWNlQ2hhcmFjdGVyOiAnd3JhcHBlZExpbmVMYXN0Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcicsCiAgICBWaWV3UG9ydFRvcDogJ3ZpZXdQb3J0VG9wJywKICAgIFZpZXdQb3J0Q2VudGVyOiAndmlld1BvcnRDZW50ZXInLAogICAgVmlld1BvcnRCb3R0b206ICd2aWV3UG9ydEJvdHRvbScsCiAgICBWaWV3UG9ydElmT3V0c2lkZTogJ3ZpZXdQb3J0SWZPdXRzaWRlJwogIH07CiAgLyoqCiAgICogVW5pdHMgZm9yIEN1cnNvciBtb3ZlICdieScgYXJndW1lbnQKICAgKi8KICBDdXJzb3JNb3ZlLlJhd1VuaXQgPSB7CiAgICBMaW5lOiAnbGluZScsCiAgICBXcmFwcGVkTGluZTogJ3dyYXBwZWRMaW5lJywKICAgIENoYXJhY3RlcjogJ2NoYXJhY3RlcicsCiAgICBIYWxmTGluZTogJ2hhbGZMaW5lJwogIH07CiAgZnVuY3Rpb24gcGFyc2UoYXJncykgewogICAgaWYgKCFhcmdzLnRvKSB7CiAgICAgIC8vIGlsbGVnYWwgYXJndW1lbnRzCiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgdmFyIGRpcmVjdGlvbjsKICAgIHN3aXRjaCAoYXJncy50bykgewogICAgICBjYXNlIEN1cnNvck1vdmUuUmF3RGlyZWN0aW9uLkxlZnQ6CiAgICAgICAgZGlyZWN0aW9uID0gMCAvKiBEaXJlY3Rpb24uTGVmdCAqLzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDdXJzb3JNb3ZlLlJhd0RpcmVjdGlvbi5SaWdodDoKICAgICAgICBkaXJlY3Rpb24gPSAxIC8qIERpcmVjdGlvbi5SaWdodCAqLzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDdXJzb3JNb3ZlLlJhd0RpcmVjdGlvbi5VcDoKICAgICAgICBkaXJlY3Rpb24gPSAyIC8qIERpcmVjdGlvbi5VcCAqLzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDdXJzb3JNb3ZlLlJhd0RpcmVjdGlvbi5Eb3duOgogICAgICAgIGRpcmVjdGlvbiA9IDMgLyogRGlyZWN0aW9uLkRvd24gKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQ3Vyc29yTW92ZS5SYXdEaXJlY3Rpb24uUHJldkJsYW5rTGluZToKICAgICAgICBkaXJlY3Rpb24gPSA0IC8qIERpcmVjdGlvbi5QcmV2QmxhbmtMaW5lICovOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIEN1cnNvck1vdmUuUmF3RGlyZWN0aW9uLk5leHRCbGFua0xpbmU6CiAgICAgICAgZGlyZWN0aW9uID0gNSAvKiBEaXJlY3Rpb24uTmV4dEJsYW5rTGluZSAqLzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDdXJzb3JNb3ZlLlJhd0RpcmVjdGlvbi5XcmFwcGVkTGluZVN0YXJ0OgogICAgICAgIGRpcmVjdGlvbiA9IDYgLyogRGlyZWN0aW9uLldyYXBwZWRMaW5lU3RhcnQgKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQ3Vyc29yTW92ZS5SYXdEaXJlY3Rpb24uV3JhcHBlZExpbmVGaXJzdE5vbldoaXRlc3BhY2VDaGFyYWN0ZXI6CiAgICAgICAgZGlyZWN0aW9uID0gNyAvKiBEaXJlY3Rpb24uV3JhcHBlZExpbmVGaXJzdE5vbldoaXRlc3BhY2VDaGFyYWN0ZXIgKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQ3Vyc29yTW92ZS5SYXdEaXJlY3Rpb24uV3JhcHBlZExpbmVDb2x1bW5DZW50ZXI6CiAgICAgICAgZGlyZWN0aW9uID0gOCAvKiBEaXJlY3Rpb24uV3JhcHBlZExpbmVDb2x1bW5DZW50ZXIgKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQ3Vyc29yTW92ZS5SYXdEaXJlY3Rpb24uV3JhcHBlZExpbmVFbmQ6CiAgICAgICAgZGlyZWN0aW9uID0gOSAvKiBEaXJlY3Rpb24uV3JhcHBlZExpbmVFbmQgKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQ3Vyc29yTW92ZS5SYXdEaXJlY3Rpb24uV3JhcHBlZExpbmVMYXN0Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcjoKICAgICAgICBkaXJlY3Rpb24gPSAxMCAvKiBEaXJlY3Rpb24uV3JhcHBlZExpbmVMYXN0Tm9uV2hpdGVzcGFjZUNoYXJhY3RlciAqLzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDdXJzb3JNb3ZlLlJhd0RpcmVjdGlvbi5WaWV3UG9ydFRvcDoKICAgICAgICBkaXJlY3Rpb24gPSAxMSAvKiBEaXJlY3Rpb24uVmlld1BvcnRUb3AgKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQ3Vyc29yTW92ZS5SYXdEaXJlY3Rpb24uVmlld1BvcnRCb3R0b206CiAgICAgICAgZGlyZWN0aW9uID0gMTMgLyogRGlyZWN0aW9uLlZpZXdQb3J0Qm90dG9tICovOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIEN1cnNvck1vdmUuUmF3RGlyZWN0aW9uLlZpZXdQb3J0Q2VudGVyOgogICAgICAgIGRpcmVjdGlvbiA9IDEyIC8qIERpcmVjdGlvbi5WaWV3UG9ydENlbnRlciAqLzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDdXJzb3JNb3ZlLlJhd0RpcmVjdGlvbi5WaWV3UG9ydElmT3V0c2lkZToKICAgICAgICBkaXJlY3Rpb24gPSAxNCAvKiBEaXJlY3Rpb24uVmlld1BvcnRJZk91dHNpZGUgKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgLy8gaWxsZWdhbCBhcmd1bWVudHMKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHZhciB1bml0ID0gMCAvKiBVbml0Lk5vbmUgKi87CiAgICBzd2l0Y2ggKGFyZ3MuYnkpIHsKICAgICAgY2FzZSBDdXJzb3JNb3ZlLlJhd1VuaXQuTGluZToKICAgICAgICB1bml0ID0gMSAvKiBVbml0LkxpbmUgKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQ3Vyc29yTW92ZS5SYXdVbml0LldyYXBwZWRMaW5lOgogICAgICAgIHVuaXQgPSAyIC8qIFVuaXQuV3JhcHBlZExpbmUgKi87CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQ3Vyc29yTW92ZS5SYXdVbml0LkNoYXJhY3RlcjoKICAgICAgICB1bml0ID0gMyAvKiBVbml0LkNoYXJhY3RlciAqLzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDdXJzb3JNb3ZlLlJhd1VuaXQuSGFsZkxpbmU6CiAgICAgICAgdW5pdCA9IDQgLyogVW5pdC5IYWxmTGluZSAqLzsKICAgICAgICBicmVhazsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uLAogICAgICB1bml0OiB1bml0LAogICAgICBzZWxlY3Q6ICEhYXJncy5zZWxlY3QsCiAgICAgIHZhbHVlOiBhcmdzLnZhbHVlIHx8IDEKICAgIH07CiAgfQogIEN1cnNvck1vdmUucGFyc2UgPSBwYXJzZTsKfSkoQ3Vyc29yTW92ZSB8fCAoQ3Vyc29yTW92ZSA9IHt9KSk7"},{"version":3,"names":["types","CursorState","SingleCursorState","MoveOperations","WordOperations","Position","Range","CursorMoveCommands","viewModel","cursors","useLogicalLine","result","resultLen","i","len","length","cursor","modelState","viewState","fromModelState","translateDown","cursorConfig","model","fromViewState","translateUp","inSelectionMode","_moveToLineStart","currentViewStateColumn","position","column","currentModelStateColumn","isFirstLineOfWrappedLine","currentViewStatelineNumber","lineNumber","firstNonBlankColumn","getLineFirstNonWhitespaceColumn","isBeginningOfViewLine","_moveToLineStartByView","_moveToLineStartByModel","moveToBeginningOfLine","sticky","_moveToLineEnd","viewStatePosition","viewModelMaxColumn","getLineMaxColumn","isEndOfViewLine","modelStatePosition","modelMaxColumn","isEndLineOfWrappedLine","_moveToLineEndByModel","_moveToLineEndByView","moveToEndOfLine","startLineNumber","selection","lineCount","getLineCount","endLineNumber","endColumn","moveToBeginningOfBuffer","moveToEndOfBuffer","maxColumn","_position","_viewPosition","validatePosition","viewPosition","coordinatesConverter","validateViewPosition","convertModelPositionToViewPosition","hasSelection","selectToLineNumber","selectToColumn","enteringLineNumber","selectionStart","getStartPosition","move","selectToViewLineNumber","selectToViewColumn","endPositionOfSelectionStart","getEndPosition","word","direction","value","unit","_moveHalfLineLeft","_moveLeft","_moveHalfLineRight","_moveRight","_moveUpByViewLines","_moveUpByModelLines","_moveDownByViewLines","_moveDownByModelLines","map","moveToPrevBlankLine","moveToNextBlankLine","_moveToViewMinColumn","_moveToViewFirstNonWhitespaceColumn","_moveToViewCenterColumn","_moveToViewMaxColumn","_moveToViewLastNonWhitespaceColumn","visibleViewRange","getCompletelyVisibleViewRange","visibleModelRange","convertViewRangeToModelRange","modelLineNumber","_firstLineNumberInRange","modelColumn","_moveToModelPosition","_lastLineNumberInRange","Math","round","findPositionInViewportIfOutside","viewLineNumber","newViewLineNumber","vertical","leftoverVisibleColumns","range","count","startColumn","getLineMinColumn","min","max","noOfColumns","moveLeft","halfLine","getLineContent","moveRight","linesCount","moveDown","moveUp","toViewLineNumber","toViewColumn","toModelLineNumber","toModelColumn","viewColumn","_moveToViewPosition","getLineLastNonWhitespaceColumn","CursorMove","isCursorMoveArgs","arg","isObject","cursorMoveArg","isString","to","isUndefined","select","isBoolean","by","isNumber","description","args","name","constraint","schema","RawDirection","Left","Right","Up","Down","PrevBlankLine","NextBlankLine","WrappedLineStart","WrappedLineFirstNonWhitespaceCharacter","WrappedLineColumnCenter","WrappedLineEnd","WrappedLineLastNonWhitespaceCharacter","ViewPortTop","ViewPortCenter","ViewPortBottom","ViewPortIfOutside","RawUnit","Line","WrappedLine","Character","HalfLine","parse"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/cursor/cursorMoveCommands.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as types from '../../../base/common/types.js';\nimport { CursorState, SingleCursorState } from '../cursorCommon.js';\nimport { MoveOperations } from './cursorMoveOperations.js';\nimport { WordOperations } from './cursorWordOperations.js';\nimport { Position } from '../core/position.js';\nimport { Range } from '../core/range.js';\nexport class CursorMoveCommands {\n    static addCursorDown(viewModel, cursors, useLogicalLine) {\n        const result = [];\n        let resultLen = 0;\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[resultLen++] = new CursorState(cursor.modelState, cursor.viewState);\n            if (useLogicalLine) {\n                result[resultLen++] = CursorState.fromModelState(MoveOperations.translateDown(viewModel.cursorConfig, viewModel.model, cursor.modelState));\n            }\n            else {\n                result[resultLen++] = CursorState.fromViewState(MoveOperations.translateDown(viewModel.cursorConfig, viewModel, cursor.viewState));\n            }\n        }\n        return result;\n    }\n    static addCursorUp(viewModel, cursors, useLogicalLine) {\n        const result = [];\n        let resultLen = 0;\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[resultLen++] = new CursorState(cursor.modelState, cursor.viewState);\n            if (useLogicalLine) {\n                result[resultLen++] = CursorState.fromModelState(MoveOperations.translateUp(viewModel.cursorConfig, viewModel.model, cursor.modelState));\n            }\n            else {\n                result[resultLen++] = CursorState.fromViewState(MoveOperations.translateUp(viewModel.cursorConfig, viewModel, cursor.viewState));\n            }\n        }\n        return result;\n    }\n    static moveToBeginningOfLine(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[i] = this._moveToLineStart(viewModel, cursor, inSelectionMode);\n        }\n        return result;\n    }\n    static _moveToLineStart(viewModel, cursor, inSelectionMode) {\n        const currentViewStateColumn = cursor.viewState.position.column;\n        const currentModelStateColumn = cursor.modelState.position.column;\n        const isFirstLineOfWrappedLine = currentViewStateColumn === currentModelStateColumn;\n        const currentViewStatelineNumber = cursor.viewState.position.lineNumber;\n        const firstNonBlankColumn = viewModel.getLineFirstNonWhitespaceColumn(currentViewStatelineNumber);\n        const isBeginningOfViewLine = currentViewStateColumn === firstNonBlankColumn;\n        if (!isFirstLineOfWrappedLine && !isBeginningOfViewLine) {\n            return this._moveToLineStartByView(viewModel, cursor, inSelectionMode);\n        }\n        else {\n            return this._moveToLineStartByModel(viewModel, cursor, inSelectionMode);\n        }\n    }\n    static _moveToLineStartByView(viewModel, cursor, inSelectionMode) {\n        return CursorState.fromViewState(MoveOperations.moveToBeginningOfLine(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode));\n    }\n    static _moveToLineStartByModel(viewModel, cursor, inSelectionMode) {\n        return CursorState.fromModelState(MoveOperations.moveToBeginningOfLine(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode));\n    }\n    static moveToEndOfLine(viewModel, cursors, inSelectionMode, sticky) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[i] = this._moveToLineEnd(viewModel, cursor, inSelectionMode, sticky);\n        }\n        return result;\n    }\n    static _moveToLineEnd(viewModel, cursor, inSelectionMode, sticky) {\n        const viewStatePosition = cursor.viewState.position;\n        const viewModelMaxColumn = viewModel.getLineMaxColumn(viewStatePosition.lineNumber);\n        const isEndOfViewLine = viewStatePosition.column === viewModelMaxColumn;\n        const modelStatePosition = cursor.modelState.position;\n        const modelMaxColumn = viewModel.model.getLineMaxColumn(modelStatePosition.lineNumber);\n        const isEndLineOfWrappedLine = viewModelMaxColumn - viewStatePosition.column === modelMaxColumn - modelStatePosition.column;\n        if (isEndOfViewLine || isEndLineOfWrappedLine) {\n            return this._moveToLineEndByModel(viewModel, cursor, inSelectionMode, sticky);\n        }\n        else {\n            return this._moveToLineEndByView(viewModel, cursor, inSelectionMode, sticky);\n        }\n    }\n    static _moveToLineEndByView(viewModel, cursor, inSelectionMode, sticky) {\n        return CursorState.fromViewState(MoveOperations.moveToEndOfLine(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode, sticky));\n    }\n    static _moveToLineEndByModel(viewModel, cursor, inSelectionMode, sticky) {\n        return CursorState.fromModelState(MoveOperations.moveToEndOfLine(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode, sticky));\n    }\n    static expandLineSelection(viewModel, cursors) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            const startLineNumber = cursor.modelState.selection.startLineNumber;\n            const lineCount = viewModel.model.getLineCount();\n            let endLineNumber = cursor.modelState.selection.endLineNumber;\n            let endColumn;\n            if (endLineNumber === lineCount) {\n                endColumn = viewModel.model.getLineMaxColumn(lineCount);\n            }\n            else {\n                endLineNumber++;\n                endColumn = 1;\n            }\n            result[i] = CursorState.fromModelState(new SingleCursorState(new Range(startLineNumber, 1, startLineNumber, 1), 0, new Position(endLineNumber, endColumn), 0));\n        }\n        return result;\n    }\n    static moveToBeginningOfBuffer(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[i] = CursorState.fromModelState(MoveOperations.moveToBeginningOfBuffer(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode));\n        }\n        return result;\n    }\n    static moveToEndOfBuffer(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[i] = CursorState.fromModelState(MoveOperations.moveToEndOfBuffer(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode));\n        }\n        return result;\n    }\n    static selectAll(viewModel, cursor) {\n        const lineCount = viewModel.model.getLineCount();\n        const maxColumn = viewModel.model.getLineMaxColumn(lineCount);\n        return CursorState.fromModelState(new SingleCursorState(new Range(1, 1, 1, 1), 0, new Position(lineCount, maxColumn), 0));\n    }\n    static line(viewModel, cursor, inSelectionMode, _position, _viewPosition) {\n        const position = viewModel.model.validatePosition(_position);\n        const viewPosition = (_viewPosition\n            ? viewModel.coordinatesConverter.validateViewPosition(new Position(_viewPosition.lineNumber, _viewPosition.column), position)\n            : viewModel.coordinatesConverter.convertModelPositionToViewPosition(position));\n        if (!inSelectionMode || !cursor.modelState.hasSelection()) {\n            // Entering line selection for the first time\n            const lineCount = viewModel.model.getLineCount();\n            let selectToLineNumber = position.lineNumber + 1;\n            let selectToColumn = 1;\n            if (selectToLineNumber > lineCount) {\n                selectToLineNumber = lineCount;\n                selectToColumn = viewModel.model.getLineMaxColumn(selectToLineNumber);\n            }\n            return CursorState.fromModelState(new SingleCursorState(new Range(position.lineNumber, 1, selectToLineNumber, selectToColumn), 0, new Position(selectToLineNumber, selectToColumn), 0));\n        }\n        // Continuing line selection\n        const enteringLineNumber = cursor.modelState.selectionStart.getStartPosition().lineNumber;\n        if (position.lineNumber < enteringLineNumber) {\n            return CursorState.fromViewState(cursor.viewState.move(cursor.modelState.hasSelection(), viewPosition.lineNumber, 1, 0));\n        }\n        else if (position.lineNumber > enteringLineNumber) {\n            const lineCount = viewModel.getLineCount();\n            let selectToViewLineNumber = viewPosition.lineNumber + 1;\n            let selectToViewColumn = 1;\n            if (selectToViewLineNumber > lineCount) {\n                selectToViewLineNumber = lineCount;\n                selectToViewColumn = viewModel.getLineMaxColumn(selectToViewLineNumber);\n            }\n            return CursorState.fromViewState(cursor.viewState.move(cursor.modelState.hasSelection(), selectToViewLineNumber, selectToViewColumn, 0));\n        }\n        else {\n            const endPositionOfSelectionStart = cursor.modelState.selectionStart.getEndPosition();\n            return CursorState.fromModelState(cursor.modelState.move(cursor.modelState.hasSelection(), endPositionOfSelectionStart.lineNumber, endPositionOfSelectionStart.column, 0));\n        }\n    }\n    static word(viewModel, cursor, inSelectionMode, _position) {\n        const position = viewModel.model.validatePosition(_position);\n        return CursorState.fromModelState(WordOperations.word(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode, position));\n    }\n    static cancelSelection(viewModel, cursor) {\n        if (!cursor.modelState.hasSelection()) {\n            return new CursorState(cursor.modelState, cursor.viewState);\n        }\n        const lineNumber = cursor.viewState.position.lineNumber;\n        const column = cursor.viewState.position.column;\n        return CursorState.fromViewState(new SingleCursorState(new Range(lineNumber, column, lineNumber, column), 0, new Position(lineNumber, column), 0));\n    }\n    static moveTo(viewModel, cursor, inSelectionMode, _position, _viewPosition) {\n        const position = viewModel.model.validatePosition(_position);\n        const viewPosition = (_viewPosition\n            ? viewModel.coordinatesConverter.validateViewPosition(new Position(_viewPosition.lineNumber, _viewPosition.column), position)\n            : viewModel.coordinatesConverter.convertModelPositionToViewPosition(position));\n        return CursorState.fromViewState(cursor.viewState.move(inSelectionMode, viewPosition.lineNumber, viewPosition.column, 0));\n    }\n    static simpleMove(viewModel, cursors, direction, inSelectionMode, value, unit) {\n        switch (direction) {\n            case 0 /* CursorMove.Direction.Left */: {\n                if (unit === 4 /* CursorMove.Unit.HalfLine */) {\n                    // Move left by half the current line length\n                    return this._moveHalfLineLeft(viewModel, cursors, inSelectionMode);\n                }\n                else {\n                    // Move left by `moveParams.value` columns\n                    return this._moveLeft(viewModel, cursors, inSelectionMode, value);\n                }\n            }\n            case 1 /* CursorMove.Direction.Right */: {\n                if (unit === 4 /* CursorMove.Unit.HalfLine */) {\n                    // Move right by half the current line length\n                    return this._moveHalfLineRight(viewModel, cursors, inSelectionMode);\n                }\n                else {\n                    // Move right by `moveParams.value` columns\n                    return this._moveRight(viewModel, cursors, inSelectionMode, value);\n                }\n            }\n            case 2 /* CursorMove.Direction.Up */: {\n                if (unit === 2 /* CursorMove.Unit.WrappedLine */) {\n                    // Move up by view lines\n                    return this._moveUpByViewLines(viewModel, cursors, inSelectionMode, value);\n                }\n                else {\n                    // Move up by model lines\n                    return this._moveUpByModelLines(viewModel, cursors, inSelectionMode, value);\n                }\n            }\n            case 3 /* CursorMove.Direction.Down */: {\n                if (unit === 2 /* CursorMove.Unit.WrappedLine */) {\n                    // Move down by view lines\n                    return this._moveDownByViewLines(viewModel, cursors, inSelectionMode, value);\n                }\n                else {\n                    // Move down by model lines\n                    return this._moveDownByModelLines(viewModel, cursors, inSelectionMode, value);\n                }\n            }\n            case 4 /* CursorMove.Direction.PrevBlankLine */: {\n                if (unit === 2 /* CursorMove.Unit.WrappedLine */) {\n                    return cursors.map(cursor => CursorState.fromViewState(MoveOperations.moveToPrevBlankLine(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode)));\n                }\n                else {\n                    return cursors.map(cursor => CursorState.fromModelState(MoveOperations.moveToPrevBlankLine(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode)));\n                }\n            }\n            case 5 /* CursorMove.Direction.NextBlankLine */: {\n                if (unit === 2 /* CursorMove.Unit.WrappedLine */) {\n                    return cursors.map(cursor => CursorState.fromViewState(MoveOperations.moveToNextBlankLine(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode)));\n                }\n                else {\n                    return cursors.map(cursor => CursorState.fromModelState(MoveOperations.moveToNextBlankLine(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode)));\n                }\n            }\n            case 6 /* CursorMove.Direction.WrappedLineStart */: {\n                // Move to the beginning of the current view line\n                return this._moveToViewMinColumn(viewModel, cursors, inSelectionMode);\n            }\n            case 7 /* CursorMove.Direction.WrappedLineFirstNonWhitespaceCharacter */: {\n                // Move to the first non-whitespace column of the current view line\n                return this._moveToViewFirstNonWhitespaceColumn(viewModel, cursors, inSelectionMode);\n            }\n            case 8 /* CursorMove.Direction.WrappedLineColumnCenter */: {\n                // Move to the \"center\" of the current view line\n                return this._moveToViewCenterColumn(viewModel, cursors, inSelectionMode);\n            }\n            case 9 /* CursorMove.Direction.WrappedLineEnd */: {\n                // Move to the end of the current view line\n                return this._moveToViewMaxColumn(viewModel, cursors, inSelectionMode);\n            }\n            case 10 /* CursorMove.Direction.WrappedLineLastNonWhitespaceCharacter */: {\n                // Move to the last non-whitespace column of the current view line\n                return this._moveToViewLastNonWhitespaceColumn(viewModel, cursors, inSelectionMode);\n            }\n            default:\n                return null;\n        }\n    }\n    static viewportMove(viewModel, cursors, direction, inSelectionMode, value) {\n        const visibleViewRange = viewModel.getCompletelyVisibleViewRange();\n        const visibleModelRange = viewModel.coordinatesConverter.convertViewRangeToModelRange(visibleViewRange);\n        switch (direction) {\n            case 11 /* CursorMove.Direction.ViewPortTop */: {\n                // Move to the nth line start in the viewport (from the top)\n                const modelLineNumber = this._firstLineNumberInRange(viewModel.model, visibleModelRange, value);\n                const modelColumn = viewModel.model.getLineFirstNonWhitespaceColumn(modelLineNumber);\n                return [this._moveToModelPosition(viewModel, cursors[0], inSelectionMode, modelLineNumber, modelColumn)];\n            }\n            case 13 /* CursorMove.Direction.ViewPortBottom */: {\n                // Move to the nth line start in the viewport (from the bottom)\n                const modelLineNumber = this._lastLineNumberInRange(viewModel.model, visibleModelRange, value);\n                const modelColumn = viewModel.model.getLineFirstNonWhitespaceColumn(modelLineNumber);\n                return [this._moveToModelPosition(viewModel, cursors[0], inSelectionMode, modelLineNumber, modelColumn)];\n            }\n            case 12 /* CursorMove.Direction.ViewPortCenter */: {\n                // Move to the line start in the viewport center\n                const modelLineNumber = Math.round((visibleModelRange.startLineNumber + visibleModelRange.endLineNumber) / 2);\n                const modelColumn = viewModel.model.getLineFirstNonWhitespaceColumn(modelLineNumber);\n                return [this._moveToModelPosition(viewModel, cursors[0], inSelectionMode, modelLineNumber, modelColumn)];\n            }\n            case 14 /* CursorMove.Direction.ViewPortIfOutside */: {\n                // Move to a position inside the viewport\n                const result = [];\n                for (let i = 0, len = cursors.length; i < len; i++) {\n                    const cursor = cursors[i];\n                    result[i] = this.findPositionInViewportIfOutside(viewModel, cursor, visibleViewRange, inSelectionMode);\n                }\n                return result;\n            }\n            default:\n                return null;\n        }\n    }\n    static findPositionInViewportIfOutside(viewModel, cursor, visibleViewRange, inSelectionMode) {\n        const viewLineNumber = cursor.viewState.position.lineNumber;\n        if (visibleViewRange.startLineNumber <= viewLineNumber && viewLineNumber <= visibleViewRange.endLineNumber - 1) {\n            // Nothing to do, cursor is in viewport\n            return new CursorState(cursor.modelState, cursor.viewState);\n        }\n        else {\n            let newViewLineNumber;\n            if (viewLineNumber > visibleViewRange.endLineNumber - 1) {\n                newViewLineNumber = visibleViewRange.endLineNumber - 1;\n            }\n            else if (viewLineNumber < visibleViewRange.startLineNumber) {\n                newViewLineNumber = visibleViewRange.startLineNumber;\n            }\n            else {\n                newViewLineNumber = viewLineNumber;\n            }\n            const position = MoveOperations.vertical(viewModel.cursorConfig, viewModel, viewLineNumber, cursor.viewState.position.column, cursor.viewState.leftoverVisibleColumns, newViewLineNumber, false);\n            return CursorState.fromViewState(cursor.viewState.move(inSelectionMode, position.lineNumber, position.column, position.leftoverVisibleColumns));\n        }\n    }\n    /**\n     * Find the nth line start included in the range (from the start).\n     */\n    static _firstLineNumberInRange(model, range, count) {\n        let startLineNumber = range.startLineNumber;\n        if (range.startColumn !== model.getLineMinColumn(startLineNumber)) {\n            // Move on to the second line if the first line start is not included in the range\n            startLineNumber++;\n        }\n        return Math.min(range.endLineNumber, startLineNumber + count - 1);\n    }\n    /**\n     * Find the nth line start included in the range (from the end).\n     */\n    static _lastLineNumberInRange(model, range, count) {\n        let startLineNumber = range.startLineNumber;\n        if (range.startColumn !== model.getLineMinColumn(startLineNumber)) {\n            // Move on to the second line if the first line start is not included in the range\n            startLineNumber++;\n        }\n        return Math.max(startLineNumber, range.endLineNumber - count + 1);\n    }\n    static _moveLeft(viewModel, cursors, inSelectionMode, noOfColumns) {\n        return cursors.map(cursor => CursorState.fromViewState(MoveOperations.moveLeft(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode, noOfColumns)));\n    }\n    static _moveHalfLineLeft(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            const viewLineNumber = cursor.viewState.position.lineNumber;\n            const halfLine = Math.round(viewModel.getLineContent(viewLineNumber).length / 2);\n            result[i] = CursorState.fromViewState(MoveOperations.moveLeft(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode, halfLine));\n        }\n        return result;\n    }\n    static _moveRight(viewModel, cursors, inSelectionMode, noOfColumns) {\n        return cursors.map(cursor => CursorState.fromViewState(MoveOperations.moveRight(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode, noOfColumns)));\n    }\n    static _moveHalfLineRight(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            const viewLineNumber = cursor.viewState.position.lineNumber;\n            const halfLine = Math.round(viewModel.getLineContent(viewLineNumber).length / 2);\n            result[i] = CursorState.fromViewState(MoveOperations.moveRight(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode, halfLine));\n        }\n        return result;\n    }\n    static _moveDownByViewLines(viewModel, cursors, inSelectionMode, linesCount) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[i] = CursorState.fromViewState(MoveOperations.moveDown(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode, linesCount));\n        }\n        return result;\n    }\n    static _moveDownByModelLines(viewModel, cursors, inSelectionMode, linesCount) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[i] = CursorState.fromModelState(MoveOperations.moveDown(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode, linesCount));\n        }\n        return result;\n    }\n    static _moveUpByViewLines(viewModel, cursors, inSelectionMode, linesCount) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[i] = CursorState.fromViewState(MoveOperations.moveUp(viewModel.cursorConfig, viewModel, cursor.viewState, inSelectionMode, linesCount));\n        }\n        return result;\n    }\n    static _moveUpByModelLines(viewModel, cursors, inSelectionMode, linesCount) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            result[i] = CursorState.fromModelState(MoveOperations.moveUp(viewModel.cursorConfig, viewModel.model, cursor.modelState, inSelectionMode, linesCount));\n        }\n        return result;\n    }\n    static _moveToViewPosition(viewModel, cursor, inSelectionMode, toViewLineNumber, toViewColumn) {\n        return CursorState.fromViewState(cursor.viewState.move(inSelectionMode, toViewLineNumber, toViewColumn, 0));\n    }\n    static _moveToModelPosition(viewModel, cursor, inSelectionMode, toModelLineNumber, toModelColumn) {\n        return CursorState.fromModelState(cursor.modelState.move(inSelectionMode, toModelLineNumber, toModelColumn, 0));\n    }\n    static _moveToViewMinColumn(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            const viewLineNumber = cursor.viewState.position.lineNumber;\n            const viewColumn = viewModel.getLineMinColumn(viewLineNumber);\n            result[i] = this._moveToViewPosition(viewModel, cursor, inSelectionMode, viewLineNumber, viewColumn);\n        }\n        return result;\n    }\n    static _moveToViewFirstNonWhitespaceColumn(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            const viewLineNumber = cursor.viewState.position.lineNumber;\n            const viewColumn = viewModel.getLineFirstNonWhitespaceColumn(viewLineNumber);\n            result[i] = this._moveToViewPosition(viewModel, cursor, inSelectionMode, viewLineNumber, viewColumn);\n        }\n        return result;\n    }\n    static _moveToViewCenterColumn(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            const viewLineNumber = cursor.viewState.position.lineNumber;\n            const viewColumn = Math.round((viewModel.getLineMaxColumn(viewLineNumber) + viewModel.getLineMinColumn(viewLineNumber)) / 2);\n            result[i] = this._moveToViewPosition(viewModel, cursor, inSelectionMode, viewLineNumber, viewColumn);\n        }\n        return result;\n    }\n    static _moveToViewMaxColumn(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            const viewLineNumber = cursor.viewState.position.lineNumber;\n            const viewColumn = viewModel.getLineMaxColumn(viewLineNumber);\n            result[i] = this._moveToViewPosition(viewModel, cursor, inSelectionMode, viewLineNumber, viewColumn);\n        }\n        return result;\n    }\n    static _moveToViewLastNonWhitespaceColumn(viewModel, cursors, inSelectionMode) {\n        const result = [];\n        for (let i = 0, len = cursors.length; i < len; i++) {\n            const cursor = cursors[i];\n            const viewLineNumber = cursor.viewState.position.lineNumber;\n            const viewColumn = viewModel.getLineLastNonWhitespaceColumn(viewLineNumber);\n            result[i] = this._moveToViewPosition(viewModel, cursor, inSelectionMode, viewLineNumber, viewColumn);\n        }\n        return result;\n    }\n}\nexport var CursorMove;\n(function (CursorMove) {\n    const isCursorMoveArgs = function (arg) {\n        if (!types.isObject(arg)) {\n            return false;\n        }\n        const cursorMoveArg = arg;\n        if (!types.isString(cursorMoveArg.to)) {\n            return false;\n        }\n        if (!types.isUndefined(cursorMoveArg.select) && !types.isBoolean(cursorMoveArg.select)) {\n            return false;\n        }\n        if (!types.isUndefined(cursorMoveArg.by) && !types.isString(cursorMoveArg.by)) {\n            return false;\n        }\n        if (!types.isUndefined(cursorMoveArg.value) && !types.isNumber(cursorMoveArg.value)) {\n            return false;\n        }\n        return true;\n    };\n    CursorMove.description = {\n        description: 'Move cursor to a logical position in the view',\n        args: [\n            {\n                name: 'Cursor move argument object',\n                description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t`,\n                constraint: isCursorMoveArgs,\n                schema: {\n                    'type': 'object',\n                    'required': ['to'],\n                    'properties': {\n                        'to': {\n                            'type': 'string',\n                            'enum': ['left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine', 'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter', 'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter', 'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside']\n                        },\n                        'by': {\n                            'type': 'string',\n                            'enum': ['line', 'wrappedLine', 'character', 'halfLine']\n                        },\n                        'value': {\n                            'type': 'number',\n                            'default': 1\n                        },\n                        'select': {\n                            'type': 'boolean',\n                            'default': false\n                        }\n                    }\n                }\n            }\n        ]\n    };\n    /**\n     * Positions in the view for cursor move command.\n     */\n    CursorMove.RawDirection = {\n        Left: 'left',\n        Right: 'right',\n        Up: 'up',\n        Down: 'down',\n        PrevBlankLine: 'prevBlankLine',\n        NextBlankLine: 'nextBlankLine',\n        WrappedLineStart: 'wrappedLineStart',\n        WrappedLineFirstNonWhitespaceCharacter: 'wrappedLineFirstNonWhitespaceCharacter',\n        WrappedLineColumnCenter: 'wrappedLineColumnCenter',\n        WrappedLineEnd: 'wrappedLineEnd',\n        WrappedLineLastNonWhitespaceCharacter: 'wrappedLineLastNonWhitespaceCharacter',\n        ViewPortTop: 'viewPortTop',\n        ViewPortCenter: 'viewPortCenter',\n        ViewPortBottom: 'viewPortBottom',\n        ViewPortIfOutside: 'viewPortIfOutside'\n    };\n    /**\n     * Units for Cursor move 'by' argument\n     */\n    CursorMove.RawUnit = {\n        Line: 'line',\n        WrappedLine: 'wrappedLine',\n        Character: 'character',\n        HalfLine: 'halfLine'\n    };\n    function parse(args) {\n        if (!args.to) {\n            // illegal arguments\n            return null;\n        }\n        let direction;\n        switch (args.to) {\n            case CursorMove.RawDirection.Left:\n                direction = 0 /* Direction.Left */;\n                break;\n            case CursorMove.RawDirection.Right:\n                direction = 1 /* Direction.Right */;\n                break;\n            case CursorMove.RawDirection.Up:\n                direction = 2 /* Direction.Up */;\n                break;\n            case CursorMove.RawDirection.Down:\n                direction = 3 /* Direction.Down */;\n                break;\n            case CursorMove.RawDirection.PrevBlankLine:\n                direction = 4 /* Direction.PrevBlankLine */;\n                break;\n            case CursorMove.RawDirection.NextBlankLine:\n                direction = 5 /* Direction.NextBlankLine */;\n                break;\n            case CursorMove.RawDirection.WrappedLineStart:\n                direction = 6 /* Direction.WrappedLineStart */;\n                break;\n            case CursorMove.RawDirection.WrappedLineFirstNonWhitespaceCharacter:\n                direction = 7 /* Direction.WrappedLineFirstNonWhitespaceCharacter */;\n                break;\n            case CursorMove.RawDirection.WrappedLineColumnCenter:\n                direction = 8 /* Direction.WrappedLineColumnCenter */;\n                break;\n            case CursorMove.RawDirection.WrappedLineEnd:\n                direction = 9 /* Direction.WrappedLineEnd */;\n                break;\n            case CursorMove.RawDirection.WrappedLineLastNonWhitespaceCharacter:\n                direction = 10 /* Direction.WrappedLineLastNonWhitespaceCharacter */;\n                break;\n            case CursorMove.RawDirection.ViewPortTop:\n                direction = 11 /* Direction.ViewPortTop */;\n                break;\n            case CursorMove.RawDirection.ViewPortBottom:\n                direction = 13 /* Direction.ViewPortBottom */;\n                break;\n            case CursorMove.RawDirection.ViewPortCenter:\n                direction = 12 /* Direction.ViewPortCenter */;\n                break;\n            case CursorMove.RawDirection.ViewPortIfOutside:\n                direction = 14 /* Direction.ViewPortIfOutside */;\n                break;\n            default:\n                // illegal arguments\n                return null;\n        }\n        let unit = 0 /* Unit.None */;\n        switch (args.by) {\n            case CursorMove.RawUnit.Line:\n                unit = 1 /* Unit.Line */;\n                break;\n            case CursorMove.RawUnit.WrappedLine:\n                unit = 2 /* Unit.WrappedLine */;\n                break;\n            case CursorMove.RawUnit.Character:\n                unit = 3 /* Unit.Character */;\n                break;\n            case CursorMove.RawUnit.HalfLine:\n                unit = 4 /* Unit.HalfLine */;\n                break;\n        }\n        return {\n            direction: direction,\n            unit: unit,\n            select: (!!args.select),\n            value: (args.value || 1)\n        };\n    }\n    CursorMove.parse = parse;\n})(CursorMove || (CursorMove = {}));\n"],"mappings":"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"}]}