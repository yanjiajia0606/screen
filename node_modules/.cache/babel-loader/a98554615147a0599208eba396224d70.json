{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInputList.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInputList.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3QudG8tc3RyaW5nLXRhZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRhbGljcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KdmFyIF9fZGVjb3JhdGUgPSB0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHsKICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsCiAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywKICAgIGQ7CiAgaWYgKCh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoUmVmbGVjdCkpID09PSAib2JqZWN0IiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gImZ1bmN0aW9uIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO2Vsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7CiAgfQogIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7Cn07CnZhciBfX2F3YWl0ZXIgPSB0aGlzICYmIHRoaXMuX19hd2FpdGVyIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHsKICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICB9KTsKICB9CiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJlamVjdChlKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsKICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7CiAgICB9CiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgfSk7Cn07CmltcG9ydCAqIGFzIGRvbSBmcm9tICcuLi8uLi8uLi9icm93c2VyL2RvbS5qcyc7CmltcG9ydCB7IFN0YW5kYXJkS2V5Ym9hcmRFdmVudCB9IGZyb20gJy4uLy4uLy4uL2Jyb3dzZXIva2V5Ym9hcmRFdmVudC5qcyc7CmltcG9ydCB7IEFjdGlvbkJhciB9IGZyb20gJy4uLy4uLy4uL2Jyb3dzZXIvdWkvYWN0aW9uYmFyL2FjdGlvbmJhci5qcyc7CmltcG9ydCB7IEljb25MYWJlbCB9IGZyb20gJy4uLy4uLy4uL2Jyb3dzZXIvdWkvaWNvbkxhYmVsL2ljb25MYWJlbC5qcyc7CmltcG9ydCB7IEtleWJpbmRpbmdMYWJlbCB9IGZyb20gJy4uLy4uLy4uL2Jyb3dzZXIvdWkva2V5YmluZGluZ0xhYmVsL2tleWJpbmRpbmdMYWJlbC5qcyc7CmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9hY3Rpb25zLmpzJzsKaW1wb3J0IHsgcmFuZ2UgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vYXJyYXlzLmpzJzsKaW1wb3J0IHsgZ2V0Q29kaWNvbkFyaWFMYWJlbCB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9jb2RpY29ucy5qcyc7CmltcG9ydCB7IGNvbXBhcmVBbnl0aGluZyB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9jb21wYXJlcnMuanMnOwppbXBvcnQgeyBtZW1vaXplIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2RlY29yYXRvcnMuanMnOwppbXBvcnQgeyBFbWl0dGVyLCBFdmVudCB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9ldmVudC5qcyc7CmltcG9ydCB7IG1hdGNoZXNGdXp6eUljb25Bd2FyZSwgcGFyc2VMYWJlbFdpdGhJY29ucyB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9pY29uTGFiZWxzLmpzJzsKaW1wb3J0IHsgZGlzcG9zZSBhcyBfZGlzcG9zZSB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9saWZlY3ljbGUuanMnOwppbXBvcnQgKiBhcyBwbGF0Zm9ybSBmcm9tICcuLi8uLi8uLi9jb21tb24vcGxhdGZvcm0uanMnOwppbXBvcnQgeyBsdHJpbSB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9zdHJpbmdzLmpzJzsKaW1wb3J0IHsgd2l0aE51bGxBc1VuZGVmaW5lZCB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi90eXBlcy5qcyc7CmltcG9ydCB7IGdldEljb25DbGFzcyB9IGZyb20gJy4vcXVpY2tJbnB1dFV0aWxzLmpzJzsKaW1wb3J0ICcuL21lZGlhL3F1aWNrSW5wdXQuY3NzJzsKaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tICcuLi8uLi8uLi8uLi9ubHMuanMnOwp2YXIgJCA9IGRvbS4kOwp2YXIgTGlzdEVsZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIExpc3RFbGVtZW50KGluaXQpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMaXN0RWxlbWVudCk7CiAgICB0aGlzLmhpZGRlbiA9IGZhbHNlOwogICAgdGhpcy5fb25DaGVja2VkID0gbmV3IEVtaXR0ZXIoKTsKICAgIHRoaXMub25DaGVja2VkID0gdGhpcy5fb25DaGVja2VkLmV2ZW50OwogICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbml0KTsKICB9CiAgX2NyZWF0ZUNsYXNzKExpc3RFbGVtZW50LCBbewogICAga2V5OiAiY2hlY2tlZCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5fY2hlY2tlZDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT09IHRoaXMuX2NoZWNrZWQpIHsKICAgICAgICB0aGlzLl9jaGVja2VkID0gdmFsdWU7CiAgICAgICAgdGhpcy5fb25DaGVja2VkLmZpcmUodmFsdWUpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdGhpcy5fb25DaGVja2VkLmRpc3Bvc2UoKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIExpc3RFbGVtZW50Owp9KCk7CnZhciBMaXN0RWxlbWVudFJlbmRlcmVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBMaXN0RWxlbWVudFJlbmRlcmVyKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExpc3RFbGVtZW50UmVuZGVyZXIpOwogIH0KICBfY3JlYXRlQ2xhc3MoTGlzdEVsZW1lbnRSZW5kZXJlciwgW3sKICAgIGtleTogInRlbXBsYXRlSWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBMaXN0RWxlbWVudFJlbmRlcmVyLklEOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlclRlbXBsYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJUZW1wbGF0ZShjb250YWluZXIpIHsKICAgICAgdmFyIGRhdGEgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICBkYXRhLnRvRGlzcG9zZUVsZW1lbnQgPSBbXTsKICAgICAgZGF0YS50b0Rpc3Bvc2VUZW1wbGF0ZSA9IFtdOwogICAgICBkYXRhLmVudHJ5ID0gZG9tLmFwcGVuZChjb250YWluZXIsICQoJy5xdWljay1pbnB1dC1saXN0LWVudHJ5JykpOwogICAgICAvLyBDaGVja2JveAogICAgICB2YXIgbGFiZWwgPSBkb20uYXBwZW5kKGRhdGEuZW50cnksICQoJ2xhYmVsLnF1aWNrLWlucHV0LWxpc3QtbGFiZWwnKSk7CiAgICAgIGRhdGEudG9EaXNwb3NlVGVtcGxhdGUucHVzaChkb20uYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXIobGFiZWwsIGRvbS5FdmVudFR5cGUuQ0xJQ0ssIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKCFkYXRhLmNoZWNrYm94Lm9mZnNldFBhcmVudCkgewogICAgICAgICAgLy8gSWYgY2hlY2tib3ggbm90IHZpc2libGU6CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgdG9nZ2xlIG9mIGNoZWNrYm94IHdoZW4gaXQgaXMgaW1tZWRpYXRlbHkgc2hvd24gYWZ0ZXJ3YXJkcy4gIzkxNzQwCiAgICAgICAgfQogICAgICB9KSk7CgogICAgICBkYXRhLmNoZWNrYm94ID0gZG9tLmFwcGVuZChsYWJlbCwgJCgnaW5wdXQucXVpY2staW5wdXQtbGlzdC1jaGVja2JveCcpKTsKICAgICAgZGF0YS5jaGVja2JveC50eXBlID0gJ2NoZWNrYm94JzsKICAgICAgZGF0YS50b0Rpc3Bvc2VUZW1wbGF0ZS5wdXNoKGRvbS5hZGRTdGFuZGFyZERpc3Bvc2FibGVMaXN0ZW5lcihkYXRhLmNoZWNrYm94LCBkb20uRXZlbnRUeXBlLkNIQU5HRSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBkYXRhLmVsZW1lbnQuY2hlY2tlZCA9IGRhdGEuY2hlY2tib3guY2hlY2tlZDsKICAgICAgfSkpOwogICAgICAvLyBSb3dzCiAgICAgIHZhciByb3dzID0gZG9tLmFwcGVuZChsYWJlbCwgJCgnLnF1aWNrLWlucHV0LWxpc3Qtcm93cycpKTsKICAgICAgdmFyIHJvdzEgPSBkb20uYXBwZW5kKHJvd3MsICQoJy5xdWljay1pbnB1dC1saXN0LXJvdycpKTsKICAgICAgdmFyIHJvdzIgPSBkb20uYXBwZW5kKHJvd3MsICQoJy5xdWljay1pbnB1dC1saXN0LXJvdycpKTsKICAgICAgLy8gTGFiZWwKICAgICAgZGF0YS5sYWJlbCA9IG5ldyBJY29uTGFiZWwocm93MSwgewogICAgICAgIHN1cHBvcnRIaWdobGlnaHRzOiB0cnVlLAogICAgICAgIHN1cHBvcnREZXNjcmlwdGlvbkhpZ2hsaWdodHM6IHRydWUsCiAgICAgICAgc3VwcG9ydEljb25zOiB0cnVlCiAgICAgIH0pOwogICAgICAvLyBLZXliaW5kaW5nCiAgICAgIHZhciBrZXliaW5kaW5nQ29udGFpbmVyID0gZG9tLmFwcGVuZChyb3cxLCAkKCcucXVpY2staW5wdXQtbGlzdC1lbnRyeS1rZXliaW5kaW5nJykpOwogICAgICBkYXRhLmtleWJpbmRpbmcgPSBuZXcgS2V5YmluZGluZ0xhYmVsKGtleWJpbmRpbmdDb250YWluZXIsIHBsYXRmb3JtLk9TKTsKICAgICAgLy8gRGV0YWlsCiAgICAgIHZhciBkZXRhaWxDb250YWluZXIgPSBkb20uYXBwZW5kKHJvdzIsICQoJy5xdWljay1pbnB1dC1saXN0LWxhYmVsLW1ldGEnKSk7CiAgICAgIGRhdGEuZGV0YWlsID0gbmV3IEljb25MYWJlbChkZXRhaWxDb250YWluZXIsIHsKICAgICAgICBzdXBwb3J0SGlnaGxpZ2h0czogdHJ1ZSwKICAgICAgICBzdXBwb3J0SWNvbnM6IHRydWUKICAgICAgfSk7CiAgICAgIC8vIFNlcGFyYXRvcgogICAgICBkYXRhLnNlcGFyYXRvciA9IGRvbS5hcHBlbmQoZGF0YS5lbnRyeSwgJCgnLnF1aWNrLWlucHV0LWxpc3Qtc2VwYXJhdG9yJykpOwogICAgICAvLyBBY3Rpb25zCiAgICAgIGRhdGEuYWN0aW9uQmFyID0gbmV3IEFjdGlvbkJhcihkYXRhLmVudHJ5KTsKICAgICAgZGF0YS5hY3Rpb25CYXIuZG9tTm9kZS5jbGFzc0xpc3QuYWRkKCdxdWljay1pbnB1dC1saXN0LWVudHJ5LWFjdGlvbi1iYXInKTsKICAgICAgZGF0YS50b0Rpc3Bvc2VUZW1wbGF0ZS5wdXNoKGRhdGEuYWN0aW9uQmFyKTsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyRWxlbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRWxlbWVudChlbGVtZW50LCBpbmRleCwgZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBkYXRhLnRvRGlzcG9zZUVsZW1lbnQgPSBfZGlzcG9zZShkYXRhLnRvRGlzcG9zZUVsZW1lbnQpOwogICAgICBkYXRhLmVsZW1lbnQgPSBlbGVtZW50OwogICAgICBkYXRhLmNoZWNrYm94LmNoZWNrZWQgPSBlbGVtZW50LmNoZWNrZWQ7CiAgICAgIGRhdGEudG9EaXNwb3NlRWxlbWVudC5wdXNoKGVsZW1lbnQub25DaGVja2VkKGZ1bmN0aW9uIChjaGVja2VkKSB7CiAgICAgICAgcmV0dXJuIGRhdGEuY2hlY2tib3guY2hlY2tlZCA9IGNoZWNrZWQ7CiAgICAgIH0pKTsKICAgICAgdmFyIGxhYmVsSGlnaGxpZ2h0cyA9IGVsZW1lbnQubGFiZWxIaWdobGlnaHRzLAogICAgICAgIGRlc2NyaXB0aW9uSGlnaGxpZ2h0cyA9IGVsZW1lbnQuZGVzY3JpcHRpb25IaWdobGlnaHRzLAogICAgICAgIGRldGFpbEhpZ2hsaWdodHMgPSBlbGVtZW50LmRldGFpbEhpZ2hsaWdodHM7CiAgICAgIC8vIExhYmVsCiAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgb3B0aW9ucy5tYXRjaGVzID0gbGFiZWxIaWdobGlnaHRzIHx8IFtdOwogICAgICBvcHRpb25zLmRlc2NyaXB0aW9uVGl0bGUgPSBlbGVtZW50LnNhbmVEZXNjcmlwdGlvbjsKICAgICAgb3B0aW9ucy5kZXNjcmlwdGlvbk1hdGNoZXMgPSBkZXNjcmlwdGlvbkhpZ2hsaWdodHMgfHwgW107CiAgICAgIG9wdGlvbnMuZXh0cmFDbGFzc2VzID0gZWxlbWVudC5pdGVtLmljb25DbGFzc2VzOwogICAgICBvcHRpb25zLml0YWxpYyA9IGVsZW1lbnQuaXRlbS5pdGFsaWM7CiAgICAgIG9wdGlvbnMuc3RyaWtldGhyb3VnaCA9IGVsZW1lbnQuaXRlbS5zdHJpa2V0aHJvdWdoOwogICAgICBkYXRhLmxhYmVsLnNldExhYmVsKGVsZW1lbnQuc2FuZUxhYmVsLCBlbGVtZW50LnNhbmVEZXNjcmlwdGlvbiwgb3B0aW9ucyk7CiAgICAgIC8vIEtleWJpbmRpbmcKICAgICAgZGF0YS5rZXliaW5kaW5nLnNldChlbGVtZW50Lml0ZW0ua2V5YmluZGluZyk7CiAgICAgIC8vIE1ldGEKICAgICAgaWYgKGVsZW1lbnQuc2FuZURldGFpbCkgewogICAgICAgIGRhdGEuZGV0YWlsLnNldExhYmVsKGVsZW1lbnQuc2FuZURldGFpbCwgdW5kZWZpbmVkLCB7CiAgICAgICAgICBtYXRjaGVzOiBkZXRhaWxIaWdobGlnaHRzLAogICAgICAgICAgdGl0bGU6IGVsZW1lbnQuc2FuZURldGFpbAogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIFNlcGFyYXRvcgogICAgICBpZiAoZWxlbWVudC5zZXBhcmF0b3IgJiYgZWxlbWVudC5zZXBhcmF0b3IubGFiZWwpIHsKICAgICAgICBkYXRhLnNlcGFyYXRvci50ZXh0Q29udGVudCA9IGVsZW1lbnQuc2VwYXJhdG9yLmxhYmVsOwogICAgICAgIGRhdGEuc2VwYXJhdG9yLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhLnNlcGFyYXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICB9CiAgICAgIGRhdGEuZW50cnkuY2xhc3NMaXN0LnRvZ2dsZSgncXVpY2staW5wdXQtbGlzdC1zZXBhcmF0b3ItYm9yZGVyJywgISFlbGVtZW50LnNlcGFyYXRvcik7CiAgICAgIC8vIEFjdGlvbnMKICAgICAgZGF0YS5hY3Rpb25CYXIuY2xlYXIoKTsKICAgICAgdmFyIGJ1dHRvbnMgPSBlbGVtZW50Lml0ZW0uYnV0dG9uczsKICAgICAgaWYgKGJ1dHRvbnMgJiYgYnV0dG9ucy5sZW5ndGgpIHsKICAgICAgICBkYXRhLmFjdGlvbkJhci5wdXNoKGJ1dHRvbnMubWFwKGZ1bmN0aW9uIChidXR0b24sIGluZGV4KSB7CiAgICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IGJ1dHRvbi5pY29uQ2xhc3MgfHwgKGJ1dHRvbi5pY29uUGF0aCA/IGdldEljb25DbGFzcyhidXR0b24uaWNvblBhdGgpIDogdW5kZWZpbmVkKTsKICAgICAgICAgIGlmIChidXR0b24uYWx3YXlzVmlzaWJsZSkgewogICAgICAgICAgICBjc3NDbGFzc2VzID0gY3NzQ2xhc3NlcyA/ICIiLmNvbmNhdChjc3NDbGFzc2VzLCAiIGFsd2F5cy12aXNpYmxlIikgOiAnYWx3YXlzLXZpc2libGUnOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGFjdGlvbiA9IG5ldyBBY3Rpb24oImlkLSIuY29uY2F0KGluZGV4KSwgJycsIGNzc0NsYXNzZXMsIHRydWUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZmlyZUJ1dHRvblRyaWdnZXJlZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbjogYnV0dG9uLAogICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBlbGVtZW50Lml0ZW0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGFjdGlvbi50b29sdGlwID0gYnV0dG9uLnRvb2x0aXAgfHwgJyc7CiAgICAgICAgICByZXR1cm4gYWN0aW9uOwogICAgICAgIH0pLCB7CiAgICAgICAgICBpY29uOiB0cnVlLAogICAgICAgICAgbGFiZWw6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgZGF0YS5lbnRyeS5jbGFzc0xpc3QuYWRkKCdoYXMtYWN0aW9ucycpOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEuZW50cnkuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLWFjdGlvbnMnKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2VFbGVtZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlRWxlbWVudChlbGVtZW50LCBpbmRleCwgZGF0YSkgewogICAgICBkYXRhLnRvRGlzcG9zZUVsZW1lbnQgPSBfZGlzcG9zZShkYXRhLnRvRGlzcG9zZUVsZW1lbnQpOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2VUZW1wbGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZVRlbXBsYXRlKGRhdGEpIHsKICAgICAgZGF0YS50b0Rpc3Bvc2VFbGVtZW50ID0gX2Rpc3Bvc2UoZGF0YS50b0Rpc3Bvc2VFbGVtZW50KTsKICAgICAgZGF0YS50b0Rpc3Bvc2VUZW1wbGF0ZSA9IF9kaXNwb3NlKGRhdGEudG9EaXNwb3NlVGVtcGxhdGUpOwogICAgfQogIH1dKTsKICByZXR1cm4gTGlzdEVsZW1lbnRSZW5kZXJlcjsKfSgpOwpMaXN0RWxlbWVudFJlbmRlcmVyLklEID0gJ2xpc3RlbGVtZW50JzsKdmFyIExpc3RFbGVtZW50RGVsZWdhdGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIExpc3RFbGVtZW50RGVsZWdhdGUoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGlzdEVsZW1lbnREZWxlZ2F0ZSk7CiAgfQogIF9jcmVhdGVDbGFzcyhMaXN0RWxlbWVudERlbGVnYXRlLCBbewogICAga2V5OiAiZ2V0SGVpZ2h0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIZWlnaHQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zYW5lRGV0YWlsID8gNDQgOiAyMjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRUZW1wbGF0ZUlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUZW1wbGF0ZUlkKGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIExpc3RFbGVtZW50UmVuZGVyZXIuSUQ7CiAgICB9CiAgfV0pOwogIHJldHVybiBMaXN0RWxlbWVudERlbGVnYXRlOwp9KCk7CmV4cG9ydCB2YXIgUXVpY2tJbnB1dExpc3RGb2N1czsKKGZ1bmN0aW9uIChRdWlja0lucHV0TGlzdEZvY3VzKSB7CiAgUXVpY2tJbnB1dExpc3RGb2N1c1tRdWlja0lucHV0TGlzdEZvY3VzWyJGaXJzdCJdID0gMV0gPSAiRmlyc3QiOwogIFF1aWNrSW5wdXRMaXN0Rm9jdXNbUXVpY2tJbnB1dExpc3RGb2N1c1siU2Vjb25kIl0gPSAyXSA9ICJTZWNvbmQiOwogIFF1aWNrSW5wdXRMaXN0Rm9jdXNbUXVpY2tJbnB1dExpc3RGb2N1c1siTGFzdCJdID0gM10gPSAiTGFzdCI7CiAgUXVpY2tJbnB1dExpc3RGb2N1c1tRdWlja0lucHV0TGlzdEZvY3VzWyJOZXh0Il0gPSA0XSA9ICJOZXh0IjsKICBRdWlja0lucHV0TGlzdEZvY3VzW1F1aWNrSW5wdXRMaXN0Rm9jdXNbIlByZXZpb3VzIl0gPSA1XSA9ICJQcmV2aW91cyI7CiAgUXVpY2tJbnB1dExpc3RGb2N1c1tRdWlja0lucHV0TGlzdEZvY3VzWyJOZXh0UGFnZSJdID0gNl0gPSAiTmV4dFBhZ2UiOwogIFF1aWNrSW5wdXRMaXN0Rm9jdXNbUXVpY2tJbnB1dExpc3RGb2N1c1siUHJldmlvdXNQYWdlIl0gPSA3XSA9ICJQcmV2aW91c1BhZ2UiOwp9KShRdWlja0lucHV0TGlzdEZvY3VzIHx8IChRdWlja0lucHV0TGlzdEZvY3VzID0ge30pKTsKZXhwb3J0IHZhciBRdWlja0lucHV0TGlzdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUXVpY2tJbnB1dExpc3QocGFyZW50LCBpZCwgb3B0aW9ucykgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUXVpY2tJbnB1dExpc3QpOwogICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7CiAgICB0aGlzLmlucHV0RWxlbWVudHMgPSBbXTsKICAgIHRoaXMuZWxlbWVudHMgPSBbXTsKICAgIHRoaXMuZWxlbWVudHNUb0luZGV4ZXMgPSBuZXcgTWFwKCk7CiAgICB0aGlzLm1hdGNoT25EZXNjcmlwdGlvbiA9IGZhbHNlOwogICAgdGhpcy5tYXRjaE9uRGV0YWlsID0gZmFsc2U7CiAgICB0aGlzLm1hdGNoT25MYWJlbCA9IHRydWU7CiAgICB0aGlzLm1hdGNoT25MYWJlbE1vZGUgPSAnZnV6enknOwogICAgdGhpcy5tYXRjaE9uTWV0YSA9IHRydWU7CiAgICB0aGlzLnNvcnRCeUxhYmVsID0gdHJ1ZTsKICAgIHRoaXMuX29uQ2hhbmdlZEFsbFZpc2libGVDaGVja2VkID0gbmV3IEVtaXR0ZXIoKTsKICAgIHRoaXMub25DaGFuZ2VkQWxsVmlzaWJsZUNoZWNrZWQgPSB0aGlzLl9vbkNoYW5nZWRBbGxWaXNpYmxlQ2hlY2tlZC5ldmVudDsKICAgIHRoaXMuX29uQ2hhbmdlZENoZWNrZWRDb3VudCA9IG5ldyBFbWl0dGVyKCk7CiAgICB0aGlzLm9uQ2hhbmdlZENoZWNrZWRDb3VudCA9IHRoaXMuX29uQ2hhbmdlZENoZWNrZWRDb3VudC5ldmVudDsKICAgIHRoaXMuX29uQ2hhbmdlZFZpc2libGVDb3VudCA9IG5ldyBFbWl0dGVyKCk7CiAgICB0aGlzLm9uQ2hhbmdlZFZpc2libGVDb3VudCA9IHRoaXMuX29uQ2hhbmdlZFZpc2libGVDb3VudC5ldmVudDsKICAgIHRoaXMuX29uQ2hhbmdlZENoZWNrZWRFbGVtZW50cyA9IG5ldyBFbWl0dGVyKCk7CiAgICB0aGlzLm9uQ2hhbmdlZENoZWNrZWRFbGVtZW50cyA9IHRoaXMuX29uQ2hhbmdlZENoZWNrZWRFbGVtZW50cy5ldmVudDsKICAgIHRoaXMuX29uQnV0dG9uVHJpZ2dlcmVkID0gbmV3IEVtaXR0ZXIoKTsKICAgIHRoaXMub25CdXR0b25UcmlnZ2VyZWQgPSB0aGlzLl9vbkJ1dHRvblRyaWdnZXJlZC5ldmVudDsKICAgIHRoaXMuX29uS2V5RG93biA9IG5ldyBFbWl0dGVyKCk7CiAgICB0aGlzLm9uS2V5RG93biA9IHRoaXMuX29uS2V5RG93bi5ldmVudDsKICAgIHRoaXMuX29uTGVhdmUgPSBuZXcgRW1pdHRlcigpOwogICAgdGhpcy5vbkxlYXZlID0gdGhpcy5fb25MZWF2ZS5ldmVudDsKICAgIHRoaXMuX2ZpcmVDaGVja2VkRXZlbnRzID0gdHJ1ZTsKICAgIHRoaXMuZWxlbWVudERpc3Bvc2FibGVzID0gW107CiAgICB0aGlzLmRpc3Bvc2FibGVzID0gW107CiAgICB0aGlzLmlkID0gaWQ7CiAgICB0aGlzLmNvbnRhaW5lciA9IGRvbS5hcHBlbmQodGhpcy5wYXJlbnQsICQoJy5xdWljay1pbnB1dC1saXN0JykpOwogICAgdmFyIGRlbGVnYXRlID0gbmV3IExpc3RFbGVtZW50RGVsZWdhdGUoKTsKICAgIHZhciBhY2Nlc3NpYmlsaXR5UHJvdmlkZXIgPSBuZXcgUXVpY2tJbnB1dEFjY2Vzc2liaWxpdHlQcm92aWRlcigpOwogICAgdGhpcy5saXN0ID0gb3B0aW9ucy5jcmVhdGVMaXN0KCdRdWlja0lucHV0JywgdGhpcy5jb250YWluZXIsIGRlbGVnYXRlLCBbbmV3IExpc3RFbGVtZW50UmVuZGVyZXIoKV0sIHsKICAgICAgaWRlbnRpdHlQcm92aWRlcjogewogICAgICAgIGdldElkOiBmdW5jdGlvbiBnZXRJZChlbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gZWxlbWVudC5zYW5lTGFiZWw7CiAgICAgICAgfQogICAgICB9LAogICAgICBzZXRSb3dMaW5lSGVpZ2h0OiBmYWxzZSwKICAgICAgbXVsdGlwbGVTZWxlY3Rpb25TdXBwb3J0OiBmYWxzZSwKICAgICAgaG9yaXpvbnRhbFNjcm9sbGluZzogZmFsc2UsCiAgICAgIGFjY2Vzc2liaWxpdHlQcm92aWRlcjogYWNjZXNzaWJpbGl0eVByb3ZpZGVyCiAgICB9KTsKICAgIHRoaXMubGlzdC5nZXRIVE1MRWxlbWVudCgpLmlkID0gaWQ7CiAgICB0aGlzLmRpc3Bvc2FibGVzLnB1c2godGhpcy5saXN0KTsKICAgIHRoaXMuZGlzcG9zYWJsZXMucHVzaCh0aGlzLmxpc3Qub25LZXlEb3duKGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBldmVudCA9IG5ldyBTdGFuZGFyZEtleWJvYXJkRXZlbnQoZSk7CiAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkgewogICAgICAgIGNhc2UgMTAgLyogS2V5Q29kZS5TcGFjZSAqLzoKICAgICAgICAgIF90aGlzMi50b2dnbGVDaGVja2JveCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAzMSAvKiBLZXlDb2RlLktleUEgKi86CiAgICAgICAgICBpZiAocGxhdGZvcm0uaXNNYWNpbnRvc2ggPyBlLm1ldGFLZXkgOiBlLmN0cmxLZXkpIHsKICAgICAgICAgICAgX3RoaXMyLmxpc3Quc2V0Rm9jdXMocmFuZ2UoX3RoaXMyLmxpc3QubGVuZ3RoKSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE2IC8qIEtleUNvZGUuVXBBcnJvdyAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgdmFyIGZvY3VzMSA9IF90aGlzMi5saXN0LmdldEZvY3VzKCk7CiAgICAgICAgICAgIGlmIChmb2N1czEubGVuZ3RoID09PSAxICYmIGZvY3VzMVswXSA9PT0gMCkgewogICAgICAgICAgICAgIF90aGlzMi5fb25MZWF2ZS5maXJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgY2FzZSAxOCAvKiBLZXlDb2RlLkRvd25BcnJvdyAqLzoKICAgICAgICAgIHsKICAgICAgICAgICAgdmFyIGZvY3VzMiA9IF90aGlzMi5saXN0LmdldEZvY3VzKCk7CiAgICAgICAgICAgIGlmIChmb2N1czIubGVuZ3RoID09PSAxICYmIGZvY3VzMlswXSA9PT0gX3RoaXMyLmxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgIF90aGlzMi5fb25MZWF2ZS5maXJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgX3RoaXMyLl9vbktleURvd24uZmlyZShldmVudCk7CiAgICB9KSk7CiAgICB0aGlzLmRpc3Bvc2FibGVzLnB1c2godGhpcy5saXN0Lm9uTW91c2VEb3duKGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLmJyb3dzZXJFdmVudC5idXR0b24gIT09IDIpIHsKICAgICAgICAvLyBXb3JrcyBhcm91bmQgLyBmaXhlcyAjNjQzNTAuCiAgICAgICAgZS5icm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfSkpOwogICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5jb250YWluZXIsIGRvbS5FdmVudFR5cGUuQ0xJQ0ssIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLnggfHwgZS55KSB7CiAgICAgICAgLy8gQXZvaWQgJ2NsaWNrJyB0cmlnZ2VyZWQgYnkgJ3NwYWNlJyBvbiBjaGVja2JveC4KICAgICAgICBfdGhpczIuX29uTGVhdmUuZmlyZSgpOwogICAgICB9CiAgICB9KSk7CiAgICB0aGlzLmRpc3Bvc2FibGVzLnB1c2godGhpcy5saXN0Lm9uTW91c2VNaWRkbGVDbGljayhmdW5jdGlvbiAoZSkgewogICAgICBfdGhpczIuX29uTGVhdmUuZmlyZSgpOwogICAgfSkpOwogICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKHRoaXMubGlzdC5vbkNvbnRleHRNZW51KGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmICh0eXBlb2YgZS5pbmRleCA9PT0gJ251bWJlcicpIHsKICAgICAgICBlLmJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIC8vIHdlIHdhbnQgdG8gdHJlYXQgYSBjb250ZXh0IG1lbnUgZXZlbnQgYXMKICAgICAgICAvLyBhIGdlc3R1cmUgdG8gb3BlbiB0aGUgaXRlbSBhdCB0aGUgaW5kZXgKICAgICAgICAvLyBzaW5jZSB3ZSBkbyBub3QgaGF2ZSBhbnkgY29udGV4dCBtZW51CiAgICAgICAgLy8gdGhpcyBlbmFibGVzIGZvciBleGFtcGxlIG1hY09TIHRvIEN0cmwtCiAgICAgICAgLy8gY2xpY2sgb24gYW4gaXRlbSB0byBvcGVuIGl0LgogICAgICAgIF90aGlzMi5saXN0LnNldFNlbGVjdGlvbihbZS5pbmRleF0pOwogICAgICB9CiAgICB9KSk7CiAgICB0aGlzLmRpc3Bvc2FibGVzLnB1c2godGhpcy5fb25DaGFuZ2VkQWxsVmlzaWJsZUNoZWNrZWQsIHRoaXMuX29uQ2hhbmdlZENoZWNrZWRDb3VudCwgdGhpcy5fb25DaGFuZ2VkVmlzaWJsZUNvdW50LCB0aGlzLl9vbkNoYW5nZWRDaGVja2VkRWxlbWVudHMsIHRoaXMuX29uQnV0dG9uVHJpZ2dlcmVkLCB0aGlzLl9vbkxlYXZlLCB0aGlzLl9vbktleURvd24pOwogIH0KICBfY3JlYXRlQ2xhc3MoUXVpY2tJbnB1dExpc3QsIFt7CiAgICBrZXk6ICJvbkRpZENoYW5nZUZvY3VzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gRXZlbnQubWFwKHRoaXMubGlzdC5vbkRpZENoYW5nZUZvY3VzLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmVsZW1lbnRzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGUuaXRlbTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25EaWRDaGFuZ2VTZWxlY3Rpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBFdmVudC5tYXAodGhpcy5saXN0Lm9uRGlkQ2hhbmdlU2VsZWN0aW9uLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpdGVtczogZS5lbGVtZW50cy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUuaXRlbTsKICAgICAgICAgIH0pLAogICAgICAgICAgZXZlbnQ6IGUuYnJvd3NlckV2ZW50CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2Nyb2xsVG9wIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5saXN0LnNjcm9sbFRvcDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChzY3JvbGxUb3ApIHsKICAgICAgdGhpcy5saXN0LnNjcm9sbFRvcCA9IHNjcm9sbFRvcDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBbGxWaXNpYmxlQ2hlY2tlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWxsVmlzaWJsZUNoZWNrZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmFsbFZpc2libGVDaGVja2VkKHRoaXMuZWxlbWVudHMsIGZhbHNlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhbGxWaXNpYmxlQ2hlY2tlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWxsVmlzaWJsZUNoZWNrZWQoZWxlbWVudHMpIHsKICAgICAgdmFyIHdoZW5Ob25lVmlzaWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTsKICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2ldOwogICAgICAgIGlmICghZWxlbWVudC5oaWRkZW4pIHsKICAgICAgICAgIGlmICghZWxlbWVudC5jaGVja2VkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHdoZW5Ob25lVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB3aGVuTm9uZVZpc2libGU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q2hlY2tlZENvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDaGVja2VkQ291bnQoKSB7CiAgICAgIHZhciBjb3VudCA9IDA7CiAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgaWYgKGVsZW1lbnRzW2ldLmNoZWNrZWQpIHsKICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBjb3VudDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWaXNpYmxlQ291bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFZpc2libGVDb3VudCgpIHsKICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50czsKICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICBpZiAoIWVsZW1lbnRzW2ldLmhpZGRlbikgewogICAgICAgICAgY291bnQrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGNvdW50OwogICAgfQogIH0sIHsKICAgIGtleTogInNldEFsbFZpc2libGVDaGVja2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBbGxWaXNpYmxlQ2hlY2tlZChjaGVja2VkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5fZmlyZUNoZWNrZWRFdmVudHMgPSBmYWxzZTsKICAgICAgICB0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIGlmICghZWxlbWVudC5oaWRkZW4pIHsKICAgICAgICAgICAgZWxlbWVudC5jaGVja2VkID0gY2hlY2tlZDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLl9maXJlQ2hlY2tlZEV2ZW50cyA9IHRydWU7CiAgICAgICAgdGhpcy5maXJlQ2hlY2tlZEV2ZW50cygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0RWxlbWVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEVsZW1lbnRzKGlucHV0RWxlbWVudHMpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXMsCiAgICAgICAgX3RoaXMkZWxlbWVudERpc3Bvc2FiLAogICAgICAgIF90aGlzJGVsZW1lbnREaXNwb3NhYjI7CiAgICAgIHRoaXMuZWxlbWVudERpc3Bvc2FibGVzID0gX2Rpc3Bvc2UodGhpcy5lbGVtZW50RGlzcG9zYWJsZXMpOwogICAgICB2YXIgZmlyZUJ1dHRvblRyaWdnZXJlZCA9IGZ1bmN0aW9uIGZpcmVCdXR0b25UcmlnZ2VyZWQoZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmZpcmVCdXR0b25UcmlnZ2VyZWQoZXZlbnQpOwogICAgICB9OwogICAgICB0aGlzLmlucHV0RWxlbWVudHMgPSBpbnB1dEVsZW1lbnRzOwogICAgICB0aGlzLmVsZW1lbnRzID0gaW5wdXRFbGVtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgaXRlbSwgaW5kZXgpIHsKICAgICAgICB2YXIgX2EsIF9iLCBfYzsKICAgICAgICBpZiAoaXRlbS50eXBlICE9PSAnc2VwYXJhdG9yJykgewogICAgICAgICAgdmFyIHByZXZpb3VzID0gaW5kZXggJiYgaW5wdXRFbGVtZW50c1tpbmRleCAtIDFdOwogICAgICAgICAgdmFyIHNhbmVMYWJlbCA9IGl0ZW0ubGFiZWwgJiYgaXRlbS5sYWJlbC5yZXBsYWNlKC9ccj9cbi9nLCAnICcpOwogICAgICAgICAgdmFyIHNhbmVTb3J0TGFiZWwgPSBwYXJzZUxhYmVsV2l0aEljb25zKHNhbmVMYWJlbCkudGV4dC50cmltKCk7CiAgICAgICAgICB2YXIgc2FuZU1ldGEgPSBpdGVtLm1ldGEgJiYgaXRlbS5tZXRhLnJlcGxhY2UoL1xyP1xuL2csICcgJyk7CiAgICAgICAgICB2YXIgc2FuZURlc2NyaXB0aW9uID0gaXRlbS5kZXNjcmlwdGlvbiAmJiBpdGVtLmRlc2NyaXB0aW9uLnJlcGxhY2UoL1xyP1xuL2csICcgJyk7CiAgICAgICAgICB2YXIgc2FuZURldGFpbCA9IGl0ZW0uZGV0YWlsICYmIGl0ZW0uZGV0YWlsLnJlcGxhY2UoL1xyP1xuL2csICcgJyk7CiAgICAgICAgICB2YXIgc2FuZUFyaWFMYWJlbCA9IGl0ZW0uYXJpYUxhYmVsIHx8IFtzYW5lTGFiZWwsIHNhbmVEZXNjcmlwdGlvbiwgc2FuZURldGFpbF0ubWFwKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRDb2RpY29uQXJpYUxhYmVsKHMpOwogICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgIHJldHVybiAhIXM7CiAgICAgICAgICB9KS5qb2luKCcsICcpOwogICAgICAgICAgdmFyIGhhc0NoZWNrYm94ID0gX3RoaXMzLnBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctY2hlY2tib3hlcycpOwogICAgICAgICAgcmVzdWx0LnB1c2gobmV3IExpc3RFbGVtZW50KHsKICAgICAgICAgICAgaGFzQ2hlY2tib3g6IGhhc0NoZWNrYm94LAogICAgICAgICAgICBpbmRleDogaW5kZXgsCiAgICAgICAgICAgIGl0ZW06IGl0ZW0sCiAgICAgICAgICAgIHNhbmVMYWJlbDogc2FuZUxhYmVsLAogICAgICAgICAgICBzYW5lU29ydExhYmVsOiBzYW5lU29ydExhYmVsLAogICAgICAgICAgICBzYW5lTWV0YTogc2FuZU1ldGEsCiAgICAgICAgICAgIHNhbmVBcmlhTGFiZWw6IHNhbmVBcmlhTGFiZWwsCiAgICAgICAgICAgIHNhbmVEZXNjcmlwdGlvbjogc2FuZURlc2NyaXB0aW9uLAogICAgICAgICAgICBzYW5lRGV0YWlsOiBzYW5lRGV0YWlsLAogICAgICAgICAgICBsYWJlbEhpZ2hsaWdodHM6IChfYSA9IGl0ZW0uaGlnaGxpZ2h0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxhYmVsLAogICAgICAgICAgICBkZXNjcmlwdGlvbkhpZ2hsaWdodHM6IChfYiA9IGl0ZW0uaGlnaGxpZ2h0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmRlc2NyaXB0aW9uLAogICAgICAgICAgICBkZXRhaWxIaWdobGlnaHRzOiAoX2MgPSBpdGVtLmhpZ2hsaWdodHMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5kZXRhaWwsCiAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlLAogICAgICAgICAgICBzZXBhcmF0b3I6IHByZXZpb3VzICYmIHByZXZpb3VzLnR5cGUgPT09ICdzZXBhcmF0b3InID8gcHJldmlvdXMgOiB1bmRlZmluZWQsCiAgICAgICAgICAgIGZpcmVCdXR0b25UcmlnZ2VyZWQ6IGZpcmVCdXR0b25UcmlnZ2VyZWQKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSwgW10pOwogICAgICAoX3RoaXMkZWxlbWVudERpc3Bvc2FiID0gdGhpcy5lbGVtZW50RGlzcG9zYWJsZXMpLnB1c2guYXBwbHkoX3RoaXMkZWxlbWVudERpc3Bvc2FiLCBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5lbGVtZW50cykpOwogICAgICAoX3RoaXMkZWxlbWVudERpc3Bvc2FiMiA9IHRoaXMuZWxlbWVudERpc3Bvc2FibGVzKS5wdXNoLmFwcGx5KF90aGlzJGVsZW1lbnREaXNwb3NhYjIsIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmVsZW1lbnRzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHJldHVybiBlbGVtZW50Lm9uQ2hlY2tlZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLmZpcmVDaGVja2VkRXZlbnRzKCk7CiAgICAgICAgfSk7CiAgICAgIH0pKSk7CiAgICAgIHRoaXMuZWxlbWVudHNUb0luZGV4ZXMgPSB0aGlzLmVsZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAobWFwLCBlbGVtZW50LCBpbmRleCkgewogICAgICAgIG1hcC5zZXQoZWxlbWVudC5pdGVtLCBpbmRleCk7CiAgICAgICAgcmV0dXJuIG1hcDsKICAgICAgfSwgbmV3IE1hcCgpKTsKICAgICAgdGhpcy5saXN0LnNwbGljZSgwLCB0aGlzLmxpc3QubGVuZ3RoKTsgLy8gQ2xlYXIgZm9jdXMgYW5kIHNlbGVjdGlvbiBmaXJzdCwgc2VuZGluZyB0aGUgZXZlbnRzIHdoZW4gdGhlIGxpc3QgaXMgZW1wdHkuCiAgICAgIHRoaXMubGlzdC5zcGxpY2UoMCwgdGhpcy5saXN0Lmxlbmd0aCwgdGhpcy5lbGVtZW50cyk7CiAgICAgIHRoaXMuX29uQ2hhbmdlZFZpc2libGVDb3VudC5maXJlKHRoaXMuZWxlbWVudHMubGVuZ3RoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRGb2N1c2VkRWxlbWVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZvY3VzZWRFbGVtZW50cygpIHsKICAgICAgcmV0dXJuIHRoaXMubGlzdC5nZXRGb2N1c2VkRWxlbWVudHMoKS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5pdGVtOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRGb2N1c2VkRWxlbWVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZvY3VzZWRFbGVtZW50cyhpdGVtcykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdGhpcy5saXN0LnNldEZvY3VzKGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfdGhpczQuZWxlbWVudHNUb0luZGV4ZXMuaGFzKGl0ZW0pOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX3RoaXM0LmVsZW1lbnRzVG9JbmRleGVzLmdldChpdGVtKTsKICAgICAgfSkpOwogICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBmb2N1c2VkID0gdGhpcy5saXN0LmdldEZvY3VzKClbMF07CiAgICAgICAgaWYgKHR5cGVvZiBmb2N1c2VkID09PSAnbnVtYmVyJykgewogICAgICAgICAgdGhpcy5saXN0LnJldmVhbChmb2N1c2VkKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBY3RpdmVEZXNjZW5kYW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBY3RpdmVEZXNjZW5kYW50KCkgewogICAgICByZXR1cm4gdGhpcy5saXN0LmdldEhUTUxFbGVtZW50KCkuZ2V0QXR0cmlidXRlKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRTZWxlY3RlZEVsZW1lbnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3RlZEVsZW1lbnRzKGl0ZW1zKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLmxpc3Quc2V0U2VsZWN0aW9uKGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfdGhpczUuZWxlbWVudHNUb0luZGV4ZXMuaGFzKGl0ZW0pOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX3RoaXM1LmVsZW1lbnRzVG9JbmRleGVzLmdldChpdGVtKTsKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldENoZWNrZWRFbGVtZW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2hlY2tlZEVsZW1lbnRzKCkgewogICAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5jaGVja2VkOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5pdGVtOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRDaGVja2VkRWxlbWVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldENoZWNrZWRFbGVtZW50cyhpdGVtcykgewogICAgICB0cnkgewogICAgICAgIHRoaXMuX2ZpcmVDaGVja2VkRXZlbnRzID0gZmFsc2U7CiAgICAgICAgdmFyIGNoZWNrZWQgPSBuZXcgU2V0KCk7CiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGl0ZW1zKSwKICAgICAgICAgIF9zdGVwOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICBjaGVja2VkLmFkZChpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5lbGVtZW50cyksCiAgICAgICAgICBfc3RlcDI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSBjaGVja2VkLmhhcyhlbGVtZW50Lml0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgIH0KICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLl9maXJlQ2hlY2tlZEV2ZW50cyA9IHRydWU7CiAgICAgICAgdGhpcy5maXJlQ2hlY2tlZEV2ZW50cygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZW5hYmxlZCIsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICB0aGlzLmxpc3QuZ2V0SFRNTEVsZW1lbnQoKS5zdHlsZS5wb2ludGVyRXZlbnRzID0gdmFsdWUgPyAnJyA6ICdub25lJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmb2N1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9jdXMod2hhdCkgewogICAgICBpZiAoIXRoaXMubGlzdC5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHdoYXQgPT09IFF1aWNrSW5wdXRMaXN0Rm9jdXMuTmV4dCAmJiB0aGlzLmxpc3QuZ2V0Rm9jdXMoKVswXSA9PT0gdGhpcy5saXN0Lmxlbmd0aCAtIDEpIHsKICAgICAgICB3aGF0ID0gUXVpY2tJbnB1dExpc3RGb2N1cy5GaXJzdDsKICAgICAgfQogICAgICBpZiAod2hhdCA9PT0gUXVpY2tJbnB1dExpc3RGb2N1cy5QcmV2aW91cyAmJiB0aGlzLmxpc3QuZ2V0Rm9jdXMoKVswXSA9PT0gMCkgewogICAgICAgIHdoYXQgPSBRdWlja0lucHV0TGlzdEZvY3VzLkxhc3Q7CiAgICAgIH0KICAgICAgaWYgKHdoYXQgPT09IFF1aWNrSW5wdXRMaXN0Rm9jdXMuU2Vjb25kICYmIHRoaXMubGlzdC5sZW5ndGggPCAyKSB7CiAgICAgICAgd2hhdCA9IFF1aWNrSW5wdXRMaXN0Rm9jdXMuRmlyc3Q7CiAgICAgIH0KICAgICAgc3dpdGNoICh3aGF0KSB7CiAgICAgICAgY2FzZSBRdWlja0lucHV0TGlzdEZvY3VzLkZpcnN0OgogICAgICAgICAgdGhpcy5saXN0LmZvY3VzRmlyc3QoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgUXVpY2tJbnB1dExpc3RGb2N1cy5TZWNvbmQ6CiAgICAgICAgICB0aGlzLmxpc3QuZm9jdXNOdGgoMSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFF1aWNrSW5wdXRMaXN0Rm9jdXMuTGFzdDoKICAgICAgICAgIHRoaXMubGlzdC5mb2N1c0xhc3QoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgUXVpY2tJbnB1dExpc3RGb2N1cy5OZXh0OgogICAgICAgICAgdGhpcy5saXN0LmZvY3VzTmV4dCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBRdWlja0lucHV0TGlzdEZvY3VzLlByZXZpb3VzOgogICAgICAgICAgdGhpcy5saXN0LmZvY3VzUHJldmlvdXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgUXVpY2tJbnB1dExpc3RGb2N1cy5OZXh0UGFnZToKICAgICAgICAgIHRoaXMubGlzdC5mb2N1c05leHRQYWdlKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFF1aWNrSW5wdXRMaXN0Rm9jdXMuUHJldmlvdXNQYWdlOgogICAgICAgICAgdGhpcy5saXN0LmZvY3VzUHJldmlvdXNQYWdlKCk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICB2YXIgZm9jdXNlZCA9IHRoaXMubGlzdC5nZXRGb2N1cygpWzBdOwogICAgICBpZiAodHlwZW9mIGZvY3VzZWQgPT09ICdudW1iZXInKSB7CiAgICAgICAgdGhpcy5saXN0LnJldmVhbChmb2N1c2VkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyRm9jdXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyRm9jdXMoKSB7CiAgICAgIHRoaXMubGlzdC5zZXRGb2N1cyhbXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZG9tRm9jdXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvbUZvY3VzKCkgewogICAgICB0aGlzLmxpc3QuZG9tRm9jdXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsYXlvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxheW91dChtYXhIZWlnaHQpIHsKICAgICAgdGhpcy5saXN0LmdldEhUTUxFbGVtZW50KCkuc3R5bGUubWF4SGVpZ2h0ID0gbWF4SGVpZ2h0ID8gImNhbGMoIi5jb25jYXQoTWF0aC5mbG9vcihtYXhIZWlnaHQgLyA0NCkgKiA0NCwgInB4KSIpIDogJyc7CiAgICAgIHRoaXMubGlzdC5sYXlvdXQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWx0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlcihxdWVyeSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgaWYgKCEodGhpcy5zb3J0QnlMYWJlbCB8fCB0aGlzLm1hdGNoT25MYWJlbCB8fCB0aGlzLm1hdGNoT25EZXNjcmlwdGlvbiB8fCB0aGlzLm1hdGNoT25EZXRhaWwpKSB7CiAgICAgICAgdGhpcy5saXN0LmxheW91dCgpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgcXVlcnlXaXRoV2hpdGVzcGFjZSA9IHF1ZXJ5OwogICAgICBxdWVyeSA9IHF1ZXJ5LnRyaW0oKTsKICAgICAgLy8gUmVzZXQgZmlsdGVyaW5nCiAgICAgIGlmICghcXVlcnkgfHwgISh0aGlzLm1hdGNoT25MYWJlbCB8fCB0aGlzLm1hdGNoT25EZXNjcmlwdGlvbiB8fCB0aGlzLm1hdGNoT25EZXRhaWwpKSB7CiAgICAgICAgdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICBlbGVtZW50LmxhYmVsSGlnaGxpZ2h0cyA9IHVuZGVmaW5lZDsKICAgICAgICAgIGVsZW1lbnQuZGVzY3JpcHRpb25IaWdobGlnaHRzID0gdW5kZWZpbmVkOwogICAgICAgICAgZWxlbWVudC5kZXRhaWxIaWdobGlnaHRzID0gdW5kZWZpbmVkOwogICAgICAgICAgZWxlbWVudC5oaWRkZW4gPSBmYWxzZTsKICAgICAgICAgIHZhciBwcmV2aW91cyA9IGVsZW1lbnQuaW5kZXggJiYgX3RoaXM2LmlucHV0RWxlbWVudHNbZWxlbWVudC5pbmRleCAtIDFdOwogICAgICAgICAgZWxlbWVudC5zZXBhcmF0b3IgPSBwcmV2aW91cyAmJiBwcmV2aW91cy50eXBlID09PSAnc2VwYXJhdG9yJyA/IHByZXZpb3VzIDogdW5kZWZpbmVkOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIEZpbHRlciBieSB2YWx1ZSAoc2luY2Ugd2Ugc3VwcG9ydCBpY29ucyBpbiBsYWJlbHMsIHVzZSAkKC4uKSBhd2FyZSBmdXp6eSBtYXRjaGluZykKICAgICAgZWxzZSB7CiAgICAgICAgdmFyIGN1cnJlbnRTZXBhcmF0b3I7CiAgICAgICAgdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICB2YXIgbGFiZWxIaWdobGlnaHRzOwogICAgICAgICAgaWYgKF90aGlzNi5tYXRjaE9uTGFiZWxNb2RlID09PSAnZnV6enknKSB7CiAgICAgICAgICAgIGxhYmVsSGlnaGxpZ2h0cyA9IF90aGlzNi5tYXRjaE9uTGFiZWwgPyB3aXRoTnVsbEFzVW5kZWZpbmVkKG1hdGNoZXNGdXp6eUljb25Bd2FyZShxdWVyeSwgcGFyc2VMYWJlbFdpdGhJY29ucyhlbGVtZW50LnNhbmVMYWJlbCkpKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxhYmVsSGlnaGxpZ2h0cyA9IF90aGlzNi5tYXRjaE9uTGFiZWwgPyB3aXRoTnVsbEFzVW5kZWZpbmVkKG1hdGNoZXNDb250aWd1b3VzSWNvbkF3YXJlKHF1ZXJ5V2l0aFdoaXRlc3BhY2UsIHBhcnNlTGFiZWxXaXRoSWNvbnMoZWxlbWVudC5zYW5lTGFiZWwpKSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgZGVzY3JpcHRpb25IaWdobGlnaHRzID0gX3RoaXM2Lm1hdGNoT25EZXNjcmlwdGlvbiA/IHdpdGhOdWxsQXNVbmRlZmluZWQobWF0Y2hlc0Z1enp5SWNvbkF3YXJlKHF1ZXJ5LCBwYXJzZUxhYmVsV2l0aEljb25zKGVsZW1lbnQuc2FuZURlc2NyaXB0aW9uIHx8ICcnKSkpIDogdW5kZWZpbmVkOwogICAgICAgICAgdmFyIGRldGFpbEhpZ2hsaWdodHMgPSBfdGhpczYubWF0Y2hPbkRldGFpbCA/IHdpdGhOdWxsQXNVbmRlZmluZWQobWF0Y2hlc0Z1enp5SWNvbkF3YXJlKHF1ZXJ5LCBwYXJzZUxhYmVsV2l0aEljb25zKGVsZW1lbnQuc2FuZURldGFpbCB8fCAnJykpKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIHZhciBtZXRhSGlnaGxpZ2h0cyA9IF90aGlzNi5tYXRjaE9uTWV0YSA/IHdpdGhOdWxsQXNVbmRlZmluZWQobWF0Y2hlc0Z1enp5SWNvbkF3YXJlKHF1ZXJ5LCBwYXJzZUxhYmVsV2l0aEljb25zKGVsZW1lbnQuc2FuZU1ldGEgfHwgJycpKSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICBpZiAobGFiZWxIaWdobGlnaHRzIHx8IGRlc2NyaXB0aW9uSGlnaGxpZ2h0cyB8fCBkZXRhaWxIaWdobGlnaHRzIHx8IG1ldGFIaWdobGlnaHRzKSB7CiAgICAgICAgICAgIGVsZW1lbnQubGFiZWxIaWdobGlnaHRzID0gbGFiZWxIaWdobGlnaHRzOwogICAgICAgICAgICBlbGVtZW50LmRlc2NyaXB0aW9uSGlnaGxpZ2h0cyA9IGRlc2NyaXB0aW9uSGlnaGxpZ2h0czsKICAgICAgICAgICAgZWxlbWVudC5kZXRhaWxIaWdobGlnaHRzID0gZGV0YWlsSGlnaGxpZ2h0czsKICAgICAgICAgICAgZWxlbWVudC5oaWRkZW4gPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVsZW1lbnQubGFiZWxIaWdobGlnaHRzID0gdW5kZWZpbmVkOwogICAgICAgICAgICBlbGVtZW50LmRlc2NyaXB0aW9uSGlnaGxpZ2h0cyA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgZWxlbWVudC5kZXRhaWxIaWdobGlnaHRzID0gdW5kZWZpbmVkOwogICAgICAgICAgICBlbGVtZW50LmhpZGRlbiA9ICFlbGVtZW50Lml0ZW0uYWx3YXlzU2hvdzsKICAgICAgICAgIH0KICAgICAgICAgIGVsZW1lbnQuc2VwYXJhdG9yID0gdW5kZWZpbmVkOwogICAgICAgICAgLy8gd2UgY2FuIHNob3cgdGhlIHNlcGFyYXRvciB1bmxlc3MgdGhlIGxpc3QgZ2V0cyBzb3J0ZWQgYnkgbWF0Y2gKICAgICAgICAgIGlmICghX3RoaXM2LnNvcnRCeUxhYmVsKSB7CiAgICAgICAgICAgIHZhciBwcmV2aW91cyA9IGVsZW1lbnQuaW5kZXggJiYgX3RoaXM2LmlucHV0RWxlbWVudHNbZWxlbWVudC5pbmRleCAtIDFdOwogICAgICAgICAgICBjdXJyZW50U2VwYXJhdG9yID0gcHJldmlvdXMgJiYgcHJldmlvdXMudHlwZSA9PT0gJ3NlcGFyYXRvcicgPyBwcmV2aW91cyA6IGN1cnJlbnRTZXBhcmF0b3I7CiAgICAgICAgICAgIGlmIChjdXJyZW50U2VwYXJhdG9yICYmICFlbGVtZW50LmhpZGRlbikgewogICAgICAgICAgICAgIGVsZW1lbnQuc2VwYXJhdG9yID0gY3VycmVudFNlcGFyYXRvcjsKICAgICAgICAgICAgICBjdXJyZW50U2VwYXJhdG9yID0gdW5kZWZpbmVkOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFyIHNob3duRWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIHJldHVybiAhZWxlbWVudC5oaWRkZW47CiAgICAgIH0pOwogICAgICAvLyBTb3J0IGJ5IHZhbHVlCiAgICAgIGlmICh0aGlzLnNvcnRCeUxhYmVsICYmIHF1ZXJ5KSB7CiAgICAgICAgdmFyIG5vcm1hbGl6ZWRTZWFyY2hWYWx1ZSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgc2hvd25FbGVtZW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gY29tcGFyZUVudHJpZXMoYSwgYiwgbm9ybWFsaXplZFNlYXJjaFZhbHVlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLmVsZW1lbnRzVG9JbmRleGVzID0gc2hvd25FbGVtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKG1hcCwgZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICBtYXAuc2V0KGVsZW1lbnQuaXRlbSwgaW5kZXgpOwogICAgICAgIHJldHVybiBtYXA7CiAgICAgIH0sIG5ldyBNYXAoKSk7CiAgICAgIHRoaXMubGlzdC5zcGxpY2UoMCwgdGhpcy5saXN0Lmxlbmd0aCwgc2hvd25FbGVtZW50cyk7CiAgICAgIHRoaXMubGlzdC5zZXRGb2N1cyhbXSk7CiAgICAgIHRoaXMubGlzdC5sYXlvdXQoKTsKICAgICAgdGhpcy5fb25DaGFuZ2VkQWxsVmlzaWJsZUNoZWNrZWQuZmlyZSh0aGlzLmdldEFsbFZpc2libGVDaGVja2VkKCkpOwogICAgICB0aGlzLl9vbkNoYW5nZWRWaXNpYmxlQ291bnQuZmlyZShzaG93bkVsZW1lbnRzLmxlbmd0aCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogInRvZ2dsZUNoZWNrYm94IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVDaGVja2JveCgpIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLl9maXJlQ2hlY2tlZEV2ZW50cyA9IGZhbHNlOwogICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMubGlzdC5nZXRGb2N1c2VkRWxlbWVudHMoKTsKICAgICAgICB2YXIgYWxsQ2hlY2tlZCA9IHRoaXMuYWxsVmlzaWJsZUNoZWNrZWQoZWxlbWVudHMpOwogICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZWxlbWVudHMpLAogICAgICAgICAgX3N0ZXAzOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgZWxlbWVudC5jaGVja2VkID0gIWFsbENoZWNrZWQ7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgfQogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuX2ZpcmVDaGVja2VkRXZlbnRzID0gdHJ1ZTsKICAgICAgICB0aGlzLmZpcmVDaGVja2VkRXZlbnRzKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJkaXNwbGF5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwbGF5KF9kaXNwbGF5KSB7CiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBfZGlzcGxheSA/ICcnIDogJ25vbmUnOwogICAgfQogIH0sIHsKICAgIGtleTogImlzRGlzcGxheWVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0Rpc3BsYXllZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICB0aGlzLmVsZW1lbnREaXNwb3NhYmxlcyA9IF9kaXNwb3NlKHRoaXMuZWxlbWVudERpc3Bvc2FibGVzKTsKICAgICAgdGhpcy5kaXNwb3NhYmxlcyA9IF9kaXNwb3NlKHRoaXMuZGlzcG9zYWJsZXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImZpcmVDaGVja2VkRXZlbnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaXJlQ2hlY2tlZEV2ZW50cygpIHsKICAgICAgaWYgKHRoaXMuX2ZpcmVDaGVja2VkRXZlbnRzKSB7CiAgICAgICAgdGhpcy5fb25DaGFuZ2VkQWxsVmlzaWJsZUNoZWNrZWQuZmlyZSh0aGlzLmdldEFsbFZpc2libGVDaGVja2VkKCkpOwogICAgICAgIHRoaXMuX29uQ2hhbmdlZENoZWNrZWRDb3VudC5maXJlKHRoaXMuZ2V0Q2hlY2tlZENvdW50KCkpOwogICAgICAgIHRoaXMuX29uQ2hhbmdlZENoZWNrZWRFbGVtZW50cy5maXJlKHRoaXMuZ2V0Q2hlY2tlZEVsZW1lbnRzKCkpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZmlyZUJ1dHRvblRyaWdnZXJlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlyZUJ1dHRvblRyaWdnZXJlZChldmVudCkgewogICAgICB0aGlzLl9vbkJ1dHRvblRyaWdnZXJlZC5maXJlKGV2ZW50KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdHlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3R5bGUoc3R5bGVzKSB7CiAgICAgIHRoaXMubGlzdC5zdHlsZShzdHlsZXMpOwogICAgfQogIH1dKTsKICByZXR1cm4gUXVpY2tJbnB1dExpc3Q7Cn0oKTsKX19kZWNvcmF0ZShbbWVtb2l6ZV0sIFF1aWNrSW5wdXRMaXN0LnByb3RvdHlwZSwgIm9uRGlkQ2hhbmdlRm9jdXMiLCBudWxsKTsKX19kZWNvcmF0ZShbbWVtb2l6ZV0sIFF1aWNrSW5wdXRMaXN0LnByb3RvdHlwZSwgIm9uRGlkQ2hhbmdlU2VsZWN0aW9uIiwgbnVsbCk7CmV4cG9ydCBmdW5jdGlvbiBtYXRjaGVzQ29udGlndW91c0ljb25Bd2FyZShxdWVyeSwgdGFyZ2V0KSB7CiAgdmFyIHRleHQgPSB0YXJnZXQudGV4dCwKICAgIGljb25PZmZzZXRzID0gdGFyZ2V0Lmljb25PZmZzZXRzOwogIC8vIFJldHVybiBlYXJseSBpZiB0aGVyZSBhcmUgbm8gaWNvbiBtYXJrZXJzIGluIHRoZSB3b3JkIHRvIG1hdGNoIGFnYWluc3QKICBpZiAoIWljb25PZmZzZXRzIHx8IGljb25PZmZzZXRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIG1hdGNoZXNDb250aWd1b3VzKHF1ZXJ5LCB0ZXh0KTsKICB9CiAgLy8gVHJpbSB0aGUgd29yZCB0byBtYXRjaCBhZ2FpbnN0IGJlY2F1c2UgaXQgY291bGQgaGF2ZSBsZWFkaW5nCiAgLy8gd2hpdGVzcGFjZSBub3cgaWYgdGhlIHdvcmQgc3RhcnRlZCB3aXRoIGFuIGljb24KICB2YXIgd29yZFRvTWF0Y2hBZ2FpbnN0V2l0aG91dEljb25zVHJpbW1lZCA9IGx0cmltKHRleHQsICcgJyk7CiAgdmFyIGxlYWRpbmdXaGl0ZXNwYWNlT2Zmc2V0ID0gdGV4dC5sZW5ndGggLSB3b3JkVG9NYXRjaEFnYWluc3RXaXRob3V0SWNvbnNUcmltbWVkLmxlbmd0aDsKICAvLyBtYXRjaCBvbiB2YWx1ZSB3aXRob3V0IGljb24KICB2YXIgbWF0Y2hlcyA9IG1hdGNoZXNDb250aWd1b3VzKHF1ZXJ5LCB3b3JkVG9NYXRjaEFnYWluc3RXaXRob3V0SWNvbnNUcmltbWVkKTsKICAvLyBNYXAgbWF0Y2hlcyBiYWNrIHRvIG9mZnNldHMgd2l0aCBpY29uIGFuZCB0cmltbWluZwogIGlmIChtYXRjaGVzKSB7CiAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1hdGNoZXMpLAogICAgICBfc3RlcDQ7CiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgIHZhciBtYXRjaCA9IF9zdGVwNC52YWx1ZTsKICAgICAgICB2YXIgaWNvbk9mZnNldCA9IGljb25PZmZzZXRzW21hdGNoLnN0YXJ0ICsgbGVhZGluZ1doaXRlc3BhY2VPZmZzZXRdIC8qIGljb24gb2Zmc2V0cyBhdCBpbmRleCAqLyArIGxlYWRpbmdXaGl0ZXNwYWNlT2Zmc2V0IC8qIG92ZXJhbGwgbGVhZGluZyB3aGl0ZXNwYWNlIG9mZnNldCAqLzsKICAgICAgICBtYXRjaC5zdGFydCArPSBpY29uT2Zmc2V0OwogICAgICAgIG1hdGNoLmVuZCArPSBpY29uT2Zmc2V0OwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICB9IGZpbmFsbHkgewogICAgICBfaXRlcmF0b3I0LmYoKTsKICAgIH0KICB9CiAgcmV0dXJuIG1hdGNoZXM7Cn0KZnVuY3Rpb24gbWF0Y2hlc0NvbnRpZ3VvdXMod29yZCwgd29yZFRvTWF0Y2hBZ2FpbnN0KSB7CiAgdmFyIG1hdGNoSW5kZXggPSB3b3JkVG9NYXRjaEFnYWluc3QudG9Mb3dlckNhc2UoKS5pbmRleE9mKHdvcmQudG9Mb3dlckNhc2UoKSk7CiAgaWYgKG1hdGNoSW5kZXggIT09IC0xKSB7CiAgICByZXR1cm4gW3sKICAgICAgc3RhcnQ6IG1hdGNoSW5kZXgsCiAgICAgIGVuZDogbWF0Y2hJbmRleCArIHdvcmQubGVuZ3RoCiAgICB9XTsKICB9CiAgcmV0dXJuIG51bGw7Cn0KZnVuY3Rpb24gY29tcGFyZUVudHJpZXMoZWxlbWVudEEsIGVsZW1lbnRCLCBsb29rRm9yKSB7CiAgdmFyIGxhYmVsSGlnaGxpZ2h0c0EgPSBlbGVtZW50QS5sYWJlbEhpZ2hsaWdodHMgfHwgW107CiAgdmFyIGxhYmVsSGlnaGxpZ2h0c0IgPSBlbGVtZW50Qi5sYWJlbEhpZ2hsaWdodHMgfHwgW107CiAgaWYgKGxhYmVsSGlnaGxpZ2h0c0EubGVuZ3RoICYmICFsYWJlbEhpZ2hsaWdodHNCLmxlbmd0aCkgewogICAgcmV0dXJuIC0xOwogIH0KICBpZiAoIWxhYmVsSGlnaGxpZ2h0c0EubGVuZ3RoICYmIGxhYmVsSGlnaGxpZ2h0c0IubGVuZ3RoKSB7CiAgICByZXR1cm4gMTsKICB9CiAgaWYgKGxhYmVsSGlnaGxpZ2h0c0EubGVuZ3RoID09PSAwICYmIGxhYmVsSGlnaGxpZ2h0c0IubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gMDsKICB9CiAgcmV0dXJuIGNvbXBhcmVBbnl0aGluZyhlbGVtZW50QS5zYW5lU29ydExhYmVsLCBlbGVtZW50Qi5zYW5lU29ydExhYmVsLCBsb29rRm9yKTsKfQp2YXIgUXVpY2tJbnB1dEFjY2Vzc2liaWxpdHlQcm92aWRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUXVpY2tJbnB1dEFjY2Vzc2liaWxpdHlQcm92aWRlcigpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBRdWlja0lucHV0QWNjZXNzaWJpbGl0eVByb3ZpZGVyKTsKICB9CiAgX2NyZWF0ZUNsYXNzKFF1aWNrSW5wdXRBY2Nlc3NpYmlsaXR5UHJvdmlkZXIsIFt7CiAgICBrZXk6ICJnZXRXaWRnZXRBcmlhTGFiZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFdpZGdldEFyaWFMYWJlbCgpIHsKICAgICAgcmV0dXJuIGxvY2FsaXplKCdxdWlja0lucHV0JywgIlF1aWNrIElucHV0Iik7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QXJpYUxhYmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBcmlhTGFiZWwoZWxlbWVudCkgewogICAgICB2YXIgX2E7CiAgICAgIHJldHVybiAoKF9hID0gZWxlbWVudC5zZXBhcmF0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sYWJlbCkgPyAiIi5jb25jYXQoZWxlbWVudC5zYW5lQXJpYUxhYmVsLCAiLCAiKS5jb25jYXQoZWxlbWVudC5zZXBhcmF0b3IubGFiZWwpIDogZWxlbWVudC5zYW5lQXJpYUxhYmVsOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFdpZGdldFJvbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFdpZGdldFJvbGUoKSB7CiAgICAgIHJldHVybiAnbGlzdGJveCc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Um9sZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Um9sZShlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50Lmhhc0NoZWNrYm94ID8gJ2NoZWNrYm94JyA6ICdvcHRpb24nOwogICAgfQogIH0sIHsKICAgIGtleTogImlzQ2hlY2tlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNDaGVja2VkKGVsZW1lbnQpIHsKICAgICAgaWYgKCFlbGVtZW50Lmhhc0NoZWNrYm94KSB7CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIHZhbHVlOiBlbGVtZW50LmNoZWNrZWQsCiAgICAgICAgb25EaWRDaGFuZ2U6IGVsZW1lbnQub25DaGVja2VkCiAgICAgIH07CiAgICB9CiAgfV0pOwogIHJldHVybiBRdWlja0lucHV0QWNjZXNzaWJpbGl0eVByb3ZpZGVyOwp9KCk7"},{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","dom","StandardKeyboardEvent","ActionBar","IconLabel","KeybindingLabel","Action","range","getCodiconAriaLabel","compareAnything","memoize","Emitter","Event","matchesFuzzyIconAware","parseLabelWithIcons","dispose","platform","ltrim","withNullAsUndefined","getIconClass","localize","$","ListElement","init","hidden","_onChecked","onChecked","event","assign","_checked","fire","ListElementRenderer","ID","container","data","create","toDisposeElement","toDisposeTemplate","entry","append","label","push","addStandardDisposableListener","EventType","CLICK","checkbox","offsetParent","preventDefault","type","CHANGE","element","checked","rows","row1","row2","supportHighlights","supportDescriptionHighlights","supportIcons","keybindingContainer","keybinding","OS","detailContainer","detail","separator","actionBar","domNode","classList","add","index","labelHighlights","descriptionHighlights","detailHighlights","options","matches","descriptionTitle","saneDescription","descriptionMatches","extraClasses","item","iconClasses","italic","strikethrough","setLabel","saneLabel","set","saneDetail","undefined","title","textContent","style","display","toggle","clear","buttons","map","button","cssClasses","iconClass","iconPath","alwaysVisible","action","fireButtonTriggered","tooltip","icon","remove","ListElementDelegate","QuickInputListFocus","QuickInputList","parent","id","inputElements","elements","elementsToIndexes","Map","matchOnDescription","matchOnDetail","matchOnLabel","matchOnLabelMode","matchOnMeta","sortByLabel","_onChangedAllVisibleChecked","onChangedAllVisibleChecked","_onChangedCheckedCount","onChangedCheckedCount","_onChangedVisibleCount","onChangedVisibleCount","_onChangedCheckedElements","onChangedCheckedElements","_onButtonTriggered","onButtonTriggered","_onKeyDown","onKeyDown","_onLeave","onLeave","_fireCheckedEvents","elementDisposables","disposables","delegate","accessibilityProvider","QuickInputAccessibilityProvider","list","createList","identityProvider","getId","setRowLineHeight","multipleSelectionSupport","horizontalScrolling","getHTMLElement","keyCode","toggleCheckbox","isMacintosh","metaKey","ctrlKey","setFocus","focus1","getFocus","focus2","onMouseDown","browserEvent","addDisposableListener","x","y","onMouseMiddleClick","onContextMenu","setSelection","onDidChangeFocus","onDidChangeSelection","items","scrollTop","allVisibleChecked","whenNoneVisible","n","count","forEach","fireCheckedEvents","reduce","_a","_b","_c","previous","replace","saneSortLabel","text","trim","saneMeta","meta","description","saneAriaLabel","ariaLabel","s","filter","join","hasCheckbox","contains","highlights","splice","getFocusedElements","has","get","focused","reveal","getAttribute","Set","pointerEvents","what","Next","First","Previous","Last","Second","focusFirst","focusNth","focusLast","focusNext","focusPrevious","NextPage","focusNextPage","PreviousPage","focusPreviousPage","domFocus","maxHeight","Math","floor","layout","query","queryWithWhitespace","currentSeparator","matchesContiguousIconAware","metaHighlights","alwaysShow","shownElements","normalizedSearchValue","toLowerCase","sort","a","b","compareEntries","getAllVisibleChecked","allChecked","getCheckedCount","getCheckedElements","styles","prototype","iconOffsets","matchesContiguous","wordToMatchAgainstWithoutIconsTrimmed","leadingWhitespaceOffset","match","iconOffset","start","end","word","wordToMatchAgainst","matchIndex","indexOf","elementA","elementB","lookFor","labelHighlightsA","labelHighlightsB","onDidChange"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInputList.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../browser/keyboardEvent.js';\nimport { ActionBar } from '../../../browser/ui/actionbar/actionbar.js';\nimport { IconLabel } from '../../../browser/ui/iconLabel/iconLabel.js';\nimport { KeybindingLabel } from '../../../browser/ui/keybindingLabel/keybindingLabel.js';\nimport { Action } from '../../../common/actions.js';\nimport { range } from '../../../common/arrays.js';\nimport { getCodiconAriaLabel } from '../../../common/codicons.js';\nimport { compareAnything } from '../../../common/comparers.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { matchesFuzzyIconAware, parseLabelWithIcons } from '../../../common/iconLabels.js';\nimport { dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { ltrim } from '../../../common/strings.js';\nimport { withNullAsUndefined } from '../../../common/types.js';\nimport { getIconClass } from './quickInputUtils.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nclass ListElement {\n    constructor(init) {\n        this.hidden = false;\n        this._onChecked = new Emitter();\n        this.onChecked = this._onChecked.event;\n        Object.assign(this, init);\n    }\n    get checked() {\n        return !!this._checked;\n    }\n    set checked(value) {\n        if (value !== this._checked) {\n            this._checked = value;\n            this._onChecked.fire(value);\n        }\n    }\n    dispose() {\n        this._onChecked.dispose();\n    }\n}\nclass ListElementRenderer {\n    get templateId() {\n        return ListElementRenderer.ID;\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.toDisposeElement = [];\n        data.toDisposeTemplate = [];\n        data.entry = dom.append(container, $('.quick-input-list-entry'));\n        // Checkbox\n        const label = dom.append(data.entry, $('label.quick-input-list-label'));\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(label, dom.EventType.CLICK, e => {\n            if (!data.checkbox.offsetParent) { // If checkbox not visible:\n                e.preventDefault(); // Prevent toggle of checkbox when it is immediately shown afterwards. #91740\n            }\n        }));\n        data.checkbox = dom.append(label, $('input.quick-input-list-checkbox'));\n        data.checkbox.type = 'checkbox';\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(data.checkbox, dom.EventType.CHANGE, e => {\n            data.element.checked = data.checkbox.checked;\n        }));\n        // Rows\n        const rows = dom.append(label, $('.quick-input-list-rows'));\n        const row1 = dom.append(rows, $('.quick-input-list-row'));\n        const row2 = dom.append(rows, $('.quick-input-list-row'));\n        // Label\n        data.label = new IconLabel(row1, { supportHighlights: true, supportDescriptionHighlights: true, supportIcons: true });\n        // Keybinding\n        const keybindingContainer = dom.append(row1, $('.quick-input-list-entry-keybinding'));\n        data.keybinding = new KeybindingLabel(keybindingContainer, platform.OS);\n        // Detail\n        const detailContainer = dom.append(row2, $('.quick-input-list-label-meta'));\n        data.detail = new IconLabel(detailContainer, { supportHighlights: true, supportIcons: true });\n        // Separator\n        data.separator = dom.append(data.entry, $('.quick-input-list-separator'));\n        // Actions\n        data.actionBar = new ActionBar(data.entry);\n        data.actionBar.domNode.classList.add('quick-input-list-entry-action-bar');\n        data.toDisposeTemplate.push(data.actionBar);\n        return data;\n    }\n    renderElement(element, index, data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n        data.element = element;\n        data.checkbox.checked = element.checked;\n        data.toDisposeElement.push(element.onChecked(checked => data.checkbox.checked = checked));\n        const { labelHighlights, descriptionHighlights, detailHighlights } = element;\n        // Label\n        const options = Object.create(null);\n        options.matches = labelHighlights || [];\n        options.descriptionTitle = element.saneDescription;\n        options.descriptionMatches = descriptionHighlights || [];\n        options.extraClasses = element.item.iconClasses;\n        options.italic = element.item.italic;\n        options.strikethrough = element.item.strikethrough;\n        data.label.setLabel(element.saneLabel, element.saneDescription, options);\n        // Keybinding\n        data.keybinding.set(element.item.keybinding);\n        // Meta\n        if (element.saneDetail) {\n            data.detail.setLabel(element.saneDetail, undefined, {\n                matches: detailHighlights,\n                title: element.saneDetail\n            });\n        }\n        // Separator\n        if (element.separator && element.separator.label) {\n            data.separator.textContent = element.separator.label;\n            data.separator.style.display = '';\n        }\n        else {\n            data.separator.style.display = 'none';\n        }\n        data.entry.classList.toggle('quick-input-list-separator-border', !!element.separator);\n        // Actions\n        data.actionBar.clear();\n        const buttons = element.item.buttons;\n        if (buttons && buttons.length) {\n            data.actionBar.push(buttons.map((button, index) => {\n                let cssClasses = button.iconClass || (button.iconPath ? getIconClass(button.iconPath) : undefined);\n                if (button.alwaysVisible) {\n                    cssClasses = cssClasses ? `${cssClasses} always-visible` : 'always-visible';\n                }\n                const action = new Action(`id-${index}`, '', cssClasses, true, () => __awaiter(this, void 0, void 0, function* () {\n                    element.fireButtonTriggered({\n                        button,\n                        item: element.item\n                    });\n                }));\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n            data.entry.classList.add('has-actions');\n        }\n        else {\n            data.entry.classList.remove('has-actions');\n        }\n    }\n    disposeElement(element, index, data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n    }\n    disposeTemplate(data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n        data.toDisposeTemplate = dispose(data.toDisposeTemplate);\n    }\n}\nListElementRenderer.ID = 'listelement';\nclass ListElementDelegate {\n    getHeight(element) {\n        return element.saneDetail ? 44 : 22;\n    }\n    getTemplateId(element) {\n        return ListElementRenderer.ID;\n    }\n}\nexport var QuickInputListFocus;\n(function (QuickInputListFocus) {\n    QuickInputListFocus[QuickInputListFocus[\"First\"] = 1] = \"First\";\n    QuickInputListFocus[QuickInputListFocus[\"Second\"] = 2] = \"Second\";\n    QuickInputListFocus[QuickInputListFocus[\"Last\"] = 3] = \"Last\";\n    QuickInputListFocus[QuickInputListFocus[\"Next\"] = 4] = \"Next\";\n    QuickInputListFocus[QuickInputListFocus[\"Previous\"] = 5] = \"Previous\";\n    QuickInputListFocus[QuickInputListFocus[\"NextPage\"] = 6] = \"NextPage\";\n    QuickInputListFocus[QuickInputListFocus[\"PreviousPage\"] = 7] = \"PreviousPage\";\n})(QuickInputListFocus || (QuickInputListFocus = {}));\nexport class QuickInputList {\n    constructor(parent, id, options) {\n        this.parent = parent;\n        this.inputElements = [];\n        this.elements = [];\n        this.elementsToIndexes = new Map();\n        this.matchOnDescription = false;\n        this.matchOnDetail = false;\n        this.matchOnLabel = true;\n        this.matchOnLabelMode = 'fuzzy';\n        this.matchOnMeta = true;\n        this.sortByLabel = true;\n        this._onChangedAllVisibleChecked = new Emitter();\n        this.onChangedAllVisibleChecked = this._onChangedAllVisibleChecked.event;\n        this._onChangedCheckedCount = new Emitter();\n        this.onChangedCheckedCount = this._onChangedCheckedCount.event;\n        this._onChangedVisibleCount = new Emitter();\n        this.onChangedVisibleCount = this._onChangedVisibleCount.event;\n        this._onChangedCheckedElements = new Emitter();\n        this.onChangedCheckedElements = this._onChangedCheckedElements.event;\n        this._onButtonTriggered = new Emitter();\n        this.onButtonTriggered = this._onButtonTriggered.event;\n        this._onKeyDown = new Emitter();\n        this.onKeyDown = this._onKeyDown.event;\n        this._onLeave = new Emitter();\n        this.onLeave = this._onLeave.event;\n        this._fireCheckedEvents = true;\n        this.elementDisposables = [];\n        this.disposables = [];\n        this.id = id;\n        this.container = dom.append(this.parent, $('.quick-input-list'));\n        const delegate = new ListElementDelegate();\n        const accessibilityProvider = new QuickInputAccessibilityProvider();\n        this.list = options.createList('QuickInput', this.container, delegate, [new ListElementRenderer()], {\n            identityProvider: { getId: element => element.saneLabel },\n            setRowLineHeight: false,\n            multipleSelectionSupport: false,\n            horizontalScrolling: false,\n            accessibilityProvider\n        });\n        this.list.getHTMLElement().id = id;\n        this.disposables.push(this.list);\n        this.disposables.push(this.list.onKeyDown(e => {\n            const event = new StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case 10 /* KeyCode.Space */:\n                    this.toggleCheckbox();\n                    break;\n                case 31 /* KeyCode.KeyA */:\n                    if (platform.isMacintosh ? e.metaKey : e.ctrlKey) {\n                        this.list.setFocus(range(this.list.length));\n                    }\n                    break;\n                case 16 /* KeyCode.UpArrow */: {\n                    const focus1 = this.list.getFocus();\n                    if (focus1.length === 1 && focus1[0] === 0) {\n                        this._onLeave.fire();\n                    }\n                    break;\n                }\n                case 18 /* KeyCode.DownArrow */: {\n                    const focus2 = this.list.getFocus();\n                    if (focus2.length === 1 && focus2[0] === this.list.length - 1) {\n                        this._onLeave.fire();\n                    }\n                    break;\n                }\n            }\n            this._onKeyDown.fire(event);\n        }));\n        this.disposables.push(this.list.onMouseDown(e => {\n            if (e.browserEvent.button !== 2) {\n                // Works around / fixes #64350.\n                e.browserEvent.preventDefault();\n            }\n        }));\n        this.disposables.push(dom.addDisposableListener(this.container, dom.EventType.CLICK, e => {\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space' on checkbox.\n                this._onLeave.fire();\n            }\n        }));\n        this.disposables.push(this.list.onMouseMiddleClick(e => {\n            this._onLeave.fire();\n        }));\n        this.disposables.push(this.list.onContextMenu(e => {\n            if (typeof e.index === 'number') {\n                e.browserEvent.preventDefault();\n                // we want to treat a context menu event as\n                // a gesture to open the item at the index\n                // since we do not have any context menu\n                // this enables for example macOS to Ctrl-\n                // click on an item to open it.\n                this.list.setSelection([e.index]);\n            }\n        }));\n        this.disposables.push(this._onChangedAllVisibleChecked, this._onChangedCheckedCount, this._onChangedVisibleCount, this._onChangedCheckedElements, this._onButtonTriggered, this._onLeave, this._onKeyDown);\n    }\n    get onDidChangeFocus() {\n        return Event.map(this.list.onDidChangeFocus, e => e.elements.map(e => e.item));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, e => ({ items: e.elements.map(e => e.item), event: e.browserEvent }));\n    }\n    get scrollTop() {\n        return this.list.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.list.scrollTop = scrollTop;\n    }\n    getAllVisibleChecked() {\n        return this.allVisibleChecked(this.elements, false);\n    }\n    allVisibleChecked(elements, whenNoneVisible = true) {\n        for (let i = 0, n = elements.length; i < n; i++) {\n            const element = elements[i];\n            if (!element.hidden) {\n                if (!element.checked) {\n                    return false;\n                }\n                else {\n                    whenNoneVisible = true;\n                }\n            }\n        }\n        return whenNoneVisible;\n    }\n    getCheckedCount() {\n        let count = 0;\n        const elements = this.elements;\n        for (let i = 0, n = elements.length; i < n; i++) {\n            if (elements[i].checked) {\n                count++;\n            }\n        }\n        return count;\n    }\n    getVisibleCount() {\n        let count = 0;\n        const elements = this.elements;\n        for (let i = 0, n = elements.length; i < n; i++) {\n            if (!elements[i].hidden) {\n                count++;\n            }\n        }\n        return count;\n    }\n    setAllVisibleChecked(checked) {\n        try {\n            this._fireCheckedEvents = false;\n            this.elements.forEach(element => {\n                if (!element.hidden) {\n                    element.checked = checked;\n                }\n            });\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    setElements(inputElements) {\n        this.elementDisposables = dispose(this.elementDisposables);\n        const fireButtonTriggered = (event) => this.fireButtonTriggered(event);\n        this.inputElements = inputElements;\n        this.elements = inputElements.reduce((result, item, index) => {\n            var _a, _b, _c;\n            if (item.type !== 'separator') {\n                const previous = index && inputElements[index - 1];\n                const saneLabel = item.label && item.label.replace(/\\r?\\n/g, ' ');\n                const saneSortLabel = parseLabelWithIcons(saneLabel).text.trim();\n                const saneMeta = item.meta && item.meta.replace(/\\r?\\n/g, ' ');\n                const saneDescription = item.description && item.description.replace(/\\r?\\n/g, ' ');\n                const saneDetail = item.detail && item.detail.replace(/\\r?\\n/g, ' ');\n                const saneAriaLabel = item.ariaLabel || [saneLabel, saneDescription, saneDetail]\n                    .map(s => getCodiconAriaLabel(s))\n                    .filter(s => !!s)\n                    .join(', ');\n                const hasCheckbox = this.parent.classList.contains('show-checkboxes');\n                result.push(new ListElement({\n                    hasCheckbox,\n                    index,\n                    item,\n                    saneLabel,\n                    saneSortLabel,\n                    saneMeta,\n                    saneAriaLabel,\n                    saneDescription,\n                    saneDetail,\n                    labelHighlights: (_a = item.highlights) === null || _a === void 0 ? void 0 : _a.label,\n                    descriptionHighlights: (_b = item.highlights) === null || _b === void 0 ? void 0 : _b.description,\n                    detailHighlights: (_c = item.highlights) === null || _c === void 0 ? void 0 : _c.detail,\n                    checked: false,\n                    separator: previous && previous.type === 'separator' ? previous : undefined,\n                    fireButtonTriggered\n                }));\n            }\n            return result;\n        }, []);\n        this.elementDisposables.push(...this.elements);\n        this.elementDisposables.push(...this.elements.map(element => element.onChecked(() => this.fireCheckedEvents())));\n        this.elementsToIndexes = this.elements.reduce((map, element, index) => {\n            map.set(element.item, index);\n            return map;\n        }, new Map());\n        this.list.splice(0, this.list.length); // Clear focus and selection first, sending the events when the list is empty.\n        this.list.splice(0, this.list.length, this.elements);\n        this._onChangedVisibleCount.fire(this.elements.length);\n    }\n    getFocusedElements() {\n        return this.list.getFocusedElements()\n            .map(e => e.item);\n    }\n    setFocusedElements(items) {\n        this.list.setFocus(items\n            .filter(item => this.elementsToIndexes.has(item))\n            .map(item => this.elementsToIndexes.get(item)));\n        if (items.length > 0) {\n            const focused = this.list.getFocus()[0];\n            if (typeof focused === 'number') {\n                this.list.reveal(focused);\n            }\n        }\n    }\n    getActiveDescendant() {\n        return this.list.getHTMLElement().getAttribute('aria-activedescendant');\n    }\n    setSelectedElements(items) {\n        this.list.setSelection(items\n            .filter(item => this.elementsToIndexes.has(item))\n            .map(item => this.elementsToIndexes.get(item)));\n    }\n    getCheckedElements() {\n        return this.elements.filter(e => e.checked)\n            .map(e => e.item);\n    }\n    setCheckedElements(items) {\n        try {\n            this._fireCheckedEvents = false;\n            const checked = new Set();\n            for (const item of items) {\n                checked.add(item);\n            }\n            for (const element of this.elements) {\n                element.checked = checked.has(element.item);\n            }\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    set enabled(value) {\n        this.list.getHTMLElement().style.pointerEvents = value ? '' : 'none';\n    }\n    focus(what) {\n        if (!this.list.length) {\n            return;\n        }\n        if (what === QuickInputListFocus.Next && this.list.getFocus()[0] === this.list.length - 1) {\n            what = QuickInputListFocus.First;\n        }\n        if (what === QuickInputListFocus.Previous && this.list.getFocus()[0] === 0) {\n            what = QuickInputListFocus.Last;\n        }\n        if (what === QuickInputListFocus.Second && this.list.length < 2) {\n            what = QuickInputListFocus.First;\n        }\n        switch (what) {\n            case QuickInputListFocus.First:\n                this.list.focusFirst();\n                break;\n            case QuickInputListFocus.Second:\n                this.list.focusNth(1);\n                break;\n            case QuickInputListFocus.Last:\n                this.list.focusLast();\n                break;\n            case QuickInputListFocus.Next:\n                this.list.focusNext();\n                break;\n            case QuickInputListFocus.Previous:\n                this.list.focusPrevious();\n                break;\n            case QuickInputListFocus.NextPage:\n                this.list.focusNextPage();\n                break;\n            case QuickInputListFocus.PreviousPage:\n                this.list.focusPreviousPage();\n                break;\n        }\n        const focused = this.list.getFocus()[0];\n        if (typeof focused === 'number') {\n            this.list.reveal(focused);\n        }\n    }\n    clearFocus() {\n        this.list.setFocus([]);\n    }\n    domFocus() {\n        this.list.domFocus();\n    }\n    layout(maxHeight) {\n        this.list.getHTMLElement().style.maxHeight = maxHeight ? `calc(${Math.floor(maxHeight / 44) * 44}px)` : '';\n        this.list.layout();\n    }\n    filter(query) {\n        if (!(this.sortByLabel || this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n            this.list.layout();\n            return false;\n        }\n        const queryWithWhitespace = query;\n        query = query.trim();\n        // Reset filtering\n        if (!query || !(this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n            this.elements.forEach(element => {\n                element.labelHighlights = undefined;\n                element.descriptionHighlights = undefined;\n                element.detailHighlights = undefined;\n                element.hidden = false;\n                const previous = element.index && this.inputElements[element.index - 1];\n                element.separator = previous && previous.type === 'separator' ? previous : undefined;\n            });\n        }\n        // Filter by value (since we support icons in labels, use $(..) aware fuzzy matching)\n        else {\n            let currentSeparator;\n            this.elements.forEach(element => {\n                let labelHighlights;\n                if (this.matchOnLabelMode === 'fuzzy') {\n                    labelHighlights = this.matchOnLabel ? withNullAsUndefined(matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneLabel))) : undefined;\n                }\n                else {\n                    labelHighlights = this.matchOnLabel ? withNullAsUndefined(matchesContiguousIconAware(queryWithWhitespace, parseLabelWithIcons(element.saneLabel))) : undefined;\n                }\n                const descriptionHighlights = this.matchOnDescription ? withNullAsUndefined(matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDescription || ''))) : undefined;\n                const detailHighlights = this.matchOnDetail ? withNullAsUndefined(matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDetail || ''))) : undefined;\n                const metaHighlights = this.matchOnMeta ? withNullAsUndefined(matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneMeta || ''))) : undefined;\n                if (labelHighlights || descriptionHighlights || detailHighlights || metaHighlights) {\n                    element.labelHighlights = labelHighlights;\n                    element.descriptionHighlights = descriptionHighlights;\n                    element.detailHighlights = detailHighlights;\n                    element.hidden = false;\n                }\n                else {\n                    element.labelHighlights = undefined;\n                    element.descriptionHighlights = undefined;\n                    element.detailHighlights = undefined;\n                    element.hidden = !element.item.alwaysShow;\n                }\n                element.separator = undefined;\n                // we can show the separator unless the list gets sorted by match\n                if (!this.sortByLabel) {\n                    const previous = element.index && this.inputElements[element.index - 1];\n                    currentSeparator = previous && previous.type === 'separator' ? previous : currentSeparator;\n                    if (currentSeparator && !element.hidden) {\n                        element.separator = currentSeparator;\n                        currentSeparator = undefined;\n                    }\n                }\n            });\n        }\n        const shownElements = this.elements.filter(element => !element.hidden);\n        // Sort by value\n        if (this.sortByLabel && query) {\n            const normalizedSearchValue = query.toLowerCase();\n            shownElements.sort((a, b) => {\n                return compareEntries(a, b, normalizedSearchValue);\n            });\n        }\n        this.elementsToIndexes = shownElements.reduce((map, element, index) => {\n            map.set(element.item, index);\n            return map;\n        }, new Map());\n        this.list.splice(0, this.list.length, shownElements);\n        this.list.setFocus([]);\n        this.list.layout();\n        this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n        this._onChangedVisibleCount.fire(shownElements.length);\n        return true;\n    }\n    toggleCheckbox() {\n        try {\n            this._fireCheckedEvents = false;\n            const elements = this.list.getFocusedElements();\n            const allChecked = this.allVisibleChecked(elements);\n            for (const element of elements) {\n                element.checked = !allChecked;\n            }\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    display(display) {\n        this.container.style.display = display ? '' : 'none';\n    }\n    isDisplayed() {\n        return this.container.style.display !== 'none';\n    }\n    dispose() {\n        this.elementDisposables = dispose(this.elementDisposables);\n        this.disposables = dispose(this.disposables);\n    }\n    fireCheckedEvents() {\n        if (this._fireCheckedEvents) {\n            this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n            this._onChangedCheckedCount.fire(this.getCheckedCount());\n            this._onChangedCheckedElements.fire(this.getCheckedElements());\n        }\n    }\n    fireButtonTriggered(event) {\n        this._onButtonTriggered.fire(event);\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n}\n__decorate([\n    memoize\n], QuickInputList.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], QuickInputList.prototype, \"onDidChangeSelection\", null);\nexport function matchesContiguousIconAware(query, target) {\n    const { text, iconOffsets } = target;\n    // Return early if there are no icon markers in the word to match against\n    if (!iconOffsets || iconOffsets.length === 0) {\n        return matchesContiguous(query, text);\n    }\n    // Trim the word to match against because it could have leading\n    // whitespace now if the word started with an icon\n    const wordToMatchAgainstWithoutIconsTrimmed = ltrim(text, ' ');\n    const leadingWhitespaceOffset = text.length - wordToMatchAgainstWithoutIconsTrimmed.length;\n    // match on value without icon\n    const matches = matchesContiguous(query, wordToMatchAgainstWithoutIconsTrimmed);\n    // Map matches back to offsets with icon and trimming\n    if (matches) {\n        for (const match of matches) {\n            const iconOffset = iconOffsets[match.start + leadingWhitespaceOffset] /* icon offsets at index */ + leadingWhitespaceOffset /* overall leading whitespace offset */;\n            match.start += iconOffset;\n            match.end += iconOffset;\n        }\n    }\n    return matches;\n}\nfunction matchesContiguous(word, wordToMatchAgainst) {\n    const matchIndex = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\n    if (matchIndex !== -1) {\n        return [{ start: matchIndex, end: matchIndex + word.length }];\n    }\n    return null;\n}\nfunction compareEntries(elementA, elementB, lookFor) {\n    const labelHighlightsA = elementA.labelHighlights || [];\n    const labelHighlightsB = elementB.labelHighlights || [];\n    if (labelHighlightsA.length && !labelHighlightsB.length) {\n        return -1;\n    }\n    if (!labelHighlightsA.length && labelHighlightsB.length) {\n        return 1;\n    }\n    if (labelHighlightsA.length === 0 && labelHighlightsB.length === 0) {\n        return 0;\n    }\n    return compareAnything(elementA.saneSortLabel, elementB.saneSortLabel, lookFor);\n}\nclass QuickInputAccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('quickInput', \"Quick Input\");\n    }\n    getAriaLabel(element) {\n        var _a;\n        return ((_a = element.separator) === null || _a === void 0 ? void 0 : _a.label)\n            ? `${element.saneAriaLabel}, ${element.separator.label}`\n            : element.saneAriaLabel;\n    }\n    getWidgetRole() {\n        return 'listbox';\n    }\n    getRole(element) {\n        return element.hasCheckbox ? 'checkbox' : 'option';\n    }\n    isChecked(element) {\n        if (!element.hasCheckbox) {\n            return undefined;\n        }\n        return {\n            value: element.checked,\n            onDidChange: element.onChecked\n        };\n    }\n}\n"],"mappings":"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"}]}