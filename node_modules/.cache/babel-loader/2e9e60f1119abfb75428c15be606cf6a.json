{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0IF9nZXQgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC50by1zdHJpbmctdGFnLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zaGlmdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi4KICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCnZhciBfX2RlY29yYXRlID0gdGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7CiAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLAogICAgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsCiAgICBkOwogIGlmICgodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKFJlZmxlY3QpKSA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09ICJmdW5jdGlvbiIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByOwogIH0KICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByOwp9Owp2YXIgX19wYXJhbSA9IHRoaXMgJiYgdGhpcy5fX3BhcmFtIHx8IGZ1bmN0aW9uIChwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHsKICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7CiAgICBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOwogIH07Cn07CnZhciBfX2F3YWl0ZXIgPSB0aGlzICYmIHRoaXMuX19hd2FpdGVyIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHsKICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICB9KTsKICB9CiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJlamVjdChlKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsKICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7CiAgICB9CiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgfSk7Cn07CmltcG9ydCB7IEludGVydmFsVGltZXIsIHRpbWVvdXQgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9hc3luYy5qcyc7CmltcG9ydCB7IERpc3Bvc2FibGUsIGRpc3Bvc2UgYXMgX2Rpc3Bvc2UsIHRvRGlzcG9zYWJsZSwgRGlzcG9zYWJsZVN0b3JlIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vbGlmZWN5Y2xlLmpzJzsKaW1wb3J0IHsgU2ltcGxlV29ya2VyQ2xpZW50LCBsb2dPbmNlV2ViV29ya2VyV2FybmluZyB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL3dvcmtlci9zaW1wbGVXb3JrZXIuanMnOwppbXBvcnQgeyBEZWZhdWx0V29ya2VyRmFjdG9yeSB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvYnJvd3Nlci9kZWZhdWx0V29ya2VyRmFjdG9yeS5qcyc7CmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvcmUvcmFuZ2UuanMnOwppbXBvcnQgeyBJTGFuZ3VhZ2VDb25maWd1cmF0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9sYW5ndWFnZXMvbGFuZ3VhZ2VDb25maWd1cmF0aW9uUmVnaXN0cnkuanMnOwppbXBvcnQgeyBFZGl0b3JTaW1wbGVXb3JrZXIgfSBmcm9tICcuLi8uLi9jb21tb24vc2VydmljZXMvZWRpdG9yU2ltcGxlV29ya2VyLmpzJzsKaW1wb3J0IHsgSU1vZGVsU2VydmljZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy9tb2RlbC5qcyc7CmltcG9ydCB7IElUZXh0UmVzb3VyY2VDb25maWd1cmF0aW9uU2VydmljZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy90ZXh0UmVzb3VyY2VDb25maWd1cmF0aW9uLmpzJzsKaW1wb3J0IHsgcmVnRXhwRmxhZ3MgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9zdHJpbmdzLmpzJzsKaW1wb3J0IHsgaXNOb25FbXB0eUFycmF5IH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vYXJyYXlzLmpzJzsKaW1wb3J0IHsgSUxvZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9sb2cvY29tbW9uL2xvZy5qcyc7CmltcG9ydCB7IFN0b3BXYXRjaCB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL3N0b3B3YXRjaC5qcyc7CmltcG9ydCB7IGNhbmNlbGVkIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vZXJyb3JzLmpzJzsKaW1wb3J0IHsgSUxhbmd1YWdlRmVhdHVyZXNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NlcnZpY2VzL2xhbmd1YWdlRmVhdHVyZXMuanMnOwovKioKICogU3RvcCBzeW5jaW5nIGEgbW9kZWwgdG8gdGhlIHdvcmtlciBpZiBpdCB3YXMgbm90IG5lZWRlZCBmb3IgMSBtaW4uCiAqLwp2YXIgU1RPUF9TWU5DX01PREVMX0RFTFRBX1RJTUVfTVMgPSA2MCAqIDEwMDA7Ci8qKgogKiBTdG9wIHRoZSB3b3JrZXIgaWYgaXQgd2FzIG5vdCBuZWVkZWQgZm9yIDUgbWluLgogKi8KdmFyIFNUT1BfV09SS0VSX0RFTFRBX1RJTUVfTVMgPSA1ICogNjAgKiAxMDAwOwpmdW5jdGlvbiBjYW5TeW5jTW9kZWwobW9kZWxTZXJ2aWNlLCByZXNvdXJjZSkgewogIHZhciBtb2RlbCA9IG1vZGVsU2VydmljZS5nZXRNb2RlbChyZXNvdXJjZSk7CiAgaWYgKCFtb2RlbCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBpZiAobW9kZWwuaXNUb29MYXJnZUZvclN5bmNpbmcoKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICByZXR1cm4gdHJ1ZTsKfQp2YXIgRWRpdG9yV29ya2VyU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Rpc3Bvc2FibGUpIHsKICBfaW5oZXJpdHMoRWRpdG9yV29ya2VyU2VydmljZSwgX0Rpc3Bvc2FibGUpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRWRpdG9yV29ya2VyU2VydmljZSk7CiAgZnVuY3Rpb24gRWRpdG9yV29ya2VyU2VydmljZShtb2RlbFNlcnZpY2UsIGNvbmZpZ3VyYXRpb25TZXJ2aWNlLCBsb2dTZXJ2aWNlLCBsYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlLCBsYW5ndWFnZUZlYXR1cmVzU2VydmljZSkgewogICAgdmFyIF90aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVkaXRvcldvcmtlclNlcnZpY2UpOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgIF90aGlzLl9tb2RlbFNlcnZpY2UgPSBtb2RlbFNlcnZpY2U7CiAgICBfdGhpcy5fd29ya2VyTWFuYWdlciA9IF90aGlzLl9yZWdpc3RlcihuZXcgV29ya2VyTWFuYWdlcihfdGhpcy5fbW9kZWxTZXJ2aWNlLCBsYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlKSk7CiAgICBfdGhpcy5fbG9nU2VydmljZSA9IGxvZ1NlcnZpY2U7CiAgICAvLyByZWdpc3RlciBkZWZhdWx0IGxpbmstcHJvdmlkZXIgYW5kIGRlZmF1bHQgY29tcGxldGlvbnMtcHJvdmlkZXIKICAgIF90aGlzLl9yZWdpc3RlcihsYW5ndWFnZUZlYXR1cmVzU2VydmljZS5saW5rUHJvdmlkZXIucmVnaXN0ZXIoewogICAgICBsYW5ndWFnZTogJyonLAogICAgICBoYXNBY2Nlc3NUb0FsbE1vZGVsczogdHJ1ZQogICAgfSwgewogICAgICBwcm92aWRlTGlua3M6IGZ1bmN0aW9uIHByb3ZpZGVMaW5rcyhtb2RlbCwgdG9rZW4pIHsKICAgICAgICBpZiAoIWNhblN5bmNNb2RlbChfdGhpcy5fbW9kZWxTZXJ2aWNlLCBtb2RlbC51cmkpKSB7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsKICAgICAgICAgICAgbGlua3M6IFtdCiAgICAgICAgICB9KTsgLy8gRmlsZSB0b28gbGFyZ2UKICAgICAgICB9CgogICAgICAgIHJldHVybiBfdGhpcy5fd29ya2VyTWFuYWdlci53aXRoV29ya2VyKCkudGhlbihmdW5jdGlvbiAoY2xpZW50KSB7CiAgICAgICAgICByZXR1cm4gY2xpZW50LmNvbXB1dGVMaW5rcyhtb2RlbC51cmkpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGxpbmtzKSB7CiAgICAgICAgICByZXR1cm4gbGlua3MgJiYgewogICAgICAgICAgICBsaW5rczogbGlua3MKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pKTsKICAgIF90aGlzLl9yZWdpc3RlcihsYW5ndWFnZUZlYXR1cmVzU2VydmljZS5jb21wbGV0aW9uUHJvdmlkZXIucmVnaXN0ZXIoJyonLCBuZXcgV29yZEJhc2VkQ29tcGxldGlvbkl0ZW1Qcm92aWRlcihfdGhpcy5fd29ya2VyTWFuYWdlciwgY29uZmlndXJhdGlvblNlcnZpY2UsIF90aGlzLl9tb2RlbFNlcnZpY2UsIGxhbmd1YWdlQ29uZmlndXJhdGlvblNlcnZpY2UpKSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIF9jcmVhdGVDbGFzcyhFZGl0b3JXb3JrZXJTZXJ2aWNlLCBbewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoRWRpdG9yV29ya2VyU2VydmljZS5wcm90b3R5cGUpLCAiZGlzcG9zZSIsIHRoaXMpLmNhbGwodGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuQ29tcHV0ZVVuaWNvZGVIaWdobGlnaHRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5Db21wdXRlVW5pY29kZUhpZ2hsaWdodHModXJpKSB7CiAgICAgIHJldHVybiBjYW5TeW5jTW9kZWwodGhpcy5fbW9kZWxTZXJ2aWNlLCB1cmkpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXB1dGVkVW5pY29kZUhpZ2hsaWdodHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXB1dGVkVW5pY29kZUhpZ2hsaWdodHModXJpLCBvcHRpb25zLCByYW5nZSkgewogICAgICByZXR1cm4gdGhpcy5fd29ya2VyTWFuYWdlci53aXRoV29ya2VyKCkudGhlbihmdW5jdGlvbiAoY2xpZW50KSB7CiAgICAgICAgcmV0dXJuIGNsaWVudC5jb21wdXRlZFVuaWNvZGVIaWdobGlnaHRzKHVyaSwgb3B0aW9ucywgcmFuZ2UpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wdXRlRGlmZiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcHV0ZURpZmYob3JpZ2luYWwsIG1vZGlmaWVkLCBpZ25vcmVUcmltV2hpdGVzcGFjZSwgbWF4Q29tcHV0YXRpb25UaW1lKSB7CiAgICAgIHJldHVybiB0aGlzLl93b3JrZXJNYW5hZ2VyLndpdGhXb3JrZXIoKS50aGVuKGZ1bmN0aW9uIChjbGllbnQpIHsKICAgICAgICByZXR1cm4gY2xpZW50LmNvbXB1dGVEaWZmKG9yaWdpbmFsLCBtb2RpZmllZCwgaWdub3JlVHJpbVdoaXRlc3BhY2UsIG1heENvbXB1dGF0aW9uVGltZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXB1dGVNb3JlTWluaW1hbEVkaXRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wdXRlTW9yZU1pbmltYWxFZGl0cyhyZXNvdXJjZSwgZWRpdHMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGlmIChpc05vbkVtcHR5QXJyYXkoZWRpdHMpKSB7CiAgICAgICAgaWYgKCFjYW5TeW5jTW9kZWwodGhpcy5fbW9kZWxTZXJ2aWNlLCByZXNvdXJjZSkpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZWRpdHMpOyAvLyBGaWxlIHRvbyBsYXJnZQogICAgICAgIH0KCiAgICAgICAgdmFyIHN3ID0gU3RvcFdhdGNoLmNyZWF0ZSh0cnVlKTsKICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fd29ya2VyTWFuYWdlci53aXRoV29ya2VyKCkudGhlbihmdW5jdGlvbiAoY2xpZW50KSB7CiAgICAgICAgICByZXR1cm4gY2xpZW50LmNvbXB1dGVNb3JlTWluaW1hbEVkaXRzKHJlc291cmNlLCBlZGl0cyk7CiAgICAgICAgfSk7CiAgICAgICAgcmVzdWx0LmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5fbG9nU2VydmljZS50cmFjZSgnRk9STUFUI2NvbXB1dGVNb3JlTWluaW1hbEVkaXRzJywgcmVzb3VyY2UudG9TdHJpbmcodHJ1ZSksIHN3LmVsYXBzZWQoKSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbcmVzdWx0LCB0aW1lb3V0KDEwMDApLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGVkaXRzOwogICAgICAgIH0pXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuTmF2aWdhdGVWYWx1ZVNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuTmF2aWdhdGVWYWx1ZVNldChyZXNvdXJjZSkgewogICAgICByZXR1cm4gY2FuU3luY01vZGVsKHRoaXMuX21vZGVsU2VydmljZSwgcmVzb3VyY2UpOwogICAgfQogIH0sIHsKICAgIGtleTogIm5hdmlnYXRlVmFsdWVTZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG5hdmlnYXRlVmFsdWVTZXQocmVzb3VyY2UsIHJhbmdlLCB1cCkgewogICAgICByZXR1cm4gdGhpcy5fd29ya2VyTWFuYWdlci53aXRoV29ya2VyKCkudGhlbihmdW5jdGlvbiAoY2xpZW50KSB7CiAgICAgICAgcmV0dXJuIGNsaWVudC5uYXZpZ2F0ZVZhbHVlU2V0KHJlc291cmNlLCByYW5nZSwgdXApOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5Db21wdXRlV29yZFJhbmdlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuQ29tcHV0ZVdvcmRSYW5nZXMocmVzb3VyY2UpIHsKICAgICAgcmV0dXJuIGNhblN5bmNNb2RlbCh0aGlzLl9tb2RlbFNlcnZpY2UsIHJlc291cmNlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wdXRlV29yZFJhbmdlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcHV0ZVdvcmRSYW5nZXMocmVzb3VyY2UsIHJhbmdlKSB7CiAgICAgIHJldHVybiB0aGlzLl93b3JrZXJNYW5hZ2VyLndpdGhXb3JrZXIoKS50aGVuKGZ1bmN0aW9uIChjbGllbnQpIHsKICAgICAgICByZXR1cm4gY2xpZW50LmNvbXB1dGVXb3JkUmFuZ2VzKHJlc291cmNlLCByYW5nZSk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKICByZXR1cm4gRWRpdG9yV29ya2VyU2VydmljZTsKfShEaXNwb3NhYmxlKTsKRWRpdG9yV29ya2VyU2VydmljZSA9IF9fZGVjb3JhdGUoW19fcGFyYW0oMCwgSU1vZGVsU2VydmljZSksIF9fcGFyYW0oMSwgSVRleHRSZXNvdXJjZUNvbmZpZ3VyYXRpb25TZXJ2aWNlKSwgX19wYXJhbSgyLCBJTG9nU2VydmljZSksIF9fcGFyYW0oMywgSUxhbmd1YWdlQ29uZmlndXJhdGlvblNlcnZpY2UpLCBfX3BhcmFtKDQsIElMYW5ndWFnZUZlYXR1cmVzU2VydmljZSldLCBFZGl0b3JXb3JrZXJTZXJ2aWNlKTsKZXhwb3J0IHsgRWRpdG9yV29ya2VyU2VydmljZSB9Owp2YXIgV29yZEJhc2VkQ29tcGxldGlvbkl0ZW1Qcm92aWRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gV29yZEJhc2VkQ29tcGxldGlvbkl0ZW1Qcm92aWRlcih3b3JrZXJNYW5hZ2VyLCBjb25maWd1cmF0aW9uU2VydmljZSwgbW9kZWxTZXJ2aWNlLCBsYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV29yZEJhc2VkQ29tcGxldGlvbkl0ZW1Qcm92aWRlcik7CiAgICB0aGlzLmxhbmd1YWdlQ29uZmlndXJhdGlvblNlcnZpY2UgPSBsYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlOwogICAgdGhpcy5fZGVidWdEaXNwbGF5TmFtZSA9ICd3b3JkYmFzZWRDb21wbGV0aW9ucyc7CiAgICB0aGlzLl93b3JrZXJNYW5hZ2VyID0gd29ya2VyTWFuYWdlcjsKICAgIHRoaXMuX2NvbmZpZ3VyYXRpb25TZXJ2aWNlID0gY29uZmlndXJhdGlvblNlcnZpY2U7CiAgICB0aGlzLl9tb2RlbFNlcnZpY2UgPSBtb2RlbFNlcnZpY2U7CiAgfQogIF9jcmVhdGVDbGFzcyhXb3JkQmFzZWRDb21wbGV0aW9uSXRlbVByb3ZpZGVyLCBbewogICAga2V5OiAicHJvdmlkZUNvbXBsZXRpb25JdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvdmlkZUNvbXBsZXRpb25JdGVtcyhtb2RlbCwgcG9zaXRpb24pIHsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbmZpZywgbW9kZWxzLCBfaXRlcmF0b3IsIF9zdGVwLCBjYW5kaWRhdGUsIHdvcmREZWZSZWdFeHAsIHdvcmQsIHJlcGxhY2UsIGluc2VydCwgY2xpZW50LCBkYXRhOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbmZpZyA9IHRoaXMuX2NvbmZpZ3VyYXRpb25TZXJ2aWNlLmdldFZhbHVlKG1vZGVsLnVyaSwgcG9zaXRpb24sICdlZGl0b3InKTsKICAgICAgICAgICAgICAgIGlmIChjb25maWcud29yZEJhc2VkU3VnZ2VzdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdW5kZWZpbmVkKTsKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBtb2RlbHMgPSBbXTsKICAgICAgICAgICAgICAgIGlmICghKGNvbmZpZy53b3JkQmFzZWRTdWdnZXN0aW9uc01vZGUgPT09ICdjdXJyZW50RG9jdW1lbnQnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBvbmx5IGN1cnJlbnQgZmlsZSBhbmQgb25seSBpZiBub3QgdG9vIGxhcmdlCiAgICAgICAgICAgICAgICBpZiAoY2FuU3luY01vZGVsKHRoaXMuX21vZGVsU2VydmljZSwgbW9kZWwudXJpKSkgewogICAgICAgICAgICAgICAgICBtb2RlbHMucHVzaChtb2RlbC51cmkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgLy8gZWl0aGVyIGFsbCBmaWxlcyBvciBmaWxlcyBvZiBzYW1lIGxhbmd1YWdlCiAgICAgICAgICAgICAgICBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLl9tb2RlbFNlcnZpY2UuZ2V0TW9kZWxzKCkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDk7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IucygpOwogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBpZiAoKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FuZGlkYXRlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICBpZiAoY2FuU3luY01vZGVsKHRoaXMuX21vZGVsU2VydmljZSwgY2FuZGlkYXRlLnVyaSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImNvbnRpbnVlIiwgMTYpOwogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlID09PSBtb2RlbCkgewogICAgICAgICAgICAgICAgICBtb2RlbHMudW5zaGlmdChjYW5kaWRhdGUudXJpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLndvcmRCYXNlZFN1Z2dlc3Rpb25zTW9kZSA9PT0gJ2FsbERvY3VtZW50cycgfHwgY2FuZGlkYXRlLmdldExhbmd1YWdlSWQoKSA9PT0gbW9kZWwuZ2V0TGFuZ3VhZ2VJZCgpKSB7CiAgICAgICAgICAgICAgICAgIG1vZGVscy5wdXNoKGNhbmRpZGF0ZS51cmkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oOSk7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShfY29udGV4dC50MCk7CiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMzsKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDIzKTsKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgaWYgKCEobW9kZWxzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHVuZGVmaW5lZCk7CiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgIHdvcmREZWZSZWdFeHAgPSB0aGlzLmxhbmd1YWdlQ29uZmlndXJhdGlvblNlcnZpY2UuZ2V0TGFuZ3VhZ2VDb25maWd1cmF0aW9uKG1vZGVsLmdldExhbmd1YWdlSWQoKSkuZ2V0V29yZERlZmluaXRpb24oKTsKICAgICAgICAgICAgICAgIHdvcmQgPSBtb2RlbC5nZXRXb3JkQXRQb3NpdGlvbihwb3NpdGlvbik7CiAgICAgICAgICAgICAgICByZXBsYWNlID0gIXdvcmQgPyBSYW5nZS5mcm9tUG9zaXRpb25zKHBvc2l0aW9uKSA6IG5ldyBSYW5nZShwb3NpdGlvbi5saW5lTnVtYmVyLCB3b3JkLnN0YXJ0Q29sdW1uLCBwb3NpdGlvbi5saW5lTnVtYmVyLCB3b3JkLmVuZENvbHVtbik7CiAgICAgICAgICAgICAgICBpbnNlcnQgPSByZXBsYWNlLnNldEVuZFBvc2l0aW9uKHBvc2l0aW9uLmxpbmVOdW1iZXIsIHBvc2l0aW9uLmNvbHVtbik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fd29ya2VyTWFuYWdlci53aXRoV29ya2VyKCk7CiAgICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgICAgIGNsaWVudCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzc7CiAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50LnRleHR1YWxTdWdnZXN0KG1vZGVscywgd29yZCA9PT0gbnVsbCB8fCB3b3JkID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3b3JkLndvcmQsIHdvcmREZWZSZWdFeHApOwogICAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB1bmRlZmluZWQpOwogICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkYXRhLmR1cmF0aW9uLAogICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uczogZGF0YS53b3Jkcy5tYXAoZnVuY3Rpb24gKHdvcmQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAga2luZDogMTggLyogbGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZC5UZXh0ICovLAogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHdvcmQsCiAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRUZXh0OiB3b3JkLAogICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0OiBpbnNlcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2U6IHJlcGxhY2UKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzZSA0MToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbOSwgMjAsIDIzLCAyNl1dKTsKICAgICAgfSkpOwogICAgfQogIH1dKTsKICByZXR1cm4gV29yZEJhc2VkQ29tcGxldGlvbkl0ZW1Qcm92aWRlcjsKfSgpOwp2YXIgV29ya2VyTWFuYWdlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Rpc3Bvc2FibGUyKSB7CiAgX2luaGVyaXRzKFdvcmtlck1hbmFnZXIsIF9EaXNwb3NhYmxlMik7CiAgdmFyIF9zdXBlcjIgPSBfY3JlYXRlU3VwZXIoV29ya2VyTWFuYWdlcik7CiAgZnVuY3Rpb24gV29ya2VyTWFuYWdlcihtb2RlbFNlcnZpY2UsIGxhbmd1YWdlQ29uZmlndXJhdGlvblNlcnZpY2UpIHsKICAgIHZhciBfdGhpczM7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV29ya2VyTWFuYWdlcik7CiAgICBfdGhpczMgPSBfc3VwZXIyLmNhbGwodGhpcyk7CiAgICBfdGhpczMubGFuZ3VhZ2VDb25maWd1cmF0aW9uU2VydmljZSA9IGxhbmd1YWdlQ29uZmlndXJhdGlvblNlcnZpY2U7CiAgICBfdGhpczMuX21vZGVsU2VydmljZSA9IG1vZGVsU2VydmljZTsKICAgIF90aGlzMy5fZWRpdG9yV29ya2VyQ2xpZW50ID0gbnVsbDsKICAgIF90aGlzMy5fbGFzdFdvcmtlclVzZWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB2YXIgc3RvcFdvcmtlckludGVydmFsID0gX3RoaXMzLl9yZWdpc3RlcihuZXcgSW50ZXJ2YWxUaW1lcigpKTsKICAgIHN0b3BXb3JrZXJJbnRlcnZhbC5jYW5jZWxBbmRTZXQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMzLl9jaGVja1N0b3BJZGxlV29ya2VyKCk7CiAgICB9LCBNYXRoLnJvdW5kKFNUT1BfV09SS0VSX0RFTFRBX1RJTUVfTVMgLyAyKSk7CiAgICBfdGhpczMuX3JlZ2lzdGVyKF90aGlzMy5fbW9kZWxTZXJ2aWNlLm9uTW9kZWxSZW1vdmVkKGZ1bmN0aW9uIChfKSB7CiAgICAgIHJldHVybiBfdGhpczMuX2NoZWNrU3RvcEVtcHR5V29ya2VyKCk7CiAgICB9KSk7CiAgICByZXR1cm4gX3RoaXMzOwogIH0KICBfY3JlYXRlQ2xhc3MoV29ya2VyTWFuYWdlciwgW3sKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIGlmICh0aGlzLl9lZGl0b3JXb3JrZXJDbGllbnQpIHsKICAgICAgICB0aGlzLl9lZGl0b3JXb3JrZXJDbGllbnQuZGlzcG9zZSgpOwogICAgICAgIHRoaXMuX2VkaXRvcldvcmtlckNsaWVudCA9IG51bGw7CiAgICAgIH0KICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoV29ya2VyTWFuYWdlci5wcm90b3R5cGUpLCAiZGlzcG9zZSIsIHRoaXMpLmNhbGwodGhpcyk7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBtb2RlbCBzZXJ2aWNlIGhhcyBubyBtb3JlIG1vZGVscyBhbmQgc3RvcCB0aGUgd29ya2VyIGlmIHRoYXQgaXMgdGhlIGNhc2UuCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJfY2hlY2tTdG9wRW1wdHlXb3JrZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jaGVja1N0b3BFbXB0eVdvcmtlcigpIHsKICAgICAgaWYgKCF0aGlzLl9lZGl0b3JXb3JrZXJDbGllbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIG1vZGVscyA9IHRoaXMuX21vZGVsU2VydmljZS5nZXRNb2RlbHMoKTsKICAgICAgaWYgKG1vZGVscy5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBUaGVyZSBhcmUgbm8gbW9yZSBtb2RlbHMgPT4gbm90aGluZyBwb3NzaWJsZSBmb3IgbWUgdG8gZG8KICAgICAgICB0aGlzLl9lZGl0b3JXb3JrZXJDbGllbnQuZGlzcG9zZSgpOwogICAgICAgIHRoaXMuX2VkaXRvcldvcmtlckNsaWVudCA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHdvcmtlciBoYXMgYmVlbiBpZGxlIGZvciBhIHdoaWxlIGFuZCB0aGVuIHN0b3AgaXQuCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJfY2hlY2tTdG9wSWRsZVdvcmtlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoZWNrU3RvcElkbGVXb3JrZXIoKSB7CiAgICAgIGlmICghdGhpcy5fZWRpdG9yV29ya2VyQ2xpZW50KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciB0aW1lU2luY2VMYXN0V29ya2VyVXNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuX2xhc3RXb3JrZXJVc2VkVGltZTsKICAgICAgaWYgKHRpbWVTaW5jZUxhc3RXb3JrZXJVc2VkVGltZSA+IFNUT1BfV09SS0VSX0RFTFRBX1RJTUVfTVMpIHsKICAgICAgICB0aGlzLl9lZGl0b3JXb3JrZXJDbGllbnQuZGlzcG9zZSgpOwogICAgICAgIHRoaXMuX2VkaXRvcldvcmtlckNsaWVudCA9IG51bGw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ3aXRoV29ya2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB3aXRoV29ya2VyKCkgewogICAgICB0aGlzLl9sYXN0V29ya2VyVXNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgaWYgKCF0aGlzLl9lZGl0b3JXb3JrZXJDbGllbnQpIHsKICAgICAgICB0aGlzLl9lZGl0b3JXb3JrZXJDbGllbnQgPSBuZXcgRWRpdG9yV29ya2VyQ2xpZW50KHRoaXMuX21vZGVsU2VydmljZSwgZmFsc2UsICdlZGl0b3JXb3JrZXJTZXJ2aWNlJywgdGhpcy5sYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2VkaXRvcldvcmtlckNsaWVudCk7CiAgICB9CiAgfV0pOwogIHJldHVybiBXb3JrZXJNYW5hZ2VyOwp9KERpc3Bvc2FibGUpOwp2YXIgRWRpdG9yTW9kZWxNYW5hZ2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRGlzcG9zYWJsZTMpIHsKICBfaW5oZXJpdHMoRWRpdG9yTW9kZWxNYW5hZ2VyLCBfRGlzcG9zYWJsZTMpOwogIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyKEVkaXRvck1vZGVsTWFuYWdlcik7CiAgZnVuY3Rpb24gRWRpdG9yTW9kZWxNYW5hZ2VyKHByb3h5LCBtb2RlbFNlcnZpY2UsIGtlZXBJZGxlTW9kZWxzKSB7CiAgICB2YXIgX3RoaXM0OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVkaXRvck1vZGVsTWFuYWdlcik7CiAgICBfdGhpczQgPSBfc3VwZXIzLmNhbGwodGhpcyk7CiAgICBfdGhpczQuX3N5bmNlZE1vZGVscyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICBfdGhpczQuX3N5bmNlZE1vZGVsc0xhc3RVc2VkVGltZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICBfdGhpczQuX3Byb3h5ID0gcHJveHk7CiAgICBfdGhpczQuX21vZGVsU2VydmljZSA9IG1vZGVsU2VydmljZTsKICAgIGlmICgha2VlcElkbGVNb2RlbHMpIHsKICAgICAgdmFyIHRpbWVyID0gbmV3IEludGVydmFsVGltZXIoKTsKICAgICAgdGltZXIuY2FuY2VsQW5kU2V0KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM0Ll9jaGVja1N0b3BNb2RlbFN5bmMoKTsKICAgICAgfSwgTWF0aC5yb3VuZChTVE9QX1NZTkNfTU9ERUxfREVMVEFfVElNRV9NUyAvIDIpKTsKICAgICAgX3RoaXM0Ll9yZWdpc3Rlcih0aW1lcik7CiAgICB9CiAgICByZXR1cm4gX3RoaXM0OwogIH0KICBfY3JlYXRlQ2xhc3MoRWRpdG9yTW9kZWxNYW5hZ2VyLCBbewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgZm9yICh2YXIgbW9kZWxVcmwgaW4gdGhpcy5fc3luY2VkTW9kZWxzKSB7CiAgICAgICAgX2Rpc3Bvc2UodGhpcy5fc3luY2VkTW9kZWxzW21vZGVsVXJsXSk7CiAgICAgIH0KICAgICAgdGhpcy5fc3luY2VkTW9kZWxzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgdGhpcy5fc3luY2VkTW9kZWxzTGFzdFVzZWRUaW1lID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoRWRpdG9yTW9kZWxNYW5hZ2VyLnByb3RvdHlwZSksICJkaXNwb3NlIiwgdGhpcykuY2FsbCh0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlbnN1cmVTeW5jZWRSZXNvdXJjZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVuc3VyZVN5bmNlZFJlc291cmNlcyhyZXNvdXJjZXMsIGZvcmNlTGFyZ2VNb2RlbHMpIHsKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXNvdXJjZXMpLAogICAgICAgIF9zdGVwMjsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHJlc291cmNlID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgdmFyIHJlc291cmNlU3RyID0gcmVzb3VyY2UudG9TdHJpbmcoKTsKICAgICAgICAgIGlmICghdGhpcy5fc3luY2VkTW9kZWxzW3Jlc291cmNlU3RyXSkgewogICAgICAgICAgICB0aGlzLl9iZWdpbk1vZGVsU3luYyhyZXNvdXJjZSwgZm9yY2VMYXJnZU1vZGVscyk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5fc3luY2VkTW9kZWxzW3Jlc291cmNlU3RyXSkgewogICAgICAgICAgICB0aGlzLl9zeW5jZWRNb2RlbHNMYXN0VXNlZFRpbWVbcmVzb3VyY2VTdHJdID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9jaGVja1N0b3BNb2RlbFN5bmMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jaGVja1N0b3BNb2RlbFN5bmMoKSB7CiAgICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB2YXIgdG9SZW1vdmUgPSBbXTsKICAgICAgZm9yICh2YXIgbW9kZWxVcmwgaW4gdGhpcy5fc3luY2VkTW9kZWxzTGFzdFVzZWRUaW1lKSB7CiAgICAgICAgdmFyIGVsYXBzZWRUaW1lID0gY3VycmVudFRpbWUgLSB0aGlzLl9zeW5jZWRNb2RlbHNMYXN0VXNlZFRpbWVbbW9kZWxVcmxdOwogICAgICAgIGlmIChlbGFwc2VkVGltZSA+IFNUT1BfU1lOQ19NT0RFTF9ERUxUQV9USU1FX01TKSB7CiAgICAgICAgICB0b1JlbW92ZS5wdXNoKG1vZGVsVXJsKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yICh2YXIgX2kgPSAwLCBfdG9SZW1vdmUgPSB0b1JlbW92ZTsgX2kgPCBfdG9SZW1vdmUubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIGUgPSBfdG9SZW1vdmVbX2ldOwogICAgICAgIHRoaXMuX3N0b3BNb2RlbFN5bmMoZSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfYmVnaW5Nb2RlbFN5bmMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9iZWdpbk1vZGVsU3luYyhyZXNvdXJjZSwgZm9yY2VMYXJnZU1vZGVscykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdmFyIG1vZGVsID0gdGhpcy5fbW9kZWxTZXJ2aWNlLmdldE1vZGVsKHJlc291cmNlKTsKICAgICAgaWYgKCFtb2RlbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIWZvcmNlTGFyZ2VNb2RlbHMgJiYgbW9kZWwuaXNUb29MYXJnZUZvclN5bmNpbmcoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgbW9kZWxVcmwgPSByZXNvdXJjZS50b1N0cmluZygpOwogICAgICB0aGlzLl9wcm94eS5hY2NlcHROZXdNb2RlbCh7CiAgICAgICAgdXJsOiBtb2RlbC51cmkudG9TdHJpbmcoKSwKICAgICAgICBsaW5lczogbW9kZWwuZ2V0TGluZXNDb250ZW50KCksCiAgICAgICAgRU9MOiBtb2RlbC5nZXRFT0woKSwKICAgICAgICB2ZXJzaW9uSWQ6IG1vZGVsLmdldFZlcnNpb25JZCgpCiAgICAgIH0pOwogICAgICB2YXIgdG9EaXNwb3NlID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpOwogICAgICB0b0Rpc3Bvc2UuYWRkKG1vZGVsLm9uRGlkQ2hhbmdlQ29udGVudChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNS5fcHJveHkuYWNjZXB0TW9kZWxDaGFuZ2VkKG1vZGVsVXJsLnRvU3RyaW5nKCksIGUpOwogICAgICB9KSk7CiAgICAgIHRvRGlzcG9zZS5hZGQobW9kZWwub25XaWxsRGlzcG9zZShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1Ll9zdG9wTW9kZWxTeW5jKG1vZGVsVXJsKTsKICAgICAgfSkpOwogICAgICB0b0Rpc3Bvc2UuYWRkKHRvRGlzcG9zYWJsZShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1Ll9wcm94eS5hY2NlcHRSZW1vdmVkTW9kZWwobW9kZWxVcmwpOwogICAgICB9KSk7CiAgICAgIHRoaXMuX3N5bmNlZE1vZGVsc1ttb2RlbFVybF0gPSB0b0Rpc3Bvc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3N0b3BNb2RlbFN5bmMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zdG9wTW9kZWxTeW5jKG1vZGVsVXJsKSB7CiAgICAgIHZhciB0b0Rpc3Bvc2UgPSB0aGlzLl9zeW5jZWRNb2RlbHNbbW9kZWxVcmxdOwogICAgICBkZWxldGUgdGhpcy5fc3luY2VkTW9kZWxzW21vZGVsVXJsXTsKICAgICAgZGVsZXRlIHRoaXMuX3N5bmNlZE1vZGVsc0xhc3RVc2VkVGltZVttb2RlbFVybF07CiAgICAgIF9kaXNwb3NlKHRvRGlzcG9zZSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBFZGl0b3JNb2RlbE1hbmFnZXI7Cn0oRGlzcG9zYWJsZSk7CnZhciBTeW5jaHJvbm91c1dvcmtlckNsaWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3luY2hyb25vdXNXb3JrZXJDbGllbnQoaW5zdGFuY2UpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTeW5jaHJvbm91c1dvcmtlckNsaWVudCk7CiAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlOwogICAgdGhpcy5fcHJveHlPYmogPSBQcm9taXNlLnJlc29sdmUodGhpcy5faW5zdGFuY2UpOwogIH0KICBfY3JlYXRlQ2xhc3MoU3luY2hyb25vdXNXb3JrZXJDbGllbnQsIFt7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICB0aGlzLl9pbnN0YW5jZS5kaXNwb3NlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UHJveHlPYmplY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFByb3h5T2JqZWN0KCkgewogICAgICByZXR1cm4gdGhpcy5fcHJveHlPYmo7CiAgICB9CiAgfV0pOwogIHJldHVybiBTeW5jaHJvbm91c1dvcmtlckNsaWVudDsKfSgpOwpleHBvcnQgdmFyIEVkaXRvcldvcmtlckhvc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEVkaXRvcldvcmtlckhvc3Qod29ya2VyQ2xpZW50KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRpdG9yV29ya2VySG9zdCk7CiAgICB0aGlzLl93b3JrZXJDbGllbnQgPSB3b3JrZXJDbGllbnQ7CiAgfQogIC8vIGZvcmVpZ24gaG9zdCByZXF1ZXN0CiAgX2NyZWF0ZUNsYXNzKEVkaXRvcldvcmtlckhvc3QsIFt7CiAgICBrZXk6ICJmaHIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZocihtZXRob2QsIGFyZ3MpIHsKICAgICAgcmV0dXJuIHRoaXMuX3dvcmtlckNsaWVudC5maHIobWV0aG9kLCBhcmdzKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEVkaXRvcldvcmtlckhvc3Q7Cn0oKTsKZXhwb3J0IHZhciBFZGl0b3JXb3JrZXJDbGllbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlNCkgewogIF9pbmhlcml0cyhFZGl0b3JXb3JrZXJDbGllbnQsIF9EaXNwb3NhYmxlNCk7CiAgdmFyIF9zdXBlcjQgPSBfY3JlYXRlU3VwZXIoRWRpdG9yV29ya2VyQ2xpZW50KTsKICBmdW5jdGlvbiBFZGl0b3JXb3JrZXJDbGllbnQobW9kZWxTZXJ2aWNlLCBrZWVwSWRsZU1vZGVscywgbGFiZWwsIGxhbmd1YWdlQ29uZmlndXJhdGlvblNlcnZpY2UpIHsKICAgIHZhciBfdGhpczY7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRpdG9yV29ya2VyQ2xpZW50KTsKICAgIF90aGlzNiA9IF9zdXBlcjQuY2FsbCh0aGlzKTsKICAgIF90aGlzNi5sYW5ndWFnZUNvbmZpZ3VyYXRpb25TZXJ2aWNlID0gbGFuZ3VhZ2VDb25maWd1cmF0aW9uU2VydmljZTsKICAgIF90aGlzNi5fZGlzcG9zZWQgPSBmYWxzZTsKICAgIF90aGlzNi5fbW9kZWxTZXJ2aWNlID0gbW9kZWxTZXJ2aWNlOwogICAgX3RoaXM2Ll9rZWVwSWRsZU1vZGVscyA9IGtlZXBJZGxlTW9kZWxzOwogICAgX3RoaXM2Ll93b3JrZXJGYWN0b3J5ID0gbmV3IERlZmF1bHRXb3JrZXJGYWN0b3J5KGxhYmVsKTsKICAgIF90aGlzNi5fd29ya2VyID0gbnVsbDsKICAgIF90aGlzNi5fbW9kZWxNYW5hZ2VyID0gbnVsbDsKICAgIHJldHVybiBfdGhpczY7CiAgfQogIC8vIGZvcmVpZ24gaG9zdCByZXF1ZXN0CiAgX2NyZWF0ZUNsYXNzKEVkaXRvcldvcmtlckNsaWVudCwgW3sKICAgIGtleTogImZociIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmhyKG1ldGhvZCwgYXJncykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vdCBpbXBsZW1lbnRlZCEiKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0T3JDcmVhdGVXb3JrZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRPckNyZWF0ZVdvcmtlcigpIHsKICAgICAgaWYgKCF0aGlzLl93b3JrZXIpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdGhpcy5fd29ya2VyID0gdGhpcy5fcmVnaXN0ZXIobmV3IFNpbXBsZVdvcmtlckNsaWVudCh0aGlzLl93b3JrZXJGYWN0b3J5LCAndnMvZWRpdG9yL2NvbW1vbi9zZXJ2aWNlcy9lZGl0b3JTaW1wbGVXb3JrZXInLCBuZXcgRWRpdG9yV29ya2VySG9zdCh0aGlzKSkpOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgbG9nT25jZVdlYldvcmtlcldhcm5pbmcoZXJyKTsKICAgICAgICAgIHRoaXMuX3dvcmtlciA9IG5ldyBTeW5jaHJvbm91c1dvcmtlckNsaWVudChuZXcgRWRpdG9yU2ltcGxlV29ya2VyKG5ldyBFZGl0b3JXb3JrZXJIb3N0KHRoaXMpLCBudWxsKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl93b3JrZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2dldFByb3h5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0UHJveHkoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy5fZ2V0T3JDcmVhdGVXb3JrZXIoKS5nZXRQcm94eU9iamVjdCgpLnRoZW4odW5kZWZpbmVkLCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgbG9nT25jZVdlYldvcmtlcldhcm5pbmcoZXJyKTsKICAgICAgICBfdGhpczcuX3dvcmtlciA9IG5ldyBTeW5jaHJvbm91c1dvcmtlckNsaWVudChuZXcgRWRpdG9yU2ltcGxlV29ya2VyKG5ldyBFZGl0b3JXb3JrZXJIb3N0KF90aGlzNyksIG51bGwpKTsKICAgICAgICByZXR1cm4gX3RoaXM3Ll9nZXRPckNyZWF0ZVdvcmtlcigpLmdldFByb3h5T2JqZWN0KCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRPckNyZWF0ZU1vZGVsTWFuYWdlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldE9yQ3JlYXRlTW9kZWxNYW5hZ2VyKHByb3h5KSB7CiAgICAgIGlmICghdGhpcy5fbW9kZWxNYW5hZ2VyKSB7CiAgICAgICAgdGhpcy5fbW9kZWxNYW5hZ2VyID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVkaXRvck1vZGVsTWFuYWdlcihwcm94eSwgdGhpcy5fbW9kZWxTZXJ2aWNlLCB0aGlzLl9rZWVwSWRsZU1vZGVscykpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9tb2RlbE1hbmFnZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3dpdGhTeW5jZWRSZXNvdXJjZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF93aXRoU3luY2VkUmVzb3VyY2VzKHJlc291cmNlcykgewogICAgICB2YXIgZm9yY2VMYXJnZU1vZGVscyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9kaXNwb3NlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGNhbmNlbGVkKCkpKTsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgdGhpcy5fZ2V0UHJveHkoKS50aGVuKGZ1bmN0aW9uIChwcm94eSkgewogICAgICAgICAgICAgICAgICBfdGhpczguX2dldE9yQ3JlYXRlTW9kZWxNYW5hZ2VyKHByb3h5KS5lbnN1cmVTeW5jZWRSZXNvdXJjZXMocmVzb3VyY2VzLCBmb3JjZUxhcmdlTW9kZWxzKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3h5OwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wdXRlZFVuaWNvZGVIaWdobGlnaHRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wdXRlZFVuaWNvZGVIaWdobGlnaHRzKHVyaSwgb3B0aW9ucywgcmFuZ2UpIHsKICAgICAgcmV0dXJuIHRoaXMuX3dpdGhTeW5jZWRSZXNvdXJjZXMoW3VyaV0pLnRoZW4oZnVuY3Rpb24gKHByb3h5KSB7CiAgICAgICAgcmV0dXJuIHByb3h5LmNvbXB1dGVVbmljb2RlSGlnaGxpZ2h0cyh1cmkudG9TdHJpbmcoKSwgb3B0aW9ucywgcmFuZ2UpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wdXRlRGlmZiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcHV0ZURpZmYob3JpZ2luYWwsIG1vZGlmaWVkLCBpZ25vcmVUcmltV2hpdGVzcGFjZSwgbWF4Q29tcHV0YXRpb25UaW1lKSB7CiAgICAgIHJldHVybiB0aGlzLl93aXRoU3luY2VkUmVzb3VyY2VzKFtvcmlnaW5hbCwgbW9kaWZpZWRdLCAvKiBmb3JjZUxhcmdlTW9kZWxzICovdHJ1ZSkudGhlbihmdW5jdGlvbiAocHJveHkpIHsKICAgICAgICByZXR1cm4gcHJveHkuY29tcHV0ZURpZmYob3JpZ2luYWwudG9TdHJpbmcoKSwgbW9kaWZpZWQudG9TdHJpbmcoKSwgaWdub3JlVHJpbVdoaXRlc3BhY2UsIG1heENvbXB1dGF0aW9uVGltZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXB1dGVNb3JlTWluaW1hbEVkaXRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wdXRlTW9yZU1pbmltYWxFZGl0cyhyZXNvdXJjZSwgZWRpdHMpIHsKICAgICAgcmV0dXJuIHRoaXMuX3dpdGhTeW5jZWRSZXNvdXJjZXMoW3Jlc291cmNlXSkudGhlbihmdW5jdGlvbiAocHJveHkpIHsKICAgICAgICByZXR1cm4gcHJveHkuY29tcHV0ZU1vcmVNaW5pbWFsRWRpdHMocmVzb3VyY2UudG9TdHJpbmcoKSwgZWRpdHMpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wdXRlTGlua3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXB1dGVMaW5rcyhyZXNvdXJjZSkgewogICAgICByZXR1cm4gdGhpcy5fd2l0aFN5bmNlZFJlc291cmNlcyhbcmVzb3VyY2VdKS50aGVuKGZ1bmN0aW9uIChwcm94eSkgewogICAgICAgIHJldHVybiBwcm94eS5jb21wdXRlTGlua3MocmVzb3VyY2UudG9TdHJpbmcoKSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInRleHR1YWxTdWdnZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0ZXh0dWFsU3VnZ2VzdChyZXNvdXJjZXMsIGxlYWRpbmdXb3JkLCB3b3JkRGVmUmVnRXhwKSB7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgcHJveHksIHdvcmREZWYsIHdvcmREZWZGbGFnczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhTeW5jZWRSZXNvdXJjZXMocmVzb3VyY2VzKTsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBwcm94eSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgd29yZERlZiA9IHdvcmREZWZSZWdFeHAuc291cmNlOwogICAgICAgICAgICAgICAgd29yZERlZkZsYWdzID0gcmVnRXhwRmxhZ3Mod29yZERlZlJlZ0V4cCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcHJveHkudGV4dHVhbFN1Z2dlc3QocmVzb3VyY2VzLm1hcChmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgICByZXR1cm4gci50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfSksIGxlYWRpbmdXb3JkLCB3b3JkRGVmLCB3b3JkRGVmRmxhZ3MpKTsKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcHV0ZVdvcmRSYW5nZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXB1dGVXb3JkUmFuZ2VzKHJlc291cmNlLCByYW5nZSkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMuX3dpdGhTeW5jZWRSZXNvdXJjZXMoW3Jlc291cmNlXSkudGhlbihmdW5jdGlvbiAocHJveHkpIHsKICAgICAgICB2YXIgbW9kZWwgPSBfdGhpczkuX21vZGVsU2VydmljZS5nZXRNb2RlbChyZXNvdXJjZSk7CiAgICAgICAgaWYgKCFtb2RlbCkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTsKICAgICAgICB9CiAgICAgICAgdmFyIHdvcmREZWZSZWdFeHAgPSBfdGhpczkubGFuZ3VhZ2VDb25maWd1cmF0aW9uU2VydmljZS5nZXRMYW5ndWFnZUNvbmZpZ3VyYXRpb24obW9kZWwuZ2V0TGFuZ3VhZ2VJZCgpKS5nZXRXb3JkRGVmaW5pdGlvbigpOwogICAgICAgIHZhciB3b3JkRGVmID0gd29yZERlZlJlZ0V4cC5zb3VyY2U7CiAgICAgICAgdmFyIHdvcmREZWZGbGFncyA9IHJlZ0V4cEZsYWdzKHdvcmREZWZSZWdFeHApOwogICAgICAgIHJldHVybiBwcm94eS5jb21wdXRlV29yZFJhbmdlcyhyZXNvdXJjZS50b1N0cmluZygpLCByYW5nZSwgd29yZERlZiwgd29yZERlZkZsYWdzKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibmF2aWdhdGVWYWx1ZVNldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmF2aWdhdGVWYWx1ZVNldChyZXNvdXJjZSwgcmFuZ2UsIHVwKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMuX3dpdGhTeW5jZWRSZXNvdXJjZXMoW3Jlc291cmNlXSkudGhlbihmdW5jdGlvbiAocHJveHkpIHsKICAgICAgICB2YXIgbW9kZWwgPSBfdGhpczEwLl9tb2RlbFNlcnZpY2UuZ2V0TW9kZWwocmVzb3VyY2UpOwogICAgICAgIGlmICghbW9kZWwpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICB2YXIgd29yZERlZlJlZ0V4cCA9IF90aGlzMTAubGFuZ3VhZ2VDb25maWd1cmF0aW9uU2VydmljZS5nZXRMYW5ndWFnZUNvbmZpZ3VyYXRpb24obW9kZWwuZ2V0TGFuZ3VhZ2VJZCgpKS5nZXRXb3JkRGVmaW5pdGlvbigpOwogICAgICAgIHZhciB3b3JkRGVmID0gd29yZERlZlJlZ0V4cC5zb3VyY2U7CiAgICAgICAgdmFyIHdvcmREZWZGbGFncyA9IHJlZ0V4cEZsYWdzKHdvcmREZWZSZWdFeHApOwogICAgICAgIHJldHVybiBwcm94eS5uYXZpZ2F0ZVZhbHVlU2V0KHJlc291cmNlLnRvU3RyaW5nKCksIHJhbmdlLCB1cCwgd29yZERlZiwgd29yZERlZkZsYWdzKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoRWRpdG9yV29ya2VyQ2xpZW50LnByb3RvdHlwZSksICJkaXNwb3NlIiwgdGhpcykuY2FsbCh0aGlzKTsKICAgICAgdGhpcy5fZGlzcG9zZWQgPSB0cnVlOwogICAgfQogIH1dKTsKICByZXR1cm4gRWRpdG9yV29ya2VyQ2xpZW50Owp9KERpc3Bvc2FibGUpOw=="},{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","IntervalTimer","timeout","Disposable","dispose","toDisposable","DisposableStore","SimpleWorkerClient","logOnceWebWorkerWarning","DefaultWorkerFactory","Range","ILanguageConfigurationService","EditorSimpleWorker","IModelService","ITextResourceConfigurationService","regExpFlags","isNonEmptyArray","ILogService","StopWatch","canceled","ILanguageFeaturesService","STOP_SYNC_MODEL_DELTA_TIME_MS","STOP_WORKER_DELTA_TIME_MS","canSyncModel","modelService","resource","model","getModel","isTooLargeForSyncing","EditorWorkerService","configurationService","logService","languageConfigurationService","languageFeaturesService","_modelService","_workerManager","_register","WorkerManager","_logService","linkProvider","register","language","hasAccessToAllModels","provideLinks","token","uri","links","withWorker","client","computeLinks","completionProvider","WordBasedCompletionItemProvider","options","range","computedUnicodeHighlights","original","modified","ignoreTrimWhitespace","maxComputationTime","computeDiff","edits","sw","create","computeMoreMinimalEdits","finally","trace","toString","elapsed","race","undefined","up","navigateValueSet","computeWordRanges","workerManager","_debugDisplayName","_configurationService","position","config","getValue","wordBasedSuggestions","models","wordBasedSuggestionsMode","push","getModels","candidate","unshift","getLanguageId","wordDefRegExp","getLanguageConfiguration","getWordDefinition","word","getWordAtPosition","replace","fromPositions","lineNumber","startColumn","endColumn","insert","setEndPosition","column","textualSuggest","data","duration","suggestions","words","map","kind","label","insertText","_editorWorkerClient","_lastWorkerUsedTime","Date","getTime","stopWorkerInterval","cancelAndSet","_checkStopIdleWorker","Math","round","onModelRemoved","_","_checkStopEmptyWorker","timeSinceLastWorkerUsedTime","EditorWorkerClient","EditorModelManager","proxy","keepIdleModels","_syncedModels","_syncedModelsLastUsedTime","_proxy","timer","_checkStopModelSync","modelUrl","resources","forceLargeModels","resourceStr","_beginModelSync","currentTime","toRemove","elapsedTime","_stopModelSync","acceptNewModel","url","lines","getLinesContent","EOL","getEOL","versionId","getVersionId","toDispose","add","onDidChangeContent","acceptModelChanged","onWillDispose","acceptRemovedModel","SynchronousWorkerClient","instance","_instance","_proxyObj","EditorWorkerHost","workerClient","_workerClient","method","args","fhr","_disposed","_keepIdleModels","_workerFactory","_worker","_modelManager","Error","err","_getOrCreateWorker","getProxyObject","_getProxy","_getOrCreateModelManager","ensureSyncedResources","_withSyncedResources","computeUnicodeHighlights","leadingWord","wordDef","source","wordDefFlags"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\nimport { Range } from '../../common/core/range.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\nimport { regExpFlags } from '../../../base/common/strings.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\n/**\n * Stop syncing a model to the worker if it was not needed for 1 min.\n */\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\n/**\n * Stop the worker if it was not needed for 5 min.\n */\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\nfunction canSyncModel(modelService, resource) {\n    const model = modelService.getModel(resource);\n    if (!model) {\n        return false;\n    }\n    if (model.isTooLargeForSyncing()) {\n        return false;\n    }\n    return true;\n}\nlet EditorWorkerService = class EditorWorkerService extends Disposable {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this._modelService = modelService;\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\n        this._logService = logService;\n        // register default link-provider and default completions-provider\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\n            provideLinks: (model, token) => {\n                if (!canSyncModel(this._modelService, model.uri)) {\n                    return Promise.resolve({ links: [] }); // File too large\n                }\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\n                    return links && { links };\n                });\n            }\n        }));\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    canComputeUnicodeHighlights(uri) {\n        return canSyncModel(this._modelService, uri);\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\n    }\n    computeDiff(original, modified, ignoreTrimWhitespace, maxComputationTime) {\n        return this._workerManager.withWorker().then(client => client.computeDiff(original, modified, ignoreTrimWhitespace, maxComputationTime));\n    }\n    computeMoreMinimalEdits(resource, edits) {\n        if (isNonEmptyArray(edits)) {\n            if (!canSyncModel(this._modelService, resource)) {\n                return Promise.resolve(edits); // File too large\n            }\n            const sw = StopWatch.create(true);\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits));\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\n            return Promise.race([result, timeout(1000).then(() => edits)]);\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    canNavigateValueSet(resource) {\n        return (canSyncModel(this._modelService, resource));\n    }\n    navigateValueSet(resource, range, up) {\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\n    }\n    canComputeWordRanges(resource) {\n        return canSyncModel(this._modelService, resource);\n    }\n    computeWordRanges(resource, range) {\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\n    }\n};\nEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], EditorWorkerService);\nexport { EditorWorkerService };\nclass WordBasedCompletionItemProvider {\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._debugDisplayName = 'wordbasedCompletions';\n        this._workerManager = workerManager;\n        this._configurationService = configurationService;\n        this._modelService = modelService;\n    }\n    provideCompletionItems(model, position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const config = this._configurationService.getValue(model.uri, position, 'editor');\n            if (!config.wordBasedSuggestions) {\n                return undefined;\n            }\n            const models = [];\n            if (config.wordBasedSuggestionsMode === 'currentDocument') {\n                // only current file and only if not too large\n                if (canSyncModel(this._modelService, model.uri)) {\n                    models.push(model.uri);\n                }\n            }\n            else {\n                // either all files or files of same language\n                for (const candidate of this._modelService.getModels()) {\n                    if (!canSyncModel(this._modelService, candidate.uri)) {\n                        continue;\n                    }\n                    if (candidate === model) {\n                        models.unshift(candidate.uri);\n                    }\n                    else if (config.wordBasedSuggestionsMode === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\n                        models.push(candidate.uri);\n                    }\n                }\n            }\n            if (models.length === 0) {\n                return undefined; // File too large, no other files\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const word = model.getWordAtPosition(position);\n            const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            const insert = replace.setEndPosition(position.lineNumber, position.column);\n            const client = yield this._workerManager.withWorker();\n            const data = yield client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\n            if (!data) {\n                return undefined;\n            }\n            return {\n                duration: data.duration,\n                suggestions: data.words.map((word) => {\n                    return {\n                        kind: 18 /* languages.CompletionItemKind.Text */,\n                        label: word,\n                        insertText: word,\n                        range: { insert, replace }\n                    };\n                }),\n            };\n        });\n    }\n}\nclass WorkerManager extends Disposable {\n    constructor(modelService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._modelService = modelService;\n        this._editorWorkerClient = null;\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        const stopWorkerInterval = this._register(new IntervalTimer());\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2));\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\n    }\n    dispose() {\n        if (this._editorWorkerClient) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n        super.dispose();\n    }\n    /**\n     * Check if the model service has no more models and stop the worker if that is the case.\n     */\n    _checkStopEmptyWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const models = this._modelService.getModels();\n        if (models.length === 0) {\n            // There are no more models => nothing possible for me to do\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    /**\n     * Check if the worker has been idle for a while and then stop it.\n     */\n    _checkStopIdleWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    withWorker() {\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        if (!this._editorWorkerClient) {\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\n        }\n        return Promise.resolve(this._editorWorkerClient);\n    }\n}\nclass EditorModelManager extends Disposable {\n    constructor(proxy, modelService, keepIdleModels) {\n        super();\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        this._proxy = proxy;\n        this._modelService = modelService;\n        if (!keepIdleModels) {\n            const timer = new IntervalTimer();\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\n            this._register(timer);\n        }\n    }\n    dispose() {\n        for (const modelUrl in this._syncedModels) {\n            dispose(this._syncedModels[modelUrl]);\n        }\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        super.dispose();\n    }\n    ensureSyncedResources(resources, forceLargeModels) {\n        for (const resource of resources) {\n            const resourceStr = resource.toString();\n            if (!this._syncedModels[resourceStr]) {\n                this._beginModelSync(resource, forceLargeModels);\n            }\n            if (this._syncedModels[resourceStr]) {\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\n            }\n        }\n    }\n    _checkStopModelSync() {\n        const currentTime = (new Date()).getTime();\n        const toRemove = [];\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\n                toRemove.push(modelUrl);\n            }\n        }\n        for (const e of toRemove) {\n            this._stopModelSync(e);\n        }\n    }\n    _beginModelSync(resource, forceLargeModels) {\n        const model = this._modelService.getModel(resource);\n        if (!model) {\n            return;\n        }\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\n            return;\n        }\n        const modelUrl = resource.toString();\n        this._proxy.acceptNewModel({\n            url: model.uri.toString(),\n            lines: model.getLinesContent(),\n            EOL: model.getEOL(),\n            versionId: model.getVersionId()\n        });\n        const toDispose = new DisposableStore();\n        toDispose.add(model.onDidChangeContent((e) => {\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\n        }));\n        toDispose.add(model.onWillDispose(() => {\n            this._stopModelSync(modelUrl);\n        }));\n        toDispose.add(toDisposable(() => {\n            this._proxy.acceptRemovedModel(modelUrl);\n        }));\n        this._syncedModels[modelUrl] = toDispose;\n    }\n    _stopModelSync(modelUrl) {\n        const toDispose = this._syncedModels[modelUrl];\n        delete this._syncedModels[modelUrl];\n        delete this._syncedModelsLastUsedTime[modelUrl];\n        dispose(toDispose);\n    }\n}\nclass SynchronousWorkerClient {\n    constructor(instance) {\n        this._instance = instance;\n        this._proxyObj = Promise.resolve(this._instance);\n    }\n    dispose() {\n        this._instance.dispose();\n    }\n    getProxyObject() {\n        return this._proxyObj;\n    }\n}\nexport class EditorWorkerHost {\n    constructor(workerClient) {\n        this._workerClient = workerClient;\n    }\n    // foreign host request\n    fhr(method, args) {\n        return this._workerClient.fhr(method, args);\n    }\n}\nexport class EditorWorkerClient extends Disposable {\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._disposed = false;\n        this._modelService = modelService;\n        this._keepIdleModels = keepIdleModels;\n        this._workerFactory = new DefaultWorkerFactory(label);\n        this._worker = null;\n        this._modelManager = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        throw new Error(`Not implemented!`);\n    }\n    _getOrCreateWorker() {\n        if (!this._worker) {\n            try {\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\n            }\n            catch (err) {\n                logOnceWebWorkerWarning(err);\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            }\n        }\n        return this._worker;\n    }\n    _getProxy() {\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            return this._getOrCreateWorker().getProxyObject();\n        });\n    }\n    _getOrCreateModelManager(proxy) {\n        if (!this._modelManager) {\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\n        }\n        return this._modelManager;\n    }\n    _withSyncedResources(resources, forceLargeModels = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._disposed) {\n                return Promise.reject(canceled());\n            }\n            return this._getProxy().then((proxy) => {\n                this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\n                return proxy;\n            });\n        });\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\n        });\n    }\n    computeDiff(original, modified, ignoreTrimWhitespace, maxComputationTime) {\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\n            return proxy.computeDiff(original.toString(), modified.toString(), ignoreTrimWhitespace, maxComputationTime);\n        });\n    }\n    computeMoreMinimalEdits(resource, edits) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits);\n        });\n    }\n    computeLinks(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeLinks(resource.toString());\n        });\n    }\n    textualSuggest(resources, leadingWord, wordDefRegExp) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const proxy = yield this._withSyncedResources(resources);\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\n        });\n    }\n    computeWordRanges(resource, range) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return Promise.resolve(null);\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\n        });\n    }\n    navigateValueSet(resource, range, up) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return null;\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n}\n"],"mappings":"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"}]}