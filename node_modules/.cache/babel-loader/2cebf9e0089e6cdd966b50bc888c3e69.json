{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/list/components.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/list/components.vue","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgQXZ1ZUVjaGFydFZ1ZSBmcm9tICdAL2VjaGFydC9wYWNrYWdlcy92dWUnOwppbXBvcnQgTW9uYWNvRWRpdG9yIGZyb20gJ0AvcGFnZS9jb21wb25lbnRzL21vbmFjby1lZGl0b3InOwppbXBvcnQgeyBnZXRMaXN0IGFzIF9nZXRMaXN0LCBnZXRPYmosIGFkZE9iaiwgZGVsT2JqLCB1cGRhdGVPYmogfSBmcm9tICdAL2FwaS9jb21wb25lbnRzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEF2dWVFY2hhcnRWdWU6IEF2dWVFY2hhcnRWdWUsCiAgICBNb25hY29FZGl0b3I6IE1vbmFjb0VkaXRvcgogIH0sCiAgcHJvcHM6IHsKICAgIG1lbnU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJveDogZmFsc2UsCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBoZWlnaHQ6IDMwMCwKICAgICAgICBsYW5ndWFnZTogJ2phdmFzY3JpcHQnLAogICAgICAgIGZvbnRTaXplOiAxMgogICAgICB9LAogICAgICBjb250ZW50OiAnJywKICAgICAgaW5kZXg6IC0xLAogICAgICBmb3JtOiB7fSwKICAgICAgdnVlT3B0aW9uOiB7fSwKICAgICAgZGF0YTogW10sCiAgICAgIG9wdGlvbjogewogICAgICAgIHRpcDogZmFsc2UsCiAgICAgICAgaGVhZGVyOiB0cnVlLAogICAgICAgIG1lbnU6IHRydWUsCiAgICAgICAgc2VsZWN0aW9uOiB0cnVlLAogICAgICAgIGRpYWxvZ1dpZHRoOiAnNzAlJywKICAgICAgICBsYWJlbFdpZHRoOiAxMDAsCiAgICAgICAgaW5kZXg6IHRydWUsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIGhlYWRlckFsaWduOiAnY2VudGVyJywKICAgICAgICBjb2x1bW46IFt7CiAgICAgICAgICBsYWJlbDogJ+e7hOS7tuWQjeensCcsCiAgICAgICAgICBwcm9wOiAnbmFtZScsCiAgICAgICAgICByb3c6IHRydWUsCiAgICAgICAgICBydWxlczogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXnu4Tku7blkI3np7AiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH1dCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICfnu4Tku7bmlbDmja4nLAogICAgICAgICAgcHJvcDogJ2NvbnRlbnQnLAogICAgICAgICAgc3BhbjogMjQsCiAgICAgICAgICBoaWRlOiB0cnVlCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICfnu4Tku7bpooTop4gnLAogICAgICAgICAgcHJvcDogJ3ZpZXcnLAogICAgICAgICAgc3BhbjogMjQsCiAgICAgICAgICBoaWRlOiB0cnVlCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5tZW51ID09PSBmYWxzZSkgewogICAgICB0aGlzLm9wdGlvbi5oZWFkZXIgPSBmYWxzZTsKICAgICAgdGhpcy5vcHRpb24ubWVudSA9IGZhbHNlOwogICAgfQogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIHNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdmFsWzBdKTsKICAgIH0sCiAgICB2YWlsZERhdGE6IGZ1bmN0aW9uIHZhaWxkRGF0YShpZCkgewogICAgICByZXR1cm4gWzAsIDEsIDJdLmluY2x1ZGVzKGlkKTsKICAgIH0sCiAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbiBiZWZvcmVPcGVuKGRvbmUsIHR5cGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHR5cGUgPT0gJ2VkaXQnKSB7CiAgICAgICAgZ2V0T2JqKHRoaXMuZm9ybS5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICBfdGhpcy5mb3JtID0gZGF0YTsKICAgICAgICAgIF90aGlzLmhhbmRsZU9wdGlvbigpOwogICAgICAgICAgZG9uZSgpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybS5jb250ZW50ID0gJyc7CiAgICAgICAgdGhpcy5oYW5kbGVPcHRpb24oKTsKICAgICAgICBkb25lKCk7CiAgICAgIH0KICAgIH0sCiAgICByb3dEZWw6IGZ1bmN0aW9uIHJvd0RlbChyb3csIGluZGV4KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBpZiAodGhpcy52YWlsZERhdGEoaW5kZXgpICYmIHRoaXMuJHdlYnNpdGUuaXNEZW1vKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLiR3ZWJzaXRlLmlzRGVtb1RpcCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBkZWxPYmoocm93LmlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgIF90aGlzMi5nZXRMaXN0KCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZU9wdGlvbjogZnVuY3Rpb24gaGFuZGxlT3B0aW9uKCkgewogICAgICB0aGlzLnZ1ZU9wdGlvbiA9IHRoaXMuZGVlcENsb25lKHRoaXMuZm9ybSk7CiAgICB9LAogICAgcm93VXBkYXRlOiBmdW5jdGlvbiByb3dVcGRhdGUocm93LCBpbmRleCwgZG9uZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgaWYgKHRoaXMudmFpbGREYXRhKGluZGV4KSAmJiB0aGlzLiR3ZWJzaXRlLmlzRGVtbykgewogICAgICAgIGRvbmUoKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuJHdlYnNpdGUuaXNEZW1vVGlwKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdXBkYXRlT2JqKHJvdykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgZG9uZSgpOwogICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKCfkv67mlLnmiJDlip8nKTsKICAgICAgICBfdGhpczMuZ2V0TGlzdCgpOwogICAgICB9KTsKICAgIH0sCiAgICByb3dTYXZlOiBmdW5jdGlvbiByb3dTYXZlKHJvdywgZG9uZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgYWRkT2JqKHJvdykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlLnN1Y2Nlc3MoJ+aWsOWinuaIkOWKnycpOwogICAgICAgIF90aGlzNC5nZXRMaXN0KCk7CiAgICAgICAgZG9uZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVWaWV3OiBmdW5jdGlvbiBoYW5kbGVWaWV3KHJvdywgaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIGdldE9iaihyb3cuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICBfdGhpczUudnVlT3B0aW9uID0gX3RoaXM1LmRlZXBDbG9uZSh7CiAgICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnQKICAgICAgICB9KTsKICAgICAgICBfdGhpczUuYm94ID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIF9nZXRMaXN0KHsKICAgICAgICBjdXJyZW50OiAxLAogICAgICAgIHNpemU6IDEwMAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgX3RoaXM2LmRhdGEgPSBkYXRhLnJlY29yZHM7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";AAkDA;AACA;AACA;AACA;EACAA;IACAC;IACAC;EACA;EACAC;IACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAT;MACAU;QACAC;QACAC;QACAf;QACAgB;QACAC;QACAC;QACAR;QACAS;QACAC;QACAC,SACA;UACAC;UACAC;UACAC;UACAC;YACAC;YACAC;YACAC;UACA;QACA,GACA;UACAN;UACAC;UACAM;UACAC;QACA,GACA;UACAR;UACAC;UACAM;UACAC;QACA;MAEA;IACA;EACA;EACAC;IACA;MACA;MACA;IACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACAC;UACA;UACA;UACA;UACAC;QACA;MACA;QACA;QACA;QACAA;MACA;IAEA;IACAC;MAAA;MACA;QACA;QACA;MACA;MACA;QACAC;QACAC;QACAvC;MACA;QACAwC;UACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACAN;QACA;QACA;MACA;MACAO;QACAP;QACA;QACA;MAEA;IACA;IACAQ;MAAA;MACAC;QACA;QACA;QACAT;MACA;IACA;IACAU;MAAA;MACAX;QACA;QACA;UACA3B;QACA;QACA;MACA;IACA;IACAuC;MAAA;MACAA;QACAC;QACAC;MACA;QACA;QACA;MACA;IACA;EACA;AACA","names":["components","AvueEchartVue","MonacoEditor","props","menu","type","default","data","box","options","height","language","fontSize","content","index","form","vueOption","option","tip","header","selection","dialogWidth","labelWidth","align","headerAlign","column","label","prop","row","rules","required","message","trigger","span","hide","created","methods","selectionChange","vaildData","beforeOpen","getObj","done","rowDel","confirmButtonText","cancelButtonText","delObj","handleOption","rowUpdate","updateObj","rowSave","addObj","handleView","getList","current","size"],"sourceRoot":"src/page/list","sources":["components.vue"],"sourcesContent":["<template>\n  <div>\n    <avue-crud ref=\"crud\"\n               :option=\"option\"\n               v-model=\"form\"\n               @row-save=\"rowSave\"\n               @row-update=\"rowUpdate\"\n               @row-del=\"rowDel\"\n               :before-open=\"beforeOpen\"\n               @selection-change=\"selectionChange\"\n               :data=\"data\">\n      <template slot-scope=\"{size,type,row,index}\"\n                slot=\"menu\">\n        <el-button :size=\"size\"\n                   icon=\"el-icon-edit\"\n                   :type=\"type\"\n                   @click=\"handleView(row,index)\">预览</el-button>\n      </template>\n      <template slot-scope=\"{}\"\n                slot=\"contentForm\">\n        <monaco-editor v-model=\"form.content\"\n                       :language=\"options.language\"\n                       :height=\"options.height\"\n                       :options=\"options\"></monaco-editor>\n        <br />\n        <el-button v-if=\"!view\"\n                   type=\"primary\"\n                   size=\"small\"\n                   icon=\"el-icon-check\"\n                   @click=\"handleOption\">运行</el-button>\n      </template>\n      <template slot-scope=\"{}\"\n                slot=\"viewForm\">\n        <avue-echart-vue :option=\"vueOption\"\n                         width=\"100%\"\n                         height=\"100%\"></avue-echart-vue>\n      </template>\n    </avue-crud>\n    <el-dialog title=\"预览组件\"\n               :visible.sync=\"box\"\n               width=\"60%\">\n      <avue-echart-vue :option=\"vueOption\"\n                       width=\"100%\"\n                       height=\"100%\"></avue-echart-vue>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport AvueEchartVue from '@/echart/packages/vue';\nimport MonacoEditor from '@/page/components/monaco-editor'\nimport { getList, getObj, addObj, delObj, updateObj } from '@/api/components'\nexport default {\n  components: {\n    AvueEchartVue,\n    MonacoEditor\n  },\n  props: {\n    menu: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data () {\n    return {\n      box: false,\n      options: {\n        height: 300,\n        language: 'javascript',\n        fontSize: 12\n      },\n      content: '',\n      index: -1,\n      form: {},\n      vueOption: {},\n      data: [],\n      option: {\n        tip: false,\n        header: true,\n        menu: true,\n        selection: true,\n        dialogWidth: '70%',\n        labelWidth: 100,\n        index: true,\n        align: 'center',\n        headerAlign: 'center',\n        column: [\n          {\n            label: '组件名称',\n            prop: 'name',\n            row: true,\n            rules: [{\n              required: true,\n              message: \"请输入组件名称\",\n              trigger: \"blur\"\n            }]\n          },\n          {\n            label: '组件数据',\n            prop: 'content',\n            span: 24,\n            hide: true,\n          },\n          {\n            label: '组件预览',\n            prop: 'view',\n            span: 24,\n            hide: true,\n          }\n        ]\n      }\n    }\n  },\n  created () {\n    if (this.menu === false) {\n      this.option.header = false\n      this.option.menu = false\n    }\n    this.getList()\n  },\n  methods: {\n    selectionChange (val) {\n      this.$emit('change', val[0])\n    },\n    vaildData (id) {\n      return [0, 1, 2].includes(id)\n    },\n    beforeOpen (done, type) {\n      if (type == 'edit') {\n        getObj(this.form.id).then(res => {\n          const data = res.data.data;\n          this.form = data\n          this.handleOption()\n          done()\n        })\n      } else {\n        this.form.content = ''\n        this.handleOption()\n        done()\n      }\n\n    },\n    rowDel (row, index) {\n      if (this.vaildData(index) && this.$website.isDemo) {\n        this.$message.error(this.$website.isDemoTip)\n        return false;\n      }\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        delObj(row.id).then(() => {\n          this.$message.success('删除成功');\n          this.getList()\n        })\n      })\n    },\n    handleOption () {\n      this.vueOption = this.deepClone(this.form)\n    },\n    rowUpdate (row, index, done) {\n      if (this.vaildData(index) && this.$website.isDemo) {\n        done();\n        this.$message.error(this.$website.isDemoTip)\n        return false;\n      }\n      updateObj(row).then(() => {\n        done();\n        this.$message.success('修改成功');\n        this.getList()\n\n      })\n    },\n    rowSave (row, done) {\n      addObj(row).then(() => {\n        this.$message.success('新增成功');\n        this.getList()\n        done();\n      })\n    },\n    handleView (row, index) {\n      getObj(row.id).then(res => {\n        const data = res.data.data;\n        this.vueOption = this.deepClone({\n          content: data.content\n        })\n        this.box = true\n      })\n    },\n    getList () {\n      getList({\n        current: 1,\n        size: 100,\n      }).then(res => {\n        const data = res.data.data;\n        this.data = data.records;\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.components {\n  &_content {\n    display: flex;\n    align-items: flex-end;\n    flex-direction: column;\n  }\n  &_left,\n  &_right {\n    width: 100%;\n  }\n}\n</style>"]}]}