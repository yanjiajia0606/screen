{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/browser/dom.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/browser/dom.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX3dyYXBSZWdFeHAgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS93cmFwUmVnRXhwLmpzIjsKaW1wb3J0IF9nZXQgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQuanMiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMuanMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRlc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBlYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KaW1wb3J0ICogYXMgYnJvd3NlciBmcm9tICcuL2Jyb3dzZXIuanMnOwppbXBvcnQgeyBCcm93c2VyRmVhdHVyZXMgfSBmcm9tICcuL2NhbklVc2UuanMnOwppbXBvcnQgeyBTdGFuZGFyZEtleWJvYXJkRXZlbnQgfSBmcm9tICcuL2tleWJvYXJkRXZlbnQuanMnOwppbXBvcnQgeyBTdGFuZGFyZE1vdXNlRXZlbnQgfSBmcm9tICcuL21vdXNlRXZlbnQuanMnOwppbXBvcnQgeyBvblVuZXhwZWN0ZWRFcnJvciB9IGZyb20gJy4uL2NvbW1vbi9lcnJvcnMuanMnOwppbXBvcnQgKiBhcyBldmVudCBmcm9tICcuLi9jb21tb24vZXZlbnQuanMnOwppbXBvcnQgKiBhcyBkb21wdXJpZnkgZnJvbSAnLi9kb21wdXJpZnkvZG9tcHVyaWZ5LmpzJzsKaW1wb3J0IHsgRGlzcG9zYWJsZSwgRGlzcG9zYWJsZVN0b3JlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICcuLi9jb21tb24vbGlmZWN5Y2xlLmpzJzsKaW1wb3J0IHsgRmlsZUFjY2VzcywgUmVtb3RlQXV0aG9yaXRpZXMgfSBmcm9tICcuLi9jb21tb24vbmV0d29yay5qcyc7CmltcG9ydCAqIGFzIHBsYXRmb3JtIGZyb20gJy4uL2NvbW1vbi9wbGF0Zm9ybS5qcyc7CmV4cG9ydCBmdW5jdGlvbiBjbGVhck5vZGUobm9kZSkgewogIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHsKICAgIG5vZGUuZmlyc3RDaGlsZC5yZW1vdmUoKTsKICB9Cn0KLyoqCiAqIEBkZXByZWNhdGVkIFVzZSBub2RlLmlzQ29ubmVjdGVkIGRpcmVjdGx5CiAqLwpleHBvcnQgZnVuY3Rpb24gaXNJbkRPTShub2RlKSB7CiAgdmFyIF9hOwogIHJldHVybiAoX2EgPSBub2RlID09PSBudWxsIHx8IG5vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5vZGUuaXNDb25uZWN0ZWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlOwp9CnZhciBEb21MaXN0ZW5lciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRG9tTGlzdGVuZXIobm9kZSwgdHlwZSwgaGFuZGxlciwgb3B0aW9ucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERvbUxpc3RlbmVyKTsKICAgIHRoaXMuX25vZGUgPSBub2RlOwogICAgdGhpcy5fdHlwZSA9IHR5cGU7CiAgICB0aGlzLl9oYW5kbGVyID0gaGFuZGxlcjsKICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IGZhbHNlOwogICAgdGhpcy5fbm9kZS5hZGRFdmVudExpc3RlbmVyKHRoaXMuX3R5cGUsIHRoaXMuX2hhbmRsZXIsIHRoaXMuX29wdGlvbnMpOwogIH0KICBfY3JlYXRlQ2xhc3MoRG9tTGlzdGVuZXIsIFt7CiAgICBrZXk6ICJkaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICBpZiAoIXRoaXMuX2hhbmRsZXIpIHsKICAgICAgICAvLyBBbHJlYWR5IGRpc3Bvc2VkCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl90eXBlLCB0aGlzLl9oYW5kbGVyLCB0aGlzLl9vcHRpb25zKTsKICAgICAgLy8gUHJldmVudCBsZWFrZXJzIGZyb20gaG9sZGluZyBvbiB0byB0aGUgZG9tIG9yIGhhbmRsZXIgZnVuYwogICAgICB0aGlzLl9ub2RlID0gbnVsbDsKICAgICAgdGhpcy5faGFuZGxlciA9IG51bGw7CiAgICB9CiAgfV0pOwogIHJldHVybiBEb21MaXN0ZW5lcjsKfSgpOwpleHBvcnQgZnVuY3Rpb24gYWRkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGUsIHR5cGUsIGhhbmRsZXIsIHVzZUNhcHR1cmVPck9wdGlvbnMpIHsKICByZXR1cm4gbmV3IERvbUxpc3RlbmVyKG5vZGUsIHR5cGUsIGhhbmRsZXIsIHVzZUNhcHR1cmVPck9wdGlvbnMpOwp9CmZ1bmN0aW9uIF93cmFwQXNTdGFuZGFyZE1vdXNlRXZlbnQoaGFuZGxlcikgewogIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIGhhbmRsZXIobmV3IFN0YW5kYXJkTW91c2VFdmVudChlKSk7CiAgfTsKfQpmdW5jdGlvbiBfd3JhcEFzU3RhbmRhcmRLZXlib2FyZEV2ZW50KGhhbmRsZXIpIHsKICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiBoYW5kbGVyKG5ldyBTdGFuZGFyZEtleWJvYXJkRXZlbnQoZSkpOwogIH07Cn0KZXhwb3J0IHZhciBhZGRTdGFuZGFyZERpc3Bvc2FibGVMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGUsIHR5cGUsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHsKICB2YXIgd3JhcEhhbmRsZXIgPSBoYW5kbGVyOwogIGlmICh0eXBlID09PSAnY2xpY2snIHx8IHR5cGUgPT09ICdtb3VzZWRvd24nKSB7CiAgICB3cmFwSGFuZGxlciA9IF93cmFwQXNTdGFuZGFyZE1vdXNlRXZlbnQoaGFuZGxlcik7CiAgfSBlbHNlIGlmICh0eXBlID09PSAna2V5ZG93bicgfHwgdHlwZSA9PT0gJ2tleXByZXNzJyB8fCB0eXBlID09PSAna2V5dXAnKSB7CiAgICB3cmFwSGFuZGxlciA9IF93cmFwQXNTdGFuZGFyZEtleWJvYXJkRXZlbnQoaGFuZGxlcik7CiAgfQogIHJldHVybiBhZGREaXNwb3NhYmxlTGlzdGVuZXIobm9kZSwgdHlwZSwgd3JhcEhhbmRsZXIsIHVzZUNhcHR1cmUpOwp9OwpleHBvcnQgdmFyIGFkZFN0YW5kYXJkRGlzcG9zYWJsZUdlbmVyaWNNb3VzZURvd25MaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGUsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHsKICB2YXIgd3JhcEhhbmRsZXIgPSBfd3JhcEFzU3RhbmRhcmRNb3VzZUV2ZW50KGhhbmRsZXIpOwogIHJldHVybiBhZGREaXNwb3NhYmxlR2VuZXJpY01vdXNlRG93bkxpc3RlbmVyKG5vZGUsIHdyYXBIYW5kbGVyLCB1c2VDYXB0dXJlKTsKfTsKZXhwb3J0IHZhciBhZGRTdGFuZGFyZERpc3Bvc2FibGVHZW5lcmljTW91c2VVcExpc3RlbmVyID0gZnVuY3Rpb24gYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXIobm9kZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSkgewogIHZhciB3cmFwSGFuZGxlciA9IF93cmFwQXNTdGFuZGFyZE1vdXNlRXZlbnQoaGFuZGxlcik7CiAgcmV0dXJuIGFkZERpc3Bvc2FibGVHZW5lcmljTW91c2VVcExpc3RlbmVyKG5vZGUsIHdyYXBIYW5kbGVyLCB1c2VDYXB0dXJlKTsKfTsKZXhwb3J0IGZ1bmN0aW9uIGFkZERpc3Bvc2FibGVHZW5lcmljTW91c2VEb3duTGlzdGVuZXIobm9kZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSkgewogIHJldHVybiBhZGREaXNwb3NhYmxlTGlzdGVuZXIobm9kZSwgcGxhdGZvcm0uaXNJT1MgJiYgQnJvd3NlckZlYXR1cmVzLnBvaW50ZXJFdmVudHMgPyBFdmVudFR5cGUuUE9JTlRFUl9ET1dOIDogRXZlbnRUeXBlLk1PVVNFX0RPV04sIGhhbmRsZXIsIHVzZUNhcHR1cmUpOwp9CmV4cG9ydCBmdW5jdGlvbiBhZGREaXNwb3NhYmxlR2VuZXJpY01vdXNlVXBMaXN0ZW5lcihub2RlLCBoYW5kbGVyLCB1c2VDYXB0dXJlKSB7CiAgcmV0dXJuIGFkZERpc3Bvc2FibGVMaXN0ZW5lcihub2RlLCBwbGF0Zm9ybS5pc0lPUyAmJiBCcm93c2VyRmVhdHVyZXMucG9pbnRlckV2ZW50cyA/IEV2ZW50VHlwZS5QT0lOVEVSX1VQIDogRXZlbnRUeXBlLk1PVVNFX1VQLCBoYW5kbGVyLCB1c2VDYXB0dXJlKTsKfQpleHBvcnQgZnVuY3Rpb24gY3JlYXRlRXZlbnRFbWl0dGVyKHRhcmdldCwgdHlwZSwgb3B0aW9ucykgewogIHZhciBkb21MaXN0ZW5lciA9IG51bGw7CiAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHsKICAgIHJldHVybiByZXN1bHQuZmlyZShlKTsKICB9OwogIHZhciBvbkZpcnN0TGlzdGVuZXJBZGQgPSBmdW5jdGlvbiBvbkZpcnN0TGlzdGVuZXJBZGQoKSB7CiAgICBpZiAoIWRvbUxpc3RlbmVyKSB7CiAgICAgIGRvbUxpc3RlbmVyID0gbmV3IERvbUxpc3RlbmVyKHRhcmdldCwgdHlwZSwgaGFuZGxlciwgb3B0aW9ucyk7CiAgICB9CiAgfTsKICB2YXIgb25MYXN0TGlzdGVuZXJSZW1vdmUgPSBmdW5jdGlvbiBvbkxhc3RMaXN0ZW5lclJlbW92ZSgpIHsKICAgIGlmIChkb21MaXN0ZW5lcikgewogICAgICBkb21MaXN0ZW5lci5kaXNwb3NlKCk7CiAgICAgIGRvbUxpc3RlbmVyID0gbnVsbDsKICAgIH0KICB9OwogIHZhciByZXN1bHQgPSBuZXcgZXZlbnQuRW1pdHRlcih7CiAgICBvbkZpcnN0TGlzdGVuZXJBZGQ6IG9uRmlyc3RMaXN0ZW5lckFkZCwKICAgIG9uTGFzdExpc3RlbmVyUmVtb3ZlOiBvbkxhc3RMaXN0ZW5lclJlbW92ZQogIH0pOwogIHJldHVybiByZXN1bHQ7Cn0KdmFyIF9hbmltYXRpb25GcmFtZSA9IG51bGw7CmZ1bmN0aW9uIGRvUmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB7CiAgaWYgKCFfYW5pbWF0aW9uRnJhbWUpIHsKICAgIHZhciBlbXVsYXRlZFJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIGVtdWxhdGVkUmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB7CiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IERhdGUoKS5nZXRUaW1lKCkpOwogICAgICB9LCAwKTsKICAgIH07CiAgICBfYW5pbWF0aW9uRnJhbWUgPSBzZWxmLnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBzZWxmLm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHNlbGYud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHNlbGYubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHNlbGYub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBlbXVsYXRlZFJlcXVlc3RBbmltYXRpb25GcmFtZTsKICB9CiAgcmV0dXJuIF9hbmltYXRpb25GcmFtZS5jYWxsKHNlbGYsIGNhbGxiYWNrKTsKfQovKioKICogU2NoZWR1bGUgYSBjYWxsYmFjayB0byBiZSBydW4gYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lLgogKiBUaGlzIGFsbG93cyBtdWx0aXBsZSBwYXJ0aWVzIHRvIHJlZ2lzdGVyIGNhbGxiYWNrcyB0aGF0IHNob3VsZCBydW4gYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lLgogKiBJZiBjdXJyZW50bHkgaW4gYW4gYW5pbWF0aW9uIGZyYW1lLCBgcnVubmVyYCB3aWxsIGJlIGV4ZWN1dGVkIGltbWVkaWF0ZWx5LgogKiBAcmV0dXJuIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgcnVubmVyIChvbmx5IGlmIGBydW5uZXJgIHdhcyBub3QgZXhlY3V0ZWQgaW1tZWRpYXRlbHkpLgogKi8KZXhwb3J0IHZhciBydW5BdFRoaXNPclNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWU7Ci8qKgogKiBTY2hlZHVsZSBhIGNhbGxiYWNrIHRvIGJlIHJ1biBhdCB0aGUgbmV4dCBhbmltYXRpb24gZnJhbWUuCiAqIFRoaXMgYWxsb3dzIG11bHRpcGxlIHBhcnRpZXMgdG8gcmVnaXN0ZXIgY2FsbGJhY2tzIHRoYXQgc2hvdWxkIHJ1biBhdCB0aGUgbmV4dCBhbmltYXRpb24gZnJhbWUuCiAqIElmIGN1cnJlbnRseSBpbiBhbiBhbmltYXRpb24gZnJhbWUsIGBydW5uZXJgIHdpbGwgYmUgZXhlY3V0ZWQgYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lLgogKiBAcmV0dXJuIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgcnVubmVyLgogKi8KZXhwb3J0IHZhciBzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lOwp2YXIgQW5pbWF0aW9uRnJhbWVRdWV1ZUl0ZW0gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEFuaW1hdGlvbkZyYW1lUXVldWVJdGVtKHJ1bm5lcikgewogICAgdmFyIHByaW9yaXR5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFuaW1hdGlvbkZyYW1lUXVldWVJdGVtKTsKICAgIHRoaXMuX3J1bm5lciA9IHJ1bm5lcjsKICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTsKICAgIHRoaXMuX2NhbmNlbGVkID0gZmFsc2U7CiAgfQogIF9jcmVhdGVDbGFzcyhBbmltYXRpb25GcmFtZVF1ZXVlSXRlbSwgW3sKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuX2NhbmNlbGVkID0gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJleGVjdXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBleGVjdXRlKCkgewogICAgICBpZiAodGhpcy5fY2FuY2VsZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICB0aGlzLl9ydW5uZXIoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIG9uVW5leHBlY3RlZEVycm9yKGUpOwogICAgICB9CiAgICB9CiAgICAvLyBTb3J0IGJ5IHByaW9yaXR5IChsYXJnZXN0IHRvIGxvd2VzdCkKICB9XSwgW3sKICAgIGtleTogInNvcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNvcnQoYSwgYikgewogICAgICByZXR1cm4gYi5wcmlvcml0eSAtIGEucHJpb3JpdHk7CiAgICB9CiAgfV0pOwogIHJldHVybiBBbmltYXRpb25GcmFtZVF1ZXVlSXRlbTsKfSgpOwooZnVuY3Rpb24gKCkgewogIC8qKgogICAqIFRoZSBydW5uZXJzIHNjaGVkdWxlZCBhdCB0aGUgbmV4dCBhbmltYXRpb24gZnJhbWUKICAgKi8KICB2YXIgTkVYVF9RVUVVRSA9IFtdOwogIC8qKgogICAqIFRoZSBydW5uZXJzIHNjaGVkdWxlZCBhdCB0aGUgY3VycmVudCBhbmltYXRpb24gZnJhbWUKICAgKi8KICB2YXIgQ1VSUkVOVF9RVUVVRSA9IG51bGw7CiAgLyoqCiAgICogQSBmbGFnIHRvIGtlZXAgdHJhY2sgaWYgdGhlIG5hdGl2ZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgd2FzIGFscmVhZHkgY2FsbGVkCiAgICovCiAgdmFyIGFuaW1GcmFtZVJlcXVlc3RlZCA9IGZhbHNlOwogIC8qKgogICAqIEEgZmxhZyB0byBpbmRpY2F0ZSBpZiBjdXJyZW50bHkgaGFuZGxpbmcgYSBuYXRpdmUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGNhbGxiYWNrCiAgICovCiAgdmFyIGluQW5pbWF0aW9uRnJhbWVSdW5uZXIgPSBmYWxzZTsKICB2YXIgYW5pbWF0aW9uRnJhbWVSdW5uZXIgPSBmdW5jdGlvbiBhbmltYXRpb25GcmFtZVJ1bm5lcigpIHsKICAgIGFuaW1GcmFtZVJlcXVlc3RlZCA9IGZhbHNlOwogICAgQ1VSUkVOVF9RVUVVRSA9IE5FWFRfUVVFVUU7CiAgICBORVhUX1FVRVVFID0gW107CiAgICBpbkFuaW1hdGlvbkZyYW1lUnVubmVyID0gdHJ1ZTsKICAgIHdoaWxlIChDVVJSRU5UX1FVRVVFLmxlbmd0aCA+IDApIHsKICAgICAgQ1VSUkVOVF9RVUVVRS5zb3J0KEFuaW1hdGlvbkZyYW1lUXVldWVJdGVtLnNvcnQpOwogICAgICB2YXIgdG9wID0gQ1VSUkVOVF9RVUVVRS5zaGlmdCgpOwogICAgICB0b3AuZXhlY3V0ZSgpOwogICAgfQogICAgaW5BbmltYXRpb25GcmFtZVJ1bm5lciA9IGZhbHNlOwogIH07CiAgc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIHNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUocnVubmVyKSB7CiAgICB2YXIgcHJpb3JpdHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgICB2YXIgaXRlbSA9IG5ldyBBbmltYXRpb25GcmFtZVF1ZXVlSXRlbShydW5uZXIsIHByaW9yaXR5KTsKICAgIE5FWFRfUVVFVUUucHVzaChpdGVtKTsKICAgIGlmICghYW5pbUZyYW1lUmVxdWVzdGVkKSB7CiAgICAgIGFuaW1GcmFtZVJlcXVlc3RlZCA9IHRydWU7CiAgICAgIGRvUmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lUnVubmVyKTsKICAgIH0KICAgIHJldHVybiBpdGVtOwogIH07CiAgcnVuQXRUaGlzT3JTY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gcnVuQXRUaGlzT3JTY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKHJ1bm5lciwgcHJpb3JpdHkpIHsKICAgIGlmIChpbkFuaW1hdGlvbkZyYW1lUnVubmVyKSB7CiAgICAgIHZhciBpdGVtID0gbmV3IEFuaW1hdGlvbkZyYW1lUXVldWVJdGVtKHJ1bm5lciwgcHJpb3JpdHkpOwogICAgICBDVVJSRU5UX1FVRVVFLnB1c2goaXRlbSk7CiAgICAgIHJldHVybiBpdGVtOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUocnVubmVyLCBwcmlvcml0eSk7CiAgICB9CiAgfTsKfSkoKTsKZXhwb3J0IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoZWwpIHsKICByZXR1cm4gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbCk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldENsaWVudEFyZWEoZWxlbWVudCkgewogIC8vIFRyeSB3aXRoIERPTSBjbGllbnRXaWR0aCAvIGNsaWVudEhlaWdodAogIGlmIChlbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5KSB7CiAgICByZXR1cm4gbmV3IERpbWVuc2lvbihlbGVtZW50LmNsaWVudFdpZHRoLCBlbGVtZW50LmNsaWVudEhlaWdodCk7CiAgfQogIC8vIElmIHZpc3VhbCB2aWV3IHBvcnQgZXhpdHMgYW5kIGl0J3Mgb24gbW9iaWxlLCBpdCBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIHdpbmRvdyBpbm5lcldpZHRoIC8gaW5uZXJIZWlnaHQsIG9yIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLyBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodAogIGlmIChwbGF0Zm9ybS5pc0lPUyAmJiB3aW5kb3cudmlzdWFsVmlld3BvcnQpIHsKICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHdpbmRvdy52aXN1YWxWaWV3cG9ydC53aWR0aCwgd2luZG93LnZpc3VhbFZpZXdwb3J0LmhlaWdodCk7CiAgfQogIC8vIFRyeSBpbm5lcldpZHRoIC8gaW5uZXJIZWlnaHQKICBpZiAod2luZG93LmlubmVyV2lkdGggJiYgd2luZG93LmlubmVySGVpZ2h0KSB7CiAgICByZXR1cm4gbmV3IERpbWVuc2lvbih3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTsKICB9CiAgLy8gVHJ5IHdpdGggZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAvIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0CiAgaWYgKGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkgewogICAgcmV0dXJuIG5ldyBEaW1lbnNpb24oZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQpOwogIH0KICAvLyBUcnkgd2l0aCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggLyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0CiAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkgewogICAgcmV0dXJuIG5ldyBEaW1lbnNpb24oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTsKICB9CiAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmlndXJlIG91dCBicm93c2VyIHdpZHRoIGFuZCBoZWlnaHQnKTsKfQp2YXIgU2l6ZVV0aWxzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTaXplVXRpbHMoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2l6ZVV0aWxzKTsKICB9CiAgX2NyZWF0ZUNsYXNzKFNpemVVdGlscywgbnVsbCwgW3sKICAgIGtleTogImNvbnZlcnRUb1BpeGVscyIsCiAgICB2YWx1ZToKICAgIC8vIEFkYXB0ZWQgZnJvbSBXaW5KUwogICAgLy8gQ29udmVydHMgYSBDU1MgcG9zaXRpb25pbmcgc3RyaW5nIGZvciB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgdG8gcGl4ZWxzLgogICAgZnVuY3Rpb24gY29udmVydFRvUGl4ZWxzKGVsZW1lbnQsIHZhbHVlKSB7CiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERpbWVuc2lvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGltZW5zaW9uKGVsZW1lbnQsIGNzc1Byb3BlcnR5TmFtZSwganNQcm9wZXJ0eU5hbWUpIHsKICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpOwogICAgICB2YXIgdmFsdWUgPSAnMCc7CiAgICAgIGlmIChjb21wdXRlZFN0eWxlKSB7CiAgICAgICAgaWYgKGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSkgewogICAgICAgICAgdmFsdWUgPSBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoY3NzUHJvcGVydHlOYW1lKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gSUU4CiAgICAgICAgICB2YWx1ZSA9IGNvbXB1dGVkU3R5bGUuZ2V0QXR0cmlidXRlKGpzUHJvcGVydHlOYW1lKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIFNpemVVdGlscy5jb252ZXJ0VG9QaXhlbHMoZWxlbWVudCwgdmFsdWUpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEJvcmRlckxlZnRXaWR0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Qm9yZGVyTGVmdFdpZHRoKGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIFNpemVVdGlscy5nZXREaW1lbnNpb24oZWxlbWVudCwgJ2JvcmRlci1sZWZ0LXdpZHRoJywgJ2JvcmRlckxlZnRXaWR0aCcpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEJvcmRlclJpZ2h0V2lkdGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEJvcmRlclJpZ2h0V2lkdGgoZWxlbWVudCkgewogICAgICByZXR1cm4gU2l6ZVV0aWxzLmdldERpbWVuc2lvbihlbGVtZW50LCAnYm9yZGVyLXJpZ2h0LXdpZHRoJywgJ2JvcmRlclJpZ2h0V2lkdGgnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRCb3JkZXJUb3BXaWR0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Qm9yZGVyVG9wV2lkdGgoZWxlbWVudCkgewogICAgICByZXR1cm4gU2l6ZVV0aWxzLmdldERpbWVuc2lvbihlbGVtZW50LCAnYm9yZGVyLXRvcC13aWR0aCcsICdib3JkZXJUb3BXaWR0aCcpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEJvcmRlckJvdHRvbVdpZHRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRCb3JkZXJCb3R0b21XaWR0aChlbGVtZW50KSB7CiAgICAgIHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdib3JkZXItYm90dG9tLXdpZHRoJywgJ2JvcmRlckJvdHRvbVdpZHRoJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UGFkZGluZ0xlZnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhZGRpbmdMZWZ0KGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIFNpemVVdGlscy5nZXREaW1lbnNpb24oZWxlbWVudCwgJ3BhZGRpbmctbGVmdCcsICdwYWRkaW5nTGVmdCcpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFBhZGRpbmdSaWdodCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFkZGluZ1JpZ2h0KGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIFNpemVVdGlscy5nZXREaW1lbnNpb24oZWxlbWVudCwgJ3BhZGRpbmctcmlnaHQnLCAncGFkZGluZ1JpZ2h0Jyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UGFkZGluZ1RvcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFkZGluZ1RvcChlbGVtZW50KSB7CiAgICAgIHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdwYWRkaW5nLXRvcCcsICdwYWRkaW5nVG9wJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UGFkZGluZ0JvdHRvbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFkZGluZ0JvdHRvbShlbGVtZW50KSB7CiAgICAgIHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdwYWRkaW5nLWJvdHRvbScsICdwYWRkaW5nQm90dG9tJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TWFyZ2luTGVmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWFyZ2luTGVmdChlbGVtZW50KSB7CiAgICAgIHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdtYXJnaW4tbGVmdCcsICdtYXJnaW5MZWZ0Jyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TWFyZ2luVG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNYXJnaW5Ub3AoZWxlbWVudCkgewogICAgICByZXR1cm4gU2l6ZVV0aWxzLmdldERpbWVuc2lvbihlbGVtZW50LCAnbWFyZ2luLXRvcCcsICdtYXJnaW5Ub3AnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRNYXJnaW5SaWdodCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWFyZ2luUmlnaHQoZWxlbWVudCkgewogICAgICByZXR1cm4gU2l6ZVV0aWxzLmdldERpbWVuc2lvbihlbGVtZW50LCAnbWFyZ2luLXJpZ2h0JywgJ21hcmdpblJpZ2h0Jyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0TWFyZ2luQm90dG9tIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNYXJnaW5Cb3R0b20oZWxlbWVudCkgewogICAgICByZXR1cm4gU2l6ZVV0aWxzLmdldERpbWVuc2lvbihlbGVtZW50LCAnbWFyZ2luLWJvdHRvbScsICdtYXJnaW5Cb3R0b20nKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFNpemVVdGlsczsKfSgpOwpleHBvcnQgdmFyIERpbWVuc2lvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRGltZW5zaW9uKHdpZHRoLCBoZWlnaHQpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEaW1lbnNpb24pOwogICAgdGhpcy53aWR0aCA9IHdpZHRoOwogICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgfQogIF9jcmVhdGVDbGFzcyhEaW1lbnNpb24sIFt7CiAgICBrZXk6ICJ3aXRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfd2l0aCgpIHsKICAgICAgdmFyIHdpZHRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLndpZHRoOwogICAgICB2YXIgaGVpZ2h0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0aGlzLmhlaWdodDsKICAgICAgaWYgKHdpZHRoICE9PSB0aGlzLndpZHRoIHx8IGhlaWdodCAhPT0gdGhpcy5oZWlnaHQpIHsKICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgfQogIH1dLCBbewogICAga2V5OiAiaXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZihvYmopID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqLmhlaWdodCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIG9iai53aWR0aCA9PT0gJ251bWJlcic7CiAgICB9CiAgfSwgewogICAga2V5OiAibGlmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbGlmdChvYmopIHsKICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIERpbWVuc2lvbikgewogICAgICAgIHJldHVybiBvYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24ob2JqLndpZHRoLCBvYmouaGVpZ2h0KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImVxdWFscyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHsKICAgICAgaWYgKGEgPT09IGIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoIWEgfHwgIWIpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIGEud2lkdGggPT09IGIud2lkdGggJiYgYS5oZWlnaHQgPT09IGIuaGVpZ2h0OwogICAgfQogIH1dKTsKICByZXR1cm4gRGltZW5zaW9uOwp9KCk7CkRpbWVuc2lvbi5Ob25lID0gbmV3IERpbWVuc2lvbigwLCAwKTsKZXhwb3J0IGZ1bmN0aW9uIGdldFRvcExlZnRPZmZzZXQoZWxlbWVudCkgewogIC8vIEFkYXB0ZWQgZnJvbSBXaW5KUy5VdGlsaXRpZXMuZ2V0UG9zaXRpb24KICAvLyBhbmQgYWRkZWQgYm9yZGVycyB0byB0aGUgbWl4CiAgdmFyIG9mZnNldFBhcmVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50OwogIHZhciB0b3AgPSBlbGVtZW50Lm9mZnNldFRvcDsKICB2YXIgbGVmdCA9IGVsZW1lbnQub2Zmc2V0TGVmdDsKICB3aGlsZSAoKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpICE9PSBudWxsICYmIGVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHkgJiYgZWxlbWVudCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICB0b3AgLT0gZWxlbWVudC5zY3JvbGxUb3A7CiAgICB2YXIgYyA9IGlzU2hhZG93Um9vdChlbGVtZW50KSA/IG51bGwgOiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpOwogICAgaWYgKGMpIHsKICAgICAgbGVmdCAtPSBjLmRpcmVjdGlvbiAhPT0gJ3J0bCcgPyBlbGVtZW50LnNjcm9sbExlZnQgOiAtZWxlbWVudC5zY3JvbGxMZWZ0OwogICAgfQogICAgaWYgKGVsZW1lbnQgPT09IG9mZnNldFBhcmVudCkgewogICAgICBsZWZ0ICs9IFNpemVVdGlscy5nZXRCb3JkZXJMZWZ0V2lkdGgoZWxlbWVudCk7CiAgICAgIHRvcCArPSBTaXplVXRpbHMuZ2V0Qm9yZGVyVG9wV2lkdGgoZWxlbWVudCk7CiAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcDsKICAgICAgbGVmdCArPSBlbGVtZW50Lm9mZnNldExlZnQ7CiAgICAgIG9mZnNldFBhcmVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50OwogICAgfQogIH0KICByZXR1cm4gewogICAgbGVmdDogbGVmdCwKICAgIHRvcDogdG9wCiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gc2l6ZShlbGVtZW50LCB3aWR0aCwgaGVpZ2h0KSB7CiAgaWYgKHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicpIHsKICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSAiIi5jb25jYXQod2lkdGgsICJweCIpOwogIH0KICBpZiAodHlwZW9mIGhlaWdodCA9PT0gJ251bWJlcicpIHsKICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gIiIuY29uY2F0KGhlaWdodCwgInB4Iik7CiAgfQp9Ci8qKgogKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiBhIGRvbSBub2RlIHJlbGF0aXZlIHRvIHRoZSBlbnRpcmUgcGFnZS4KICovCmV4cG9ydCBmdW5jdGlvbiBnZXREb21Ob2RlUGFnZVBvc2l0aW9uKGRvbU5vZGUpIHsKICB2YXIgYmIgPSBkb21Ob2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogIHJldHVybiB7CiAgICBsZWZ0OiBiYi5sZWZ0ICsgU3RhbmRhcmRXaW5kb3cuc2Nyb2xsWCwKICAgIHRvcDogYmIudG9wICsgU3RhbmRhcmRXaW5kb3cuc2Nyb2xsWSwKICAgIHdpZHRoOiBiYi53aWR0aCwKICAgIGhlaWdodDogYmIuaGVpZ2h0CiAgfTsKfQovKioKICogUmV0dXJucyB0aGUgZWZmZWN0aXZlIHpvb20gb24gYSBnaXZlbiBlbGVtZW50IGJlZm9yZSB3aW5kb3cgem9vbSBsZXZlbCBpcyBhcHBsaWVkCiAqLwpleHBvcnQgZnVuY3Rpb24gZ2V0RG9tTm9kZVpvb21MZXZlbChkb21Ob2RlKSB7CiAgdmFyIHRlc3RFbGVtZW50ID0gZG9tTm9kZTsKICB2YXIgem9vbSA9IDEuMDsKICBkbyB7CiAgICB2YXIgZWxlbWVudFpvb21MZXZlbCA9IGdldENvbXB1dGVkU3R5bGUodGVzdEVsZW1lbnQpLnpvb207CiAgICBpZiAoZWxlbWVudFpvb21MZXZlbCAhPT0gbnVsbCAmJiBlbGVtZW50Wm9vbUxldmVsICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudFpvb21MZXZlbCAhPT0gJzEnKSB7CiAgICAgIHpvb20gKj0gZWxlbWVudFpvb21MZXZlbDsKICAgIH0KICAgIHRlc3RFbGVtZW50ID0gdGVzdEVsZW1lbnQucGFyZW50RWxlbWVudDsKICB9IHdoaWxlICh0ZXN0RWxlbWVudCAhPT0gbnVsbCAmJiB0ZXN0RWxlbWVudCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICByZXR1cm4gem9vbTsKfQpleHBvcnQgdmFyIFN0YW5kYXJkV2luZG93ID0gbmV3ICggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBfY2xhc3MoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2NsYXNzKTsKICB9CiAgX2NyZWF0ZUNsYXNzKF9jbGFzcywgW3sKICAgIGtleTogInNjcm9sbFgiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0eXBlb2Ygd2luZG93LnNjcm9sbFggPT09ICdudW1iZXInKSB7CiAgICAgICAgLy8gbW9kZXJuIGJyb3dzZXJzCiAgICAgICAgcmV0dXJuIHdpbmRvdy5zY3JvbGxYOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNjcm9sbFkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0eXBlb2Ygd2luZG93LnNjcm9sbFkgPT09ICdudW1iZXInKSB7CiAgICAgICAgLy8gbW9kZXJuIGJyb3dzZXJzCiAgICAgICAgcmV0dXJuIHdpbmRvdy5zY3JvbGxZOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgIH0KICAgIH0KICB9XSk7CiAgcmV0dXJuIF9jbGFzczsKfSgpKSgpOwovLyBBZGFwdGVkIGZyb20gV2luSlMKLy8gR2V0cyB0aGUgd2lkdGggb2YgdGhlIGVsZW1lbnQsIGluY2x1ZGluZyBtYXJnaW5zLgpleHBvcnQgZnVuY3Rpb24gZ2V0VG90YWxXaWR0aChlbGVtZW50KSB7CiAgdmFyIG1hcmdpbiA9IFNpemVVdGlscy5nZXRNYXJnaW5MZWZ0KGVsZW1lbnQpICsgU2l6ZVV0aWxzLmdldE1hcmdpblJpZ2h0KGVsZW1lbnQpOwogIHJldHVybiBlbGVtZW50Lm9mZnNldFdpZHRoICsgbWFyZ2luOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50V2lkdGgoZWxlbWVudCkgewogIHZhciBib3JkZXIgPSBTaXplVXRpbHMuZ2V0Qm9yZGVyTGVmdFdpZHRoKGVsZW1lbnQpICsgU2l6ZVV0aWxzLmdldEJvcmRlclJpZ2h0V2lkdGgoZWxlbWVudCk7CiAgdmFyIHBhZGRpbmcgPSBTaXplVXRpbHMuZ2V0UGFkZGluZ0xlZnQoZWxlbWVudCkgKyBTaXplVXRpbHMuZ2V0UGFkZGluZ1JpZ2h0KGVsZW1lbnQpOwogIHJldHVybiBlbGVtZW50Lm9mZnNldFdpZHRoIC0gYm9yZGVyIC0gcGFkZGluZzsKfQovLyBBZGFwdGVkIGZyb20gV2luSlMKLy8gR2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBjb250ZW50IG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gVGhlIGNvbnRlbnQgaGVpZ2h0IGRvZXMgbm90IGluY2x1ZGUgYm9yZGVycyBvciBwYWRkaW5nLgpleHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudEhlaWdodChlbGVtZW50KSB7CiAgdmFyIGJvcmRlciA9IFNpemVVdGlscy5nZXRCb3JkZXJUb3BXaWR0aChlbGVtZW50KSArIFNpemVVdGlscy5nZXRCb3JkZXJCb3R0b21XaWR0aChlbGVtZW50KTsKICB2YXIgcGFkZGluZyA9IFNpemVVdGlscy5nZXRQYWRkaW5nVG9wKGVsZW1lbnQpICsgU2l6ZVV0aWxzLmdldFBhZGRpbmdCb3R0b20oZWxlbWVudCk7CiAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gYm9yZGVyIC0gcGFkZGluZzsKfQovLyBBZGFwdGVkIGZyb20gV2luSlMKLy8gR2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBlbGVtZW50LCBpbmNsdWRpbmcgaXRzIG1hcmdpbnMuCmV4cG9ydCBmdW5jdGlvbiBnZXRUb3RhbEhlaWdodChlbGVtZW50KSB7CiAgdmFyIG1hcmdpbiA9IFNpemVVdGlscy5nZXRNYXJnaW5Ub3AoZWxlbWVudCkgKyBTaXplVXRpbHMuZ2V0TWFyZ2luQm90dG9tKGVsZW1lbnQpOwogIHJldHVybiBlbGVtZW50Lm9mZnNldEhlaWdodCArIG1hcmdpbjsKfQovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmV4cG9ydCBmdW5jdGlvbiBpc0FuY2VzdG9yKHRlc3RDaGlsZCwgdGVzdEFuY2VzdG9yKSB7CiAgd2hpbGUgKHRlc3RDaGlsZCkgewogICAgaWYgKHRlc3RDaGlsZCA9PT0gdGVzdEFuY2VzdG9yKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgdGVzdENoaWxkID0gdGVzdENoaWxkLnBhcmVudE5vZGU7CiAgfQogIHJldHVybiBmYWxzZTsKfQpleHBvcnQgZnVuY3Rpb24gZmluZFBhcmVudFdpdGhDbGFzcyhub2RlLCBjbGF6eiwgc3RvcEF0Q2xhenpPck5vZGUpIHsKICB3aGlsZSAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSBub2RlLkVMRU1FTlRfTk9ERSkgewogICAgaWYgKG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXp6KSkgewogICAgICByZXR1cm4gbm9kZTsKICAgIH0KICAgIGlmIChzdG9wQXRDbGF6ek9yTm9kZSkgewogICAgICBpZiAodHlwZW9mIHN0b3BBdENsYXp6T3JOb2RlID09PSAnc3RyaW5nJykgewogICAgICAgIGlmIChub2RlLmNsYXNzTGlzdC5jb250YWlucyhzdG9wQXRDbGF6ek9yTm9kZSkpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobm9kZSA9PT0gc3RvcEF0Q2xhenpPck5vZGUpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTsKICB9CiAgcmV0dXJuIG51bGw7Cn0KZXhwb3J0IGZ1bmN0aW9uIGhhc1BhcmVudFdpdGhDbGFzcyhub2RlLCBjbGF6eiwgc3RvcEF0Q2xhenpPck5vZGUpIHsKICByZXR1cm4gISFmaW5kUGFyZW50V2l0aENsYXNzKG5vZGUsIGNsYXp6LCBzdG9wQXRDbGF6ek9yTm9kZSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlzU2hhZG93Um9vdChub2RlKSB7CiAgcmV0dXJuIG5vZGUgJiYgISFub2RlLmhvc3QgJiYgISFub2RlLm1vZGU7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlzSW5TaGFkb3dET00oZG9tTm9kZSkgewogIHJldHVybiAhIWdldFNoYWRvd1Jvb3QoZG9tTm9kZSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldFNoYWRvd1Jvb3QoZG9tTm9kZSkgewogIHdoaWxlIChkb21Ob2RlLnBhcmVudE5vZGUpIHsKICAgIGlmIChkb21Ob2RlID09PSBkb2N1bWVudC5ib2R5KSB7CiAgICAgIC8vIHJlYWNoZWQgdGhlIGJvZHkKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBkb21Ob2RlID0gZG9tTm9kZS5wYXJlbnROb2RlOwogIH0KICByZXR1cm4gaXNTaGFkb3dSb290KGRvbU5vZGUpID8gZG9tTm9kZSA6IG51bGw7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZUVsZW1lbnQoKSB7CiAgdmFyIHJlc3VsdCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgd2hpbGUgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC5zaGFkb3dSb290KSB7CiAgICByZXN1bHQgPSByZXN1bHQuc2hhZG93Um9vdC5hY3RpdmVFbGVtZW50OwogIH0KICByZXR1cm4gcmVzdWx0Owp9CmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHlsZVNoZWV0KCkgewogIHZhciBjb250YWluZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07CiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJzsKICBzdHlsZS5tZWRpYSA9ICdzY3JlZW4nOwogIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzdHlsZSk7CiAgcmV0dXJuIHN0eWxlOwp9CnZhciBfc2hhcmVkU3R5bGVTaGVldCA9IG51bGw7CmZ1bmN0aW9uIGdldFNoYXJlZFN0eWxlU2hlZXQoKSB7CiAgaWYgKCFfc2hhcmVkU3R5bGVTaGVldCkgewogICAgX3NoYXJlZFN0eWxlU2hlZXQgPSBjcmVhdGVTdHlsZVNoZWV0KCk7CiAgfQogIHJldHVybiBfc2hhcmVkU3R5bGVTaGVldDsKfQpmdW5jdGlvbiBnZXREeW5hbWljU3R5bGVTaGVldFJ1bGVzKHN0eWxlKSB7CiAgdmFyIF9hLCBfYjsKICBpZiAoKF9hID0gc3R5bGUgPT09IG51bGwgfHwgc3R5bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0eWxlLnNoZWV0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucnVsZXMpIHsKICAgIC8vIENocm9tZSwgSUUKICAgIHJldHVybiBzdHlsZS5zaGVldC5ydWxlczsKICB9CiAgaWYgKChfYiA9IHN0eWxlID09PSBudWxsIHx8IHN0eWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdHlsZS5zaGVldCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNzc1J1bGVzKSB7CiAgICAvLyBGRgogICAgcmV0dXJuIHN0eWxlLnNoZWV0LmNzc1J1bGVzOwogIH0KICByZXR1cm4gW107Cn0KZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNTU1J1bGUoc2VsZWN0b3IsIGNzc1RleHQpIHsKICB2YXIgc3R5bGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGdldFNoYXJlZFN0eWxlU2hlZXQoKTsKICBpZiAoIXN0eWxlIHx8ICFjc3NUZXh0KSB7CiAgICByZXR1cm47CiAgfQogIHN0eWxlLnNoZWV0Lmluc2VydFJ1bGUoc2VsZWN0b3IgKyAneycgKyBjc3NUZXh0ICsgJ30nLCAwKTsKfQpleHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ1NTUnVsZXNDb250YWluaW5nU2VsZWN0b3IocnVsZU5hbWUpIHsKICB2YXIgc3R5bGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGdldFNoYXJlZFN0eWxlU2hlZXQoKTsKICBpZiAoIXN0eWxlKSB7CiAgICByZXR1cm47CiAgfQogIHZhciBydWxlcyA9IGdldER5bmFtaWNTdHlsZVNoZWV0UnVsZXMoc3R5bGUpOwogIHZhciB0b0RlbGV0ZSA9IFtdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBydWxlID0gcnVsZXNbaV07CiAgICBpZiAocnVsZS5zZWxlY3RvclRleHQuaW5kZXhPZihydWxlTmFtZSkgIT09IC0xKSB7CiAgICAgIHRvRGVsZXRlLnB1c2goaSk7CiAgICB9CiAgfQogIGZvciAodmFyIF9pID0gdG9EZWxldGUubGVuZ3RoIC0gMTsgX2kgPj0gMDsgX2ktLSkgewogICAgc3R5bGUuc2hlZXQuZGVsZXRlUnVsZSh0b0RlbGV0ZVtfaV0pOwogIH0KfQpleHBvcnQgZnVuY3Rpb24gaXNIVE1MRWxlbWVudChvKSB7CiAgaWYgKCh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKEhUTUxFbGVtZW50KSkgPT09ICdvYmplY3QnKSB7CiAgICByZXR1cm4gbyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50OwogIH0KICByZXR1cm4gbyAmJiBfdHlwZW9mKG8pID09PSAnb2JqZWN0JyAmJiBvLm5vZGVUeXBlID09PSAxICYmIHR5cGVvZiBvLm5vZGVOYW1lID09PSAnc3RyaW5nJzsKfQpleHBvcnQgdmFyIEV2ZW50VHlwZSA9IHsKICAvLyBNb3VzZQogIENMSUNLOiAnY2xpY2snLAogIEFVWENMSUNLOiAnYXV4Y2xpY2snLAogIERCTENMSUNLOiAnZGJsY2xpY2snLAogIE1PVVNFX1VQOiAnbW91c2V1cCcsCiAgTU9VU0VfRE9XTjogJ21vdXNlZG93bicsCiAgTU9VU0VfT1ZFUjogJ21vdXNlb3ZlcicsCiAgTU9VU0VfTU9WRTogJ21vdXNlbW92ZScsCiAgTU9VU0VfT1VUOiAnbW91c2VvdXQnLAogIE1PVVNFX0VOVEVSOiAnbW91c2VlbnRlcicsCiAgTU9VU0VfTEVBVkU6ICdtb3VzZWxlYXZlJywKICBNT1VTRV9XSEVFTDogJ3doZWVsJywKICBQT0lOVEVSX1VQOiAncG9pbnRlcnVwJywKICBQT0lOVEVSX0RPV046ICdwb2ludGVyZG93bicsCiAgUE9JTlRFUl9NT1ZFOiAncG9pbnRlcm1vdmUnLAogIFBPSU5URVJfTEVBVkU6ICdwb2ludGVybGVhdmUnLAogIENPTlRFWFRfTUVOVTogJ2NvbnRleHRtZW51JywKICBXSEVFTDogJ3doZWVsJywKICAvLyBLZXlib2FyZAogIEtFWV9ET1dOOiAna2V5ZG93bicsCiAgS0VZX1BSRVNTOiAna2V5cHJlc3MnLAogIEtFWV9VUDogJ2tleXVwJywKICAvLyBIVE1MIERvY3VtZW50CiAgTE9BRDogJ2xvYWQnLAogIEJFRk9SRV9VTkxPQUQ6ICdiZWZvcmV1bmxvYWQnLAogIFVOTE9BRDogJ3VubG9hZCcsCiAgUEFHRV9TSE9XOiAncGFnZXNob3cnLAogIFBBR0VfSElERTogJ3BhZ2VoaWRlJywKICBBQk9SVDogJ2Fib3J0JywKICBFUlJPUjogJ2Vycm9yJywKICBSRVNJWkU6ICdyZXNpemUnLAogIFNDUk9MTDogJ3Njcm9sbCcsCiAgRlVMTFNDUkVFTl9DSEFOR0U6ICdmdWxsc2NyZWVuY2hhbmdlJywKICBXS19GVUxMU0NSRUVOX0NIQU5HRTogJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLAogIC8vIEZvcm0KICBTRUxFQ1Q6ICdzZWxlY3QnLAogIENIQU5HRTogJ2NoYW5nZScsCiAgU1VCTUlUOiAnc3VibWl0JywKICBSRVNFVDogJ3Jlc2V0JywKICBGT0NVUzogJ2ZvY3VzJywKICBGT0NVU19JTjogJ2ZvY3VzaW4nLAogIEZPQ1VTX09VVDogJ2ZvY3Vzb3V0JywKICBCTFVSOiAnYmx1cicsCiAgSU5QVVQ6ICdpbnB1dCcsCiAgLy8gTG9jYWwgU3RvcmFnZQogIFNUT1JBR0U6ICdzdG9yYWdlJywKICAvLyBEcmFnCiAgRFJBR19TVEFSVDogJ2RyYWdzdGFydCcsCiAgRFJBRzogJ2RyYWcnLAogIERSQUdfRU5URVI6ICdkcmFnZW50ZXInLAogIERSQUdfTEVBVkU6ICdkcmFnbGVhdmUnLAogIERSQUdfT1ZFUjogJ2RyYWdvdmVyJywKICBEUk9QOiAnZHJvcCcsCiAgRFJBR19FTkQ6ICdkcmFnZW5kJywKICAvLyBBbmltYXRpb24KICBBTklNQVRJT05fU1RBUlQ6IGJyb3dzZXIuaXNXZWJLaXQgPyAnd2Via2l0QW5pbWF0aW9uU3RhcnQnIDogJ2FuaW1hdGlvbnN0YXJ0JywKICBBTklNQVRJT05fRU5EOiBicm93c2VyLmlzV2ViS2l0ID8gJ3dlYmtpdEFuaW1hdGlvbkVuZCcgOiAnYW5pbWF0aW9uZW5kJywKICBBTklNQVRJT05fSVRFUkFUSU9OOiBicm93c2VyLmlzV2ViS2l0ID8gJ3dlYmtpdEFuaW1hdGlvbkl0ZXJhdGlvbicgOiAnYW5pbWF0aW9uaXRlcmF0aW9uJwp9OwpleHBvcnQgdmFyIEV2ZW50SGVscGVyID0gewogIHN0b3A6IGZ1bmN0aW9uIHN0b3AoZSwgY2FuY2VsQnViYmxlKSB7CiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9IGVsc2UgewogICAgICAvLyBJRTgKICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgfQogICAgaWYgKGNhbmNlbEJ1YmJsZSkgewogICAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIHsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIElFOAogICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0KfTsKZXhwb3J0IGZ1bmN0aW9uIHNhdmVQYXJlbnRzU2Nyb2xsVG9wKG5vZGUpIHsKICB2YXIgciA9IFtdOwogIGZvciAodmFyIGkgPSAwOyBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IG5vZGUuRUxFTUVOVF9OT0RFOyBpKyspIHsKICAgIHJbaV0gPSBub2RlLnNjcm9sbFRvcDsKICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CiAgfQogIHJldHVybiByOwp9CmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlUGFyZW50c1Njcm9sbFRvcChub2RlLCBzdGF0ZSkgewogIGZvciAodmFyIGkgPSAwOyBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IG5vZGUuRUxFTUVOVF9OT0RFOyBpKyspIHsKICAgIGlmIChub2RlLnNjcm9sbFRvcCAhPT0gc3RhdGVbaV0pIHsKICAgICAgbm9kZS5zY3JvbGxUb3AgPSBzdGF0ZVtpXTsKICAgIH0KICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CiAgfQp9CnZhciBGb2N1c1RyYWNrZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlKSB7CiAgX2luaGVyaXRzKEZvY3VzVHJhY2tlciwgX0Rpc3Bvc2FibGUpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRm9jdXNUcmFja2VyKTsKICBmdW5jdGlvbiBGb2N1c1RyYWNrZXIoZWxlbWVudCkgewogICAgdmFyIF90aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvY3VzVHJhY2tlcik7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgX3RoaXMuX29uRGlkRm9jdXMgPSBfdGhpcy5fcmVnaXN0ZXIobmV3IGV2ZW50LkVtaXR0ZXIoKSk7CiAgICBfdGhpcy5vbkRpZEZvY3VzID0gX3RoaXMuX29uRGlkRm9jdXMuZXZlbnQ7CiAgICBfdGhpcy5fb25EaWRCbHVyID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBldmVudC5FbWl0dGVyKCkpOwogICAgX3RoaXMub25EaWRCbHVyID0gX3RoaXMuX29uRGlkQmx1ci5ldmVudDsKICAgIHZhciBoYXNGb2N1cyA9IEZvY3VzVHJhY2tlci5oYXNGb2N1c1dpdGhpbihlbGVtZW50KTsKICAgIHZhciBsb29zaW5nRm9jdXMgPSBmYWxzZTsKICAgIHZhciBvbkZvY3VzID0gZnVuY3Rpb24gb25Gb2N1cygpIHsKICAgICAgbG9vc2luZ0ZvY3VzID0gZmFsc2U7CiAgICAgIGlmICghaGFzRm9jdXMpIHsKICAgICAgICBoYXNGb2N1cyA9IHRydWU7CiAgICAgICAgX3RoaXMuX29uRGlkRm9jdXMuZmlyZSgpOwogICAgICB9CiAgICB9OwogICAgdmFyIG9uQmx1ciA9IGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgaWYgKGhhc0ZvY3VzKSB7CiAgICAgICAgbG9vc2luZ0ZvY3VzID0gdHJ1ZTsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAobG9vc2luZ0ZvY3VzKSB7CiAgICAgICAgICAgIGxvb3NpbmdGb2N1cyA9IGZhbHNlOwogICAgICAgICAgICBoYXNGb2N1cyA9IGZhbHNlOwogICAgICAgICAgICBfdGhpcy5fb25EaWRCbHVyLmZpcmUoKTsKICAgICAgICAgIH0KICAgICAgICB9LCAwKTsKICAgICAgfQogICAgfTsKICAgIF90aGlzLl9yZWZyZXNoU3RhdGVIYW5kbGVyID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgY3VycmVudE5vZGVIYXNGb2N1cyA9IEZvY3VzVHJhY2tlci5oYXNGb2N1c1dpdGhpbihlbGVtZW50KTsKICAgICAgaWYgKGN1cnJlbnROb2RlSGFzRm9jdXMgIT09IGhhc0ZvY3VzKSB7CiAgICAgICAgaWYgKGhhc0ZvY3VzKSB7CiAgICAgICAgICBvbkJsdXIoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb25Gb2N1cygpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIF90aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIoZWxlbWVudCwgRXZlbnRUeXBlLkZPQ1VTLCBvbkZvY3VzLCB0cnVlKSk7CiAgICBfdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGVsZW1lbnQsIEV2ZW50VHlwZS5CTFVSLCBvbkJsdXIsIHRydWUpKTsKICAgIF90aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIoZWxlbWVudCwgRXZlbnRUeXBlLkZPQ1VTX0lOLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5fcmVmcmVzaFN0YXRlSGFuZGxlcigpOwogICAgfSkpOwogICAgX3RoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcihlbGVtZW50LCBFdmVudFR5cGUuRk9DVVNfT1VULCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5fcmVmcmVzaFN0YXRlSGFuZGxlcigpOwogICAgfSkpOwogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoRm9jdXNUcmFja2VyLCBudWxsLCBbewogICAga2V5OiAiaGFzRm9jdXNXaXRoaW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc0ZvY3VzV2l0aGluKGVsZW1lbnQpIHsKICAgICAgdmFyIHNoYWRvd1Jvb3QgPSBnZXRTaGFkb3dSb290KGVsZW1lbnQpOwogICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IHNoYWRvd1Jvb3QgPyBzaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQgOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwogICAgICByZXR1cm4gaXNBbmNlc3RvcihhY3RpdmVFbGVtZW50LCBlbGVtZW50KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEZvY3VzVHJhY2tlcjsKfShEaXNwb3NhYmxlKTsKZXhwb3J0IGZ1bmN0aW9uIHRyYWNrRm9jdXMoZWxlbWVudCkgewogIHJldHVybiBuZXcgRm9jdXNUcmFja2VyKGVsZW1lbnQpOwp9CmV4cG9ydCBmdW5jdGlvbiBhcHBlbmQocGFyZW50KSB7CiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNoaWxkcmVuID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgIGNoaWxkcmVuW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTsKICB9CiAgcGFyZW50LmFwcGVuZC5hcHBseShwYXJlbnQsIGNoaWxkcmVuKTsKICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIHR5cGVvZiBjaGlsZHJlblswXSAhPT0gJ3N0cmluZycpIHsKICAgIHJldHVybiBjaGlsZHJlblswXTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIHByZXBlbmQocGFyZW50LCBjaGlsZCkgewogIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHBhcmVudC5maXJzdENoaWxkKTsKICByZXR1cm4gY2hpbGQ7Cn0KLyoqCiAqIFJlbW92ZXMgYWxsIGNoaWxkcmVuIGZyb20gYHBhcmVudGAgYW5kIGFwcGVuZHMgYGNoaWxkcmVuYAogKi8KZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KHBhcmVudCkgewogIHBhcmVudC5pbm5lclRleHQgPSAnJzsKICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNoaWxkcmVuID0gbmV3IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHsKICAgIGNoaWxkcmVuW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdOwogIH0KICBhcHBlbmQuYXBwbHkodm9pZCAwLCBbcGFyZW50XS5jb25jYXQoY2hpbGRyZW4pKTsKfQp2YXIgU0VMRUNUT1JfUkVHRVggPSAvKFtcd1wtXSspPygjKFtcd1wtXSspKT8oKFwuKFtcd1wtXSspKSopLzsKZXhwb3J0IHZhciBOYW1lc3BhY2U7CihmdW5jdGlvbiAoTmFtZXNwYWNlKSB7CiAgTmFtZXNwYWNlWyJIVE1MIl0gPSAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI7CiAgTmFtZXNwYWNlWyJTVkciXSA9ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI7Cn0pKE5hbWVzcGFjZSB8fCAoTmFtZXNwYWNlID0ge30pKTsKZnVuY3Rpb24gXyQobmFtZXNwYWNlLCBkZXNjcmlwdGlvbiwgYXR0cnMpIHsKICB2YXIgX3Jlc3VsdDsKICB2YXIgbWF0Y2ggPSBTRUxFQ1RPUl9SRUdFWC5leGVjKGRlc2NyaXB0aW9uKTsKICBpZiAoIW1hdGNoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCB1c2Ugb2YgZW1tZXQnKTsKICB9CiAgYXR0cnMgPSBPYmplY3QuYXNzaWduKHt9LCBhdHRycyB8fCB7fSk7CiAgdmFyIHRhZ05hbWUgPSBtYXRjaFsxXSB8fCAnZGl2JzsKICB2YXIgcmVzdWx0OwogIGlmIChuYW1lc3BhY2UgIT09IE5hbWVzcGFjZS5IVE1MKSB7CiAgICByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCB0YWdOYW1lKTsKICB9IGVsc2UgewogICAgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICB9CiAgaWYgKG1hdGNoWzNdKSB7CiAgICByZXN1bHQuaWQgPSBtYXRjaFszXTsKICB9CiAgaWYgKG1hdGNoWzRdKSB7CiAgICByZXN1bHQuY2xhc3NOYW1lID0gbWF0Y2hbNF0ucmVwbGFjZSgvXC4vZywgJyAnKS50cmltKCk7CiAgfQogIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICB2YXIgdmFsdWUgPSBhdHRyc1tuYW1lXTsKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICgvXm9uXHcrJC8udGVzdChuYW1lKSkgewogICAgICByZXN1bHRbbmFtZV0gPSB2YWx1ZTsKICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3NlbGVjdGVkJykgewogICAgICBpZiAodmFsdWUpIHsKICAgICAgICByZXN1bHQuc2V0QXR0cmlidXRlKG5hbWUsICd0cnVlJyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpOwogICAgfQogIH0pOwogIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgY2hpbGRyZW4gPSBuZXcgQXJyYXkoX2xlbjMgPiAzID8gX2xlbjMgLSAzIDogMCksIF9rZXkzID0gMzsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykgewogICAgY2hpbGRyZW5bX2tleTMgLSAzXSA9IGFyZ3VtZW50c1tfa2V5M107CiAgfQogIChfcmVzdWx0ID0gcmVzdWx0KS5hcHBlbmQuYXBwbHkoX3Jlc3VsdCwgY2hpbGRyZW4pOwogIHJldHVybiByZXN1bHQ7Cn0KZXhwb3J0IGZ1bmN0aW9uICQoZGVzY3JpcHRpb24sIGF0dHJzKSB7CiAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBjaGlsZHJlbiA9IG5ldyBBcnJheShfbGVuNCA+IDIgPyBfbGVuNCAtIDIgOiAwKSwgX2tleTQgPSAyOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7CiAgICBjaGlsZHJlbltfa2V5NCAtIDJdID0gYXJndW1lbnRzW19rZXk0XTsKICB9CiAgcmV0dXJuIF8kLmFwcGx5KHZvaWQgMCwgW05hbWVzcGFjZS5IVE1MLCBkZXNjcmlwdGlvbiwgYXR0cnNdLmNvbmNhdChjaGlsZHJlbikpOwp9CiQuU1ZHID0gZnVuY3Rpb24gKGRlc2NyaXB0aW9uLCBhdHRycykgewogIGZvciAodmFyIF9sZW41ID0gYXJndW1lbnRzLmxlbmd0aCwgY2hpbGRyZW4gPSBuZXcgQXJyYXkoX2xlbjUgPiAyID8gX2xlbjUgLSAyIDogMCksIF9rZXk1ID0gMjsgX2tleTUgPCBfbGVuNTsgX2tleTUrKykgewogICAgY2hpbGRyZW5bX2tleTUgLSAyXSA9IGFyZ3VtZW50c1tfa2V5NV07CiAgfQogIHJldHVybiBfJC5hcHBseSh2b2lkIDAsIFtOYW1lc3BhY2UuU1ZHLCBkZXNjcmlwdGlvbiwgYXR0cnNdLmNvbmNhdChjaGlsZHJlbikpOwp9OwpleHBvcnQgZnVuY3Rpb24gc2hvdygpIHsKICBmb3IgKHZhciBfbGVuNiA9IGFyZ3VtZW50cy5sZW5ndGgsIGVsZW1lbnRzID0gbmV3IEFycmF5KF9sZW42KSwgX2tleTYgPSAwOyBfa2V5NiA8IF9sZW42OyBfa2V5NisrKSB7CiAgICBlbGVtZW50c1tfa2V5Nl0gPSBhcmd1bWVudHNbX2tleTZdOwogIH0KICBmb3IgKHZhciBfaTIgPSAwLCBfZWxlbWVudHMgPSBlbGVtZW50czsgX2kyIDwgX2VsZW1lbnRzLmxlbmd0aDsgX2kyKyspIHsKICAgIHZhciBlbGVtZW50ID0gX2VsZW1lbnRzW19pMl07CiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpOwogIH0KfQpleHBvcnQgZnVuY3Rpb24gaGlkZSgpIHsKICBmb3IgKHZhciBfbGVuNyA9IGFyZ3VtZW50cy5sZW5ndGgsIGVsZW1lbnRzID0gbmV3IEFycmF5KF9sZW43KSwgX2tleTcgPSAwOyBfa2V5NyA8IF9sZW43OyBfa2V5NysrKSB7CiAgICBlbGVtZW50c1tfa2V5N10gPSBhcmd1bWVudHNbX2tleTddOwogIH0KICBmb3IgKHZhciBfaTMgPSAwLCBfZWxlbWVudHMyID0gZWxlbWVudHM7IF9pMyA8IF9lbGVtZW50czIubGVuZ3RoOyBfaTMrKykgewogICAgdmFyIGVsZW1lbnQgPSBfZWxlbWVudHMyW19pM107CiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOwogIH0KfQpleHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnKSB7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyksIDApOwp9Ci8qKgogKiBGaW5kIGEgdmFsdWUgdXNhYmxlIGZvciBhIGRvbSBub2RlIHNpemUgc3VjaCB0aGF0IHRoZSBsaWtlbGlob29kIHRoYXQgaXQgd291bGQgYmUKICogZGlzcGxheWVkIHdpdGggY29uc3RhbnQgc2NyZWVuIHBpeGVscyBzaXplIGlzIGFzIGhpZ2ggYXMgcG9zc2libGUuCiAqCiAqIGUuZy4gV2Ugd291bGQgZGVzaXJlIGZvciB0aGUgY3Vyc29ycyB0byBiZSAycHggKENTUyBweCkgd2lkZS4gVW5kZXIgYSBkZXZpY2VQaXhlbFJhdGlvCiAqIG9mIDEuMjUsIHRoZSBjdXJzb3Igd2lsbCBiZSAyLjUgc2NyZWVuIHBpeGVscyB3aWRlLiBEZXBlbmRpbmcgb24gaG93IHRoZSBkb20gbm9kZSBhbGlnbnMvInNuYXBzIgogKiB3aXRoIHRoZSBzY3JlZW4gcGl4ZWxzLCBpdCB3aWxsIHNvbWV0aW1lcyBiZSByZW5kZXJlZCB3aXRoIDIgc2NyZWVuIHBpeGVscywgYW5kIHNvbWV0aW1lcyB3aXRoIDMgc2NyZWVuIHBpeGVscy4KICovCmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlU2NyZWVuQXdhcmVTaXplKGNzc1B4KSB7CiAgdmFyIHNjcmVlblB4ID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gKiBjc3NQeDsKICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihzY3JlZW5QeCkpIC8gd2luZG93LmRldmljZVBpeGVsUmF0aW87Cn0KLyoqCiAqIE9wZW4gc2FmZWx5IGEgbmV3IHdpbmRvdy4gVGhpcyBpcyB0aGUgYmVzdCB3YXkgdG8gZG8gc28sIGJ1dCB5b3UgY2Fubm90IHRlbGwKICogaWYgdGhlIHdpbmRvdyB3YXMgb3BlbmVkIG9yIGlmIGl0IHdhcyBibG9ja2VkIGJ5IHRoZSBicm93c2VyJ3MgcG9wdXAgYmxvY2tlci4KICogSWYgeW91IHdhbnQgdG8gdGVsbCBpZiB0aGUgYnJvd3NlciBibG9ja2VkIHRoZSBuZXcgd2luZG93LCB1c2Uge0BsaW5rIHdpbmRvd09wZW5XaXRoU3VjY2Vzc30uCiAqCiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L21vbmFjby1lZGl0b3IvaXNzdWVzLzYwMQogKiBUbyBwcm90ZWN0IGFnYWluc3QgbWFsaWNpb3VzIGNvZGUgaW4gdGhlIGxpbmtlZCBzaXRlLCBwYXJ0aWN1bGFybHkgcGhpc2hpbmcgYXR0ZW1wdHMsCiAqIHRoZSB3aW5kb3cub3BlbmVyIHNob3VsZCBiZSBzZXQgdG8gbnVsbCB0byBwcmV2ZW50IHRoZSBsaW5rZWQgc2l0ZSBmcm9tIGhhdmluZyBhY2Nlc3MKICogdG8gY2hhbmdlIHRoZSBsb2NhdGlvbiBvZiB0aGUgY3VycmVudCBwYWdlLgogKiBTZWUgaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmdpdGh1Yi5pby9yZWwtbm9vcGVuZXIvCiAqLwpleHBvcnQgZnVuY3Rpb24gd2luZG93T3Blbk5vT3BlbmVyKHVybCkgewogIC8vIEJ5IHVzaW5nICdub29wZW5lcicgaW4gdGhlIGB3aW5kb3dGZWF0dXJlc2AgYXJndW1lbnQsIHRoZSBuZXdseSBjcmVhdGVkIHdpbmRvdyB3aWxsCiAgLy8gbm90IGJlIGFibGUgdG8gdXNlIGB3aW5kb3cub3BlbmVyYCB0byByZWFjaCBiYWNrIHRvIHRoZSBjdXJyZW50IHBhZ2UuCiAgLy8gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80Njk1ODczMQogIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93L29wZW4jbm9vcGVuZXIKICAvLyBIb3dldmVyLCB0aGlzIGFsc28gZG9lc24ndCBhbGxvdyB1cyB0byByZWFsaXplIGlmIHRoZSBicm93c2VyIGJsb2NrZWQKICAvLyB0aGUgY3JlYXRpb24gb2YgdGhlIHdpbmRvdy4KICB3aW5kb3cub3Blbih1cmwsICdfYmxhbmsnLCAnbm9vcGVuZXInKTsKfQpleHBvcnQgZnVuY3Rpb24gYW5pbWF0ZShmbikgewogIHZhciBzdGVwID0gZnVuY3Rpb24gc3RlcCgpIHsKICAgIGZuKCk7CiAgICBzdGVwRGlzcG9zYWJsZSA9IHNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUoc3RlcCk7CiAgfTsKICB2YXIgc3RlcERpc3Bvc2FibGUgPSBzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKHN0ZXApOwogIHJldHVybiB0b0Rpc3Bvc2FibGUoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN0ZXBEaXNwb3NhYmxlLmRpc3Bvc2UoKTsKICB9KTsKfQpSZW1vdGVBdXRob3JpdGllcy5zZXRQcmVmZXJyZWRXZWJTY2hlbWEoL15odHRwczovLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpID8gJ2h0dHBzJyA6ICdodHRwJyk7Ci8qKgogKiByZXR1cm5zIHVybCgnLi4uJykKICovCmV4cG9ydCBmdW5jdGlvbiBhc0NTU1VybCh1cmkpIHsKICBpZiAoIXVyaSkgewogICAgcmV0dXJuICJ1cmwoJycpIjsKICB9CiAgcmV0dXJuICJ1cmwoJyIuY29uY2F0KEZpbGVBY2Nlc3MuYXNCcm93c2VyVXJpKHVyaSkudG9TdHJpbmcodHJ1ZSkucmVwbGFjZSgvJy9nLCAnJTI3JyksICInKSIpOwp9CmV4cG9ydCBmdW5jdGlvbiBhc0NTU1Byb3BlcnR5VmFsdWUodmFsdWUpIHsKICByZXR1cm4gIiciLmNvbmNhdCh2YWx1ZS5yZXBsYWNlKC8nL2csICclMjcnKSwgIiciKTsKfQovLyAtLSBzYW5pdGl6ZSBhbmQgdHJ1c3RlZCBodG1sCi8qKgogKiBIb29rcyBkb21wdXJpZnkgdXNpbmcgYGFmdGVyU2FuaXRpemVBdHRyaWJ1dGVzYCB0byBjaGVjayB0aGF0IGFsbCBgaHJlZmAgYW5kIGBzcmNgCiAqIGF0dHJpYnV0ZXMgYXJlIHZhbGlkLgogKi8KZXhwb3J0IGZ1bmN0aW9uIGhvb2tEb21QdXJpZnlIcmVmQW5kU3JjU2FuaXRpemVyKGFsbG93ZWRQcm90b2NvbHMpIHsKICB2YXIgYWxsb3dEYXRhSW1hZ2VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAvLyBodHRwczovL2dpdGh1Yi5jb20vY3VyZTUzL0RPTVB1cmlmeS9ibG9iL21haW4vZGVtb3MvaG9va3Mtc2NoZW1lLWFsbG93bGlzdC5odG1sCiAgLy8gYnVpbGQgYW4gYW5jaG9yIHRvIG1hcCBVUkxzIHRvCiAgdmFyIGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICBkb21wdXJpZnkuYWRkSG9vaygnYWZ0ZXJTYW5pdGl6ZUF0dHJpYnV0ZXMnLCBmdW5jdGlvbiAobm9kZSkgewogICAgLy8gY2hlY2sgYWxsIGhyZWYvc3JjIGF0dHJpYnV0ZXMgZm9yIHZhbGlkaXR5CiAgICBmb3IgKHZhciBfaTQgPSAwLCBfYXJyID0gWydocmVmJywgJ3NyYyddOyBfaTQgPCBfYXJyLmxlbmd0aDsgX2k0KyspIHsKICAgICAgdmFyIGF0dHIgPSBfYXJyW19pNF07CiAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZShhdHRyKSkgewogICAgICAgIHZhciBhdHRyVmFsdWUgPSBub2RlLmdldEF0dHJpYnV0ZShhdHRyKTsKICAgICAgICBpZiAoYXR0ciA9PT0gJ2hyZWYnICYmIGF0dHJWYWx1ZS5zdGFydHNXaXRoKCcjJykpIHsKICAgICAgICAgIC8vIEFsbG93IGZyYWdtZW50IGxpbmtzCiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgYW5jaG9yLmhyZWYgPSBhdHRyVmFsdWU7CiAgICAgICAgaWYgKCFhbGxvd2VkUHJvdG9jb2xzLmluY2x1ZGVzKGFuY2hvci5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSkpIHsKICAgICAgICAgIGlmIChhbGxvd0RhdGFJbWFnZXMgJiYgYXR0ciA9PT0gJ3NyYycgJiYgYW5jaG9yLmhyZWYuc3RhcnRzV2l0aCgnZGF0YTonKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0pOwogIHJldHVybiB0b0Rpc3Bvc2FibGUoZnVuY3Rpb24gKCkgewogICAgZG9tcHVyaWZ5LnJlbW92ZUhvb2soJ2FmdGVyU2FuaXRpemVBdHRyaWJ1dGVzJyk7CiAgfSk7Cn0KZXhwb3J0IHZhciBNb2RpZmllcktleUVtaXR0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9ldmVudCRFbWl0dGVyKSB7CiAgX2luaGVyaXRzKE1vZGlmaWVyS2V5RW1pdHRlciwgX2V2ZW50JEVtaXR0ZXIpOwogIHZhciBfc3VwZXIyID0gX2NyZWF0ZVN1cGVyKE1vZGlmaWVyS2V5RW1pdHRlcik7CiAgZnVuY3Rpb24gTW9kaWZpZXJLZXlFbWl0dGVyKCkgewogICAgdmFyIF90aGlzMjsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2RpZmllcktleUVtaXR0ZXIpOwogICAgX3RoaXMyID0gX3N1cGVyMi5jYWxsKHRoaXMpOwogICAgX3RoaXMyLl9zdWJzY3JpcHRpb25zID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpOwogICAgX3RoaXMyLl9rZXlTdGF0dXMgPSB7CiAgICAgIGFsdEtleTogZmFsc2UsCiAgICAgIHNoaWZ0S2V5OiBmYWxzZSwKICAgICAgY3RybEtleTogZmFsc2UsCiAgICAgIG1ldGFLZXk6IGZhbHNlCiAgICB9OwogICAgX3RoaXMyLl9zdWJzY3JpcHRpb25zLmFkZChhZGREaXNwb3NhYmxlTGlzdGVuZXIod2luZG93LCAna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGV2ZW50ID0gbmV3IFN0YW5kYXJkS2V5Ym9hcmRFdmVudChlKTsKICAgICAgLy8gSWYgQWx0LWtleSBrZXlkb3duIGV2ZW50IGlzIHJlcGVhdGVkLCBpZ25vcmUgaXQgIzExMjM0NwogICAgICAvLyBPbmx5IGtub3duIHRvIGJlIG5lY2Vzc2FyeSBmb3IgQWx0LUtleSBhdCB0aGUgbW9tZW50ICMxMTU4MTAKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDYgLyogS2V5Q29kZS5BbHQgKi8gJiYgZS5yZXBlYXQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGUuYWx0S2V5ICYmICFfdGhpczIuX2tleVN0YXR1cy5hbHRLZXkpIHsKICAgICAgICBfdGhpczIuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCA9ICdhbHQnOwogICAgICB9IGVsc2UgaWYgKGUuY3RybEtleSAmJiAhX3RoaXMyLl9rZXlTdGF0dXMuY3RybEtleSkgewogICAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gJ2N0cmwnOwogICAgICB9IGVsc2UgaWYgKGUubWV0YUtleSAmJiAhX3RoaXMyLl9rZXlTdGF0dXMubWV0YUtleSkgewogICAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gJ21ldGEnOwogICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkgJiYgIV90aGlzMi5fa2V5U3RhdHVzLnNoaWZ0S2V5KSB7CiAgICAgICAgX3RoaXMyLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSAnc2hpZnQnOwogICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgIT09IDYgLyogS2V5Q29kZS5BbHQgKi8pIHsKICAgICAgICBfdGhpczIuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCA9IHVuZGVmaW5lZDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgX3RoaXMyLl9rZXlTdGF0dXMuYWx0S2V5ID0gZS5hbHRLZXk7CiAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmN0cmxLZXkgPSBlLmN0cmxLZXk7CiAgICAgIF90aGlzMi5fa2V5U3RhdHVzLm1ldGFLZXkgPSBlLm1ldGFLZXk7CiAgICAgIF90aGlzMi5fa2V5U3RhdHVzLnNoaWZ0S2V5ID0gZS5zaGlmdEtleTsKICAgICAgaWYgKF90aGlzMi5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkKSB7CiAgICAgICAgX3RoaXMyLl9rZXlTdGF0dXMuZXZlbnQgPSBlOwogICAgICAgIF90aGlzMi5maXJlKF90aGlzMi5fa2V5U3RhdHVzKTsKICAgICAgfQogICAgfSwgdHJ1ZSkpOwogICAgX3RoaXMyLl9zdWJzY3JpcHRpb25zLmFkZChhZGREaXNwb3NhYmxlTGlzdGVuZXIod2luZG93LCAna2V5dXAnLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghZS5hbHRLZXkgJiYgX3RoaXMyLl9rZXlTdGF0dXMuYWx0S2V5KSB7CiAgICAgICAgX3RoaXMyLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkID0gJ2FsdCc7CiAgICAgIH0gZWxzZSBpZiAoIWUuY3RybEtleSAmJiBfdGhpczIuX2tleVN0YXR1cy5jdHJsS2V5KSB7CiAgICAgICAgX3RoaXMyLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkID0gJ2N0cmwnOwogICAgICB9IGVsc2UgaWYgKCFlLm1ldGFLZXkgJiYgX3RoaXMyLl9rZXlTdGF0dXMubWV0YUtleSkgewogICAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmxhc3RLZXlSZWxlYXNlZCA9ICdtZXRhJzsKICAgICAgfSBlbHNlIGlmICghZS5zaGlmdEtleSAmJiBfdGhpczIuX2tleVN0YXR1cy5zaGlmdEtleSkgewogICAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmxhc3RLZXlSZWxlYXNlZCA9ICdzaGlmdCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMyLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkID0gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIGlmIChfdGhpczIuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCAhPT0gX3RoaXMyLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkKSB7CiAgICAgICAgX3RoaXMyLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgICAgX3RoaXMyLl9rZXlTdGF0dXMuYWx0S2V5ID0gZS5hbHRLZXk7CiAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmN0cmxLZXkgPSBlLmN0cmxLZXk7CiAgICAgIF90aGlzMi5fa2V5U3RhdHVzLm1ldGFLZXkgPSBlLm1ldGFLZXk7CiAgICAgIF90aGlzMi5fa2V5U3RhdHVzLnNoaWZ0S2V5ID0gZS5zaGlmdEtleTsKICAgICAgaWYgKF90aGlzMi5fa2V5U3RhdHVzLmxhc3RLZXlSZWxlYXNlZCkgewogICAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmV2ZW50ID0gZTsKICAgICAgICBfdGhpczIuZmlyZShfdGhpczIuX2tleVN0YXR1cyk7CiAgICAgIH0KICAgIH0sIHRydWUpKTsKICAgIF90aGlzMi5fc3Vic2NyaXB0aW9ucy5hZGQoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGRvY3VtZW50LmJvZHksICdtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gdW5kZWZpbmVkOwogICAgfSwgdHJ1ZSkpOwogICAgX3RoaXMyLl9zdWJzY3JpcHRpb25zLmFkZChhZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgJ21vdXNldXAnLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMi5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gdW5kZWZpbmVkOwogICAgfSwgdHJ1ZSkpOwogICAgX3RoaXMyLl9zdWJzY3JpcHRpb25zLmFkZChhZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgJ21vdXNlbW92ZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlLmJ1dHRvbnMpIHsKICAgICAgICBfdGhpczIuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCA9IHVuZGVmaW5lZDsKICAgICAgfQogICAgfSwgdHJ1ZSkpOwogICAgX3RoaXMyLl9zdWJzY3JpcHRpb25zLmFkZChhZGREaXNwb3NhYmxlTGlzdGVuZXIod2luZG93LCAnYmx1cicsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMyLnJlc2V0S2V5U3RhdHVzKCk7CiAgICB9KSk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KICBfY3JlYXRlQ2xhc3MoTW9kaWZpZXJLZXlFbWl0dGVyLCBbewogICAga2V5OiAia2V5U3RhdHVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fa2V5U3RhdHVzOwogICAgfQogICAgLyoqCiAgICAgKiBBbGxvd3MgdG8gZXhwbGljaXRseSByZXNldCB0aGUga2V5IHN0YXR1cyBiYXNlZCBvbiBtb3JlIGtub3dsZWRnZSAoIzEwOTA2MikKICAgICAqLwogIH0sIHsKICAgIGtleTogInJlc2V0S2V5U3RhdHVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldEtleVN0YXR1cygpIHsKICAgICAgdGhpcy5kb1Jlc2V0S2V5U3RhdHVzKCk7CiAgICAgIHRoaXMuZmlyZSh0aGlzLl9rZXlTdGF0dXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImRvUmVzZXRLZXlTdGF0dXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvUmVzZXRLZXlTdGF0dXMoKSB7CiAgICAgIHRoaXMuX2tleVN0YXR1cyA9IHsKICAgICAgICBhbHRLZXk6IGZhbHNlLAogICAgICAgIHNoaWZ0S2V5OiBmYWxzZSwKICAgICAgICBjdHJsS2V5OiBmYWxzZSwKICAgICAgICBtZXRhS2V5OiBmYWxzZQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKE1vZGlmaWVyS2V5RW1pdHRlci5wcm90b3R5cGUpLCAiZGlzcG9zZSIsIHRoaXMpLmNhbGwodGhpcyk7CiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMuZGlzcG9zZSgpOwogICAgfQogIH1dLCBbewogICAga2V5OiAiZ2V0SW5zdGFuY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKCkgewogICAgICBpZiAoIU1vZGlmaWVyS2V5RW1pdHRlci5pbnN0YW5jZSkgewogICAgICAgIE1vZGlmaWVyS2V5RW1pdHRlci5pbnN0YW5jZSA9IG5ldyBNb2RpZmllcktleUVtaXR0ZXIoKTsKICAgICAgfQogICAgICByZXR1cm4gTW9kaWZpZXJLZXlFbWl0dGVyLmluc3RhbmNlOwogICAgfQogIH1dKTsKICByZXR1cm4gTW9kaWZpZXJLZXlFbWl0dGVyOwp9KGV2ZW50LkVtaXR0ZXIpOwpleHBvcnQgdmFyIERyYWdBbmREcm9wT2JzZXJ2ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlMikgewogIF9pbmhlcml0cyhEcmFnQW5kRHJvcE9ic2VydmVyLCBfRGlzcG9zYWJsZTIpOwogIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyKERyYWdBbmREcm9wT2JzZXJ2ZXIpOwogIGZ1bmN0aW9uIERyYWdBbmREcm9wT2JzZXJ2ZXIoZWxlbWVudCwgY2FsbGJhY2tzKSB7CiAgICB2YXIgX3RoaXMzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYWdBbmREcm9wT2JzZXJ2ZXIpOwogICAgX3RoaXMzID0gX3N1cGVyMy5jYWxsKHRoaXMpOwogICAgX3RoaXMzLmVsZW1lbnQgPSBlbGVtZW50OwogICAgX3RoaXMzLmNhbGxiYWNrcyA9IGNhbGxiYWNrczsKICAgIC8vIEEgaGVscGVyIHRvIGZpeCBpc3N1ZXMgd2l0aCByZXBlYXRlZCBEUkFHX0VOVEVSIC8gRFJBR19MRUFWRQogICAgLy8gY2FsbHMgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2lzc3Vlcy8xNDQ3MAogICAgLy8gd2hlbiB0aGUgZWxlbWVudCBoYXMgY2hpbGQgZWxlbWVudHMgd2hlcmUgdGhlIGV2ZW50cyBhcmUgZmlyZWQKICAgIC8vIHJlcGVhZGVkbHkuCiAgICBfdGhpczMuY291bnRlciA9IDA7CiAgICAvLyBBbGxvd3MgdG8gbWVhc3VyZSB0aGUgZHVyYXRpb24gb2YgdGhlIGRyYWcgb3BlcmF0aW9uLgogICAgX3RoaXMzLmRyYWdTdGFydFRpbWUgPSAwOwogICAgX3RoaXMzLnJlZ2lzdGVyTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gX3RoaXMzOwogIH0KICBfY3JlYXRlQ2xhc3MoRHJhZ0FuZERyb3BPYnNlcnZlciwgW3sKICAgIGtleTogInJlZ2lzdGVyTGlzdGVuZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3Rlckxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLmVsZW1lbnQsIEV2ZW50VHlwZS5EUkFHX0VOVEVSLCBmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5jb3VudGVyKys7CiAgICAgICAgX3RoaXM0LmRyYWdTdGFydFRpbWUgPSBlLnRpbWVTdGFtcDsKICAgICAgICBfdGhpczQuY2FsbGJhY2tzLm9uRHJhZ0VudGVyKGUpOwogICAgICB9KSk7CiAgICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLmVsZW1lbnQsIEV2ZW50VHlwZS5EUkFHX09WRVIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIF9hLCBfYjsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIG5lZWRlZCBzbyB0aGF0IHRoZSBkcm9wIGV2ZW50IGZpcmVzIChodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTMzOTkyNC9kcm9wLWV2ZW50LW5vdC1maXJpbmctaW4tY2hyb21lKQogICAgICAgIChfYiA9IChfYSA9IF90aGlzNC5jYWxsYmFja3MpLm9uRHJhZ092ZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hLCBlLCBlLnRpbWVTdGFtcCAtIF90aGlzNC5kcmFnU3RhcnRUaW1lKTsKICAgICAgfSkpOwogICAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5lbGVtZW50LCBFdmVudFR5cGUuRFJBR19MRUFWRSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczQuY291bnRlci0tOwogICAgICAgIGlmIChfdGhpczQuY291bnRlciA9PT0gMCkgewogICAgICAgICAgX3RoaXM0LmRyYWdTdGFydFRpbWUgPSAwOwogICAgICAgICAgX3RoaXM0LmNhbGxiYWNrcy5vbkRyYWdMZWF2ZShlKTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgRXZlbnRUeXBlLkRSQUdfRU5ELCBmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5jb3VudGVyID0gMDsKICAgICAgICBfdGhpczQuZHJhZ1N0YXJ0VGltZSA9IDA7CiAgICAgICAgX3RoaXM0LmNhbGxiYWNrcy5vbkRyYWdFbmQoZSk7CiAgICAgIH0pKTsKICAgICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgRXZlbnRUeXBlLkRST1AsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXM0LmNvdW50ZXIgPSAwOwogICAgICAgIF90aGlzNC5kcmFnU3RhcnRUaW1lID0gMDsKICAgICAgICBfdGhpczQuY2FsbGJhY2tzLm9uRHJvcChlKTsKICAgICAgfSkpOwogICAgfQogIH1dKTsKICByZXR1cm4gRHJhZ0FuZERyb3BPYnNlcnZlcjsKfShEaXNwb3NhYmxlKTsKdmFyIEhfUkVHRVggPSAvKiNfX1BVUkVfXyovX3dyYXBSZWdFeHAoLyhbXHdcLV0rKT8oPzojKFtcd1wtXSspKT8oKD86XC4oPzpbXHdcLV0rKSkqKSg/OkAoKD86W1x3XF9dKSspKT8vLCB7CiAgdGFnOiAxLAogIGlkOiAyLAogICJjbGFzcyI6IDMsCiAgbmFtZTogNAp9KTsKZXhwb3J0IGZ1bmN0aW9uIGgodGFnKSB7CiAgdmFyIGF0dHJpYnV0ZXM7CiAgdmFyIGNoaWxkcmVuOwogIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50cy5sZW5ndGggPD0gMSA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1sxXSkpIHsKICAgIGF0dHJpYnV0ZXMgPSB7fTsKICAgIGNoaWxkcmVuID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzFdOwogIH0gZWxzZSB7CiAgICBhdHRyaWJ1dGVzID0gKGFyZ3VtZW50cy5sZW5ndGggPD0gMSA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1sxXSkgfHwge307CiAgICBjaGlsZHJlbiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1syXTsKICB9CiAgdmFyIG1hdGNoID0gSF9SRUdFWC5leGVjKHRhZyk7CiAgaWYgKCFtYXRjaCB8fCAhbWF0Y2guZ3JvdXBzKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCB1c2Ugb2YgaCcpOwogIH0KICB2YXIgdGFnTmFtZSA9IG1hdGNoLmdyb3Vwc1sndGFnJ10gfHwgJ2Rpdic7CiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsKICBpZiAobWF0Y2guZ3JvdXBzWydpZCddKSB7CiAgICBlbC5pZCA9IG1hdGNoLmdyb3Vwc1snaWQnXTsKICB9CiAgaWYgKG1hdGNoLmdyb3Vwc1snY2xhc3MnXSkgewogICAgZWwuY2xhc3NOYW1lID0gbWF0Y2guZ3JvdXBzWydjbGFzcyddLnJlcGxhY2UoL1wuL2csICcgJykudHJpbSgpOwogIH0KICB2YXIgcmVzdWx0ID0ge307CiAgaWYgKG1hdGNoLmdyb3Vwc1snbmFtZSddKSB7CiAgICByZXN1bHRbbWF0Y2guZ3JvdXBzWyduYW1lJ11dID0gZWw7CiAgfQogIGlmIChjaGlsZHJlbikgewogICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNoaWxkcmVuKSwKICAgICAgX3N0ZXA7CiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgIHZhciBjID0gX3N0ZXAudmFsdWU7CiAgICAgICAgaWYgKGMgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgewogICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoYyk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGVsLmFwcGVuZChjKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgT2JqZWN0LmFzc2lnbihyZXN1bHQsIGMpOwogICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoYy5yb290KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KICB9CiAgZm9yICh2YXIgX2k1ID0gMCwgX09iamVjdCRlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcyk7IF9pNSA8IF9PYmplY3QkZW50cmllcy5sZW5ndGg7IF9pNSsrKSB7CiAgICB2YXIgX09iamVjdCRlbnRyaWVzJF9pID0gX3NsaWNlZFRvQXJyYXkoX09iamVjdCRlbnRyaWVzW19pNV0sIDIpLAogICAgICBrZXkgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sCiAgICAgIHZhbHVlID0gX09iamVjdCRlbnRyaWVzJF9pWzFdOwogICAgaWYgKGtleSA9PT0gJ3N0eWxlJykgewogICAgICBmb3IgKHZhciBfaTYgPSAwLCBfT2JqZWN0JGVudHJpZXMyID0gT2JqZWN0LmVudHJpZXModmFsdWUpOyBfaTYgPCBfT2JqZWN0JGVudHJpZXMyLmxlbmd0aDsgX2k2KyspIHsKICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzMiRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllczJbX2k2XSwgMiksCiAgICAgICAgICBjc3NLZXkgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzBdLAogICAgICAgICAgY3NzVmFsdWUgPSBfT2JqZWN0JGVudHJpZXMyJF9pWzFdOwogICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGNhbWVsQ2FzZVRvSHlwaGVuQ2FzZShjc3NLZXkpLCB0eXBlb2YgY3NzVmFsdWUgPT09ICdudW1iZXInID8gY3NzVmFsdWUgKyAncHgnIDogJycgKyBjc3NWYWx1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoa2V5ID09PSAndGFiSW5kZXgnKSB7CiAgICAgIGVsLnRhYkluZGV4ID0gdmFsdWU7CiAgICB9IGVsc2UgewogICAgICBlbC5zZXRBdHRyaWJ1dGUoY2FtZWxDYXNlVG9IeXBoZW5DYXNlKGtleSksIHZhbHVlLnRvU3RyaW5nKCkpOwogICAgfQogIH0KICByZXN1bHRbJ3Jvb3QnXSA9IGVsOwogIHJldHVybiByZXN1bHQ7Cn0KZnVuY3Rpb24gY2FtZWxDYXNlVG9IeXBoZW5DYXNlKHN0cikgewogIHJldHVybiBzdHIucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgJyQxLSQyJykudG9Mb3dlckNhc2UoKTsKfQ=="},{"version":3,"names":["browser","BrowserFeatures","StandardKeyboardEvent","StandardMouseEvent","onUnexpectedError","event","dompurify","Disposable","DisposableStore","toDisposable","FileAccess","RemoteAuthorities","platform","clearNode","node","firstChild","remove","isInDOM","_a","isConnected","DomListener","type","handler","options","_node","_type","_handler","_options","addEventListener","removeEventListener","addDisposableListener","useCaptureOrOptions","_wrapAsStandardMouseEvent","e","_wrapAsStandardKeyboardEvent","addStandardDisposableListener","useCapture","wrapHandler","addStandardDisposableGenericMouseDownListener","addDisposableGenericMouseDownListener","addStandardDisposableGenericMouseUpListener","addDisposableGenericMouseUpListener","isIOS","pointerEvents","EventType","POINTER_DOWN","MOUSE_DOWN","POINTER_UP","MOUSE_UP","createEventEmitter","target","domListener","result","fire","onFirstListenerAdd","onLastListenerRemove","dispose","Emitter","_animationFrame","doRequestAnimationFrame","callback","emulatedRequestAnimationFrame","setTimeout","Date","getTime","self","requestAnimationFrame","msRequestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","call","runAtThisOrScheduleAtNextAnimationFrame","scheduleAtNextAnimationFrame","AnimationFrameQueueItem","runner","priority","_runner","_canceled","a","b","NEXT_QUEUE","CURRENT_QUEUE","animFrameRequested","inAnimationFrameRunner","animationFrameRunner","length","sort","top","shift","execute","item","push","getComputedStyle","el","document","defaultView","getClientArea","element","body","Dimension","clientWidth","clientHeight","window","visualViewport","width","height","innerWidth","innerHeight","documentElement","Error","SizeUtils","value","parseFloat","cssPropertyName","jsPropertyName","computedStyle","getPropertyValue","getAttribute","convertToPixels","getDimension","obj","None","getTopLeftOffset","offsetParent","offsetTop","left","offsetLeft","parentNode","scrollTop","c","isShadowRoot","direction","scrollLeft","getBorderLeftWidth","getBorderTopWidth","size","style","getDomNodePagePosition","domNode","bb","getBoundingClientRect","StandardWindow","scrollX","scrollY","getDomNodeZoomLevel","testElement","zoom","elementZoomLevel","undefined","parentElement","getTotalWidth","margin","getMarginLeft","getMarginRight","offsetWidth","getContentWidth","border","getBorderRightWidth","padding","getPaddingLeft","getPaddingRight","getContentHeight","getBorderBottomWidth","getPaddingTop","getPaddingBottom","offsetHeight","getTotalHeight","getMarginTop","getMarginBottom","isAncestor","testChild","testAncestor","findParentWithClass","clazz","stopAtClazzOrNode","nodeType","ELEMENT_NODE","classList","contains","hasParentWithClass","host","mode","isInShadowDOM","getShadowRoot","getActiveElement","activeElement","shadowRoot","createStyleSheet","container","getElementsByTagName","createElement","media","appendChild","_sharedStyleSheet","getSharedStyleSheet","getDynamicStyleSheetRules","_b","sheet","rules","cssRules","createCSSRule","selector","cssText","insertRule","removeCSSRulesContainingSelector","ruleName","toDelete","i","rule","selectorText","indexOf","deleteRule","isHTMLElement","o","HTMLElement","nodeName","CLICK","AUXCLICK","DBLCLICK","MOUSE_OVER","MOUSE_MOVE","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_WHEEL","POINTER_MOVE","POINTER_LEAVE","CONTEXT_MENU","WHEEL","KEY_DOWN","KEY_PRESS","KEY_UP","LOAD","BEFORE_UNLOAD","UNLOAD","PAGE_SHOW","PAGE_HIDE","ABORT","ERROR","RESIZE","SCROLL","FULLSCREEN_CHANGE","WK_FULLSCREEN_CHANGE","SELECT","CHANGE","SUBMIT","RESET","FOCUS","FOCUS_IN","FOCUS_OUT","BLUR","INPUT","STORAGE","DRAG_START","DRAG","DRAG_ENTER","DRAG_LEAVE","DRAG_OVER","DROP","DRAG_END","ANIMATION_START","isWebKit","ANIMATION_END","ANIMATION_ITERATION","EventHelper","stop","cancelBubble","preventDefault","returnValue","stopPropagation","saveParentsScrollTop","r","restoreParentsScrollTop","state","FocusTracker","_onDidFocus","_register","onDidFocus","_onDidBlur","onDidBlur","hasFocus","hasFocusWithin","loosingFocus","onFocus","onBlur","_refreshStateHandler","currentNodeHasFocus","trackFocus","append","parent","children","prepend","child","insertBefore","reset","innerText","SELECTOR_REGEX","Namespace","_$","namespace","description","attrs","match","exec","Object","assign","tagName","HTML","createElementNS","id","className","replace","trim","keys","forEach","name","test","setAttribute","$","SVG","show","elements","display","removeAttribute","hide","tag","Array","prototype","slice","computeScreenAwareSize","cssPx","screenPx","devicePixelRatio","Math","max","floor","windowOpenNoOpener","url","open","animate","fn","step","stepDisposable","setPreferredWebSchema","location","href","asCSSUrl","uri","asBrowserUri","toString","asCSSPropertyValue","hookDomPurifyHrefAndSrcSanitizer","allowedProtocols","allowDataImages","anchor","addHook","attr","hasAttribute","attrValue","startsWith","includes","protocol","removeHook","ModifierKeyEmitter","_subscriptions","_keyStatus","altKey","shiftKey","ctrlKey","metaKey","add","defaultPrevented","keyCode","repeat","lastKeyPressed","lastKeyReleased","buttons","resetKeyStatus","doResetKeyStatus","instance","DragAndDropObserver","callbacks","counter","dragStartTime","registerListeners","timeStamp","onDragEnter","onDragOver","onDragLeave","onDragEnd","onDrop","H_REGEX","h","attributes","isArray","groups","root","entries","key","cssKey","cssValue","setProperty","camelCaseToHyphenCase","tabIndex","str","toLowerCase"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/browser/dom.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { BrowserFeatures } from './canIUse.js';\nimport { StandardKeyboardEvent } from './keyboardEvent.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport * as event from '../common/event.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { Disposable, DisposableStore, toDisposable } from '../common/lifecycle.js';\nimport { FileAccess, RemoteAuthorities } from '../common/network.js';\nimport * as platform from '../common/platform.js';\nexport function clearNode(node) {\n    while (node.firstChild) {\n        node.firstChild.remove();\n    }\n}\n/**\n * @deprecated Use node.isConnected directly\n */\nexport function isInDOM(node) {\n    var _a;\n    return (_a = node === null || node === void 0 ? void 0 : node.isConnected) !== null && _a !== void 0 ? _a : false;\n}\nclass DomListener {\n    constructor(node, type, handler, options) {\n        this._node = node;\n        this._type = type;\n        this._handler = handler;\n        this._options = (options || false);\n        this._node.addEventListener(this._type, this._handler, this._options);\n    }\n    dispose() {\n        if (!this._handler) {\n            // Already disposed\n            return;\n        }\n        this._node.removeEventListener(this._type, this._handler, this._options);\n        // Prevent leakers from holding on to the dom or handler func\n        this._node = null;\n        this._handler = null;\n    }\n}\nexport function addDisposableListener(node, type, handler, useCaptureOrOptions) {\n    return new DomListener(node, type, handler, useCaptureOrOptions);\n}\nfunction _wrapAsStandardMouseEvent(handler) {\n    return function (e) {\n        return handler(new StandardMouseEvent(e));\n    };\n}\nfunction _wrapAsStandardKeyboardEvent(handler) {\n    return function (e) {\n        return handler(new StandardKeyboardEvent(e));\n    };\n}\nexport const addStandardDisposableListener = function addStandardDisposableListener(node, type, handler, useCapture) {\n    let wrapHandler = handler;\n    if (type === 'click' || type === 'mousedown') {\n        wrapHandler = _wrapAsStandardMouseEvent(handler);\n    }\n    else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {\n        wrapHandler = _wrapAsStandardKeyboardEvent(handler);\n    }\n    return addDisposableListener(node, type, wrapHandler, useCapture);\n};\nexport const addStandardDisposableGenericMouseDownListener = function addStandardDisposableListener(node, handler, useCapture) {\n    const wrapHandler = _wrapAsStandardMouseEvent(handler);\n    return addDisposableGenericMouseDownListener(node, wrapHandler, useCapture);\n};\nexport const addStandardDisposableGenericMouseUpListener = function addStandardDisposableListener(node, handler, useCapture) {\n    const wrapHandler = _wrapAsStandardMouseEvent(handler);\n    return addDisposableGenericMouseUpListener(node, wrapHandler, useCapture);\n};\nexport function addDisposableGenericMouseDownListener(node, handler, useCapture) {\n    return addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_DOWN : EventType.MOUSE_DOWN, handler, useCapture);\n}\nexport function addDisposableGenericMouseUpListener(node, handler, useCapture) {\n    return addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_UP : EventType.MOUSE_UP, handler, useCapture);\n}\nexport function createEventEmitter(target, type, options) {\n    let domListener = null;\n    const handler = (e) => result.fire(e);\n    const onFirstListenerAdd = () => {\n        if (!domListener) {\n            domListener = new DomListener(target, type, handler, options);\n        }\n    };\n    const onLastListenerRemove = () => {\n        if (domListener) {\n            domListener.dispose();\n            domListener = null;\n        }\n    };\n    const result = new event.Emitter({ onFirstListenerAdd, onLastListenerRemove });\n    return result;\n}\nlet _animationFrame = null;\nfunction doRequestAnimationFrame(callback) {\n    if (!_animationFrame) {\n        const emulatedRequestAnimationFrame = (callback) => {\n            return setTimeout(() => callback(new Date().getTime()), 0);\n        };\n        _animationFrame = (self.requestAnimationFrame\n            || self.msRequestAnimationFrame\n            || self.webkitRequestAnimationFrame\n            || self.mozRequestAnimationFrame\n            || self.oRequestAnimationFrame\n            || emulatedRequestAnimationFrame);\n    }\n    return _animationFrame.call(self, callback);\n}\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed immediately.\n * @return token that can be used to cancel the scheduled runner (only if `runner` was not executed immediately).\n */\nexport let runAtThisOrScheduleAtNextAnimationFrame;\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed at the next animation frame.\n * @return token that can be used to cancel the scheduled runner.\n */\nexport let scheduleAtNextAnimationFrame;\nclass AnimationFrameQueueItem {\n    constructor(runner, priority = 0) {\n        this._runner = runner;\n        this.priority = priority;\n        this._canceled = false;\n    }\n    dispose() {\n        this._canceled = true;\n    }\n    execute() {\n        if (this._canceled) {\n            return;\n        }\n        try {\n            this._runner();\n        }\n        catch (e) {\n            onUnexpectedError(e);\n        }\n    }\n    // Sort by priority (largest to lowest)\n    static sort(a, b) {\n        return b.priority - a.priority;\n    }\n}\n(function () {\n    /**\n     * The runners scheduled at the next animation frame\n     */\n    let NEXT_QUEUE = [];\n    /**\n     * The runners scheduled at the current animation frame\n     */\n    let CURRENT_QUEUE = null;\n    /**\n     * A flag to keep track if the native requestAnimationFrame was already called\n     */\n    let animFrameRequested = false;\n    /**\n     * A flag to indicate if currently handling a native requestAnimationFrame callback\n     */\n    let inAnimationFrameRunner = false;\n    const animationFrameRunner = () => {\n        animFrameRequested = false;\n        CURRENT_QUEUE = NEXT_QUEUE;\n        NEXT_QUEUE = [];\n        inAnimationFrameRunner = true;\n        while (CURRENT_QUEUE.length > 0) {\n            CURRENT_QUEUE.sort(AnimationFrameQueueItem.sort);\n            const top = CURRENT_QUEUE.shift();\n            top.execute();\n        }\n        inAnimationFrameRunner = false;\n    };\n    scheduleAtNextAnimationFrame = (runner, priority = 0) => {\n        const item = new AnimationFrameQueueItem(runner, priority);\n        NEXT_QUEUE.push(item);\n        if (!animFrameRequested) {\n            animFrameRequested = true;\n            doRequestAnimationFrame(animationFrameRunner);\n        }\n        return item;\n    };\n    runAtThisOrScheduleAtNextAnimationFrame = (runner, priority) => {\n        if (inAnimationFrameRunner) {\n            const item = new AnimationFrameQueueItem(runner, priority);\n            CURRENT_QUEUE.push(item);\n            return item;\n        }\n        else {\n            return scheduleAtNextAnimationFrame(runner, priority);\n        }\n    };\n})();\nexport function getComputedStyle(el) {\n    return document.defaultView.getComputedStyle(el, null);\n}\nexport function getClientArea(element) {\n    // Try with DOM clientWidth / clientHeight\n    if (element !== document.body) {\n        return new Dimension(element.clientWidth, element.clientHeight);\n    }\n    // If visual view port exits and it's on mobile, it should be used instead of window innerWidth / innerHeight, or document.body.clientWidth / document.body.clientHeight\n    if (platform.isIOS && window.visualViewport) {\n        return new Dimension(window.visualViewport.width, window.visualViewport.height);\n    }\n    // Try innerWidth / innerHeight\n    if (window.innerWidth && window.innerHeight) {\n        return new Dimension(window.innerWidth, window.innerHeight);\n    }\n    // Try with document.body.clientWidth / document.body.clientHeight\n    if (document.body && document.body.clientWidth && document.body.clientHeight) {\n        return new Dimension(document.body.clientWidth, document.body.clientHeight);\n    }\n    // Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n    if (document.documentElement && document.documentElement.clientWidth && document.documentElement.clientHeight) {\n        return new Dimension(document.documentElement.clientWidth, document.documentElement.clientHeight);\n    }\n    throw new Error('Unable to figure out browser width and height');\n}\nclass SizeUtils {\n    // Adapted from WinJS\n    // Converts a CSS positioning string for the specified element to pixels.\n    static convertToPixels(element, value) {\n        return parseFloat(value) || 0;\n    }\n    static getDimension(element, cssPropertyName, jsPropertyName) {\n        const computedStyle = getComputedStyle(element);\n        let value = '0';\n        if (computedStyle) {\n            if (computedStyle.getPropertyValue) {\n                value = computedStyle.getPropertyValue(cssPropertyName);\n            }\n            else {\n                // IE8\n                value = computedStyle.getAttribute(jsPropertyName);\n            }\n        }\n        return SizeUtils.convertToPixels(element, value);\n    }\n    static getBorderLeftWidth(element) {\n        return SizeUtils.getDimension(element, 'border-left-width', 'borderLeftWidth');\n    }\n    static getBorderRightWidth(element) {\n        return SizeUtils.getDimension(element, 'border-right-width', 'borderRightWidth');\n    }\n    static getBorderTopWidth(element) {\n        return SizeUtils.getDimension(element, 'border-top-width', 'borderTopWidth');\n    }\n    static getBorderBottomWidth(element) {\n        return SizeUtils.getDimension(element, 'border-bottom-width', 'borderBottomWidth');\n    }\n    static getPaddingLeft(element) {\n        return SizeUtils.getDimension(element, 'padding-left', 'paddingLeft');\n    }\n    static getPaddingRight(element) {\n        return SizeUtils.getDimension(element, 'padding-right', 'paddingRight');\n    }\n    static getPaddingTop(element) {\n        return SizeUtils.getDimension(element, 'padding-top', 'paddingTop');\n    }\n    static getPaddingBottom(element) {\n        return SizeUtils.getDimension(element, 'padding-bottom', 'paddingBottom');\n    }\n    static getMarginLeft(element) {\n        return SizeUtils.getDimension(element, 'margin-left', 'marginLeft');\n    }\n    static getMarginTop(element) {\n        return SizeUtils.getDimension(element, 'margin-top', 'marginTop');\n    }\n    static getMarginRight(element) {\n        return SizeUtils.getDimension(element, 'margin-right', 'marginRight');\n    }\n    static getMarginBottom(element) {\n        return SizeUtils.getDimension(element, 'margin-bottom', 'marginBottom');\n    }\n}\nexport class Dimension {\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    with(width = this.width, height = this.height) {\n        if (width !== this.width || height !== this.height) {\n            return new Dimension(width, height);\n        }\n        else {\n            return this;\n        }\n    }\n    static is(obj) {\n        return typeof obj === 'object' && typeof obj.height === 'number' && typeof obj.width === 'number';\n    }\n    static lift(obj) {\n        if (obj instanceof Dimension) {\n            return obj;\n        }\n        else {\n            return new Dimension(obj.width, obj.height);\n        }\n    }\n    static equals(a, b) {\n        if (a === b) {\n            return true;\n        }\n        if (!a || !b) {\n            return false;\n        }\n        return a.width === b.width && a.height === b.height;\n    }\n}\nDimension.None = new Dimension(0, 0);\nexport function getTopLeftOffset(element) {\n    // Adapted from WinJS.Utilities.getPosition\n    // and added borders to the mix\n    let offsetParent = element.offsetParent;\n    let top = element.offsetTop;\n    let left = element.offsetLeft;\n    while ((element = element.parentNode) !== null\n        && element !== document.body\n        && element !== document.documentElement) {\n        top -= element.scrollTop;\n        const c = isShadowRoot(element) ? null : getComputedStyle(element);\n        if (c) {\n            left -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;\n        }\n        if (element === offsetParent) {\n            left += SizeUtils.getBorderLeftWidth(element);\n            top += SizeUtils.getBorderTopWidth(element);\n            top += element.offsetTop;\n            left += element.offsetLeft;\n            offsetParent = element.offsetParent;\n        }\n    }\n    return {\n        left: left,\n        top: top\n    };\n}\nexport function size(element, width, height) {\n    if (typeof width === 'number') {\n        element.style.width = `${width}px`;\n    }\n    if (typeof height === 'number') {\n        element.style.height = `${height}px`;\n    }\n}\n/**\n * Returns the position of a dom node relative to the entire page.\n */\nexport function getDomNodePagePosition(domNode) {\n    const bb = domNode.getBoundingClientRect();\n    return {\n        left: bb.left + StandardWindow.scrollX,\n        top: bb.top + StandardWindow.scrollY,\n        width: bb.width,\n        height: bb.height\n    };\n}\n/**\n * Returns the effective zoom on a given element before window zoom level is applied\n */\nexport function getDomNodeZoomLevel(domNode) {\n    let testElement = domNode;\n    let zoom = 1.0;\n    do {\n        const elementZoomLevel = getComputedStyle(testElement).zoom;\n        if (elementZoomLevel !== null && elementZoomLevel !== undefined && elementZoomLevel !== '1') {\n            zoom *= elementZoomLevel;\n        }\n        testElement = testElement.parentElement;\n    } while (testElement !== null && testElement !== document.documentElement);\n    return zoom;\n}\nexport const StandardWindow = new class {\n    get scrollX() {\n        if (typeof window.scrollX === 'number') {\n            // modern browsers\n            return window.scrollX;\n        }\n        else {\n            return document.body.scrollLeft + document.documentElement.scrollLeft;\n        }\n    }\n    get scrollY() {\n        if (typeof window.scrollY === 'number') {\n            // modern browsers\n            return window.scrollY;\n        }\n        else {\n            return document.body.scrollTop + document.documentElement.scrollTop;\n        }\n    }\n};\n// Adapted from WinJS\n// Gets the width of the element, including margins.\nexport function getTotalWidth(element) {\n    const margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n    return element.offsetWidth + margin;\n}\nexport function getContentWidth(element) {\n    const border = SizeUtils.getBorderLeftWidth(element) + SizeUtils.getBorderRightWidth(element);\n    const padding = SizeUtils.getPaddingLeft(element) + SizeUtils.getPaddingRight(element);\n    return element.offsetWidth - border - padding;\n}\n// Adapted from WinJS\n// Gets the height of the content of the specified element. The content height does not include borders or padding.\nexport function getContentHeight(element) {\n    const border = SizeUtils.getBorderTopWidth(element) + SizeUtils.getBorderBottomWidth(element);\n    const padding = SizeUtils.getPaddingTop(element) + SizeUtils.getPaddingBottom(element);\n    return element.offsetHeight - border - padding;\n}\n// Adapted from WinJS\n// Gets the height of the element, including its margins.\nexport function getTotalHeight(element) {\n    const margin = SizeUtils.getMarginTop(element) + SizeUtils.getMarginBottom(element);\n    return element.offsetHeight + margin;\n}\n// ----------------------------------------------------------------------------------------\nexport function isAncestor(testChild, testAncestor) {\n    while (testChild) {\n        if (testChild === testAncestor) {\n            return true;\n        }\n        testChild = testChild.parentNode;\n    }\n    return false;\n}\nexport function findParentWithClass(node, clazz, stopAtClazzOrNode) {\n    while (node && node.nodeType === node.ELEMENT_NODE) {\n        if (node.classList.contains(clazz)) {\n            return node;\n        }\n        if (stopAtClazzOrNode) {\n            if (typeof stopAtClazzOrNode === 'string') {\n                if (node.classList.contains(stopAtClazzOrNode)) {\n                    return null;\n                }\n            }\n            else {\n                if (node === stopAtClazzOrNode) {\n                    return null;\n                }\n            }\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function hasParentWithClass(node, clazz, stopAtClazzOrNode) {\n    return !!findParentWithClass(node, clazz, stopAtClazzOrNode);\n}\nexport function isShadowRoot(node) {\n    return (node && !!node.host && !!node.mode);\n}\nexport function isInShadowDOM(domNode) {\n    return !!getShadowRoot(domNode);\n}\nexport function getShadowRoot(domNode) {\n    while (domNode.parentNode) {\n        if (domNode === document.body) {\n            // reached the body\n            return null;\n        }\n        domNode = domNode.parentNode;\n    }\n    return isShadowRoot(domNode) ? domNode : null;\n}\nexport function getActiveElement() {\n    let result = document.activeElement;\n    while (result === null || result === void 0 ? void 0 : result.shadowRoot) {\n        result = result.shadowRoot.activeElement;\n    }\n    return result;\n}\nexport function createStyleSheet(container = document.getElementsByTagName('head')[0]) {\n    const style = document.createElement('style');\n    style.type = 'text/css';\n    style.media = 'screen';\n    container.appendChild(style);\n    return style;\n}\nlet _sharedStyleSheet = null;\nfunction getSharedStyleSheet() {\n    if (!_sharedStyleSheet) {\n        _sharedStyleSheet = createStyleSheet();\n    }\n    return _sharedStyleSheet;\n}\nfunction getDynamicStyleSheetRules(style) {\n    var _a, _b;\n    if ((_a = style === null || style === void 0 ? void 0 : style.sheet) === null || _a === void 0 ? void 0 : _a.rules) {\n        // Chrome, IE\n        return style.sheet.rules;\n    }\n    if ((_b = style === null || style === void 0 ? void 0 : style.sheet) === null || _b === void 0 ? void 0 : _b.cssRules) {\n        // FF\n        return style.sheet.cssRules;\n    }\n    return [];\n}\nexport function createCSSRule(selector, cssText, style = getSharedStyleSheet()) {\n    if (!style || !cssText) {\n        return;\n    }\n    style.sheet.insertRule(selector + '{' + cssText + '}', 0);\n}\nexport function removeCSSRulesContainingSelector(ruleName, style = getSharedStyleSheet()) {\n    if (!style) {\n        return;\n    }\n    const rules = getDynamicStyleSheetRules(style);\n    const toDelete = [];\n    for (let i = 0; i < rules.length; i++) {\n        const rule = rules[i];\n        if (rule.selectorText.indexOf(ruleName) !== -1) {\n            toDelete.push(i);\n        }\n    }\n    for (let i = toDelete.length - 1; i >= 0; i--) {\n        style.sheet.deleteRule(toDelete[i]);\n    }\n}\nexport function isHTMLElement(o) {\n    if (typeof HTMLElement === 'object') {\n        return o instanceof HTMLElement;\n    }\n    return o && typeof o === 'object' && o.nodeType === 1 && typeof o.nodeName === 'string';\n}\nexport const EventType = {\n    // Mouse\n    CLICK: 'click',\n    AUXCLICK: 'auxclick',\n    DBLCLICK: 'dblclick',\n    MOUSE_UP: 'mouseup',\n    MOUSE_DOWN: 'mousedown',\n    MOUSE_OVER: 'mouseover',\n    MOUSE_MOVE: 'mousemove',\n    MOUSE_OUT: 'mouseout',\n    MOUSE_ENTER: 'mouseenter',\n    MOUSE_LEAVE: 'mouseleave',\n    MOUSE_WHEEL: 'wheel',\n    POINTER_UP: 'pointerup',\n    POINTER_DOWN: 'pointerdown',\n    POINTER_MOVE: 'pointermove',\n    POINTER_LEAVE: 'pointerleave',\n    CONTEXT_MENU: 'contextmenu',\n    WHEEL: 'wheel',\n    // Keyboard\n    KEY_DOWN: 'keydown',\n    KEY_PRESS: 'keypress',\n    KEY_UP: 'keyup',\n    // HTML Document\n    LOAD: 'load',\n    BEFORE_UNLOAD: 'beforeunload',\n    UNLOAD: 'unload',\n    PAGE_SHOW: 'pageshow',\n    PAGE_HIDE: 'pagehide',\n    ABORT: 'abort',\n    ERROR: 'error',\n    RESIZE: 'resize',\n    SCROLL: 'scroll',\n    FULLSCREEN_CHANGE: 'fullscreenchange',\n    WK_FULLSCREEN_CHANGE: 'webkitfullscreenchange',\n    // Form\n    SELECT: 'select',\n    CHANGE: 'change',\n    SUBMIT: 'submit',\n    RESET: 'reset',\n    FOCUS: 'focus',\n    FOCUS_IN: 'focusin',\n    FOCUS_OUT: 'focusout',\n    BLUR: 'blur',\n    INPUT: 'input',\n    // Local Storage\n    STORAGE: 'storage',\n    // Drag\n    DRAG_START: 'dragstart',\n    DRAG: 'drag',\n    DRAG_ENTER: 'dragenter',\n    DRAG_LEAVE: 'dragleave',\n    DRAG_OVER: 'dragover',\n    DROP: 'drop',\n    DRAG_END: 'dragend',\n    // Animation\n    ANIMATION_START: browser.isWebKit ? 'webkitAnimationStart' : 'animationstart',\n    ANIMATION_END: browser.isWebKit ? 'webkitAnimationEnd' : 'animationend',\n    ANIMATION_ITERATION: browser.isWebKit ? 'webkitAnimationIteration' : 'animationiteration'\n};\nexport const EventHelper = {\n    stop: function (e, cancelBubble) {\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        else {\n            // IE8\n            e.returnValue = false;\n        }\n        if (cancelBubble) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n            }\n            else {\n                // IE8\n                e.cancelBubble = true;\n            }\n        }\n    }\n};\nexport function saveParentsScrollTop(node) {\n    const r = [];\n    for (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n        r[i] = node.scrollTop;\n        node = node.parentNode;\n    }\n    return r;\n}\nexport function restoreParentsScrollTop(node, state) {\n    for (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n        if (node.scrollTop !== state[i]) {\n            node.scrollTop = state[i];\n        }\n        node = node.parentNode;\n    }\n}\nclass FocusTracker extends Disposable {\n    constructor(element) {\n        super();\n        this._onDidFocus = this._register(new event.Emitter());\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = this._register(new event.Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        let hasFocus = FocusTracker.hasFocusWithin(element);\n        let loosingFocus = false;\n        const onFocus = () => {\n            loosingFocus = false;\n            if (!hasFocus) {\n                hasFocus = true;\n                this._onDidFocus.fire();\n            }\n        };\n        const onBlur = () => {\n            if (hasFocus) {\n                loosingFocus = true;\n                window.setTimeout(() => {\n                    if (loosingFocus) {\n                        loosingFocus = false;\n                        hasFocus = false;\n                        this._onDidBlur.fire();\n                    }\n                }, 0);\n            }\n        };\n        this._refreshStateHandler = () => {\n            const currentNodeHasFocus = FocusTracker.hasFocusWithin(element);\n            if (currentNodeHasFocus !== hasFocus) {\n                if (hasFocus) {\n                    onBlur();\n                }\n                else {\n                    onFocus();\n                }\n            }\n        };\n        this._register(addDisposableListener(element, EventType.FOCUS, onFocus, true));\n        this._register(addDisposableListener(element, EventType.BLUR, onBlur, true));\n        this._register(addDisposableListener(element, EventType.FOCUS_IN, () => this._refreshStateHandler()));\n        this._register(addDisposableListener(element, EventType.FOCUS_OUT, () => this._refreshStateHandler()));\n    }\n    static hasFocusWithin(element) {\n        const shadowRoot = getShadowRoot(element);\n        const activeElement = (shadowRoot ? shadowRoot.activeElement : document.activeElement);\n        return isAncestor(activeElement, element);\n    }\n}\nexport function trackFocus(element) {\n    return new FocusTracker(element);\n}\nexport function append(parent, ...children) {\n    parent.append(...children);\n    if (children.length === 1 && typeof children[0] !== 'string') {\n        return children[0];\n    }\n}\nexport function prepend(parent, child) {\n    parent.insertBefore(child, parent.firstChild);\n    return child;\n}\n/**\n * Removes all children from `parent` and appends `children`\n */\nexport function reset(parent, ...children) {\n    parent.innerText = '';\n    append(parent, ...children);\n}\nconst SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((\\.([\\w\\-]+))*)/;\nexport var Namespace;\n(function (Namespace) {\n    Namespace[\"HTML\"] = \"http://www.w3.org/1999/xhtml\";\n    Namespace[\"SVG\"] = \"http://www.w3.org/2000/svg\";\n})(Namespace || (Namespace = {}));\nfunction _$(namespace, description, attrs, ...children) {\n    const match = SELECTOR_REGEX.exec(description);\n    if (!match) {\n        throw new Error('Bad use of emmet');\n    }\n    attrs = Object.assign({}, (attrs || {}));\n    const tagName = match[1] || 'div';\n    let result;\n    if (namespace !== Namespace.HTML) {\n        result = document.createElementNS(namespace, tagName);\n    }\n    else {\n        result = document.createElement(tagName);\n    }\n    if (match[3]) {\n        result.id = match[3];\n    }\n    if (match[4]) {\n        result.className = match[4].replace(/\\./g, ' ').trim();\n    }\n    Object.keys(attrs).forEach(name => {\n        const value = attrs[name];\n        if (typeof value === 'undefined') {\n            return;\n        }\n        if (/^on\\w+$/.test(name)) {\n            result[name] = value;\n        }\n        else if (name === 'selected') {\n            if (value) {\n                result.setAttribute(name, 'true');\n            }\n        }\n        else {\n            result.setAttribute(name, value);\n        }\n    });\n    result.append(...children);\n    return result;\n}\nexport function $(description, attrs, ...children) {\n    return _$(Namespace.HTML, description, attrs, ...children);\n}\n$.SVG = function (description, attrs, ...children) {\n    return _$(Namespace.SVG, description, attrs, ...children);\n};\nexport function show(...elements) {\n    for (const element of elements) {\n        element.style.display = '';\n        element.removeAttribute('aria-hidden');\n    }\n}\nexport function hide(...elements) {\n    for (const element of elements) {\n        element.style.display = 'none';\n        element.setAttribute('aria-hidden', 'true');\n    }\n}\nexport function getElementsByTagName(tag) {\n    return Array.prototype.slice.call(document.getElementsByTagName(tag), 0);\n}\n/**\n * Find a value usable for a dom node size such that the likelihood that it would be\n * displayed with constant screen pixels size is as high as possible.\n *\n * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio\n * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/\"snaps\"\n * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.\n */\nexport function computeScreenAwareSize(cssPx) {\n    const screenPx = window.devicePixelRatio * cssPx;\n    return Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;\n}\n/**\n * Open safely a new window. This is the best way to do so, but you cannot tell\n * if the window was opened or if it was blocked by the browser's popup blocker.\n * If you want to tell if the browser blocked the new window, use {@link windowOpenWithSuccess}.\n *\n * See https://github.com/microsoft/monaco-editor/issues/601\n * To protect against malicious code in the linked site, particularly phishing attempts,\n * the window.opener should be set to null to prevent the linked site from having access\n * to change the location of the current page.\n * See https://mathiasbynens.github.io/rel-noopener/\n */\nexport function windowOpenNoOpener(url) {\n    // By using 'noopener' in the `windowFeatures` argument, the newly created window will\n    // not be able to use `window.opener` to reach back to the current page.\n    // See https://stackoverflow.com/a/46958731\n    // See https://developer.mozilla.org/en-US/docs/Web/API/Window/open#noopener\n    // However, this also doesn't allow us to realize if the browser blocked\n    // the creation of the window.\n    window.open(url, '_blank', 'noopener');\n}\nexport function animate(fn) {\n    const step = () => {\n        fn();\n        stepDisposable = scheduleAtNextAnimationFrame(step);\n    };\n    let stepDisposable = scheduleAtNextAnimationFrame(step);\n    return toDisposable(() => stepDisposable.dispose());\n}\nRemoteAuthorities.setPreferredWebSchema(/^https:/.test(window.location.href) ? 'https' : 'http');\n/**\n * returns url('...')\n */\nexport function asCSSUrl(uri) {\n    if (!uri) {\n        return `url('')`;\n    }\n    return `url('${FileAccess.asBrowserUri(uri).toString(true).replace(/'/g, '%27')}')`;\n}\nexport function asCSSPropertyValue(value) {\n    return `'${value.replace(/'/g, '%27')}'`;\n}\n// -- sanitize and trusted html\n/**\n * Hooks dompurify using `afterSanitizeAttributes` to check that all `href` and `src`\n * attributes are valid.\n */\nexport function hookDomPurifyHrefAndSrcSanitizer(allowedProtocols, allowDataImages = false) {\n    // https://github.com/cure53/DOMPurify/blob/main/demos/hooks-scheme-allowlist.html\n    // build an anchor to map URLs to\n    const anchor = document.createElement('a');\n    dompurify.addHook('afterSanitizeAttributes', (node) => {\n        // check all href/src attributes for validity\n        for (const attr of ['href', 'src']) {\n            if (node.hasAttribute(attr)) {\n                const attrValue = node.getAttribute(attr);\n                if (attr === 'href' && attrValue.startsWith('#')) {\n                    // Allow fragment links\n                    continue;\n                }\n                anchor.href = attrValue;\n                if (!allowedProtocols.includes(anchor.protocol.replace(/:$/, ''))) {\n                    if (allowDataImages && attr === 'src' && anchor.href.startsWith('data:')) {\n                        continue;\n                    }\n                    node.removeAttribute(attr);\n                }\n            }\n        }\n    });\n    return toDisposable(() => {\n        dompurify.removeHook('afterSanitizeAttributes');\n    });\n}\nexport class ModifierKeyEmitter extends event.Emitter {\n    constructor() {\n        super();\n        this._subscriptions = new DisposableStore();\n        this._keyStatus = {\n            altKey: false,\n            shiftKey: false,\n            ctrlKey: false,\n            metaKey: false\n        };\n        this._subscriptions.add(addDisposableListener(window, 'keydown', e => {\n            if (e.defaultPrevented) {\n                return;\n            }\n            const event = new StandardKeyboardEvent(e);\n            // If Alt-key keydown event is repeated, ignore it #112347\n            // Only known to be necessary for Alt-Key at the moment #115810\n            if (event.keyCode === 6 /* KeyCode.Alt */ && e.repeat) {\n                return;\n            }\n            if (e.altKey && !this._keyStatus.altKey) {\n                this._keyStatus.lastKeyPressed = 'alt';\n            }\n            else if (e.ctrlKey && !this._keyStatus.ctrlKey) {\n                this._keyStatus.lastKeyPressed = 'ctrl';\n            }\n            else if (e.metaKey && !this._keyStatus.metaKey) {\n                this._keyStatus.lastKeyPressed = 'meta';\n            }\n            else if (e.shiftKey && !this._keyStatus.shiftKey) {\n                this._keyStatus.lastKeyPressed = 'shift';\n            }\n            else if (event.keyCode !== 6 /* KeyCode.Alt */) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n            else {\n                return;\n            }\n            this._keyStatus.altKey = e.altKey;\n            this._keyStatus.ctrlKey = e.ctrlKey;\n            this._keyStatus.metaKey = e.metaKey;\n            this._keyStatus.shiftKey = e.shiftKey;\n            if (this._keyStatus.lastKeyPressed) {\n                this._keyStatus.event = e;\n                this.fire(this._keyStatus);\n            }\n        }, true));\n        this._subscriptions.add(addDisposableListener(window, 'keyup', e => {\n            if (e.defaultPrevented) {\n                return;\n            }\n            if (!e.altKey && this._keyStatus.altKey) {\n                this._keyStatus.lastKeyReleased = 'alt';\n            }\n            else if (!e.ctrlKey && this._keyStatus.ctrlKey) {\n                this._keyStatus.lastKeyReleased = 'ctrl';\n            }\n            else if (!e.metaKey && this._keyStatus.metaKey) {\n                this._keyStatus.lastKeyReleased = 'meta';\n            }\n            else if (!e.shiftKey && this._keyStatus.shiftKey) {\n                this._keyStatus.lastKeyReleased = 'shift';\n            }\n            else {\n                this._keyStatus.lastKeyReleased = undefined;\n            }\n            if (this._keyStatus.lastKeyPressed !== this._keyStatus.lastKeyReleased) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n            this._keyStatus.altKey = e.altKey;\n            this._keyStatus.ctrlKey = e.ctrlKey;\n            this._keyStatus.metaKey = e.metaKey;\n            this._keyStatus.shiftKey = e.shiftKey;\n            if (this._keyStatus.lastKeyReleased) {\n                this._keyStatus.event = e;\n                this.fire(this._keyStatus);\n            }\n        }, true));\n        this._subscriptions.add(addDisposableListener(document.body, 'mousedown', () => {\n            this._keyStatus.lastKeyPressed = undefined;\n        }, true));\n        this._subscriptions.add(addDisposableListener(document.body, 'mouseup', () => {\n            this._keyStatus.lastKeyPressed = undefined;\n        }, true));\n        this._subscriptions.add(addDisposableListener(document.body, 'mousemove', e => {\n            if (e.buttons) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n        }, true));\n        this._subscriptions.add(addDisposableListener(window, 'blur', () => {\n            this.resetKeyStatus();\n        }));\n    }\n    get keyStatus() {\n        return this._keyStatus;\n    }\n    /**\n     * Allows to explicitly reset the key status based on more knowledge (#109062)\n     */\n    resetKeyStatus() {\n        this.doResetKeyStatus();\n        this.fire(this._keyStatus);\n    }\n    doResetKeyStatus() {\n        this._keyStatus = {\n            altKey: false,\n            shiftKey: false,\n            ctrlKey: false,\n            metaKey: false\n        };\n    }\n    static getInstance() {\n        if (!ModifierKeyEmitter.instance) {\n            ModifierKeyEmitter.instance = new ModifierKeyEmitter();\n        }\n        return ModifierKeyEmitter.instance;\n    }\n    dispose() {\n        super.dispose();\n        this._subscriptions.dispose();\n    }\n}\nexport class DragAndDropObserver extends Disposable {\n    constructor(element, callbacks) {\n        super();\n        this.element = element;\n        this.callbacks = callbacks;\n        // A helper to fix issues with repeated DRAG_ENTER / DRAG_LEAVE\n        // calls see https://github.com/microsoft/vscode/issues/14470\n        // when the element has child elements where the events are fired\n        // repeadedly.\n        this.counter = 0;\n        // Allows to measure the duration of the drag operation.\n        this.dragStartTime = 0;\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(addDisposableListener(this.element, EventType.DRAG_ENTER, (e) => {\n            this.counter++;\n            this.dragStartTime = e.timeStamp;\n            this.callbacks.onDragEnter(e);\n        }));\n        this._register(addDisposableListener(this.element, EventType.DRAG_OVER, (e) => {\n            var _a, _b;\n            e.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n            (_b = (_a = this.callbacks).onDragOver) === null || _b === void 0 ? void 0 : _b.call(_a, e, e.timeStamp - this.dragStartTime);\n        }));\n        this._register(addDisposableListener(this.element, EventType.DRAG_LEAVE, (e) => {\n            this.counter--;\n            if (this.counter === 0) {\n                this.dragStartTime = 0;\n                this.callbacks.onDragLeave(e);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.DRAG_END, (e) => {\n            this.counter = 0;\n            this.dragStartTime = 0;\n            this.callbacks.onDragEnd(e);\n        }));\n        this._register(addDisposableListener(this.element, EventType.DROP, (e) => {\n            this.counter = 0;\n            this.dragStartTime = 0;\n            this.callbacks.onDrop(e);\n        }));\n    }\n}\nconst H_REGEX = /(?<tag>[\\w\\-]+)?(?:#(?<id>[\\w\\-]+))?(?<class>(?:\\.(?:[\\w\\-]+))*)(?:@(?<name>(?:[\\w\\_])+))?/;\nexport function h(tag, ...args) {\n    let attributes;\n    let children;\n    if (Array.isArray(args[0])) {\n        attributes = {};\n        children = args[0];\n    }\n    else {\n        attributes = args[0] || {};\n        children = args[1];\n    }\n    const match = H_REGEX.exec(tag);\n    if (!match || !match.groups) {\n        throw new Error('Bad use of h');\n    }\n    const tagName = match.groups['tag'] || 'div';\n    const el = document.createElement(tagName);\n    if (match.groups['id']) {\n        el.id = match.groups['id'];\n    }\n    if (match.groups['class']) {\n        el.className = match.groups['class'].replace(/\\./g, ' ').trim();\n    }\n    const result = {};\n    if (match.groups['name']) {\n        result[match.groups['name']] = el;\n    }\n    if (children) {\n        for (const c of children) {\n            if (c instanceof HTMLElement) {\n                el.appendChild(c);\n            }\n            else if (typeof c === 'string') {\n                el.append(c);\n            }\n            else {\n                Object.assign(result, c);\n                el.appendChild(c.root);\n            }\n        }\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n        if (key === 'style') {\n            for (const [cssKey, cssValue] of Object.entries(value)) {\n                el.style.setProperty(camelCaseToHyphenCase(cssKey), typeof cssValue === 'number' ? cssValue + 'px' : '' + cssValue);\n            }\n        }\n        else if (key === 'tabIndex') {\n            el.tabIndex = value;\n        }\n        else {\n            el.setAttribute(camelCaseToHyphenCase(key), value.toString());\n        }\n    }\n    result['root'] = el;\n    return result;\n}\nfunction camelCaseToHyphenCase(str) {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n"],"mappings":"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"}]}