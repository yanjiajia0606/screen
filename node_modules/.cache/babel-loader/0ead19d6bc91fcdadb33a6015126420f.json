{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/editStack.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/editStack.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5hdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWxhc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWxhc3QtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmV2ZXJzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLWxvY2FsZS1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7Ci8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uCiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwppbXBvcnQgKiBhcyBubHMgZnJvbSAnLi4vLi4vLi4vbmxzLmpzJzsKaW1wb3J0IHsgb25VbmV4cGVjdGVkRXJyb3IgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9lcnJvcnMuanMnOwppbXBvcnQgeyBTZWxlY3Rpb24gfSBmcm9tICcuLi9jb3JlL3NlbGVjdGlvbi5qcyc7CmltcG9ydCB7IFVSSSB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL3VyaS5qcyc7CmltcG9ydCB7IFRleHRDaGFuZ2UsIGNvbXByZXNzQ29uc2VjdXRpdmVUZXh0Q2hhbmdlcyB9IGZyb20gJy4uL2NvcmUvdGV4dENoYW5nZS5qcyc7CmltcG9ydCAqIGFzIGJ1ZmZlciBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9idWZmZXIuanMnOwppbXBvcnQgeyBiYXNlbmFtZSB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL3Jlc291cmNlcy5qcyc7CmZ1bmN0aW9uIHVyaUdldENvbXBhcmlzb25LZXkocmVzb3VyY2UpIHsKICByZXR1cm4gcmVzb3VyY2UudG9TdHJpbmcoKTsKfQpleHBvcnQgdmFyIFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU2luZ2xlTW9kZWxFZGl0U3RhY2tEYXRhKGJlZm9yZVZlcnNpb25JZCwgYWZ0ZXJWZXJzaW9uSWQsIGJlZm9yZUVPTCwgYWZ0ZXJFT0wsIGJlZm9yZUN1cnNvclN0YXRlLCBhZnRlckN1cnNvclN0YXRlLCBjaGFuZ2VzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2luZ2xlTW9kZWxFZGl0U3RhY2tEYXRhKTsKICAgIHRoaXMuYmVmb3JlVmVyc2lvbklkID0gYmVmb3JlVmVyc2lvbklkOwogICAgdGhpcy5hZnRlclZlcnNpb25JZCA9IGFmdGVyVmVyc2lvbklkOwogICAgdGhpcy5iZWZvcmVFT0wgPSBiZWZvcmVFT0w7CiAgICB0aGlzLmFmdGVyRU9MID0gYWZ0ZXJFT0w7CiAgICB0aGlzLmJlZm9yZUN1cnNvclN0YXRlID0gYmVmb3JlQ3Vyc29yU3RhdGU7CiAgICB0aGlzLmFmdGVyQ3Vyc29yU3RhdGUgPSBhZnRlckN1cnNvclN0YXRlOwogICAgdGhpcy5jaGFuZ2VzID0gY2hhbmdlczsKICB9CiAgX2NyZWF0ZUNsYXNzKFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YSwgW3sKICAgIGtleTogImFwcGVuZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXBwZW5kKG1vZGVsLCB0ZXh0Q2hhbmdlcywgYWZ0ZXJFT0wsIGFmdGVyVmVyc2lvbklkLCBhZnRlckN1cnNvclN0YXRlKSB7CiAgICAgIGlmICh0ZXh0Q2hhbmdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5jaGFuZ2VzID0gY29tcHJlc3NDb25zZWN1dGl2ZVRleHRDaGFuZ2VzKHRoaXMuY2hhbmdlcywgdGV4dENoYW5nZXMpOwogICAgICB9CiAgICAgIHRoaXMuYWZ0ZXJFT0wgPSBhZnRlckVPTDsKICAgICAgdGhpcy5hZnRlclZlcnNpb25JZCA9IGFmdGVyVmVyc2lvbklkOwogICAgICB0aGlzLmFmdGVyQ3Vyc29yU3RhdGUgPSBhZnRlckN1cnNvclN0YXRlOwogICAgfQogIH0sIHsKICAgIGtleTogInNlcmlhbGl6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VyaWFsaXplKCkgewogICAgICB2YXIgbmVjZXNzYXJ5U2l6ZSA9ICs0IC8vIGJlZm9yZVZlcnNpb25JZAogICAgICArIDQgLy8gYWZ0ZXJWZXJzaW9uSWQKICAgICAgKyAxIC8vIGJlZm9yZUVPTAogICAgICArIDEgLy8gYWZ0ZXJFT0wKICAgICAgKyBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEuX3dyaXRlU2VsZWN0aW9uc1NpemUodGhpcy5iZWZvcmVDdXJzb3JTdGF0ZSkgKyBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEuX3dyaXRlU2VsZWN0aW9uc1NpemUodGhpcy5hZnRlckN1cnNvclN0YXRlKSArIDQgLy8gY2hhbmdlIGNvdW50CiAgICAgIDsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuY2hhbmdlcyksCiAgICAgICAgX3N0ZXA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBjaGFuZ2UgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIG5lY2Vzc2FyeVNpemUgKz0gY2hhbmdlLndyaXRlU2l6ZSgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CiAgICAgIHZhciBiID0gbmV3IFVpbnQ4QXJyYXkobmVjZXNzYXJ5U2l6ZSk7CiAgICAgIHZhciBvZmZzZXQgPSAwOwogICAgICBidWZmZXIud3JpdGVVSW50MzJCRShiLCB0aGlzLmJlZm9yZVZlcnNpb25JZCwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IDQ7CiAgICAgIGJ1ZmZlci53cml0ZVVJbnQzMkJFKGIsIHRoaXMuYWZ0ZXJWZXJzaW9uSWQsIG9mZnNldCk7CiAgICAgIG9mZnNldCArPSA0OwogICAgICBidWZmZXIud3JpdGVVSW50OChiLCB0aGlzLmJlZm9yZUVPTCwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IDE7CiAgICAgIGJ1ZmZlci53cml0ZVVJbnQ4KGIsIHRoaXMuYWZ0ZXJFT0wsIG9mZnNldCk7CiAgICAgIG9mZnNldCArPSAxOwogICAgICBvZmZzZXQgPSBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEuX3dyaXRlU2VsZWN0aW9ucyhiLCB0aGlzLmJlZm9yZUN1cnNvclN0YXRlLCBvZmZzZXQpOwogICAgICBvZmZzZXQgPSBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEuX3dyaXRlU2VsZWN0aW9ucyhiLCB0aGlzLmFmdGVyQ3Vyc29yU3RhdGUsIG9mZnNldCk7CiAgICAgIGJ1ZmZlci53cml0ZVVJbnQzMkJFKGIsIHRoaXMuY2hhbmdlcy5sZW5ndGgsIG9mZnNldCk7CiAgICAgIG9mZnNldCArPSA0OwogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuY2hhbmdlcyksCiAgICAgICAgX3N0ZXAyOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX2NoYW5nZSA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgIG9mZnNldCA9IF9jaGFuZ2Uud3JpdGUoYiwgb2Zmc2V0KTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CiAgICAgIHJldHVybiBiLmJ1ZmZlcjsKICAgIH0KICB9XSwgW3sKICAgIGtleTogImNyZWF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKG1vZGVsLCBiZWZvcmVDdXJzb3JTdGF0ZSkgewogICAgICB2YXIgYWx0ZXJuYXRpdmVWZXJzaW9uSWQgPSBtb2RlbC5nZXRBbHRlcm5hdGl2ZVZlcnNpb25JZCgpOwogICAgICB2YXIgZW9sID0gZ2V0TW9kZWxFT0wobW9kZWwpOwogICAgICByZXR1cm4gbmV3IFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YShhbHRlcm5hdGl2ZVZlcnNpb25JZCwgYWx0ZXJuYXRpdmVWZXJzaW9uSWQsIGVvbCwgZW9sLCBiZWZvcmVDdXJzb3JTdGF0ZSwgYmVmb3JlQ3Vyc29yU3RhdGUsIFtdKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfd3JpdGVTZWxlY3Rpb25zU2l6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3dyaXRlU2VsZWN0aW9uc1NpemUoc2VsZWN0aW9ucykgewogICAgICByZXR1cm4gNCArIDQgKiA0ICogKHNlbGVjdGlvbnMgPyBzZWxlY3Rpb25zLmxlbmd0aCA6IDApOwogICAgfQogIH0sIHsKICAgIGtleTogIl93cml0ZVNlbGVjdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF93cml0ZVNlbGVjdGlvbnMoYiwgc2VsZWN0aW9ucywgb2Zmc2V0KSB7CiAgICAgIGJ1ZmZlci53cml0ZVVJbnQzMkJFKGIsIHNlbGVjdGlvbnMgPyBzZWxlY3Rpb25zLmxlbmd0aCA6IDAsIG9mZnNldCk7CiAgICAgIG9mZnNldCArPSA0OwogICAgICBpZiAoc2VsZWN0aW9ucykgewogICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc2VsZWN0aW9ucyksCiAgICAgICAgICBfc3RlcDM7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgIGJ1ZmZlci53cml0ZVVJbnQzMkJFKGIsIHNlbGVjdGlvbi5zZWxlY3Rpb25TdGFydExpbmVOdW1iZXIsIG9mZnNldCk7CiAgICAgICAgICAgIG9mZnNldCArPSA0OwogICAgICAgICAgICBidWZmZXIud3JpdGVVSW50MzJCRShiLCBzZWxlY3Rpb24uc2VsZWN0aW9uU3RhcnRDb2x1bW4sIG9mZnNldCk7CiAgICAgICAgICAgIG9mZnNldCArPSA0OwogICAgICAgICAgICBidWZmZXIud3JpdGVVSW50MzJCRShiLCBzZWxlY3Rpb24ucG9zaXRpb25MaW5lTnVtYmVyLCBvZmZzZXQpOwogICAgICAgICAgICBvZmZzZXQgKz0gNDsKICAgICAgICAgICAgYnVmZmVyLndyaXRlVUludDMyQkUoYiwgc2VsZWN0aW9uLnBvc2l0aW9uQ29sdW1uLCBvZmZzZXQpOwogICAgICAgICAgICBvZmZzZXQgKz0gNDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG9mZnNldDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcmVhZFNlbGVjdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWFkU2VsZWN0aW9ucyhiLCBvZmZzZXQsIGRlc3QpIHsKICAgICAgdmFyIGNvdW50ID0gYnVmZmVyLnJlYWRVSW50MzJCRShiLCBvZmZzZXQpOwogICAgICBvZmZzZXQgKz0gNDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CiAgICAgICAgdmFyIHNlbGVjdGlvblN0YXJ0TGluZU51bWJlciA9IGJ1ZmZlci5yZWFkVUludDMyQkUoYiwgb2Zmc2V0KTsKICAgICAgICBvZmZzZXQgKz0gNDsKICAgICAgICB2YXIgc2VsZWN0aW9uU3RhcnRDb2x1bW4gPSBidWZmZXIucmVhZFVJbnQzMkJFKGIsIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0ICs9IDQ7CiAgICAgICAgdmFyIHBvc2l0aW9uTGluZU51bWJlciA9IGJ1ZmZlci5yZWFkVUludDMyQkUoYiwgb2Zmc2V0KTsKICAgICAgICBvZmZzZXQgKz0gNDsKICAgICAgICB2YXIgcG9zaXRpb25Db2x1bW4gPSBidWZmZXIucmVhZFVJbnQzMkJFKGIsIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0ICs9IDQ7CiAgICAgICAgZGVzdC5wdXNoKG5ldyBTZWxlY3Rpb24oc2VsZWN0aW9uU3RhcnRMaW5lTnVtYmVyLCBzZWxlY3Rpb25TdGFydENvbHVtbiwgcG9zaXRpb25MaW5lTnVtYmVyLCBwb3NpdGlvbkNvbHVtbikpOwogICAgICB9CiAgICAgIHJldHVybiBvZmZzZXQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVzZXJpYWxpemUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplKHNvdXJjZSkgewogICAgICB2YXIgYiA9IG5ldyBVaW50OEFycmF5KHNvdXJjZSk7CiAgICAgIHZhciBvZmZzZXQgPSAwOwogICAgICB2YXIgYmVmb3JlVmVyc2lvbklkID0gYnVmZmVyLnJlYWRVSW50MzJCRShiLCBvZmZzZXQpOwogICAgICBvZmZzZXQgKz0gNDsKICAgICAgdmFyIGFmdGVyVmVyc2lvbklkID0gYnVmZmVyLnJlYWRVSW50MzJCRShiLCBvZmZzZXQpOwogICAgICBvZmZzZXQgKz0gNDsKICAgICAgdmFyIGJlZm9yZUVPTCA9IGJ1ZmZlci5yZWFkVUludDgoYiwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IDE7CiAgICAgIHZhciBhZnRlckVPTCA9IGJ1ZmZlci5yZWFkVUludDgoYiwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IDE7CiAgICAgIHZhciBiZWZvcmVDdXJzb3JTdGF0ZSA9IFtdOwogICAgICBvZmZzZXQgPSBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEuX3JlYWRTZWxlY3Rpb25zKGIsIG9mZnNldCwgYmVmb3JlQ3Vyc29yU3RhdGUpOwogICAgICB2YXIgYWZ0ZXJDdXJzb3JTdGF0ZSA9IFtdOwogICAgICBvZmZzZXQgPSBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEuX3JlYWRTZWxlY3Rpb25zKGIsIG9mZnNldCwgYWZ0ZXJDdXJzb3JTdGF0ZSk7CiAgICAgIHZhciBjaGFuZ2VDb3VudCA9IGJ1ZmZlci5yZWFkVUludDMyQkUoYiwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IDQ7CiAgICAgIHZhciBjaGFuZ2VzID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlQ291bnQ7IGkrKykgewogICAgICAgIG9mZnNldCA9IFRleHRDaGFuZ2UucmVhZChiLCBvZmZzZXQsIGNoYW5nZXMpOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgU2luZ2xlTW9kZWxFZGl0U3RhY2tEYXRhKGJlZm9yZVZlcnNpb25JZCwgYWZ0ZXJWZXJzaW9uSWQsIGJlZm9yZUVPTCwgYWZ0ZXJFT0wsIGJlZm9yZUN1cnNvclN0YXRlLCBhZnRlckN1cnNvclN0YXRlLCBjaGFuZ2VzKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YTsKfSgpOwpleHBvcnQgdmFyIFNpbmdsZU1vZGVsRWRpdFN0YWNrRWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU2luZ2xlTW9kZWxFZGl0U3RhY2tFbGVtZW50KGxhYmVsLCBjb2RlLCBtb2RlbCwgYmVmb3JlQ3Vyc29yU3RhdGUpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTaW5nbGVNb2RlbEVkaXRTdGFja0VsZW1lbnQpOwogICAgdGhpcy5sYWJlbCA9IGxhYmVsOwogICAgdGhpcy5jb2RlID0gY29kZTsKICAgIHRoaXMubW9kZWwgPSBtb2RlbDsKICAgIHRoaXMuX2RhdGEgPSBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEuY3JlYXRlKG1vZGVsLCBiZWZvcmVDdXJzb3JTdGF0ZSk7CiAgfQogIF9jcmVhdGVDbGFzcyhTaW5nbGVNb2RlbEVkaXRTdGFja0VsZW1lbnQsIFt7CiAgICBrZXk6ICJ0eXBlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gMCAvKiBVbmRvUmVkb0VsZW1lbnRUeXBlLlJlc291cmNlICovOwogICAgfQogIH0sIHsKICAgIGtleTogInJlc291cmNlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAoVVJJLmlzVXJpKHRoaXMubW9kZWwpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubW9kZWw7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMubW9kZWwudXJpOwogICAgfQogIH0sIHsKICAgIGtleTogInRvU3RyaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhIGluc3RhbmNlb2YgU2luZ2xlTW9kZWxFZGl0U3RhY2tEYXRhID8gdGhpcy5fZGF0YSA6IFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YS5kZXNlcmlhbGl6ZSh0aGlzLl9kYXRhKTsKICAgICAgcmV0dXJuIGRhdGEuY2hhbmdlcy5tYXAoZnVuY3Rpb24gKGNoYW5nZSkgewogICAgICAgIHJldHVybiBjaGFuZ2UudG9TdHJpbmcoKTsKICAgICAgfSkuam9pbignLCAnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXRjaGVzUmVzb3VyY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1hdGNoZXNSZXNvdXJjZShyZXNvdXJjZSkgewogICAgICB2YXIgdXJpID0gVVJJLmlzVXJpKHRoaXMubW9kZWwpID8gdGhpcy5tb2RlbCA6IHRoaXMubW9kZWwudXJpOwogICAgICByZXR1cm4gdXJpLnRvU3RyaW5nKCkgPT09IHJlc291cmNlLnRvU3RyaW5nKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0TW9kZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldE1vZGVsKG1vZGVsKSB7CiAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5BcHBlbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbkFwcGVuZChtb2RlbCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlbCA9PT0gbW9kZWwgJiYgdGhpcy5fZGF0YSBpbnN0YW5jZW9mIFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhcHBlbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGVuZChtb2RlbCwgdGV4dENoYW5nZXMsIGFmdGVyRU9MLCBhZnRlclZlcnNpb25JZCwgYWZ0ZXJDdXJzb3JTdGF0ZSkgewogICAgICBpZiAodGhpcy5fZGF0YSBpbnN0YW5jZW9mIFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YSkgewogICAgICAgIHRoaXMuX2RhdGEuYXBwZW5kKG1vZGVsLCB0ZXh0Q2hhbmdlcywgYWZ0ZXJFT0wsIGFmdGVyVmVyc2lvbklkLCBhZnRlckN1cnNvclN0YXRlKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNsb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgaWYgKHRoaXMuX2RhdGEgaW5zdGFuY2VvZiBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEpIHsKICAgICAgICB0aGlzLl9kYXRhID0gdGhpcy5fZGF0YS5zZXJpYWxpemUoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7CiAgICAgIGlmICghKHRoaXMuX2RhdGEgaW5zdGFuY2VvZiBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEpKSB7CiAgICAgICAgdGhpcy5fZGF0YSA9IFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YS5kZXNlcmlhbGl6ZSh0aGlzLl9kYXRhKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInVuZG8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVuZG8oKSB7CiAgICAgIGlmIChVUkkuaXNVcmkodGhpcy5tb2RlbCkpIHsKICAgICAgICAvLyBkb24ndCBoYXZlIGEgbW9kZWwKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgU2luZ2xlTW9kZWxFZGl0U3RhY2tFbGVtZW50Iik7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX2RhdGEgaW5zdGFuY2VvZiBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEpIHsKICAgICAgICB0aGlzLl9kYXRhID0gdGhpcy5fZGF0YS5zZXJpYWxpemUoKTsKICAgICAgfQogICAgICB2YXIgZGF0YSA9IFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YS5kZXNlcmlhbGl6ZSh0aGlzLl9kYXRhKTsKICAgICAgdGhpcy5tb2RlbC5fYXBwbHlVbmRvKGRhdGEuY2hhbmdlcywgZGF0YS5iZWZvcmVFT0wsIGRhdGEuYmVmb3JlVmVyc2lvbklkLCBkYXRhLmJlZm9yZUN1cnNvclN0YXRlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWRvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWRvKCkgewogICAgICBpZiAoVVJJLmlzVXJpKHRoaXMubW9kZWwpKSB7CiAgICAgICAgLy8gZG9uJ3QgaGF2ZSBhIG1vZGVsCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIFNpbmdsZU1vZGVsRWRpdFN0YWNrRWxlbWVudCIpOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9kYXRhIGluc3RhbmNlb2YgU2luZ2xlTW9kZWxFZGl0U3RhY2tEYXRhKSB7CiAgICAgICAgdGhpcy5fZGF0YSA9IHRoaXMuX2RhdGEuc2VyaWFsaXplKCk7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSBTaW5nbGVNb2RlbEVkaXRTdGFja0RhdGEuZGVzZXJpYWxpemUodGhpcy5fZGF0YSk7CiAgICAgIHRoaXMubW9kZWwuX2FwcGx5UmVkbyhkYXRhLmNoYW5nZXMsIGRhdGEuYWZ0ZXJFT0wsIGRhdGEuYWZ0ZXJWZXJzaW9uSWQsIGRhdGEuYWZ0ZXJDdXJzb3JTdGF0ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGVhcFNpemUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhlYXBTaXplKCkgewogICAgICBpZiAodGhpcy5fZGF0YSBpbnN0YW5jZW9mIFNpbmdsZU1vZGVsRWRpdFN0YWNrRGF0YSkgewogICAgICAgIHRoaXMuX2RhdGEgPSB0aGlzLl9kYXRhLnNlcmlhbGl6ZSgpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9kYXRhLmJ5dGVMZW5ndGggKyAxNjggLypoZWFwIG92ZXJoZWFkKi87CiAgICB9CiAgfV0pOwogIHJldHVybiBTaW5nbGVNb2RlbEVkaXRTdGFja0VsZW1lbnQ7Cn0oKTsKZXhwb3J0IHZhciBNdWx0aU1vZGVsRWRpdFN0YWNrRWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gTXVsdGlNb2RlbEVkaXRTdGFja0VsZW1lbnQobGFiZWwsIGNvZGUsIGVkaXRTdGFja0VsZW1lbnRzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTXVsdGlNb2RlbEVkaXRTdGFja0VsZW1lbnQpOwogICAgdGhpcy5sYWJlbCA9IGxhYmVsOwogICAgdGhpcy5jb2RlID0gY29kZTsKICAgIHRoaXMudHlwZSA9IDEgLyogVW5kb1JlZG9FbGVtZW50VHlwZS5Xb3Jrc3BhY2UgKi87CiAgICB0aGlzLl9pc09wZW4gPSB0cnVlOwogICAgdGhpcy5fZWRpdFN0YWNrRWxlbWVudHNBcnIgPSBlZGl0U3RhY2tFbGVtZW50cy5zbGljZSgwKTsKICAgIHRoaXMuX2VkaXRTdGFja0VsZW1lbnRzTWFwID0gbmV3IE1hcCgpOwogICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLl9lZGl0U3RhY2tFbGVtZW50c0FyciksCiAgICAgIF9zdGVwNDsKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIGVkaXRTdGFja0VsZW1lbnQgPSBfc3RlcDQudmFsdWU7CiAgICAgICAgdmFyIGtleSA9IHVyaUdldENvbXBhcmlzb25LZXkoZWRpdFN0YWNrRWxlbWVudC5yZXNvdXJjZSk7CiAgICAgICAgdGhpcy5fZWRpdFN0YWNrRWxlbWVudHNNYXAuc2V0KGtleSwgZWRpdFN0YWNrRWxlbWVudCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgfQogICAgdGhpcy5fZGVsZWdhdGUgPSBudWxsOwogIH0KICBfY3JlYXRlQ2xhc3MoTXVsdGlNb2RlbEVkaXRTdGFja0VsZW1lbnQsIFt7CiAgICBrZXk6ICJyZXNvdXJjZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9lZGl0U3RhY2tFbGVtZW50c0Fyci5tYXAoZnVuY3Rpb24gKGVkaXRTdGFja0VsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZWRpdFN0YWNrRWxlbWVudC5yZXNvdXJjZTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJlcGFyZVVuZG9SZWRvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVwYXJlVW5kb1JlZG8oKSB7CiAgICAgIGlmICh0aGlzLl9kZWxlZ2F0ZSkgewogICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5wcmVwYXJlVW5kb1JlZG8odGhpcyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXRjaGVzUmVzb3VyY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1hdGNoZXNSZXNvdXJjZShyZXNvdXJjZSkgewogICAgICB2YXIga2V5ID0gdXJpR2V0Q29tcGFyaXNvbktleShyZXNvdXJjZSk7CiAgICAgIHJldHVybiB0aGlzLl9lZGl0U3RhY2tFbGVtZW50c01hcC5oYXMoa2V5KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRNb2RlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TW9kZWwobW9kZWwpIHsKICAgICAgdmFyIGtleSA9IHVyaUdldENvbXBhcmlzb25LZXkoVVJJLmlzVXJpKG1vZGVsKSA/IG1vZGVsIDogbW9kZWwudXJpKTsKICAgICAgaWYgKHRoaXMuX2VkaXRTdGFja0VsZW1lbnRzTWFwLmhhcyhrZXkpKSB7CiAgICAgICAgdGhpcy5fZWRpdFN0YWNrRWxlbWVudHNNYXAuZ2V0KGtleSkuc2V0TW9kZWwobW9kZWwpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuQXBwZW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5BcHBlbmQobW9kZWwpIHsKICAgICAgaWYgKCF0aGlzLl9pc09wZW4pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGtleSA9IHVyaUdldENvbXBhcmlzb25LZXkobW9kZWwudXJpKTsKICAgICAgaWYgKHRoaXMuX2VkaXRTdGFja0VsZW1lbnRzTWFwLmhhcyhrZXkpKSB7CiAgICAgICAgdmFyIGVkaXRTdGFja0VsZW1lbnQgPSB0aGlzLl9lZGl0U3RhY2tFbGVtZW50c01hcC5nZXQoa2V5KTsKICAgICAgICByZXR1cm4gZWRpdFN0YWNrRWxlbWVudC5jYW5BcHBlbmQobW9kZWwpOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhcHBlbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGVuZChtb2RlbCwgdGV4dENoYW5nZXMsIGFmdGVyRU9MLCBhZnRlclZlcnNpb25JZCwgYWZ0ZXJDdXJzb3JTdGF0ZSkgewogICAgICB2YXIga2V5ID0gdXJpR2V0Q29tcGFyaXNvbktleShtb2RlbC51cmkpOwogICAgICB2YXIgZWRpdFN0YWNrRWxlbWVudCA9IHRoaXMuX2VkaXRTdGFja0VsZW1lbnRzTWFwLmdldChrZXkpOwogICAgICBlZGl0U3RhY2tFbGVtZW50LmFwcGVuZChtb2RlbCwgdGV4dENoYW5nZXMsIGFmdGVyRU9MLCBhZnRlclZlcnNpb25JZCwgYWZ0ZXJDdXJzb3JTdGF0ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvcGVuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCkgewogICAgICAvLyBjYW5ub3QgcmVvcGVuCiAgICB9CiAgfSwgewogICAga2V5OiAidW5kbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5kbygpIHsKICAgICAgdGhpcy5faXNPcGVuID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5fZWRpdFN0YWNrRWxlbWVudHNBcnIpLAogICAgICAgIF9zdGVwNTsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGVkaXRTdGFja0VsZW1lbnQgPSBfc3RlcDUudmFsdWU7CiAgICAgICAgICBlZGl0U3RhY2tFbGVtZW50LnVuZG8oKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVkbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVkbygpIHsKICAgICAgdmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLl9lZGl0U3RhY2tFbGVtZW50c0FyciksCiAgICAgICAgX3N0ZXA2OwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yNi5zKCk7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZWRpdFN0YWNrRWxlbWVudCA9IF9zdGVwNi52YWx1ZTsKICAgICAgICAgIGVkaXRTdGFja0VsZW1lbnQucmVkbygpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJoZWFwU2l6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGVhcFNpemUocmVzb3VyY2UpIHsKICAgICAgdmFyIGtleSA9IHVyaUdldENvbXBhcmlzb25LZXkocmVzb3VyY2UpOwogICAgICBpZiAodGhpcy5fZWRpdFN0YWNrRWxlbWVudHNNYXAuaGFzKGtleSkpIHsKICAgICAgICB2YXIgZWRpdFN0YWNrRWxlbWVudCA9IHRoaXMuX2VkaXRTdGFja0VsZW1lbnRzTWFwLmdldChrZXkpOwogICAgICAgIHJldHVybiBlZGl0U3RhY2tFbGVtZW50LmhlYXBTaXplKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIDA7CiAgICB9CiAgfSwgewogICAga2V5OiAic3BsaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNwbGl0KCkgewogICAgICByZXR1cm4gdGhpcy5fZWRpdFN0YWNrRWxlbWVudHNBcnI7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9TdHJpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5fZWRpdFN0YWNrRWxlbWVudHNBcnIpLAogICAgICAgIF9zdGVwNzsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGVkaXRTdGFja0VsZW1lbnQgPSBfc3RlcDcudmFsdWU7CiAgICAgICAgICByZXN1bHQucHVzaCgiIi5jb25jYXQoYmFzZW5hbWUoZWRpdFN0YWNrRWxlbWVudC5yZXNvdXJjZSksICI6ICIpLmNvbmNhdChlZGl0U3RhY2tFbGVtZW50KSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I3LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I3LmYoKTsKICAgICAgfQogICAgICByZXR1cm4gInsiLmNvbmNhdChyZXN1bHQuam9pbignLCAnKSwgIn0iKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE11bHRpTW9kZWxFZGl0U3RhY2tFbGVtZW50Owp9KCk7CmZ1bmN0aW9uIGdldE1vZGVsRU9MKG1vZGVsKSB7CiAgdmFyIGVvbCA9IG1vZGVsLmdldEVPTCgpOwogIGlmIChlb2wgPT09ICdcbicpIHsKICAgIHJldHVybiAwIC8qIEVuZE9mTGluZVNlcXVlbmNlLkxGICovOwogIH0gZWxzZSB7CiAgICByZXR1cm4gMSAvKiBFbmRPZkxpbmVTZXF1ZW5jZS5DUkxGICovOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uIGlzRWRpdFN0YWNrRWxlbWVudChlbGVtZW50KSB7CiAgaWYgKCFlbGVtZW50KSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiBlbGVtZW50IGluc3RhbmNlb2YgU2luZ2xlTW9kZWxFZGl0U3RhY2tFbGVtZW50IHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBNdWx0aU1vZGVsRWRpdFN0YWNrRWxlbWVudDsKfQpleHBvcnQgdmFyIEVkaXRTdGFjayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRWRpdFN0YWNrKG1vZGVsLCB1bmRvUmVkb1NlcnZpY2UpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFZGl0U3RhY2spOwogICAgdGhpcy5fbW9kZWwgPSBtb2RlbDsKICAgIHRoaXMuX3VuZG9SZWRvU2VydmljZSA9IHVuZG9SZWRvU2VydmljZTsKICB9CiAgX2NyZWF0ZUNsYXNzKEVkaXRTdGFjaywgW3sKICAgIGtleTogInB1c2hTdGFja0VsZW1lbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2hTdGFja0VsZW1lbnQoKSB7CiAgICAgIHZhciBsYXN0RWxlbWVudCA9IHRoaXMuX3VuZG9SZWRvU2VydmljZS5nZXRMYXN0RWxlbWVudCh0aGlzLl9tb2RlbC51cmkpOwogICAgICBpZiAoaXNFZGl0U3RhY2tFbGVtZW50KGxhc3RFbGVtZW50KSkgewogICAgICAgIGxhc3RFbGVtZW50LmNsb3NlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb3BTdGFja0VsZW1lbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBvcFN0YWNrRWxlbWVudCgpIHsKICAgICAgdmFyIGxhc3RFbGVtZW50ID0gdGhpcy5fdW5kb1JlZG9TZXJ2aWNlLmdldExhc3RFbGVtZW50KHRoaXMuX21vZGVsLnVyaSk7CiAgICAgIGlmIChpc0VkaXRTdGFja0VsZW1lbnQobGFzdEVsZW1lbnQpKSB7CiAgICAgICAgbGFzdEVsZW1lbnQub3BlbigpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xlYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICB0aGlzLl91bmRvUmVkb1NlcnZpY2UucmVtb3ZlRWxlbWVudHModGhpcy5fbW9kZWwudXJpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0T3JDcmVhdGVFZGl0U3RhY2tFbGVtZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0T3JDcmVhdGVFZGl0U3RhY2tFbGVtZW50KGJlZm9yZUN1cnNvclN0YXRlKSB7CiAgICAgIHZhciBsYXN0RWxlbWVudCA9IHRoaXMuX3VuZG9SZWRvU2VydmljZS5nZXRMYXN0RWxlbWVudCh0aGlzLl9tb2RlbC51cmkpOwogICAgICBpZiAoaXNFZGl0U3RhY2tFbGVtZW50KGxhc3RFbGVtZW50KSAmJiBsYXN0RWxlbWVudC5jYW5BcHBlbmQodGhpcy5fbW9kZWwpKSB7CiAgICAgICAgcmV0dXJuIGxhc3RFbGVtZW50OwogICAgICB9CiAgICAgIHZhciBuZXdFbGVtZW50ID0gbmV3IFNpbmdsZU1vZGVsRWRpdFN0YWNrRWxlbWVudChubHMubG9jYWxpemUoJ2VkaXQnLCAiVHlwaW5nIiksICd1bmRvcmVkby50ZXh0QnVmZmVyRWRpdCcsIHRoaXMuX21vZGVsLCBiZWZvcmVDdXJzb3JTdGF0ZSk7CiAgICAgIHRoaXMuX3VuZG9SZWRvU2VydmljZS5wdXNoRWxlbWVudChuZXdFbGVtZW50KTsKICAgICAgcmV0dXJuIG5ld0VsZW1lbnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAicHVzaEVPTCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaEVPTChlb2wpIHsKICAgICAgdmFyIGVkaXRTdGFja0VsZW1lbnQgPSB0aGlzLl9nZXRPckNyZWF0ZUVkaXRTdGFja0VsZW1lbnQobnVsbCk7CiAgICAgIHRoaXMuX21vZGVsLnNldEVPTChlb2wpOwogICAgICBlZGl0U3RhY2tFbGVtZW50LmFwcGVuZCh0aGlzLl9tb2RlbCwgW10sIGdldE1vZGVsRU9MKHRoaXMuX21vZGVsKSwgdGhpcy5fbW9kZWwuZ2V0QWx0ZXJuYXRpdmVWZXJzaW9uSWQoKSwgbnVsbCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicHVzaEVkaXRPcGVyYXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2hFZGl0T3BlcmF0aW9uKGJlZm9yZUN1cnNvclN0YXRlLCBlZGl0T3BlcmF0aW9ucywgY3Vyc29yU3RhdGVDb21wdXRlcikgewogICAgICB2YXIgZWRpdFN0YWNrRWxlbWVudCA9IHRoaXMuX2dldE9yQ3JlYXRlRWRpdFN0YWNrRWxlbWVudChiZWZvcmVDdXJzb3JTdGF0ZSk7CiAgICAgIHZhciBpbnZlcnNlRWRpdE9wZXJhdGlvbnMgPSB0aGlzLl9tb2RlbC5hcHBseUVkaXRzKGVkaXRPcGVyYXRpb25zLCB0cnVlKTsKICAgICAgdmFyIGFmdGVyQ3Vyc29yU3RhdGUgPSBFZGl0U3RhY2suX2NvbXB1dGVDdXJzb3JTdGF0ZShjdXJzb3JTdGF0ZUNvbXB1dGVyLCBpbnZlcnNlRWRpdE9wZXJhdGlvbnMpOwogICAgICB2YXIgdGV4dENoYW5nZXMgPSBpbnZlcnNlRWRpdE9wZXJhdGlvbnMubWFwKGZ1bmN0aW9uIChvcCwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgdGV4dENoYW5nZTogb3AudGV4dENoYW5nZQogICAgICAgIH07CiAgICAgIH0pOwogICAgICB0ZXh0Q2hhbmdlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgaWYgKGEudGV4dENoYW5nZS5vbGRQb3NpdGlvbiA9PT0gYi50ZXh0Q2hhbmdlLm9sZFBvc2l0aW9uKSB7CiAgICAgICAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhLnRleHRDaGFuZ2Uub2xkUG9zaXRpb24gLSBiLnRleHRDaGFuZ2Uub2xkUG9zaXRpb247CiAgICAgIH0pOwogICAgICBlZGl0U3RhY2tFbGVtZW50LmFwcGVuZCh0aGlzLl9tb2RlbCwgdGV4dENoYW5nZXMubWFwKGZ1bmN0aW9uIChvcCkgewogICAgICAgIHJldHVybiBvcC50ZXh0Q2hhbmdlOwogICAgICB9KSwgZ2V0TW9kZWxFT0wodGhpcy5fbW9kZWwpLCB0aGlzLl9tb2RlbC5nZXRBbHRlcm5hdGl2ZVZlcnNpb25JZCgpLCBhZnRlckN1cnNvclN0YXRlKTsKICAgICAgcmV0dXJuIGFmdGVyQ3Vyc29yU3RhdGU7CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJfY29tcHV0ZUN1cnNvclN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY29tcHV0ZUN1cnNvclN0YXRlKGN1cnNvclN0YXRlQ29tcHV0ZXIsIGludmVyc2VFZGl0T3BlcmF0aW9ucykgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBjdXJzb3JTdGF0ZUNvbXB1dGVyID8gY3Vyc29yU3RhdGVDb21wdXRlcihpbnZlcnNlRWRpdE9wZXJhdGlvbnMpIDogbnVsbDsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIG9uVW5leHBlY3RlZEVycm9yKGUpOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBFZGl0U3RhY2s7Cn0oKTs="},{"version":3,"names":["nls","onUnexpectedError","Selection","URI","TextChange","compressConsecutiveTextChanges","buffer","basename","uriGetComparisonKey","resource","toString","SingleModelEditStackData","beforeVersionId","afterVersionId","beforeEOL","afterEOL","beforeCursorState","afterCursorState","changes","model","textChanges","length","necessarySize","_writeSelectionsSize","change","writeSize","b","Uint8Array","offset","writeUInt32BE","writeUInt8","_writeSelections","write","alternativeVersionId","getAlternativeVersionId","eol","getModelEOL","selections","selection","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","dest","count","readUInt32BE","i","push","source","readUInt8","_readSelections","changeCount","read","SingleModelEditStackElement","label","code","_data","create","isUri","uri","data","deserialize","map","join","append","serialize","Error","_applyUndo","_applyRedo","byteLength","MultiModelEditStackElement","editStackElements","type","_isOpen","_editStackElementsArr","slice","_editStackElementsMap","Map","editStackElement","key","set","_delegate","prepareUndoRedo","has","get","setModel","canAppend","undo","redo","heapSize","result","getEOL","isEditStackElement","element","EditStack","undoRedoService","_model","_undoRedoService","lastElement","getLastElement","close","open","removeElements","newElement","localize","pushElement","_getOrCreateEditStackElement","setEOL","editOperations","cursorStateComputer","inverseEditOperations","applyEdits","_computeCursorState","op","index","textChange","sort","a","oldPosition","e"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/common/model/editStack.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../../nls.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Selection } from '../core/selection.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { TextChange, compressConsecutiveTextChanges } from '../core/textChange.js';\nimport * as buffer from '../../../base/common/buffer.js';\nimport { basename } from '../../../base/common/resources.js';\nfunction uriGetComparisonKey(resource) {\n    return resource.toString();\n}\nexport class SingleModelEditStackData {\n    constructor(beforeVersionId, afterVersionId, beforeEOL, afterEOL, beforeCursorState, afterCursorState, changes) {\n        this.beforeVersionId = beforeVersionId;\n        this.afterVersionId = afterVersionId;\n        this.beforeEOL = beforeEOL;\n        this.afterEOL = afterEOL;\n        this.beforeCursorState = beforeCursorState;\n        this.afterCursorState = afterCursorState;\n        this.changes = changes;\n    }\n    static create(model, beforeCursorState) {\n        const alternativeVersionId = model.getAlternativeVersionId();\n        const eol = getModelEOL(model);\n        return new SingleModelEditStackData(alternativeVersionId, alternativeVersionId, eol, eol, beforeCursorState, beforeCursorState, []);\n    }\n    append(model, textChanges, afterEOL, afterVersionId, afterCursorState) {\n        if (textChanges.length > 0) {\n            this.changes = compressConsecutiveTextChanges(this.changes, textChanges);\n        }\n        this.afterEOL = afterEOL;\n        this.afterVersionId = afterVersionId;\n        this.afterCursorState = afterCursorState;\n    }\n    static _writeSelectionsSize(selections) {\n        return 4 + 4 * 4 * (selections ? selections.length : 0);\n    }\n    static _writeSelections(b, selections, offset) {\n        buffer.writeUInt32BE(b, (selections ? selections.length : 0), offset);\n        offset += 4;\n        if (selections) {\n            for (const selection of selections) {\n                buffer.writeUInt32BE(b, selection.selectionStartLineNumber, offset);\n                offset += 4;\n                buffer.writeUInt32BE(b, selection.selectionStartColumn, offset);\n                offset += 4;\n                buffer.writeUInt32BE(b, selection.positionLineNumber, offset);\n                offset += 4;\n                buffer.writeUInt32BE(b, selection.positionColumn, offset);\n                offset += 4;\n            }\n        }\n        return offset;\n    }\n    static _readSelections(b, offset, dest) {\n        const count = buffer.readUInt32BE(b, offset);\n        offset += 4;\n        for (let i = 0; i < count; i++) {\n            const selectionStartLineNumber = buffer.readUInt32BE(b, offset);\n            offset += 4;\n            const selectionStartColumn = buffer.readUInt32BE(b, offset);\n            offset += 4;\n            const positionLineNumber = buffer.readUInt32BE(b, offset);\n            offset += 4;\n            const positionColumn = buffer.readUInt32BE(b, offset);\n            offset += 4;\n            dest.push(new Selection(selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn));\n        }\n        return offset;\n    }\n    serialize() {\n        let necessarySize = (+4 // beforeVersionId\n            + 4 // afterVersionId\n            + 1 // beforeEOL\n            + 1 // afterEOL\n            + SingleModelEditStackData._writeSelectionsSize(this.beforeCursorState)\n            + SingleModelEditStackData._writeSelectionsSize(this.afterCursorState)\n            + 4 // change count\n        );\n        for (const change of this.changes) {\n            necessarySize += change.writeSize();\n        }\n        const b = new Uint8Array(necessarySize);\n        let offset = 0;\n        buffer.writeUInt32BE(b, this.beforeVersionId, offset);\n        offset += 4;\n        buffer.writeUInt32BE(b, this.afterVersionId, offset);\n        offset += 4;\n        buffer.writeUInt8(b, this.beforeEOL, offset);\n        offset += 1;\n        buffer.writeUInt8(b, this.afterEOL, offset);\n        offset += 1;\n        offset = SingleModelEditStackData._writeSelections(b, this.beforeCursorState, offset);\n        offset = SingleModelEditStackData._writeSelections(b, this.afterCursorState, offset);\n        buffer.writeUInt32BE(b, this.changes.length, offset);\n        offset += 4;\n        for (const change of this.changes) {\n            offset = change.write(b, offset);\n        }\n        return b.buffer;\n    }\n    static deserialize(source) {\n        const b = new Uint8Array(source);\n        let offset = 0;\n        const beforeVersionId = buffer.readUInt32BE(b, offset);\n        offset += 4;\n        const afterVersionId = buffer.readUInt32BE(b, offset);\n        offset += 4;\n        const beforeEOL = buffer.readUInt8(b, offset);\n        offset += 1;\n        const afterEOL = buffer.readUInt8(b, offset);\n        offset += 1;\n        const beforeCursorState = [];\n        offset = SingleModelEditStackData._readSelections(b, offset, beforeCursorState);\n        const afterCursorState = [];\n        offset = SingleModelEditStackData._readSelections(b, offset, afterCursorState);\n        const changeCount = buffer.readUInt32BE(b, offset);\n        offset += 4;\n        const changes = [];\n        for (let i = 0; i < changeCount; i++) {\n            offset = TextChange.read(b, offset, changes);\n        }\n        return new SingleModelEditStackData(beforeVersionId, afterVersionId, beforeEOL, afterEOL, beforeCursorState, afterCursorState, changes);\n    }\n}\nexport class SingleModelEditStackElement {\n    constructor(label, code, model, beforeCursorState) {\n        this.label = label;\n        this.code = code;\n        this.model = model;\n        this._data = SingleModelEditStackData.create(model, beforeCursorState);\n    }\n    get type() {\n        return 0 /* UndoRedoElementType.Resource */;\n    }\n    get resource() {\n        if (URI.isUri(this.model)) {\n            return this.model;\n        }\n        return this.model.uri;\n    }\n    toString() {\n        const data = (this._data instanceof SingleModelEditStackData ? this._data : SingleModelEditStackData.deserialize(this._data));\n        return data.changes.map(change => change.toString()).join(', ');\n    }\n    matchesResource(resource) {\n        const uri = (URI.isUri(this.model) ? this.model : this.model.uri);\n        return (uri.toString() === resource.toString());\n    }\n    setModel(model) {\n        this.model = model;\n    }\n    canAppend(model) {\n        return (this.model === model && this._data instanceof SingleModelEditStackData);\n    }\n    append(model, textChanges, afterEOL, afterVersionId, afterCursorState) {\n        if (this._data instanceof SingleModelEditStackData) {\n            this._data.append(model, textChanges, afterEOL, afterVersionId, afterCursorState);\n        }\n    }\n    close() {\n        if (this._data instanceof SingleModelEditStackData) {\n            this._data = this._data.serialize();\n        }\n    }\n    open() {\n        if (!(this._data instanceof SingleModelEditStackData)) {\n            this._data = SingleModelEditStackData.deserialize(this._data);\n        }\n    }\n    undo() {\n        if (URI.isUri(this.model)) {\n            // don't have a model\n            throw new Error(`Invalid SingleModelEditStackElement`);\n        }\n        if (this._data instanceof SingleModelEditStackData) {\n            this._data = this._data.serialize();\n        }\n        const data = SingleModelEditStackData.deserialize(this._data);\n        this.model._applyUndo(data.changes, data.beforeEOL, data.beforeVersionId, data.beforeCursorState);\n    }\n    redo() {\n        if (URI.isUri(this.model)) {\n            // don't have a model\n            throw new Error(`Invalid SingleModelEditStackElement`);\n        }\n        if (this._data instanceof SingleModelEditStackData) {\n            this._data = this._data.serialize();\n        }\n        const data = SingleModelEditStackData.deserialize(this._data);\n        this.model._applyRedo(data.changes, data.afterEOL, data.afterVersionId, data.afterCursorState);\n    }\n    heapSize() {\n        if (this._data instanceof SingleModelEditStackData) {\n            this._data = this._data.serialize();\n        }\n        return this._data.byteLength + 168 /*heap overhead*/;\n    }\n}\nexport class MultiModelEditStackElement {\n    constructor(label, code, editStackElements) {\n        this.label = label;\n        this.code = code;\n        this.type = 1 /* UndoRedoElementType.Workspace */;\n        this._isOpen = true;\n        this._editStackElementsArr = editStackElements.slice(0);\n        this._editStackElementsMap = new Map();\n        for (const editStackElement of this._editStackElementsArr) {\n            const key = uriGetComparisonKey(editStackElement.resource);\n            this._editStackElementsMap.set(key, editStackElement);\n        }\n        this._delegate = null;\n    }\n    get resources() {\n        return this._editStackElementsArr.map(editStackElement => editStackElement.resource);\n    }\n    prepareUndoRedo() {\n        if (this._delegate) {\n            return this._delegate.prepareUndoRedo(this);\n        }\n    }\n    matchesResource(resource) {\n        const key = uriGetComparisonKey(resource);\n        return (this._editStackElementsMap.has(key));\n    }\n    setModel(model) {\n        const key = uriGetComparisonKey(URI.isUri(model) ? model : model.uri);\n        if (this._editStackElementsMap.has(key)) {\n            this._editStackElementsMap.get(key).setModel(model);\n        }\n    }\n    canAppend(model) {\n        if (!this._isOpen) {\n            return false;\n        }\n        const key = uriGetComparisonKey(model.uri);\n        if (this._editStackElementsMap.has(key)) {\n            const editStackElement = this._editStackElementsMap.get(key);\n            return editStackElement.canAppend(model);\n        }\n        return false;\n    }\n    append(model, textChanges, afterEOL, afterVersionId, afterCursorState) {\n        const key = uriGetComparisonKey(model.uri);\n        const editStackElement = this._editStackElementsMap.get(key);\n        editStackElement.append(model, textChanges, afterEOL, afterVersionId, afterCursorState);\n    }\n    close() {\n        this._isOpen = false;\n    }\n    open() {\n        // cannot reopen\n    }\n    undo() {\n        this._isOpen = false;\n        for (const editStackElement of this._editStackElementsArr) {\n            editStackElement.undo();\n        }\n    }\n    redo() {\n        for (const editStackElement of this._editStackElementsArr) {\n            editStackElement.redo();\n        }\n    }\n    heapSize(resource) {\n        const key = uriGetComparisonKey(resource);\n        if (this._editStackElementsMap.has(key)) {\n            const editStackElement = this._editStackElementsMap.get(key);\n            return editStackElement.heapSize();\n        }\n        return 0;\n    }\n    split() {\n        return this._editStackElementsArr;\n    }\n    toString() {\n        const result = [];\n        for (const editStackElement of this._editStackElementsArr) {\n            result.push(`${basename(editStackElement.resource)}: ${editStackElement}`);\n        }\n        return `{${result.join(', ')}}`;\n    }\n}\nfunction getModelEOL(model) {\n    const eol = model.getEOL();\n    if (eol === '\\n') {\n        return 0 /* EndOfLineSequence.LF */;\n    }\n    else {\n        return 1 /* EndOfLineSequence.CRLF */;\n    }\n}\nexport function isEditStackElement(element) {\n    if (!element) {\n        return false;\n    }\n    return ((element instanceof SingleModelEditStackElement) || (element instanceof MultiModelEditStackElement));\n}\nexport class EditStack {\n    constructor(model, undoRedoService) {\n        this._model = model;\n        this._undoRedoService = undoRedoService;\n    }\n    pushStackElement() {\n        const lastElement = this._undoRedoService.getLastElement(this._model.uri);\n        if (isEditStackElement(lastElement)) {\n            lastElement.close();\n        }\n    }\n    popStackElement() {\n        const lastElement = this._undoRedoService.getLastElement(this._model.uri);\n        if (isEditStackElement(lastElement)) {\n            lastElement.open();\n        }\n    }\n    clear() {\n        this._undoRedoService.removeElements(this._model.uri);\n    }\n    _getOrCreateEditStackElement(beforeCursorState) {\n        const lastElement = this._undoRedoService.getLastElement(this._model.uri);\n        if (isEditStackElement(lastElement) && lastElement.canAppend(this._model)) {\n            return lastElement;\n        }\n        const newElement = new SingleModelEditStackElement(nls.localize('edit', \"Typing\"), 'undoredo.textBufferEdit', this._model, beforeCursorState);\n        this._undoRedoService.pushElement(newElement);\n        return newElement;\n    }\n    pushEOL(eol) {\n        const editStackElement = this._getOrCreateEditStackElement(null);\n        this._model.setEOL(eol);\n        editStackElement.append(this._model, [], getModelEOL(this._model), this._model.getAlternativeVersionId(), null);\n    }\n    pushEditOperation(beforeCursorState, editOperations, cursorStateComputer) {\n        const editStackElement = this._getOrCreateEditStackElement(beforeCursorState);\n        const inverseEditOperations = this._model.applyEdits(editOperations, true);\n        const afterCursorState = EditStack._computeCursorState(cursorStateComputer, inverseEditOperations);\n        const textChanges = inverseEditOperations.map((op, index) => ({ index: index, textChange: op.textChange }));\n        textChanges.sort((a, b) => {\n            if (a.textChange.oldPosition === b.textChange.oldPosition) {\n                return a.index - b.index;\n            }\n            return a.textChange.oldPosition - b.textChange.oldPosition;\n        });\n        editStackElement.append(this._model, textChanges.map(op => op.textChange), getModelEOL(this._model), this._model.getAlternativeVersionId(), afterCursorState);\n        return afterCursorState;\n    }\n    static _computeCursorState(cursorStateComputer, inverseEditOperations) {\n        try {\n            return cursorStateComputer ? cursorStateComputer(inverseEditOperations) : null;\n        }\n        catch (e) {\n            onUnexpectedError(e);\n            return null;\n        }\n    }\n}\n"],"mappings":"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"}]}