{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseHandler.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseHandler.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiOwppbXBvcnQgX2dldCBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldC5qcyI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZi5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL1VzZXJzL3lhbmppYWppYS9EZXNrdG9wL3dvcmtzcGFjZS9hdnVlLWRhdGEtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi4KICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCmltcG9ydCAqIGFzIGRvbSBmcm9tICcuLi8uLi8uLi9iYXNlL2Jyb3dzZXIvZG9tLmpzJzsKaW1wb3J0IHsgU3RhbmRhcmRXaGVlbEV2ZW50IH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9icm93c2VyL21vdXNlRXZlbnQuanMnOwppbXBvcnQgeyBUaW1lb3V0VGltZXIgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9hc3luYy5qcyc7CmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9saWZlY3ljbGUuanMnOwppbXBvcnQgKiBhcyBwbGF0Zm9ybSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9wbGF0Zm9ybS5qcyc7CmltcG9ydCB7IEhpdFRlc3RDb250ZXh0LCBNb3VzZVRhcmdldCwgTW91c2VUYXJnZXRGYWN0b3J5IH0gZnJvbSAnLi9tb3VzZVRhcmdldC5qcyc7CmltcG9ydCB7IENsaWVudENvb3JkaW5hdGVzLCBFZGl0b3JNb3VzZUV2ZW50LCBFZGl0b3JNb3VzZUV2ZW50RmFjdG9yeSwgR2xvYmFsRWRpdG9yUG9pbnRlck1vdmVNb25pdG9yLCBjcmVhdGVFZGl0b3JQYWdlUG9zaXRpb24sIGNyZWF0ZUNvb3JkaW5hdGVzUmVsYXRpdmVUb0VkaXRvciB9IGZyb20gJy4uL2VkaXRvckRvbS5qcyc7CmltcG9ydCB7IEVkaXRvclpvb20gfSBmcm9tICcuLi8uLi9jb21tb24vY29uZmlnL2VkaXRvclpvb20uanMnOwppbXBvcnQgeyBQb3NpdGlvbiB9IGZyb20gJy4uLy4uL2NvbW1vbi9jb3JlL3Bvc2l0aW9uLmpzJzsKaW1wb3J0IHsgU2VsZWN0aW9uIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvcmUvc2VsZWN0aW9uLmpzJzsKaW1wb3J0IHsgVmlld0V2ZW50SGFuZGxlciB9IGZyb20gJy4uLy4uL2NvbW1vbi92aWV3RXZlbnRIYW5kbGVyLmpzJzsKZXhwb3J0IHZhciBNb3VzZUhhbmRsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WaWV3RXZlbnRIYW5kbGVyKSB7CiAgX2luaGVyaXRzKE1vdXNlSGFuZGxlciwgX1ZpZXdFdmVudEhhbmRsZXIpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTW91c2VIYW5kbGVyKTsKICBmdW5jdGlvbiBNb3VzZUhhbmRsZXIoY29udGV4dCwgdmlld0NvbnRyb2xsZXIsIHZpZXdIZWxwZXIpIHsKICAgIHZhciBfdGhpczsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb3VzZUhhbmRsZXIpOwogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgIF90aGlzLl9tb3VzZUxlYXZlTW9uaXRvciA9IG51bGw7CiAgICBfdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7CiAgICBfdGhpcy52aWV3Q29udHJvbGxlciA9IHZpZXdDb250cm9sbGVyOwogICAgX3RoaXMudmlld0hlbHBlciA9IHZpZXdIZWxwZXI7CiAgICBfdGhpcy5tb3VzZVRhcmdldEZhY3RvcnkgPSBuZXcgTW91c2VUYXJnZXRGYWN0b3J5KF90aGlzLl9jb250ZXh0LCB2aWV3SGVscGVyKTsKICAgIF90aGlzLl9tb3VzZURvd25PcGVyYXRpb24gPSBfdGhpcy5fcmVnaXN0ZXIobmV3IE1vdXNlRG93bk9wZXJhdGlvbihfdGhpcy5fY29udGV4dCwgX3RoaXMudmlld0NvbnRyb2xsZXIsIF90aGlzLnZpZXdIZWxwZXIsIGZ1bmN0aW9uIChlLCB0ZXN0RXZlbnRUYXJnZXQpIHsKICAgICAgcmV0dXJuIF90aGlzLl9jcmVhdGVNb3VzZVRhcmdldChlLCB0ZXN0RXZlbnRUYXJnZXQpOwogICAgfSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIF90aGlzLl9nZXRNb3VzZUNvbHVtbihlKTsKICAgIH0pKTsKICAgIF90aGlzLmxhc3RNb3VzZUxlYXZlVGltZSA9IC0xOwogICAgX3RoaXMuX2hlaWdodCA9IF90aGlzLl9jb250ZXh0LmNvbmZpZ3VyYXRpb24ub3B0aW9ucy5nZXQoMTMzIC8qIEVkaXRvck9wdGlvbi5sYXlvdXRJbmZvICovKS5oZWlnaHQ7CiAgICB2YXIgbW91c2VFdmVudHMgPSBuZXcgRWRpdG9yTW91c2VFdmVudEZhY3RvcnkoX3RoaXMudmlld0hlbHBlci52aWV3RG9tTm9kZSk7CiAgICBfdGhpcy5fcmVnaXN0ZXIobW91c2VFdmVudHMub25Db250ZXh0TWVudShfdGhpcy52aWV3SGVscGVyLnZpZXdEb21Ob2RlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gX3RoaXMuX29uQ29udGV4dE1lbnUoZSwgdHJ1ZSk7CiAgICB9KSk7CiAgICBfdGhpcy5fcmVnaXN0ZXIobW91c2VFdmVudHMub25Nb3VzZU1vdmUoX3RoaXMudmlld0hlbHBlci52aWV3RG9tTm9kZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgX3RoaXMuX29uTW91c2VNb3ZlKGUpOwogICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC92c2NvZGUvaXNzdWVzLzEzODc4OQogICAgICAvLyBXaGVuIG1vdmluZyB0aGUgbW91c2UgcmVhbGx5IHF1aWNrbHksIHRoZSBicm93c2VyIHNvbWV0aW1lcyBmb3JnZXRzIHRvCiAgICAgIC8vIHNlbmQgdXMgYSBgbW91c2VsZWF2ZWAgb3IgYG1vdXNlb3V0YCBldmVudC4gV2UgdGhlcmVmb3JlIGluc3RhbGwgaGVyZQogICAgICAvLyBhIGdsb2JhbCBgbW91c2Vtb3ZlYCBsaXN0ZW5lciB0byBtYW51YWxseSByZWNvdmVyIGlmIHRoZSBtb3VzZSBnb2VzIG91dHNpZGUKICAgICAgLy8gdGhlIGVkaXRvci4gQXMgc29vbiBhcyB0aGUgbW91c2UgbGVhdmVzIG91dHNpZGUgb2YgdGhlIGVkaXRvciwgd2UKICAgICAgLy8gcmVtb3ZlIHRoaXMgbGlzdGVuZXIKICAgICAgaWYgKCFfdGhpcy5fbW91c2VMZWF2ZU1vbml0b3IpIHsKICAgICAgICBfdGhpcy5fbW91c2VMZWF2ZU1vbml0b3IgPSBkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmICghX3RoaXMudmlld0hlbHBlci52aWV3RG9tTm9kZS5jb250YWlucyhlLnRhcmdldCkpIHsKICAgICAgICAgICAgLy8gd2VudCBvdXRzaWRlIHRoZSBlZGl0b3IhCiAgICAgICAgICAgIF90aGlzLl9vbk1vdXNlTGVhdmUobmV3IEVkaXRvck1vdXNlRXZlbnQoZSwgZmFsc2UsIF90aGlzLnZpZXdIZWxwZXIudmlld0RvbU5vZGUpKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSkpOwogICAgX3RoaXMuX3JlZ2lzdGVyKG1vdXNlRXZlbnRzLm9uTW91c2VVcChfdGhpcy52aWV3SGVscGVyLnZpZXdEb21Ob2RlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gX3RoaXMuX29uTW91c2VVcChlKTsKICAgIH0pKTsKICAgIF90aGlzLl9yZWdpc3Rlcihtb3VzZUV2ZW50cy5vbk1vdXNlTGVhdmUoX3RoaXMudmlld0hlbHBlci52aWV3RG9tTm9kZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIF90aGlzLl9vbk1vdXNlTGVhdmUoZSk7CiAgICB9KSk7CiAgICAvLyBgcG9pbnRlcmRvd25gIGV2ZW50cyBjYW4ndCBiZSB1c2VkIHRvIGRldGVybWluZSBpZiB0aGVyZSdzIGEgZG91YmxlIGNsaWNrLCBvciB0cmlwbGUgY2xpY2sKICAgIC8vIGJlY2F1c2UgdGhlaXIgYGUuZGV0YWlsYCBpcyBhbHdheXMgMC4KICAgIC8vIFdlIHdpbGwgdGhlcmVmb3JlIHNhdmUgdGhlIHBvaW50ZXIgaWQgZm9yIHRoZSBtb3VzZSBhbmQgdGhlbiByZXVzZSBpdCBpbiB0aGUgYG1vdXNlZG93bmAgZXZlbnQKICAgIC8vIGZvciBgZWxlbWVudC5zZXRQb2ludGVyQ2FwdHVyZWAuCiAgICB2YXIgY2FwdHVyZVBvaW50ZXJJZCA9IDA7CiAgICBfdGhpcy5fcmVnaXN0ZXIobW91c2VFdmVudHMub25Qb2ludGVyRG93bihfdGhpcy52aWV3SGVscGVyLnZpZXdEb21Ob2RlLCBmdW5jdGlvbiAoZSwgcG9pbnRlcklkKSB7CiAgICAgIGNhcHR1cmVQb2ludGVySWQgPSBwb2ludGVySWQ7CiAgICB9KSk7CiAgICAvLyBUaGUgYHBvaW50ZXJ1cGAgbGlzdGVuZXIgcmVnaXN0ZXJlZCBieSBgR2xvYmFsRWRpdG9yUG9pbnRlck1vdmVNb25pdG9yYCBkb2VzIG5vdCBnZXQgaW52b2tlZCAxMDAlIG9mIHRoZSB0aW1lcy4KICAgIC8vIEkgc3BlY3VsYXRlIHRoYXQgdGhpcyBpcyBiZWNhdXNlIHRoZSBgcG9pbnRlcnVwYCBsaXN0ZW5lciBpcyBvbmx5IHJlZ2lzdGVyZWQgZHVyaW5nIHRoZSBgbW91c2Vkb3duYCBldmVudCwgYW5kIHBlcmhhcHMKICAgIC8vIHRoZSBgcG9pbnRlcnVwYCBldmVudCBpcyBhbHJlYWR5IHF1ZXVlZCBmb3IgZGlzcGF0Y2hpbmcsIHdoaWNoIG1ha2VzIGl0IHRoYXQgdGhlIG5ldyBsaXN0ZW5lciBkb2Vzbid0IGdldCBmaXJlZC4KICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L3ZzY29kZS9pc3N1ZXMvMTQ2NDg2IGZvciByZXBybyBzdGVwcy4KICAgIC8vIFRvIGNvbXBlbnNhdGUgZm9yIHRoYXQsIHdlIHNpbXBseSByZWdpc3RlciBoZXJlIGEgYHBvaW50ZXJ1cGAgbGlzdGVuZXIgYW5kIGp1c3QgY29tbXVuaWNhdGUgaXQuCiAgICBfdGhpcy5fcmVnaXN0ZXIoZG9tLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihfdGhpcy52aWV3SGVscGVyLnZpZXdEb21Ob2RlLCBkb20uRXZlbnRUeXBlLlBPSU5URVJfVVAsIGZ1bmN0aW9uIChlKSB7CiAgICAgIF90aGlzLl9tb3VzZURvd25PcGVyYXRpb24ub25Qb2ludGVyVXAoKTsKICAgIH0pKTsKICAgIF90aGlzLl9yZWdpc3Rlcihtb3VzZUV2ZW50cy5vbk1vdXNlRG93bihfdGhpcy52aWV3SGVscGVyLnZpZXdEb21Ob2RlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gX3RoaXMuX29uTW91c2VEb3duKGUsIGNhcHR1cmVQb2ludGVySWQpOwogICAgfSkpOwogICAgdmFyIG9uTW91c2VXaGVlbCA9IGZ1bmN0aW9uIG9uTW91c2VXaGVlbChicm93c2VyRXZlbnQpIHsKICAgICAgX3RoaXMudmlld0NvbnRyb2xsZXIuZW1pdE1vdXNlV2hlZWwoYnJvd3NlckV2ZW50KTsKICAgICAgaWYgKCFfdGhpcy5fY29udGV4dC5jb25maWd1cmF0aW9uLm9wdGlvbnMuZ2V0KDcwIC8qIEVkaXRvck9wdGlvbi5tb3VzZVdoZWVsWm9vbSAqLykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGUgPSBuZXcgU3RhbmRhcmRXaGVlbEV2ZW50KGJyb3dzZXJFdmVudCk7CiAgICAgIHZhciBkb01vdXNlV2hlZWxab29tID0gcGxhdGZvcm0uaXNNYWNpbnRvc2gKICAgICAgLy8gb24gbWFjT1Mgd2Ugc3VwcG9ydCBjbWQgKyB0d28gZmluZ2VycyBzY3JvbGwgKGBtZXRhS2V5YCBzZXQpCiAgICAgIC8vIGFuZCBhbHNvIHRoZSB0d28gZmluZ2VycyBwaW5jaCBnZXN0dXJlIChgY3RyS2V5YCBzZXQpCiAgICAgID8gKGJyb3dzZXJFdmVudC5tZXRhS2V5IHx8IGJyb3dzZXJFdmVudC5jdHJsS2V5KSAmJiAhYnJvd3NlckV2ZW50LnNoaWZ0S2V5ICYmICFicm93c2VyRXZlbnQuYWx0S2V5IDogYnJvd3NlckV2ZW50LmN0cmxLZXkgJiYgIWJyb3dzZXJFdmVudC5tZXRhS2V5ICYmICFicm93c2VyRXZlbnQuc2hpZnRLZXkgJiYgIWJyb3dzZXJFdmVudC5hbHRLZXk7CiAgICAgIGlmIChkb01vdXNlV2hlZWxab29tKSB7CiAgICAgICAgdmFyIHpvb21MZXZlbCA9IEVkaXRvclpvb20uZ2V0Wm9vbUxldmVsKCk7CiAgICAgICAgdmFyIGRlbHRhID0gZS5kZWx0YVkgPiAwID8gMSA6IC0xOwogICAgICAgIEVkaXRvclpvb20uc2V0Wm9vbUxldmVsKHpvb21MZXZlbCArIGRlbHRhKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfQogICAgfTsKICAgIF90aGlzLl9yZWdpc3Rlcihkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKF90aGlzLnZpZXdIZWxwZXIudmlld0RvbU5vZGUsIGRvbS5FdmVudFR5cGUuTU9VU0VfV0hFRUwsIG9uTW91c2VXaGVlbCwgewogICAgICBjYXB0dXJlOiB0cnVlLAogICAgICBwYXNzaXZlOiBmYWxzZQogICAgfSkpOwogICAgX3RoaXMuX2NvbnRleHQuYWRkRXZlbnRIYW5kbGVyKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIHJldHVybiBfdGhpczsKICB9CiAgX2NyZWF0ZUNsYXNzKE1vdXNlSGFuZGxlciwgW3sKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuX2NvbnRleHQucmVtb3ZlRXZlbnRIYW5kbGVyKHRoaXMpOwogICAgICBpZiAodGhpcy5fbW91c2VMZWF2ZU1vbml0b3IpIHsKICAgICAgICB0aGlzLl9tb3VzZUxlYXZlTW9uaXRvci5kaXNwb3NlKCk7CiAgICAgICAgdGhpcy5fbW91c2VMZWF2ZU1vbml0b3IgPSBudWxsOwogICAgICB9CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKE1vdXNlSGFuZGxlci5wcm90b3R5cGUpLCAiZGlzcG9zZSIsIHRoaXMpLmNhbGwodGhpcyk7CiAgICB9CiAgICAvLyAtLS0gYmVnaW4gZXZlbnQgaGFuZGxlcnMKICB9LCB7CiAgICBrZXk6ICJvbkNvbmZpZ3VyYXRpb25DaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbmZpZ3VyYXRpb25DaGFuZ2VkKGUpIHsKICAgICAgaWYgKGUuaGFzQ2hhbmdlZCgxMzMgLyogRWRpdG9yT3B0aW9uLmxheW91dEluZm8gKi8pKSB7CiAgICAgICAgLy8gbGF5b3V0IGNoYW5nZQogICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLl9jb250ZXh0LmNvbmZpZ3VyYXRpb24ub3B0aW9ucy5nZXQoMTMzIC8qIEVkaXRvck9wdGlvbi5sYXlvdXRJbmZvICovKS5oZWlnaHQ7CiAgICAgICAgaWYgKHRoaXMuX2hlaWdodCAhPT0gaGVpZ2h0KSB7CiAgICAgICAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgICB0aGlzLl9tb3VzZURvd25PcGVyYXRpb24ub25IZWlnaHRDaGFuZ2VkKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkN1cnNvclN0YXRlQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25DdXJzb3JTdGF0ZUNoYW5nZWQoZSkgewogICAgICB0aGlzLl9tb3VzZURvd25PcGVyYXRpb24ub25DdXJzb3JTdGF0ZUNoYW5nZWQoZSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkZvY3VzQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1c0NoYW5nZWQoZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAib25TY3JvbGxDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNjcm9sbENoYW5nZWQoZSkgewogICAgICB0aGlzLl9tb3VzZURvd25PcGVyYXRpb24ub25TY3JvbGxDaGFuZ2VkKCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8vIC0tLSBlbmQgZXZlbnQgaGFuZGxlcnMKICB9LCB7CiAgICBrZXk6ICJnZXRUYXJnZXRBdENsaWVudFBvaW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUYXJnZXRBdENsaWVudFBvaW50KGNsaWVudFgsIGNsaWVudFkpIHsKICAgICAgdmFyIGNsaWVudFBvcyA9IG5ldyBDbGllbnRDb29yZGluYXRlcyhjbGllbnRYLCBjbGllbnRZKTsKICAgICAgdmFyIHBvcyA9IGNsaWVudFBvcy50b1BhZ2VDb29yZGluYXRlcygpOwogICAgICB2YXIgZWRpdG9yUG9zID0gY3JlYXRlRWRpdG9yUGFnZVBvc2l0aW9uKHRoaXMudmlld0hlbHBlci52aWV3RG9tTm9kZSk7CiAgICAgIGlmIChwb3MueSA8IGVkaXRvclBvcy55IHx8IHBvcy55ID4gZWRpdG9yUG9zLnkgKyBlZGl0b3JQb3MuaGVpZ2h0IHx8IHBvcy54IDwgZWRpdG9yUG9zLnggfHwgcG9zLnggPiBlZGl0b3JQb3MueCArIGVkaXRvclBvcy53aWR0aCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHZhciByZWxhdGl2ZVBvcyA9IGNyZWF0ZUNvb3JkaW5hdGVzUmVsYXRpdmVUb0VkaXRvcih0aGlzLnZpZXdIZWxwZXIudmlld0RvbU5vZGUsIGVkaXRvclBvcywgcG9zKTsKICAgICAgcmV0dXJuIHRoaXMubW91c2VUYXJnZXRGYWN0b3J5LmNyZWF0ZU1vdXNlVGFyZ2V0KHRoaXMudmlld0hlbHBlci5nZXRMYXN0UmVuZGVyRGF0YSgpLCBlZGl0b3JQb3MsIHBvcywgcmVsYXRpdmVQb3MsIG51bGwpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9jcmVhdGVNb3VzZVRhcmdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZU1vdXNlVGFyZ2V0KGUsIHRlc3RFdmVudFRhcmdldCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0OwogICAgICBpZiAoIXRoaXMudmlld0hlbHBlci52aWV3RG9tTm9kZS5jb250YWlucyh0YXJnZXQpKSB7CiAgICAgICAgdmFyIHNoYWRvd1Jvb3QgPSBkb20uZ2V0U2hhZG93Um9vdCh0aGlzLnZpZXdIZWxwZXIudmlld0RvbU5vZGUpOwogICAgICAgIGlmIChzaGFkb3dSb290KSB7CiAgICAgICAgICB0YXJnZXQgPSBzaGFkb3dSb290LmVsZW1lbnRzRnJvbVBvaW50KGUucG9zeCwgZS5wb3N5KS5maW5kKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMyLnZpZXdIZWxwZXIudmlld0RvbU5vZGUuY29udGFpbnMoZWwpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLm1vdXNlVGFyZ2V0RmFjdG9yeS5jcmVhdGVNb3VzZVRhcmdldCh0aGlzLnZpZXdIZWxwZXIuZ2V0TGFzdFJlbmRlckRhdGEoKSwgZS5lZGl0b3JQb3MsIGUucG9zLCBlLnJlbGF0aXZlUG9zLCB0ZXN0RXZlbnRUYXJnZXQgPyB0YXJnZXQgOiBudWxsKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZ2V0TW91c2VDb2x1bW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRNb3VzZUNvbHVtbihlKSB7CiAgICAgIHJldHVybiB0aGlzLm1vdXNlVGFyZ2V0RmFjdG9yeS5nZXRNb3VzZUNvbHVtbihlLnJlbGF0aXZlUG9zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfb25Db250ZXh0TWVudSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ29udGV4dE1lbnUoZSwgdGVzdEV2ZW50VGFyZ2V0KSB7CiAgICAgIHRoaXMudmlld0NvbnRyb2xsZXIuZW1pdENvbnRleHRNZW51KHsKICAgICAgICBldmVudDogZSwKICAgICAgICB0YXJnZXQ6IHRoaXMuX2NyZWF0ZU1vdXNlVGFyZ2V0KGUsIHRlc3RFdmVudFRhcmdldCkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX29uTW91c2VNb3ZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Nb3VzZU1vdmUoZSkgewogICAgICB2YXIgdGFyZ2V0SXNXaWRnZXQgPSB0aGlzLm1vdXNlVGFyZ2V0RmFjdG9yeS5tb3VzZVRhcmdldElzV2lkZ2V0KGUpOwogICAgICBpZiAoIXRhcmdldElzV2lkZ2V0KSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICAgIGlmICh0aGlzLl9tb3VzZURvd25PcGVyYXRpb24uaXNBY3RpdmUoKSkgewogICAgICAgIC8vIEluIHNlbGVjdGlvbi9kcmFnIG9wZXJhdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgYWN0dWFsTW91c2VNb3ZlVGltZSA9IGUudGltZXN0YW1wOwogICAgICBpZiAoYWN0dWFsTW91c2VNb3ZlVGltZSA8IHRoaXMubGFzdE1vdXNlTGVhdmVUaW1lKSB7CiAgICAgICAgLy8gRHVlIHRvIHRocm90dGxpbmcsIHRoaXMgZXZlbnQgb2NjdXJyZWQgYmVmb3JlIHRoZSBtb3VzZSBsZWZ0IHRoZSBlZGl0b3IsIHRoZXJlZm9yZSBpZ25vcmUgaXQuCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMudmlld0NvbnRyb2xsZXIuZW1pdE1vdXNlTW92ZSh7CiAgICAgICAgZXZlbnQ6IGUsCiAgICAgICAgdGFyZ2V0OiB0aGlzLl9jcmVhdGVNb3VzZVRhcmdldChlLCB0cnVlKQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfb25Nb3VzZUxlYXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Nb3VzZUxlYXZlKGUpIHsKICAgICAgaWYgKHRoaXMuX21vdXNlTGVhdmVNb25pdG9yKSB7CiAgICAgICAgdGhpcy5fbW91c2VMZWF2ZU1vbml0b3IuZGlzcG9zZSgpOwogICAgICAgIHRoaXMuX21vdXNlTGVhdmVNb25pdG9yID0gbnVsbDsKICAgICAgfQogICAgICB0aGlzLmxhc3RNb3VzZUxlYXZlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB0aGlzLnZpZXdDb250cm9sbGVyLmVtaXRNb3VzZUxlYXZlKHsKICAgICAgICBldmVudDogZSwKICAgICAgICB0YXJnZXQ6IG51bGwKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX29uTW91c2VVcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTW91c2VVcChlKSB7CiAgICAgIHRoaXMudmlld0NvbnRyb2xsZXIuZW1pdE1vdXNlVXAoewogICAgICAgIGV2ZW50OiBlLAogICAgICAgIHRhcmdldDogdGhpcy5fY3JlYXRlTW91c2VUYXJnZXQoZSwgdHJ1ZSkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX29uTW91c2VEb3duIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Nb3VzZURvd24oZSwgcG9pbnRlcklkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgdCA9IHRoaXMuX2NyZWF0ZU1vdXNlVGFyZ2V0KGUsIHRydWUpOwogICAgICB2YXIgdGFyZ2V0SXNDb250ZW50ID0gdC50eXBlID09PSA2IC8qIE1vdXNlVGFyZ2V0VHlwZS5DT05URU5UX1RFWFQgKi8gfHwgdC50eXBlID09PSA3IC8qIE1vdXNlVGFyZ2V0VHlwZS5DT05URU5UX0VNUFRZICovOwogICAgICB2YXIgdGFyZ2V0SXNHdXR0ZXIgPSB0LnR5cGUgPT09IDIgLyogTW91c2VUYXJnZXRUeXBlLkdVVFRFUl9HTFlQSF9NQVJHSU4gKi8gfHwgdC50eXBlID09PSAzIC8qIE1vdXNlVGFyZ2V0VHlwZS5HVVRURVJfTElORV9OVU1CRVJTICovIHx8IHQudHlwZSA9PT0gNCAvKiBNb3VzZVRhcmdldFR5cGUuR1VUVEVSX0xJTkVfREVDT1JBVElPTlMgKi87CiAgICAgIHZhciB0YXJnZXRJc0xpbmVOdW1iZXJzID0gdC50eXBlID09PSAzIC8qIE1vdXNlVGFyZ2V0VHlwZS5HVVRURVJfTElORV9OVU1CRVJTICovOwogICAgICB2YXIgc2VsZWN0T25MaW5lTnVtYmVycyA9IHRoaXMuX2NvbnRleHQuY29uZmlndXJhdGlvbi5vcHRpb25zLmdldCgxMDAgLyogRWRpdG9yT3B0aW9uLnNlbGVjdE9uTGluZU51bWJlcnMgKi8pOwogICAgICB2YXIgdGFyZ2V0SXNWaWV3Wm9uZSA9IHQudHlwZSA9PT0gOCAvKiBNb3VzZVRhcmdldFR5cGUuQ09OVEVOVF9WSUVXX1pPTkUgKi8gfHwgdC50eXBlID09PSA1IC8qIE1vdXNlVGFyZ2V0VHlwZS5HVVRURVJfVklFV19aT05FICovOwogICAgICB2YXIgdGFyZ2V0SXNXaWRnZXQgPSB0LnR5cGUgPT09IDkgLyogTW91c2VUYXJnZXRUeXBlLkNPTlRFTlRfV0lER0VUICovOwogICAgICB2YXIgc2hvdWxkSGFuZGxlID0gZS5sZWZ0QnV0dG9uIHx8IGUubWlkZGxlQnV0dG9uOwogICAgICBpZiAocGxhdGZvcm0uaXNNYWNpbnRvc2ggJiYgZS5sZWZ0QnV0dG9uICYmIGUuY3RybEtleSkgewogICAgICAgIHNob3VsZEhhbmRsZSA9IGZhbHNlOwogICAgICB9CiAgICAgIHZhciBmb2N1cyA9IGZ1bmN0aW9uIGZvY3VzKCkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBfdGhpczMudmlld0hlbHBlci5mb2N1c1RleHRBcmVhKCk7CiAgICAgIH07CiAgICAgIGlmIChzaG91bGRIYW5kbGUgJiYgKHRhcmdldElzQ29udGVudCB8fCB0YXJnZXRJc0xpbmVOdW1iZXJzICYmIHNlbGVjdE9uTGluZU51bWJlcnMpKSB7CiAgICAgICAgZm9jdXMoKTsKICAgICAgICB0aGlzLl9tb3VzZURvd25PcGVyYXRpb24uc3RhcnQodC50eXBlLCBlLCBwb2ludGVySWQpOwogICAgICB9IGVsc2UgaWYgKHRhcmdldElzR3V0dGVyKSB7CiAgICAgICAgLy8gRG8gbm90IHN0ZWFsIGZvY3VzCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9IGVsc2UgaWYgKHRhcmdldElzVmlld1pvbmUpIHsKICAgICAgICB2YXIgdmlld1pvbmVEYXRhID0gdC5kZXRhaWw7CiAgICAgICAgaWYgKHNob3VsZEhhbmRsZSAmJiB0aGlzLnZpZXdIZWxwZXIuc2hvdWxkU3VwcHJlc3NNb3VzZURvd25PblZpZXdab25lKHZpZXdab25lRGF0YS52aWV3Wm9uZUlkKSkgewogICAgICAgICAgZm9jdXMoKTsKICAgICAgICAgIHRoaXMuX21vdXNlRG93bk9wZXJhdGlvbi5zdGFydCh0LnR5cGUsIGUsIHBvaW50ZXJJZCk7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRhcmdldElzV2lkZ2V0ICYmIHRoaXMudmlld0hlbHBlci5zaG91bGRTdXBwcmVzc01vdXNlRG93bk9uV2lkZ2V0KHQuZGV0YWlsKSkgewogICAgICAgIGZvY3VzKCk7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CiAgICAgIHRoaXMudmlld0NvbnRyb2xsZXIuZW1pdE1vdXNlRG93bih7CiAgICAgICAgZXZlbnQ6IGUsCiAgICAgICAgdGFyZ2V0OiB0CiAgICAgIH0pOwogICAgfQogIH1dKTsKICByZXR1cm4gTW91c2VIYW5kbGVyOwp9KFZpZXdFdmVudEhhbmRsZXIpOwp2YXIgTW91c2VEb3duT3BlcmF0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRGlzcG9zYWJsZSkgewogIF9pbmhlcml0cyhNb3VzZURvd25PcGVyYXRpb24sIF9EaXNwb3NhYmxlKTsKICB2YXIgX3N1cGVyMiA9IF9jcmVhdGVTdXBlcihNb3VzZURvd25PcGVyYXRpb24pOwogIGZ1bmN0aW9uIE1vdXNlRG93bk9wZXJhdGlvbihjb250ZXh0LCB2aWV3Q29udHJvbGxlciwgdmlld0hlbHBlciwgY3JlYXRlTW91c2VUYXJnZXQsIGdldE1vdXNlQ29sdW1uKSB7CiAgICB2YXIgX3RoaXM0OwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vdXNlRG93bk9wZXJhdGlvbik7CiAgICBfdGhpczQgPSBfc3VwZXIyLmNhbGwodGhpcyk7CiAgICBfdGhpczQuX2NvbnRleHQgPSBjb250ZXh0OwogICAgX3RoaXM0Ll92aWV3Q29udHJvbGxlciA9IHZpZXdDb250cm9sbGVyOwogICAgX3RoaXM0Ll92aWV3SGVscGVyID0gdmlld0hlbHBlcjsKICAgIF90aGlzNC5fY3JlYXRlTW91c2VUYXJnZXQgPSBjcmVhdGVNb3VzZVRhcmdldDsKICAgIF90aGlzNC5fZ2V0TW91c2VDb2x1bW4gPSBnZXRNb3VzZUNvbHVtbjsKICAgIF90aGlzNC5fbW91c2VNb3ZlTW9uaXRvciA9IF90aGlzNC5fcmVnaXN0ZXIobmV3IEdsb2JhbEVkaXRvclBvaW50ZXJNb3ZlTW9uaXRvcihfdGhpczQuX3ZpZXdIZWxwZXIudmlld0RvbU5vZGUpKTsKICAgIF90aGlzNC5fb25TY3JvbGxUaW1lb3V0ID0gX3RoaXM0Ll9yZWdpc3RlcihuZXcgVGltZW91dFRpbWVyKCkpOwogICAgX3RoaXM0Ll9tb3VzZVN0YXRlID0gbmV3IE1vdXNlRG93blN0YXRlKCk7CiAgICBfdGhpczQuX2N1cnJlbnRTZWxlY3Rpb24gPSBuZXcgU2VsZWN0aW9uKDEsIDEsIDEsIDEpOwogICAgX3RoaXM0Ll9pc0FjdGl2ZSA9IGZhbHNlOwogICAgX3RoaXM0Ll9sYXN0TW91c2VFdmVudCA9IG51bGw7CiAgICByZXR1cm4gX3RoaXM0OwogIH0KICBfY3JlYXRlQ2xhc3MoTW91c2VEb3duT3BlcmF0aW9uLCBbewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoTW91c2VEb3duT3BlcmF0aW9uLnByb3RvdHlwZSksICJkaXNwb3NlIiwgdGhpcykuY2FsbCh0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0FjdGl2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNBY3RpdmUoKSB7CiAgICAgIHJldHVybiB0aGlzLl9pc0FjdGl2ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfb25Nb3VzZURvd25UaGVuTW92ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTW91c2VEb3duVGhlbk1vdmUoZSkgewogICAgICB0aGlzLl9sYXN0TW91c2VFdmVudCA9IGU7CiAgICAgIHRoaXMuX21vdXNlU3RhdGUuc2V0TW9kaWZpZXJzKGUpOwogICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLl9maW5kTW91c2VQb3NpdGlvbihlLCBmYWxzZSk7CiAgICAgIGlmICghcG9zaXRpb24pIHsKICAgICAgICAvLyBJZ25vcmluZyBiZWNhdXNlIHBvc2l0aW9uIGlzIHVua25vd24KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX21vdXNlU3RhdGUuaXNEcmFnQW5kRHJvcCkgewogICAgICAgIHRoaXMuX3ZpZXdDb250cm9sbGVyLmVtaXRNb3VzZURyYWcoewogICAgICAgICAgZXZlbnQ6IGUsCiAgICAgICAgICB0YXJnZXQ6IHBvc2l0aW9uCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fZGlzcGF0Y2hNb3VzZShwb3NpdGlvbiwgdHJ1ZSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGFydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQodGFyZ2V0VHlwZSwgZSwgcG9pbnRlcklkKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLl9sYXN0TW91c2VFdmVudCA9IGU7CiAgICAgIHRoaXMuX21vdXNlU3RhdGUuc2V0U3RhcnRlZE9uTGluZU51bWJlcnModGFyZ2V0VHlwZSA9PT0gMyAvKiBNb3VzZVRhcmdldFR5cGUuR1VUVEVSX0xJTkVfTlVNQkVSUyAqLyk7CiAgICAgIHRoaXMuX21vdXNlU3RhdGUuc2V0U3RhcnRCdXR0b25zKGUpOwogICAgICB0aGlzLl9tb3VzZVN0YXRlLnNldE1vZGlmaWVycyhlKTsKICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5fZmluZE1vdXNlUG9zaXRpb24oZSwgdHJ1ZSk7CiAgICAgIGlmICghcG9zaXRpb24gfHwgIXBvc2l0aW9uLnBvc2l0aW9uKSB7CiAgICAgICAgLy8gSWdub3JpbmcgYmVjYXVzZSBwb3NpdGlvbiBpcyB1bmtub3duCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX21vdXNlU3RhdGUudHJ5U2V0Q291bnQoZS5kZXRhaWwsIHBvc2l0aW9uLnBvc2l0aW9uKTsKICAgICAgLy8gT3ZlcndyaXRlIHRoZSBkZXRhaWwgb2YgdGhlIE1vdXNlRXZlbnQsIGFzIGl0IHdpbGwgYmUgc2VudCBvdXQgaW4gYW4gZXZlbnQgYW5kIGNvbnRyaWJ1dGlvbnMgbWlnaHQgcmVseSBvbiBpdC4KICAgICAgZS5kZXRhaWwgPSB0aGlzLl9tb3VzZVN0YXRlLmNvdW50OwogICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuX2NvbnRleHQuY29uZmlndXJhdGlvbi5vcHRpb25zOwogICAgICBpZiAoIW9wdGlvbnMuZ2V0KDgzIC8qIEVkaXRvck9wdGlvbi5yZWFkT25seSAqLykgJiYgb3B0aW9ucy5nZXQoMzEgLyogRWRpdG9yT3B0aW9uLmRyYWdBbmREcm9wICovKSAmJiAhb3B0aW9ucy5nZXQoMTggLyogRWRpdG9yT3B0aW9uLmNvbHVtblNlbGVjdGlvbiAqLykgJiYgIXRoaXMuX21vdXNlU3RhdGUuYWx0S2V5IC8vIHdlIGRvbid0IHN1cHBvcnQgbXVsdGlwbGUgbW91c2UKICAgICAgJiYgZS5kZXRhaWwgPCAyIC8vIG9ubHkgc2luZ2xlIGNsaWNrIG9uIGEgc2VsZWN0aW9uIGNhbiB3b3JrCiAgICAgICYmICF0aGlzLl9pc0FjdGl2ZSAvLyB0aGUgbW91c2UgaXMgbm90IGRvd24geWV0CiAgICAgICYmICF0aGlzLl9jdXJyZW50U2VsZWN0aW9uLmlzRW1wdHkoKSAvLyB3ZSBkb24ndCBkcmFnIHNpbmdsZSBjdXJzb3IKICAgICAgJiYgcG9zaXRpb24udHlwZSA9PT0gNiAvKiBNb3VzZVRhcmdldFR5cGUuQ09OVEVOVF9URVhUICovIC8vIHNpbmdsZSBjbGljayBvbiB0ZXh0CiAgICAgICYmIHBvc2l0aW9uLnBvc2l0aW9uICYmIHRoaXMuX2N1cnJlbnRTZWxlY3Rpb24uY29udGFpbnNQb3NpdGlvbihwb3NpdGlvbi5wb3NpdGlvbikgLy8gc2luZ2xlIGNsaWNrIG9uIGEgc2VsZWN0aW9uCiAgICAgICkgewogICAgICAgIHRoaXMuX21vdXNlU3RhdGUuaXNEcmFnQW5kRHJvcCA9IHRydWU7CiAgICAgICAgdGhpcy5faXNBY3RpdmUgPSB0cnVlOwogICAgICAgIHRoaXMuX21vdXNlTW92ZU1vbml0b3Iuc3RhcnRNb25pdG9yaW5nKHRoaXMuX3ZpZXdIZWxwZXIudmlld0xpbmVzRG9tTm9kZSwgcG9pbnRlcklkLCBlLmJ1dHRvbnMsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM1Ll9vbk1vdXNlRG93blRoZW5Nb3ZlKGUpOwogICAgICAgIH0sIGZ1bmN0aW9uIChicm93c2VyRXZlbnQpIHsKICAgICAgICAgIHZhciBwb3NpdGlvbiA9IF90aGlzNS5fZmluZE1vdXNlUG9zaXRpb24oX3RoaXM1Ll9sYXN0TW91c2VFdmVudCwgZmFsc2UpOwogICAgICAgICAgaWYgKGJyb3dzZXJFdmVudCAmJiBicm93c2VyRXZlbnQgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50KSB7CiAgICAgICAgICAgIC8vIGNhbmNlbAogICAgICAgICAgICBfdGhpczUuX3ZpZXdDb250cm9sbGVyLmVtaXRNb3VzZURyb3BDYW5jZWxlZCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM1Ll92aWV3Q29udHJvbGxlci5lbWl0TW91c2VEcm9wKHsKICAgICAgICAgICAgICBldmVudDogX3RoaXM1Ll9sYXN0TW91c2VFdmVudCwKICAgICAgICAgICAgICB0YXJnZXQ6IHBvc2l0aW9uID8gX3RoaXM1Ll9jcmVhdGVNb3VzZVRhcmdldChfdGhpczUuX2xhc3RNb3VzZUV2ZW50LCB0cnVlKSA6IG51bGwgLy8gSWdub3JpbmcgYmVjYXVzZSBwb3NpdGlvbiBpcyB1bmtub3duLCBlLmcuLCBDb250ZW50IFZpZXcgWm9uZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczUuX3N0b3AoKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fbW91c2VTdGF0ZS5pc0RyYWdBbmREcm9wID0gZmFsc2U7CiAgICAgIHRoaXMuX2Rpc3BhdGNoTW91c2UocG9zaXRpb24sIGUuc2hpZnRLZXkpOwogICAgICBpZiAoIXRoaXMuX2lzQWN0aXZlKSB7CiAgICAgICAgdGhpcy5faXNBY3RpdmUgPSB0cnVlOwogICAgICAgIHRoaXMuX21vdXNlTW92ZU1vbml0b3Iuc3RhcnRNb25pdG9yaW5nKHRoaXMuX3ZpZXdIZWxwZXIudmlld0xpbmVzRG9tTm9kZSwgcG9pbnRlcklkLCBlLmJ1dHRvbnMsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM1Ll9vbk1vdXNlRG93blRoZW5Nb3ZlKGUpOwogICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczUuX3N0b3AoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9zdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc3RvcCgpIHsKICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTsKICAgICAgdGhpcy5fb25TY3JvbGxUaW1lb3V0LmNhbmNlbCgpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uSGVpZ2h0Q2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25IZWlnaHRDaGFuZ2VkKCkgewogICAgICB0aGlzLl9tb3VzZU1vdmVNb25pdG9yLnN0b3BNb25pdG9yaW5nKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25Qb2ludGVyVXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUG9pbnRlclVwKCkgewogICAgICB0aGlzLl9tb3VzZU1vdmVNb25pdG9yLnN0b3BNb25pdG9yaW5nKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25TY3JvbGxDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNjcm9sbENoYW5nZWQoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICBpZiAoIXRoaXMuX2lzQWN0aXZlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX29uU2Nyb2xsVGltZW91dC5zZXRJZk5vdFNldChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCFfdGhpczYuX2xhc3RNb3VzZUV2ZW50KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBwb3NpdGlvbiA9IF90aGlzNi5fZmluZE1vdXNlUG9zaXRpb24oX3RoaXM2Ll9sYXN0TW91c2VFdmVudCwgZmFsc2UpOwogICAgICAgIGlmICghcG9zaXRpb24pIHsKICAgICAgICAgIC8vIElnbm9yaW5nIGJlY2F1c2UgcG9zaXRpb24gaXMgdW5rbm93bgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoX3RoaXM2Ll9tb3VzZVN0YXRlLmlzRHJhZ0FuZERyb3ApIHsKICAgICAgICAgIC8vIElnbm9yaW5nIGJlY2F1c2UgdXNlcnMgYXJlIGRyYWdnaW5nIHRoZSB0ZXh0CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIF90aGlzNi5fZGlzcGF0Y2hNb3VzZShwb3NpdGlvbiwgdHJ1ZSk7CiAgICAgIH0sIDEwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkN1cnNvclN0YXRlQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25DdXJzb3JTdGF0ZUNoYW5nZWQoZSkgewogICAgICB0aGlzLl9jdXJyZW50U2VsZWN0aW9uID0gZS5zZWxlY3Rpb25zWzBdOwogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRQb3NpdGlvbk91dHNpZGVFZGl0b3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRQb3NpdGlvbk91dHNpZGVFZGl0b3IoZSkgewogICAgICB2YXIgZWRpdG9yQ29udGVudCA9IGUuZWRpdG9yUG9zOwogICAgICB2YXIgbW9kZWwgPSB0aGlzLl9jb250ZXh0LnZpZXdNb2RlbDsKICAgICAgdmFyIHZpZXdMYXlvdXQgPSB0aGlzLl9jb250ZXh0LnZpZXdMYXlvdXQ7CiAgICAgIHZhciBtb3VzZUNvbHVtbiA9IHRoaXMuX2dldE1vdXNlQ29sdW1uKGUpOwogICAgICBpZiAoZS5wb3N5IDwgZWRpdG9yQ29udGVudC55KSB7CiAgICAgICAgdmFyIHZlcnRpY2FsT2Zmc2V0ID0gTWF0aC5tYXgodmlld0xheW91dC5nZXRDdXJyZW50U2Nyb2xsVG9wKCkgLSAoZWRpdG9yQ29udGVudC55IC0gZS5wb3N5KSwgMCk7CiAgICAgICAgdmFyIHZpZXdab25lRGF0YSA9IEhpdFRlc3RDb250ZXh0LmdldFpvbmVBdENvb3JkKHRoaXMuX2NvbnRleHQsIHZlcnRpY2FsT2Zmc2V0KTsKICAgICAgICBpZiAodmlld1pvbmVEYXRhKSB7CiAgICAgICAgICB2YXIgbmV3UG9zaXRpb24gPSB0aGlzLl9oZWxwUG9zaXRpb25KdW1wT3ZlclZpZXdab25lKHZpZXdab25lRGF0YSk7CiAgICAgICAgICBpZiAobmV3UG9zaXRpb24pIHsKICAgICAgICAgICAgcmV0dXJuIE1vdXNlVGFyZ2V0LmNyZWF0ZU91dHNpZGVFZGl0b3IobW91c2VDb2x1bW4sIG5ld1Bvc2l0aW9uKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIGFib3ZlTGluZU51bWJlciA9IHZpZXdMYXlvdXQuZ2V0TGluZU51bWJlckF0VmVydGljYWxPZmZzZXQodmVydGljYWxPZmZzZXQpOwogICAgICAgIHJldHVybiBNb3VzZVRhcmdldC5jcmVhdGVPdXRzaWRlRWRpdG9yKG1vdXNlQ29sdW1uLCBuZXcgUG9zaXRpb24oYWJvdmVMaW5lTnVtYmVyLCAxKSk7CiAgICAgIH0KICAgICAgaWYgKGUucG9zeSA+IGVkaXRvckNvbnRlbnQueSArIGVkaXRvckNvbnRlbnQuaGVpZ2h0KSB7CiAgICAgICAgdmFyIF92ZXJ0aWNhbE9mZnNldCA9IHZpZXdMYXlvdXQuZ2V0Q3VycmVudFNjcm9sbFRvcCgpICsgZS5yZWxhdGl2ZVBvcy55OwogICAgICAgIHZhciBfdmlld1pvbmVEYXRhID0gSGl0VGVzdENvbnRleHQuZ2V0Wm9uZUF0Q29vcmQodGhpcy5fY29udGV4dCwgX3ZlcnRpY2FsT2Zmc2V0KTsKICAgICAgICBpZiAoX3ZpZXdab25lRGF0YSkgewogICAgICAgICAgdmFyIF9uZXdQb3NpdGlvbiA9IHRoaXMuX2hlbHBQb3NpdGlvbkp1bXBPdmVyVmlld1pvbmUoX3ZpZXdab25lRGF0YSk7CiAgICAgICAgICBpZiAoX25ld1Bvc2l0aW9uKSB7CiAgICAgICAgICAgIHJldHVybiBNb3VzZVRhcmdldC5jcmVhdGVPdXRzaWRlRWRpdG9yKG1vdXNlQ29sdW1uLCBfbmV3UG9zaXRpb24pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgYmVsb3dMaW5lTnVtYmVyID0gdmlld0xheW91dC5nZXRMaW5lTnVtYmVyQXRWZXJ0aWNhbE9mZnNldChfdmVydGljYWxPZmZzZXQpOwogICAgICAgIHJldHVybiBNb3VzZVRhcmdldC5jcmVhdGVPdXRzaWRlRWRpdG9yKG1vdXNlQ29sdW1uLCBuZXcgUG9zaXRpb24oYmVsb3dMaW5lTnVtYmVyLCBtb2RlbC5nZXRMaW5lTWF4Q29sdW1uKGJlbG93TGluZU51bWJlcikpKTsKICAgICAgfQogICAgICB2YXIgcG9zc2libGVMaW5lTnVtYmVyID0gdmlld0xheW91dC5nZXRMaW5lTnVtYmVyQXRWZXJ0aWNhbE9mZnNldCh2aWV3TGF5b3V0LmdldEN1cnJlbnRTY3JvbGxUb3AoKSArIGUucmVsYXRpdmVQb3MueSk7CiAgICAgIGlmIChlLnBvc3ggPCBlZGl0b3JDb250ZW50LngpIHsKICAgICAgICByZXR1cm4gTW91c2VUYXJnZXQuY3JlYXRlT3V0c2lkZUVkaXRvcihtb3VzZUNvbHVtbiwgbmV3IFBvc2l0aW9uKHBvc3NpYmxlTGluZU51bWJlciwgMSkpOwogICAgICB9CiAgICAgIGlmIChlLnBvc3ggPiBlZGl0b3JDb250ZW50LnggKyBlZGl0b3JDb250ZW50LndpZHRoKSB7CiAgICAgICAgcmV0dXJuIE1vdXNlVGFyZ2V0LmNyZWF0ZU91dHNpZGVFZGl0b3IobW91c2VDb2x1bW4sIG5ldyBQb3NpdGlvbihwb3NzaWJsZUxpbmVOdW1iZXIsIG1vZGVsLmdldExpbmVNYXhDb2x1bW4ocG9zc2libGVMaW5lTnVtYmVyKSkpOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogIl9maW5kTW91c2VQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmRNb3VzZVBvc2l0aW9uKGUsIHRlc3RFdmVudFRhcmdldCkgewogICAgICB2YXIgcG9zaXRpb25PdXRzaWRlRWRpdG9yID0gdGhpcy5fZ2V0UG9zaXRpb25PdXRzaWRlRWRpdG9yKGUpOwogICAgICBpZiAocG9zaXRpb25PdXRzaWRlRWRpdG9yKSB7CiAgICAgICAgcmV0dXJuIHBvc2l0aW9uT3V0c2lkZUVkaXRvcjsKICAgICAgfQogICAgICB2YXIgdCA9IHRoaXMuX2NyZWF0ZU1vdXNlVGFyZ2V0KGUsIHRlc3RFdmVudFRhcmdldCk7CiAgICAgIHZhciBoaW50ZWRQb3NpdGlvbiA9IHQucG9zaXRpb247CiAgICAgIGlmICghaGludGVkUG9zaXRpb24pIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBpZiAodC50eXBlID09PSA4IC8qIE1vdXNlVGFyZ2V0VHlwZS5DT05URU5UX1ZJRVdfWk9ORSAqLyB8fCB0LnR5cGUgPT09IDUgLyogTW91c2VUYXJnZXRUeXBlLkdVVFRFUl9WSUVXX1pPTkUgKi8pIHsKICAgICAgICB2YXIgbmV3UG9zaXRpb24gPSB0aGlzLl9oZWxwUG9zaXRpb25KdW1wT3ZlclZpZXdab25lKHQuZGV0YWlsKTsKICAgICAgICBpZiAobmV3UG9zaXRpb24pIHsKICAgICAgICAgIHJldHVybiBNb3VzZVRhcmdldC5jcmVhdGVWaWV3Wm9uZSh0LnR5cGUsIHQuZWxlbWVudCwgdC5tb3VzZUNvbHVtbiwgbmV3UG9zaXRpb24sIHQuZGV0YWlsKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2hlbHBQb3NpdGlvbkp1bXBPdmVyVmlld1pvbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9oZWxwUG9zaXRpb25KdW1wT3ZlclZpZXdab25lKHZpZXdab25lRGF0YSkgewogICAgICAvLyBGb3JjZSBwb3NpdGlvbiBvbiB2aWV3IHpvbmVzIHRvIGdvIGFib3ZlIG9yIGJlbG93IGRlcGVuZGluZyBvbiB3aGVyZSBzZWxlY3Rpb24gc3RhcnRlZCBmcm9tCiAgICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IG5ldyBQb3NpdGlvbih0aGlzLl9jdXJyZW50U2VsZWN0aW9uLnNlbGVjdGlvblN0YXJ0TGluZU51bWJlciwgdGhpcy5fY3VycmVudFNlbGVjdGlvbi5zZWxlY3Rpb25TdGFydENvbHVtbik7CiAgICAgIHZhciBwb3NpdGlvbkJlZm9yZSA9IHZpZXdab25lRGF0YS5wb3NpdGlvbkJlZm9yZTsKICAgICAgdmFyIHBvc2l0aW9uQWZ0ZXIgPSB2aWV3Wm9uZURhdGEucG9zaXRpb25BZnRlcjsKICAgICAgaWYgKHBvc2l0aW9uQmVmb3JlICYmIHBvc2l0aW9uQWZ0ZXIpIHsKICAgICAgICBpZiAocG9zaXRpb25CZWZvcmUuaXNCZWZvcmUoc2VsZWN0aW9uU3RhcnQpKSB7CiAgICAgICAgICByZXR1cm4gcG9zaXRpb25CZWZvcmU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBwb3NpdGlvbkFmdGVyOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZGlzcGF0Y2hNb3VzZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2Rpc3BhdGNoTW91c2UocG9zaXRpb24sIGluU2VsZWN0aW9uTW9kZSkgewogICAgICBpZiAoIXBvc2l0aW9uLnBvc2l0aW9uKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX3ZpZXdDb250cm9sbGVyLmRpc3BhdGNoTW91c2UoewogICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbi5wb3NpdGlvbiwKICAgICAgICBtb3VzZUNvbHVtbjogcG9zaXRpb24ubW91c2VDb2x1bW4sCiAgICAgICAgc3RhcnRlZE9uTGluZU51bWJlcnM6IHRoaXMuX21vdXNlU3RhdGUuc3RhcnRlZE9uTGluZU51bWJlcnMsCiAgICAgICAgaW5TZWxlY3Rpb25Nb2RlOiBpblNlbGVjdGlvbk1vZGUsCiAgICAgICAgbW91c2VEb3duQ291bnQ6IHRoaXMuX21vdXNlU3RhdGUuY291bnQsCiAgICAgICAgYWx0S2V5OiB0aGlzLl9tb3VzZVN0YXRlLmFsdEtleSwKICAgICAgICBjdHJsS2V5OiB0aGlzLl9tb3VzZVN0YXRlLmN0cmxLZXksCiAgICAgICAgbWV0YUtleTogdGhpcy5fbW91c2VTdGF0ZS5tZXRhS2V5LAogICAgICAgIHNoaWZ0S2V5OiB0aGlzLl9tb3VzZVN0YXRlLnNoaWZ0S2V5LAogICAgICAgIGxlZnRCdXR0b246IHRoaXMuX21vdXNlU3RhdGUubGVmdEJ1dHRvbiwKICAgICAgICBtaWRkbGVCdXR0b246IHRoaXMuX21vdXNlU3RhdGUubWlkZGxlQnV0dG9uLAogICAgICAgIG9uSW5qZWN0ZWRUZXh0OiBwb3NpdGlvbi50eXBlID09PSA2IC8qIE1vdXNlVGFyZ2V0VHlwZS5DT05URU5UX1RFWFQgKi8gJiYgcG9zaXRpb24uZGV0YWlsLmluamVjdGVkVGV4dCAhPT0gbnVsbAogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIE1vdXNlRG93bk9wZXJhdGlvbjsKfShEaXNwb3NhYmxlKTsKdmFyIE1vdXNlRG93blN0YXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBNb3VzZURvd25TdGF0ZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb3VzZURvd25TdGF0ZSk7CiAgICB0aGlzLl9hbHRLZXkgPSBmYWxzZTsKICAgIHRoaXMuX2N0cmxLZXkgPSBmYWxzZTsKICAgIHRoaXMuX21ldGFLZXkgPSBmYWxzZTsKICAgIHRoaXMuX3NoaWZ0S2V5ID0gZmFsc2U7CiAgICB0aGlzLl9sZWZ0QnV0dG9uID0gZmFsc2U7CiAgICB0aGlzLl9taWRkbGVCdXR0b24gPSBmYWxzZTsKICAgIHRoaXMuX3N0YXJ0ZWRPbkxpbmVOdW1iZXJzID0gZmFsc2U7CiAgICB0aGlzLl9sYXN0TW91c2VEb3duUG9zaXRpb24gPSBudWxsOwogICAgdGhpcy5fbGFzdE1vdXNlRG93blBvc2l0aW9uRXF1YWxDb3VudCA9IDA7CiAgICB0aGlzLl9sYXN0TW91c2VEb3duQ291bnQgPSAwOwogICAgdGhpcy5fbGFzdFNldE1vdXNlRG93bkNvdW50VGltZSA9IDA7CiAgICB0aGlzLmlzRHJhZ0FuZERyb3AgPSBmYWxzZTsKICB9CiAgX2NyZWF0ZUNsYXNzKE1vdXNlRG93blN0YXRlLCBbewogICAga2V5OiAiYWx0S2V5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fYWx0S2V5OwogICAgfQogIH0sIHsKICAgIGtleTogImN0cmxLZXkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jdHJsS2V5OwogICAgfQogIH0sIHsKICAgIGtleTogIm1ldGFLZXkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9tZXRhS2V5OwogICAgfQogIH0sIHsKICAgIGtleTogInNoaWZ0S2V5IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc2hpZnRLZXk7CiAgICB9CiAgfSwgewogICAga2V5OiAibGVmdEJ1dHRvbiIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2xlZnRCdXR0b247CiAgICB9CiAgfSwgewogICAga2V5OiAibWlkZGxlQnV0dG9uIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fbWlkZGxlQnV0dG9uOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXJ0ZWRPbkxpbmVOdW1iZXJzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3RhcnRlZE9uTGluZU51bWJlcnM7CiAgICB9CiAgfSwgewogICAga2V5OiAiY291bnQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9sYXN0TW91c2VEb3duQ291bnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0TW9kaWZpZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRNb2RpZmllcnMoc291cmNlKSB7CiAgICAgIHRoaXMuX2FsdEtleSA9IHNvdXJjZS5hbHRLZXk7CiAgICAgIHRoaXMuX2N0cmxLZXkgPSBzb3VyY2UuY3RybEtleTsKICAgICAgdGhpcy5fbWV0YUtleSA9IHNvdXJjZS5tZXRhS2V5OwogICAgICB0aGlzLl9zaGlmdEtleSA9IHNvdXJjZS5zaGlmdEtleTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRTdGFydEJ1dHRvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFN0YXJ0QnV0dG9ucyhzb3VyY2UpIHsKICAgICAgdGhpcy5fbGVmdEJ1dHRvbiA9IHNvdXJjZS5sZWZ0QnV0dG9uOwogICAgICB0aGlzLl9taWRkbGVCdXR0b24gPSBzb3VyY2UubWlkZGxlQnV0dG9uOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFN0YXJ0ZWRPbkxpbmVOdW1iZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTdGFydGVkT25MaW5lTnVtYmVycyhzdGFydGVkT25MaW5lTnVtYmVycykgewogICAgICB0aGlzLl9zdGFydGVkT25MaW5lTnVtYmVycyA9IHN0YXJ0ZWRPbkxpbmVOdW1iZXJzOwogICAgfQogIH0sIHsKICAgIGtleTogInRyeVNldENvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0cnlTZXRDb3VudChzZXRNb3VzZURvd25Db3VudCwgbmV3TW91c2VEb3duUG9zaXRpb24pIHsKICAgICAgLy8gYS4gSW52YWxpZGF0ZSBtdWx0aXBsZSBjbGlja2luZyBpZiB0b28gbXVjaCB0aW1lIGhhcyBwYXNzZWQgKHdpbGwgYmUgaGl0IGJ5IElFIGJlY2F1c2UgdGhlIGRldGFpbCBmaWVsZCBvZiBtb3VzZSBldmVudHMgY29udGFpbnMgZ2FyYmFnZSBpbiBJRTEwKQogICAgICB2YXIgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgaWYgKGN1cnJlbnRUaW1lIC0gdGhpcy5fbGFzdFNldE1vdXNlRG93bkNvdW50VGltZSA+IE1vdXNlRG93blN0YXRlLkNMRUFSX01PVVNFX0RPV05fQ09VTlRfVElNRSkgewogICAgICAgIHNldE1vdXNlRG93bkNvdW50ID0gMTsKICAgICAgfQogICAgICB0aGlzLl9sYXN0U2V0TW91c2VEb3duQ291bnRUaW1lID0gY3VycmVudFRpbWU7CiAgICAgIC8vIGIuIEVuc3VyZSB0aGF0IHdlIGRvbid0IGp1bXAgZnJvbSBzaW5nbGUgY2xpY2sgdG8gdHJpcGxlIGNsaWNrIGluIG9uZSBnbyAod2lsbCBiZSBoaXQgYnkgSUUgYmVjYXVzZSB0aGUgZGV0YWlsIGZpZWxkIG9mIG1vdXNlIGV2ZW50cyBjb250YWlucyBnYXJiYWdlIGluIElFMTApCiAgICAgIGlmIChzZXRNb3VzZURvd25Db3VudCA+IHRoaXMuX2xhc3RNb3VzZURvd25Db3VudCArIDEpIHsKICAgICAgICBzZXRNb3VzZURvd25Db3VudCA9IHRoaXMuX2xhc3RNb3VzZURvd25Db3VudCArIDE7CiAgICAgIH0KICAgICAgLy8gYy4gSW52YWxpZGF0ZSBtdWx0aXBsZSBjbGlja2luZyBpZiB0aGUgbG9naWNhbCBwb3NpdGlvbiBpcyBkaWZmZXJlbnQKICAgICAgaWYgKHRoaXMuX2xhc3RNb3VzZURvd25Qb3NpdGlvbiAmJiB0aGlzLl9sYXN0TW91c2VEb3duUG9zaXRpb24uZXF1YWxzKG5ld01vdXNlRG93blBvc2l0aW9uKSkgewogICAgICAgIHRoaXMuX2xhc3RNb3VzZURvd25Qb3NpdGlvbkVxdWFsQ291bnQrKzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9sYXN0TW91c2VEb3duUG9zaXRpb25FcXVhbENvdW50ID0gMTsKICAgICAgfQogICAgICB0aGlzLl9sYXN0TW91c2VEb3duUG9zaXRpb24gPSBuZXdNb3VzZURvd25Qb3NpdGlvbjsKICAgICAgLy8gRmluYWxseSBzZXQgdGhlIGxhc3RNb3VzZURvd25Db3VudAogICAgICB0aGlzLl9sYXN0TW91c2VEb3duQ291bnQgPSBNYXRoLm1pbihzZXRNb3VzZURvd25Db3VudCwgdGhpcy5fbGFzdE1vdXNlRG93blBvc2l0aW9uRXF1YWxDb3VudCk7CiAgICB9CiAgfV0pOwogIHJldHVybiBNb3VzZURvd25TdGF0ZTsKfSgpOwpNb3VzZURvd25TdGF0ZS5DTEVBUl9NT1VTRV9ET1dOX0NPVU5UX1RJTUUgPSA0MDA7IC8vIG1z"},{"version":3,"names":["dom","StandardWheelEvent","TimeoutTimer","Disposable","platform","HitTestContext","MouseTarget","MouseTargetFactory","ClientCoordinates","EditorMouseEvent","EditorMouseEventFactory","GlobalEditorPointerMoveMonitor","createEditorPagePosition","createCoordinatesRelativeToEditor","EditorZoom","Position","Selection","ViewEventHandler","MouseHandler","context","viewController","viewHelper","_mouseLeaveMonitor","_context","mouseTargetFactory","_mouseDownOperation","_register","MouseDownOperation","e","testEventTarget","_createMouseTarget","_getMouseColumn","lastMouseLeaveTime","_height","configuration","options","get","height","mouseEvents","viewDomNode","onContextMenu","_onContextMenu","onMouseMove","_onMouseMove","addDisposableListener","document","contains","target","_onMouseLeave","onMouseUp","_onMouseUp","onMouseLeave","capturePointerId","onPointerDown","pointerId","EventType","POINTER_UP","onPointerUp","onMouseDown","_onMouseDown","onMouseWheel","browserEvent","emitMouseWheel","doMouseWheelZoom","isMacintosh","metaKey","ctrlKey","shiftKey","altKey","zoomLevel","getZoomLevel","delta","deltaY","setZoomLevel","preventDefault","stopPropagation","MOUSE_WHEEL","capture","passive","addEventHandler","removeEventHandler","dispose","hasChanged","onHeightChanged","onCursorStateChanged","onScrollChanged","clientX","clientY","clientPos","pos","toPageCoordinates","editorPos","y","x","width","relativePos","createMouseTarget","getLastRenderData","shadowRoot","getShadowRoot","elementsFromPoint","posx","posy","find","el","getMouseColumn","emitContextMenu","event","targetIsWidget","mouseTargetIsWidget","isActive","actualMouseMoveTime","timestamp","emitMouseMove","Date","getTime","emitMouseLeave","emitMouseUp","t","targetIsContent","type","targetIsGutter","targetIsLineNumbers","selectOnLineNumbers","targetIsViewZone","shouldHandle","leftButton","middleButton","focus","focusTextArea","start","viewZoneData","detail","shouldSuppressMouseDownOnViewZone","viewZoneId","shouldSuppressMouseDownOnWidget","emitMouseDown","_viewController","_viewHelper","_mouseMoveMonitor","_onScrollTimeout","_mouseState","MouseDownState","_currentSelection","_isActive","_lastMouseEvent","setModifiers","position","_findMousePosition","isDragAndDrop","emitMouseDrag","_dispatchMouse","targetType","setStartedOnLineNumbers","setStartButtons","trySetCount","count","isEmpty","containsPosition","startMonitoring","viewLinesDomNode","buttons","_onMouseDownThenMove","KeyboardEvent","emitMouseDropCanceled","emitMouseDrop","_stop","cancel","stopMonitoring","setIfNotSet","selections","editorContent","model","viewModel","viewLayout","mouseColumn","verticalOffset","Math","max","getCurrentScrollTop","getZoneAtCoord","newPosition","_helpPositionJumpOverViewZone","createOutsideEditor","aboveLineNumber","getLineNumberAtVerticalOffset","belowLineNumber","getLineMaxColumn","possibleLineNumber","positionOutsideEditor","_getPositionOutsideEditor","hintedPosition","createViewZone","element","selectionStart","selectionStartLineNumber","selectionStartColumn","positionBefore","positionAfter","isBefore","inSelectionMode","dispatchMouse","startedOnLineNumbers","mouseDownCount","onInjectedText","injectedText","_altKey","_ctrlKey","_metaKey","_shiftKey","_leftButton","_middleButton","_startedOnLineNumbers","_lastMouseDownPosition","_lastMouseDownPositionEqualCount","_lastMouseDownCount","_lastSetMouseDownCountTime","source","setMouseDownCount","newMouseDownPosition","currentTime","CLEAR_MOUSE_DOWN_COUNT_TIME","equals","min"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseHandler.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardWheelEvent } from '../../../base/browser/mouseEvent.js';\nimport { TimeoutTimer } from '../../../base/common/async.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { HitTestContext, MouseTarget, MouseTargetFactory } from './mouseTarget.js';\nimport { ClientCoordinates, EditorMouseEvent, EditorMouseEventFactory, GlobalEditorPointerMoveMonitor, createEditorPagePosition, createCoordinatesRelativeToEditor } from '../editorDom.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { Position } from '../../common/core/position.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { ViewEventHandler } from '../../common/viewEventHandler.js';\nexport class MouseHandler extends ViewEventHandler {\n    constructor(context, viewController, viewHelper) {\n        super();\n        this._mouseLeaveMonitor = null;\n        this._context = context;\n        this.viewController = viewController;\n        this.viewHelper = viewHelper;\n        this.mouseTargetFactory = new MouseTargetFactory(this._context, viewHelper);\n        this._mouseDownOperation = this._register(new MouseDownOperation(this._context, this.viewController, this.viewHelper, (e, testEventTarget) => this._createMouseTarget(e, testEventTarget), (e) => this._getMouseColumn(e)));\n        this.lastMouseLeaveTime = -1;\n        this._height = this._context.configuration.options.get(133 /* EditorOption.layoutInfo */).height;\n        const mouseEvents = new EditorMouseEventFactory(this.viewHelper.viewDomNode);\n        this._register(mouseEvents.onContextMenu(this.viewHelper.viewDomNode, (e) => this._onContextMenu(e, true)));\n        this._register(mouseEvents.onMouseMove(this.viewHelper.viewDomNode, (e) => {\n            this._onMouseMove(e);\n            // See https://github.com/microsoft/vscode/issues/138789\n            // When moving the mouse really quickly, the browser sometimes forgets to\n            // send us a `mouseleave` or `mouseout` event. We therefore install here\n            // a global `mousemove` listener to manually recover if the mouse goes outside\n            // the editor. As soon as the mouse leaves outside of the editor, we\n            // remove this listener\n            if (!this._mouseLeaveMonitor) {\n                this._mouseLeaveMonitor = dom.addDisposableListener(document, 'mousemove', (e) => {\n                    if (!this.viewHelper.viewDomNode.contains(e.target)) {\n                        // went outside the editor!\n                        this._onMouseLeave(new EditorMouseEvent(e, false, this.viewHelper.viewDomNode));\n                    }\n                });\n            }\n        }));\n        this._register(mouseEvents.onMouseUp(this.viewHelper.viewDomNode, (e) => this._onMouseUp(e)));\n        this._register(mouseEvents.onMouseLeave(this.viewHelper.viewDomNode, (e) => this._onMouseLeave(e)));\n        // `pointerdown` events can't be used to determine if there's a double click, or triple click\n        // because their `e.detail` is always 0.\n        // We will therefore save the pointer id for the mouse and then reuse it in the `mousedown` event\n        // for `element.setPointerCapture`.\n        let capturePointerId = 0;\n        this._register(mouseEvents.onPointerDown(this.viewHelper.viewDomNode, (e, pointerId) => {\n            capturePointerId = pointerId;\n        }));\n        // The `pointerup` listener registered by `GlobalEditorPointerMoveMonitor` does not get invoked 100% of the times.\n        // I speculate that this is because the `pointerup` listener is only registered during the `mousedown` event, and perhaps\n        // the `pointerup` event is already queued for dispatching, which makes it that the new listener doesn't get fired.\n        // See https://github.com/microsoft/vscode/issues/146486 for repro steps.\n        // To compensate for that, we simply register here a `pointerup` listener and just communicate it.\n        this._register(dom.addDisposableListener(this.viewHelper.viewDomNode, dom.EventType.POINTER_UP, (e) => {\n            this._mouseDownOperation.onPointerUp();\n        }));\n        this._register(mouseEvents.onMouseDown(this.viewHelper.viewDomNode, (e) => this._onMouseDown(e, capturePointerId)));\n        const onMouseWheel = (browserEvent) => {\n            this.viewController.emitMouseWheel(browserEvent);\n            if (!this._context.configuration.options.get(70 /* EditorOption.mouseWheelZoom */)) {\n                return;\n            }\n            const e = new StandardWheelEvent(browserEvent);\n            const doMouseWheelZoom = (platform.isMacintosh\n                // on macOS we support cmd + two fingers scroll (`metaKey` set)\n                // and also the two fingers pinch gesture (`ctrKey` set)\n                ? ((browserEvent.metaKey || browserEvent.ctrlKey) && !browserEvent.shiftKey && !browserEvent.altKey)\n                : (browserEvent.ctrlKey && !browserEvent.metaKey && !browserEvent.shiftKey && !browserEvent.altKey));\n            if (doMouseWheelZoom) {\n                const zoomLevel = EditorZoom.getZoomLevel();\n                const delta = e.deltaY > 0 ? 1 : -1;\n                EditorZoom.setZoomLevel(zoomLevel + delta);\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        };\n        this._register(dom.addDisposableListener(this.viewHelper.viewDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { capture: true, passive: false }));\n        this._context.addEventHandler(this);\n    }\n    dispose() {\n        this._context.removeEventHandler(this);\n        if (this._mouseLeaveMonitor) {\n            this._mouseLeaveMonitor.dispose();\n            this._mouseLeaveMonitor = null;\n        }\n        super.dispose();\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        if (e.hasChanged(133 /* EditorOption.layoutInfo */)) {\n            // layout change\n            const height = this._context.configuration.options.get(133 /* EditorOption.layoutInfo */).height;\n            if (this._height !== height) {\n                this._height = height;\n                this._mouseDownOperation.onHeightChanged();\n            }\n        }\n        return false;\n    }\n    onCursorStateChanged(e) {\n        this._mouseDownOperation.onCursorStateChanged(e);\n        return false;\n    }\n    onFocusChanged(e) {\n        return false;\n    }\n    onScrollChanged(e) {\n        this._mouseDownOperation.onScrollChanged();\n        return false;\n    }\n    // --- end event handlers\n    getTargetAtClientPoint(clientX, clientY) {\n        const clientPos = new ClientCoordinates(clientX, clientY);\n        const pos = clientPos.toPageCoordinates();\n        const editorPos = createEditorPagePosition(this.viewHelper.viewDomNode);\n        if (pos.y < editorPos.y || pos.y > editorPos.y + editorPos.height || pos.x < editorPos.x || pos.x > editorPos.x + editorPos.width) {\n            return null;\n        }\n        const relativePos = createCoordinatesRelativeToEditor(this.viewHelper.viewDomNode, editorPos, pos);\n        return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), editorPos, pos, relativePos, null);\n    }\n    _createMouseTarget(e, testEventTarget) {\n        let target = e.target;\n        if (!this.viewHelper.viewDomNode.contains(target)) {\n            const shadowRoot = dom.getShadowRoot(this.viewHelper.viewDomNode);\n            if (shadowRoot) {\n                target = shadowRoot.elementsFromPoint(e.posx, e.posy).find((el) => this.viewHelper.viewDomNode.contains(el));\n            }\n        }\n        return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), e.editorPos, e.pos, e.relativePos, testEventTarget ? target : null);\n    }\n    _getMouseColumn(e) {\n        return this.mouseTargetFactory.getMouseColumn(e.relativePos);\n    }\n    _onContextMenu(e, testEventTarget) {\n        this.viewController.emitContextMenu({\n            event: e,\n            target: this._createMouseTarget(e, testEventTarget)\n        });\n    }\n    _onMouseMove(e) {\n        const targetIsWidget = this.mouseTargetFactory.mouseTargetIsWidget(e);\n        if (!targetIsWidget) {\n            e.preventDefault();\n        }\n        if (this._mouseDownOperation.isActive()) {\n            // In selection/drag operation\n            return;\n        }\n        const actualMouseMoveTime = e.timestamp;\n        if (actualMouseMoveTime < this.lastMouseLeaveTime) {\n            // Due to throttling, this event occurred before the mouse left the editor, therefore ignore it.\n            return;\n        }\n        this.viewController.emitMouseMove({\n            event: e,\n            target: this._createMouseTarget(e, true)\n        });\n    }\n    _onMouseLeave(e) {\n        if (this._mouseLeaveMonitor) {\n            this._mouseLeaveMonitor.dispose();\n            this._mouseLeaveMonitor = null;\n        }\n        this.lastMouseLeaveTime = (new Date()).getTime();\n        this.viewController.emitMouseLeave({\n            event: e,\n            target: null\n        });\n    }\n    _onMouseUp(e) {\n        this.viewController.emitMouseUp({\n            event: e,\n            target: this._createMouseTarget(e, true)\n        });\n    }\n    _onMouseDown(e, pointerId) {\n        const t = this._createMouseTarget(e, true);\n        const targetIsContent = (t.type === 6 /* MouseTargetType.CONTENT_TEXT */ || t.type === 7 /* MouseTargetType.CONTENT_EMPTY */);\n        const targetIsGutter = (t.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ || t.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ || t.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */);\n        const targetIsLineNumbers = (t.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */);\n        const selectOnLineNumbers = this._context.configuration.options.get(100 /* EditorOption.selectOnLineNumbers */);\n        const targetIsViewZone = (t.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || t.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */);\n        const targetIsWidget = (t.type === 9 /* MouseTargetType.CONTENT_WIDGET */);\n        let shouldHandle = e.leftButton || e.middleButton;\n        if (platform.isMacintosh && e.leftButton && e.ctrlKey) {\n            shouldHandle = false;\n        }\n        const focus = () => {\n            e.preventDefault();\n            this.viewHelper.focusTextArea();\n        };\n        if (shouldHandle && (targetIsContent || (targetIsLineNumbers && selectOnLineNumbers))) {\n            focus();\n            this._mouseDownOperation.start(t.type, e, pointerId);\n        }\n        else if (targetIsGutter) {\n            // Do not steal focus\n            e.preventDefault();\n        }\n        else if (targetIsViewZone) {\n            const viewZoneData = t.detail;\n            if (shouldHandle && this.viewHelper.shouldSuppressMouseDownOnViewZone(viewZoneData.viewZoneId)) {\n                focus();\n                this._mouseDownOperation.start(t.type, e, pointerId);\n                e.preventDefault();\n            }\n        }\n        else if (targetIsWidget && this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)) {\n            focus();\n            e.preventDefault();\n        }\n        this.viewController.emitMouseDown({\n            event: e,\n            target: t\n        });\n    }\n}\nclass MouseDownOperation extends Disposable {\n    constructor(context, viewController, viewHelper, createMouseTarget, getMouseColumn) {\n        super();\n        this._context = context;\n        this._viewController = viewController;\n        this._viewHelper = viewHelper;\n        this._createMouseTarget = createMouseTarget;\n        this._getMouseColumn = getMouseColumn;\n        this._mouseMoveMonitor = this._register(new GlobalEditorPointerMoveMonitor(this._viewHelper.viewDomNode));\n        this._onScrollTimeout = this._register(new TimeoutTimer());\n        this._mouseState = new MouseDownState();\n        this._currentSelection = new Selection(1, 1, 1, 1);\n        this._isActive = false;\n        this._lastMouseEvent = null;\n    }\n    dispose() {\n        super.dispose();\n    }\n    isActive() {\n        return this._isActive;\n    }\n    _onMouseDownThenMove(e) {\n        this._lastMouseEvent = e;\n        this._mouseState.setModifiers(e);\n        const position = this._findMousePosition(e, false);\n        if (!position) {\n            // Ignoring because position is unknown\n            return;\n        }\n        if (this._mouseState.isDragAndDrop) {\n            this._viewController.emitMouseDrag({\n                event: e,\n                target: position\n            });\n        }\n        else {\n            this._dispatchMouse(position, true);\n        }\n    }\n    start(targetType, e, pointerId) {\n        this._lastMouseEvent = e;\n        this._mouseState.setStartedOnLineNumbers(targetType === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */);\n        this._mouseState.setStartButtons(e);\n        this._mouseState.setModifiers(e);\n        const position = this._findMousePosition(e, true);\n        if (!position || !position.position) {\n            // Ignoring because position is unknown\n            return;\n        }\n        this._mouseState.trySetCount(e.detail, position.position);\n        // Overwrite the detail of the MouseEvent, as it will be sent out in an event and contributions might rely on it.\n        e.detail = this._mouseState.count;\n        const options = this._context.configuration.options;\n        if (!options.get(83 /* EditorOption.readOnly */)\n            && options.get(31 /* EditorOption.dragAndDrop */)\n            && !options.get(18 /* EditorOption.columnSelection */)\n            && !this._mouseState.altKey // we don't support multiple mouse\n            && e.detail < 2 // only single click on a selection can work\n            && !this._isActive // the mouse is not down yet\n            && !this._currentSelection.isEmpty() // we don't drag single cursor\n            && (position.type === 6 /* MouseTargetType.CONTENT_TEXT */) // single click on text\n            && position.position && this._currentSelection.containsPosition(position.position) // single click on a selection\n        ) {\n            this._mouseState.isDragAndDrop = true;\n            this._isActive = true;\n            this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode, pointerId, e.buttons, (e) => this._onMouseDownThenMove(e), (browserEvent) => {\n                const position = this._findMousePosition(this._lastMouseEvent, false);\n                if (browserEvent && browserEvent instanceof KeyboardEvent) {\n                    // cancel\n                    this._viewController.emitMouseDropCanceled();\n                }\n                else {\n                    this._viewController.emitMouseDrop({\n                        event: this._lastMouseEvent,\n                        target: (position ? this._createMouseTarget(this._lastMouseEvent, true) : null) // Ignoring because position is unknown, e.g., Content View Zone\n                    });\n                }\n                this._stop();\n            });\n            return;\n        }\n        this._mouseState.isDragAndDrop = false;\n        this._dispatchMouse(position, e.shiftKey);\n        if (!this._isActive) {\n            this._isActive = true;\n            this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode, pointerId, e.buttons, (e) => this._onMouseDownThenMove(e), () => this._stop());\n        }\n    }\n    _stop() {\n        this._isActive = false;\n        this._onScrollTimeout.cancel();\n    }\n    onHeightChanged() {\n        this._mouseMoveMonitor.stopMonitoring();\n    }\n    onPointerUp() {\n        this._mouseMoveMonitor.stopMonitoring();\n    }\n    onScrollChanged() {\n        if (!this._isActive) {\n            return;\n        }\n        this._onScrollTimeout.setIfNotSet(() => {\n            if (!this._lastMouseEvent) {\n                return;\n            }\n            const position = this._findMousePosition(this._lastMouseEvent, false);\n            if (!position) {\n                // Ignoring because position is unknown\n                return;\n            }\n            if (this._mouseState.isDragAndDrop) {\n                // Ignoring because users are dragging the text\n                return;\n            }\n            this._dispatchMouse(position, true);\n        }, 10);\n    }\n    onCursorStateChanged(e) {\n        this._currentSelection = e.selections[0];\n    }\n    _getPositionOutsideEditor(e) {\n        const editorContent = e.editorPos;\n        const model = this._context.viewModel;\n        const viewLayout = this._context.viewLayout;\n        const mouseColumn = this._getMouseColumn(e);\n        if (e.posy < editorContent.y) {\n            const verticalOffset = Math.max(viewLayout.getCurrentScrollTop() - (editorContent.y - e.posy), 0);\n            const viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\n            if (viewZoneData) {\n                const newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\n                if (newPosition) {\n                    return MouseTarget.createOutsideEditor(mouseColumn, newPosition);\n                }\n            }\n            const aboveLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(aboveLineNumber, 1));\n        }\n        if (e.posy > editorContent.y + editorContent.height) {\n            const verticalOffset = viewLayout.getCurrentScrollTop() + e.relativePos.y;\n            const viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\n            if (viewZoneData) {\n                const newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\n                if (newPosition) {\n                    return MouseTarget.createOutsideEditor(mouseColumn, newPosition);\n                }\n            }\n            const belowLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(belowLineNumber, model.getLineMaxColumn(belowLineNumber)));\n        }\n        const possibleLineNumber = viewLayout.getLineNumberAtVerticalOffset(viewLayout.getCurrentScrollTop() + e.relativePos.y);\n        if (e.posx < editorContent.x) {\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(possibleLineNumber, 1));\n        }\n        if (e.posx > editorContent.x + editorContent.width) {\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(possibleLineNumber, model.getLineMaxColumn(possibleLineNumber)));\n        }\n        return null;\n    }\n    _findMousePosition(e, testEventTarget) {\n        const positionOutsideEditor = this._getPositionOutsideEditor(e);\n        if (positionOutsideEditor) {\n            return positionOutsideEditor;\n        }\n        const t = this._createMouseTarget(e, testEventTarget);\n        const hintedPosition = t.position;\n        if (!hintedPosition) {\n            return null;\n        }\n        if (t.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || t.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n            const newPosition = this._helpPositionJumpOverViewZone(t.detail);\n            if (newPosition) {\n                return MouseTarget.createViewZone(t.type, t.element, t.mouseColumn, newPosition, t.detail);\n            }\n        }\n        return t;\n    }\n    _helpPositionJumpOverViewZone(viewZoneData) {\n        // Force position on view zones to go above or below depending on where selection started from\n        const selectionStart = new Position(this._currentSelection.selectionStartLineNumber, this._currentSelection.selectionStartColumn);\n        const positionBefore = viewZoneData.positionBefore;\n        const positionAfter = viewZoneData.positionAfter;\n        if (positionBefore && positionAfter) {\n            if (positionBefore.isBefore(selectionStart)) {\n                return positionBefore;\n            }\n            else {\n                return positionAfter;\n            }\n        }\n        return null;\n    }\n    _dispatchMouse(position, inSelectionMode) {\n        if (!position.position) {\n            return;\n        }\n        this._viewController.dispatchMouse({\n            position: position.position,\n            mouseColumn: position.mouseColumn,\n            startedOnLineNumbers: this._mouseState.startedOnLineNumbers,\n            inSelectionMode: inSelectionMode,\n            mouseDownCount: this._mouseState.count,\n            altKey: this._mouseState.altKey,\n            ctrlKey: this._mouseState.ctrlKey,\n            metaKey: this._mouseState.metaKey,\n            shiftKey: this._mouseState.shiftKey,\n            leftButton: this._mouseState.leftButton,\n            middleButton: this._mouseState.middleButton,\n            onInjectedText: position.type === 6 /* MouseTargetType.CONTENT_TEXT */ && position.detail.injectedText !== null\n        });\n    }\n}\nclass MouseDownState {\n    constructor() {\n        this._altKey = false;\n        this._ctrlKey = false;\n        this._metaKey = false;\n        this._shiftKey = false;\n        this._leftButton = false;\n        this._middleButton = false;\n        this._startedOnLineNumbers = false;\n        this._lastMouseDownPosition = null;\n        this._lastMouseDownPositionEqualCount = 0;\n        this._lastMouseDownCount = 0;\n        this._lastSetMouseDownCountTime = 0;\n        this.isDragAndDrop = false;\n    }\n    get altKey() { return this._altKey; }\n    get ctrlKey() { return this._ctrlKey; }\n    get metaKey() { return this._metaKey; }\n    get shiftKey() { return this._shiftKey; }\n    get leftButton() { return this._leftButton; }\n    get middleButton() { return this._middleButton; }\n    get startedOnLineNumbers() { return this._startedOnLineNumbers; }\n    get count() {\n        return this._lastMouseDownCount;\n    }\n    setModifiers(source) {\n        this._altKey = source.altKey;\n        this._ctrlKey = source.ctrlKey;\n        this._metaKey = source.metaKey;\n        this._shiftKey = source.shiftKey;\n    }\n    setStartButtons(source) {\n        this._leftButton = source.leftButton;\n        this._middleButton = source.middleButton;\n    }\n    setStartedOnLineNumbers(startedOnLineNumbers) {\n        this._startedOnLineNumbers = startedOnLineNumbers;\n    }\n    trySetCount(setMouseDownCount, newMouseDownPosition) {\n        // a. Invalidate multiple clicking if too much time has passed (will be hit by IE because the detail field of mouse events contains garbage in IE10)\n        const currentTime = (new Date()).getTime();\n        if (currentTime - this._lastSetMouseDownCountTime > MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME) {\n            setMouseDownCount = 1;\n        }\n        this._lastSetMouseDownCountTime = currentTime;\n        // b. Ensure that we don't jump from single click to triple click in one go (will be hit by IE because the detail field of mouse events contains garbage in IE10)\n        if (setMouseDownCount > this._lastMouseDownCount + 1) {\n            setMouseDownCount = this._lastMouseDownCount + 1;\n        }\n        // c. Invalidate multiple clicking if the logical position is different\n        if (this._lastMouseDownPosition && this._lastMouseDownPosition.equals(newMouseDownPosition)) {\n            this._lastMouseDownPositionEqualCount++;\n        }\n        else {\n            this._lastMouseDownPositionEqualCount = 1;\n        }\n        this._lastMouseDownPosition = newMouseDownPosition;\n        // Finally set the lastMouseDownCount\n        this._lastMouseDownCount = Math.min(setMouseDownCount, this._lastMouseDownPositionEqualCount);\n    }\n}\nMouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME = 400; // ms\n"],"mappings":"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"}]}