{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js!/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/babel.config.js","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfZ2V0IGZyb20gIi9Vc2Vycy95YW5qaWFqaWEvRGVza3RvcC93b3Jrc3BhY2UvYXZ1ZS1kYXRhLW5ldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0LmpzIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mLmpzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuamlhamlhL0Rlc2t0b3Avd29ya3NwYWNlL2F2dWUtZGF0YS1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7Ci8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uCiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwppbXBvcnQgeyAkLCBhZGREaXNwb3NhYmxlTGlzdGVuZXIsIGFwcGVuZCwgc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSB9IGZyb20gJy4uLy4uL2RvbS5qcyc7CmltcG9ydCB7IFNhc2ggfSBmcm9tICcuLi9zYXNoL3Nhc2guanMnOwppbXBvcnQgeyBTbW9vdGhTY3JvbGxhYmxlRWxlbWVudCB9IGZyb20gJy4uL3Njcm9sbGJhci9zY3JvbGxhYmxlRWxlbWVudC5qcyc7CmltcG9ydCB7IHB1c2hUb0VuZCwgcHVzaFRvU3RhcnQsIHJhbmdlIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2FycmF5cy5qcyc7CmltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2NvbG9yLmpzJzsKaW1wb3J0IHsgRW1pdHRlciwgRXZlbnQgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vZXZlbnQuanMnOwppbXBvcnQgeyBjb21iaW5lZERpc3Bvc2FibGUsIERpc3Bvc2FibGUsIGRpc3Bvc2UgYXMgX2Rpc3Bvc2UsIHRvRGlzcG9zYWJsZSB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9saWZlY3ljbGUuanMnOwppbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9udW1iZXJzLmpzJzsKaW1wb3J0IHsgU2Nyb2xsYWJsZSB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9zY3JvbGxhYmxlLmpzJzsKaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vLi4vLi4vY29tbW9uL3R5cGVzLmpzJzsKaW1wb3J0ICcuL3NwbGl0dmlldy5jc3MnOwp2YXIgZGVmYXVsdFN0eWxlcyA9IHsKICBzZXBhcmF0b3JCb3JkZXI6IENvbG9yLnRyYW5zcGFyZW50Cn07CnZhciBWaWV3SXRlbSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gVmlld0l0ZW0oY29udGFpbmVyLCB2aWV3LCBzaXplLCBkaXNwb3NhYmxlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVmlld0l0ZW0pOwogICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7CiAgICB0aGlzLnZpZXcgPSB2aWV3OwogICAgdGhpcy5kaXNwb3NhYmxlID0gZGlzcG9zYWJsZTsKICAgIHRoaXMuX2NhY2hlZFZpc2libGVTaXplID0gdW5kZWZpbmVkOwogICAgaWYgKHR5cGVvZiBzaXplID09PSAnbnVtYmVyJykgewogICAgICB0aGlzLl9zaXplID0gc2l6ZTsKICAgICAgdGhpcy5fY2FjaGVkVmlzaWJsZVNpemUgPSB1bmRlZmluZWQ7CiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9zaXplID0gMDsKICAgICAgdGhpcy5fY2FjaGVkVmlzaWJsZVNpemUgPSBzaXplLmNhY2hlZFZpc2libGVTaXplOwogICAgfQogIH0KICBfY3JlYXRlQ2xhc3MoVmlld0l0ZW0sIFt7CiAgICBrZXk6ICJzaXplIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc2l6ZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChzaXplKSB7CiAgICAgIHRoaXMuX3NpemUgPSBzaXplOwogICAgfQogIH0sIHsKICAgIGtleTogInZpc2libGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fY2FjaGVkVmlzaWJsZVNpemUgPT09ICd1bmRlZmluZWQnOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFZpc2libGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZpc2libGUodmlzaWJsZSwgc2l6ZSkgewogICAgICB2YXIgX2EsIF9iOwogICAgICBpZiAodmlzaWJsZSA9PT0gdGhpcy52aXNpYmxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh2aXNpYmxlKSB7CiAgICAgICAgdGhpcy5zaXplID0gY2xhbXAodGhpcy5fY2FjaGVkVmlzaWJsZVNpemUsIHRoaXMudmlld01pbmltdW1TaXplLCB0aGlzLnZpZXdNYXhpbXVtU2l6ZSk7CiAgICAgICAgdGhpcy5fY2FjaGVkVmlzaWJsZVNpemUgPSB1bmRlZmluZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fY2FjaGVkVmlzaWJsZVNpemUgPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogdGhpcy5zaXplOwogICAgICAgIHRoaXMuc2l6ZSA9IDA7CiAgICAgIH0KICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgndmlzaWJsZScsIHZpc2libGUpOwogICAgICAoX2IgPSAoX2EgPSB0aGlzLnZpZXcpLnNldFZpc2libGUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hLCB2aXNpYmxlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtaW5pbXVtU2l6ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZSA/IHRoaXMudmlldy5taW5pbXVtU2l6ZSA6IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAidmlld01pbmltdW1TaXplIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy52aWV3Lm1pbmltdW1TaXplOwogICAgfQogIH0sIHsKICAgIGtleTogIm1heGltdW1TaXplIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy52aXNpYmxlID8gdGhpcy52aWV3Lm1heGltdW1TaXplIDogMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2aWV3TWF4aW11bVNpemUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZpZXcubWF4aW11bVNpemU7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJpb3JpdHkiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnZpZXcucHJpb3JpdHk7CiAgICB9CiAgfSwgewogICAga2V5OiAic25hcCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy52aWV3LnNuYXA7CiAgICB9CiAgfSwgewogICAga2V5OiAiZW5hYmxlZCIsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChlbmFibGVkKSB7CiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBlbmFibGVkID8gJycgOiAnbm9uZSc7CiAgICB9CiAgfSwgewogICAga2V5OiAibGF5b3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsYXlvdXQob2Zmc2V0LCBsYXlvdXRDb250ZXh0KSB7CiAgICAgIHRoaXMubGF5b3V0Q29udGFpbmVyKG9mZnNldCk7CiAgICAgIHRoaXMudmlldy5sYXlvdXQodGhpcy5zaXplLCBvZmZzZXQsIGxheW91dENvbnRleHQpOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuZGlzcG9zYWJsZS5kaXNwb3NlKCk7CiAgICAgIHJldHVybiB0aGlzLnZpZXc7CiAgICB9CiAgfV0pOwogIHJldHVybiBWaWV3SXRlbTsKfSgpOwp2YXIgVmVydGljYWxWaWV3SXRlbSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1ZpZXdJdGVtKSB7CiAgX2luaGVyaXRzKFZlcnRpY2FsVmlld0l0ZW0sIF9WaWV3SXRlbSk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihWZXJ0aWNhbFZpZXdJdGVtKTsKICBmdW5jdGlvbiBWZXJ0aWNhbFZpZXdJdGVtKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlcnRpY2FsVmlld0l0ZW0pOwogICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBfY3JlYXRlQ2xhc3MoVmVydGljYWxWaWV3SXRlbSwgW3sKICAgIGtleTogImxheW91dENvbnRhaW5lciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbGF5b3V0Q29udGFpbmVyKG9mZnNldCkgewogICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS50b3AgPSAiIi5jb25jYXQob2Zmc2V0LCAicHgiKTsKICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gIiIuY29uY2F0KHRoaXMuc2l6ZSwgInB4Iik7CiAgICB9CiAgfV0pOwogIHJldHVybiBWZXJ0aWNhbFZpZXdJdGVtOwp9KFZpZXdJdGVtKTsKdmFyIEhvcml6b250YWxWaWV3SXRlbSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1ZpZXdJdGVtMikgewogIF9pbmhlcml0cyhIb3Jpem9udGFsVmlld0l0ZW0sIF9WaWV3SXRlbTIpOwogIHZhciBfc3VwZXIyID0gX2NyZWF0ZVN1cGVyKEhvcml6b250YWxWaWV3SXRlbSk7CiAgZnVuY3Rpb24gSG9yaXpvbnRhbFZpZXdJdGVtKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhvcml6b250YWxWaWV3SXRlbSk7CiAgICByZXR1cm4gX3N1cGVyMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBfY3JlYXRlQ2xhc3MoSG9yaXpvbnRhbFZpZXdJdGVtLCBbewogICAga2V5OiAibGF5b3V0Q29udGFpbmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsYXlvdXRDb250YWluZXIob2Zmc2V0KSB7CiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmxlZnQgPSAiIi5jb25jYXQob2Zmc2V0LCAicHgiKTsKICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUud2lkdGggPSAiIi5jb25jYXQodGhpcy5zaXplLCAicHgiKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEhvcml6b250YWxWaWV3SXRlbTsKfShWaWV3SXRlbSk7CnZhciBTdGF0ZTsKKGZ1bmN0aW9uIChTdGF0ZSkgewogIFN0YXRlW1N0YXRlWyJJZGxlIl0gPSAwXSA9ICJJZGxlIjsKICBTdGF0ZVtTdGF0ZVsiQnVzeSJdID0gMV0gPSAiQnVzeSI7Cn0pKFN0YXRlIHx8IChTdGF0ZSA9IHt9KSk7CmV4cG9ydCB2YXIgU2l6aW5nOwooZnVuY3Rpb24gKFNpemluZykgewogIC8qKgogICAqIFdoZW4gYWRkaW5nIG9yIHJlbW92aW5nIHZpZXdzLCBkaXN0cmlidXRlIHRoZSBkZWx0YSBzcGFjZSBhbW9uZwogICAqIGFsbCBvdGhlciB2aWV3cy4KICAgKi8KICBTaXppbmcuRGlzdHJpYnV0ZSA9IHsKICAgIHR5cGU6ICdkaXN0cmlidXRlJwogIH07CiAgLyoqCiAgICogV2hlbiBhZGRpbmcgb3IgcmVtb3Zpbmcgdmlld3MsIHNwbGl0IHRoZSBkZWx0YSBzcGFjZSB3aXRoIGFub3RoZXIKICAgKiBzcGVjaWZpYyB2aWV3LCBpbmRleGVkIGJ5IHRoZSBwcm92aWRlZCBgaW5kZXhgLgogICAqLwogIGZ1bmN0aW9uIFNwbGl0KGluZGV4KSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAnc3BsaXQnLAogICAgICBpbmRleDogaW5kZXgKICAgIH07CiAgfQogIFNpemluZy5TcGxpdCA9IFNwbGl0OwogIC8qKgogICAqIFdoZW4gYWRkaW5nIG9yIHJlbW92aW5nIHZpZXdzLCBhc3N1bWUgdGhlIHZpZXcgaXMgaW52aXNpYmxlLgogICAqLwogIGZ1bmN0aW9uIEludmlzaWJsZShjYWNoZWRWaXNpYmxlU2l6ZSkgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogJ2ludmlzaWJsZScsCiAgICAgIGNhY2hlZFZpc2libGVTaXplOiBjYWNoZWRWaXNpYmxlU2l6ZQogICAgfTsKICB9CiAgU2l6aW5nLkludmlzaWJsZSA9IEludmlzaWJsZTsKfSkoU2l6aW5nIHx8IChTaXppbmcgPSB7fSkpOwovKioKICogVGhlIHtAbGluayBTcGxpdFZpZXd9IGlzIHRoZSBVSSBjb21wb25lbnQgd2hpY2ggaW1wbGVtZW50cyBhIG9uZSBkaW1lbnNpb25hbAogKiBmbGV4LWxpa2UgbGF5b3V0IGFsZ29yaXRobSBmb3IgYSBjb2xsZWN0aW9uIG9mIHtAbGluayBJVmlld30gaW5zdGFuY2VzLCB3aGljaAogKiBhcmUgZXNzZW50aWFsbHkgSFRNTEVsZW1lbnQgaW5zdGFuY2VzIHdpdGggdGhlIGZvbGxvd2luZyBzaXplIGNvbnN0cmFpbnRzOgogKgogKiAtIHtAbGluayBJVmlldy5taW5pbXVtU2l6ZX0KICogLSB7QGxpbmsgSVZpZXcubWF4aW11bVNpemV9CiAqIC0ge0BsaW5rIElWaWV3LnByaW9yaXR5fQogKiAtIHtAbGluayBJVmlldy5zbmFwfQogKgogKiBJbiBjYXNlIHRoZSBTcGxpdFZpZXcgZG9lc24ndCBoYXZlIGVub3VnaCBzaXplIHRvIGZpdCBhbGwgdmlld3MsIGl0IHdpbGwgb3ZlcmZsb3cKICogaXRzIGNvbnRlbnQgd2l0aCBhIHNjcm9sbGJhci4KICoKICogSW4gYmV0d2VlbiBlYWNoIHBhaXIgb2Ygdmlld3MgdGhlcmUgd2lsbCBiZSBhIHtAbGluayBTYXNofSBhbGxvd2luZyB0aGUgdXNlcgogKiB0byByZXNpemUgdGhlIHZpZXdzLCBtYWtpbmcgc3VyZSB0aGUgY29uc3RyYWludHMgYXJlIHJlc3BlY3RlZC4KICoKICogQW4gb3B0aW9uYWwge0BsaW5rIFRMYXlvdXRDb250ZXh0IGxheW91dCBjb250ZXh0IHR5cGV9IG1heSBiZSB1c2VkIGluIG9yZGVyIHRvCiAqIHBhc3MgYWxvbmcgbGF5b3V0IGNvbnRleHR1YWwgZGF0YSBmcm9tIHRoZSB7QGxpbmsgU3BsaXRWaWV3LmxheW91dH0gbWV0aG9kIGRvd24KICogdG8gZWFjaCB2aWV3J3Mge0BsaW5rIElWaWV3LmxheW91dH0gY2FsbHMuCiAqCiAqIEZlYXR1cmVzOgogKiAtIEZsZXgtbGlrZSBsYXlvdXQgYWxnb3JpdGhtCiAqIC0gU25hcCBzdXBwb3J0CiAqIC0gT3J0aG9nb25hbCBzYXNoIHN1cHBvcnQsIGZvciBjb3JuZXIgc2FzaGVzCiAqIC0gVmlldyBoaWRlL3Nob3cgc3VwcG9ydAogKiAtIFZpZXcgc3dhcC9tb3ZlIHN1cHBvcnQKICogLSBBbHQga2V5IG1vZGlmaWVyIGJlaGF2aW9yLCBtYWNPUyBzdHlsZQogKi8KZXhwb3J0IHZhciBTcGxpdFZpZXcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EaXNwb3NhYmxlKSB7CiAgX2luaGVyaXRzKFNwbGl0VmlldywgX0Rpc3Bvc2FibGUpOwogIHZhciBfc3VwZXIzID0gX2NyZWF0ZVN1cGVyKFNwbGl0Vmlldyk7CiAgLyoqCiAgICogQ3JlYXRlIGEgbmV3IHtAbGluayBTcGxpdFZpZXd9IGluc3RhbmNlLgogICAqLwogIGZ1bmN0aW9uIFNwbGl0Vmlldyhjb250YWluZXIpIHsKICAgIHZhciBfdGhpczsKICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTcGxpdFZpZXcpOwogICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTsKICAgIF90aGlzID0gX3N1cGVyMy5jYWxsKHRoaXMpOwogICAgX3RoaXMuc2l6ZSA9IDA7CiAgICBfdGhpcy5jb250ZW50U2l6ZSA9IDA7CiAgICBfdGhpcy5wcm9wb3J0aW9ucyA9IHVuZGVmaW5lZDsKICAgIF90aGlzLnZpZXdJdGVtcyA9IFtdOwogICAgX3RoaXMuc2FzaEl0ZW1zID0gW107CiAgICBfdGhpcy5zdGF0ZSA9IFN0YXRlLklkbGU7CiAgICBfdGhpcy5fb25EaWRTYXNoQ2hhbmdlID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKCkpOwogICAgX3RoaXMuX29uRGlkU2FzaFJlc2V0ID0gX3RoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyKCkpOwogICAgX3RoaXMuX3N0YXJ0U25hcHBpbmdFbmFibGVkID0gdHJ1ZTsKICAgIF90aGlzLl9lbmRTbmFwcGluZ0VuYWJsZWQgPSB0cnVlOwogICAgLyoqCiAgICAgKiBGaXJlcyB3aGVuZXZlciB0aGUgdXNlciByZXNpemVzIGEge0BsaW5rIFNhc2ggc2FzaH0uCiAgICAgKi8KICAgIF90aGlzLm9uRGlkU2FzaENoYW5nZSA9IF90aGlzLl9vbkRpZFNhc2hDaGFuZ2UuZXZlbnQ7CiAgICAvKioKICAgICAqIEZpcmVzIHdoZW5ldmVyIHRoZSB1c2VyIGRvdWJsZSBjbGlja3MgYSB7QGxpbmsgU2FzaCBzYXNofS4KICAgICAqLwogICAgX3RoaXMub25EaWRTYXNoUmVzZXQgPSBfdGhpcy5fb25EaWRTYXNoUmVzZXQuZXZlbnQ7CiAgICBfdGhpcy5vcmllbnRhdGlvbiA9IChfYSA9IG9wdGlvbnMub3JpZW50YXRpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDAgLyogT3JpZW50YXRpb24uVkVSVElDQUwgKi87CiAgICBfdGhpcy5pbnZlcnNlQWx0QmVoYXZpb3IgPSAoX2IgPSBvcHRpb25zLmludmVyc2VBbHRCZWhhdmlvcikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZmFsc2U7CiAgICBfdGhpcy5wcm9wb3J0aW9uYWxMYXlvdXQgPSAoX2MgPSBvcHRpb25zLnByb3BvcnRpb25hbExheW91dCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdHJ1ZTsKICAgIF90aGlzLmdldFNhc2hPcnRob2dvbmFsU2l6ZSA9IG9wdGlvbnMuZ2V0U2FzaE9ydGhvZ29uYWxTaXplOwogICAgX3RoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIF90aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ21vbmFjby1zcGxpdC12aWV3MicpOwogICAgX3RoaXMuZWwuY2xhc3NMaXN0LmFkZChfdGhpcy5vcmllbnRhdGlvbiA9PT0gMCAvKiBPcmllbnRhdGlvbi5WRVJUSUNBTCAqLyA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCcpOwogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKF90aGlzLmVsKTsKICAgIF90aGlzLnNhc2hDb250YWluZXIgPSBhcHBlbmQoX3RoaXMuZWwsICQoJy5zYXNoLWNvbnRhaW5lcicpKTsKICAgIF90aGlzLnZpZXdDb250YWluZXIgPSAkKCcuc3BsaXQtdmlldy1jb250YWluZXInKTsKICAgIF90aGlzLnNjcm9sbGFibGUgPSBuZXcgU2Nyb2xsYWJsZSh7CiAgICAgIGZvcmNlSW50ZWdlclZhbHVlczogdHJ1ZSwKICAgICAgc21vb3RoU2Nyb2xsRHVyYXRpb246IDEyNSwKICAgICAgc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZTogc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZQogICAgfSk7CiAgICBfdGhpcy5zY3JvbGxhYmxlRWxlbWVudCA9IF90aGlzLl9yZWdpc3RlcihuZXcgU21vb3RoU2Nyb2xsYWJsZUVsZW1lbnQoX3RoaXMudmlld0NvbnRhaW5lciwgewogICAgICB2ZXJ0aWNhbDogX3RoaXMub3JpZW50YXRpb24gPT09IDAgLyogT3JpZW50YXRpb24uVkVSVElDQUwgKi8gPyAoX2QgPSBvcHRpb25zLnNjcm9sbGJhclZpc2liaWxpdHkpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDEgLyogU2Nyb2xsYmFyVmlzaWJpbGl0eS5BdXRvICovIDogMiAvKiBTY3JvbGxiYXJWaXNpYmlsaXR5LkhpZGRlbiAqLywKICAgICAgaG9yaXpvbnRhbDogX3RoaXMub3JpZW50YXRpb24gPT09IDEgLyogT3JpZW50YXRpb24uSE9SSVpPTlRBTCAqLyA/IChfZSA9IG9wdGlvbnMuc2Nyb2xsYmFyVmlzaWJpbGl0eSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMSAvKiBTY3JvbGxiYXJWaXNpYmlsaXR5LkF1dG8gKi8gOiAyIC8qIFNjcm9sbGJhclZpc2liaWxpdHkuSGlkZGVuICovCiAgICB9LCBfdGhpcy5zY3JvbGxhYmxlKSk7CiAgICBfdGhpcy5vbkRpZFNjcm9sbCA9IF90aGlzLnNjcm9sbGFibGVFbGVtZW50Lm9uU2Nyb2xsOwogICAgX3RoaXMuX3JlZ2lzdGVyKF90aGlzLm9uRGlkU2Nyb2xsKGZ1bmN0aW9uIChlKSB7CiAgICAgIF90aGlzLnZpZXdDb250YWluZXIuc2Nyb2xsVG9wID0gZS5zY3JvbGxUb3A7CiAgICAgIF90aGlzLnZpZXdDb250YWluZXIuc2Nyb2xsTGVmdCA9IGUuc2Nyb2xsTGVmdDsKICAgIH0pKTsKICAgIGFwcGVuZChfdGhpcy5lbCwgX3RoaXMuc2Nyb2xsYWJsZUVsZW1lbnQuZ2V0RG9tTm9kZSgpKTsKICAgIF90aGlzLnN0eWxlKG9wdGlvbnMuc3R5bGVzIHx8IGRlZmF1bHRTdHlsZXMpOwogICAgLy8gV2UgaGF2ZSBhbiBleGlzdGluZyBzZXQgb2YgdmlldywgYWRkIHRoZW0gbm93CiAgICBpZiAob3B0aW9ucy5kZXNjcmlwdG9yKSB7CiAgICAgIF90aGlzLnNpemUgPSBvcHRpb25zLmRlc2NyaXB0b3Iuc2l6ZTsKICAgICAgb3B0aW9ucy5kZXNjcmlwdG9yLnZpZXdzLmZvckVhY2goZnVuY3Rpb24gKHZpZXdEZXNjcmlwdG9yLCBpbmRleCkgewogICAgICAgIHZhciBzaXppbmcgPSB0eXBlcy5pc1VuZGVmaW5lZCh2aWV3RGVzY3JpcHRvci52aXNpYmxlKSB8fCB2aWV3RGVzY3JpcHRvci52aXNpYmxlID8gdmlld0Rlc2NyaXB0b3Iuc2l6ZSA6IHsKICAgICAgICAgIHR5cGU6ICdpbnZpc2libGUnLAogICAgICAgICAgY2FjaGVkVmlzaWJsZVNpemU6IHZpZXdEZXNjcmlwdG9yLnNpemUKICAgICAgICB9OwogICAgICAgIHZhciB2aWV3ID0gdmlld0Rlc2NyaXB0b3IudmlldzsKICAgICAgICBfdGhpcy5kb0FkZFZpZXcodmlldywgc2l6aW5nLCBpbmRleCwgdHJ1ZSk7CiAgICAgIH0pOwogICAgICAvLyBJbml0aWFsaXplIGNvbnRlbnQgc2l6ZSBhbmQgcHJvcG9ydGlvbnMgZm9yIGZpcnN0IGxheW91dAogICAgICBfdGhpcy5jb250ZW50U2l6ZSA9IF90aGlzLnZpZXdJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHIsIGkpIHsKICAgICAgICByZXR1cm4gciArIGkuc2l6ZTsKICAgICAgfSwgMCk7CiAgICAgIF90aGlzLnNhdmVQcm9wb3J0aW9ucygpOwogICAgfQogICAgcmV0dXJuIF90aGlzOwogIH0KICBfY3JlYXRlQ2xhc3MoU3BsaXRWaWV3LCBbewogICAga2V5OiAib3J0aG9nb25hbFN0YXJ0U2FzaCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX29ydGhvZ29uYWxTdGFydFNhc2g7CiAgICB9LAogICAgc2V0OgogICAgLyoqCiAgICAgKiBBIHJlZmVyZW5jZSB0byBhIHNhc2gsIHBlcnBlbmRpY3VsYXIgdG8gYWxsIHNhc2hlcyBpbiB0aGlzIHtAbGluayBTcGxpdFZpZXd9LAogICAgICogbG9jYXRlZCBhdCB0aGUgbGVmdC0gb3IgdG9wLW1vc3Qgc2lkZSBvZiB0aGUgU3BsaXRWaWV3LgogICAgICogQ29ybmVyIHNhc2hlcyB3aWxsIGJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSBhdCB0aGUgaW50ZXJzZWN0aW9ucy4KICAgICAqLwogICAgZnVuY3Rpb24gc2V0KHNhc2gpIHsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuc2FzaEl0ZW1zKSwKICAgICAgICBfc3RlcDsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHNhc2hJdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBzYXNoSXRlbS5zYXNoLm9ydGhvZ29uYWxTdGFydFNhc2ggPSBzYXNoOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CiAgICAgIHRoaXMuX29ydGhvZ29uYWxTdGFydFNhc2ggPSBzYXNoOwogICAgfQogICAgLyoqCiAgICAgKiBBIHJlZmVyZW5jZSB0byBhIHNhc2gsIHBlcnBlbmRpY3VsYXIgdG8gYWxsIHNhc2hlcyBpbiB0aGlzIHtAbGluayBTcGxpdFZpZXd9LAogICAgICogbG9jYXRlZCBhdCB0aGUgcmlnaHQtIG9yIGJvdHRvbS1tb3N0IHNpZGUgb2YgdGhlIFNwbGl0Vmlldy4KICAgICAqIENvcm5lciBzYXNoZXMgd2lsbCBiZSBjcmVhdGVkIGF1dG9tYXRpY2FsbHkgYXQgdGhlIGludGVyc2VjdGlvbnMuCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJvcnRob2dvbmFsRW5kU2FzaCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX29ydGhvZ29uYWxFbmRTYXNoOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHNhc2gpIHsKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnNhc2hJdGVtcyksCiAgICAgICAgX3N0ZXAyOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgc2FzaEl0ZW0gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICBzYXNoSXRlbS5zYXNoLm9ydGhvZ29uYWxFbmRTYXNoID0gc2FzaDsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CiAgICAgIHRoaXMuX29ydGhvZ29uYWxFbmRTYXNoID0gc2FzaDsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlL2Rpc2FibGUgc25hcHBpbmcgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGlzIHtAbGluayBTcGxpdFZpZXd9LgogICAgICovCiAgfSwgewogICAga2V5OiAic3RhcnRTbmFwcGluZ0VuYWJsZWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zdGFydFNuYXBwaW5nRW5hYmxlZDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChzdGFydFNuYXBwaW5nRW5hYmxlZCkgewogICAgICBpZiAodGhpcy5fc3RhcnRTbmFwcGluZ0VuYWJsZWQgPT09IHN0YXJ0U25hcHBpbmdFbmFibGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX3N0YXJ0U25hcHBpbmdFbmFibGVkID0gc3RhcnRTbmFwcGluZ0VuYWJsZWQ7CiAgICAgIHRoaXMudXBkYXRlU2FzaEVuYWJsZW1lbnQoKTsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlL2Rpc2FibGUgc25hcHBpbmcgYXQgdGhlIGVuZCBvZiB0aGlzIHtAbGluayBTcGxpdFZpZXd9LgogICAgICovCiAgfSwgewogICAga2V5OiAiZW5kU25hcHBpbmdFbmFibGVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZW5kU25hcHBpbmdFbmFibGVkOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGVuZFNuYXBwaW5nRW5hYmxlZCkgewogICAgICBpZiAodGhpcy5fZW5kU25hcHBpbmdFbmFibGVkID09PSBlbmRTbmFwcGluZ0VuYWJsZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fZW5kU25hcHBpbmdFbmFibGVkID0gZW5kU25hcHBpbmdFbmFibGVkOwogICAgICB0aGlzLnVwZGF0ZVNhc2hFbmFibGVtZW50KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3R5bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0eWxlKHN0eWxlcykgewogICAgICBpZiAoc3R5bGVzLnNlcGFyYXRvckJvcmRlci5pc1RyYW5zcGFyZW50KCkpIHsKICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlcGFyYXRvci1ib3JkZXInKTsKICAgICAgICB0aGlzLmVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLXNlcGFyYXRvci1ib3JkZXInKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3NlcGFyYXRvci1ib3JkZXInKTsKICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLXNlcGFyYXRvci1ib3JkZXInLCBzdHlsZXMuc2VwYXJhdG9yQm9yZGVyLnRvU3RyaW5nKCkpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHtAbGluayBJVmlldyB2aWV3fSB0byB0aGlzIHtAbGluayBTcGxpdFZpZXd9LgogICAgICoKICAgICAqIEBwYXJhbSB2aWV3IFRoZSB2aWV3IHRvIGFkZC4KICAgICAqIEBwYXJhbSBzaXplIEVpdGhlciBhIGZpeGVkIHNpemUsIG9yIGEgZHluYW1pYyB7QGxpbmsgU2l6aW5nfSBzdHJhdGVneS4KICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdG8gaW5zZXJ0IHRoZSB2aWV3IG9uLgogICAgICogQHBhcmFtIHNraXBMYXlvdXQgV2hldGhlciBsYXlvdXQgc2hvdWxkIGJlIHNraXBwZWQuCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJhZGRWaWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRWaWV3KHZpZXcsIHNpemUpIHsKICAgICAgdmFyIGluZGV4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0aGlzLnZpZXdJdGVtcy5sZW5ndGg7CiAgICAgIHZhciBza2lwTGF5b3V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgICAgIHRoaXMuZG9BZGRWaWV3KHZpZXcsIHNpemUsIGluZGV4LCBza2lwTGF5b3V0KTsKICAgIH0KICAgIC8qKgogICAgICogTGF5b3V0IHRoZSB7QGxpbmsgU3BsaXRWaWV3fS4KICAgICAqCiAgICAgKiBAcGFyYW0gc2l6ZSBUaGUgZW50aXJlIHNpemUgb2YgdGhlIHtAbGluayBTcGxpdFZpZXd9LgogICAgICogQHBhcmFtIGxheW91dENvbnRleHQgQW4gb3B0aW9uYWwgbGF5b3V0IGNvbnRleHQgdG8gcGFzcyBhbG9uZyB0byB7QGxpbmsgSVZpZXcgdmlld3N9LgogICAgICovCiAgfSwgewogICAga2V5OiAibGF5b3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsYXlvdXQoc2l6ZSwgbGF5b3V0Q29udGV4dCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHByZXZpb3VzU2l6ZSA9IE1hdGgubWF4KHRoaXMuc2l6ZSwgdGhpcy5jb250ZW50U2l6ZSk7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemU7CiAgICAgIHRoaXMubGF5b3V0Q29udGV4dCA9IGxheW91dENvbnRleHQ7CiAgICAgIGlmICghdGhpcy5wcm9wb3J0aW9ucykgewogICAgICAgIHZhciBpbmRleGVzID0gcmFuZ2UodGhpcy52aWV3SXRlbXMubGVuZ3RoKTsKICAgICAgICB2YXIgbG93UHJpb3JpdHlJbmRleGVzID0gaW5kZXhlcy5maWx0ZXIoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgIHJldHVybiBfdGhpczIudmlld0l0ZW1zW2ldLnByaW9yaXR5ID09PSAxOwogICAgICAgIH0gLyogTGF5b3V0UHJpb3JpdHkuTG93ICovKTsKICAgICAgICB2YXIgaGlnaFByaW9yaXR5SW5kZXhlcyA9IGluZGV4ZXMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLnZpZXdJdGVtc1tpXS5wcmlvcml0eSA9PT0gMjsKICAgICAgICB9IC8qIExheW91dFByaW9yaXR5LkhpZ2ggKi8pOwogICAgICAgIHRoaXMucmVzaXplKHRoaXMudmlld0l0ZW1zLmxlbmd0aCAtIDEsIHNpemUgLSBwcmV2aW91c1NpemUsIHVuZGVmaW5lZCwgbG93UHJpb3JpdHlJbmRleGVzLCBoaWdoUHJpb3JpdHlJbmRleGVzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmlld0l0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMudmlld0l0ZW1zW2ldOwogICAgICAgICAgaXRlbS5zaXplID0gY2xhbXAoTWF0aC5yb3VuZCh0aGlzLnByb3BvcnRpb25zW2ldICogc2l6ZSksIGl0ZW0ubWluaW11bVNpemUsIGl0ZW0ubWF4aW11bVNpemUpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmRpc3RyaWJ1dGVFbXB0eVNwYWNlKCk7CiAgICAgIHRoaXMubGF5b3V0Vmlld3MoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlUHJvcG9ydGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVQcm9wb3J0aW9ucygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGlmICh0aGlzLnByb3BvcnRpb25hbExheW91dCAmJiB0aGlzLmNvbnRlbnRTaXplID4gMCkgewogICAgICAgIHRoaXMucHJvcG9ydGlvbnMgPSB0aGlzLnZpZXdJdGVtcy5tYXAoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgIHJldHVybiBpLnNpemUgLyBfdGhpczMuY29udGVudFNpemU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJvblNhc2hTdGFydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TYXNoU3RhcnQoX3JlZikgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIHNhc2ggPSBfcmVmLnNhc2gsCiAgICAgICAgc3RhcnQgPSBfcmVmLnN0YXJ0LAogICAgICAgIGFsdCA9IF9yZWYuYWx0OwogICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMudmlld0l0ZW1zKSwKICAgICAgICBfc3RlcDM7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgaXRlbS5lbmFibGVkID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgfQogICAgICB2YXIgaW5kZXggPSB0aGlzLnNhc2hJdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5zYXNoID09PSBzYXNoOwogICAgICB9KTsKICAgICAgLy8gVGhpcyB3YXksIHdlIGNhbiBwcmVzcyBBbHQgd2hpbGUgd2UgcmVzaXplIGEgc2FzaCwgbWFjT1Mgc3R5bGUhCiAgICAgIHZhciBkaXNwb3NhYmxlID0gY29tYmluZWREaXNwb3NhYmxlKGFkZERpc3Bvc2FibGVMaXN0ZW5lcihkb2N1bWVudC5ib2R5LCAna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIHJlc2V0U2FzaERyYWdTdGF0ZShfdGhpczQuc2FzaERyYWdTdGF0ZS5jdXJyZW50LCBlLmFsdEtleSk7CiAgICAgIH0pLCBhZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgJ2tleXVwJywgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiByZXNldFNhc2hEcmFnU3RhdGUoX3RoaXM0LnNhc2hEcmFnU3RhdGUuY3VycmVudCwgZmFsc2UpOwogICAgICB9KSk7CiAgICAgIHZhciByZXNldFNhc2hEcmFnU3RhdGUgPSBmdW5jdGlvbiByZXNldFNhc2hEcmFnU3RhdGUoc3RhcnQsIGFsdCkgewogICAgICAgIHZhciBzaXplcyA9IF90aGlzNC52aWV3SXRlbXMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICByZXR1cm4gaS5zaXplOwogICAgICAgIH0pOwogICAgICAgIHZhciBtaW5EZWx0YSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTsKICAgICAgICB2YXIgbWF4RGVsdGEgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICAgICAgaWYgKF90aGlzNC5pbnZlcnNlQWx0QmVoYXZpb3IpIHsKICAgICAgICAgIGFsdCA9ICFhbHQ7CiAgICAgICAgfQogICAgICAgIGlmIChhbHQpIHsKICAgICAgICAgIC8vIFdoZW4gd2UncmUgdXNpbmcgdGhlIGxhc3Qgc2FzaCB3aXRoIEFsdCwgd2UncmUgcmVzaXppbmcKICAgICAgICAgIC8vIHRoZSB2aWV3IHRvIHRoZSBsZWZ0L3VwLCBpbnN0ZWFkIG9mIHJpZ2h0L2Rvd24gYXMgdXN1YWwKICAgICAgICAgIC8vIFRodXMsIHdlIG11c3QgZG8gdGhlIGludmVyc2Ugb2YgdGhlIHVzdWFsCiAgICAgICAgICB2YXIgaXNMYXN0U2FzaCA9IGluZGV4ID09PSBfdGhpczQuc2FzaEl0ZW1zLmxlbmd0aCAtIDE7CiAgICAgICAgICBpZiAoaXNMYXN0U2FzaCkgewogICAgICAgICAgICB2YXIgdmlld0l0ZW0gPSBfdGhpczQudmlld0l0ZW1zW2luZGV4XTsKICAgICAgICAgICAgbWluRGVsdGEgPSAodmlld0l0ZW0ubWluaW11bVNpemUgLSB2aWV3SXRlbS5zaXplKSAvIDI7CiAgICAgICAgICAgIG1heERlbHRhID0gKHZpZXdJdGVtLm1heGltdW1TaXplIC0gdmlld0l0ZW0uc2l6ZSkgLyAyOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIF92aWV3SXRlbSA9IF90aGlzNC52aWV3SXRlbXNbaW5kZXggKyAxXTsKICAgICAgICAgICAgbWluRGVsdGEgPSAoX3ZpZXdJdGVtLnNpemUgLSBfdmlld0l0ZW0ubWF4aW11bVNpemUpIC8gMjsKICAgICAgICAgICAgbWF4RGVsdGEgPSAoX3ZpZXdJdGVtLnNpemUgLSBfdmlld0l0ZW0ubWluaW11bVNpemUpIC8gMjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIHNuYXBCZWZvcmU7CiAgICAgICAgdmFyIHNuYXBBZnRlcjsKICAgICAgICBpZiAoIWFsdCkgewogICAgICAgICAgdmFyIHVwSW5kZXhlcyA9IHJhbmdlKGluZGV4LCAtMSk7CiAgICAgICAgICB2YXIgZG93bkluZGV4ZXMgPSByYW5nZShpbmRleCArIDEsIF90aGlzNC52aWV3SXRlbXMubGVuZ3RoKTsKICAgICAgICAgIHZhciBtaW5EZWx0YVVwID0gdXBJbmRleGVzLnJlZHVjZShmdW5jdGlvbiAociwgaSkgewogICAgICAgICAgICByZXR1cm4gciArIChfdGhpczQudmlld0l0ZW1zW2ldLm1pbmltdW1TaXplIC0gc2l6ZXNbaV0pOwogICAgICAgICAgfSwgMCk7CiAgICAgICAgICB2YXIgbWF4RGVsdGFVcCA9IHVwSW5kZXhlcy5yZWR1Y2UoZnVuY3Rpb24gKHIsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIHIgKyAoX3RoaXM0LnZpZXdJdGVtc1tpXS52aWV3TWF4aW11bVNpemUgLSBzaXplc1tpXSk7CiAgICAgICAgICB9LCAwKTsKICAgICAgICAgIHZhciBtYXhEZWx0YURvd24gPSBkb3duSW5kZXhlcy5sZW5ndGggPT09IDAgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiBkb3duSW5kZXhlcy5yZWR1Y2UoZnVuY3Rpb24gKHIsIGkpIHsKICAgICAgICAgICAgcmV0dXJuIHIgKyAoc2l6ZXNbaV0gLSBfdGhpczQudmlld0l0ZW1zW2ldLm1pbmltdW1TaXplKTsKICAgICAgICAgIH0sIDApOwogICAgICAgICAgdmFyIG1pbkRlbHRhRG93biA9IGRvd25JbmRleGVzLmxlbmd0aCA9PT0gMCA/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSA6IGRvd25JbmRleGVzLnJlZHVjZShmdW5jdGlvbiAociwgaSkgewogICAgICAgICAgICByZXR1cm4gciArIChzaXplc1tpXSAtIF90aGlzNC52aWV3SXRlbXNbaV0udmlld01heGltdW1TaXplKTsKICAgICAgICAgIH0sIDApOwogICAgICAgICAgdmFyIF9taW5EZWx0YSA9IE1hdGgubWF4KG1pbkRlbHRhVXAsIG1pbkRlbHRhRG93bik7CiAgICAgICAgICB2YXIgX21heERlbHRhID0gTWF0aC5taW4obWF4RGVsdGFEb3duLCBtYXhEZWx0YVVwKTsKICAgICAgICAgIHZhciBzbmFwQmVmb3JlSW5kZXggPSBfdGhpczQuZmluZEZpcnN0U25hcEluZGV4KHVwSW5kZXhlcyk7CiAgICAgICAgICB2YXIgc25hcEFmdGVySW5kZXggPSBfdGhpczQuZmluZEZpcnN0U25hcEluZGV4KGRvd25JbmRleGVzKTsKICAgICAgICAgIGlmICh0eXBlb2Ygc25hcEJlZm9yZUluZGV4ID09PSAnbnVtYmVyJykgewogICAgICAgICAgICB2YXIgX3ZpZXdJdGVtMiA9IF90aGlzNC52aWV3SXRlbXNbc25hcEJlZm9yZUluZGV4XTsKICAgICAgICAgICAgdmFyIGhhbGZTaXplID0gTWF0aC5mbG9vcihfdmlld0l0ZW0yLnZpZXdNaW5pbXVtU2l6ZSAvIDIpOwogICAgICAgICAgICBzbmFwQmVmb3JlID0gewogICAgICAgICAgICAgIGluZGV4OiBzbmFwQmVmb3JlSW5kZXgsCiAgICAgICAgICAgICAgbGltaXREZWx0YTogX3ZpZXdJdGVtMi52aXNpYmxlID8gX21pbkRlbHRhIC0gaGFsZlNpemUgOiBfbWluRGVsdGEgKyBoYWxmU2l6ZSwKICAgICAgICAgICAgICBzaXplOiBfdmlld0l0ZW0yLnNpemUKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlb2Ygc25hcEFmdGVySW5kZXggPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIHZhciBfdmlld0l0ZW0zID0gX3RoaXM0LnZpZXdJdGVtc1tzbmFwQWZ0ZXJJbmRleF07CiAgICAgICAgICAgIHZhciBfaGFsZlNpemUgPSBNYXRoLmZsb29yKF92aWV3SXRlbTMudmlld01pbmltdW1TaXplIC8gMik7CiAgICAgICAgICAgIHNuYXBBZnRlciA9IHsKICAgICAgICAgICAgICBpbmRleDogc25hcEFmdGVySW5kZXgsCiAgICAgICAgICAgICAgbGltaXREZWx0YTogX3ZpZXdJdGVtMy52aXNpYmxlID8gX21heERlbHRhICsgX2hhbGZTaXplIDogX21heERlbHRhIC0gX2hhbGZTaXplLAogICAgICAgICAgICAgIHNpemU6IF92aWV3SXRlbTMuc2l6ZQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBfdGhpczQuc2FzaERyYWdTdGF0ZSA9IHsKICAgICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICAgIGN1cnJlbnQ6IHN0YXJ0LAogICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgc2l6ZXM6IHNpemVzLAogICAgICAgICAgbWluRGVsdGE6IG1pbkRlbHRhLAogICAgICAgICAgbWF4RGVsdGE6IG1heERlbHRhLAogICAgICAgICAgYWx0OiBhbHQsCiAgICAgICAgICBzbmFwQmVmb3JlOiBzbmFwQmVmb3JlLAogICAgICAgICAgc25hcEFmdGVyOiBzbmFwQWZ0ZXIsCiAgICAgICAgICBkaXNwb3NhYmxlOiBkaXNwb3NhYmxlCiAgICAgICAgfTsKICAgICAgfTsKICAgICAgcmVzZXRTYXNoRHJhZ1N0YXRlKHN0YXJ0LCBhbHQpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uU2FzaENoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TYXNoQ2hhbmdlKF9yZWYyKSB7CiAgICAgIHZhciBjdXJyZW50ID0gX3JlZjIuY3VycmVudDsKICAgICAgdmFyIF90aGlzJHNhc2hEcmFnU3RhdGUgPSB0aGlzLnNhc2hEcmFnU3RhdGUsCiAgICAgICAgaW5kZXggPSBfdGhpcyRzYXNoRHJhZ1N0YXRlLmluZGV4LAogICAgICAgIHN0YXJ0ID0gX3RoaXMkc2FzaERyYWdTdGF0ZS5zdGFydCwKICAgICAgICBzaXplcyA9IF90aGlzJHNhc2hEcmFnU3RhdGUuc2l6ZXMsCiAgICAgICAgYWx0ID0gX3RoaXMkc2FzaERyYWdTdGF0ZS5hbHQsCiAgICAgICAgbWluRGVsdGEgPSBfdGhpcyRzYXNoRHJhZ1N0YXRlLm1pbkRlbHRhLAogICAgICAgIG1heERlbHRhID0gX3RoaXMkc2FzaERyYWdTdGF0ZS5tYXhEZWx0YSwKICAgICAgICBzbmFwQmVmb3JlID0gX3RoaXMkc2FzaERyYWdTdGF0ZS5zbmFwQmVmb3JlLAogICAgICAgIHNuYXBBZnRlciA9IF90aGlzJHNhc2hEcmFnU3RhdGUuc25hcEFmdGVyOwogICAgICB0aGlzLnNhc2hEcmFnU3RhdGUuY3VycmVudCA9IGN1cnJlbnQ7CiAgICAgIHZhciBkZWx0YSA9IGN1cnJlbnQgLSBzdGFydDsKICAgICAgdmFyIG5ld0RlbHRhID0gdGhpcy5yZXNpemUoaW5kZXgsIGRlbHRhLCBzaXplcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG1pbkRlbHRhLCBtYXhEZWx0YSwgc25hcEJlZm9yZSwgc25hcEFmdGVyKTsKICAgICAgaWYgKGFsdCkgewogICAgICAgIHZhciBpc0xhc3RTYXNoID0gaW5kZXggPT09IHRoaXMuc2FzaEl0ZW1zLmxlbmd0aCAtIDE7CiAgICAgICAgdmFyIG5ld1NpemVzID0gdGhpcy52aWV3SXRlbXMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICByZXR1cm4gaS5zaXplOwogICAgICAgIH0pOwogICAgICAgIHZhciB2aWV3SXRlbUluZGV4ID0gaXNMYXN0U2FzaCA/IGluZGV4IDogaW5kZXggKyAxOwogICAgICAgIHZhciB2aWV3SXRlbSA9IHRoaXMudmlld0l0ZW1zW3ZpZXdJdGVtSW5kZXhdOwogICAgICAgIHZhciBuZXdNaW5EZWx0YSA9IHZpZXdJdGVtLnNpemUgLSB2aWV3SXRlbS5tYXhpbXVtU2l6ZTsKICAgICAgICB2YXIgbmV3TWF4RGVsdGEgPSB2aWV3SXRlbS5zaXplIC0gdmlld0l0ZW0ubWluaW11bVNpemU7CiAgICAgICAgdmFyIHJlc2l6ZUluZGV4ID0gaXNMYXN0U2FzaCA/IGluZGV4IC0gMSA6IGluZGV4ICsgMTsKICAgICAgICB0aGlzLnJlc2l6ZShyZXNpemVJbmRleCwgLW5ld0RlbHRhLCBuZXdTaXplcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG5ld01pbkRlbHRhLCBuZXdNYXhEZWx0YSk7CiAgICAgIH0KICAgICAgdGhpcy5kaXN0cmlidXRlRW1wdHlTcGFjZSgpOwogICAgICB0aGlzLmxheW91dFZpZXdzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25TYXNoRW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNhc2hFbmQoaW5kZXgpIHsKICAgICAgdGhpcy5fb25EaWRTYXNoQ2hhbmdlLmZpcmUoaW5kZXgpOwogICAgICB0aGlzLnNhc2hEcmFnU3RhdGUuZGlzcG9zYWJsZS5kaXNwb3NlKCk7CiAgICAgIHRoaXMuc2F2ZVByb3BvcnRpb25zKCk7CiAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy52aWV3SXRlbXMpLAogICAgICAgIF9zdGVwNDsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDQudmFsdWU7CiAgICAgICAgICBpdGVtLmVuYWJsZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJvblZpZXdDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uVmlld0NoYW5nZShpdGVtLCBzaXplKSB7CiAgICAgIHZhciBpbmRleCA9IHRoaXMudmlld0l0ZW1zLmluZGV4T2YoaXRlbSk7CiAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy52aWV3SXRlbXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHNpemUgPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogaXRlbS5zaXplOwogICAgICBzaXplID0gY2xhbXAoc2l6ZSwgaXRlbS5taW5pbXVtU2l6ZSwgaXRlbS5tYXhpbXVtU2l6ZSk7CiAgICAgIGlmICh0aGlzLmludmVyc2VBbHRCZWhhdmlvciAmJiBpbmRleCA+IDApIHsKICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIHdlIHdhbnQgdGhlIHZpZXcgdG8gZ3JvdyBvciBzaHJpbmsgYm90aCBzaWRlcyBlcXVhbGx5CiAgICAgICAgLy8gc28gd2UganVzdCByZXNpemUgdGhlICJsZWZ0IiBzaWRlIGJ5IGhhbGYgYW5kIGxldCBgcmVzaXplYCBkbyB0aGUgY2xhbXBpbmcgbWFnaWMKICAgICAgICB0aGlzLnJlc2l6ZShpbmRleCAtIDEsIE1hdGguZmxvb3IoKGl0ZW0uc2l6ZSAtIHNpemUpIC8gMikpOwogICAgICAgIHRoaXMuZGlzdHJpYnV0ZUVtcHR5U3BhY2UoKTsKICAgICAgICB0aGlzLmxheW91dFZpZXdzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbS5zaXplID0gc2l6ZTsKICAgICAgICB0aGlzLnJlbGF5b3V0KFtpbmRleF0sIHVuZGVmaW5lZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVzaXplIGEge0BsaW5rIElWaWV3IHZpZXd9IHdpdGhpbiB0aGUge0BsaW5rIFNwbGl0Vmlld30uCiAgICAgKgogICAgICogQHBhcmFtIGluZGV4IFRoZSB7QGxpbmsgSVZpZXcgdmlld30gaW5kZXguCiAgICAgKiBAcGFyYW0gc2l6ZSBUaGUge0BsaW5rIElWaWV3IHZpZXd9IHNpemUuCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJyZXNpemVWaWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemVWaWV3KGluZGV4LCBzaXplKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU3RhdGUuSWRsZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FudCBtb2RpZnkgc3BsaXR2aWV3Jyk7CiAgICAgIH0KICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJ1c3k7CiAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy52aWV3SXRlbXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpbmRleGVzID0gcmFuZ2UodGhpcy52aWV3SXRlbXMubGVuZ3RoKS5maWx0ZXIoZnVuY3Rpb24gKGkpIHsKICAgICAgICByZXR1cm4gaSAhPT0gaW5kZXg7CiAgICAgIH0pOwogICAgICB2YXIgbG93UHJpb3JpdHlJbmRleGVzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShpbmRleGVzLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBfdGhpczUudmlld0l0ZW1zW2ldLnByaW9yaXR5ID09PSAxOwogICAgICB9IC8qIExheW91dFByaW9yaXR5LkxvdyAqLykpLCBbaW5kZXhdKTsKICAgICAgdmFyIGhpZ2hQcmlvcml0eUluZGV4ZXMgPSBpbmRleGVzLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBfdGhpczUudmlld0l0ZW1zW2ldLnByaW9yaXR5ID09PSAyOwogICAgICB9IC8qIExheW91dFByaW9yaXR5LkhpZ2ggKi8pOwogICAgICB2YXIgaXRlbSA9IHRoaXMudmlld0l0ZW1zW2luZGV4XTsKICAgICAgc2l6ZSA9IE1hdGgucm91bmQoc2l6ZSk7CiAgICAgIHNpemUgPSBjbGFtcChzaXplLCBpdGVtLm1pbmltdW1TaXplLCBNYXRoLm1pbihpdGVtLm1heGltdW1TaXplLCB0aGlzLnNpemUpKTsKICAgICAgaXRlbS5zaXplID0gc2l6ZTsKICAgICAgdGhpcy5yZWxheW91dChsb3dQcmlvcml0eUluZGV4ZXMsIGhpZ2hQcmlvcml0eUluZGV4ZXMpOwogICAgICB0aGlzLnN0YXRlID0gU3RhdGUuSWRsZTsKICAgIH0KICAgIC8qKgogICAgICogRGlzdHJpYnV0ZSB0aGUgZW50aXJlIHtAbGluayBTcGxpdFZpZXd9IHNpemUgYW1vbmcgYWxsIHtAbGluayBJVmlldyB2aWV3c30uCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJkaXN0cmlidXRlVmlld1NpemVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0cmlidXRlVmlld1NpemVzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdmFyIGZsZXhpYmxlVmlld0l0ZW1zID0gW107CiAgICAgIHZhciBmbGV4aWJsZVNpemUgPSAwOwogICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMudmlld0l0ZW1zKSwKICAgICAgICBfc3RlcDU7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBfaXRlbSA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgIGlmIChfaXRlbS5tYXhpbXVtU2l6ZSAtIF9pdGVtLm1pbmltdW1TaXplID4gMCkgewogICAgICAgICAgICBmbGV4aWJsZVZpZXdJdGVtcy5wdXNoKF9pdGVtKTsKICAgICAgICAgICAgZmxleGlibGVTaXplICs9IF9pdGVtLnNpemU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I1LmYoKTsKICAgICAgfQogICAgICB2YXIgc2l6ZSA9IE1hdGguZmxvb3IoZmxleGlibGVTaXplIC8gZmxleGlibGVWaWV3SXRlbXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfZmxleGlibGVWaWV3SXRlbXMgPSBmbGV4aWJsZVZpZXdJdGVtczsgX2kgPCBfZmxleGlibGVWaWV3SXRlbXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBfZmxleGlibGVWaWV3SXRlbXNbX2ldOwogICAgICAgIGl0ZW0uc2l6ZSA9IGNsYW1wKHNpemUsIGl0ZW0ubWluaW11bVNpemUsIGl0ZW0ubWF4aW11bVNpemUpOwogICAgICB9CiAgICAgIHZhciBpbmRleGVzID0gcmFuZ2UodGhpcy52aWV3SXRlbXMubGVuZ3RoKTsKICAgICAgdmFyIGxvd1ByaW9yaXR5SW5kZXhlcyA9IGluZGV4ZXMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNi52aWV3SXRlbXNbaV0ucHJpb3JpdHkgPT09IDE7CiAgICAgIH0gLyogTGF5b3V0UHJpb3JpdHkuTG93ICovKTsKICAgICAgdmFyIGhpZ2hQcmlvcml0eUluZGV4ZXMgPSBpbmRleGVzLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBfdGhpczYudmlld0l0ZW1zW2ldLnByaW9yaXR5ID09PSAyOwogICAgICB9IC8qIExheW91dFByaW9yaXR5LkhpZ2ggKi8pOwogICAgICB0aGlzLnJlbGF5b3V0KGxvd1ByaW9yaXR5SW5kZXhlcywgaGlnaFByaW9yaXR5SW5kZXhlcyk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHNpemUgb2YgYSB7QGxpbmsgSVZpZXcgdmlld30uCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJnZXRWaWV3U2l6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Vmlld1NpemUoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLnZpZXdJdGVtcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudmlld0l0ZW1zW2luZGV4XS5zaXplOwogICAgfQogIH0sIHsKICAgIGtleTogImRvQWRkVmlldyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZG9BZGRWaWV3KHZpZXcsIHNpemUpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIHZhciBpbmRleCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdGhpcy52aWV3SXRlbXMubGVuZ3RoOwogICAgICB2YXIgc2tpcExheW91dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkOwogICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU3RhdGUuSWRsZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FudCBtb2RpZnkgc3BsaXR2aWV3Jyk7CiAgICAgIH0KICAgICAgdGhpcy5zdGF0ZSA9IFN0YXRlLkJ1c3k7CiAgICAgIC8vIEFkZCB2aWV3CiAgICAgIHZhciBjb250YWluZXIgPSAkKCcuc3BsaXQtdmlldy12aWV3Jyk7CiAgICAgIGlmIChpbmRleCA9PT0gdGhpcy52aWV3SXRlbXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy52aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy52aWV3Q29udGFpbmVyLmluc2VydEJlZm9yZShjb250YWluZXIsIHRoaXMudmlld0NvbnRhaW5lci5jaGlsZHJlbi5pdGVtKGluZGV4KSk7CiAgICAgIH0KICAgICAgdmFyIG9uQ2hhbmdlRGlzcG9zYWJsZSA9IHZpZXcub25EaWRDaGFuZ2UoZnVuY3Rpb24gKHNpemUpIHsKICAgICAgICByZXR1cm4gX3RoaXM3Lm9uVmlld0NoYW5nZShpdGVtLCBzaXplKTsKICAgICAgfSk7CiAgICAgIHZhciBjb250YWluZXJEaXNwb3NhYmxlID0gdG9EaXNwb3NhYmxlKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM3LnZpZXdDb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTsKICAgICAgfSk7CiAgICAgIHZhciBkaXNwb3NhYmxlID0gY29tYmluZWREaXNwb3NhYmxlKG9uQ2hhbmdlRGlzcG9zYWJsZSwgY29udGFpbmVyRGlzcG9zYWJsZSk7CiAgICAgIHZhciB2aWV3U2l6ZTsKICAgICAgaWYgKHR5cGVvZiBzaXplID09PSAnbnVtYmVyJykgewogICAgICAgIHZpZXdTaXplID0gc2l6ZTsKICAgICAgfSBlbHNlIGlmIChzaXplLnR5cGUgPT09ICdzcGxpdCcpIHsKICAgICAgICB2aWV3U2l6ZSA9IHRoaXMuZ2V0Vmlld1NpemUoc2l6ZS5pbmRleCkgLyAyOwogICAgICB9IGVsc2UgaWYgKHNpemUudHlwZSA9PT0gJ2ludmlzaWJsZScpIHsKICAgICAgICB2aWV3U2l6ZSA9IHsKICAgICAgICAgIGNhY2hlZFZpc2libGVTaXplOiBzaXplLmNhY2hlZFZpc2libGVTaXplCiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2aWV3U2l6ZSA9IHZpZXcubWluaW11bVNpemU7CiAgICAgIH0KICAgICAgdmFyIGl0ZW0gPSB0aGlzLm9yaWVudGF0aW9uID09PSAwIC8qIE9yaWVudGF0aW9uLlZFUlRJQ0FMICovID8gbmV3IFZlcnRpY2FsVmlld0l0ZW0oY29udGFpbmVyLCB2aWV3LCB2aWV3U2l6ZSwgZGlzcG9zYWJsZSkgOiBuZXcgSG9yaXpvbnRhbFZpZXdJdGVtKGNvbnRhaW5lciwgdmlldywgdmlld1NpemUsIGRpc3Bvc2FibGUpOwogICAgICB0aGlzLnZpZXdJdGVtcy5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pOwogICAgICAvLyBBZGQgc2FzaAogICAgICBpZiAodGhpcy52aWV3SXRlbXMubGVuZ3RoID4gMSkgewogICAgICAgIHZhciBvcHRzID0gewogICAgICAgICAgb3J0aG9nb25hbFN0YXJ0U2FzaDogdGhpcy5vcnRob2dvbmFsU3RhcnRTYXNoLAogICAgICAgICAgb3J0aG9nb25hbEVuZFNhc2g6IHRoaXMub3J0aG9nb25hbEVuZFNhc2gKICAgICAgICB9OwogICAgICAgIHZhciBzYXNoID0gdGhpcy5vcmllbnRhdGlvbiA9PT0gMCAvKiBPcmllbnRhdGlvbi5WRVJUSUNBTCAqLyA/IG5ldyBTYXNoKHRoaXMuc2FzaENvbnRhaW5lciwgewogICAgICAgICAgZ2V0SG9yaXpvbnRhbFNhc2hUb3A6IGZ1bmN0aW9uIGdldEhvcml6b250YWxTYXNoVG9wKHMpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5nZXRTYXNoUG9zaXRpb24ocyk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0SG9yaXpvbnRhbFNhc2hXaWR0aDogdGhpcy5nZXRTYXNoT3J0aG9nb25hbFNpemUKICAgICAgICB9LCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdHMpLCB7CiAgICAgICAgICBvcmllbnRhdGlvbjogMSAvKiBPcmllbnRhdGlvbi5IT1JJWk9OVEFMICovCiAgICAgICAgfSkpIDogbmV3IFNhc2godGhpcy5zYXNoQ29udGFpbmVyLCB7CiAgICAgICAgICBnZXRWZXJ0aWNhbFNhc2hMZWZ0OiBmdW5jdGlvbiBnZXRWZXJ0aWNhbFNhc2hMZWZ0KHMpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5nZXRTYXNoUG9zaXRpb24ocyk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0VmVydGljYWxTYXNoSGVpZ2h0OiB0aGlzLmdldFNhc2hPcnRob2dvbmFsU2l6ZQogICAgICAgIH0sIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0cyksIHsKICAgICAgICAgIG9yaWVudGF0aW9uOiAwIC8qIE9yaWVudGF0aW9uLlZFUlRJQ0FMICovCiAgICAgICAgfSkpOwogICAgICAgIHZhciBzYXNoRXZlbnRNYXBwZXIgPSB0aGlzLm9yaWVudGF0aW9uID09PSAwIC8qIE9yaWVudGF0aW9uLlZFUlRJQ0FMICovID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNhc2g6IHNhc2gsCiAgICAgICAgICAgIHN0YXJ0OiBlLnN0YXJ0WSwKICAgICAgICAgICAgY3VycmVudDogZS5jdXJyZW50WSwKICAgICAgICAgICAgYWx0OiBlLmFsdEtleQogICAgICAgICAgfTsKICAgICAgICB9IDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNhc2g6IHNhc2gsCiAgICAgICAgICAgIHN0YXJ0OiBlLnN0YXJ0WCwKICAgICAgICAgICAgY3VycmVudDogZS5jdXJyZW50WCwKICAgICAgICAgICAgYWx0OiBlLmFsdEtleQogICAgICAgICAgfTsKICAgICAgICB9OwogICAgICAgIHZhciBvblN0YXJ0ID0gRXZlbnQubWFwKHNhc2gub25EaWRTdGFydCwgc2FzaEV2ZW50TWFwcGVyKTsKICAgICAgICB2YXIgb25TdGFydERpc3Bvc2FibGUgPSBvblN0YXJ0KHRoaXMub25TYXNoU3RhcnQsIHRoaXMpOwogICAgICAgIHZhciBvbkNoYW5nZSA9IEV2ZW50Lm1hcChzYXNoLm9uRGlkQ2hhbmdlLCBzYXNoRXZlbnRNYXBwZXIpOwogICAgICAgIHZhciBfb25DaGFuZ2VEaXNwb3NhYmxlID0gb25DaGFuZ2UodGhpcy5vblNhc2hDaGFuZ2UsIHRoaXMpOwogICAgICAgIHZhciBvbkVuZCA9IEV2ZW50Lm1hcChzYXNoLm9uRGlkRW5kLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM3LnNhc2hJdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0uc2FzaCA9PT0gc2FzaDsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHZhciBvbkVuZERpc3Bvc2FibGUgPSBvbkVuZCh0aGlzLm9uU2FzaEVuZCwgdGhpcyk7CiAgICAgICAgdmFyIG9uRGlkUmVzZXREaXNwb3NhYmxlID0gc2FzaC5vbkRpZFJlc2V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBpbmRleCA9IF90aGlzNy5zYXNoSXRlbXMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLnNhc2ggPT09IHNhc2g7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciB1cEluZGV4ZXMgPSByYW5nZShpbmRleCwgLTEpOwogICAgICAgICAgdmFyIGRvd25JbmRleGVzID0gcmFuZ2UoaW5kZXggKyAxLCBfdGhpczcudmlld0l0ZW1zLmxlbmd0aCk7CiAgICAgICAgICB2YXIgc25hcEJlZm9yZUluZGV4ID0gX3RoaXM3LmZpbmRGaXJzdFNuYXBJbmRleCh1cEluZGV4ZXMpOwogICAgICAgICAgdmFyIHNuYXBBZnRlckluZGV4ID0gX3RoaXM3LmZpbmRGaXJzdFNuYXBJbmRleChkb3duSW5kZXhlcyk7CiAgICAgICAgICBpZiAodHlwZW9mIHNuYXBCZWZvcmVJbmRleCA9PT0gJ251bWJlcicgJiYgIV90aGlzNy52aWV3SXRlbXNbc25hcEJlZm9yZUluZGV4XS52aXNpYmxlKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlb2Ygc25hcEFmdGVySW5kZXggPT09ICdudW1iZXInICYmICFfdGhpczcudmlld0l0ZW1zW3NuYXBBZnRlckluZGV4XS52aXNpYmxlKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzNy5fb25EaWRTYXNoUmVzZXQuZmlyZShpbmRleCk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIF9kaXNwb3NhYmxlID0gY29tYmluZWREaXNwb3NhYmxlKG9uU3RhcnREaXNwb3NhYmxlLCBfb25DaGFuZ2VEaXNwb3NhYmxlLCBvbkVuZERpc3Bvc2FibGUsIG9uRGlkUmVzZXREaXNwb3NhYmxlLCBzYXNoKTsKICAgICAgICB2YXIgc2FzaEl0ZW0gPSB7CiAgICAgICAgICBzYXNoOiBzYXNoLAogICAgICAgICAgZGlzcG9zYWJsZTogX2Rpc3Bvc2FibGUKICAgICAgICB9OwogICAgICAgIHRoaXMuc2FzaEl0ZW1zLnNwbGljZShpbmRleCAtIDEsIDAsIHNhc2hJdGVtKTsKICAgICAgfQogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodmlldy5lbGVtZW50KTsKICAgICAgdmFyIGhpZ2hQcmlvcml0eUluZGV4ZXM7CiAgICAgIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicgJiYgc2l6ZS50eXBlID09PSAnc3BsaXQnKSB7CiAgICAgICAgaGlnaFByaW9yaXR5SW5kZXhlcyA9IFtzaXplLmluZGV4XTsKICAgICAgfQogICAgICBpZiAoIXNraXBMYXlvdXQpIHsKICAgICAgICB0aGlzLnJlbGF5b3V0KFtpbmRleF0sIGhpZ2hQcmlvcml0eUluZGV4ZXMpOwogICAgICB9CiAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZS5JZGxlOwogICAgICBpZiAoIXNraXBMYXlvdXQgJiYgdHlwZW9mIHNpemUgIT09ICdudW1iZXInICYmIHNpemUudHlwZSA9PT0gJ2Rpc3RyaWJ1dGUnKSB7CiAgICAgICAgdGhpcy5kaXN0cmlidXRlVmlld1NpemVzKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWxheW91dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVsYXlvdXQobG93UHJpb3JpdHlJbmRleGVzLCBoaWdoUHJpb3JpdHlJbmRleGVzKSB7CiAgICAgIHZhciBjb250ZW50U2l6ZSA9IHRoaXMudmlld0l0ZW1zLnJlZHVjZShmdW5jdGlvbiAociwgaSkgewogICAgICAgIHJldHVybiByICsgaS5zaXplOwogICAgICB9LCAwKTsKICAgICAgdGhpcy5yZXNpemUodGhpcy52aWV3SXRlbXMubGVuZ3RoIC0gMSwgdGhpcy5zaXplIC0gY29udGVudFNpemUsIHVuZGVmaW5lZCwgbG93UHJpb3JpdHlJbmRleGVzLCBoaWdoUHJpb3JpdHlJbmRleGVzKTsKICAgICAgdGhpcy5kaXN0cmlidXRlRW1wdHlTcGFjZSgpOwogICAgICB0aGlzLmxheW91dFZpZXdzKCk7CiAgICAgIHRoaXMuc2F2ZVByb3BvcnRpb25zKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzaXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemUoaW5kZXgsIGRlbHRhKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICB2YXIgc2l6ZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHRoaXMudmlld0l0ZW1zLm1hcChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLnNpemU7CiAgICAgIH0pOwogICAgICB2YXIgbG93UHJpb3JpdHlJbmRleGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBoaWdoUHJpb3JpdHlJbmRleGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgPyBhcmd1bWVudHNbNF0gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBvdmVybG9hZE1pbkRlbHRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7CiAgICAgIHZhciBvdmVybG9hZE1heERlbHRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICAgIHZhciBzbmFwQmVmb3JlID0gYXJndW1lbnRzLmxlbmd0aCA+IDcgPyBhcmd1bWVudHNbN10gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBzbmFwQWZ0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gOCA/IGFyZ3VtZW50c1s4XSA6IHVuZGVmaW5lZDsKICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLnZpZXdJdGVtcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgICB2YXIgdXBJbmRleGVzID0gcmFuZ2UoaW5kZXgsIC0xKTsKICAgICAgdmFyIGRvd25JbmRleGVzID0gcmFuZ2UoaW5kZXggKyAxLCB0aGlzLnZpZXdJdGVtcy5sZW5ndGgpOwogICAgICBpZiAoaGlnaFByaW9yaXR5SW5kZXhlcykgewogICAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoaGlnaFByaW9yaXR5SW5kZXhlcyksCiAgICAgICAgICBfc3RlcDY7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNi5zKCk7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBfaW5kZXggPSBfc3RlcDYudmFsdWU7CiAgICAgICAgICAgIHB1c2hUb1N0YXJ0KHVwSW5kZXhlcywgX2luZGV4KTsKICAgICAgICAgICAgcHVzaFRvU3RhcnQoZG93bkluZGV4ZXMsIF9pbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3I2LmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChsb3dQcmlvcml0eUluZGV4ZXMpIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGxvd1ByaW9yaXR5SW5kZXhlcyksCiAgICAgICAgICBfc3RlcDc7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNy5zKCk7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBfaW5kZXgyID0gX3N0ZXA3LnZhbHVlOwogICAgICAgICAgICBwdXNoVG9FbmQodXBJbmRleGVzLCBfaW5kZXgyKTsKICAgICAgICAgICAgcHVzaFRvRW5kKGRvd25JbmRleGVzLCBfaW5kZXgyKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjcuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3I3LmYoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHVwSXRlbXMgPSB1cEluZGV4ZXMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzOC52aWV3SXRlbXNbaV07CiAgICAgIH0pOwogICAgICB2YXIgdXBTaXplcyA9IHVwSW5kZXhlcy5tYXAoZnVuY3Rpb24gKGkpIHsKICAgICAgICByZXR1cm4gc2l6ZXNbaV07CiAgICAgIH0pOwogICAgICB2YXIgZG93bkl0ZW1zID0gZG93bkluZGV4ZXMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzOC52aWV3SXRlbXNbaV07CiAgICAgIH0pOwogICAgICB2YXIgZG93blNpemVzID0gZG93bkluZGV4ZXMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIHNpemVzW2ldOwogICAgICB9KTsKICAgICAgdmFyIG1pbkRlbHRhVXAgPSB1cEluZGV4ZXMucmVkdWNlKGZ1bmN0aW9uIChyLCBpKSB7CiAgICAgICAgcmV0dXJuIHIgKyAoX3RoaXM4LnZpZXdJdGVtc1tpXS5taW5pbXVtU2l6ZSAtIHNpemVzW2ldKTsKICAgICAgfSwgMCk7CiAgICAgIHZhciBtYXhEZWx0YVVwID0gdXBJbmRleGVzLnJlZHVjZShmdW5jdGlvbiAociwgaSkgewogICAgICAgIHJldHVybiByICsgKF90aGlzOC52aWV3SXRlbXNbaV0ubWF4aW11bVNpemUgLSBzaXplc1tpXSk7CiAgICAgIH0sIDApOwogICAgICB2YXIgbWF4RGVsdGFEb3duID0gZG93bkluZGV4ZXMubGVuZ3RoID09PSAwID8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIDogZG93bkluZGV4ZXMucmVkdWNlKGZ1bmN0aW9uIChyLCBpKSB7CiAgICAgICAgcmV0dXJuIHIgKyAoc2l6ZXNbaV0gLSBfdGhpczgudmlld0l0ZW1zW2ldLm1pbmltdW1TaXplKTsKICAgICAgfSwgMCk7CiAgICAgIHZhciBtaW5EZWx0YURvd24gPSBkb3duSW5kZXhlcy5sZW5ndGggPT09IDAgPyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgOiBkb3duSW5kZXhlcy5yZWR1Y2UoZnVuY3Rpb24gKHIsIGkpIHsKICAgICAgICByZXR1cm4gciArIChzaXplc1tpXSAtIF90aGlzOC52aWV3SXRlbXNbaV0ubWF4aW11bVNpemUpOwogICAgICB9LCAwKTsKICAgICAgdmFyIG1pbkRlbHRhID0gTWF0aC5tYXgobWluRGVsdGFVcCwgbWluRGVsdGFEb3duLCBvdmVybG9hZE1pbkRlbHRhKTsKICAgICAgdmFyIG1heERlbHRhID0gTWF0aC5taW4obWF4RGVsdGFEb3duLCBtYXhEZWx0YVVwLCBvdmVybG9hZE1heERlbHRhKTsKICAgICAgdmFyIHNuYXBwZWQgPSBmYWxzZTsKICAgICAgaWYgKHNuYXBCZWZvcmUpIHsKICAgICAgICB2YXIgc25hcFZpZXcgPSB0aGlzLnZpZXdJdGVtc1tzbmFwQmVmb3JlLmluZGV4XTsKICAgICAgICB2YXIgdmlzaWJsZSA9IGRlbHRhID49IHNuYXBCZWZvcmUubGltaXREZWx0YTsKICAgICAgICBzbmFwcGVkID0gdmlzaWJsZSAhPT0gc25hcFZpZXcudmlzaWJsZTsKICAgICAgICBzbmFwVmlldy5zZXRWaXNpYmxlKHZpc2libGUsIHNuYXBCZWZvcmUuc2l6ZSk7CiAgICAgIH0KICAgICAgaWYgKCFzbmFwcGVkICYmIHNuYXBBZnRlcikgewogICAgICAgIHZhciBfc25hcFZpZXcgPSB0aGlzLnZpZXdJdGVtc1tzbmFwQWZ0ZXIuaW5kZXhdOwogICAgICAgIHZhciBfdmlzaWJsZSA9IGRlbHRhIDwgc25hcEFmdGVyLmxpbWl0RGVsdGE7CiAgICAgICAgc25hcHBlZCA9IF92aXNpYmxlICE9PSBfc25hcFZpZXcudmlzaWJsZTsKICAgICAgICBfc25hcFZpZXcuc2V0VmlzaWJsZShfdmlzaWJsZSwgc25hcEFmdGVyLnNpemUpOwogICAgICB9CiAgICAgIGlmIChzbmFwcGVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVzaXplKGluZGV4LCBkZWx0YSwgc2l6ZXMsIGxvd1ByaW9yaXR5SW5kZXhlcywgaGlnaFByaW9yaXR5SW5kZXhlcywgb3ZlcmxvYWRNaW5EZWx0YSwgb3ZlcmxvYWRNYXhEZWx0YSk7CiAgICAgIH0KICAgICAgZGVsdGEgPSBjbGFtcChkZWx0YSwgbWluRGVsdGEsIG1heERlbHRhKTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGRlbHRhVXAgPSBkZWx0YTsgaSA8IHVwSXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IHVwSXRlbXNbaV07CiAgICAgICAgdmFyIHNpemUgPSBjbGFtcCh1cFNpemVzW2ldICsgZGVsdGFVcCwgaXRlbS5taW5pbXVtU2l6ZSwgaXRlbS5tYXhpbXVtU2l6ZSk7CiAgICAgICAgdmFyIHZpZXdEZWx0YSA9IHNpemUgLSB1cFNpemVzW2ldOwogICAgICAgIGRlbHRhVXAgLT0gdmlld0RlbHRhOwogICAgICAgIGl0ZW0uc2l6ZSA9IHNpemU7CiAgICAgIH0KICAgICAgZm9yICh2YXIgX2kyID0gMCwgZGVsdGFEb3duID0gZGVsdGE7IF9pMiA8IGRvd25JdGVtcy5sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgdmFyIF9pdGVtMiA9IGRvd25JdGVtc1tfaTJdOwogICAgICAgIHZhciBfc2l6ZSA9IGNsYW1wKGRvd25TaXplc1tfaTJdIC0gZGVsdGFEb3duLCBfaXRlbTIubWluaW11bVNpemUsIF9pdGVtMi5tYXhpbXVtU2l6ZSk7CiAgICAgICAgdmFyIF92aWV3RGVsdGEgPSBfc2l6ZSAtIGRvd25TaXplc1tfaTJdOwogICAgICAgIGRlbHRhRG93biArPSBfdmlld0RlbHRhOwogICAgICAgIF9pdGVtMi5zaXplID0gX3NpemU7CiAgICAgIH0KICAgICAgcmV0dXJuIGRlbHRhOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3RyaWJ1dGVFbXB0eVNwYWNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0cmlidXRlRW1wdHlTcGFjZShsb3dQcmlvcml0eUluZGV4KSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICB2YXIgY29udGVudFNpemUgPSB0aGlzLnZpZXdJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHIsIGkpIHsKICAgICAgICByZXR1cm4gciArIGkuc2l6ZTsKICAgICAgfSwgMCk7CiAgICAgIHZhciBlbXB0eURlbHRhID0gdGhpcy5zaXplIC0gY29udGVudFNpemU7CiAgICAgIHZhciBpbmRleGVzID0gcmFuZ2UodGhpcy52aWV3SXRlbXMubGVuZ3RoIC0gMSwgLTEpOwogICAgICB2YXIgbG93UHJpb3JpdHlJbmRleGVzID0gaW5kZXhlcy5maWx0ZXIoZnVuY3Rpb24gKGkpIHsKICAgICAgICByZXR1cm4gX3RoaXM5LnZpZXdJdGVtc1tpXS5wcmlvcml0eSA9PT0gMTsKICAgICAgfSAvKiBMYXlvdXRQcmlvcml0eS5Mb3cgKi8pOwogICAgICB2YXIgaGlnaFByaW9yaXR5SW5kZXhlcyA9IGluZGV4ZXMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIF90aGlzOS52aWV3SXRlbXNbaV0ucHJpb3JpdHkgPT09IDI7CiAgICAgIH0gLyogTGF5b3V0UHJpb3JpdHkuSGlnaCAqLyk7CiAgICAgIHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoaGlnaFByaW9yaXR5SW5kZXhlcyksCiAgICAgICAgX3N0ZXA4OwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yOC5zKCk7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgaW5kZXggPSBfc3RlcDgudmFsdWU7CiAgICAgICAgICBwdXNoVG9TdGFydChpbmRleGVzLCBpbmRleCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I4LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I4LmYoKTsKICAgICAgfQogICAgICB2YXIgX2l0ZXJhdG9yOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGxvd1ByaW9yaXR5SW5kZXhlcyksCiAgICAgICAgX3N0ZXA5OwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yOS5zKCk7ICEoX3N0ZXA5ID0gX2l0ZXJhdG9yOS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX2luZGV4MyA9IF9zdGVwOS52YWx1ZTsKICAgICAgICAgIHB1c2hUb0VuZChpbmRleGVzLCBfaW5kZXgzKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjkuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjkuZigpOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgbG93UHJpb3JpdHlJbmRleCA9PT0gJ251bWJlcicpIHsKICAgICAgICBwdXNoVG9FbmQoaW5kZXhlcywgbG93UHJpb3JpdHlJbmRleCk7CiAgICAgIH0KICAgICAgZm9yICh2YXIgaSA9IDA7IGVtcHR5RGVsdGEgIT09IDAgJiYgaSA8IGluZGV4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IHRoaXMudmlld0l0ZW1zW2luZGV4ZXNbaV1dOwogICAgICAgIHZhciBzaXplID0gY2xhbXAoaXRlbS5zaXplICsgZW1wdHlEZWx0YSwgaXRlbS5taW5pbXVtU2l6ZSwgaXRlbS5tYXhpbXVtU2l6ZSk7CiAgICAgICAgdmFyIHZpZXdEZWx0YSA9IHNpemUgLSBpdGVtLnNpemU7CiAgICAgICAgZW1wdHlEZWx0YSAtPSB2aWV3RGVsdGE7CiAgICAgICAgaXRlbS5zaXplID0gc2l6ZTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImxheW91dFZpZXdzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsYXlvdXRWaWV3cygpIHsKICAgICAgLy8gU2F2ZSBuZXcgY29udGVudCBzaXplCiAgICAgIHRoaXMuY29udGVudFNpemUgPSB0aGlzLnZpZXdJdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHIsIGkpIHsKICAgICAgICByZXR1cm4gciArIGkuc2l6ZTsKICAgICAgfSwgMCk7CiAgICAgIC8vIExheW91dCB2aWV3cwogICAgICB2YXIgb2Zmc2V0ID0gMDsKICAgICAgdmFyIF9pdGVyYXRvcjEwID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy52aWV3SXRlbXMpLAogICAgICAgIF9zdGVwMTA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxMC5zKCk7ICEoX3N0ZXAxMCA9IF9pdGVyYXRvcjEwLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB2aWV3SXRlbSA9IF9zdGVwMTAudmFsdWU7CiAgICAgICAgICB2aWV3SXRlbS5sYXlvdXQob2Zmc2V0LCB0aGlzLmxheW91dENvbnRleHQpOwogICAgICAgICAgb2Zmc2V0ICs9IHZpZXdJdGVtLnNpemU7CiAgICAgICAgfQogICAgICAgIC8vIExheW91dCBzYXNoZXMKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMTAuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjEwLmYoKTsKICAgICAgfQogICAgICB0aGlzLnNhc2hJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uc2FzaC5sYXlvdXQoKTsKICAgICAgfSk7CiAgICAgIHRoaXMudXBkYXRlU2FzaEVuYWJsZW1lbnQoKTsKICAgICAgdGhpcy51cGRhdGVTY3JvbGxhYmxlRWxlbWVudCgpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVNjcm9sbGFibGVFbGVtZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTY3JvbGxhYmxlRWxlbWVudCgpIHsKICAgICAgaWYgKHRoaXMub3JpZW50YXRpb24gPT09IDAgLyogT3JpZW50YXRpb24uVkVSVElDQUwgKi8pIHsKICAgICAgICB0aGlzLnNjcm9sbGFibGVFbGVtZW50LnNldFNjcm9sbERpbWVuc2lvbnMoewogICAgICAgICAgaGVpZ2h0OiB0aGlzLnNpemUsCiAgICAgICAgICBzY3JvbGxIZWlnaHQ6IHRoaXMuY29udGVudFNpemUKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNjcm9sbGFibGVFbGVtZW50LnNldFNjcm9sbERpbWVuc2lvbnMoewogICAgICAgICAgd2lkdGg6IHRoaXMuc2l6ZSwKICAgICAgICAgIHNjcm9sbFdpZHRoOiB0aGlzLmNvbnRlbnRTaXplCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTYXNoRW5hYmxlbWVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU2FzaEVuYWJsZW1lbnQoKSB7CiAgICAgIHZhciBwcmV2aW91cyA9IGZhbHNlOwogICAgICB2YXIgY29sbGFwc2VzRG93biA9IHRoaXMudmlld0l0ZW1zLm1hcChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBwcmV2aW91cyA9IGkuc2l6ZSAtIGkubWluaW11bVNpemUgPiAwIHx8IHByZXZpb3VzOwogICAgICB9KTsKICAgICAgcHJldmlvdXMgPSBmYWxzZTsKICAgICAgdmFyIGV4cGFuZHNEb3duID0gdGhpcy52aWV3SXRlbXMubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIHByZXZpb3VzID0gaS5tYXhpbXVtU2l6ZSAtIGkuc2l6ZSA+IDAgfHwgcHJldmlvdXM7CiAgICAgIH0pOwogICAgICB2YXIgcmV2ZXJzZVZpZXdzID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMudmlld0l0ZW1zKS5yZXZlcnNlKCk7CiAgICAgIHByZXZpb3VzID0gZmFsc2U7CiAgICAgIHZhciBjb2xsYXBzZXNVcCA9IHJldmVyc2VWaWV3cy5tYXAoZnVuY3Rpb24gKGkpIHsKICAgICAgICByZXR1cm4gcHJldmlvdXMgPSBpLnNpemUgLSBpLm1pbmltdW1TaXplID4gMCB8fCBwcmV2aW91czsKICAgICAgfSkucmV2ZXJzZSgpOwogICAgICBwcmV2aW91cyA9IGZhbHNlOwogICAgICB2YXIgZXhwYW5kc1VwID0gcmV2ZXJzZVZpZXdzLm1hcChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBwcmV2aW91cyA9IGkubWF4aW11bVNpemUgLSBpLnNpemUgPiAwIHx8IHByZXZpb3VzOwogICAgICB9KS5yZXZlcnNlKCk7CiAgICAgIHZhciBwb3NpdGlvbiA9IDA7CiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnNhc2hJdGVtcy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICB2YXIgc2FzaCA9IHRoaXMuc2FzaEl0ZW1zW2luZGV4XS5zYXNoOwogICAgICAgIHZhciB2aWV3SXRlbSA9IHRoaXMudmlld0l0ZW1zW2luZGV4XTsKICAgICAgICBwb3NpdGlvbiArPSB2aWV3SXRlbS5zaXplOwogICAgICAgIHZhciBtaW4gPSAhKGNvbGxhcHNlc0Rvd25baW5kZXhdICYmIGV4cGFuZHNVcFtpbmRleCArIDFdKTsKICAgICAgICB2YXIgbWF4ID0gIShleHBhbmRzRG93bltpbmRleF0gJiYgY29sbGFwc2VzVXBbaW5kZXggKyAxXSk7CiAgICAgICAgaWYgKG1pbiAmJiBtYXgpIHsKICAgICAgICAgIHZhciB1cEluZGV4ZXMgPSByYW5nZShpbmRleCwgLTEpOwogICAgICAgICAgdmFyIGRvd25JbmRleGVzID0gcmFuZ2UoaW5kZXggKyAxLCB0aGlzLnZpZXdJdGVtcy5sZW5ndGgpOwogICAgICAgICAgdmFyIHNuYXBCZWZvcmVJbmRleCA9IHRoaXMuZmluZEZpcnN0U25hcEluZGV4KHVwSW5kZXhlcyk7CiAgICAgICAgICB2YXIgc25hcEFmdGVySW5kZXggPSB0aGlzLmZpbmRGaXJzdFNuYXBJbmRleChkb3duSW5kZXhlcyk7CiAgICAgICAgICB2YXIgc25hcHBlZEJlZm9yZSA9IHR5cGVvZiBzbmFwQmVmb3JlSW5kZXggPT09ICdudW1iZXInICYmICF0aGlzLnZpZXdJdGVtc1tzbmFwQmVmb3JlSW5kZXhdLnZpc2libGU7CiAgICAgICAgICB2YXIgc25hcHBlZEFmdGVyID0gdHlwZW9mIHNuYXBBZnRlckluZGV4ID09PSAnbnVtYmVyJyAmJiAhdGhpcy52aWV3SXRlbXNbc25hcEFmdGVySW5kZXhdLnZpc2libGU7CiAgICAgICAgICBpZiAoc25hcHBlZEJlZm9yZSAmJiBjb2xsYXBzZXNVcFtpbmRleF0gJiYgKHBvc2l0aW9uID4gMCB8fCB0aGlzLnN0YXJ0U25hcHBpbmdFbmFibGVkKSkgewogICAgICAgICAgICBzYXNoLnN0YXRlID0gMSAvKiBTYXNoU3RhdGUuQXRNaW5pbXVtICovOwogICAgICAgICAgfSBlbHNlIGlmIChzbmFwcGVkQWZ0ZXIgJiYgY29sbGFwc2VzRG93bltpbmRleF0gJiYgKHBvc2l0aW9uIDwgdGhpcy5jb250ZW50U2l6ZSB8fCB0aGlzLmVuZFNuYXBwaW5nRW5hYmxlZCkpIHsKICAgICAgICAgICAgc2FzaC5zdGF0ZSA9IDIgLyogU2FzaFN0YXRlLkF0TWF4aW11bSAqLzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNhc2guc3RhdGUgPSAwIC8qIFNhc2hTdGF0ZS5EaXNhYmxlZCAqLzsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKG1pbiAmJiAhbWF4KSB7CiAgICAgICAgICBzYXNoLnN0YXRlID0gMSAvKiBTYXNoU3RhdGUuQXRNaW5pbXVtICovOwogICAgICAgIH0gZWxzZSBpZiAoIW1pbiAmJiBtYXgpIHsKICAgICAgICAgIHNhc2guc3RhdGUgPSAyIC8qIFNhc2hTdGF0ZS5BdE1heGltdW0gKi87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNhc2guc3RhdGUgPSAzIC8qIFNhc2hTdGF0ZS5FbmFibGVkICovOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldFNhc2hQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2FzaFBvc2l0aW9uKHNhc2gpIHsKICAgICAgdmFyIHBvc2l0aW9uID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNhc2hJdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgIHBvc2l0aW9uICs9IHRoaXMudmlld0l0ZW1zW2ldLnNpemU7CiAgICAgICAgaWYgKHRoaXMuc2FzaEl0ZW1zW2ldLnNhc2ggPT09IHNhc2gpIHsKICAgICAgICAgIHJldHVybiBwb3NpdGlvbjsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIDA7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmluZEZpcnN0U25hcEluZGV4IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kRmlyc3RTbmFwSW5kZXgoaW5kZXhlcykgewogICAgICAvLyB2aXNpYmxlIHZpZXdzIGZpcnN0CiAgICAgIHZhciBfaXRlcmF0b3IxMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGluZGV4ZXMpLAogICAgICAgIF9zdGVwMTE7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxMS5zKCk7ICEoX3N0ZXAxMSA9IF9pdGVyYXRvcjExLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpbmRleCA9IF9zdGVwMTEudmFsdWU7CiAgICAgICAgICB2YXIgdmlld0l0ZW0gPSB0aGlzLnZpZXdJdGVtc1tpbmRleF07CiAgICAgICAgICBpZiAoIXZpZXdJdGVtLnZpc2libGUpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodmlld0l0ZW0uc25hcCkgewogICAgICAgICAgICByZXR1cm4gaW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIHRoZW4sIGhpZGRlbiB2aWV3cwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxMS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTEuZigpOwogICAgICB9CiAgICAgIHZhciBfaXRlcmF0b3IxMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGluZGV4ZXMpLAogICAgICAgIF9zdGVwMTI7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IxMi5zKCk7ICEoX3N0ZXAxMiA9IF9pdGVyYXRvcjEyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBfaW5kZXg0ID0gX3N0ZXAxMi52YWx1ZTsKICAgICAgICAgIHZhciBfdmlld0l0ZW00ID0gdGhpcy52aWV3SXRlbXNbX2luZGV4NF07CiAgICAgICAgICBpZiAoX3ZpZXdJdGVtNC52aXNpYmxlICYmIF92aWV3SXRlbTQubWF4aW11bVNpemUgLSBfdmlld0l0ZW00Lm1pbmltdW1TaXplID4gMCkgewogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFfdmlld0l0ZW00LnZpc2libGUgJiYgX3ZpZXdJdGVtNC5zbmFwKSB7CiAgICAgICAgICAgIHJldHVybiBfaW5kZXg0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMTIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjEyLmYoKTsKICAgICAgfQogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3Bvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFNwbGl0Vmlldy5wcm90b3R5cGUpLCAiZGlzcG9zZSIsIHRoaXMpLmNhbGwodGhpcyk7CiAgICAgIF9kaXNwb3NlKHRoaXMudmlld0l0ZW1zKTsKICAgICAgdGhpcy52aWV3SXRlbXMgPSBbXTsKICAgICAgdGhpcy5zYXNoSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLmRpc3Bvc2FibGUuZGlzcG9zZSgpOwogICAgICB9KTsKICAgICAgdGhpcy5zYXNoSXRlbXMgPSBbXTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFNwbGl0VmlldzsKfShEaXNwb3NhYmxlKTs="},{"version":3,"names":["$","addDisposableListener","append","scheduleAtNextAnimationFrame","Sash","SmoothScrollableElement","pushToEnd","pushToStart","range","Color","Emitter","Event","combinedDisposable","Disposable","dispose","toDisposable","clamp","Scrollable","types","defaultStyles","separatorBorder","transparent","ViewItem","container","view","size","disposable","_cachedVisibleSize","undefined","_size","classList","add","cachedVisibleSize","visible","_a","_b","viewMinimumSize","viewMaximumSize","toggle","setVisible","call","minimumSize","maximumSize","priority","snap","enabled","style","pointerEvents","offset","layoutContext","layoutContainer","layout","VerticalViewItem","top","height","HorizontalViewItem","left","width","State","Sizing","Distribute","type","Split","index","Invisible","SplitView","options","_c","_d","_e","contentSize","proportions","viewItems","sashItems","state","Idle","_onDidSashChange","_register","_onDidSashReset","_startSnappingEnabled","_endSnappingEnabled","onDidSashChange","event","onDidSashReset","orientation","inverseAltBehavior","proportionalLayout","getSashOrthogonalSize","el","document","createElement","appendChild","sashContainer","viewContainer","scrollable","forceIntegerValues","smoothScrollDuration","scrollableElement","vertical","scrollbarVisibility","horizontal","onDidScroll","onScroll","e","scrollTop","scrollLeft","getDomNode","styles","descriptor","views","forEach","viewDescriptor","sizing","isUndefined","doAddView","reduce","r","i","saveProportions","_orthogonalStartSash","sash","sashItem","orthogonalStartSash","_orthogonalEndSash","orthogonalEndSash","startSnappingEnabled","updateSashEnablement","endSnappingEnabled","isTransparent","remove","removeProperty","setProperty","toString","length","skipLayout","previousSize","Math","max","indexes","lowPriorityIndexes","filter","highPriorityIndexes","resize","item","round","distributeEmptySpace","layoutViews","map","start","alt","findIndex","body","resetSashDragState","sashDragState","current","altKey","sizes","minDelta","Number","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","isLastSash","viewItem","snapBefore","snapAfter","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","min","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","floor","limitDelta","delta","newDelta","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","fire","indexOf","relayout","Error","Busy","flexibleViewItems","flexibleSize","push","insertBefore","children","onChangeDisposable","onDidChange","onViewChange","containerDisposable","removeChild","viewSize","getViewSize","splice","opts","getHorizontalSashTop","s","getSashPosition","getHorizontalSashWidth","Object","assign","getVerticalSashLeft","getVerticalSashHeight","sashEventMapper","startY","currentY","startX","currentX","onStart","onDidStart","onStartDisposable","onSashStart","onChange","onSashChange","onEnd","onDidEnd","onEndDisposable","onSashEnd","onDidResetDisposable","onDidReset","element","distributeViewSizes","overloadMinDelta","overloadMaxDelta","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","viewDelta","deltaDown","lowPriorityIndex","emptyDelta","updateScrollableElement","setScrollDimensions","scrollHeight","scrollWidth","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","position","snappedBefore","snappedAfter"],"sources":["/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        var _a, _b;\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        this.view.layout(this.size, offset, layoutContext);\n    }\n    dispose() {\n        this.disposable.dispose();\n        return this.view;\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e;\n        super();\n        this.size = 0;\n        this.contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = [];\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n        this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame\n        });\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? ((_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? ((_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            this.viewContainer.scrollTop = e.scrollTop;\n            this.viewContainer.scrollLeft = e.scrollLeft;\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this.contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                item.size = clamp(Math.round(this.proportions[i] * size), item.minimumSize, item.maximumSize);\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this.contentSize > 0) {\n            this.proportions = this.viewItems.map(i => i.size / this.contentSize);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(document.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(document.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        const indexes = range(this.viewItems.length).filter(i => i !== index);\n        const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        const item = this.viewItems[index];\n        size = Math.round(size);\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n        item.size = size;\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        this.state = State.Idle;\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        // Add view\n        const container = $('.split-view-view');\n        if (index === this.viewItems.length) {\n            this.viewContainer.appendChild(container);\n        }\n        else {\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n        }\n        const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n        const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n        const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else if (size.type === 'split') {\n            viewSize = this.getViewSize(size.index) / 2;\n        }\n        else if (size.type === 'invisible') {\n            viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n        }\n        else {\n            viewSize = view.minimumSize;\n        }\n        const item = this.orientation === 0 /* Orientation.VERTICAL */\n            ? new VerticalViewItem(container, view, viewSize, disposable)\n            : new HorizontalViewItem(container, view, viewSize, disposable);\n        this.viewItems.splice(index, 0, item);\n        // Add sash\n        if (this.viewItems.length > 1) {\n            const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n            const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 1 /* Orientation.HORIZONTAL */ }))\n                : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 0 /* Orientation.VERTICAL */ }));\n            const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n            const onStart = Event.map(sash.onDidStart, sashEventMapper);\n            const onStartDisposable = onStart(this.onSashStart, this);\n            const onChange = Event.map(sash.onDidChange, sashEventMapper);\n            const onChangeDisposable = onChange(this.onSashChange, this);\n            const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n            const onEndDisposable = onEnd(this.onSashEnd, this);\n            const onDidResetDisposable = sash.onDidReset(() => {\n                const index = this.sashItems.findIndex(item => item.sash === sash);\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                    return;\n                }\n                if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                    return;\n                }\n                this._onDidSashReset.fire(index);\n            });\n            const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n            const sashItem = { sash, disposable };\n            this.sashItems.splice(index - 1, 0, sashItem);\n        }\n        container.appendChild(view.element);\n        let highPriorityIndexes;\n        if (typeof size !== 'number' && size.type === 'split') {\n            highPriorityIndexes = [size.index];\n        }\n        if (!skipLayout) {\n            this.relayout([index], highPriorityIndexes);\n        }\n        this.state = State.Idle;\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n            this.distributeViewSizes();\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this.contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this.contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    dispose() {\n        super.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n    }\n}\n"],"mappings":"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"}]}