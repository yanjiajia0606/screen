{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/components/apiPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/components/apiPanel.vue","mtime":1670898000205},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGdldEFwaVNjb3VyY2UsIGdldEFwaUdyb3VwIH0gZnJvbSAnQC9hcGkvdjInCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRiOiAnJywKICAgICAgZGljOiBbXSwKICAgICAgYXBpRGljOiBbXSwKICAgICAgcGF0aHM6IHt9LAogICAgICBhcGlTcmM6ICcnLAogICAgICBtZXRob2Q6ICcnLAogICAgICBhcGlQYXJhbXM6IHt9LAogICAgICAvLyBhcGlPYmplY3Q6IHsKICAgICAgLy8gICBhcGlTcmM6ICcnLAogICAgICAvLyAgIG1ldGhvZDogJycsCiAgICAgIC8vIH0sCiAgICAgIC8vICAgYXBpT2JqZWN0OiAiIiwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyBhcGlQYXJhbXMoKSB7CiAgICAvLyAgIGlmICh0aGlzLnBhdGhzW3RoaXMuYXBpU3JjXSkgewogICAgLy8gICAgIGlmICh0aGlzLnBhdGhzW3RoaXMuYXBpU3JjXS5nZXQpIHsKICAgIC8vICAgICAgIHRoaXMubWV0aG9kID0gJ0dFVCcKICAgIC8vICAgICB9IGVsc2UgaWYgKHRoaXMucGF0aHNbdGhpcy5hcGlTcmNdLnBvc3QpIHsKICAgIC8vICAgICAgIHRoaXMubWV0aG9kID0gJ1BPU1QnCiAgICAvLyAgICAgfQogICAgLy8gICAgIHRoaXMuJGVtaXQoJ2dldEFwaScsIHsKICAgIC8vICAgICAgIC8vIHVybDogJy9hdnVlJyArIHRoaXMuYXBpU3JjLAogICAgLy8gICAgICAgdXJsOiAnL3BpZScsCiAgICAvLyAgICAgICBtZXRob2Q6IHRoaXMubWV0aG9kLnRvTG93ZXJDYXNlKCksCiAgICAvLyAgICAgfSkKICAgIC8vICAgICByZXR1cm4gdGhpcy5wYXRoc1t0aGlzLmFwaVNyY10uZ2V0IHx8IHRoaXMucGF0aHNbdGhpcy5hcGlTcmNdLnBvc3QKICAgIC8vICAgfQogICAgLy8gICByZXR1cm4ge30KICAgIC8vIH0sCiAgICAvLyBtZXRob2QoKSB7CiAgICAvLyAgIGlmICh0aGlzLnBhdGhzW3RoaXMuYXBpU3JjXSkgewogICAgLy8gICAgIGlmICh0aGlzLnBhdGhzW3RoaXMuYXBpU3JjXS5nZXQpIHsKICAgIC8vICAgICAgIHJldHVybiAnR0VUJwogICAgLy8gICAgIH0gZWxzZSBpZiAodGhpcy5wYXRoc1t0aGlzLmFwaVNyY10ucG9zdCkgewogICAgLy8gICAgICAgcmV0dXJuICdQT1NUJwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICByZXR1cm4gJycKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRHcm91cCgpIHsKICAgICAgZ2V0QXBpR3JvdXAoKS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlcwogICAgICAgIGlmIChkYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5kaWMgPSBkYXRhLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09ICfmvI/mtJ7mqKHlnZcnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLm5hbWUsCiAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5uYW1lLAogICAgICAgICAgICAgICAgaXRlbSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHJldHVybiB7fQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5kYiA9IHRoaXMuZGljWzBdLnZhbHVlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGdldEFwaUxpc3QoZGIgPSB0aGlzLmRiKSB7CiAgICAgIGdldEFwaVNjb3VyY2UoZGIpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IHsgcGF0aHMgfSA9IHJlcy5kYXRhCiAgICAgICAgdGhpcy5wYXRocyA9IHBhdGhzCiAgICAgICAgZm9yIChsZXQgdXJsIGluIHBhdGhzKSB7CiAgICAgICAgICBpZiAocGF0aHNbdXJsXS5nZXQpIHsKICAgICAgICAgICAgY29uc3Qgb2JqID0gcGF0aHNbdXJsXS5nZXQKICAgICAgICAgICAgdGhpcy5hcGlEaWMucHVzaCh7CiAgICAgICAgICAgICAgbGFiZWw6IG9iai50YWdzWzBdLAogICAgICAgICAgICAgIHZhbHVlOiB1cmwsCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgICAvLyAgIHRoaXMuYXBpRGljLnB1c2goewogICAgICAgICAgLy8gICAgIGxhYmVsOiBwYXRoc1tpXS50YWdzWzBdLAogICAgICAgICAgLy8gICAgIHZhbHVlOiBpLAogICAgICAgICAgLy8gICB9KTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHdpbmRvdy50aCA9IHRoaXMKICAgIHRoaXMuZ2V0R3JvdXAoKQogIH0sCiAgd2F0Y2g6IHsKICAgIGRiOiB7CiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5hcGlEaWMgPSBbXQogICAgICAgIHRoaXMuYXBpU3JjID0gJycKICAgICAgICB0aGlzLmdldEFwaUxpc3QoKQogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgfSwKICAgIGFwaVNyYzogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIGlmICh0aGlzLnBhdGhzW3RoaXMuYXBpU3JjXSkgewogICAgICAgICAgaWYgKHRoaXMucGF0aHNbdGhpcy5hcGlTcmNdLmdldCkgewogICAgICAgICAgICB0aGlzLm1ldGhvZCA9ICdHRVQnCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGF0aHNbdGhpcy5hcGlTcmNdLnBvc3QpIHsKICAgICAgICAgICAgdGhpcy5tZXRob2QgPSAnUE9TVCcKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZWFwaScsIHsKICAgICAgICAgICAgdXJsOiAnL2FwaScgKyB0aGlzLmFwaVNyYywKICAgICAgICAgICAgbWV0aG9kOiB0aGlzLm1ldGhvZC50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuYXBpUGFyYW1zID0KICAgICAgICAgICAgdGhpcy5wYXRoc1t0aGlzLmFwaVNyY10uZ2V0IHx8IHRoaXMucGF0aHNbdGhpcy5hcGlTcmNdLnBvc3QKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5hcGlQYXJhbXMgPSB7fQogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["apiPanel.vue"],"names":[],"mappings":";AAkCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"apiPanel.vue","sourceRoot":"src/page/components","sourcesContent":["<!--\n * @Author: 闫佳佳 18332162809@163.com\n * @Date: 2022-11-01 17:57:55\n * @LastEditors: 闫佳佳 18332162809@163.com\n * @LastEditTime: 2022-11-15 16:05:14\n * @FilePath: /avue-data/src/page/components/apiPanel.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<template>\n  <div>\n    <el-form-item label=\"数据模块\">\n      <avue-select :dic=\"dic\" v-model=\"db\"></avue-select>\n    </el-form-item>\n    <el-form-item label=\"接口列表\">\n      <avue-select :dic=\"apiDic\" v-model=\"apiSrc\"></avue-select>\n    </el-form-item>\n    <el-form-item label=\"接口地址\" v-show=\"apiSrc\"\n      ><span class=\"no-warp\">{{ apiSrc }}</span>\n    </el-form-item>\n    <el-form-item label=\"请求方式\" v-show=\"apiSrc\">\n      <span class=\"no-warp post-method\">{{ method }}</span>\n    </el-form-item>\n    <el-form-item label=\"接口描述\" v-show=\"apiSrc\">\n      {{ apiParams.description }}\n      <span>({{ apiParams.summary }})</span>\n    </el-form-item>\n\n    <el-form-item label=\"请求参数\" v-show=\"apiSrc\">\n      <!-- <span class=\"no-warp\">{{ this.apiVal }}</span> -->\n    </el-form-item>\n  </div>\n</template>\n\n<script>\nimport { getApiScource, getApiGroup } from '@/api/v2'\n\nexport default {\n  data() {\n    return {\n      db: '',\n      dic: [],\n      apiDic: [],\n      paths: {},\n      apiSrc: '',\n      method: '',\n      apiParams: {},\n      // apiObject: {\n      //   apiSrc: '',\n      //   method: '',\n      // },\n      //   apiObject: \"\",\n    }\n  },\n  computed: {\n    // apiParams() {\n    //   if (this.paths[this.apiSrc]) {\n    //     if (this.paths[this.apiSrc].get) {\n    //       this.method = 'GET'\n    //     } else if (this.paths[this.apiSrc].post) {\n    //       this.method = 'POST'\n    //     }\n    //     this.$emit('getApi', {\n    //       // url: '/avue' + this.apiSrc,\n    //       url: '/pie',\n    //       method: this.method.toLowerCase(),\n    //     })\n    //     return this.paths[this.apiSrc].get || this.paths[this.apiSrc].post\n    //   }\n    //   return {}\n    // },\n    // method() {\n    //   if (this.paths[this.apiSrc]) {\n    //     if (this.paths[this.apiSrc].get) {\n    //       return 'GET'\n    //     } else if (this.paths[this.apiSrc].post) {\n    //       return 'POST'\n    //     } else {\n    //       return ''\n    //     }\n    //   }\n    // },\n  },\n  methods: {\n    getGroup() {\n      getApiGroup().then((res) => {\n        const { data } = res\n        if (data.length) {\n          this.dic = data.map((item) => {\n            if (item.name == '漏洞模块') {\n              return {\n                label: item.name,\n                value: item.name,\n                item,\n              }\n            }else{\n              return {}\n            }\n          })\n          this.db = this.dic[0].value\n        }\n      })\n    },\n    getApiList(db = this.db) {\n      getApiScource(db).then((res) => {\n        const { paths } = res.data\n        this.paths = paths\n        for (let url in paths) {\n          if (paths[url].get) {\n            const obj = paths[url].get\n            this.apiDic.push({\n              label: obj.tags[0],\n              value: url,\n            })\n          }\n          //   this.apiDic.push({\n          //     label: paths[i].tags[0],\n          //     value: i,\n          //   });\n        }\n      })\n    },\n  },\n  created() {\n    window.th = this\n    this.getGroup()\n  },\n  watch: {\n    db: {\n      handler() {\n        this.apiDic = []\n        this.apiSrc = ''\n        this.getApiList()\n      },\n      deep: true,\n    },\n    apiSrc: {\n      handler() {\n        if (this.paths[this.apiSrc]) {\n          if (this.paths[this.apiSrc].get) {\n            this.method = 'GET'\n          } else if (this.paths[this.apiSrc].post) {\n            this.method = 'POST'\n          }\n          this.$emit('updateapi', {\n            url: '/api' + this.apiSrc,\n            method: this.method.toLowerCase(),\n          })\n          this.apiParams =\n            this.paths[this.apiSrc].get || this.paths[this.apiSrc].post\n        } else {\n          this.apiParams = {}\n        }\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.no-warp {\n  white-space: nowrap;\n}\n.post-method {\n  padding: 0 5px;\n  background: #0088ff;\n  margin-right: 5px;\n  color: #fff;\n}\n</style>\n"]}]}