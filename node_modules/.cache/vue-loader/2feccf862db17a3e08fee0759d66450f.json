{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/list/map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/list/map.vue","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGdldExpc3QsIGdldE9iaiwgYWRkT2JqLCBkZWxPYmosIHVwZGF0ZU9iaiB9IGZyb20gJ0AvYXBpL21hcCcKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybToge30sCiAgICAgIGRhdGE6IFtdLAogICAgICBvcHRpb246IHsKICAgICAgICBsYWJlbFdpZHRoOiAxMDAsCiAgICAgICAgaW5kZXg6IHRydWUsCiAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIGhlYWRlckFsaWduOiAnY2VudGVyJywKICAgICAgICBjb2x1bW46IFsKICAgICAgICAgIHsKICAgICAgICAgICAgbGFiZWw6ICflnLDlm77lkI3np7AnLAogICAgICAgICAgICBwcm9wOiAnbmFtZScsCiAgICAgICAgICAgIHJvdzogdHJ1ZSwKICAgICAgICAgICAgcnVsZXM6IFt7CiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWcsOWbvuWQjeensCIsCiAgICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICAgIH1dCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBsYWJlbDogJ+WcsOWbvuaVsOaNricsCiAgICAgICAgICAgIHByb3A6ICdkYXRhJywKICAgICAgICAgICAgc3BhbjogMjQsCiAgICAgICAgICAgIGhpZGU6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICd0ZXh0YXJlYScsCiAgICAgICAgICAgIG1pblJvd3M6IDIwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWlsZERhdGEgKGlkKSB7CiAgICAgIHJldHVybiBbMCwgMSwgMl0uaW5jbHVkZXMoaWQpCiAgICB9LAogICAgYmVmb3JlT3BlbiAoZG9uZSwgdHlwZSkgewogICAgICBpZiAodHlwZSA9PSAnZWRpdCcpIHsKICAgICAgICBnZXRPYmoodGhpcy5mb3JtLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgIHRoaXMuZm9ybSA9IGRhdGEKICAgICAgICAgIHRoaXMuZm9ybS5kYXRhID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZSh0aGlzLmZvcm0uZGF0YSksIG51bGwsIDQpCiAgICAgICAgICBkb25lKCkKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIGRvbmUoKQogICAgICB9CiAgICB9LAogICAgcm93RGVsIChyb3csIGluZGV4KSB7CiAgICAgIGlmICh0aGlzLnZhaWxkRGF0YShpbmRleCkgJiYgdGhpcy4kd2Vic2l0ZS5pc0RlbW8pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuJHdlYnNpdGUuaXNEZW1vVGlwKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaQsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgZGVsT2JqKHJvdy5pZCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CgogICAgICB9KTsKCiAgICB9LAogICAgcm93VXBkYXRlIChyb3csIGluZGV4LCBkb25lKSB7CiAgICAgIGlmICh0aGlzLnZhaWxkRGF0YShpbmRleCkgJiYgdGhpcy4kd2Vic2l0ZS5pc0RlbW8pIHsKICAgICAgICBkb25lKCk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLiR3ZWJzaXRlLmlzRGVtb1RpcCkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdXBkYXRlT2JqKHJvdykudGhlbigoKSA9PiB7CiAgICAgICAgZG9uZSgpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgdGhpcy5nZXRMaXN0KCkKCiAgICAgIH0pCiAgICB9LAogICAgcm93U2F2ZSAocm93LCBkb25lKSB7CiAgICAgIGFkZE9iaihyb3cpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5paw5aKe5oiQ5YqfJyk7CiAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICBkb25lKCk7CiAgICAgIH0pCiAgICB9LAogICAgZ2V0TGlzdCAoKSB7CiAgICAgIGdldExpc3QoewogICAgICAgIGN1cnJlbnQ6IDEsCiAgICAgICAgc2l6ZTogMTAwLAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc3QgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgdGhpcy5kYXRhID0gZGF0YS5yZWNvcmRzOwogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["map.vue"],"names":[],"mappings":";AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map.vue","sourceRoot":"src/page/list","sourcesContent":["<template>\n  <avue-crud :option=\"option\"\n             v-model=\"form\"\n             @row-save=\"rowSave\"\n             @row-update=\"rowUpdate\"\n             @row-del=\"rowDel\"\n             :before-open=\"beforeOpen\"\n             :data=\"data\">\n    <template slot-scope=\"{}\"\n              slot=\"menuLeft\">\n      <div style=\"display: inline-block;\">\n        <a class=\"title\"\n           target=\"_blank\"\n           href=\"https://datav.aliyun.com/tools/atlas/#&lat=33.521903996156105&lng=104.29849999999999&zoom=4\">\n          <el-button type=\"primary\"\n                     icon=\"el-icon-add-location\"\n                     size=\"small\">\n            添加更多地图\n          </el-button>\n        </a>\n      </div>\n    </template>\n  </avue-crud>\n</template>\n\n<script>\nimport { getList, getObj, addObj, delObj, updateObj } from '@/api/map'\nexport default {\n  data () {\n    return {\n      form: {},\n      data: [],\n      option: {\n        labelWidth: 100,\n        index: true,\n        align: 'center',\n        headerAlign: 'center',\n        column: [\n          {\n            label: '地图名称',\n            prop: 'name',\n            row: true,\n            rules: [{\n              required: true,\n              message: \"请输入地图名称\",\n              trigger: \"blur\"\n            }]\n          },\n          {\n            label: '地图数据',\n            prop: 'data',\n            span: 24,\n            hide: true,\n            type: 'textarea',\n            minRows: 20\n          }\n        ]\n      }\n    }\n  },\n  created () {\n    this.getList()\n  },\n  methods: {\n    vaildData (id) {\n      return [0, 1, 2].includes(id)\n    },\n    beforeOpen (done, type) {\n      if (type == 'edit') {\n        getObj(this.form.id).then(res => {\n          const data = res.data.data;\n          this.form = data\n          this.form.data = JSON.stringify(JSON.parse(this.form.data), null, 4)\n          done()\n        })\n      } else {\n        done()\n      }\n    },\n    rowDel (row, index) {\n      if (this.vaildData(index) && this.$website.isDemo) {\n        this.$message.error(this.$website.isDemoTip)\n        return false;\n      }\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        delObj(row.id).then(() => {\n          this.$message.success('删除成功');\n          this.getList()\n        })\n      }).catch(() => {\n\n      });\n\n    },\n    rowUpdate (row, index, done) {\n      if (this.vaildData(index) && this.$website.isDemo) {\n        done();\n        this.$message.error(this.$website.isDemoTip)\n        return false;\n      }\n      updateObj(row).then(() => {\n        done();\n        this.$message.success('修改成功');\n        this.getList()\n\n      })\n    },\n    rowSave (row, done) {\n      addObj(row).then(() => {\n        this.$message.success('新增成功');\n        this.getList()\n        done();\n      })\n    },\n    getList () {\n      getList({\n        current: 1,\n        size: 100,\n      }).then(res => {\n        const data = res.data.data;\n        this.data = data.records;\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>"]}]}