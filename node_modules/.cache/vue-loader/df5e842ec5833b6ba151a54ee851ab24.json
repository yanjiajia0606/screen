{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/subgroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/subgroup.vue","mtime":1668494281039},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8v5rOo5YaM6Ieq5a6a5LmJ57uE5Lu2CmltcG9ydCBjb21wb25lbnRzIGZyb20gJ0AvY29tcG9uZW50cy8nCmltcG9ydCBjcnlwdG8gZnJvbSAnQC91dGlscy9jcnlwdG8nCmltcG9ydCB7IGR5bmFtaWNTcWwgfSBmcm9tICdAL2FwaS9kYicKaW1wb3J0IHsgZ2V0T2JqIGFzIGdldFJlY29yZE9iaiB9IGZyb20gJ0AvYXBpL3JlY29yZCcKaW1wb3J0IHsgZ2V0RnVuY3Rpb24gfSBmcm9tICdAL3V0aWxzL3V0aWxzJwppbXBvcnQgY29tbW9uIGZyb20gJ0AvY29uZmlnJwppbXBvcnQgZWNoYXJ0Q29tcG9uZW50cyBmcm9tICcuLi8uLi9lY2hhcnQvJwppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzdWJncm91cCcsCiAgaW5qZWN0OiBbJ2NvbnRhaW4nLCAnY29udGFpbmVyJ10sCiAgcHJvdmlkZSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRhaW46IHRoaXMuY29udGFpbiwKICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lciwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsCiAgcHJvcHM6IHsKICAgIG5hdjogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXQogICAgICB9LAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzcWxGb3JtYXR0ZXI6IGR5bmFtaWNTcWwsCiAgICAgIHJlY29yZEZvcm1hdHRlcjogZ2V0UmVjb3JkT2JqLAogICAgICBjb21tb246IGNvbW1vbiwKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB3aW5kb3cudGhzcyA9IHRoaXMKICAgIHRoaXMuaW5pdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0KCkgewogICAgICBPYmplY3Qua2V5cyhlY2hhcnRDb21wb25lbnRzKS5tYXAoKGVsZSkgPT4gewogICAgICAgIGxldCBjb21wb25lbnQgPSBlY2hhcnRDb21wb25lbnRzW2VsZV0KICAgICAgICBWdWUuY29tcG9uZW50KGNvbXBvbmVudC5uYW1lLCBjb21wb25lbnQpCiAgICAgIH0pCiAgICAgIHRoaXMuZ2V0RnVuY3Rpb24gPSBnZXRGdW5jdGlvbgogICAgfSwKICAgIGdldEl0ZW1PYmooKSB7CiAgICAgIGxldCBsaXN0ID0KICAgICAgICB0aGlzLiRyZWZzW3RoaXMuY29tbW9uLk5BTUUgKyB0aGlzLmNvbnRhaW4uYWN0aXZlT2JqLmluZGV4XSB8fCBbXQogICAgICByZXR1cm4gbGlzdFswXQogICAgfSwKICAgIC8v5Yi35paw5pWw5o2uCiAgICBoYW5kbGVSZWZyZXNoKCkgewogICAgICBsZXQgcmVzdWx0ID0gdGhpcy5nZXRJdGVtT2JqKCkKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiByZXN1bHQudXBkYXRlRGF0YSgpCiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpCiAgICB9LAogICAgLy/ojrflj5blr7nosaEKICAgIGdldERyYWdPYmoodmFsKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzW2Ake3RoaXMuY29tbW9uLkRFQUZOQU1FfSR7dmFsfWBdCiAgICB9LAogICAgaGFuZGxlTW92ZSh7IGluZGV4LCBsZWZ0LCB0b3AgfSkgewogICAgICBpZiAodGhpcy5jb250YWluLmFjdGl2ZUluZGV4ICE9PSBpbmRleCkgcmV0dXJuCiAgICAgIHRoaXMuY29udGFpbi5hY3RpdmVMaXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAodGhpcy5jb250YWluLmFjdGl2ZUluZGV4ID09PSBpdGVtLmluZGV4KSByZXR1cm4KICAgICAgICBpdGVtLmxlZnQgPSBpdGVtLmxlZnQgKyBsZWZ0CiAgICAgICAgaXRlbS50b3AgPSBpdGVtLnRvcCArIHRvcAogICAgICB9KQogICAgfSwKICAgIGhhbmRsZU92ZXIoeyBpbmRleCB9KSB7CiAgICAgIHRoaXMuY29udGFpbi5vdmVyYWN0aXZlID0gaW5kZXgKICAgIH0sCiAgICBoYW5kbGVGb2N1cyh7IGluZGV4IH0pIHsKICAgICAgdGhpcy5jb250YWluLmFjdGl2ZUluZGV4ID0gaW5kZXgKICAgICAgdGhpcy5jb250YWluZXIuZ3JhZGVGbGFnID0gdHJ1ZQogICAgICB0aGlzLmNvbnRhaW4uc2VsZWN0TmF2KGluZGV4KQogICAgfSwKICAgIGhhbmRsZUJsdXIoeyBpbmRleCwgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0pIHsKICAgICAgaWYgKGluZGV4ICE9PSB0aGlzLmNvbnRhaW4uYWN0aXZlSW5kZXgpIHJldHVybgogICAgICB0aGlzLmNvbnRhaW5lci5ncmFkZUZsYWcgPSBmYWxzZQogICAgICB0aGlzLiRzZXQodGhpcy5jb250YWluLmFjdGl2ZU9iai5jb21wb25lbnQsICd3aWR0aCcsIHdpZHRoKQogICAgICB0aGlzLiRzZXQodGhpcy5jb250YWluLmFjdGl2ZU9iai5jb21wb25lbnQsICdoZWlnaHQnLCBoZWlnaHQpCiAgICAgIHRoaXMuJHNldCh0aGlzLmNvbnRhaW4uYWN0aXZlT2JqLCAnbGVmdCcsIGxlZnQpCiAgICAgIHRoaXMuJHNldCh0aGlzLmNvbnRhaW4uYWN0aXZlT2JqLCAndG9wJywgdG9wKQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["subgroup.vue"],"names":[],"mappings":";AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"subgroup.vue","sourceRoot":"src/page/group","sourcesContent":["<template>\n  <div>\n    <template v-for=\"item in nav\">\n      <div\n        :key=\"item.index\"\n        v-if=\"!item.children\"\n        v-contextmenu=\"{\n          id: contain.menuId,\n          event: contain.handleContextMenu,\n          value: item,\n        }\"\n      >\n        <avue-draggable\n          v-bind=\"item\"\n          :scale=\"container.stepScale\"\n          :disabled=\"!contain.menuFlag\"\n          :step=\"container.stepScale\"\n          :width=\"item.component.width\"\n          :height=\"item.component.height\"\n          :ref=\"common.DEAFNAME + item.index\"\n          :id=\"common.DEAFNAME + item.index\"\n          :active-flag=\"contain.active.includes(item.index)\"\n          v-show=\"!item.display\"\n          @move=\"handleMove\"\n          @over=\"handleOver\"\n          @focus=\"handleFocus\"\n          @blur=\"handleBlur\"\n        >\n          <component\n            :ref=\"common.NAME + item.index\"\n            :id=\"common.NAME + item.index\"\n            :is=\"common.COMPNAME + item.component.name\"\n            v-bind=\"item\"\n            :component=\"item.component\"\n            :data-formatter=\"getFunction(item.dataFormatter)\"\n            :click-formatter=\"getFunction(item.clickFormatter, true)\"\n            :echart-formatter=\"getFunction(item.echartFormatter)\"\n            :label-formatter=\"getFunction(item.labelFormatter)\"\n            :styles-formatter=\"getFunction(item.stylesFormatter)\"\n            :formatter=\"getFunction(item.formatter)\"\n            :sql-formatter=\"sqlFormatter\"\n            :record-formatter=\"recordFormatter\"\n            :width=\"item.component.width\"\n            :height=\"item.component.height\"\n            :disabled=\"!contain.menuFlag\"\n            :scale=\"container.stepScale\"\n            title=\"\"\n          />\n        </avue-draggable>\n        <subgroup :nav=\"item.children\"></subgroup>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\n//注册自定义组件\nimport components from '@/components/'\nimport crypto from '@/utils/crypto'\nimport { dynamicSql } from '@/api/db'\nimport { getObj as getRecordObj } from '@/api/record'\nimport { getFunction } from '@/utils/utils'\nimport common from '@/config'\nimport echartComponents from '../../echart/'\nimport Vue from 'vue'\nexport default {\n  name: 'subgroup',\n  inject: ['contain', 'container'],\n  provide() {\n    return {\n      contain: this.contain,\n      container: this.container,\n    }\n  },\n  components: components,\n  props: {\n    nav: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n  },\n  data() {\n    return {\n      sqlFormatter: dynamicSql,\n      recordFormatter: getRecordObj,\n      common: common,\n    }\n  },\n  created() {\n    window.thss = this\n    this.init()\n  },\n  methods: {\n    init() {\n      Object.keys(echartComponents).map((ele) => {\n        let component = echartComponents[ele]\n        Vue.component(component.name, component)\n      })\n      this.getFunction = getFunction\n    },\n    getItemObj() {\n      let list =\n        this.$refs[this.common.NAME + this.contain.activeObj.index] || []\n      return list[0]\n    },\n    //刷新数据\n    handleRefresh() {\n      let result = this.getItemObj()\n      if (result) {\n        return result.updateData()\n      }\n      return Promise.resolve()\n    },\n    //获取对象\n    getDragObj(val) {\n      return this.$refs[`${this.common.DEAFNAME}${val}`]\n    },\n    handleMove({ index, left, top }) {\n      if (this.contain.activeIndex !== index) return\n      this.contain.activeList.forEach((item) => {\n        if (this.contain.activeIndex === item.index) return\n        item.left = item.left + left\n        item.top = item.top + top\n      })\n    },\n    handleOver({ index }) {\n      this.contain.overactive = index\n    },\n    handleFocus({ index }) {\n      this.contain.activeIndex = index\n      this.container.gradeFlag = true\n      this.contain.selectNav(index)\n    },\n    handleBlur({ index, left, top, width, height }) {\n      if (index !== this.contain.activeIndex) return\n      this.container.gradeFlag = false\n      this.$set(this.contain.activeObj.component, 'width', width)\n      this.$set(this.contain.activeObj.component, 'height', height)\n      this.$set(this.contain.activeObj, 'left', left)\n      this.$set(this.contain.activeObj, 'top', top)\n    },\n  },\n}\n</script>\n"]}]}