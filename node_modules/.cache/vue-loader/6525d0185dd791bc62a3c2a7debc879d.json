{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/build.vue?vue&type=style&index=0&id=041d8c87&lang=scss&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/build.vue","mtime":1671184349337},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgJy4uL3N0eWxlcy9zdHlsZS5zY3NzJzsKLnJlZmVyLWxpbmUtaW1nIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgbGVmdDogMDsKICB6LWluZGV4OiA1OwogIHdpZHRoOiAyMHB4OwogIGhlaWdodDogMjBweDsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgaW1nIHsKICAgIHdpZHRoOiAxMDAlOwogIH0KfQojc2NyZWVucyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogYXV0bzsKfQoKLnNjcmVlbi1jb250YWluZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB3aWR0aDogNTAwMHB4OwogIGhlaWdodDogMzAwMHB4OwogIGJhY2tncm91bmQ6IHVybCgnL2ltZy9zY3JlZW4ucG5nJykgcmVwZWF0Owp9CgouZHJhZ2doYW5sZSB7CiAgY3Vyc29yOiBwb2ludGVyOwp9Ci5jYW52YXMgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICBsZWZ0OiA1MCU7Cn0KLnNlY3Rpb24gewogIGZsZXg6IDE7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0K"},{"version":3,"sources":["build.vue"],"names":[],"mappings":";AA4tCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"build.vue","sourceRoot":"src/page","sourcesContent":["<template>\n  <div class=\"build\">\n    <contentmenu ref=\"contentmenu\"></contentmenu>\n    <imglist ref=\"imglist\" @change=\"handleSetimg\"></imglist>\n    <headers></headers>\n    <top ref=\"top\"></top>\n    <div class=\"app\" :class=\"{ 'app--none': !menuFlag }\">\n      <div\n        class=\"menu\"\n        v-show=\"menuFlag && menuShow\"\n        @click.self=\"handleMouseDown\"\n      >\n        <p class=\"title\">图层</p>\n        <layer ref=\"layer\" :nav=\"nav\"></layer>\n      </div>\n      <!-- 中间区域 -->\n      <div ref=\"section\" class=\"section\">\n        <div class=\"refer-line-img\" @click=\"imgClick\">\n          <img :src=\"isShowReferLine ? imgOpenData : imgClose\" />\n        </div>\n        <sketch-rule\n          :thick=\"thick\"\n          :scale=\"scale\"\n          :width=\"width\"\n          :height=\"height\"\n          :startX=\"startX\"\n          :startY=\"startY\"\n          :isShowReferLine=\"isShowReferLine\"\n          :palette=\"palette\"\n          :shadow=\"shadow\"\n          :horLineArr=\"lines.h\"\n          :verLineArr=\"lines.v\"\n        />\n        <div\n          ref=\"screensRef\"\n          id=\"screens\"\n          :class=\"dragSlide ? 'dragghanle' : ''\"\n          @mousedown.stop=\"dragMousedown\"\n          @mouseup=\"dragMouseup\"\n          @mousemove=\"dragMousemove\"\n          @wheel=\"handleWheel\"\n          @scroll=\"handleScroll\"\n        >\n          <div ref=\"containerRef\" class=\"screen-container\">\n            <div class=\"canvas\" ref=\"canvas\" :style=\"canvasStyle\">\n              <container ref=\"container\" :wscale=\"scale\"></container>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"menu params\" v-show=\"menuFlag && paramsShow\">\n        <el-tabs\n          class=\"menu__tabs\"\n          @tab-click=\"handleTabClick\"\n          stretch\n          v-model=\"menuTabs\"\n        >\n          <el-tab-pane name=\"0\">\n            <span slot=\"label\"><i class=\"el-icon-setting\"></i>配置</span>\n            <el-form label-width=\"110px\" label-position=\"left\" size=\"small\">\n              <!-- 组件配置 -->\n              <template v-if=\"!validProp('', [undefined])\">\n                <p class=\"title\">{{ activeObj.title }}</p>\n                <el-form-item label=\"图层名称\">\n                  <avue-input v-model=\"activeObj.name\"></avue-input>\n                </el-form-item>\n                <el-form-item label=\"隐藏\">\n                  <avue-switch v-model=\"activeObj.display\"></avue-switch>\n                </el-form-item>\n                <template v-if=\"validProp('colorList')\">\n                  <el-form-item label=\"系统配色\">\n                    <avue-switch\n                      v-model=\"activeOption.switchTheme\"\n                    ></avue-switch>\n                  </el-form-item>\n                </template>\n                <component :is=\"activeComponent.prop + 'Option'\"></component>\n                <main-option></main-option>\n              </template>\n              <!-- 多选配置选项 -->\n              <template v-else-if=\"isSelectActive\">\n                <el-form-item label=\"水平方式\">\n                  <el-tooltip content=\"左对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-fold icon\"\n                      @click=\"$refs.container.handlePostionSelect('left')\"\n                    ></i>\n                  </el-tooltip>\n                  <el-tooltip content=\"居中对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-operation icon\"\n                      @click=\"$refs.container.handlePostionSelect('center')\"\n                    ></i>\n                  </el-tooltip>\n                  <el-tooltip content=\"右对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-unfold icon\"\n                      @click=\"$refs.container.handlePostionSelect('right')\"\n                    ></i>\n                  </el-tooltip>\n                </el-form-item>\n                <el-form-item label=\"垂直方式\">\n                  <el-tooltip content=\"顶对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-fold icon\"\n                      @click=\"$refs.container.handlePostionSelect('top')\"\n                    ></i>\n                  </el-tooltip>\n                  <el-tooltip content=\"中部对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-operation icon\"\n                      @click=\"$refs.container.handlePostionSelect('middle')\"\n                    ></i>\n                  </el-tooltip>\n                  <el-tooltip content=\"底对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-unfold icon\"\n                      @click=\"$refs.container.handlePostionSelect('bottom')\"\n                    ></i>\n                  </el-tooltip>\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    type=\"primary\"\n                    size=\"small\"\n                    class=\"block\"\n                    @click=\"handleFolder\"\n                    >成组</el-button\n                  >\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    type=\"danger\"\n                    size=\"small\"\n                    class=\"block\"\n                    @click=\"handleDeleteSelect\"\n                    >删除</el-button\n                  >\n                </el-form-item>\n              </template>\n              <!-- 主屏的配置项 -->\n              <template v-else>\n                <el-form-item label=\"大屏大小\">\n                  <div class=\"flex\">\n                    <avue-input-number\n                      style=\"width: 130px\"\n                      v-model=\"config.width\"\n                    ></avue-input-number>\n                    &nbsp;x&nbsp;\n                    <avue-input-number\n                      style=\"width: 130px\"\n                      v-model=\"config.height\"\n                    ></avue-input-number>\n                  </div>\n                </el-form-item>\n                <el-form-item label=\"大屏简介\">\n                  <avue-input\n                    v-model=\"config.info\"\n                    type=\"textarea\"\n                    :min-rows=\"5\"\n                  ></avue-input>\n                </el-form-item>\n                <el-form-item label=\"背景颜色\">\n                  <avue-input-color\n                    v-model=\"config.backgroundColor\"\n                  ></avue-input-color>\n                </el-form-item>\n                <el-form-item label=\"背景图片\">\n                  <img\n                    :src=\"config.backgroundImage\"\n                    @click=\"\n                      handleOpenImg('config.backgroundImage', 'background')\n                    \"\n                    alt=\"\"\n                    width=\"100%\"\n                  />\n                  <el-input clearable v-model=\"config.backgroundImage\">\n                    <div\n                      @click=\"\n                        handleOpenImg('config.backgroundImage', 'background')\n                      \"\n                      slot=\"append\"\n                    >\n                      <i class=\"iconfont icon-img\"></i>\n                    </div>\n                  </el-input>\n                </el-form-item>\n                <el-form-item label=\"预览方式\">\n                  <el-radio-group v-model=\"config.screen\">\n                    <el-radio label=\"x\">X轴铺满，Y轴自适应滚动</el-radio>\n                    <el-radio label=\"y\">Y轴铺满，X轴自适应滚动</el-radio>\n                    <el-radio label=\"xy\">强行拉伸画面，填充所有视图</el-radio>\n                  </el-radio-group>\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    class=\"block\"\n                    @click=\"globShow = true\"\n                    >更多设置</el-button\n                  >\n                </el-form-item>\n              </template>\n            </el-form>\n          </el-tab-pane>\n          <!-- 数据配置 -->\n          <el-tab-pane name=\"1\" v-if=\"validProp('dataList')\">\n            <span slot=\"label\"><i class=\"el-icon-document-copy\"></i>数据</span>\n            <template v-if=\"menuTabs == 1\">\n              <el-form label-width=\"120px\" label-position=\"left\" size=\"small\">\n                <el-form-item label=\"数据类型\">\n                  <avue-select\n                    v-model=\"activeObj.dataType\"\n                    :dic=\"dicOption.dataType\"\n                  ></avue-select>\n                </el-form-item>\n                <template v-if=\"isSql\">\n                  <el-form-item label=\"数据源选择\">\n                    <avue-select :dic=\"DIC.sql\" v-model=\"db\"></avue-select>\n                  </el-form-item>\n                  <el-form-item label=\"SQL语句\" label-position=\"top\">\n                    <monaco-editor\n                      v-model=\"sql\"\n                      language=\"sql\"\n                      height=\"100\"\n                    ></monaco-editor>\n                  </el-form-item>\n                </template>\n                <template v-else-if=\"isApi\">\n                  <!-- <el-form-item label=\"接口地址\">\n                    <avue-input v-model=\"activeObj.url\"></avue-input>\n                  </el-form-item>\n                  <el-form-item label=\"请求方式\">\n                    <avue-select\n                      v-model=\"activeObj.dataMethod\"\n                      :dic=\"dicOption.dataMethod\"\n                    ></avue-select>\n                  </el-form-item> -->\n                  <apiPanel @updateapi=\"updateApi\"></apiPanel>\n                </template>\n                <template v-else-if=\"isWs\">\n                  <el-form-item label=\"WS地址\">\n                    <el-input v-model=\"activeObj.wsUrl\"> </el-input>\n                  </el-form-item>\n                </template>\n                <template v-else-if=\"isRecord\">\n                  <el-form-item label=\"数据集选择\">\n                    <avue-select\n                      :dic=\"DIC.data\"\n                      v-model=\"activeObj.record\"\n                    ></avue-select>\n                  </el-form-item>\n                </template>\n                <el-form-item label=\"刷新时间\" v-if=\"isApi || isWs || isSql\">\n                  <avue-input-number\n                    v-model=\"activeObj.time\"\n                    placeholder=\"0\"\n                  ></avue-input-number>\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    class=\"block\"\n                    @click=\"handleSetting\"\n                    >更多设置</el-button\n                  >\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    size=\"small\"\n                    type=\"danger\"\n                    class=\"block\"\n                    @click=\"openCode('stylesFormatter', '编辑样式')\"\n                    >编辑样式</el-button\n                  >\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    class=\"block\"\n                    @click=\"handleRes\"\n                    >请求数据</el-button\n                  >\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <monaco-editor\n                    v-model=\"dataRes\"\n                    disabled\n                    height=\"400\"\n                  ></monaco-editor>\n                </el-form-item>\n              </el-form>\n            </template>\n          </el-tab-pane>\n          <!-- 交互事件配置 -->\n          <el-tab-pane name=\"2\" v-if=\"validProp('eventList')\">\n            <span slot=\"label\"><i class=\"el-icon-thumb\"></i>交互</span>\n            <el-form label-width=\"120px\" label-position=\"left\" size=\"small\">\n              <el-form-item label=\"子类\">\n                <avue-select\n                  multiple\n                  v-model=\"activeObj.child.index\"\n                  :dic=\"childList\"\n                  :props=\"childProps\"\n                >\n                </avue-select>\n              </el-form-item>\n              <el-form-item label=\"参数名称\">\n                <avue-input v-model=\"activeObj.child.paramName\"></avue-input>\n              </el-form-item>\n              <el-form-item label=\"映射字段\">\n                <avue-input\n                  v-model=\"activeObj.child.paramValue\"\n                  placeholder=\"默认为value\"\n                ></avue-input>\n              </el-form-item>\n            </el-form>\n          </el-tab-pane>\n          <!-- 其他事件配置 -->\n          <el-tab-pane name=\"3\" v-if=\"!validProp('', [undefined])\">\n            <span slot=\"label\"><i class=\"el-icon-mouse\"></i>事件</span>\n            <el-form label-width=\"120px\" label-position=\"left\" size=\"small\">\n              <el-form-item label=\"点击事件\">\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  @click=\"openCode('clickFormatter', '点击事件')\"\n                  >编辑</el-button\n                >\n              </el-form-item>\n              <template v-if=\"validProp('labelFormatterList')\">\n                <el-form-item label=\"提示事件\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    @click=\"openCode('formatter', '提示事件')\"\n                    >编辑</el-button\n                  >\n                </el-form-item>\n                <el-form-item label=\"标题事件\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    @click=\"openCode('labelFormatter', '标题事件')\"\n                    >编辑</el-button\n                  >\n                </el-form-item>\n              </template>\n            </el-form>\n          </el-tab-pane>\n          <!-- 基本参数配置 -->\n          <el-tab-pane name=\"4\" v-if=\"isActive\">\n            <span slot=\"label\"><i class=\"el-icon-folder\"></i>参数</span>\n            <el-form label-width=\"90px\" label-position=\"left\" size=\"small\">\n              <el-form-item label=\"序号\">\n                <avue-input\n                  @click.native=\"handleCopyIndex\"\n                  v-model=\"activeObj.index\"\n                  disabled\n                >\n                </avue-input>\n              </el-form-item>\n              <el-form-item label=\"进入动画\">\n                <avue-select\n                  filterable\n                  allow-create\n                  v-model=\"activeComponent.animated\"\n                  :dic=\"dicOption.animated\"\n                ></avue-select>\n                <div>\n                  <a\n                    href=\"https://www.dowebok.com/demo/2014/98/\"\n                    target=\"_blank\"\n                    >点击查看动画类型</a\n                  >\n                </div>\n              </el-form-item>\n              <el-form-item label=\"位置\">\n                <div class=\"flex\">\n                  <avue-input-number\n                    style=\"width: 130px\"\n                    v-model=\"activeObj.left\"\n                  ></avue-input-number>\n                  &nbsp;x&nbsp;\n                  <avue-input-number\n                    style=\"width: 130px\"\n                    v-model=\"activeObj.top\"\n                  ></avue-input-number>\n                </div>\n              </el-form-item>\n              <el-form-item label=\"尺寸\">\n                <div class=\"flex\">\n                  <avue-input-number\n                    style=\"width: 130px\"\n                    v-model=\"activeComponent.width\"\n                  ></avue-input-number>\n                  &nbsp;x&nbsp;\n                  <avue-input-number\n                    style=\"width: 130px\"\n                    v-model=\"activeComponent.height\"\n                  ></avue-input-number>\n                </div>\n              </el-form-item>\n              <el-form-item label=\"透视\">\n                <avue-slider\n                  v-model=\"activeComponent.perspective\"\n                  :max=\"1000\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"缩放\">\n                <avue-slider\n                  v-model=\"activeComponent.scale\"\n                  :max=\"10\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"透明度\">\n                <avue-slider\n                  :step=\"0.1\"\n                  v-model=\"activeComponent.opacity\"\n                  :max=\"1\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"X旋转度\">\n                <avue-slider\n                  v-model=\"activeComponent.rotateX\"\n                  :min=\"-360\"\n                  :max=\"360\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"Y旋转度\">\n                <avue-slider\n                  v-model=\"activeComponent.rotateY\"\n                  :min=\"-360\"\n                  :max=\"360\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"Z旋转度\">\n                <avue-slider\n                  v-model=\"activeComponent.rotateZ\"\n                  :min=\"-360\"\n                  :max=\"360\"\n                ></avue-slider>\n              </el-form-item>\n            </el-form>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    </div>\n    <codeedit\n      @submit=\"closeCode\"\n      v-if=\"code.box\"\n      :title=\"code.title\"\n      :type=\"code.type\"\n      v-model=\"code.obj\"\n      :visible.sync=\"code.box\"\n    ></codeedit>\n    <el-dialog\n      append-to-body\n      top=\"1%\"\n      title=\"更多设置\"\n      :close-on-click-modal=\"false\"\n      :visible.sync=\"globShow\"\n      width=\"70%\"\n    >\n      <el-form size=\"small\" label-width=\"130px\">\n        <el-form-item label=\"全局请求地址\">\n          <avue-input v-model=\"config.url\" placeholder=\"/\"></avue-input>\n        </el-form-item>\n        <el-form-item label=\"全局请求参数\">\n          <monaco-editor\n            v-model=\"config.query\"\n            language=\"javascript\"\n            disabled\n            height=\"100\"\n          ></monaco-editor>\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"openCode('query', '全局请求参数')\"\n            >编辑</el-button\n          >\n        </el-form-item>\n        <el-form-item label=\"全局请求头\">\n          <monaco-editor\n            v-model=\"config.header\"\n            language=\"javascript\"\n            disabled\n            height=\"100\"\n          ></monaco-editor>\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"openCode('header', '全局请求头')\"\n            >编辑</el-button\n          >\n        </el-form-item>\n        <el-form-item label=\"大屏水印\">\n          <avue-switch v-model=\"config.mark.show\"></avue-switch>\n        </el-form-item>\n        <template v-if=\"config.mark.show\">\n          <el-form-item label=\"内容\">\n            <avue-input v-model=\"config.mark.text\"></avue-input>\n          </el-form-item>\n          <el-form-item label=\"大小\">\n            <avue-input-number\n              v-model=\"config.mark.fontSize\"\n            ></avue-input-number>\n          </el-form-item>\n          <el-form-item label=\"颜色\">\n            <avue-input-color v-model=\"config.mark.color\"></avue-input-color>\n          </el-form-item>\n          <el-form-item label=\"角度\">\n            <avue-input-number v-model=\"config.mark.degree\"></avue-input-number>\n          </el-form-item>\n        </template>\n      </el-form>\n    </el-dialog>\n    <el-dialog\n      append-to-body\n      top=\"1%\"\n      title=\"更多设置\"\n      :close-on-click-modal=\"false\"\n      :visible.sync=\"show\"\n      width=\"70%\"\n    >\n      <el-form size=\"small\" label-width=\"130px\">\n        <el-form-item label=\"数据类型\">\n          <avue-select\n            v-model=\"activeObj.dataType\"\n            :dic=\"dicOption.dataType\"\n          ></avue-select>\n        </el-form-item>\n        <template v-if=\"isStatic\">\n          <el-form-item label=\"数据值\" label-position=\"top\">\n            <el-button\n              size=\"small\"\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n              @click=\"openCode('data', '数据值')\"\n              >编辑数据值</el-button\n            >\n            &nbsp;\n            <el-upload\n              :show-file-list=\"false\"\n              :auto-upload=\"false\"\n              style=\"display: inline-block\"\n              accept=\".xls,.xlsx\"\n              :on-change=\"handleImport\"\n            >\n              <el-button size=\"small\" icon=\"el-icon-upload\" type=\"success\"\n                >导入数据(Excel)</el-button\n              >\n            </el-upload>\n          </el-form-item>\n        </template>\n        <template v-else-if=\"isSql\">\n          <el-form-item label=\"数据源选择\">\n            <avue-select :dic=\"DIC.sql\" v-model=\"db\"></avue-select>\n          </el-form-item>\n\n          <el-form-item label=\"SQL语句\" label-position=\"top\">\n            <el-tooltip\n              effect=\"dark\"\n              content=\"如果要获取变量，直接写成函数返回sql语句即可\"\n              placement=\"top\"\n            >\n              <i class=\"el-icon-info\"></i>\n            </el-tooltip>\n            <monaco-editor\n              v-model=\"sql\"\n              language=\"sql\"\n              height=\"100\"\n            ></monaco-editor>\n          </el-form-item>\n        </template>\n        <template v-else-if=\"isApi\">\n          <!-- <el-form-item label=\"接口地址\">\n            <avue-input v-model=\"activeObj.url\"></avue-input>\n          </el-form-item>\n          <el-form-item label=\"请求方式\">\n            <avue-select\n              v-model=\"activeObj.dataMethod\"\n              :dic=\"dicOption.dataMethod\"\n            ></avue-select>\n          </el-form-item> -->\n          <apiPanel @getApi=\"getApi\"></apiPanel>\n        </template>\n        <template v-else-if=\"isWs\">\n          <el-form-item label=\"WS地址\">\n            <el-input v-model=\"activeObj.wsUrl\"> </el-input>\n          </el-form-item>\n        </template>\n        <template v-else-if=\"isRecord\">\n          <el-form-item label=\"数据集选择\">\n            <avue-select\n              :dic=\"DIC.data\"\n              v-model=\"activeObj.record\"\n            ></avue-select>\n          </el-form-item>\n        </template>\n        <el-form-item label=\"请求配置\" v-if=\"isWs || isApi\">\n          <el-tabs class=\"menu__tabs\" v-model=\"dataTabs\">\n            <el-tab-pane label=\"请求参数（Body）\" name=\"0\">\n              <template v-if=\"dataTabs == 0\">\n                <el-radio-group\n                  v-if=\"['post', 'put'].includes(activeObj.dataMethod)\"\n                  v-model=\"activeObj.dataQueryType\"\n                >\n                  <el-radio label=\"json\">JSON数据</el-radio>\n                  <el-radio label=\"form\">FORM表单</el-radio>\n                </el-radio-group>\n                <monaco-editor\n                  v-model=\"activeObj.dataQuery\"\n                  language=\"javascript\"\n                  disabled\n                  height=\"100\"\n                ></monaco-editor>\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  icon=\"el-icon-edit\"\n                  @click=\"openCode('dataQuery', '请求参数')\"\n                  >编辑</el-button\n                >\n              </template>\n            </el-tab-pane>\n            <el-tab-pane label=\"请求头（Headers）\" name=\"1\" v-if=\"isApi\">\n              <template v-if=\"dataTabs == 1\">\n                <monaco-editor\n                  v-model=\"activeObj.dataHeader\"\n                  language=\"javascript\"\n                  disabled\n                  height=\"100\"\n                ></monaco-editor>\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  icon=\"el-icon-edit\"\n                  @click=\"openCode('dataHeader', '请求头')\"\n                  >编辑</el-button\n                >\n              </template>\n            </el-tab-pane>\n          </el-tabs>\n        </el-form-item>\n        <el-form-item label=\"过滤器\">\n          <monaco-editor\n            v-model=\"activeObj.dataFormatter\"\n            language=\"javascript\"\n            disabled\n            height=\"100\"\n          ></monaco-editor>\n          <el-button\n            size=\"small\"\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"openCode('dataFormatter', '编辑过滤器')\"\n            >编辑</el-button\n          >\n        </el-form-item>\n        <el-form-item label=\"响应数据\">\n          <monaco-editor\n            v-model=\"dataRes\"\n            disabled\n            height=\"200\"\n          ></monaco-editor>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          icon=\"el-icon-refresh\"\n          @click=\"handleRes\"\n          >请求数据</el-button\n        >\n      </span>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport MonacoEditor from '@/page/components/editor'\nimport layer from './group/layer'\nimport top from './group/top'\nimport headers from './group/header'\nimport imglist from './group/imglist'\nimport contentmenu from './group/contentmenu'\nimport codeedit from './group/code'\nimport { dicOption } from '@/option/config'\nimport init from '@/mixins/'\nimport { createFile, uuid } from '@/utils/utils'\nimport components from '@/option/components'\nimport SketchRule from 'vue-sketch-ruler'\nimport { getList as getDbList } from '@/api/db'\nimport { getList as getRecordList } from '@/api/record'\nimport crypto from '@/utils/crypto'\nimport apiPanel from '@/page/components/apiPanel'\n\nexport default {\n  mixins: [init, components],\n  data() {\n    return {\n      currentHistoryIndex: -1,\n      copyNav: '',\n      menuId: 'avue-data-menu',\n      menuShow: true,\n      paramsShow: true,\n      globShow: false,\n      show: false,\n      cacheList: {\n        copy: null,\n        history: [],\n      },\n      keys: {\n        ctrl: false,\n      },\n      dataRes: '',\n      db: '',\n      sql: '',\n      nav: [],\n      DIC: {\n        sql: [],\n        data: [],\n      },\n      loading: '',\n      childProps: {\n        label: 'name',\n        value: 'index',\n      },\n      key: '',\n      menuFlag: true,\n      code: {\n        title: '',\n        box: false,\n        type: '',\n        obj: '',\n      },\n      form: {},\n      dicOption: dicOption,\n      menuTabs: 0,\n      dataTabs: 0,\n      // 标尺\n      scale: 0.94, //初始化标尺的缩放\n      startX: 0, //x轴标尺开始的坐标数值\n      startY: 0,\n      lines: {\n        //初始化水平标尺上的参考线\n        h: [],\n        v: [],\n      },\n      shadow: { x: 0, y: 0 }, // 阴影大小\n      thick: 20, //标尺的厚度\n      width: 0, // 标尺宽,后面会初始化\n      height: 0, // 标尺高,后面会初始化\n      isShowReferLine: true, // 显示参考线\n      imgOpenData:\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAbCAYAAAAOEM1uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAQNSURBVHja7JdvSON1HMdfP126/shSmaZ1ntuZbTLihOnSdJlPhIquB0VR1DZM9En0wCB3qCXKVOh86mmakdGDOqyHityBidYN1HPYZqbhOZprMGTOUk/9/XryWyxvek5NIu4Lg/H+fPj8Xt/P98/n8xUkSeK/PIT7gP8GoCAI8cTQAoWAHkgFRCAA3AKmgeBRA8VkOSZgMvAy8DZQCqQf4OcFRoDPgYmzAnwdaAAuxpFlCbgGfAR4ThUwYhcE4QngExnw71FWVuax2WwBk8mkSE9PV+7t7Ymrq6vbw8PD0uDgYO7CwsK5KPc14ENJkj497FtxAwqCYAK+kvcbANXV1U6Hw6HIyMh4GlAckJHwzMzMrM1my3a5XNoo01XgPUmSdk8MCLwEfAmoAPLz872jo6OrOTk5xVGBQ0tLS575+fnt7OzsRIPBcD4pKelctL2/v3+mtrbWLIpigixfA94BNk8C+JoMlyRn7WZvb68mISEhI+IQCASmKyoq0jweT25EU6lU4aGhoZnKykpzdNzl5eWbRqPxyWAwmCZL3wJvAHeOA/iCPMsHARwOx7jdbi+JXs7t7e3lrKys1LW1NVWsJXa73ZN6vb40WltfX3cbDIZ0r9ebKUv9wLvxAhYC1+V7je7u7rG6urrn9vu1tbWNNzU1lR90KgsLC5emp6cfB5TRejgc9mg0msyoTNYDXfEAjgFmQGxpaZlobm6OBbFrMpl+dTqd+YdcLztbW1ve5ORk7X6D3++f0ul0+aFQKAXYAF6RJOn6UQGDQBrgE0VRJQjCw7EAjUbj8tTUVN4hgLubm5u3lUrlhVjG+vr6ya6ursgWaJck6fJRAW8AzwNia2vrRGNjY8xltNvtEx0dHc8eRKfX62+73W418NB+m8/nm9LpdE+Fw+FHgD+AS/Fk8CJwI7IHe3t7x2pqau7agxsbG/NqtTp3a2tLGQtwcnJyvKSk5K7JhcPhnzQaTXYwGEyVpQ+AK8c5xd9EZt/e3v59Q0ND6f5LeXFx8cfy8vILfr9fHdEUCsVOX1/fhMViqdgfOxQKzRUUFKh9Pt+JTnHk76vyPZgcqR49PT3nExMTM/+x0XZ3fePj47/Mzc2RlZVFVVVVRkpKin5/3JWVFWdRUVFeIBCInN7v5NJ55ySV5EUZ8lEArVb728jIiDcvL++ZONqo0MDAwK2ampoyURQTZXlI7ob+PI1aXAR8AegiutVqdXZ2dt6zFs/OzrosFstjLpcr+iR3A+9LkrRzKs2CrGUCV4C3on3NZrPHarX+Xlxc/MARu5nLkiRdPbVuJsa4BDQCxjj6QRH4GvgY+PksOmqF3FG/KVcc9T066s+AH86y5Y8eOXI282XQyJtkRv6d/pvk/rPz/wT41wBibRrpeMs+PAAAAABJRU5ErkJggg==', // 左上角图片\n      imgClose:\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAPYSURBVHja7JVPTFRXFIe/+96gGRHEhQzBFMJKSKSkLTgtGxemSXcktohW2RBmTAjUClIYZ6Cxi+fQDgOCLJgJhqTSBAtLdjaxaSqQWnDSNp2U0I6FFh0SDdV0oMx7pwuZCUXjnyZNuvBsbnLvufe7555zfleJCP+1qReQfwVRSqWmqoFDIE3A+iZXQDbGlMmmNTatP5xPn/0ohOOgLgNtIB8DOlAKvAzsBTKBP4FF4Dvge1DrzwsBaAAuAJ8CxbpuezU/P397QcFLZGVlcf/+fRYXF1lc/G3VNJM/AJ8Dw8CdZ4QoQI4AIWBXaWkpQ0ND5v79+zW73Z5+n9XVVWZnb8rExIQ2MnKZWCz2M/Dhw1d4eiTngXafz2dmZ2ebPp9P6+vrl5qaI2p8fFyi0aheUlJiHj78tpaTs0sHJB6PW4HAJ3og0I2I+AHPkyAeu91uDA4OmrW1tRpAT09vsr29XXM4ciWZTJKXl2ctLCyoHTsy1ZUro+J0OjNSWR8ZGbFcLpeeSCTOAucfBykDpvr7+7c3NjamS+bevXvJ4uIS4vE7tra2tjW/32+7ffu21Ne7rJmZb7VIJKL27Nmjp0ADAwM0NjauAW+IyM2tkAGn8/WG69e/NjVNS20iHA6vd3Z2qrq6OtMwDFswGLROnz6dcffu3WRRUZEVCARwuVzbUv6WZVmVlZXa9PT0RRFp2gq56na7Dw0ODv6jGc6cOWNdu/Zl8saNb/RgMGi1tLSo7u5uaW5u1srLK8yDBw/aursD2ubmcbtPqnA4dFVE3twKuVBeXv7e5OSkabPZ0pGEQuG/WltbicV+0Xbv3m0LBnvWW1qatbNnvclLl4b0c+c+ErfblcoLa2trptPp1CORSEBEWrdCSoBpwzB2ejyedE6Wl5fNsrIyqaiokFAopBwOh/J4PKbf79/mcDiS0WiUnJwcWyoKr9erDMNYBg6ISOxx1dWg6/pAb2+vtZF8DWBqanr96NEalUgkpKCgQJaWljRN04jH43R1dcmpU6dsgBiGobxer3qoGnz2pD5pBfx1dXWaz+czi4qKNECtrKyYY2NjVjQa1fftK7aqq99hdHRUmpqaVEdHhzU/P58xPDycAN4Hws8iK28B/tzc3LJjx96lqqrKOnCggszMzLRmPHjwQM3MzFj19fX63NwcwDJQBUymK+ApEEDtBDkOnFBKvZafv9deWFhIdnYWKysr3Lr1K0tLvydE5CvgJ1AnQZqBi88DSV1aA0qAV4CCDRX+A1gAZoEfN/w/ALqAEyAjzwvZ8mc8KukblgGqD/gCZOyxkBd//P8G8vcAMK383pmr7aEAAAAASUVORK5CYII=',\n      dragSlide: false, // 拖动滚动条标记\n    }\n  },\n  components: {\n    MonacoEditor,\n    imglist,\n    layer,\n    codeedit,\n    top,\n    headers,\n    contentmenu,\n    SketchRule,\n    apiPanel,\n  },\n  computed: {\n    // 能否撤销\n    canUndo() {\n      return this.currentHistoryIndex > 0\n    },\n    canRedo() {\n      return this.cacheList.history.length > this.currentHistoryIndex + 1\n    },\n    isKeysCtrl() {\n      return this.keys.ctrl == true\n    },\n    isStatic() {\n      return this.activeObj.dataType == 0\n    },\n    isApi() {\n      return this.activeObj.dataType == 1\n    },\n    isSql() {\n      return this.activeObj.dataType == 2\n    },\n    isWs() {\n      return this.activeObj.dataType === 3\n    },\n    isRecord() {\n      return this.activeObj.dataType == 4\n    },\n    isFolder() {\n      return this.activeObj.children\n    },\n    isActive() {\n      return this.activeObj.index\n    },\n    isSelectActive() {\n      return this.active.length > 1\n    },\n    childList() {\n      return this.list.filter((ele) => {\n        if (ele.children) return false\n        let component = ele.component || {}\n        return !['tabs'].includes(component.prop)\n      })\n    },\n    activeComponent() {\n      return this.activeObj.component || {}\n    },\n    activeOption() {\n      return this.activeObj.option || {}\n    },\n    activeObj: {\n      get() {\n        let item = this.findlist(this.activeIndex) || {}\n        if (!item.child) item.child = {}\n        return item\n      },\n    },\n    activeList() {\n      let result = []\n      this.active.forEach((ele) => {\n        let item = this.findnav(ele)\n        result.push(item.item)\n      })\n      return result\n    },\n    /* 标尺用的 */\n    palette() {\n      return {\n        bgColor: '#18181c', // ruler bg color\n        longfgColor: '#BABBBC', // ruler longer mark color\n        shortfgColor: '#9C9C9C', // ruler shorter mark color\n        fontColor: '#fff', // ruler font color\n        shadowColor: '#18181c', // ruler shadow color\n        lineColor: '#EB5648',\n        borderColor: '#B5B5B5',\n        cornerActiveColor: '#fff',\n      }\n    },\n    // 画布大小,一定要是computer里面,否则缩放页面会失效\n    canvasStyle() {\n      return {\n        width: window.innerWidth - 530 + 'px',\n        transform: `scale(${this.scale})`,\n      }\n    },\n  },\n  watch: {\n    nav: {\n      handler(val, oldval) {\n        this.recordMain(val, oldval)\n      },\n      deep: true,\n    },\n    activeObj: {\n      handler(val) {\n        if (this.activeObj.sql && this.isSql) {\n          let mode = JSON.parse(crypto.decrypt(this.activeObj.sql))\n          this.db = mode.id\n          this.sql = mode.sql\n        } else {\n          this.db = ''\n          this.sql = ''\n        }\n      },\n      deep: true,\n    },\n    'activeObj.dataType'() {\n      this.dataTabs = '0'\n    },\n    overactive(n, o) {\n      ;[o, n].forEach((ele, index) => {\n        if (!ele) return\n        this.setActive(ele, index === 1, 'setOverActive')\n      })\n    },\n    active(n, o) {\n      ;[o, n].forEach((ele, index) => {\n        ele.forEach((item) => {\n          this.setActive(item, index === 1, 'setActive')\n        })\n      })\n      // 初始化选项卡\n      this.menuTabs = '0'\n    },\n  },\n  created() {\n    this.initDataList()\n    window.ths = this\n  },\n  mounted() {\n    setTimeout(() => {\n      this.initFun()\n      this.initSize()\n      this.listenKey()\n    })\n  },\n  methods: {\n    handleCopyIndex() {\n      this.$Clipboard({\n        text: this.activeObj.index,\n      })\n        .then(() => {\n          this.$message.success('复制成功')\n        })\n        .catch(() => {\n          this.$message.error('复制失败')\n        })\n    },\n    handleTabClick(tab) {\n      if (tab.name == '1') {\n        this.handleRes(false)\n      }\n    },\n    handleImport(file, fileLis) {\n      this.$Export.xlsx(file.raw).then((data) => {\n        this.activeObj.data = data.results\n        this.$message.success('导入成功')\n        this.handleRes()\n      })\n    },\n    handleRefresh() {\n      return this.$refs.container.handleRefresh()\n    },\n    handleRes(tip = true) {\n      if (this.isSql) {\n        this.$set(\n          this.activeObj,\n          'sql',\n          crypto.encrypt(\n            JSON.stringify({\n              id: this.db,\n              sql: this.sql,\n            })\n          )\n        )\n      }\n      this.handleRefresh().then((res = {}) => {\n        if (!this.validatenull(res)) {\n          this.dataRes = JSON.stringify(res, null, 4)\n        } else {\n          this.dataRes = ''\n        }\n        if (tip) this.$message.success('请求数据成功')\n      })\n    },\n    handleSetting() {\n      this.dataTabs = 0\n      this.dataRes = ''\n      this.handleRes(false)\n      this.show = true\n    },\n    initDataList() {\n      getDbList({\n        current: 1,\n        size: 100,\n      }).then((res) => {\n        const data = res.data.data\n        this.DIC.sql = data.records.map((ele) => {\n          return {\n            label: ele.name,\n            value: ele.id,\n          }\n        })\n      })\n      getRecordList({\n        current: 1,\n        size: 100,\n      }).then((res) => {\n        const data = res.data.data\n        this.DIC.data = data.records.map((ele) => {\n          return {\n            label: ele.name,\n            value: ele.id,\n          }\n        })\n      })\n    },\n    closeCode(value) {\n      if (this.configData.includes(this.code.type)) {\n        this.config[this.code.type] = value\n      } else {\n        this.activeObj[this.code.type] = value\n      }\n      this.handleRes(false)\n    },\n    openCode(type, title) {\n      this.code.type = type\n      this.code.title = title\n      if (this.configData.includes(type)) {\n        this.code.obj = this.config[type]\n      } else {\n        this.code.obj = this.activeObj[type]\n      }\n      this.code.box = true\n    },\n    initFun() {\n      ;['setScale'].forEach((ele) => {\n        this[ele] = this.$refs.container[ele]\n      })\n    },\n    // 右键菜单\n    handleContextMenu(item = {}, done) {\n      if (!item.index || this.isKeysCtrl) return\n      else if (!this.isSelectActive) {\n        this.active = [item.index]\n        this.activeIndex = item.index\n      }\n      done()\n    },\n    //监听键盘的按键\n    listenKey() {\n      let section = this.$refs.section\n      section.onkeydown = (e) => {\n        const keyCode = e.keyCode\n        e.preventDefault()\n        if (keyCode == 17) {\n          this.keys.ctrl = true\n        } else if (keyCode == 67 && this.keys.ctrl) {\n          if (!this.activeObj) return\n          this.cacheList.copy = this.deepClone(this.activeObj)\n          this.$message.success('复制组件成功')\n        } else if (keyCode == 86 && this.keys.ctrl) {\n          if (!this.cacheList.copy) return\n          this.nav.unshift(\n            this.deepClone({\n              ...this.cacheList.copy,\n              ...{\n                index: uuid(),\n                name: this.cacheList.copy.name + '（复制）',\n                left: 0,\n                top: 0,\n              },\n            })\n          )\n          this.$message.success('粘贴组件成功')\n        }\n      }\n      section.onkeyup = (e) => {\n        const keyCode = e.keyCode\n        if (keyCode == 17) {\n          this.keys.ctrl = false\n        }\n      }\n    },\n    setActive(val, result, fun) {\n      const obj = this.$refs.container.getDragObj(val)\n      if (!this.validatenull(obj)) obj[0][fun](result)\n    },\n    //批量成组\n    handleFolder() {\n      let folder = createFile()\n      this.active.forEach((index) => {\n        let { itemList, itemIndex } = this.findnav(index)\n        let obj = itemList.splice(itemIndex, 1)[0]\n        folder.children.push(obj)\n      })\n      this.nav.push(folder)\n      this.handleInitActive()\n    },\n    //批量删除\n    handleDeleteSelect() {\n      this.$confirm(`是否批量删除所选图层?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(() => {\n        this.active.forEach((index) => {\n          let { itemList, itemIndex } = this.findnav(index)\n          itemList.splice(itemIndex, 1)\n        })\n        this.handleInitActive()\n      })\n    },\n    validProp(name, list) {\n      if (list)\n        return (\n          list.includes(this.activeComponent.prop) || this.active.length > 1\n        )\n      return this.dicOption[name].includes(this.activeComponent.prop)\n    },\n    formatTooltip(val) {\n      return parseInt(val)\n    },\n    //打开图库\n    handleOpenImg(item, type) {\n      this.$refs.imglist.openImg(item, type)\n    },\n    //图库框回调赋值\n    handleSetimg(val, type) {\n      let params = type.split('.')[1]\n      if (type.includes('config')) {\n        this.config[params] = val\n      } else if (type.includes('activeObj.data.value')) {\n        this.activeObj.data.value = val\n      } else if (type.includes('activeObj.data')) {\n        this.activeObj.data = val\n      } else if (type.includes('activeObj')) {\n        this.activeObj[params] = val\n      } else if (type.includes('activeOption')) {\n        this.activeOption[params] = val\n      }\n    },\n    handleScroll() {\n      this.$nextTick(() => {\n        const screensRect = this.$refs.screensRef.getBoundingClientRect()\n        const canvasRect = this.$refs.canvas.getBoundingClientRect()\n        // 标尺开始的刻度\n        const startX =\n          (screensRect.left + this.thick - canvasRect.left) / this.scale\n        const startY =\n          (screensRect.top + this.thick - canvasRect.top) / this.scale\n        this.startX = startX >> 0\n        this.startY = startY >> 0\n      })\n    },\n    // 控制缩放值\n    handleWheel(e) {\n      if (e.ctrlKey || e.metaKey) {\n        e.preventDefault()\n        const nextScale = parseFloat(\n          Math.max(0.2, this.scale - e.deltaY / 500).toFixed(2)\n        )\n        this.scale = nextScale\n      }\n      this.$nextTick(() => {\n        this.handleScroll()\n      })\n    },\n    // 初始化标尺数值\n    initSize() {\n      const domW = this.$refs.section\n      let width = window.innerWidth - 520\n      let height = window.innerHeight - 80\n      domW.style.width = width + 'px'\n      domW.style.height = height + 'px'\n      this.width = width\n      this.height = height\n      // 画布阴影部分\n      this.shadow = { x: 0, y: 0, width, height }\n      // 滚动居中\n      let dom = this.$refs.containerRef.getBoundingClientRect()\n      this.$refs.screensRef.scrollLeft = dom.width / 2 - 10\n      this.$refs.screensRef.scrollTop = dom.height / 2 - 50\n    },\n    // 图片点击事件\n    imgClick() {\n      this.isShowReferLine = !this.isShowReferLine\n    },\n    // 鼠标按下事件\n    dragMousedown(e) {\n      // 如果按下了空格键,且按下鼠标左键,那么鼠标变抓手,开启滚动条随鼠标拖动的操作\n      this.handleInitActive()\n      this.dragSlide = true\n      window.stardragEvent = e\n      window.startSlideX = this.$refs.screensRef.scrollLeft\n      window.startSlideY = this.$refs.screensRef.scrollTop\n    },\n    //鼠标抬起操作\n    dragMouseup() {\n      this.dragSlide = false\n    },\n    // 鼠标移动骚操作\n    dragMousemove(e) {\n      if (this.dragSlide) {\n        let x = e.clientX - window.stardragEvent.clientX\n        let y = e.clientY - window.stardragEvent.clientY\n        this.$refs.screensRef.scrollLeft = window.startSlideX - x\n        this.$refs.screensRef.scrollTop = window.startSlideY - y\n      }\n    },\n    selectNav(item) {\n      if (Array.isArray(item)) {\n        this.active = this.active.concat(item)\n      } else if (this.isKeysCtrl) {\n        this.active.push(item)\n      } else if (!this.active.includes(item)) {\n        this.active = [item]\n        this.activeIndex = item\n      }\n    },\n    recordMain(val, oldval) {\n      if (JSON.stringify(val) != this.copyNav) {\n        let newst = JSON.stringify(val)\n        if (newst != this.copyNav) {\n          this.copyNav = newst\n          this.addHistoryCache(val)\n        } else {\n          return\n        }\n      }\n    },\n    addHistoryCache(val) {\n      if (this.currentHistoryIndex + 1 < this.cacheList.history.length) {\n        this.cacheList.history.splice(this.currentHistoryIndex + 1)\n      }\n      this.cacheList.history.push({\n        nav: this.deepClone(val),\n      })\n      this.cacheList.history.splice(100)\n      this.currentHistoryIndex++\n    },\n    editorUndo() {\n      if (!this.canUndo) {\n        return\n      }\n      this.currentHistoryIndex--\n      this.relapceEditorState()\n    },\n    editorRedo() {\n      if (!this.canRedo) {\n        return\n      }\n      handleRefresh\n      this.currentHistoryIndex++\n      this.relapceEditorState()\n    },\n    relapceEditorState() {\n      const prevState = this.cacheList.history[this.currentHistoryIndex]\n      this.nav = this.deepClone(prevState.nav)\n      this.copyNav = JSON.stringify(prevState.nav)\n    },\n    updateApi(params) {\n      const { url, method } = params\n      this.$set(this.activeObj, 'url', url)\n      this.$set(this.activeObj, 'dataMethod', method)\n    },\n  },\n}\n</script>\n<style lang=\"scss\">\n@import '../styles/style.scss';\n.refer-line-img {\n  position: absolute;\n  left: 0;\n  z-index: 5;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  img {\n    width: 100%;\n  }\n}\n#screens {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n}\n\n.screen-container {\n  position: relative;\n  width: 5000px;\n  height: 3000px;\n  background: url('/img/screen.png') repeat;\n}\n\n.dragghanle {\n  cursor: pointer;\n}\n.canvas {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n}\n.section {\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n}\n</style>\n"]}]}