{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/echart/packages/vue/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/echart/packages/vue/index.vue","mtime":1668271197000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgY3JlYXRlIGZyb20gIi4uLy4uL2NyZWF0ZSI7CmV4cG9ydCBkZWZhdWx0IGNyZWF0ZSh7CiAgbmFtZTogInZ1ZSIsCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICByZWxvYWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGNvbnRlbnQgKCkgewogICAgICB0aGlzLmluaXRWdWUoKQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbnRlbnQgKCkgewogICAgICByZXR1cm4gdGhpcy5vcHRpb24uY29udGVudDsKICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgdGhpcy5pbml0VnVlKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRWdWUgKCkgewogICAgICB0aGlzLnJlbG9hZCA9IGZhbHNlCiAgICAgIGxldCB0ZW1wbGF0ZSA9IHRoaXMuZ2V0U291cmNlKCJ0ZW1wbGF0ZSIpOwogICAgICBpZiAoIXRlbXBsYXRlKSByZXR1cm4KICAgICAgbGV0IHNjcmlwdCA9IHRoaXMuZ2V0U291cmNlKCJzY3JpcHQiKTsKICAgICAgaWYgKHNjcmlwdCkgewogICAgICAgIHNjcmlwdCA9IHNjcmlwdC5yZXBsYWNlKC9leHBvcnQgZGVmYXVsdC8sICJyZXR1cm4iKTsKICAgICAgfQogICAgICBsZXQgc3R5bGVDc3MgPSB0aGlzLmdldFNvdXJjZSgic3R5bGUiKTsKICAgICAgbGV0IHN0eWxlSWQgPSAnc3R5bGUtJyArIHRoaXMuaWQ7CiAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdHlsZUlkKSkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0eWxlSWQpLnJlbW92ZSgpCiAgICAgIH0KICAgICAgbGV0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgc3R5bGUuaWQgPSBzdHlsZUlkCiAgICAgIHN0eWxlLmlubmVySFRNTCA9IHN0eWxlQ3NzOwogICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgbGV0IG9iaiA9IG5ldyBGdW5jdGlvbihzY3JpcHQpKCk7CiAgICAgIG9iai50ZW1wbGF0ZSA9IHRlbXBsYXRlOwogICAgICBvYmoucHJvcHMgPSB7CiAgICAgICAgZGF0YUNoYXJ0OiBPYmplY3QsCiAgICAgIH0KICAgICAgVnVlLmNvbXBvbmVudCh0aGlzLmlkLCBvYmopCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLnJlbG9hZCA9IHRydWUKICAgICAgfSkKICAgIH0sCiAgICBnZXRTb3VyY2UgKHR5cGUpIHsKICAgICAgY29uc3QgcmVnID0gbmV3IFJlZ0V4cChgPCR7dHlwZX1bXj5dKj5gKTsKICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7CiAgICAgIGxldCBtYXRjaGVzID0gY29udGVudC5tYXRjaChyZWcpOwogICAgICBpZiAobWF0Y2hlcykgewogICAgICAgIGxldCBzdGFydCA9IGNvbnRlbnQuaW5kZXhPZihtYXRjaGVzWzBdKSArIG1hdGNoZXNbMF0ubGVuZ3RoOwogICAgICAgIGxldCBlbmQgPSBjb250ZW50Lmxhc3RJbmRleE9mKGA8LyR7dHlwZX1gKTsKICAgICAgICByZXR1cm4gY29udGVudC5zbGljZShzdGFydCwgZW5kKQogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xpY2sgKGl0ZW0pIHsKICAgICAgdGhpcy51cGRhdGVDbGljayhpdGVtIHx8IHRoaXMuZGF0YUNoYXJ0KTsKICAgICAgdGhpcy5jbGlja0Zvcm1hdHRlciAmJiB0aGlzLmNsaWNrRm9ybWF0dGVyKHsKICAgICAgICBkYXRhOiBpdGVtIHx8IHRoaXMuZGF0YUNoYXJ0CiAgICAgIH0sIHRoaXMuZ2V0SXRlbVJlZnMoKSk7CiAgICB9LAogIH0KfSk7Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/echart/packages/vue","sourcesContent":["<template>\n  <div :class=\"[b(),className]\"\n       :style=\"styleSizeName\"\n       ref=\"main\">\n    <component :is=\"id\"\n               v-if=\"reload\"\n               @click=\"handleClick\"\n               :dataChart=\"dataChart\">\n    </component>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport create from \"../../create\";\nexport default create({\n  name: \"vue\",\n  data () {\n    return {\n      reload: false\n    };\n  },\n  watch: {\n    content () {\n      this.initVue()\n    }\n  },\n  computed: {\n    content () {\n      return this.option.content;\n    }\n  },\n  mounted () {\n    this.initVue()\n  },\n  methods: {\n    initVue () {\n      this.reload = false\n      let template = this.getSource(\"template\");\n      if (!template) return\n      let script = this.getSource(\"script\");\n      if (script) {\n        script = script.replace(/export default/, \"return\");\n      }\n      let styleCss = this.getSource(\"style\");\n      let styleId = 'style-' + this.id;\n      if (document.getElementById(styleId)) {\n        document.getElementById(styleId).remove()\n      }\n      let style = document.createElement(\"style\");\n      style.id = styleId\n      style.innerHTML = styleCss;\n      document.head.appendChild(style);\n      let obj = new Function(script)();\n      obj.template = template;\n      obj.props = {\n        dataChart: Object,\n      }\n      Vue.component(this.id, obj)\n      this.$nextTick(() => {\n        this.reload = true\n      })\n    },\n    getSource (type) {\n      const reg = new RegExp(`<${type}[^>]*>`);\n      let content = this.content;\n      let matches = content.match(reg);\n      if (matches) {\n        let start = content.indexOf(matches[0]) + matches[0].length;\n        let end = content.lastIndexOf(`</${type}`);\n        return content.slice(start, end)\n      }\n    },\n    handleClick (item) {\n      this.updateClick(item || this.dataChart);\n      this.clickFormatter && this.clickFormatter({\n        data: item || this.dataChart\n      }, this.getItemRefs());\n    },\n  }\n});\n</script>\n\n\n"]}]}