{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/build.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/build.vue","mtime":1668498779346},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBNb25hY29FZGl0b3IgZnJvbSAnQC9wYWdlL2NvbXBvbmVudHMvZWRpdG9yJwppbXBvcnQgbGF5ZXIgZnJvbSAnLi9ncm91cC9sYXllcicKaW1wb3J0IHRvcCBmcm9tICcuL2dyb3VwL3RvcCcKaW1wb3J0IGhlYWRlcnMgZnJvbSAnLi9ncm91cC9oZWFkZXInCmltcG9ydCBpbWdsaXN0IGZyb20gJy4vZ3JvdXAvaW1nbGlzdCcKaW1wb3J0IGNvbnRlbnRtZW51IGZyb20gJy4vZ3JvdXAvY29udGVudG1lbnUnCmltcG9ydCBjb2RlZWRpdCBmcm9tICcuL2dyb3VwL2NvZGUnCmltcG9ydCB7IGRpY09wdGlvbiB9IGZyb20gJ0Avb3B0aW9uL2NvbmZpZycKaW1wb3J0IGluaXQgZnJvbSAnQC9taXhpbnMvJwppbXBvcnQgeyBjcmVhdGVGaWxlLCB1dWlkIH0gZnJvbSAnQC91dGlscy91dGlscycKaW1wb3J0IGNvbXBvbmVudHMgZnJvbSAnQC9vcHRpb24vY29tcG9uZW50cycKaW1wb3J0IFNrZXRjaFJ1bGUgZnJvbSAndnVlLXNrZXRjaC1ydWxlcicKaW1wb3J0IHsgZ2V0TGlzdCBhcyBnZXREYkxpc3QgfSBmcm9tICdAL2FwaS9kYicKaW1wb3J0IHsgZ2V0TGlzdCBhcyBnZXRSZWNvcmRMaXN0IH0gZnJvbSAnQC9hcGkvcmVjb3JkJwppbXBvcnQgY3J5cHRvIGZyb20gJ0AvdXRpbHMvY3J5cHRvJwppbXBvcnQgYXBpUGFuZWwgZnJvbSAnQC9wYWdlL2NvbXBvbmVudHMvYXBpUGFuZWwnCgpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbaW5pdCwgY29tcG9uZW50c10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRIaXN0b3J5SW5kZXg6IC0xLAogICAgICBjb3B5TmF2OiAnJywKICAgICAgbWVudUlkOiAnYXZ1ZS1kYXRhLW1lbnUnLAogICAgICBtZW51U2hvdzogdHJ1ZSwKICAgICAgcGFyYW1zU2hvdzogdHJ1ZSwKICAgICAgZ2xvYlNob3c6IGZhbHNlLAogICAgICBzaG93OiBmYWxzZSwKICAgICAgY2FjaGVMaXN0OiB7CiAgICAgICAgY29weTogbnVsbCwKICAgICAgICBoaXN0b3J5OiBbXSwKICAgICAgfSwKICAgICAga2V5czogewogICAgICAgIGN0cmw6IGZhbHNlLAogICAgICB9LAogICAgICBkYXRhUmVzOiAnJywKICAgICAgZGI6ICcnLAogICAgICBzcWw6ICcnLAogICAgICBuYXY6IFtdLAogICAgICBESUM6IHsKICAgICAgICBzcWw6IFtdLAogICAgICAgIGRhdGE6IFtdLAogICAgICB9LAogICAgICBsb2FkaW5nOiAnJywKICAgICAgY2hpbGRQcm9wczogewogICAgICAgIGxhYmVsOiAnbmFtZScsCiAgICAgICAgdmFsdWU6ICdpbmRleCcsCiAgICAgIH0sCiAgICAgIGtleTogJycsCiAgICAgIG1lbnVGbGFnOiB0cnVlLAogICAgICBjb2RlOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGJveDogZmFsc2UsCiAgICAgICAgdHlwZTogJycsCiAgICAgICAgb2JqOiAnJywKICAgICAgfSwKICAgICAgZm9ybToge30sCiAgICAgIGRpY09wdGlvbjogZGljT3B0aW9uLAogICAgICBtZW51VGFiczogMCwKICAgICAgZGF0YVRhYnM6IDAsCiAgICAgIC8vIOagh+WwugogICAgICBzY2FsZTogMC45NCwgLy/liJ3lp4vljJbmoIflsLrnmoTnvKnmlL4KICAgICAgc3RhcnRYOiAwLCAvL3jovbTmoIflsLrlvIDlp4vnmoTlnZDmoIfmlbDlgLwKICAgICAgc3RhcnRZOiAwLAogICAgICBsaW5lczogewogICAgICAgIC8v5Yid5aeL5YyW5rC05bmz5qCH5bC65LiK55qE5Y+C6ICD57q/CiAgICAgICAgaDogW10sCiAgICAgICAgdjogW10sCiAgICAgIH0sCiAgICAgIHNoYWRvdzogeyB4OiAwLCB5OiAwIH0sIC8vIOmYtOW9seWkp+WwjwogICAgICB0aGljazogMjAsIC8v5qCH5bC655qE5Y6a5bqmCiAgICAgIHdpZHRoOiAwLCAvLyDmoIflsLrlrr0s5ZCO6Z2i5Lya5Yid5aeL5YyWCiAgICAgIGhlaWdodDogMCwgLy8g5qCH5bC66auYLOWQjumdouS8muWIneWni+WMlgogICAgICBpc1Nob3dSZWZlckxpbmU6IHRydWUsIC8vIOaYvuekuuWPguiAg+e6vwogICAgICBpbWdPcGVuRGF0YToKICAgICAgICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDZ0FBQUFiQ0FZQUFBQU9FTTF1QUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFJR05JVWswQUFIb2xBQUNBZ3dBQStmOEFBSURwQUFCMU1BQUE2bUFBQURxWUFBQVhiNUpmeFVZQUFBUU5TVVJCVkhqYTdKZHZTT04xSE1kZlAxMjYvc2hTbWFaMW50dVpiVExpaE9uU2RKbFBoSXF1QjBWUjFEWk05RW4wd0NCM3FDWEtWT2g4Nm1tYWtkR0RPcXlIaXR5QmlkWU4xSFBZWnFiaE9acHJNR1RPVWsvOS9YcnlXeXh2ZWs1Tkl1NExnL0grZlBqOFh0L1A5OC9uOHhVa1NlSy9QSVQ3Z1A4R29DQUk4Y1RRQW9XQUhrZ0ZSQ0FBM0FLbWdlQlJBOFZrT1NaZ012QXk4RFpRQ3FRZjRPY0ZSb0RQZ1ltekFud2RhQUF1eHBGbENiZ0dmQVI0VGhVd1loY0U0UW5nRXhudzcxRldWdWF4Mld3Qms4bWtTRTlQVis3dDdZbXJxNnZidzhQRDB1RGdZTzdDd3NLNUtQYzE0RU5Ka2o0OTdGdHhBd3FDWUFLK2t2Y2JBTlhWMVU2SHc2SEl5TWg0R2xBY2tKSHd6TXpNck0xbXkzYTVYTm9vMDFYZ1BVbVNkazhNQ0x3RWZBbW9BUEx6ODcyam82T3JPVGs1eFZHQlEwdExTNTc1K2ZudDdPenNSSVBCY0Q0cEtlbGN0TDIvdjMrbXRyYldMSXBpZ2l4ZkE5NEJOazhDK0pvTWx5Um43V1p2YjY4bUlTRWhJK0lRQ0FTbUt5b3EwandlVDI1RVU2bFU0YUdob1puS3lrcHpkTnpsNWVXYlJxUHh5V0F3bUNaTDN3SnZBSGVPQS9pQ1BNc0hBUndPeDdqZGJpK0pYczd0N2UzbHJLeXMxTFcxTlZXc0pYYTczWk42dmI0MFdsdGZYM2NiRElaMHI5ZWJLVXY5d0x2eEFoWUMxK1Y3amU3dTdyRzZ1cnJuOXZ1MXRiV05OelUxbFI5MEtnc0xDNWVtcDZjZkI1VFJlamdjOW1nMG1zeW9UTllEWGZFQWpnRm1RR3hwYVpsb2JtNk9CYkZyTXBsK2RUcWQrWWRjTHp0YlcxdmU1T1JrN1g2RDMrK2YwdWwwK2FGUUtBWFlBRjZSSk9uNlVRR0RRQnJnRTBWUkpRakN3N0VBalViajh0VFVWTjRoZ0x1Ym01dTNsVXJsaFZqRyt2cjZ5YTZ1cnNnV2FKY2s2ZkpSQVc4QXp3TmlhMnZyUkdOalk4eGx0TnZ0RXgwZEhjOGVSS2ZYNjIrNzNXNDE4TkIrbTgvbm05THBkRStGdytGSGdEK0FTL0ZrOENKd0k3SUhlM3Q3eDJwcWF1N2FneHNiRy9OcXRUcDNhMnRMR1F0d2NuSnl2S1NrNUs3SmhjUGhuelFhVFhZd0dFeVZwUStBSzhjNXhkOUVadC9lM3Y1OVEwTkQ2ZjVMZVhGeDhjZnk4dklMZnI5ZkhkRVVDc1ZPWDEvZmhNVmlxZGdmT3hRS3pSVVVGS2g5UHQrSlRuSGs3NnZ5UFpnY3FSNDlQVDNuRXhNVE0vK3gwWFozZmVQajQ3L016YzJSbFpWRlZWVlZSa3BLaW41LzNKV1ZGV2RSVVZGZUlCQ0luTjd2NU5KNTV5U1Y1RVVaOGxFQXJWYjcyOGpJaURjdkwrK1pPTnFvME1EQXdLMmFtcG95VVJRVFpYbEk3b2IrUEkxYVhBUjhBZWdpdXRWcWRYWjJkdDZ6RnMvT3pyb3NGc3RqTHBjcitpUjNBKzlMa3JSektzMkNyR1VDVjRDM29uM05aclBIYXJYK1hseGMvTUFSdTVuTGtpUmRQYlZ1SnNhNEJEUUN4amo2UVJINEd2Z1krUGtzT21xRjNGRy9LVmNjOVQwNjZzK0FIODZ5NVk4ZU9YSTI4MlhReUp0a1J2NmQvcHZrL3JQei93VDQxd0JpYlJycGVNcytQQUFBQUFCSlJVNUVya0pnZ2c9PScsIC8vIOW3puS4iuinkuWbvueJhwogICAgICBpbWdDbG9zZToKICAgICAgICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCa0FBQUFaQ0FZQUFBREU2WVZqQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFJR05JVWswQUFIb2xBQUNBZ3dBQStmOEFBSURwQUFCMU1BQUE2bUFBQURxWUFBQVhiNUpmeFVZQUFBUFlTVVJCVkhqYTdKVlBURlJYRkllLys5NmdHUkhFaFF6QkZNSktTS1NrTFRndEd4ZW1TWGNrdG9oVzJSQm1UQWpVQ2xJWVo2Q3hpK2ZRRGdPQ0xKZ0pocVRTQkF0TGRqYXhhU3FRV25EU05wMlUwSTZGRmgwU0RkVjBvTXg3cHd1WkNVWGpueVpOdXZCc2JuTHZ1ZmU3NTU1emZsZUpDUCsxcVJlUWZ3VlJTcVdtcW9GRElFM0EraVpYUURiR2xNbW1OVGF0UDV4UG4vMG9oT09nTGdOdElCOERPbEFLdkF6c0JUS0JQNEZGNER2Z2UxRHJ6d3NCYUFBdUFKOEN4YnB1ZXpVL1AzOTdRY0ZMWkdWbGNmLytmUllYRjFsYy9HM1ZOSk0vQUo4RHc4Q2RaNFFvUUk0QUlXQlhhV2twUTBORDV2Nzkrelc3M1o1K245WFZWV1puYjhyRXhJUTJNbktaV0N6Mk0vRGh3MWQ0ZWlUbmdYYWZ6MmRtWjJlYlBwOVA2K3ZybDVxYUkycDhmRnlpMGFoZVVsSmlIajc4dHBhVHMwc0hKQjZQVzRIQUozb2cwSTJJK0FIUGt5QWV1OTF1REE0T21yVzF0UnBBVDA5dnNyMjlYWE00Y2lXWlRKS1hsMmN0TEN5b0hUc3kxWlVybytKME9qTlNXUjhaR2JGY0xwZWVTQ1RPQXVjZkJ5a0RwdnI3KzdjM05qYW1TK2Jldlh2SjR1SVM0dkU3dHJhMnRqVy8zMis3ZmZ1MjFOZTdySm1aYjdWSUpLTDI3Tm1qcDBBREF3TTBOamF1QVcrSXlNMnRrQUduOC9XRzY5ZS9OalZOUzIwaUhBNnZkM1oycXJxNk90TXdERnN3R0xST256NmRjZmZ1M1dSUlVaRVZDQVJ3dVZ6YlV2NldaVm1WbFpYYTlQVDBSUkZwMmdxNTZuYTdEdzBPRHY2akdjNmNPV05kdS9abDhzYU5iL1JnTUdpMXRMU283dTV1YVc1dTFzckxLOHlEQncvYXVyc0QydWJtY2J0UHFuQTRkRlZFM3R3S3VWQmVYdjdlNU9Ta2FiUFowcEdFUXVHL1dsdGJpY1YrMFhidjNtMExCbnZXVzFxYXRiTm52Y2xMbDRiMGMrYytFcmZibGNvTGEydHJwdFBwMUNPUlNFQkVXcmRDU29CcHd6QjJlanllZEU2V2w1Zk5zckl5cWFpb2tGQW9wQndPaC9KNFBLYmY3OS9tY0RpUzBXaVVuSndjV3lvS3I5ZXJETU5ZQmc2SVNPeHgxZFdnNi9wQWIyK3Z0WkY4RFdCcWFucjk2TkVhbFVna3BLQ2dRSmFXbGpSTjA0akg0M1IxZGNtcFU2ZHNnQmlHb2J4ZXIzcW9HbnoycEQ1cEJmeDFkWFdheitjemk0cUtORUN0ckt5WVkyTmpWalFhMWZmdEs3YXFxOTloZEhSVW1wcWFWRWRIaHpVL1A1OHhQRHljQU40SHdzOGlLMjhCL3R6YzNMSmp4OTZscXFyS09uQ2dnc3pNekxSbVBIandRTTNNekZqMTlmWDYzTndjd0RKUUJVeW1LK0FwRUVEdEJEa09uRkJLdlphZnY5ZGVXRmhJZG5ZV0t5c3IzTHIxSzB0THZ5ZEU1Q3ZnSjFBblFacUJpODhEU1YxYUEwcUFWNENDRFJYK0ExZ0Fab0VmTi93L0FMcUFFeUFqend2WjhtYzhLdWtibGdHcUQvZ0NaT3l4a0JkLy9QOEc4dmNBTUszODNwbXI3YUVBQUFBQVNVVk9SSzVDWUlJPScsCiAgICAgIGRyYWdTbGlkZTogZmFsc2UsIC8vIOaLluWKqOa7muWKqOadoeagh+iusAogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgTW9uYWNvRWRpdG9yLAogICAgaW1nbGlzdCwKICAgIGxheWVyLAogICAgY29kZWVkaXQsCiAgICB0b3AsCiAgICBoZWFkZXJzLAogICAgY29udGVudG1lbnUsCiAgICBTa2V0Y2hSdWxlLAogICAgYXBpUGFuZWwsCiAgfSwKICBjb21wdXRlZDogewogICAgLy8g6IO95ZCm5pKk6ZSACiAgICBjYW5VbmRvKCkgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50SGlzdG9yeUluZGV4ID4gMAogICAgfSwKICAgIGNhblJlZG8oKSB7CiAgICAgIHJldHVybiB0aGlzLmNhY2hlTGlzdC5oaXN0b3J5Lmxlbmd0aCA+IHRoaXMuY3VycmVudEhpc3RvcnlJbmRleCArIDEKICAgIH0sCiAgICBpc0tleXNDdHJsKCkgewogICAgICByZXR1cm4gdGhpcy5rZXlzLmN0cmwgPT0gdHJ1ZQogICAgfSwKICAgIGlzU3RhdGljKCkgewogICAgICByZXR1cm4gdGhpcy5hY3RpdmVPYmouZGF0YVR5cGUgPT0gMAogICAgfSwKICAgIGlzQXBpKCkgewogICAgICByZXR1cm4gdGhpcy5hY3RpdmVPYmouZGF0YVR5cGUgPT0gMQogICAgfSwKICAgIGlzU3FsKCkgewogICAgICByZXR1cm4gdGhpcy5hY3RpdmVPYmouZGF0YVR5cGUgPT0gMgogICAgfSwKICAgIGlzV3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZU9iai5kYXRhVHlwZSA9PT0gMwogICAgfSwKICAgIGlzUmVjb3JkKCkgewogICAgICByZXR1cm4gdGhpcy5hY3RpdmVPYmouZGF0YVR5cGUgPT0gNAogICAgfSwKICAgIGlzRm9sZGVyKCkgewogICAgICByZXR1cm4gdGhpcy5hY3RpdmVPYmouY2hpbGRyZW4KICAgIH0sCiAgICBpc0FjdGl2ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlT2JqLmluZGV4CiAgICB9LAogICAgaXNTZWxlY3RBY3RpdmUoKSB7CiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZS5sZW5ndGggPiAxCiAgICB9LAogICAgY2hpbGRMaXN0KCkgewogICAgICByZXR1cm4gdGhpcy5saXN0LmZpbHRlcigoZWxlKSA9PiB7CiAgICAgICAgaWYgKGVsZS5jaGlsZHJlbikgcmV0dXJuIGZhbHNlCiAgICAgICAgbGV0IGNvbXBvbmVudCA9IGVsZS5jb21wb25lbnQgfHwge30KICAgICAgICByZXR1cm4gIVsndGFicyddLmluY2x1ZGVzKGNvbXBvbmVudC5wcm9wKQogICAgICB9KQogICAgfSwKICAgIGFjdGl2ZUNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlT2JqLmNvbXBvbmVudCB8fCB7fQogICAgfSwKICAgIGFjdGl2ZU9wdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlT2JqLm9wdGlvbiB8fCB7fQogICAgfSwKICAgIGFjdGl2ZU9iaigpIHsKICAgICAgbGV0IGl0ZW0gPSB0aGlzLmZpbmRsaXN0KHRoaXMuYWN0aXZlSW5kZXgpIHx8IHt9CiAgICAgIGlmICghaXRlbS5jaGlsZCkgaXRlbS5jaGlsZCA9IHt9CiAgICAgIHJldHVybiBpdGVtCiAgICB9LAogICAgYWN0aXZlTGlzdCgpIHsKICAgICAgbGV0IHJlc3VsdCA9IFtdCiAgICAgIHRoaXMuYWN0aXZlLmZvckVhY2goKGVsZSkgPT4gewogICAgICAgIGxldCBpdGVtID0gdGhpcy5maW5kbmF2KGVsZSkKICAgICAgICByZXN1bHQucHVzaChpdGVtLml0ZW0pCiAgICAgIH0pCiAgICAgIHJldHVybiByZXN1bHQKICAgIH0sCiAgICAvKiDmoIflsLrnlKjnmoQgKi8KICAgIHBhbGV0dGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYmdDb2xvcjogJyMxODE4MWMnLCAvLyBydWxlciBiZyBjb2xvcgogICAgICAgIGxvbmdmZ0NvbG9yOiAnI0JBQkJCQycsIC8vIHJ1bGVyIGxvbmdlciBtYXJrIGNvbG9yCiAgICAgICAgc2hvcnRmZ0NvbG9yOiAnIzlDOUM5QycsIC8vIHJ1bGVyIHNob3J0ZXIgbWFyayBjb2xvcgogICAgICAgIGZvbnRDb2xvcjogJyNmZmYnLCAvLyBydWxlciBmb250IGNvbG9yCiAgICAgICAgc2hhZG93Q29sb3I6ICcjMTgxODFjJywgLy8gcnVsZXIgc2hhZG93IGNvbG9yCiAgICAgICAgbGluZUNvbG9yOiAnI0VCNTY0OCcsCiAgICAgICAgYm9yZGVyQ29sb3I6ICcjQjVCNUI1JywKICAgICAgICBjb3JuZXJBY3RpdmVDb2xvcjogJyNmZmYnLAogICAgICB9CiAgICB9LAogICAgLy8g55S75biD5aSn5bCPLOS4gOWumuimgeaYr2NvbXB1dGVy6YeM6Z2iLOWQpuWImee8qeaUvumhtemdouS8muWkseaViAogICAgY2FudmFzU3R5bGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoIC0gNTMwICsgJ3B4JywKICAgICAgICB0cmFuc2Zvcm06IGBzY2FsZSgke3RoaXMuc2NhbGV9KWAsCiAgICAgIH0KICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgbmF2OiB7CiAgICAgIGhhbmRsZXIodmFsLCBvbGR2YWwpIHsKICAgICAgICB0aGlzLnJlY29yZE1haW4odmFsLCBvbGR2YWwpCiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICB9LAogICAgYWN0aXZlT2JqOiB7CiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKHRoaXMuYWN0aXZlT2JqLnNxbCAmJiB0aGlzLmlzU3FsKSB7CiAgICAgICAgICBsZXQgbW9kZSA9IEpTT04ucGFyc2UoY3J5cHRvLmRlY3J5cHQodGhpcy5hY3RpdmVPYmouc3FsKSkKICAgICAgICAgIHRoaXMuZGIgPSBtb2RlLmlkCiAgICAgICAgICB0aGlzLnNxbCA9IG1vZGUuc3FsCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGIgPSAnJwogICAgICAgICAgdGhpcy5zcWwgPSAnJwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgICAnYWN0aXZlT2JqLmRhdGFUeXBlJygpIHsKICAgICAgdGhpcy5kYXRhVGFicyA9ICcwJwogICAgfSwKICAgIG92ZXJhY3RpdmUobiwgbykgewogICAgICA7W28sIG5dLmZvckVhY2goKGVsZSwgaW5kZXgpID0+IHsKICAgICAgICBpZiAoIWVsZSkgcmV0dXJuCiAgICAgICAgdGhpcy5zZXRBY3RpdmUoZWxlLCBpbmRleCA9PT0gMSwgJ3NldE92ZXJBY3RpdmUnKQogICAgICB9KQogICAgfSwKICAgIGFjdGl2ZShuLCBvKSB7CiAgICAgIDtbbywgbl0uZm9yRWFjaCgoZWxlLCBpbmRleCkgPT4gewogICAgICAgIGVsZS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICB0aGlzLnNldEFjdGl2ZShpdGVtLCBpbmRleCA9PT0gMSwgJ3NldEFjdGl2ZScpCiAgICAgICAgfSkKICAgICAgfSkKICAgICAgLy8g5Yid5aeL5YyW6YCJ6aG55Y2hCiAgICAgIHRoaXMubWVudVRhYnMgPSAnMCcKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0RGF0YUxpc3QoKQogICAgd2luZG93LnRocyA9IHRoaXMKICB9LAogIG1vdW50ZWQoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5pbml0RnVuKCkKICAgICAgdGhpcy5pbml0U2l6ZSgpCiAgICAgIHRoaXMubGlzdGVuS2V5KCkKICAgIH0pCiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDb3B5SW5kZXgoKSB7CiAgICAgIHRoaXMuJENsaXBib2FyZCh7CiAgICAgICAgdGV4dDogdGhpcy5hY3RpdmVPYmouaW5kZXgsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflpI3liLbmiJDlip8nKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WkjeWItuWksei0pScpCiAgICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVUYWJDbGljayh0YWIpIHsKICAgICAgaWYgKHRhYi5uYW1lID09ICcxJykgewogICAgICAgIHRoaXMuaGFuZGxlUmVzKGZhbHNlKQogICAgICB9CiAgICB9LAogICAgaGFuZGxlSW1wb3J0KGZpbGUsIGZpbGVMaXMpIHsKICAgICAgdGhpcy4kRXhwb3J0Lnhsc3goZmlsZS5yYXcpLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICB0aGlzLmFjdGl2ZU9iai5kYXRhID0gZGF0YS5yZXN1bHRzCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflr7zlhaXmiJDlip8nKQogICAgICAgIHRoaXMuaGFuZGxlUmVzKCkKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVSZWZyZXNoKCkgewogICAgICByZXR1cm4gdGhpcy4kcmVmcy5jb250YWluZXIuaGFuZGxlUmVmcmVzaCgpCiAgICB9LAogICAgaGFuZGxlUmVzKHRpcCA9IHRydWUpIHsKICAgICAgaWYgKHRoaXMuaXNTcWwpIHsKICAgICAgICB0aGlzLiRzZXQoCiAgICAgICAgICB0aGlzLmFjdGl2ZU9iaiwKICAgICAgICAgICdzcWwnLAogICAgICAgICAgY3J5cHRvLmVuY3J5cHQoCiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICBpZDogdGhpcy5kYiwKICAgICAgICAgICAgICBzcWw6IHRoaXMuc3FsLAogICAgICAgICAgICB9KQogICAgICAgICAgKQogICAgICAgICkKICAgICAgfQogICAgICB0aGlzLmhhbmRsZVJlZnJlc2goKS50aGVuKChyZXMgPSB7fSkgPT4gewogICAgICAgIGlmICghdGhpcy52YWxpZGF0ZW51bGwocmVzKSkgewogICAgICAgICAgdGhpcy5kYXRhUmVzID0gSlNPTi5zdHJpbmdpZnkocmVzLCBudWxsLCA0KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRhdGFSZXMgPSAnJwogICAgICAgIH0KICAgICAgICBpZiAodGlwKSB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+ivt+axguaVsOaNruaIkOWKnycpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlU2V0dGluZygpIHsKICAgICAgdGhpcy5kYXRhVGFicyA9IDAKICAgICAgdGhpcy5kYXRhUmVzID0gJycKICAgICAgdGhpcy5oYW5kbGVSZXMoZmFsc2UpCiAgICAgIHRoaXMuc2hvdyA9IHRydWUKICAgIH0sCiAgICBpbml0RGF0YUxpc3QoKSB7CiAgICAgIGdldERiTGlzdCh7CiAgICAgICAgY3VycmVudDogMSwKICAgICAgICBzaXplOiAxMDAsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgdGhpcy5ESUMuc3FsID0gZGF0YS5yZWNvcmRzLm1hcCgoZWxlKSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsYWJlbDogZWxlLm5hbWUsCiAgICAgICAgICAgIHZhbHVlOiBlbGUuaWQsCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkKICAgICAgZ2V0UmVjb3JkTGlzdCh7CiAgICAgICAgY3VycmVudDogMSwKICAgICAgICBzaXplOiAxMDAsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgdGhpcy5ESUMuZGF0YSA9IGRhdGEucmVjb3Jkcy5tYXAoKGVsZSkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGFiZWw6IGVsZS5uYW1lLAogICAgICAgICAgICB2YWx1ZTogZWxlLmlkLAogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgY2xvc2VDb2RlKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLmNvbmZpZ0RhdGEuaW5jbHVkZXModGhpcy5jb2RlLnR5cGUpKSB7CiAgICAgICAgdGhpcy5jb25maWdbdGhpcy5jb2RlLnR5cGVdID0gdmFsdWUKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjdGl2ZU9ialt0aGlzLmNvZGUudHlwZV0gPSB2YWx1ZQogICAgICB9CiAgICAgIHRoaXMuaGFuZGxlUmVzKGZhbHNlKQogICAgfSwKICAgIG9wZW5Db2RlKHR5cGUsIHRpdGxlKSB7CiAgICAgIHRoaXMuY29kZS50eXBlID0gdHlwZQogICAgICB0aGlzLmNvZGUudGl0bGUgPSB0aXRsZQogICAgICBpZiAodGhpcy5jb25maWdEYXRhLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgdGhpcy5jb2RlLm9iaiA9IHRoaXMuY29uZmlnW3R5cGVdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb2RlLm9iaiA9IHRoaXMuYWN0aXZlT2JqW3R5cGVdCiAgICAgIH0KICAgICAgdGhpcy5jb2RlLmJveCA9IHRydWUKICAgIH0sCiAgICBpbml0RnVuKCkgewogICAgICA7WydzZXRTY2FsZSddLmZvckVhY2goKGVsZSkgPT4gewogICAgICAgIHRoaXNbZWxlXSA9IHRoaXMuJHJlZnMuY29udGFpbmVyW2VsZV0KICAgICAgfSkKICAgIH0sCiAgICAvLyDlj7PplK7oj5zljZUKICAgIGhhbmRsZUNvbnRleHRNZW51KGl0ZW0gPSB7fSwgZG9uZSkgewogICAgICBpZiAoIWl0ZW0uaW5kZXggfHwgdGhpcy5pc0tleXNDdHJsKSByZXR1cm4KICAgICAgZWxzZSBpZiAoIXRoaXMuaXNTZWxlY3RBY3RpdmUpIHsKICAgICAgICB0aGlzLmFjdGl2ZSA9IFtpdGVtLmluZGV4XQogICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBpdGVtLmluZGV4CiAgICAgIH0KICAgICAgZG9uZSgpCiAgICB9LAogICAgLy/nm5HlkKzplK7nm5jnmoTmjInplK4KICAgIGxpc3RlbktleSgpIHsKICAgICAgbGV0IHNlY3Rpb24gPSB0aGlzLiRyZWZzLnNlY3Rpb24KICAgICAgc2VjdGlvbi5vbmtleWRvd24gPSAoZSkgPT4gewogICAgICAgIGNvbnN0IGtleUNvZGUgPSBlLmtleUNvZGUKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICBpZiAoa2V5Q29kZSA9PSAxNykgewogICAgICAgICAgdGhpcy5rZXlzLmN0cmwgPSB0cnVlCiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09IDY3ICYmIHRoaXMua2V5cy5jdHJsKSB7CiAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlT2JqKSByZXR1cm4KICAgICAgICAgIHRoaXMuY2FjaGVMaXN0LmNvcHkgPSB0aGlzLmRlZXBDbG9uZSh0aGlzLmFjdGl2ZU9iaikKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5aSN5Yi257uE5Lu25oiQ5YqfJykKICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT0gODYgJiYgdGhpcy5rZXlzLmN0cmwpIHsKICAgICAgICAgIGlmICghdGhpcy5jYWNoZUxpc3QuY29weSkgcmV0dXJuCiAgICAgICAgICB0aGlzLm5hdi51bnNoaWZ0KAogICAgICAgICAgICB0aGlzLmRlZXBDbG9uZSh7CiAgICAgICAgICAgICAgLi4udGhpcy5jYWNoZUxpc3QuY29weSwKICAgICAgICAgICAgICAuLi57CiAgICAgICAgICAgICAgICBpbmRleDogdXVpZCgpLAogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5jYWNoZUxpc3QuY29weS5uYW1lICsgJ++8iOWkjeWItu+8iScsCiAgICAgICAgICAgICAgICBsZWZ0OiAwLAogICAgICAgICAgICAgICAgdG9wOiAwLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICApCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+eymOi0tOe7hOS7tuaIkOWKnycpCiAgICAgICAgfQogICAgICB9CiAgICAgIHNlY3Rpb24ub25rZXl1cCA9IChlKSA9PiB7CiAgICAgICAgY29uc3Qga2V5Q29kZSA9IGUua2V5Q29kZQogICAgICAgIGlmIChrZXlDb2RlID09IDE3KSB7CiAgICAgICAgICB0aGlzLmtleXMuY3RybCA9IGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2V0QWN0aXZlKHZhbCwgcmVzdWx0LCBmdW4pIHsKICAgICAgY29uc3Qgb2JqID0gdGhpcy4kcmVmcy5jb250YWluZXIuZ2V0RHJhZ09iaih2YWwpCiAgICAgIGlmICghdGhpcy52YWxpZGF0ZW51bGwob2JqKSkgb2JqWzBdW2Z1bl0ocmVzdWx0KQogICAgfSwKICAgIC8v5om56YeP5oiQ57uECiAgICBoYW5kbGVGb2xkZXIoKSB7CiAgICAgIGxldCBmb2xkZXIgPSBjcmVhdGVGaWxlKCkKICAgICAgdGhpcy5hY3RpdmUuZm9yRWFjaCgoaW5kZXgpID0+IHsKICAgICAgICBsZXQgeyBpdGVtTGlzdCwgaXRlbUluZGV4IH0gPSB0aGlzLmZpbmRuYXYoaW5kZXgpCiAgICAgICAgbGV0IG9iaiA9IGl0ZW1MaXN0LnNwbGljZShpdGVtSW5kZXgsIDEpWzBdCiAgICAgICAgZm9sZGVyLmNoaWxkcmVuLnB1c2gob2JqKQogICAgICB9KQogICAgICB0aGlzLm5hdi5wdXNoKGZvbGRlcikKICAgICAgdGhpcy5oYW5kbGVJbml0QWN0aXZlKCkKICAgIH0sCiAgICAvL+aJuemHj+WIoOmZpAogICAgaGFuZGxlRGVsZXRlU2VsZWN0KCkgewogICAgICB0aGlzLiRjb25maXJtKGDmmK/lkKbmibnph4/liKDpmaTmiYDpgInlm77lsYI/YCwgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmFjdGl2ZS5mb3JFYWNoKChpbmRleCkgPT4gewogICAgICAgICAgbGV0IHsgaXRlbUxpc3QsIGl0ZW1JbmRleCB9ID0gdGhpcy5maW5kbmF2KGluZGV4KQogICAgICAgICAgaXRlbUxpc3Quc3BsaWNlKGl0ZW1JbmRleCwgMSkKICAgICAgICB9KQogICAgICAgIHRoaXMuaGFuZGxlSW5pdEFjdGl2ZSgpCiAgICAgIH0pCiAgICB9LAogICAgdmFsaWRQcm9wKG5hbWUsIGxpc3QpIHsKICAgICAgaWYgKGxpc3QpCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIGxpc3QuaW5jbHVkZXModGhpcy5hY3RpdmVDb21wb25lbnQucHJvcCkgfHwgdGhpcy5hY3RpdmUubGVuZ3RoID4gMQogICAgICAgICkKICAgICAgcmV0dXJuIHRoaXMuZGljT3B0aW9uW25hbWVdLmluY2x1ZGVzKHRoaXMuYWN0aXZlQ29tcG9uZW50LnByb3ApCiAgICB9LAogICAgZm9ybWF0VG9vbHRpcCh2YWwpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbCkKICAgIH0sCiAgICAvL+aJk+W8gOWbvuW6kwogICAgaGFuZGxlT3BlbkltZyhpdGVtLCB0eXBlKSB7CiAgICAgIHRoaXMuJHJlZnMuaW1nbGlzdC5vcGVuSW1nKGl0ZW0sIHR5cGUpCiAgICB9LAogICAgLy/lm77lupPmoYblm57osIPotYvlgLwKICAgIGhhbmRsZVNldGltZyh2YWwsIHR5cGUpIHsKICAgICAgbGV0IHBhcmFtcyA9IHR5cGUuc3BsaXQoJy4nKVsxXQogICAgICBpZiAodHlwZS5pbmNsdWRlcygnY29uZmlnJykpIHsKICAgICAgICB0aGlzLmNvbmZpZ1twYXJhbXNdID0gdmFsCiAgICAgIH0gZWxzZSBpZiAodHlwZS5pbmNsdWRlcygnYWN0aXZlT2JqLmRhdGEudmFsdWUnKSkgewogICAgICAgIHRoaXMuYWN0aXZlT2JqLmRhdGEudmFsdWUgPSB2YWwKICAgICAgfSBlbHNlIGlmICh0eXBlLmluY2x1ZGVzKCdhY3RpdmVPYmouZGF0YScpKSB7CiAgICAgICAgdGhpcy5hY3RpdmVPYmouZGF0YSA9IHZhbAogICAgICB9IGVsc2UgaWYgKHR5cGUuaW5jbHVkZXMoJ2FjdGl2ZU9iaicpKSB7CiAgICAgICAgdGhpcy5hY3RpdmVPYmpbcGFyYW1zXSA9IHZhbAogICAgICB9IGVsc2UgaWYgKHR5cGUuaW5jbHVkZXMoJ2FjdGl2ZU9wdGlvbicpKSB7CiAgICAgICAgdGhpcy5hY3RpdmVPcHRpb25bcGFyYW1zXSA9IHZhbAogICAgICB9CiAgICB9LAogICAgaGFuZGxlU2Nyb2xsKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgY29uc3Qgc2NyZWVuc1JlY3QgPSB0aGlzLiRyZWZzLnNjcmVlbnNSZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgICAgICBjb25zdCBjYW52YXNSZWN0ID0gdGhpcy4kcmVmcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgICAgICAvLyDmoIflsLrlvIDlp4vnmoTliLvluqYKICAgICAgICBjb25zdCBzdGFydFggPQogICAgICAgICAgKHNjcmVlbnNSZWN0LmxlZnQgKyB0aGlzLnRoaWNrIC0gY2FudmFzUmVjdC5sZWZ0KSAvIHRoaXMuc2NhbGUKICAgICAgICBjb25zdCBzdGFydFkgPQogICAgICAgICAgKHNjcmVlbnNSZWN0LnRvcCArIHRoaXMudGhpY2sgLSBjYW52YXNSZWN0LnRvcCkgLyB0aGlzLnNjYWxlCiAgICAgICAgdGhpcy5zdGFydFggPSBzdGFydFggPj4gMAogICAgICAgIHRoaXMuc3RhcnRZID0gc3RhcnRZID4+IDAKICAgICAgfSkKICAgIH0sCiAgICAvLyDmjqfliLbnvKnmlL7lgLwKICAgIGhhbmRsZVdoZWVsKGUpIHsKICAgICAgaWYgKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICBjb25zdCBuZXh0U2NhbGUgPSBwYXJzZUZsb2F0KAogICAgICAgICAgTWF0aC5tYXgoMC4yLCB0aGlzLnNjYWxlIC0gZS5kZWx0YVkgLyA1MDApLnRvRml4ZWQoMikKICAgICAgICApCiAgICAgICAgdGhpcy5zY2FsZSA9IG5leHRTY2FsZQogICAgICB9CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbCgpCiAgICAgIH0pCiAgICB9LAogICAgLy8g5Yid5aeL5YyW5qCH5bC65pWw5YC8CiAgICBpbml0U2l6ZSgpIHsKICAgICAgY29uc3QgZG9tVyA9IHRoaXMuJHJlZnMuc2VjdGlvbgogICAgICBsZXQgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCAtIDUyMAogICAgICBsZXQgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gODAKICAgICAgZG9tVy5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JwogICAgICBkb21XLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCcKICAgICAgdGhpcy53aWR0aCA9IHdpZHRoCiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CiAgICAgIC8vIOeUu+W4g+mYtOW9semDqOWIhgogICAgICB0aGlzLnNoYWRvdyA9IHsgeDogMCwgeTogMCwgd2lkdGgsIGhlaWdodCB9CiAgICAgIC8vIOa7muWKqOWxheS4rQogICAgICBsZXQgZG9tID0gdGhpcy4kcmVmcy5jb250YWluZXJSZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgICAgdGhpcy4kcmVmcy5zY3JlZW5zUmVmLnNjcm9sbExlZnQgPSBkb20ud2lkdGggLyAyIC0gMTAKICAgICAgdGhpcy4kcmVmcy5zY3JlZW5zUmVmLnNjcm9sbFRvcCA9IGRvbS5oZWlnaHQgLyAyIC0gNTAKICAgIH0sCiAgICAvLyDlm77niYfngrnlh7vkuovku7YKICAgIGltZ0NsaWNrKCkgewogICAgICB0aGlzLmlzU2hvd1JlZmVyTGluZSA9ICF0aGlzLmlzU2hvd1JlZmVyTGluZQogICAgfSwKICAgIC8vIOm8oOagh+aMieS4i+S6i+S7tgogICAgZHJhZ01vdXNlZG93bihlKSB7CiAgICAgIC8vIOWmguaenOaMieS4i+S6huepuuagvOmUrizkuJTmjInkuIvpvKDmoIflt6bplK4s6YKj5LmI6byg5qCH5Y+Y5oqT5omLLOW8gOWQr+a7muWKqOadoemaj+m8oOagh+aLluWKqOeahOaTjeS9nAogICAgICB0aGlzLmhhbmRsZUluaXRBY3RpdmUoKQogICAgICB0aGlzLmRyYWdTbGlkZSA9IHRydWUKICAgICAgd2luZG93LnN0YXJkcmFnRXZlbnQgPSBlCiAgICAgIHdpbmRvdy5zdGFydFNsaWRlWCA9IHRoaXMuJHJlZnMuc2NyZWVuc1JlZi5zY3JvbGxMZWZ0CiAgICAgIHdpbmRvdy5zdGFydFNsaWRlWSA9IHRoaXMuJHJlZnMuc2NyZWVuc1JlZi5zY3JvbGxUb3AKICAgIH0sCiAgICAvL+m8oOagh+aKrOi1t+aTjeS9nAogICAgZHJhZ01vdXNldXAoKSB7CiAgICAgIHRoaXMuZHJhZ1NsaWRlID0gZmFsc2UKICAgIH0sCiAgICAvLyDpvKDmoIfnp7vliqjpqprmk43kvZwKICAgIGRyYWdNb3VzZW1vdmUoZSkgewogICAgICBpZiAodGhpcy5kcmFnU2xpZGUpIHsKICAgICAgICBsZXQgeCA9IGUuY2xpZW50WCAtIHdpbmRvdy5zdGFyZHJhZ0V2ZW50LmNsaWVudFgKICAgICAgICBsZXQgeSA9IGUuY2xpZW50WSAtIHdpbmRvdy5zdGFyZHJhZ0V2ZW50LmNsaWVudFkKICAgICAgICB0aGlzLiRyZWZzLnNjcmVlbnNSZWYuc2Nyb2xsTGVmdCA9IHdpbmRvdy5zdGFydFNsaWRlWCAtIHgKICAgICAgICB0aGlzLiRyZWZzLnNjcmVlbnNSZWYuc2Nyb2xsVG9wID0gd2luZG93LnN0YXJ0U2xpZGVZIC0geQogICAgICB9CiAgICB9LAogICAgc2VsZWN0TmF2KGl0ZW0pIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkpIHsKICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuYWN0aXZlLmNvbmNhdChpdGVtKQogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNLZXlzQ3RybCkgewogICAgICAgIHRoaXMuYWN0aXZlLnB1c2goaXRlbSkKICAgICAgfSBlbHNlIGlmICghdGhpcy5hY3RpdmUuaW5jbHVkZXMoaXRlbSkpIHsKICAgICAgICB0aGlzLmFjdGl2ZSA9IFtpdGVtXQogICAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBpdGVtCiAgICAgIH0KICAgIH0sCiAgICByZWNvcmRNYWluKHZhbCwgb2xkdmFsKSB7CiAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh2YWwpICE9IHRoaXMuY29weU5hdikgewogICAgICAgIGxldCBuZXdzdCA9IEpTT04uc3RyaW5naWZ5KHZhbCkKICAgICAgICBpZiAobmV3c3QgIT0gdGhpcy5jb3B5TmF2KSB7CiAgICAgICAgICB0aGlzLmNvcHlOYXYgPSBuZXdzdAogICAgICAgICAgdGhpcy5hZGRIaXN0b3J5Q2FjaGUodmFsKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhZGRIaXN0b3J5Q2FjaGUodmFsKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRIaXN0b3J5SW5kZXggKyAxIDwgdGhpcy5jYWNoZUxpc3QuaGlzdG9yeS5sZW5ndGgpIHsKICAgICAgICB0aGlzLmNhY2hlTGlzdC5oaXN0b3J5LnNwbGljZSh0aGlzLmN1cnJlbnRIaXN0b3J5SW5kZXggKyAxKQogICAgICB9CiAgICAgIHRoaXMuY2FjaGVMaXN0Lmhpc3RvcnkucHVzaCh7CiAgICAgICAgbmF2OiB0aGlzLmRlZXBDbG9uZSh2YWwpLAogICAgICB9KQogICAgICB0aGlzLmNhY2hlTGlzdC5oaXN0b3J5LnNwbGljZSgxMDApCiAgICAgIHRoaXMuY3VycmVudEhpc3RvcnlJbmRleCsrCiAgICB9LAogICAgZWRpdG9yVW5kbygpIHsKICAgICAgaWYgKCF0aGlzLmNhblVuZG8pIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0aGlzLmN1cnJlbnRIaXN0b3J5SW5kZXgtLQogICAgICB0aGlzLnJlbGFwY2VFZGl0b3JTdGF0ZSgpCiAgICB9LAogICAgZWRpdG9yUmVkbygpIHsKICAgICAgaWYgKCF0aGlzLmNhblJlZG8pIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0aGlzLmN1cnJlbnRIaXN0b3J5SW5kZXgrKwogICAgICB0aGlzLnJlbGFwY2VFZGl0b3JTdGF0ZSgpCiAgICB9LAogICAgcmVsYXBjZUVkaXRvclN0YXRlKCkgewogICAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLmNhY2hlTGlzdC5oaXN0b3J5W3RoaXMuY3VycmVudEhpc3RvcnlJbmRleF0KICAgICAgdGhpcy5uYXYgPSB0aGlzLmRlZXBDbG9uZShwcmV2U3RhdGUubmF2KQogICAgICB0aGlzLmNvcHlOYXYgPSBKU09OLnN0cmluZ2lmeShwcmV2U3RhdGUubmF2KQogICAgfSwKICAgIHVwZGF0ZUFwaShwYXJhbXMpIHsKICAgICAgY29uc3QgeyB1cmwsIG1ldGhvZCB9ID0gcGFyYW1zCiAgICAgIHRoaXMuYWN0aXZlT2JqLnVybCA9IHVybAogICAgICB0aGlzLmFjdGl2ZU9iai5kYXRhTWV0aG9kID0gbWV0aG9kCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["build.vue"],"names":[],"mappings":";AA4qBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"build.vue","sourceRoot":"src/page","sourcesContent":["<template>\n  <div class=\"build\">\n    <contentmenu ref=\"contentmenu\"></contentmenu>\n    <imglist ref=\"imglist\" @change=\"handleSetimg\"></imglist>\n    <headers></headers>\n    <top ref=\"top\"></top>\n    <div class=\"app\" :class=\"{ 'app--none': !menuFlag }\">\n      <div\n        class=\"menu\"\n        v-show=\"menuFlag && menuShow\"\n        @click.self=\"handleMouseDown\"\n      >\n        <p class=\"title\">图层</p>\n        <layer ref=\"layer\" :nav=\"nav\"></layer>\n      </div>\n      <!-- 中间区域 -->\n      <div ref=\"section\" class=\"section\">\n        <div class=\"refer-line-img\" @click=\"imgClick\">\n          <img :src=\"isShowReferLine ? imgOpenData : imgClose\" />\n        </div>\n        <sketch-rule\n          :thick=\"thick\"\n          :scale=\"scale\"\n          :width=\"width\"\n          :height=\"height\"\n          :startX=\"startX\"\n          :startY=\"startY\"\n          :isShowReferLine=\"isShowReferLine\"\n          :palette=\"palette\"\n          :shadow=\"shadow\"\n          :horLineArr=\"lines.h\"\n          :verLineArr=\"lines.v\"\n        />\n        <div\n          ref=\"screensRef\"\n          id=\"screens\"\n          :class=\"dragSlide ? 'dragghanle' : ''\"\n          @mousedown.stop=\"dragMousedown\"\n          @mouseup=\"dragMouseup\"\n          @mousemove=\"dragMousemove\"\n          @wheel=\"handleWheel\"\n          @scroll=\"handleScroll\"\n        >\n          <div ref=\"containerRef\" class=\"screen-container\">\n            <div class=\"canvas\" ref=\"canvas\" :style=\"canvasStyle\">\n              <container ref=\"container\" :wscale=\"scale\"></container>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"menu params\" v-show=\"menuFlag && paramsShow\">\n        <el-tabs\n          class=\"menu__tabs\"\n          @tab-click=\"handleTabClick\"\n          stretch\n          v-model=\"menuTabs\"\n        >\n          <el-tab-pane name=\"0\">\n            <span slot=\"label\"><i class=\"el-icon-setting\"></i>配置</span>\n            <el-form label-width=\"110px\" label-position=\"left\" size=\"small\">\n              <!-- 组件配置 -->\n              <template v-if=\"!validProp('', [undefined])\">\n                <p class=\"title\">{{ activeObj.title }}</p>\n                <el-form-item label=\"图层名称\">\n                  <avue-input v-model=\"activeObj.name\"></avue-input>\n                </el-form-item>\n                <el-form-item label=\"隐藏\">\n                  <avue-switch v-model=\"activeObj.display\"></avue-switch>\n                </el-form-item>\n                <template v-if=\"validProp('colorList')\">\n                  <el-form-item label=\"系统配色\">\n                    <avue-switch\n                      v-model=\"activeOption.switchTheme\"\n                    ></avue-switch>\n                  </el-form-item>\n                </template>\n                <component :is=\"activeComponent.prop + 'Option'\"></component>\n                <main-option></main-option>\n              </template>\n              <!-- 多选配置选项 -->\n              <template v-else-if=\"isSelectActive\">\n                <el-form-item label=\"水平方式\">\n                  <el-tooltip content=\"左对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-fold icon\"\n                      @click=\"$refs.container.handlePostionSelect('left')\"\n                    ></i>\n                  </el-tooltip>\n                  <el-tooltip content=\"居中对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-operation icon\"\n                      @click=\"$refs.container.handlePostionSelect('center')\"\n                    ></i>\n                  </el-tooltip>\n                  <el-tooltip content=\"右对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-unfold icon\"\n                      @click=\"$refs.container.handlePostionSelect('right')\"\n                    ></i>\n                  </el-tooltip>\n                </el-form-item>\n                <el-form-item label=\"垂直方式\">\n                  <el-tooltip content=\"顶对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-fold icon\"\n                      @click=\"$refs.container.handlePostionSelect('top')\"\n                    ></i>\n                  </el-tooltip>\n                  <el-tooltip content=\"中部对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-operation icon\"\n                      @click=\"$refs.container.handlePostionSelect('middle')\"\n                    ></i>\n                  </el-tooltip>\n                  <el-tooltip content=\"底对齐\" placement=\"top\">\n                    <i\n                      class=\"el-icon-s-unfold icon\"\n                      @click=\"$refs.container.handlePostionSelect('bottom')\"\n                    ></i>\n                  </el-tooltip>\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    type=\"primary\"\n                    size=\"small\"\n                    class=\"block\"\n                    @click=\"handleFolder\"\n                    >成组</el-button\n                  >\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    type=\"danger\"\n                    size=\"small\"\n                    class=\"block\"\n                    @click=\"handleDeleteSelect\"\n                    >删除</el-button\n                  >\n                </el-form-item>\n              </template>\n              <!-- 主屏的配置项 -->\n              <template v-else>\n                <el-form-item label=\"大屏大小\">\n                  <div class=\"flex\">\n                    <avue-input-number\n                      style=\"width: 130px\"\n                      v-model=\"config.width\"\n                    ></avue-input-number>\n                    &nbsp;x&nbsp;\n                    <avue-input-number\n                      style=\"width: 130px\"\n                      v-model=\"config.height\"\n                    ></avue-input-number>\n                  </div>\n                </el-form-item>\n                <el-form-item label=\"大屏简介\">\n                  <avue-input\n                    v-model=\"config.info\"\n                    type=\"textarea\"\n                    :min-rows=\"5\"\n                  ></avue-input>\n                </el-form-item>\n                <el-form-item label=\"背景颜色\">\n                  <avue-input-color\n                    v-model=\"config.backgroundColor\"\n                  ></avue-input-color>\n                </el-form-item>\n                <el-form-item label=\"背景图片\">\n                  <img\n                    :src=\"config.backgroundImage\"\n                    @click=\"\n                      handleOpenImg('config.backgroundImage', 'background')\n                    \"\n                    alt=\"\"\n                    width=\"100%\"\n                  />\n                  <el-input clearable v-model=\"config.backgroundImage\">\n                    <div\n                      @click=\"\n                        handleOpenImg('config.backgroundImage', 'background')\n                      \"\n                      slot=\"append\"\n                    >\n                      <i class=\"iconfont icon-img\"></i>\n                    </div>\n                  </el-input>\n                </el-form-item>\n                <el-form-item label=\"预览方式\">\n                  <el-radio-group v-model=\"config.screen\">\n                    <el-radio label=\"x\">X轴铺满，Y轴自适应滚动</el-radio>\n                    <el-radio label=\"y\">Y轴铺满，X轴自适应滚动</el-radio>\n                    <el-radio label=\"xy\">强行拉伸画面，填充所有视图</el-radio>\n                  </el-radio-group>\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    class=\"block\"\n                    @click=\"globShow = true\"\n                    >更多设置</el-button\n                  >\n                </el-form-item>\n              </template>\n            </el-form>\n          </el-tab-pane>\n          <!-- 数据配置 -->\n          <el-tab-pane name=\"1\" v-if=\"validProp('dataList')\">\n            <span slot=\"label\"><i class=\"el-icon-document-copy\"></i>数据</span>\n            <template v-if=\"menuTabs == 1\">\n              <el-form label-width=\"120px\" label-position=\"left\" size=\"small\">\n                <el-form-item label=\"数据类型\">\n                  <avue-select\n                    v-model=\"activeObj.dataType\"\n                    :dic=\"dicOption.dataType\"\n                  ></avue-select>\n                </el-form-item>\n                <template v-if=\"isSql\">\n                  <el-form-item label=\"数据源选择\">\n                    <avue-select :dic=\"DIC.sql\" v-model=\"db\"></avue-select>\n                  </el-form-item>\n                  <el-form-item label=\"SQL语句\" label-position=\"top\">\n                    <monaco-editor\n                      v-model=\"sql\"\n                      language=\"sql\"\n                      height=\"100\"\n                    ></monaco-editor>\n                  </el-form-item>\n                </template>\n                <template v-else-if=\"isApi\">\n                  <!-- <el-form-item label=\"接口地址\">\n                    <avue-input v-model=\"activeObj.url\"></avue-input>\n                  </el-form-item>\n                  <el-form-item label=\"请求方式\">\n                    <avue-select\n                      v-model=\"activeObj.dataMethod\"\n                      :dic=\"dicOption.dataMethod\"\n                    ></avue-select>\n                  </el-form-item> -->\n                  <apiPanel @updateapi=\"updateApi\"></apiPanel>\n                </template>\n                <template v-else-if=\"isWs\">\n                  <el-form-item label=\"WS地址\">\n                    <el-input v-model=\"activeObj.wsUrl\"> </el-input>\n                  </el-form-item>\n                </template>\n                <template v-else-if=\"isRecord\">\n                  <el-form-item label=\"数据集选择\">\n                    <avue-select\n                      :dic=\"DIC.data\"\n                      v-model=\"activeObj.record\"\n                    ></avue-select>\n                  </el-form-item>\n                </template>\n                <el-form-item label=\"刷新时间\" v-if=\"isApi || isWs || isSql\">\n                  <avue-input-number\n                    v-model=\"activeObj.time\"\n                    placeholder=\"0\"\n                  ></avue-input-number>\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    class=\"block\"\n                    @click=\"handleSetting\"\n                    >更多设置</el-button\n                  >\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    size=\"small\"\n                    type=\"danger\"\n                    class=\"block\"\n                    @click=\"openCode('stylesFormatter', '编辑样式')\"\n                    >编辑样式</el-button\n                  >\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    class=\"block\"\n                    @click=\"handleRes\"\n                    >请求数据</el-button\n                  >\n                </el-form-item>\n                <el-form-item label-width=\"0\">\n                  <monaco-editor\n                    v-model=\"dataRes\"\n                    disabled\n                    height=\"400\"\n                  ></monaco-editor>\n                </el-form-item>\n              </el-form>\n            </template>\n          </el-tab-pane>\n          <!-- 交互事件配置 -->\n          <el-tab-pane name=\"2\" v-if=\"validProp('eventList')\">\n            <span slot=\"label\"><i class=\"el-icon-thumb\"></i>交互</span>\n            <el-form label-width=\"120px\" label-position=\"left\" size=\"small\">\n              <el-form-item label=\"子类\">\n                <avue-select\n                  multiple\n                  v-model=\"activeObj.child.index\"\n                  :dic=\"childList\"\n                  :props=\"childProps\"\n                >\n                </avue-select>\n              </el-form-item>\n              <el-form-item label=\"参数名称\">\n                <avue-input v-model=\"activeObj.child.paramName\"></avue-input>\n              </el-form-item>\n              <el-form-item label=\"映射字段\">\n                <avue-input\n                  v-model=\"activeObj.child.paramValue\"\n                  placeholder=\"默认为value\"\n                ></avue-input>\n              </el-form-item>\n            </el-form>\n          </el-tab-pane>\n          <!-- 其他事件配置 -->\n          <el-tab-pane name=\"3\" v-if=\"!validProp('', [undefined])\">\n            <span slot=\"label\"><i class=\"el-icon-mouse\"></i>事件</span>\n            <el-form label-width=\"120px\" label-position=\"left\" size=\"small\">\n              <el-form-item label=\"点击事件\">\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  @click=\"openCode('clickFormatter', '点击事件')\"\n                  >编辑</el-button\n                >\n              </el-form-item>\n              <template v-if=\"validProp('labelFormatterList')\">\n                <el-form-item label=\"提示事件\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    @click=\"openCode('formatter', '提示事件')\"\n                    >编辑</el-button\n                  >\n                </el-form-item>\n                <el-form-item label=\"标题事件\">\n                  <el-button\n                    size=\"small\"\n                    type=\"primary\"\n                    @click=\"openCode('labelFormatter', '标题事件')\"\n                    >编辑</el-button\n                  >\n                </el-form-item>\n              </template>\n            </el-form>\n          </el-tab-pane>\n          <!-- 基本参数配置 -->\n          <el-tab-pane name=\"4\" v-if=\"isActive\">\n            <span slot=\"label\"><i class=\"el-icon-folder\"></i>参数</span>\n            <el-form label-width=\"90px\" label-position=\"left\" size=\"small\">\n              <el-form-item label=\"序号\">\n                <avue-input\n                  @click.native=\"handleCopyIndex\"\n                  v-model=\"activeObj.index\"\n                  disabled\n                >\n                </avue-input>\n              </el-form-item>\n              <el-form-item label=\"进入动画\">\n                <avue-select\n                  filterable\n                  allow-create\n                  v-model=\"activeComponent.animated\"\n                  :dic=\"dicOption.animated\"\n                ></avue-select>\n                <div>\n                  <a\n                    href=\"https://www.dowebok.com/demo/2014/98/\"\n                    target=\"_blank\"\n                    >点击查看动画类型</a\n                  >\n                </div>\n              </el-form-item>\n              <el-form-item label=\"位置\">\n                <div class=\"flex\">\n                  <avue-input-number\n                    style=\"width: 130px\"\n                    v-model=\"activeObj.left\"\n                  ></avue-input-number>\n                  &nbsp;x&nbsp;\n                  <avue-input-number\n                    style=\"width: 130px\"\n                    v-model=\"activeObj.top\"\n                  ></avue-input-number>\n                </div>\n              </el-form-item>\n              <el-form-item label=\"尺寸\">\n                <div class=\"flex\">\n                  <avue-input-number\n                    style=\"width: 130px\"\n                    v-model=\"activeComponent.width\"\n                  ></avue-input-number>\n                  &nbsp;x&nbsp;\n                  <avue-input-number\n                    style=\"width: 130px\"\n                    v-model=\"activeComponent.height\"\n                  ></avue-input-number>\n                </div>\n              </el-form-item>\n              <el-form-item label=\"透视\">\n                <avue-slider\n                  v-model=\"activeComponent.perspective\"\n                  :max=\"1000\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"缩放\">\n                <avue-slider\n                  v-model=\"activeComponent.scale\"\n                  :max=\"10\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"透明度\">\n                <avue-slider\n                  :step=\"0.1\"\n                  v-model=\"activeComponent.opacity\"\n                  :max=\"1\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"X旋转度\">\n                <avue-slider\n                  v-model=\"activeComponent.rotateX\"\n                  :min=\"-360\"\n                  :max=\"360\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"Y旋转度\">\n                <avue-slider\n                  v-model=\"activeComponent.rotateY\"\n                  :min=\"-360\"\n                  :max=\"360\"\n                ></avue-slider>\n              </el-form-item>\n              <el-form-item label=\"Z旋转度\">\n                <avue-slider\n                  v-model=\"activeComponent.rotateZ\"\n                  :min=\"-360\"\n                  :max=\"360\"\n                ></avue-slider>\n              </el-form-item>\n            </el-form>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    </div>\n    <codeedit\n      @submit=\"closeCode\"\n      v-if=\"code.box\"\n      :title=\"code.title\"\n      :type=\"code.type\"\n      v-model=\"code.obj\"\n      :visible.sync=\"code.box\"\n    ></codeedit>\n    <el-dialog\n      append-to-body\n      top=\"1%\"\n      title=\"更多设置\"\n      :close-on-click-modal=\"false\"\n      :visible.sync=\"globShow\"\n      width=\"70%\"\n    >\n      <el-form size=\"small\" label-width=\"130px\">\n        <el-form-item label=\"全局请求地址\">\n          <avue-input v-model=\"config.url\" placeholder=\"/\"></avue-input>\n        </el-form-item>\n        <el-form-item label=\"全局请求参数\">\n          <monaco-editor\n            v-model=\"config.query\"\n            language=\"javascript\"\n            disabled\n            height=\"100\"\n          ></monaco-editor>\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"openCode('query', '全局请求参数')\"\n            >编辑</el-button\n          >\n        </el-form-item>\n        <el-form-item label=\"全局请求头\">\n          <monaco-editor\n            v-model=\"config.header\"\n            language=\"javascript\"\n            disabled\n            height=\"100\"\n          ></monaco-editor>\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"openCode('header', '全局请求头')\"\n            >编辑</el-button\n          >\n        </el-form-item>\n        <el-form-item label=\"大屏水印\">\n          <avue-switch v-model=\"config.mark.show\"></avue-switch>\n        </el-form-item>\n        <template v-if=\"config.mark.show\">\n          <el-form-item label=\"内容\">\n            <avue-input v-model=\"config.mark.text\"></avue-input>\n          </el-form-item>\n          <el-form-item label=\"大小\">\n            <avue-input-number\n              v-model=\"config.mark.fontSize\"\n            ></avue-input-number>\n          </el-form-item>\n          <el-form-item label=\"颜色\">\n            <avue-input-color v-model=\"config.mark.color\"></avue-input-color>\n          </el-form-item>\n          <el-form-item label=\"角度\">\n            <avue-input-number v-model=\"config.mark.degree\"></avue-input-number>\n          </el-form-item>\n        </template>\n      </el-form>\n    </el-dialog>\n    <el-dialog\n      append-to-body\n      top=\"1%\"\n      title=\"更多设置\"\n      :close-on-click-modal=\"false\"\n      :visible.sync=\"show\"\n      width=\"70%\"\n    >\n      <el-form size=\"small\" label-width=\"130px\">\n        <el-form-item label=\"数据类型\">\n          <avue-select\n            v-model=\"activeObj.dataType\"\n            :dic=\"dicOption.dataType\"\n          ></avue-select>\n        </el-form-item>\n        <template v-if=\"isStatic\">\n          <el-form-item label=\"数据值\" label-position=\"top\">\n            <el-button\n              size=\"small\"\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n              @click=\"openCode('data', '数据值')\"\n              >编辑数据值</el-button\n            >\n            &nbsp;\n            <el-upload\n              :show-file-list=\"false\"\n              :auto-upload=\"false\"\n              style=\"display: inline-block\"\n              accept=\".xls,.xlsx\"\n              :on-change=\"handleImport\"\n            >\n              <el-button size=\"small\" icon=\"el-icon-upload\" type=\"success\"\n                >导入数据(Excel)</el-button\n              >\n            </el-upload>\n          </el-form-item>\n        </template>\n        <template v-else-if=\"isSql\">\n          <el-form-item label=\"数据源选择\">\n            <avue-select :dic=\"DIC.sql\" v-model=\"db\"></avue-select>\n          </el-form-item>\n\n          <el-form-item label=\"SQL语句\" label-position=\"top\">\n            <el-tooltip\n              effect=\"dark\"\n              content=\"如果要获取变量，直接写成函数返回sql语句即可\"\n              placement=\"top\"\n            >\n              <i class=\"el-icon-info\"></i>\n            </el-tooltip>\n            <monaco-editor\n              v-model=\"sql\"\n              language=\"sql\"\n              height=\"100\"\n            ></monaco-editor>\n          </el-form-item>\n        </template>\n        <template v-else-if=\"isApi\">\n          <!-- <el-form-item label=\"接口地址\">\n            <avue-input v-model=\"activeObj.url\"></avue-input>\n          </el-form-item>\n          <el-form-item label=\"请求方式\">\n            <avue-select\n              v-model=\"activeObj.dataMethod\"\n              :dic=\"dicOption.dataMethod\"\n            ></avue-select>\n          </el-form-item> -->\n          <apiPanel @getApi=\"getApi\"></apiPanel>\n        </template>\n        <template v-else-if=\"isWs\">\n          <el-form-item label=\"WS地址\">\n            <el-input v-model=\"activeObj.wsUrl\"> </el-input>\n          </el-form-item>\n        </template>\n        <template v-else-if=\"isRecord\">\n          <el-form-item label=\"数据集选择\">\n            <avue-select\n              :dic=\"DIC.data\"\n              v-model=\"activeObj.record\"\n            ></avue-select>\n          </el-form-item>\n        </template>\n        <el-form-item label=\"请求配置\" v-if=\"isWs || isApi\">\n          <el-tabs class=\"menu__tabs\" v-model=\"dataTabs\">\n            <el-tab-pane label=\"请求参数（Body）\" name=\"0\">\n              <template v-if=\"dataTabs == 0\">\n                <el-radio-group\n                  v-if=\"['post', 'put'].includes(activeObj.dataMethod)\"\n                  v-model=\"activeObj.dataQueryType\"\n                >\n                  <el-radio label=\"json\">JSON数据</el-radio>\n                  <el-radio label=\"form\">FORM表单</el-radio>\n                </el-radio-group>\n                <monaco-editor\n                  v-model=\"activeObj.dataQuery\"\n                  language=\"javascript\"\n                  disabled\n                  height=\"100\"\n                ></monaco-editor>\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  icon=\"el-icon-edit\"\n                  @click=\"openCode('dataQuery', '请求参数')\"\n                  >编辑</el-button\n                >\n              </template>\n            </el-tab-pane>\n            <el-tab-pane label=\"请求头（Headers）\" name=\"1\" v-if=\"isApi\">\n              <template v-if=\"dataTabs == 1\">\n                <monaco-editor\n                  v-model=\"activeObj.dataHeader\"\n                  language=\"javascript\"\n                  disabled\n                  height=\"100\"\n                ></monaco-editor>\n                <el-button\n                  size=\"small\"\n                  type=\"primary\"\n                  icon=\"el-icon-edit\"\n                  @click=\"openCode('dataHeader', '请求头')\"\n                  >编辑</el-button\n                >\n              </template>\n            </el-tab-pane>\n          </el-tabs>\n        </el-form-item>\n        <el-form-item label=\"过滤器\">\n          <monaco-editor\n            v-model=\"activeObj.dataFormatter\"\n            language=\"javascript\"\n            disabled\n            height=\"100\"\n          ></monaco-editor>\n          <el-button\n            size=\"small\"\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"openCode('dataFormatter', '编辑过滤器')\"\n            >编辑</el-button\n          >\n        </el-form-item>\n        <el-form-item label=\"响应数据\">\n          <monaco-editor\n            v-model=\"dataRes\"\n            disabled\n            height=\"200\"\n          ></monaco-editor>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button\n          size=\"small\"\n          type=\"primary\"\n          icon=\"el-icon-refresh\"\n          @click=\"handleRes\"\n          >请求数据</el-button\n        >\n      </span>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport MonacoEditor from '@/page/components/editor'\nimport layer from './group/layer'\nimport top from './group/top'\nimport headers from './group/header'\nimport imglist from './group/imglist'\nimport contentmenu from './group/contentmenu'\nimport codeedit from './group/code'\nimport { dicOption } from '@/option/config'\nimport init from '@/mixins/'\nimport { createFile, uuid } from '@/utils/utils'\nimport components from '@/option/components'\nimport SketchRule from 'vue-sketch-ruler'\nimport { getList as getDbList } from '@/api/db'\nimport { getList as getRecordList } from '@/api/record'\nimport crypto from '@/utils/crypto'\nimport apiPanel from '@/page/components/apiPanel'\n\nexport default {\n  mixins: [init, components],\n  data() {\n    return {\n      currentHistoryIndex: -1,\n      copyNav: '',\n      menuId: 'avue-data-menu',\n      menuShow: true,\n      paramsShow: true,\n      globShow: false,\n      show: false,\n      cacheList: {\n        copy: null,\n        history: [],\n      },\n      keys: {\n        ctrl: false,\n      },\n      dataRes: '',\n      db: '',\n      sql: '',\n      nav: [],\n      DIC: {\n        sql: [],\n        data: [],\n      },\n      loading: '',\n      childProps: {\n        label: 'name',\n        value: 'index',\n      },\n      key: '',\n      menuFlag: true,\n      code: {\n        title: '',\n        box: false,\n        type: '',\n        obj: '',\n      },\n      form: {},\n      dicOption: dicOption,\n      menuTabs: 0,\n      dataTabs: 0,\n      // 标尺\n      scale: 0.94, //初始化标尺的缩放\n      startX: 0, //x轴标尺开始的坐标数值\n      startY: 0,\n      lines: {\n        //初始化水平标尺上的参考线\n        h: [],\n        v: [],\n      },\n      shadow: { x: 0, y: 0 }, // 阴影大小\n      thick: 20, //标尺的厚度\n      width: 0, // 标尺宽,后面会初始化\n      height: 0, // 标尺高,后面会初始化\n      isShowReferLine: true, // 显示参考线\n      imgOpenData:\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAbCAYAAAAOEM1uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAQNSURBVHja7JdvSON1HMdfP126/shSmaZ1ntuZbTLihOnSdJlPhIquB0VR1DZM9En0wCB3qCXKVOh86mmakdGDOqyHityBidYN1HPYZqbhOZprMGTOUk/9/XryWyxvek5NIu4Lg/H+fPj8Xt/P98/n8xUkSeK/PIT7gP8GoCAI8cTQAoWAHkgFRCAA3AKmgeBRA8VkOSZgMvAy8DZQCqQf4OcFRoDPgYmzAnwdaAAuxpFlCbgGfAR4ThUwYhcE4QngExnw71FWVuax2WwBk8mkSE9PV+7t7Ymrq6vbw8PD0uDgYO7CwsK5KPc14ENJkj497FtxAwqCYAK+kvcbANXV1U6Hw6HIyMh4GlAckJHwzMzMrM1my3a5XNoo01XgPUmSdk8MCLwEfAmoAPLz872jo6OrOTk5xVGBQ0tLS575+fnt7OzsRIPBcD4pKelctL2/v3+mtrbWLIpigixfA94BNk8C+JoMlyRn7WZvb68mISEhI+IQCASmKyoq0jweT25EU6lU4aGhoZnKykpzdNzl5eWbRqPxyWAwmCZL3wJvAHeOA/iCPMsHARwOx7jdbi+JXs7t7e3lrKys1LW1NVWsJXa73ZN6vb40WltfX3cbDIZ0r9ebKUv9wLvxAhYC1+V7je7u7rG6urrn9vu1tbWNNzU1lR90KgsLC5emp6cfB5TRejgc9mg0msyoTNYDXfEAjgFmQGxpaZlobm6OBbFrMpl+dTqd+YdcLztbW1ve5ORk7X6D3++f0ul0+aFQKAXYAF6RJOn6UQGDQBrgE0VRJQjCw7EAjUbj8tTUVN4hgLubm5u3lUrlhVjG+vr6ya6ursgWaJck6fJRAW8AzwNia2vrRGNjY8xltNvtEx0dHc8eRKfX62+73W418NB+m8/nm9LpdE+Fw+FHgD+AS/Fk8CJwI7IHe3t7x2pqau7agxsbG/NqtTp3a2tLGQtwcnJyvKSk5K7JhcPhnzQaTXYwGEyVpQ+AK8c5xd9EZt/e3v59Q0ND6f5LeXFx8cfy8vILfr9fHdEUCsVOX1/fhMViqdgfOxQKzRUUFKh9Pt+JTnHk76vyPZgcqR49PT3nExMTM/+x0XZ3fePj47/Mzc2RlZVFVVVVRkpKin5/3JWVFWdRUVFeIBCInN7v5NJ55ySV5EUZ8lEArVb728jIiDcvL++ZONqo0MDAwK2ampoyURQTZXlI7ob+PI1aXAR8AegiutVqdXZ2dt6zFs/OzrosFstjLpcr+iR3A+9LkrRzKs2CrGUCV4C3on3NZrPHarX+Xlxc/MARu5nLkiRdPbVuJsa4BDQCxjj6QRH4GvgY+PksOmqF3FG/KVcc9T066s+AH86y5Y8eOXI282XQyJtkRv6d/pvk/rPz/wT41wBibRrpeMs+PAAAAABJRU5ErkJggg==', // 左上角图片\n      imgClose:\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAPYSURBVHja7JVPTFRXFIe/+96gGRHEhQzBFMJKSKSkLTgtGxemSXcktohW2RBmTAjUClIYZ6Cxi+fQDgOCLJgJhqTSBAtLdjaxaSqQWnDSNp2U0I6FFh0SDdV0oMx7pwuZCUXjnyZNuvBsbnLvufe7555zfleJCP+1qReQfwVRSqWmqoFDIE3A+iZXQDbGlMmmNTatP5xPn/0ohOOgLgNtIB8DOlAKvAzsBTKBP4FF4Dvge1DrzwsBaAAuAJ8CxbpuezU/P397QcFLZGVlcf/+fRYXF1lc/G3VNJM/AJ8Dw8CdZ4QoQI4AIWBXaWkpQ0ND5v79+zW73Z5+n9XVVWZnb8rExIQ2MnKZWCz2M/Dhw1d4eiTngXafz2dmZ2ebPp9P6+vrl5qaI2p8fFyi0aheUlJiHj78tpaTs0sHJB6PW4HAJ3og0I2I+AHPkyAeu91uDA4OmrW1tRpAT09vsr29XXM4ciWZTJKXl2ctLCyoHTsy1ZUro+J0OjNSWR8ZGbFcLpeeSCTOAucfBykDpvr7+7c3NjamS+bevXvJ4uIS4vE7tra2tjW/32+7ffu21Ne7rJmZb7VIJKL27Nmjp0ADAwM0NjauAW+IyM2tkAGn8/WG69e/NjVNS20iHA6vd3Z2qrq6OtMwDFswGLROnz6dcffu3WRRUZEVCARwuVzbUv6WZVmVlZXa9PT0RRFp2gq56na7Dw0ODv6jGc6cOWNdu/Zl8saNb/RgMGi1tLSo7u5uaW5u1srLK8yDBw/aursD2ubmcbtPqnA4dFVE3twKuVBeXv7e5OSkabPZ0pGEQuG/WltbicV+0Xbv3m0LBnvWW1qatbNnvclLl4b0c+c+ErfblcoLa2trptPp1CORSEBEWrdCSoBpwzB2ejyedE6Wl5fNsrIyqaiokFAopBwOh/J4PKbf79/mcDiS0WiUnJwcWyoKr9erDMNYBg6ISOxx1dWg6/pAb2+vtZF8DWBqanr96NEalUgkpKCgQJaWljRN04jH43R1dcmpU6dsgBiGobxer3qoGnz2pD5pBfx1dXWaz+czi4qKNECtrKyYY2NjVjQa1fftK7aqq99hdHRUmpqaVEdHhzU/P58xPDycAN4Hws8iK28B/tzc3LJjx96lqqrKOnCggszMzLRmPHjwQM3MzFj19fX63NwcwDJQBUymK+ApEEDtBDkOnFBKvZafv9deWFhIdnYWKysr3Lr1K0tLvydE5CvgJ1AnQZqBi88DSV1aA0qAV4CCDRX+A1gAZoEfN/w/ALqAEyAjzwvZ8mc8KukblgGqD/gCZOyxkBd//P8G8vcAMK383pmr7aEAAAAASUVORK5CYII=',\n      dragSlide: false, // 拖动滚动条标记\n    }\n  },\n  components: {\n    MonacoEditor,\n    imglist,\n    layer,\n    codeedit,\n    top,\n    headers,\n    contentmenu,\n    SketchRule,\n    apiPanel,\n  },\n  computed: {\n    // 能否撤销\n    canUndo() {\n      return this.currentHistoryIndex > 0\n    },\n    canRedo() {\n      return this.cacheList.history.length > this.currentHistoryIndex + 1\n    },\n    isKeysCtrl() {\n      return this.keys.ctrl == true\n    },\n    isStatic() {\n      return this.activeObj.dataType == 0\n    },\n    isApi() {\n      return this.activeObj.dataType == 1\n    },\n    isSql() {\n      return this.activeObj.dataType == 2\n    },\n    isWs() {\n      return this.activeObj.dataType === 3\n    },\n    isRecord() {\n      return this.activeObj.dataType == 4\n    },\n    isFolder() {\n      return this.activeObj.children\n    },\n    isActive() {\n      return this.activeObj.index\n    },\n    isSelectActive() {\n      return this.active.length > 1\n    },\n    childList() {\n      return this.list.filter((ele) => {\n        if (ele.children) return false\n        let component = ele.component || {}\n        return !['tabs'].includes(component.prop)\n      })\n    },\n    activeComponent() {\n      return this.activeObj.component || {}\n    },\n    activeOption() {\n      return this.activeObj.option || {}\n    },\n    activeObj() {\n      let item = this.findlist(this.activeIndex) || {}\n      if (!item.child) item.child = {}\n      return item\n    },\n    activeList() {\n      let result = []\n      this.active.forEach((ele) => {\n        let item = this.findnav(ele)\n        result.push(item.item)\n      })\n      return result\n    },\n    /* 标尺用的 */\n    palette() {\n      return {\n        bgColor: '#18181c', // ruler bg color\n        longfgColor: '#BABBBC', // ruler longer mark color\n        shortfgColor: '#9C9C9C', // ruler shorter mark color\n        fontColor: '#fff', // ruler font color\n        shadowColor: '#18181c', // ruler shadow color\n        lineColor: '#EB5648',\n        borderColor: '#B5B5B5',\n        cornerActiveColor: '#fff',\n      }\n    },\n    // 画布大小,一定要是computer里面,否则缩放页面会失效\n    canvasStyle() {\n      return {\n        width: window.innerWidth - 530 + 'px',\n        transform: `scale(${this.scale})`,\n      }\n    },\n  },\n  watch: {\n    nav: {\n      handler(val, oldval) {\n        this.recordMain(val, oldval)\n      },\n      deep: true,\n    },\n    activeObj: {\n      handler(val) {\n        if (this.activeObj.sql && this.isSql) {\n          let mode = JSON.parse(crypto.decrypt(this.activeObj.sql))\n          this.db = mode.id\n          this.sql = mode.sql\n        } else {\n          this.db = ''\n          this.sql = ''\n        }\n      },\n      deep: true,\n    },\n    'activeObj.dataType'() {\n      this.dataTabs = '0'\n    },\n    overactive(n, o) {\n      ;[o, n].forEach((ele, index) => {\n        if (!ele) return\n        this.setActive(ele, index === 1, 'setOverActive')\n      })\n    },\n    active(n, o) {\n      ;[o, n].forEach((ele, index) => {\n        ele.forEach((item) => {\n          this.setActive(item, index === 1, 'setActive')\n        })\n      })\n      // 初始化选项卡\n      this.menuTabs = '0'\n    },\n  },\n  created() {\n    this.initDataList()\n    window.ths = this\n  },\n  mounted() {\n    setTimeout(() => {\n      this.initFun()\n      this.initSize()\n      this.listenKey()\n    })\n  },\n  methods: {\n    handleCopyIndex() {\n      this.$Clipboard({\n        text: this.activeObj.index,\n      })\n        .then(() => {\n          this.$message.success('复制成功')\n        })\n        .catch(() => {\n          this.$message.error('复制失败')\n        })\n    },\n    handleTabClick(tab) {\n      if (tab.name == '1') {\n        this.handleRes(false)\n      }\n    },\n    handleImport(file, fileLis) {\n      this.$Export.xlsx(file.raw).then((data) => {\n        this.activeObj.data = data.results\n        this.$message.success('导入成功')\n        this.handleRes()\n      })\n    },\n    handleRefresh() {\n      return this.$refs.container.handleRefresh()\n    },\n    handleRes(tip = true) {\n      if (this.isSql) {\n        this.$set(\n          this.activeObj,\n          'sql',\n          crypto.encrypt(\n            JSON.stringify({\n              id: this.db,\n              sql: this.sql,\n            })\n          )\n        )\n      }\n      this.handleRefresh().then((res = {}) => {\n        if (!this.validatenull(res)) {\n          this.dataRes = JSON.stringify(res, null, 4)\n        } else {\n          this.dataRes = ''\n        }\n        if (tip) this.$message.success('请求数据成功')\n      })\n    },\n    handleSetting() {\n      this.dataTabs = 0\n      this.dataRes = ''\n      this.handleRes(false)\n      this.show = true\n    },\n    initDataList() {\n      getDbList({\n        current: 1,\n        size: 100,\n      }).then((res) => {\n        const data = res.data.data\n        this.DIC.sql = data.records.map((ele) => {\n          return {\n            label: ele.name,\n            value: ele.id,\n          }\n        })\n      })\n      getRecordList({\n        current: 1,\n        size: 100,\n      }).then((res) => {\n        const data = res.data.data\n        this.DIC.data = data.records.map((ele) => {\n          return {\n            label: ele.name,\n            value: ele.id,\n          }\n        })\n      })\n    },\n    closeCode(value) {\n      if (this.configData.includes(this.code.type)) {\n        this.config[this.code.type] = value\n      } else {\n        this.activeObj[this.code.type] = value\n      }\n      this.handleRes(false)\n    },\n    openCode(type, title) {\n      this.code.type = type\n      this.code.title = title\n      if (this.configData.includes(type)) {\n        this.code.obj = this.config[type]\n      } else {\n        this.code.obj = this.activeObj[type]\n      }\n      this.code.box = true\n    },\n    initFun() {\n      ;['setScale'].forEach((ele) => {\n        this[ele] = this.$refs.container[ele]\n      })\n    },\n    // 右键菜单\n    handleContextMenu(item = {}, done) {\n      if (!item.index || this.isKeysCtrl) return\n      else if (!this.isSelectActive) {\n        this.active = [item.index]\n        this.activeIndex = item.index\n      }\n      done()\n    },\n    //监听键盘的按键\n    listenKey() {\n      let section = this.$refs.section\n      section.onkeydown = (e) => {\n        const keyCode = e.keyCode\n        e.preventDefault()\n        if (keyCode == 17) {\n          this.keys.ctrl = true\n        } else if (keyCode == 67 && this.keys.ctrl) {\n          if (!this.activeObj) return\n          this.cacheList.copy = this.deepClone(this.activeObj)\n          this.$message.success('复制组件成功')\n        } else if (keyCode == 86 && this.keys.ctrl) {\n          if (!this.cacheList.copy) return\n          this.nav.unshift(\n            this.deepClone({\n              ...this.cacheList.copy,\n              ...{\n                index: uuid(),\n                name: this.cacheList.copy.name + '（复制）',\n                left: 0,\n                top: 0,\n              },\n            })\n          )\n          this.$message.success('粘贴组件成功')\n        }\n      }\n      section.onkeyup = (e) => {\n        const keyCode = e.keyCode\n        if (keyCode == 17) {\n          this.keys.ctrl = false\n        }\n      }\n    },\n    setActive(val, result, fun) {\n      const obj = this.$refs.container.getDragObj(val)\n      if (!this.validatenull(obj)) obj[0][fun](result)\n    },\n    //批量成组\n    handleFolder() {\n      let folder = createFile()\n      this.active.forEach((index) => {\n        let { itemList, itemIndex } = this.findnav(index)\n        let obj = itemList.splice(itemIndex, 1)[0]\n        folder.children.push(obj)\n      })\n      this.nav.push(folder)\n      this.handleInitActive()\n    },\n    //批量删除\n    handleDeleteSelect() {\n      this.$confirm(`是否批量删除所选图层?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(() => {\n        this.active.forEach((index) => {\n          let { itemList, itemIndex } = this.findnav(index)\n          itemList.splice(itemIndex, 1)\n        })\n        this.handleInitActive()\n      })\n    },\n    validProp(name, list) {\n      if (list)\n        return (\n          list.includes(this.activeComponent.prop) || this.active.length > 1\n        )\n      return this.dicOption[name].includes(this.activeComponent.prop)\n    },\n    formatTooltip(val) {\n      return parseInt(val)\n    },\n    //打开图库\n    handleOpenImg(item, type) {\n      this.$refs.imglist.openImg(item, type)\n    },\n    //图库框回调赋值\n    handleSetimg(val, type) {\n      let params = type.split('.')[1]\n      if (type.includes('config')) {\n        this.config[params] = val\n      } else if (type.includes('activeObj.data.value')) {\n        this.activeObj.data.value = val\n      } else if (type.includes('activeObj.data')) {\n        this.activeObj.data = val\n      } else if (type.includes('activeObj')) {\n        this.activeObj[params] = val\n      } else if (type.includes('activeOption')) {\n        this.activeOption[params] = val\n      }\n    },\n    handleScroll() {\n      this.$nextTick(() => {\n        const screensRect = this.$refs.screensRef.getBoundingClientRect()\n        const canvasRect = this.$refs.canvas.getBoundingClientRect()\n        // 标尺开始的刻度\n        const startX =\n          (screensRect.left + this.thick - canvasRect.left) / this.scale\n        const startY =\n          (screensRect.top + this.thick - canvasRect.top) / this.scale\n        this.startX = startX >> 0\n        this.startY = startY >> 0\n      })\n    },\n    // 控制缩放值\n    handleWheel(e) {\n      if (e.ctrlKey || e.metaKey) {\n        e.preventDefault()\n        const nextScale = parseFloat(\n          Math.max(0.2, this.scale - e.deltaY / 500).toFixed(2)\n        )\n        this.scale = nextScale\n      }\n      this.$nextTick(() => {\n        this.handleScroll()\n      })\n    },\n    // 初始化标尺数值\n    initSize() {\n      const domW = this.$refs.section\n      let width = window.innerWidth - 520\n      let height = window.innerHeight - 80\n      domW.style.width = width + 'px'\n      domW.style.height = height + 'px'\n      this.width = width\n      this.height = height\n      // 画布阴影部分\n      this.shadow = { x: 0, y: 0, width, height }\n      // 滚动居中\n      let dom = this.$refs.containerRef.getBoundingClientRect()\n      this.$refs.screensRef.scrollLeft = dom.width / 2 - 10\n      this.$refs.screensRef.scrollTop = dom.height / 2 - 50\n    },\n    // 图片点击事件\n    imgClick() {\n      this.isShowReferLine = !this.isShowReferLine\n    },\n    // 鼠标按下事件\n    dragMousedown(e) {\n      // 如果按下了空格键,且按下鼠标左键,那么鼠标变抓手,开启滚动条随鼠标拖动的操作\n      this.handleInitActive()\n      this.dragSlide = true\n      window.stardragEvent = e\n      window.startSlideX = this.$refs.screensRef.scrollLeft\n      window.startSlideY = this.$refs.screensRef.scrollTop\n    },\n    //鼠标抬起操作\n    dragMouseup() {\n      this.dragSlide = false\n    },\n    // 鼠标移动骚操作\n    dragMousemove(e) {\n      if (this.dragSlide) {\n        let x = e.clientX - window.stardragEvent.clientX\n        let y = e.clientY - window.stardragEvent.clientY\n        this.$refs.screensRef.scrollLeft = window.startSlideX - x\n        this.$refs.screensRef.scrollTop = window.startSlideY - y\n      }\n    },\n    selectNav(item) {\n      if (Array.isArray(item)) {\n        this.active = this.active.concat(item)\n      } else if (this.isKeysCtrl) {\n        this.active.push(item)\n      } else if (!this.active.includes(item)) {\n        this.active = [item]\n        this.activeIndex = item\n      }\n    },\n    recordMain(val, oldval) {\n      if (JSON.stringify(val) != this.copyNav) {\n        let newst = JSON.stringify(val)\n        if (newst != this.copyNav) {\n          this.copyNav = newst\n          this.addHistoryCache(val)\n        } else {\n          return\n        }\n      }\n    },\n    addHistoryCache(val) {\n      if (this.currentHistoryIndex + 1 < this.cacheList.history.length) {\n        this.cacheList.history.splice(this.currentHistoryIndex + 1)\n      }\n      this.cacheList.history.push({\n        nav: this.deepClone(val),\n      })\n      this.cacheList.history.splice(100)\n      this.currentHistoryIndex++\n    },\n    editorUndo() {\n      if (!this.canUndo) {\n        return\n      }\n      this.currentHistoryIndex--\n      this.relapceEditorState()\n    },\n    editorRedo() {\n      if (!this.canRedo) {\n        return\n      }\n      this.currentHistoryIndex++\n      this.relapceEditorState()\n    },\n    relapceEditorState() {\n      const prevState = this.cacheList.history[this.currentHistoryIndex]\n      this.nav = this.deepClone(prevState.nav)\n      this.copyNav = JSON.stringify(prevState.nav)\n    },\n    updateApi(params) {\n      const { url, method } = params\n      this.activeObj.url = url\n      this.activeObj.dataMethod = method\n    },\n  },\n}\n</script>\n<style lang=\"scss\">\n@import '../styles/style.scss';\n.refer-line-img {\n  position: absolute;\n  left: 0;\n  z-index: 5;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  img {\n    width: 100%;\n  }\n}\n#screens {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n}\n\n.screen-container {\n  position: relative;\n  width: 5000px;\n  height: 3000px;\n  background: url('/img/screen.png') repeat;\n}\n\n.dragghanle {\n  cursor: pointer;\n}\n.canvas {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n}\n.section {\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n}\n</style>\n"]}]}