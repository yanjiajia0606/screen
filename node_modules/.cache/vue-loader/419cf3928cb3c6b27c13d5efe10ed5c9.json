{"remainingRequest":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/subgroup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/src/page/group/subgroup.vue","mtime":1668483948375},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanjiajia/Desktop/workspace/avue-data-new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8v5rOo5YaM6Ieq5a6a5LmJ57uE5Lu2CmltcG9ydCBjb21wb25lbnRzIGZyb20gJ0AvY29tcG9uZW50cy8nCmltcG9ydCBjcnlwdG8gZnJvbSAnQC91dGlscy9jcnlwdG8nCmltcG9ydCB7IGR5bmFtaWNTcWwgfSBmcm9tICdAL2FwaS9kYicKaW1wb3J0IHsgZ2V0T2JqIGFzIGdldFJlY29yZE9iaiB9IGZyb20gJ0AvYXBpL3JlY29yZCcKaW1wb3J0IHsgZ2V0RnVuY3Rpb24gfSBmcm9tICdAL3V0aWxzL3V0aWxzJwppbXBvcnQgY29tbW9uIGZyb20gJ0AvY29uZmlnJwppbXBvcnQgZWNoYXJ0Q29tcG9uZW50cyBmcm9tICcuLi8uLi9lY2hhcnQvJwppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzdWJncm91cCcsCiAgaW5qZWN0OiBbJ2NvbnRhaW4nLCAnY29udGFpbmVyJ10sCiAgcHJvdmlkZSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRhaW46IHRoaXMuY29udGFpbiwKICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lciwKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsCiAgcHJvcHM6IHsKICAgIG5hdjogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXQogICAgICB9LAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzcWxGb3JtYXR0ZXI6IGR5bmFtaWNTcWwsCiAgICAgIHJlY29yZEZvcm1hdHRlcjogZ2V0UmVjb3JkT2JqLAogICAgICBjb21tb246IGNvbW1vbiwKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgT2JqZWN0LmtleXMoZWNoYXJ0Q29tcG9uZW50cykubWFwKChlbGUpID0+IHsKICAgICAgICBsZXQgY29tcG9uZW50ID0gZWNoYXJ0Q29tcG9uZW50c1tlbGVdCiAgICAgICAgVnVlLmNvbXBvbmVudChjb21wb25lbnQubmFtZSwgY29tcG9uZW50KQogICAgICB9KQogICAgICB0aGlzLmdldEZ1bmN0aW9uID0gZ2V0RnVuY3Rpb24KICAgIH0sCiAgICBnZXRJdGVtT2JqKCkgewogICAgICBsZXQgbGlzdCA9CiAgICAgICAgdGhpcy4kcmVmc1t0aGlzLmNvbW1vbi5OQU1FICsgdGhpcy5jb250YWluLmFjdGl2ZU9iai5pbmRleF0gfHwgW10KICAgICAgcmV0dXJuIGxpc3RbMF0KICAgIH0sCiAgICAvL+WIt+aWsOaVsOaNrgogICAgaGFuZGxlUmVmcmVzaCgpIHsKICAgICAgZGVidWdnZXIKICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuZ2V0SXRlbU9iaigpCiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCwgJ3Jlc3VsdCcpCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gcmVzdWx0LnVwZGF0ZURhdGEoKQogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKQogICAgfSwKICAgIC8v6I635Y+W5a+56LGhCiAgICBnZXREcmFnT2JqKHZhbCkgewogICAgICByZXR1cm4gdGhpcy4kcmVmc1tgJHt0aGlzLmNvbW1vbi5ERUFGTkFNRX0ke3ZhbH1gXQogICAgfSwKICAgIGhhbmRsZU1vdmUoeyBpbmRleCwgbGVmdCwgdG9wIH0pIHsKICAgICAgaWYgKHRoaXMuY29udGFpbi5hY3RpdmVJbmRleCAhPT0gaW5kZXgpIHJldHVybgogICAgICB0aGlzLmNvbnRhaW4uYWN0aXZlTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuY29udGFpbi5hY3RpdmVJbmRleCA9PT0gaXRlbS5pbmRleCkgcmV0dXJuCiAgICAgICAgaXRlbS5sZWZ0ID0gaXRlbS5sZWZ0ICsgbGVmdAogICAgICAgIGl0ZW0udG9wID0gaXRlbS50b3AgKyB0b3AKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVPdmVyKHsgaW5kZXggfSkgewogICAgICB0aGlzLmNvbnRhaW4ub3ZlcmFjdGl2ZSA9IGluZGV4CiAgICB9LAogICAgaGFuZGxlRm9jdXMoeyBpbmRleCB9KSB7CiAgICAgIHRoaXMuY29udGFpbi5hY3RpdmVJbmRleCA9IGluZGV4CiAgICAgIHRoaXMuY29udGFpbmVyLmdyYWRlRmxhZyA9IHRydWUKICAgICAgdGhpcy5jb250YWluLnNlbGVjdE5hdihpbmRleCkKICAgIH0sCiAgICBoYW5kbGVCbHVyKHsgaW5kZXgsIGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCB9KSB7CiAgICAgIGlmIChpbmRleCAhPT0gdGhpcy5jb250YWluLmFjdGl2ZUluZGV4KSByZXR1cm4KICAgICAgdGhpcy5jb250YWluZXIuZ3JhZGVGbGFnID0gZmFsc2UKICAgICAgdGhpcy4kc2V0KHRoaXMuY29udGFpbi5hY3RpdmVPYmouY29tcG9uZW50LCAnd2lkdGgnLCB3aWR0aCkKICAgICAgdGhpcy4kc2V0KHRoaXMuY29udGFpbi5hY3RpdmVPYmouY29tcG9uZW50LCAnaGVpZ2h0JywgaGVpZ2h0KQogICAgICB0aGlzLiRzZXQodGhpcy5jb250YWluLmFjdGl2ZU9iaiwgJ2xlZnQnLCBsZWZ0KQogICAgICB0aGlzLiRzZXQodGhpcy5jb250YWluLmFjdGl2ZU9iaiwgJ3RvcCcsIHRvcCkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["subgroup.vue"],"names":[],"mappings":";AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"subgroup.vue","sourceRoot":"src/page/group","sourcesContent":["<template>\n  <div>\n    <template v-for=\"item in nav\">\n      <div\n        :key=\"item.index\"\n        v-if=\"!item.children\"\n        v-contextmenu=\"{\n          id: contain.menuId,\n          event: contain.handleContextMenu,\n          value: item,\n        }\"\n      >\n        <avue-draggable\n          v-bind=\"item\"\n          :scale=\"container.stepScale\"\n          :disabled=\"!contain.menuFlag\"\n          :step=\"container.stepScale\"\n          :width=\"item.component.width\"\n          :height=\"item.component.height\"\n          :ref=\"common.DEAFNAME + item.index\"\n          :id=\"common.DEAFNAME + item.index\"\n          :active-flag=\"contain.active.includes(item.index)\"\n          v-show=\"!item.display\"\n          @move=\"handleMove\"\n          @over=\"handleOver\"\n          @focus=\"handleFocus\"\n          @blur=\"handleBlur\"\n        >\n          <component\n            :ref=\"common.NAME + item.index\"\n            :id=\"common.NAME + item.index\"\n            :is=\"common.COMPNAME + item.component.name\"\n            v-bind=\"item\"\n            :component=\"item.component\"\n            :data-formatter=\"getFunction(item.dataFormatter)\"\n            :click-formatter=\"getFunction(item.clickFormatter, true)\"\n            :echart-formatter=\"getFunction(item.echartFormatter)\"\n            :label-formatter=\"getFunction(item.labelFormatter)\"\n            :styles-formatter=\"getFunction(item.stylesFormatter)\"\n            :formatter=\"getFunction(item.formatter)\"\n            :sql-formatter=\"sqlFormatter\"\n            :record-formatter=\"recordFormatter\"\n            :width=\"item.component.width\"\n            :height=\"item.component.height\"\n            :disabled=\"!contain.menuFlag\"\n            :scale=\"container.stepScale\"\n            title=\"\"\n          />\n        </avue-draggable>\n        <subgroup :nav=\"item.children\"></subgroup>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\n//注册自定义组件\nimport components from '@/components/'\nimport crypto from '@/utils/crypto'\nimport { dynamicSql } from '@/api/db'\nimport { getObj as getRecordObj } from '@/api/record'\nimport { getFunction } from '@/utils/utils'\nimport common from '@/config'\nimport echartComponents from '../../echart/'\nimport Vue from 'vue'\nexport default {\n  name: 'subgroup',\n  inject: ['contain', 'container'],\n  provide() {\n    return {\n      contain: this.contain,\n      container: this.container,\n    }\n  },\n  components: components,\n  props: {\n    nav: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n  },\n  data() {\n    return {\n      sqlFormatter: dynamicSql,\n      recordFormatter: getRecordObj,\n      common: common,\n    }\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    init() {\n      Object.keys(echartComponents).map((ele) => {\n        let component = echartComponents[ele]\n        Vue.component(component.name, component)\n      })\n      this.getFunction = getFunction\n    },\n    getItemObj() {\n      let list =\n        this.$refs[this.common.NAME + this.contain.activeObj.index] || []\n      return list[0]\n    },\n    //刷新数据\n    handleRefresh() {\n      debugger\n      let result = this.getItemObj()\n      console.log(result, 'result')\n      if (result) {\n        return result.updateData()\n      }\n      return Promise.resolve()\n    },\n    //获取对象\n    getDragObj(val) {\n      return this.$refs[`${this.common.DEAFNAME}${val}`]\n    },\n    handleMove({ index, left, top }) {\n      if (this.contain.activeIndex !== index) return\n      this.contain.activeList.forEach((item) => {\n        if (this.contain.activeIndex === item.index) return\n        item.left = item.left + left\n        item.top = item.top + top\n      })\n    },\n    handleOver({ index }) {\n      this.contain.overactive = index\n    },\n    handleFocus({ index }) {\n      this.contain.activeIndex = index\n      this.container.gradeFlag = true\n      this.contain.selectNav(index)\n    },\n    handleBlur({ index, left, top, width, height }) {\n      if (index !== this.contain.activeIndex) return\n      this.container.gradeFlag = false\n      this.$set(this.contain.activeObj.component, 'width', width)\n      this.$set(this.contain.activeObj.component, 'height', height)\n      this.$set(this.contain.activeObj, 'left', left)\n      this.$set(this.contain.activeObj, 'top', top)\n    },\n  },\n}\n</script>\n"]}]}